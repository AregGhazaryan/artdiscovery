/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "./node_modules/axios/index.js":
/*!*************************************!*\
  !*** ./node_modules/axios/index.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./lib/axios */ "./node_modules/axios/lib/axios.js");

/***/ }),

/***/ "./node_modules/axios/lib/adapters/xhr.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/adapters/xhr.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var settle = __webpack_require__(/*! ./../core/settle */ "./node_modules/axios/lib/core/settle.js");
var buildURL = __webpack_require__(/*! ./../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var parseHeaders = __webpack_require__(/*! ./../helpers/parseHeaders */ "./node_modules/axios/lib/helpers/parseHeaders.js");
var isURLSameOrigin = __webpack_require__(/*! ./../helpers/isURLSameOrigin */ "./node_modules/axios/lib/helpers/isURLSameOrigin.js");
var createError = __webpack_require__(/*! ../core/createError */ "./node_modules/axios/lib/core/createError.js");

module.exports = function xhrAdapter(config) {
  return new Promise(function dispatchXhrRequest(resolve, reject) {
    var requestData = config.data;
    var requestHeaders = config.headers;

    if (utils.isFormData(requestData)) {
      delete requestHeaders['Content-Type']; // Let the browser set it
    }

    var request = new XMLHttpRequest();

    // HTTP basic authentication
    if (config.auth) {
      var username = config.auth.username || '';
      var password = config.auth.password || '';
      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);
    }

    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);

    // Set the request timeout in MS
    request.timeout = config.timeout;

    // Listen for ready state
    request.onreadystatechange = function handleLoad() {
      if (!request || request.readyState !== 4) {
        return;
      }

      // The request errored out and we didn't get a response, this will be
      // handled by onerror instead
      // With one exception: request that using file: protocol, most browsers
      // will return status as 0 even though it's a successful request
      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {
        return;
      }

      // Prepare the response
      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;
      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;
      var response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config: config,
        request: request
      };

      settle(resolve, reject, response);

      // Clean up request
      request = null;
    };

    // Handle browser request cancellation (as opposed to a manual cancellation)
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }

      reject(createError('Request aborted', config, 'ECONNABORTED', request));

      // Clean up request
      request = null;
    };

    // Handle low level network errors
    request.onerror = function handleError() {
      // Real errors are hidden from us by the browser
      // onerror should only fire if it's a network error
      reject(createError('Network Error', config, null, request));

      // Clean up request
      request = null;
    };

    // Handle timeout
    request.ontimeout = function handleTimeout() {
      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',
        request));

      // Clean up request
      request = null;
    };

    // Add xsrf header
    // This is only done if running in a standard browser environment.
    // Specifically not if we're in a web worker, or react-native.
    if (utils.isStandardBrowserEnv()) {
      var cookies = __webpack_require__(/*! ./../helpers/cookies */ "./node_modules/axios/lib/helpers/cookies.js");

      // Add xsrf header
      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?
        cookies.read(config.xsrfCookieName) :
        undefined;

      if (xsrfValue) {
        requestHeaders[config.xsrfHeaderName] = xsrfValue;
      }
    }

    // Add headers to the request
    if ('setRequestHeader' in request) {
      utils.forEach(requestHeaders, function setRequestHeader(val, key) {
        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {
          // Remove Content-Type if data is undefined
          delete requestHeaders[key];
        } else {
          // Otherwise add header to the request
          request.setRequestHeader(key, val);
        }
      });
    }

    // Add withCredentials to request if needed
    if (config.withCredentials) {
      request.withCredentials = true;
    }

    // Add responseType to request if needed
    if (config.responseType) {
      try {
        request.responseType = config.responseType;
      } catch (e) {
        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.
        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.
        if (config.responseType !== 'json') {
          throw e;
        }
      }
    }

    // Handle progress if needed
    if (typeof config.onDownloadProgress === 'function') {
      request.addEventListener('progress', config.onDownloadProgress);
    }

    // Not all browsers support upload events
    if (typeof config.onUploadProgress === 'function' && request.upload) {
      request.upload.addEventListener('progress', config.onUploadProgress);
    }

    if (config.cancelToken) {
      // Handle cancellation
      config.cancelToken.promise.then(function onCanceled(cancel) {
        if (!request) {
          return;
        }

        request.abort();
        reject(cancel);
        // Clean up request
        request = null;
      });
    }

    if (requestData === undefined) {
      requestData = null;
    }

    // Send the request
    request.send(requestData);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/axios.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/axios.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");
var Axios = __webpack_require__(/*! ./core/Axios */ "./node_modules/axios/lib/core/Axios.js");
var mergeConfig = __webpack_require__(/*! ./core/mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");
var defaults = __webpack_require__(/*! ./defaults */ "./node_modules/axios/lib/defaults.js");

/**
 * Create an instance of Axios
 *
 * @param {Object} defaultConfig The default config for the instance
 * @return {Axios} A new instance of Axios
 */
function createInstance(defaultConfig) {
  var context = new Axios(defaultConfig);
  var instance = bind(Axios.prototype.request, context);

  // Copy axios.prototype to instance
  utils.extend(instance, Axios.prototype, context);

  // Copy context to instance
  utils.extend(instance, context);

  return instance;
}

// Create the default instance to be exported
var axios = createInstance(defaults);

// Expose Axios class to allow class inheritance
axios.Axios = Axios;

// Factory for creating new instances
axios.create = function create(instanceConfig) {
  return createInstance(mergeConfig(axios.defaults, instanceConfig));
};

// Expose Cancel & CancelToken
axios.Cancel = __webpack_require__(/*! ./cancel/Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");
axios.CancelToken = __webpack_require__(/*! ./cancel/CancelToken */ "./node_modules/axios/lib/cancel/CancelToken.js");
axios.isCancel = __webpack_require__(/*! ./cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");

// Expose all/spread
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = __webpack_require__(/*! ./helpers/spread */ "./node_modules/axios/lib/helpers/spread.js");

module.exports = axios;

// Allow use of default import syntax in TypeScript
module.exports.default = axios;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/Cancel.js":
/*!*************************************************!*\
  !*** ./node_modules/axios/lib/cancel/Cancel.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A `Cancel` is an object that is thrown when an operation is canceled.
 *
 * @class
 * @param {string=} message The message.
 */
function Cancel(message) {
  this.message = message;
}

Cancel.prototype.toString = function toString() {
  return 'Cancel' + (this.message ? ': ' + this.message : '');
};

Cancel.prototype.__CANCEL__ = true;

module.exports = Cancel;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/CancelToken.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/cancel/CancelToken.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var Cancel = __webpack_require__(/*! ./Cancel */ "./node_modules/axios/lib/cancel/Cancel.js");

/**
 * A `CancelToken` is an object that can be used to request cancellation of an operation.
 *
 * @class
 * @param {Function} executor The executor function.
 */
function CancelToken(executor) {
  if (typeof executor !== 'function') {
    throw new TypeError('executor must be a function.');
  }

  var resolvePromise;
  this.promise = new Promise(function promiseExecutor(resolve) {
    resolvePromise = resolve;
  });

  var token = this;
  executor(function cancel(message) {
    if (token.reason) {
      // Cancellation has already been requested
      return;
    }

    token.reason = new Cancel(message);
    resolvePromise(token.reason);
  });
}

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
CancelToken.prototype.throwIfRequested = function throwIfRequested() {
  if (this.reason) {
    throw this.reason;
  }
};

/**
 * Returns an object that contains a new `CancelToken` and a function that, when called,
 * cancels the `CancelToken`.
 */
CancelToken.source = function source() {
  var cancel;
  var token = new CancelToken(function executor(c) {
    cancel = c;
  });
  return {
    token: token,
    cancel: cancel
  };
};

module.exports = CancelToken;


/***/ }),

/***/ "./node_modules/axios/lib/cancel/isCancel.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/cancel/isCancel.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function isCancel(value) {
  return !!(value && value.__CANCEL__);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/Axios.js":
/*!**********************************************!*\
  !*** ./node_modules/axios/lib/core/Axios.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var buildURL = __webpack_require__(/*! ../helpers/buildURL */ "./node_modules/axios/lib/helpers/buildURL.js");
var InterceptorManager = __webpack_require__(/*! ./InterceptorManager */ "./node_modules/axios/lib/core/InterceptorManager.js");
var dispatchRequest = __webpack_require__(/*! ./dispatchRequest */ "./node_modules/axios/lib/core/dispatchRequest.js");
var mergeConfig = __webpack_require__(/*! ./mergeConfig */ "./node_modules/axios/lib/core/mergeConfig.js");

/**
 * Create a new instance of Axios
 *
 * @param {Object} instanceConfig The default config for the instance
 */
function Axios(instanceConfig) {
  this.defaults = instanceConfig;
  this.interceptors = {
    request: new InterceptorManager(),
    response: new InterceptorManager()
  };
}

/**
 * Dispatch a request
 *
 * @param {Object} config The config specific for this request (merged with this.defaults)
 */
Axios.prototype.request = function request(config) {
  /*eslint no-param-reassign:0*/
  // Allow for axios('example/url'[, config]) a la fetch API
  if (typeof config === 'string') {
    config = arguments[1] || {};
    config.url = arguments[0];
  } else {
    config = config || {};
  }

  config = mergeConfig(this.defaults, config);
  config.method = config.method ? config.method.toLowerCase() : 'get';

  // Hook up interceptors middleware
  var chain = [dispatchRequest, undefined];
  var promise = Promise.resolve(config);

  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
    chain.unshift(interceptor.fulfilled, interceptor.rejected);
  });

  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
    chain.push(interceptor.fulfilled, interceptor.rejected);
  });

  while (chain.length) {
    promise = promise.then(chain.shift(), chain.shift());
  }

  return promise;
};

Axios.prototype.getUri = function getUri(config) {
  config = mergeConfig(this.defaults, config);
  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\?/, '');
};

// Provide aliases for supported request methods
utils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, config) {
    return this.request(utils.merge(config || {}, {
      method: method,
      url: url
    }));
  };
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  /*eslint func-names:0*/
  Axios.prototype[method] = function(url, data, config) {
    return this.request(utils.merge(config || {}, {
      method: method,
      url: url,
      data: data
    }));
  };
});

module.exports = Axios;


/***/ }),

/***/ "./node_modules/axios/lib/core/InterceptorManager.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/core/InterceptorManager.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function InterceptorManager() {
  this.handlers = [];
}

/**
 * Add a new interceptor to the stack
 *
 * @param {Function} fulfilled The function to handle `then` for a `Promise`
 * @param {Function} rejected The function to handle `reject` for a `Promise`
 *
 * @return {Number} An ID used to remove interceptor later
 */
InterceptorManager.prototype.use = function use(fulfilled, rejected) {
  this.handlers.push({
    fulfilled: fulfilled,
    rejected: rejected
  });
  return this.handlers.length - 1;
};

/**
 * Remove an interceptor from the stack
 *
 * @param {Number} id The ID that was returned by `use`
 */
InterceptorManager.prototype.eject = function eject(id) {
  if (this.handlers[id]) {
    this.handlers[id] = null;
  }
};

/**
 * Iterate over all the registered interceptors
 *
 * This method is particularly useful for skipping over any
 * interceptors that may have become `null` calling `eject`.
 *
 * @param {Function} fn The function to call for each interceptor
 */
InterceptorManager.prototype.forEach = function forEach(fn) {
  utils.forEach(this.handlers, function forEachHandler(h) {
    if (h !== null) {
      fn(h);
    }
  });
};

module.exports = InterceptorManager;


/***/ }),

/***/ "./node_modules/axios/lib/core/createError.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/createError.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var enhanceError = __webpack_require__(/*! ./enhanceError */ "./node_modules/axios/lib/core/enhanceError.js");

/**
 * Create an Error with the specified message, config, error code, request and response.
 *
 * @param {string} message The error message.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The created error.
 */
module.exports = function createError(message, config, code, request, response) {
  var error = new Error(message);
  return enhanceError(error, config, code, request, response);
};


/***/ }),

/***/ "./node_modules/axios/lib/core/dispatchRequest.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/core/dispatchRequest.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");
var transformData = __webpack_require__(/*! ./transformData */ "./node_modules/axios/lib/core/transformData.js");
var isCancel = __webpack_require__(/*! ../cancel/isCancel */ "./node_modules/axios/lib/cancel/isCancel.js");
var defaults = __webpack_require__(/*! ../defaults */ "./node_modules/axios/lib/defaults.js");
var isAbsoluteURL = __webpack_require__(/*! ./../helpers/isAbsoluteURL */ "./node_modules/axios/lib/helpers/isAbsoluteURL.js");
var combineURLs = __webpack_require__(/*! ./../helpers/combineURLs */ "./node_modules/axios/lib/helpers/combineURLs.js");

/**
 * Throws a `Cancel` if cancellation has been requested.
 */
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
}

/**
 * Dispatch a request to the server using the configured adapter.
 *
 * @param {object} config The config that is to be used for the request
 * @returns {Promise} The Promise to be fulfilled
 */
module.exports = function dispatchRequest(config) {
  throwIfCancellationRequested(config);

  // Support baseURL config
  if (config.baseURL && !isAbsoluteURL(config.url)) {
    config.url = combineURLs(config.baseURL, config.url);
  }

  // Ensure headers exist
  config.headers = config.headers || {};

  // Transform request data
  config.data = transformData(
    config.data,
    config.headers,
    config.transformRequest
  );

  // Flatten headers
  config.headers = utils.merge(
    config.headers.common || {},
    config.headers[config.method] || {},
    config.headers || {}
  );

  utils.forEach(
    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],
    function cleanHeaderConfig(method) {
      delete config.headers[method];
    }
  );

  var adapter = config.adapter || defaults.adapter;

  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);

    // Transform response data
    response.data = transformData(
      response.data,
      response.headers,
      config.transformResponse
    );

    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);

      // Transform response data
      if (reason && reason.response) {
        reason.response.data = transformData(
          reason.response.data,
          reason.response.headers,
          config.transformResponse
        );
      }
    }

    return Promise.reject(reason);
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/core/enhanceError.js":
/*!*****************************************************!*\
  !*** ./node_modules/axios/lib/core/enhanceError.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Update an Error with the specified config, error code, and response.
 *
 * @param {Error} error The error to update.
 * @param {Object} config The config.
 * @param {string} [code] The error code (for example, 'ECONNABORTED').
 * @param {Object} [request] The request.
 * @param {Object} [response] The response.
 * @returns {Error} The error.
 */
module.exports = function enhanceError(error, config, code, request, response) {
  error.config = config;
  if (code) {
    error.code = code;
  }

  error.request = request;
  error.response = response;
  error.isAxiosError = true;

  error.toJSON = function() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: this.config,
      code: this.code
    };
  };
  return error;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/mergeConfig.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/core/mergeConfig.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Config-specific merge-function which creates a new config-object
 * by merging two configuration objects together.
 *
 * @param {Object} config1
 * @param {Object} config2
 * @returns {Object} New object resulting from merging config2 to config1
 */
module.exports = function mergeConfig(config1, config2) {
  // eslint-disable-next-line no-param-reassign
  config2 = config2 || {};
  var config = {};

  utils.forEach(['url', 'method', 'params', 'data'], function valueFromConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    }
  });

  utils.forEach(['headers', 'auth', 'proxy'], function mergeDeepProperties(prop) {
    if (utils.isObject(config2[prop])) {
      config[prop] = utils.deepMerge(config1[prop], config2[prop]);
    } else if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (utils.isObject(config1[prop])) {
      config[prop] = utils.deepMerge(config1[prop]);
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  utils.forEach([
    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',
    'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',
    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength',
    'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken',
    'socketPath'
  ], function defaultToConfig2(prop) {
    if (typeof config2[prop] !== 'undefined') {
      config[prop] = config2[prop];
    } else if (typeof config1[prop] !== 'undefined') {
      config[prop] = config1[prop];
    }
  });

  return config;
};


/***/ }),

/***/ "./node_modules/axios/lib/core/settle.js":
/*!***********************************************!*\
  !*** ./node_modules/axios/lib/core/settle.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var createError = __webpack_require__(/*! ./createError */ "./node_modules/axios/lib/core/createError.js");

/**
 * Resolve or reject a Promise based on response status.
 *
 * @param {Function} resolve A function that resolves the promise.
 * @param {Function} reject A function that rejects the promise.
 * @param {object} response The response.
 */
module.exports = function settle(resolve, reject, response) {
  var validateStatus = response.config.validateStatus;
  if (!validateStatus || validateStatus(response.status)) {
    resolve(response);
  } else {
    reject(createError(
      'Request failed with status code ' + response.status,
      response.config,
      null,
      response.request,
      response
    ));
  }
};


/***/ }),

/***/ "./node_modules/axios/lib/core/transformData.js":
/*!******************************************************!*\
  !*** ./node_modules/axios/lib/core/transformData.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

/**
 * Transform the data for a request or a response
 *
 * @param {Object|String} data The data to be transformed
 * @param {Array} headers The headers for the request or response
 * @param {Array|Function} fns A single function or Array of functions
 * @returns {*} The resulting transformed data
 */
module.exports = function transformData(data, headers, fns) {
  /*eslint no-param-reassign:0*/
  utils.forEach(fns, function transform(fn) {
    data = fn(data, headers);
  });

  return data;
};


/***/ }),

/***/ "./node_modules/axios/lib/defaults.js":
/*!********************************************!*\
  !*** ./node_modules/axios/lib/defaults.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

var utils = __webpack_require__(/*! ./utils */ "./node_modules/axios/lib/utils.js");
var normalizeHeaderName = __webpack_require__(/*! ./helpers/normalizeHeaderName */ "./node_modules/axios/lib/helpers/normalizeHeaderName.js");

var DEFAULT_CONTENT_TYPE = {
  'Content-Type': 'application/x-www-form-urlencoded'
};

function setContentTypeIfUnset(headers, value) {
  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {
    headers['Content-Type'] = value;
  }
}

function getDefaultAdapter() {
  var adapter;
  // Only Node.JS has a process variable that is of [[Class]] process
  if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {
    // For node use HTTP adapter
    adapter = __webpack_require__(/*! ./adapters/http */ "./node_modules/axios/lib/adapters/xhr.js");
  } else if (typeof XMLHttpRequest !== 'undefined') {
    // For browsers use XHR adapter
    adapter = __webpack_require__(/*! ./adapters/xhr */ "./node_modules/axios/lib/adapters/xhr.js");
  }
  return adapter;
}

var defaults = {
  adapter: getDefaultAdapter(),

  transformRequest: [function transformRequest(data, headers) {
    normalizeHeaderName(headers, 'Accept');
    normalizeHeaderName(headers, 'Content-Type');
    if (utils.isFormData(data) ||
      utils.isArrayBuffer(data) ||
      utils.isBuffer(data) ||
      utils.isStream(data) ||
      utils.isFile(data) ||
      utils.isBlob(data)
    ) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');
      return data.toString();
    }
    if (utils.isObject(data)) {
      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');
      return JSON.stringify(data);
    }
    return data;
  }],

  transformResponse: [function transformResponse(data) {
    /*eslint no-param-reassign:0*/
    if (typeof data === 'string') {
      try {
        data = JSON.parse(data);
      } catch (e) { /* Ignore */ }
    }
    return data;
  }],

  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,

  xsrfCookieName: 'XSRF-TOKEN',
  xsrfHeaderName: 'X-XSRF-TOKEN',

  maxContentLength: -1,

  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  }
};

defaults.headers = {
  common: {
    'Accept': 'application/json, text/plain, */*'
  }
};

utils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});

utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});

module.exports = defaults;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/axios/lib/helpers/bind.js":
/*!************************************************!*\
  !*** ./node_modules/axios/lib/helpers/bind.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = function bind(fn, thisArg) {
  return function wrap() {
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }
    return fn.apply(thisArg, args);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/buildURL.js":
/*!****************************************************!*\
  !*** ./node_modules/axios/lib/helpers/buildURL.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

function encode(val) {
  return encodeURIComponent(val).
    replace(/%40/gi, '@').
    replace(/%3A/gi, ':').
    replace(/%24/g, '$').
    replace(/%2C/gi, ',').
    replace(/%20/g, '+').
    replace(/%5B/gi, '[').
    replace(/%5D/gi, ']');
}

/**
 * Build a URL by appending params to the end
 *
 * @param {string} url The base of the url (e.g., http://www.google.com)
 * @param {object} [params] The params to be appended
 * @returns {string} The formatted url
 */
module.exports = function buildURL(url, params, paramsSerializer) {
  /*eslint no-param-reassign:0*/
  if (!params) {
    return url;
  }

  var serializedParams;
  if (paramsSerializer) {
    serializedParams = paramsSerializer(params);
  } else if (utils.isURLSearchParams(params)) {
    serializedParams = params.toString();
  } else {
    var parts = [];

    utils.forEach(params, function serialize(val, key) {
      if (val === null || typeof val === 'undefined') {
        return;
      }

      if (utils.isArray(val)) {
        key = key + '[]';
      } else {
        val = [val];
      }

      utils.forEach(val, function parseValue(v) {
        if (utils.isDate(v)) {
          v = v.toISOString();
        } else if (utils.isObject(v)) {
          v = JSON.stringify(v);
        }
        parts.push(encode(key) + '=' + encode(v));
      });
    });

    serializedParams = parts.join('&');
  }

  if (serializedParams) {
    var hashmarkIndex = url.indexOf('#');
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }

    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;
  }

  return url;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/combineURLs.js":
/*!*******************************************************!*\
  !*** ./node_modules/axios/lib/helpers/combineURLs.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Creates a new URL by combining the specified URLs
 *
 * @param {string} baseURL The base URL
 * @param {string} relativeURL The relative URL
 * @returns {string} The combined URL
 */
module.exports = function combineURLs(baseURL, relativeURL) {
  return relativeURL
    ? baseURL.replace(/\/+$/, '') + '/' + relativeURL.replace(/^\/+/, '')
    : baseURL;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/cookies.js":
/*!***************************************************!*\
  !*** ./node_modules/axios/lib/helpers/cookies.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs support document.cookie
    (function standardBrowserEnv() {
      return {
        write: function write(name, value, expires, path, domain, secure) {
          var cookie = [];
          cookie.push(name + '=' + encodeURIComponent(value));

          if (utils.isNumber(expires)) {
            cookie.push('expires=' + new Date(expires).toGMTString());
          }

          if (utils.isString(path)) {
            cookie.push('path=' + path);
          }

          if (utils.isString(domain)) {
            cookie.push('domain=' + domain);
          }

          if (secure === true) {
            cookie.push('secure');
          }

          document.cookie = cookie.join('; ');
        },

        read: function read(name) {
          var match = document.cookie.match(new RegExp('(^|;\\s*)(' + name + ')=([^;]*)'));
          return (match ? decodeURIComponent(match[3]) : null);
        },

        remove: function remove(name) {
          this.write(name, '', Date.now() - 86400000);
        }
      };
    })() :

  // Non standard browser env (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return {
        write: function write() {},
        read: function read() { return null; },
        remove: function remove() {}
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isAbsoluteURL.js":
/*!*********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isAbsoluteURL.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Determines whether the specified URL is absolute
 *
 * @param {string} url The URL to test
 * @returns {boolean} True if the specified URL is absolute, otherwise false
 */
module.exports = function isAbsoluteURL(url) {
  // A URL is considered absolute if it begins with "<scheme>://" or "//" (protocol-relative URL).
  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed
  // by any combination of letters, digits, plus, period, or hyphen.
  return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url);
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/isURLSameOrigin.js":
/*!***********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/isURLSameOrigin.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

module.exports = (
  utils.isStandardBrowserEnv() ?

  // Standard browser envs have full support of the APIs needed to test
  // whether the request URL is of the same origin as current location.
    (function standardBrowserEnv() {
      var msie = /(msie|trident)/i.test(navigator.userAgent);
      var urlParsingNode = document.createElement('a');
      var originURL;

      /**
    * Parse a URL to discover it's components
    *
    * @param {String} url The URL to be parsed
    * @returns {Object}
    */
      function resolveURL(url) {
        var href = url;

        if (msie) {
        // IE needs attribute set twice to normalize properties
          urlParsingNode.setAttribute('href', href);
          href = urlParsingNode.href;
        }

        urlParsingNode.setAttribute('href', href);

        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils
        return {
          href: urlParsingNode.href,
          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',
          host: urlParsingNode.host,
          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, '') : '',
          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',
          hostname: urlParsingNode.hostname,
          port: urlParsingNode.port,
          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?
            urlParsingNode.pathname :
            '/' + urlParsingNode.pathname
        };
      }

      originURL = resolveURL(window.location.href);

      /**
    * Determine if a URL shares the same origin as the current location
    *
    * @param {String} requestURL The URL to test
    * @returns {boolean} True if URL shares the same origin, otherwise false
    */
      return function isURLSameOrigin(requestURL) {
        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;
        return (parsed.protocol === originURL.protocol &&
            parsed.host === originURL.host);
      };
    })() :

  // Non standard browser envs (web workers, react-native) lack needed support.
    (function nonStandardBrowserEnv() {
      return function isURLSameOrigin() {
        return true;
      };
    })()
);


/***/ }),

/***/ "./node_modules/axios/lib/helpers/normalizeHeaderName.js":
/*!***************************************************************!*\
  !*** ./node_modules/axios/lib/helpers/normalizeHeaderName.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ../utils */ "./node_modules/axios/lib/utils.js");

module.exports = function normalizeHeaderName(headers, normalizedName) {
  utils.forEach(headers, function processHeader(value, name) {
    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {
      headers[normalizedName] = value;
      delete headers[name];
    }
  });
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/parseHeaders.js":
/*!********************************************************!*\
  !*** ./node_modules/axios/lib/helpers/parseHeaders.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var utils = __webpack_require__(/*! ./../utils */ "./node_modules/axios/lib/utils.js");

// Headers whose duplicates are ignored by node
// c.f. https://nodejs.org/api/http.html#http_message_headers
var ignoreDuplicateOf = [
  'age', 'authorization', 'content-length', 'content-type', 'etag',
  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',
  'last-modified', 'location', 'max-forwards', 'proxy-authorization',
  'referer', 'retry-after', 'user-agent'
];

/**
 * Parse headers into an object
 *
 * ```
 * Date: Wed, 27 Aug 2014 08:58:49 GMT
 * Content-Type: application/json
 * Connection: keep-alive
 * Transfer-Encoding: chunked
 * ```
 *
 * @param {String} headers Headers needing to be parsed
 * @returns {Object} Headers parsed into an object
 */
module.exports = function parseHeaders(headers) {
  var parsed = {};
  var key;
  var val;
  var i;

  if (!headers) { return parsed; }

  utils.forEach(headers.split('\n'), function parser(line) {
    i = line.indexOf(':');
    key = utils.trim(line.substr(0, i)).toLowerCase();
    val = utils.trim(line.substr(i + 1));

    if (key) {
      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {
        return;
      }
      if (key === 'set-cookie') {
        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);
      } else {
        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;
      }
    }
  });

  return parsed;
};


/***/ }),

/***/ "./node_modules/axios/lib/helpers/spread.js":
/*!**************************************************!*\
  !*** ./node_modules/axios/lib/helpers/spread.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Syntactic sugar for invoking a function and expanding an array for arguments.
 *
 * Common use case would be to use `Function.prototype.apply`.
 *
 *  ```js
 *  function f(x, y, z) {}
 *  var args = [1, 2, 3];
 *  f.apply(null, args);
 *  ```
 *
 * With `spread` this example can be re-written.
 *
 *  ```js
 *  spread(function(x, y, z) {})([1, 2, 3]);
 *  ```
 *
 * @param {Function} callback
 * @returns {Function}
 */
module.exports = function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
};


/***/ }),

/***/ "./node_modules/axios/lib/utils.js":
/*!*****************************************!*\
  !*** ./node_modules/axios/lib/utils.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var bind = __webpack_require__(/*! ./helpers/bind */ "./node_modules/axios/lib/helpers/bind.js");
var isBuffer = __webpack_require__(/*! is-buffer */ "./node_modules/is-buffer/index.js");

/*global toString:true*/

// utils is a library of generic helper functions non-specific to axios

var toString = Object.prototype.toString;

/**
 * Determine if a value is an Array
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Array, otherwise false
 */
function isArray(val) {
  return toString.call(val) === '[object Array]';
}

/**
 * Determine if a value is an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an ArrayBuffer, otherwise false
 */
function isArrayBuffer(val) {
  return toString.call(val) === '[object ArrayBuffer]';
}

/**
 * Determine if a value is a FormData
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an FormData, otherwise false
 */
function isFormData(val) {
  return (typeof FormData !== 'undefined') && (val instanceof FormData);
}

/**
 * Determine if a value is a view on an ArrayBuffer
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false
 */
function isArrayBufferView(val) {
  var result;
  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {
    result = ArrayBuffer.isView(val);
  } else {
    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);
  }
  return result;
}

/**
 * Determine if a value is a String
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a String, otherwise false
 */
function isString(val) {
  return typeof val === 'string';
}

/**
 * Determine if a value is a Number
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Number, otherwise false
 */
function isNumber(val) {
  return typeof val === 'number';
}

/**
 * Determine if a value is undefined
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if the value is undefined, otherwise false
 */
function isUndefined(val) {
  return typeof val === 'undefined';
}

/**
 * Determine if a value is an Object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is an Object, otherwise false
 */
function isObject(val) {
  return val !== null && typeof val === 'object';
}

/**
 * Determine if a value is a Date
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Date, otherwise false
 */
function isDate(val) {
  return toString.call(val) === '[object Date]';
}

/**
 * Determine if a value is a File
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a File, otherwise false
 */
function isFile(val) {
  return toString.call(val) === '[object File]';
}

/**
 * Determine if a value is a Blob
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Blob, otherwise false
 */
function isBlob(val) {
  return toString.call(val) === '[object Blob]';
}

/**
 * Determine if a value is a Function
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Function, otherwise false
 */
function isFunction(val) {
  return toString.call(val) === '[object Function]';
}

/**
 * Determine if a value is a Stream
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a Stream, otherwise false
 */
function isStream(val) {
  return isObject(val) && isFunction(val.pipe);
}

/**
 * Determine if a value is a URLSearchParams object
 *
 * @param {Object} val The value to test
 * @returns {boolean} True if value is a URLSearchParams object, otherwise false
 */
function isURLSearchParams(val) {
  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;
}

/**
 * Trim excess whitespace off the beginning and end of a string
 *
 * @param {String} str The String to trim
 * @returns {String} The String freed of excess whitespace
 */
function trim(str) {
  return str.replace(/^\s*/, '').replace(/\s*$/, '');
}

/**
 * Determine if we're running in a standard browser environment
 *
 * This allows axios to run in a web worker, and react-native.
 * Both environments support XMLHttpRequest, but not fully standard globals.
 *
 * web workers:
 *  typeof window -> undefined
 *  typeof document -> undefined
 *
 * react-native:
 *  navigator.product -> 'ReactNative'
 * nativescript
 *  navigator.product -> 'NativeScript' or 'NS'
 */
function isStandardBrowserEnv() {
  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||
                                           navigator.product === 'NativeScript' ||
                                           navigator.product === 'NS')) {
    return false;
  }
  return (
    typeof window !== 'undefined' &&
    typeof document !== 'undefined'
  );
}

/**
 * Iterate over an Array or an Object invoking a function for each item.
 *
 * If `obj` is an Array callback will be called passing
 * the value, index, and complete array for each item.
 *
 * If 'obj' is an Object callback will be called passing
 * the value, key, and complete object for each property.
 *
 * @param {Object|Array} obj The object to iterate
 * @param {Function} fn The callback to invoke for each item
 */
function forEach(obj, fn) {
  // Don't bother if no value provided
  if (obj === null || typeof obj === 'undefined') {
    return;
  }

  // Force an array if not already something iterable
  if (typeof obj !== 'object') {
    /*eslint no-param-reassign:0*/
    obj = [obj];
  }

  if (isArray(obj)) {
    // Iterate over array values
    for (var i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    // Iterate over object keys
    for (var key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        fn.call(null, obj[key], key, obj);
      }
    }
  }
}

/**
 * Accepts varargs expecting each argument to be an object, then
 * immutably merges the properties of each object and returns result.
 *
 * When multiple objects contain the same key the later object in
 * the arguments list will take precedence.
 *
 * Example:
 *
 * ```js
 * var result = merge({foo: 123}, {foo: 456});
 * console.log(result.foo); // outputs 456
 * ```
 *
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function merge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (typeof result[key] === 'object' && typeof val === 'object') {
      result[key] = merge(result[key], val);
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Function equal to merge with the difference being that no reference
 * to original objects is kept.
 *
 * @see merge
 * @param {Object} obj1 Object to merge
 * @returns {Object} Result of all merge properties
 */
function deepMerge(/* obj1, obj2, obj3, ... */) {
  var result = {};
  function assignValue(val, key) {
    if (typeof result[key] === 'object' && typeof val === 'object') {
      result[key] = deepMerge(result[key], val);
    } else if (typeof val === 'object') {
      result[key] = deepMerge({}, val);
    } else {
      result[key] = val;
    }
  }

  for (var i = 0, l = arguments.length; i < l; i++) {
    forEach(arguments[i], assignValue);
  }
  return result;
}

/**
 * Extends object a by mutably adding to it the properties of object b.
 *
 * @param {Object} a The object to be extended
 * @param {Object} b The object to copy properties from
 * @param {Object} thisArg The object to bind function to
 * @return {Object} The resulting value of object a
 */
function extend(a, b, thisArg) {
  forEach(b, function assignValue(val, key) {
    if (thisArg && typeof val === 'function') {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  });
  return a;
}

module.exports = {
  isArray: isArray,
  isArrayBuffer: isArrayBuffer,
  isBuffer: isBuffer,
  isFormData: isFormData,
  isArrayBufferView: isArrayBufferView,
  isString: isString,
  isNumber: isNumber,
  isObject: isObject,
  isUndefined: isUndefined,
  isDate: isDate,
  isFile: isFile,
  isBlob: isBlob,
  isFunction: isFunction,
  isStream: isStream,
  isURLSearchParams: isURLSearchParams,
  isStandardBrowserEnv: isStandardBrowserEnv,
  forEach: forEach,
  merge: merge,
  deepMerge: deepMerge,
  extend: extend,
  trim: trim
};


/***/ }),

/***/ "./node_modules/bootstrap/dist/js/bootstrap.js":
/*!*****************************************************!*\
  !*** ./node_modules/bootstrap/dist/js/bootstrap.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
  * Bootstrap v4.3.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
(function (global, factory) {
   true ? factory(exports, __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js"), __webpack_require__(/*! popper.js */ "./node_modules/popper.js/dist/esm/popper.js")) :
  undefined;
}(this, function (exports, $, Popper) { 'use strict';

  $ = $ && $.hasOwnProperty('default') ? $['default'] : $;
  Popper = Popper && Popper.hasOwnProperty('default') ? Popper['default'] : Popper;

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  function _objectSpread(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i] != null ? arguments[i] : {};
      var ownKeys = Object.keys(source);

      if (typeof Object.getOwnPropertySymbols === 'function') {
        ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {
          return Object.getOwnPropertyDescriptor(source, sym).enumerable;
        }));
      }

      ownKeys.forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    }

    return target;
  }

  function _inheritsLoose(subClass, superClass) {
    subClass.prototype = Object.create(superClass.prototype);
    subClass.prototype.constructor = subClass;
    subClass.__proto__ = superClass;
  }

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v4.3.1): util.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
   * --------------------------------------------------------------------------
   */
  /**
   * ------------------------------------------------------------------------
   * Private TransitionEnd Helpers
   * ------------------------------------------------------------------------
   */

  var TRANSITION_END = 'transitionend';
  var MAX_UID = 1000000;
  var MILLISECONDS_MULTIPLIER = 1000; // Shoutout AngusCroll (https://goo.gl/pxwQGp)

  function toType(obj) {
    return {}.toString.call(obj).match(/\s([a-z]+)/i)[1].toLowerCase();
  }

  function getSpecialTransitionEndEvent() {
    return {
      bindType: TRANSITION_END,
      delegateType: TRANSITION_END,
      handle: function handle(event) {
        if ($(event.target).is(this)) {
          return event.handleObj.handler.apply(this, arguments); // eslint-disable-line prefer-rest-params
        }

        return undefined; // eslint-disable-line no-undefined
      }
    };
  }

  function transitionEndEmulator(duration) {
    var _this = this;

    var called = false;
    $(this).one(Util.TRANSITION_END, function () {
      called = true;
    });
    setTimeout(function () {
      if (!called) {
        Util.triggerTransitionEnd(_this);
      }
    }, duration);
    return this;
  }

  function setTransitionEndSupport() {
    $.fn.emulateTransitionEnd = transitionEndEmulator;
    $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();
  }
  /**
   * --------------------------------------------------------------------------
   * Public Util Api
   * --------------------------------------------------------------------------
   */


  var Util = {
    TRANSITION_END: 'bsTransitionEnd',
    getUID: function getUID(prefix) {
      do {
        // eslint-disable-next-line no-bitwise
        prefix += ~~(Math.random() * MAX_UID); // "~~" acts like a faster Math.floor() here
      } while (document.getElementById(prefix));

      return prefix;
    },
    getSelectorFromElement: function getSelectorFromElement(element) {
      var selector = element.getAttribute('data-target');

      if (!selector || selector === '#') {
        var hrefAttr = element.getAttribute('href');
        selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : '';
      }

      try {
        return document.querySelector(selector) ? selector : null;
      } catch (err) {
        return null;
      }
    },
    getTransitionDurationFromElement: function getTransitionDurationFromElement(element) {
      if (!element) {
        return 0;
      } // Get transition-duration of the element


      var transitionDuration = $(element).css('transition-duration');
      var transitionDelay = $(element).css('transition-delay');
      var floatTransitionDuration = parseFloat(transitionDuration);
      var floatTransitionDelay = parseFloat(transitionDelay); // Return 0 if element or transition duration is not found

      if (!floatTransitionDuration && !floatTransitionDelay) {
        return 0;
      } // If multiple durations are defined, take the first


      transitionDuration = transitionDuration.split(',')[0];
      transitionDelay = transitionDelay.split(',')[0];
      return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER;
    },
    reflow: function reflow(element) {
      return element.offsetHeight;
    },
    triggerTransitionEnd: function triggerTransitionEnd(element) {
      $(element).trigger(TRANSITION_END);
    },
    // TODO: Remove in v5
    supportsTransitionEnd: function supportsTransitionEnd() {
      return Boolean(TRANSITION_END);
    },
    isElement: function isElement(obj) {
      return (obj[0] || obj).nodeType;
    },
    typeCheckConfig: function typeCheckConfig(componentName, config, configTypes) {
      for (var property in configTypes) {
        if (Object.prototype.hasOwnProperty.call(configTypes, property)) {
          var expectedTypes = configTypes[property];
          var value = config[property];
          var valueType = value && Util.isElement(value) ? 'element' : toType(value);

          if (!new RegExp(expectedTypes).test(valueType)) {
            throw new Error(componentName.toUpperCase() + ": " + ("Option \"" + property + "\" provided type \"" + valueType + "\" ") + ("but expected type \"" + expectedTypes + "\"."));
          }
        }
      }
    },
    findShadowRoot: function findShadowRoot(element) {
      if (!document.documentElement.attachShadow) {
        return null;
      } // Can find the shadow root otherwise it'll return the document


      if (typeof element.getRootNode === 'function') {
        var root = element.getRootNode();
        return root instanceof ShadowRoot ? root : null;
      }

      if (element instanceof ShadowRoot) {
        return element;
      } // when we don't find a shadow root


      if (!element.parentNode) {
        return null;
      }

      return Util.findShadowRoot(element.parentNode);
    }
  };
  setTransitionEndSupport();

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME = 'alert';
  var VERSION = '4.3.1';
  var DATA_KEY = 'bs.alert';
  var EVENT_KEY = "." + DATA_KEY;
  var DATA_API_KEY = '.data-api';
  var JQUERY_NO_CONFLICT = $.fn[NAME];
  var Selector = {
    DISMISS: '[data-dismiss="alert"]'
  };
  var Event = {
    CLOSE: "close" + EVENT_KEY,
    CLOSED: "closed" + EVENT_KEY,
    CLICK_DATA_API: "click" + EVENT_KEY + DATA_API_KEY
  };
  var ClassName = {
    ALERT: 'alert',
    FADE: 'fade',
    SHOW: 'show'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Alert =
  /*#__PURE__*/
  function () {
    function Alert(element) {
      this._element = element;
    } // Getters


    var _proto = Alert.prototype;

    // Public
    _proto.close = function close(element) {
      var rootElement = this._element;

      if (element) {
        rootElement = this._getRootElement(element);
      }

      var customEvent = this._triggerCloseEvent(rootElement);

      if (customEvent.isDefaultPrevented()) {
        return;
      }

      this._removeElement(rootElement);
    };

    _proto.dispose = function dispose() {
      $.removeData(this._element, DATA_KEY);
      this._element = null;
    } // Private
    ;

    _proto._getRootElement = function _getRootElement(element) {
      var selector = Util.getSelectorFromElement(element);
      var parent = false;

      if (selector) {
        parent = document.querySelector(selector);
      }

      if (!parent) {
        parent = $(element).closest("." + ClassName.ALERT)[0];
      }

      return parent;
    };

    _proto._triggerCloseEvent = function _triggerCloseEvent(element) {
      var closeEvent = $.Event(Event.CLOSE);
      $(element).trigger(closeEvent);
      return closeEvent;
    };

    _proto._removeElement = function _removeElement(element) {
      var _this = this;

      $(element).removeClass(ClassName.SHOW);

      if (!$(element).hasClass(ClassName.FADE)) {
        this._destroyElement(element);

        return;
      }

      var transitionDuration = Util.getTransitionDurationFromElement(element);
      $(element).one(Util.TRANSITION_END, function (event) {
        return _this._destroyElement(element, event);
      }).emulateTransitionEnd(transitionDuration);
    };

    _proto._destroyElement = function _destroyElement(element) {
      $(element).detach().trigger(Event.CLOSED).remove();
    } // Static
    ;

    Alert._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $element = $(this);
        var data = $element.data(DATA_KEY);

        if (!data) {
          data = new Alert(this);
          $element.data(DATA_KEY, data);
        }

        if (config === 'close') {
          data[config](this);
        }
      });
    };

    Alert._handleDismiss = function _handleDismiss(alertInstance) {
      return function (event) {
        if (event) {
          event.preventDefault();
        }

        alertInstance.close(this);
      };
    };

    _createClass(Alert, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION;
      }
    }]);

    return Alert;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event.CLICK_DATA_API, Selector.DISMISS, Alert._handleDismiss(new Alert()));
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME] = Alert._jQueryInterface;
  $.fn[NAME].Constructor = Alert;

  $.fn[NAME].noConflict = function () {
    $.fn[NAME] = JQUERY_NO_CONFLICT;
    return Alert._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$1 = 'button';
  var VERSION$1 = '4.3.1';
  var DATA_KEY$1 = 'bs.button';
  var EVENT_KEY$1 = "." + DATA_KEY$1;
  var DATA_API_KEY$1 = '.data-api';
  var JQUERY_NO_CONFLICT$1 = $.fn[NAME$1];
  var ClassName$1 = {
    ACTIVE: 'active',
    BUTTON: 'btn',
    FOCUS: 'focus'
  };
  var Selector$1 = {
    DATA_TOGGLE_CARROT: '[data-toggle^="button"]',
    DATA_TOGGLE: '[data-toggle="buttons"]',
    INPUT: 'input:not([type="hidden"])',
    ACTIVE: '.active',
    BUTTON: '.btn'
  };
  var Event$1 = {
    CLICK_DATA_API: "click" + EVENT_KEY$1 + DATA_API_KEY$1,
    FOCUS_BLUR_DATA_API: "focus" + EVENT_KEY$1 + DATA_API_KEY$1 + " " + ("blur" + EVENT_KEY$1 + DATA_API_KEY$1)
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Button =
  /*#__PURE__*/
  function () {
    function Button(element) {
      this._element = element;
    } // Getters


    var _proto = Button.prototype;

    // Public
    _proto.toggle = function toggle() {
      var triggerChangeEvent = true;
      var addAriaPressed = true;
      var rootElement = $(this._element).closest(Selector$1.DATA_TOGGLE)[0];

      if (rootElement) {
        var input = this._element.querySelector(Selector$1.INPUT);

        if (input) {
          if (input.type === 'radio') {
            if (input.checked && this._element.classList.contains(ClassName$1.ACTIVE)) {
              triggerChangeEvent = false;
            } else {
              var activeElement = rootElement.querySelector(Selector$1.ACTIVE);

              if (activeElement) {
                $(activeElement).removeClass(ClassName$1.ACTIVE);
              }
            }
          }

          if (triggerChangeEvent) {
            if (input.hasAttribute('disabled') || rootElement.hasAttribute('disabled') || input.classList.contains('disabled') || rootElement.classList.contains('disabled')) {
              return;
            }

            input.checked = !this._element.classList.contains(ClassName$1.ACTIVE);
            $(input).trigger('change');
          }

          input.focus();
          addAriaPressed = false;
        }
      }

      if (addAriaPressed) {
        this._element.setAttribute('aria-pressed', !this._element.classList.contains(ClassName$1.ACTIVE));
      }

      if (triggerChangeEvent) {
        $(this._element).toggleClass(ClassName$1.ACTIVE);
      }
    };

    _proto.dispose = function dispose() {
      $.removeData(this._element, DATA_KEY$1);
      this._element = null;
    } // Static
    ;

    Button._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$1);

        if (!data) {
          data = new Button(this);
          $(this).data(DATA_KEY$1, data);
        }

        if (config === 'toggle') {
          data[config]();
        }
      });
    };

    _createClass(Button, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$1;
      }
    }]);

    return Button;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event$1.CLICK_DATA_API, Selector$1.DATA_TOGGLE_CARROT, function (event) {
    event.preventDefault();
    var button = event.target;

    if (!$(button).hasClass(ClassName$1.BUTTON)) {
      button = $(button).closest(Selector$1.BUTTON);
    }

    Button._jQueryInterface.call($(button), 'toggle');
  }).on(Event$1.FOCUS_BLUR_DATA_API, Selector$1.DATA_TOGGLE_CARROT, function (event) {
    var button = $(event.target).closest(Selector$1.BUTTON)[0];
    $(button).toggleClass(ClassName$1.FOCUS, /^focus(in)?$/.test(event.type));
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$1] = Button._jQueryInterface;
  $.fn[NAME$1].Constructor = Button;

  $.fn[NAME$1].noConflict = function () {
    $.fn[NAME$1] = JQUERY_NO_CONFLICT$1;
    return Button._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$2 = 'carousel';
  var VERSION$2 = '4.3.1';
  var DATA_KEY$2 = 'bs.carousel';
  var EVENT_KEY$2 = "." + DATA_KEY$2;
  var DATA_API_KEY$2 = '.data-api';
  var JQUERY_NO_CONFLICT$2 = $.fn[NAME$2];
  var ARROW_LEFT_KEYCODE = 37; // KeyboardEvent.which value for left arrow key

  var ARROW_RIGHT_KEYCODE = 39; // KeyboardEvent.which value for right arrow key

  var TOUCHEVENT_COMPAT_WAIT = 500; // Time for mouse compat events to fire after touch

  var SWIPE_THRESHOLD = 40;
  var Default = {
    interval: 5000,
    keyboard: true,
    slide: false,
    pause: 'hover',
    wrap: true,
    touch: true
  };
  var DefaultType = {
    interval: '(number|boolean)',
    keyboard: 'boolean',
    slide: '(boolean|string)',
    pause: '(string|boolean)',
    wrap: 'boolean',
    touch: 'boolean'
  };
  var Direction = {
    NEXT: 'next',
    PREV: 'prev',
    LEFT: 'left',
    RIGHT: 'right'
  };
  var Event$2 = {
    SLIDE: "slide" + EVENT_KEY$2,
    SLID: "slid" + EVENT_KEY$2,
    KEYDOWN: "keydown" + EVENT_KEY$2,
    MOUSEENTER: "mouseenter" + EVENT_KEY$2,
    MOUSELEAVE: "mouseleave" + EVENT_KEY$2,
    TOUCHSTART: "touchstart" + EVENT_KEY$2,
    TOUCHMOVE: "touchmove" + EVENT_KEY$2,
    TOUCHEND: "touchend" + EVENT_KEY$2,
    POINTERDOWN: "pointerdown" + EVENT_KEY$2,
    POINTERUP: "pointerup" + EVENT_KEY$2,
    DRAG_START: "dragstart" + EVENT_KEY$2,
    LOAD_DATA_API: "load" + EVENT_KEY$2 + DATA_API_KEY$2,
    CLICK_DATA_API: "click" + EVENT_KEY$2 + DATA_API_KEY$2
  };
  var ClassName$2 = {
    CAROUSEL: 'carousel',
    ACTIVE: 'active',
    SLIDE: 'slide',
    RIGHT: 'carousel-item-right',
    LEFT: 'carousel-item-left',
    NEXT: 'carousel-item-next',
    PREV: 'carousel-item-prev',
    ITEM: 'carousel-item',
    POINTER_EVENT: 'pointer-event'
  };
  var Selector$2 = {
    ACTIVE: '.active',
    ACTIVE_ITEM: '.active.carousel-item',
    ITEM: '.carousel-item',
    ITEM_IMG: '.carousel-item img',
    NEXT_PREV: '.carousel-item-next, .carousel-item-prev',
    INDICATORS: '.carousel-indicators',
    DATA_SLIDE: '[data-slide], [data-slide-to]',
    DATA_RIDE: '[data-ride="carousel"]'
  };
  var PointerType = {
    TOUCH: 'touch',
    PEN: 'pen'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Carousel =
  /*#__PURE__*/
  function () {
    function Carousel(element, config) {
      this._items = null;
      this._interval = null;
      this._activeElement = null;
      this._isPaused = false;
      this._isSliding = false;
      this.touchTimeout = null;
      this.touchStartX = 0;
      this.touchDeltaX = 0;
      this._config = this._getConfig(config);
      this._element = element;
      this._indicatorsElement = this._element.querySelector(Selector$2.INDICATORS);
      this._touchSupported = 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0;
      this._pointerEvent = Boolean(window.PointerEvent || window.MSPointerEvent);

      this._addEventListeners();
    } // Getters


    var _proto = Carousel.prototype;

    // Public
    _proto.next = function next() {
      if (!this._isSliding) {
        this._slide(Direction.NEXT);
      }
    };

    _proto.nextWhenVisible = function nextWhenVisible() {
      // Don't call next when the page isn't visible
      // or the carousel or its parent isn't visible
      if (!document.hidden && $(this._element).is(':visible') && $(this._element).css('visibility') !== 'hidden') {
        this.next();
      }
    };

    _proto.prev = function prev() {
      if (!this._isSliding) {
        this._slide(Direction.PREV);
      }
    };

    _proto.pause = function pause(event) {
      if (!event) {
        this._isPaused = true;
      }

      if (this._element.querySelector(Selector$2.NEXT_PREV)) {
        Util.triggerTransitionEnd(this._element);
        this.cycle(true);
      }

      clearInterval(this._interval);
      this._interval = null;
    };

    _proto.cycle = function cycle(event) {
      if (!event) {
        this._isPaused = false;
      }

      if (this._interval) {
        clearInterval(this._interval);
        this._interval = null;
      }

      if (this._config.interval && !this._isPaused) {
        this._interval = setInterval((document.visibilityState ? this.nextWhenVisible : this.next).bind(this), this._config.interval);
      }
    };

    _proto.to = function to(index) {
      var _this = this;

      this._activeElement = this._element.querySelector(Selector$2.ACTIVE_ITEM);

      var activeIndex = this._getItemIndex(this._activeElement);

      if (index > this._items.length - 1 || index < 0) {
        return;
      }

      if (this._isSliding) {
        $(this._element).one(Event$2.SLID, function () {
          return _this.to(index);
        });
        return;
      }

      if (activeIndex === index) {
        this.pause();
        this.cycle();
        return;
      }

      var direction = index > activeIndex ? Direction.NEXT : Direction.PREV;

      this._slide(direction, this._items[index]);
    };

    _proto.dispose = function dispose() {
      $(this._element).off(EVENT_KEY$2);
      $.removeData(this._element, DATA_KEY$2);
      this._items = null;
      this._config = null;
      this._element = null;
      this._interval = null;
      this._isPaused = null;
      this._isSliding = null;
      this._activeElement = null;
      this._indicatorsElement = null;
    } // Private
    ;

    _proto._getConfig = function _getConfig(config) {
      config = _objectSpread({}, Default, config);
      Util.typeCheckConfig(NAME$2, config, DefaultType);
      return config;
    };

    _proto._handleSwipe = function _handleSwipe() {
      var absDeltax = Math.abs(this.touchDeltaX);

      if (absDeltax <= SWIPE_THRESHOLD) {
        return;
      }

      var direction = absDeltax / this.touchDeltaX; // swipe left

      if (direction > 0) {
        this.prev();
      } // swipe right


      if (direction < 0) {
        this.next();
      }
    };

    _proto._addEventListeners = function _addEventListeners() {
      var _this2 = this;

      if (this._config.keyboard) {
        $(this._element).on(Event$2.KEYDOWN, function (event) {
          return _this2._keydown(event);
        });
      }

      if (this._config.pause === 'hover') {
        $(this._element).on(Event$2.MOUSEENTER, function (event) {
          return _this2.pause(event);
        }).on(Event$2.MOUSELEAVE, function (event) {
          return _this2.cycle(event);
        });
      }

      if (this._config.touch) {
        this._addTouchEventListeners();
      }
    };

    _proto._addTouchEventListeners = function _addTouchEventListeners() {
      var _this3 = this;

      if (!this._touchSupported) {
        return;
      }

      var start = function start(event) {
        if (_this3._pointerEvent && PointerType[event.originalEvent.pointerType.toUpperCase()]) {
          _this3.touchStartX = event.originalEvent.clientX;
        } else if (!_this3._pointerEvent) {
          _this3.touchStartX = event.originalEvent.touches[0].clientX;
        }
      };

      var move = function move(event) {
        // ensure swiping with one touch and not pinching
        if (event.originalEvent.touches && event.originalEvent.touches.length > 1) {
          _this3.touchDeltaX = 0;
        } else {
          _this3.touchDeltaX = event.originalEvent.touches[0].clientX - _this3.touchStartX;
        }
      };

      var end = function end(event) {
        if (_this3._pointerEvent && PointerType[event.originalEvent.pointerType.toUpperCase()]) {
          _this3.touchDeltaX = event.originalEvent.clientX - _this3.touchStartX;
        }

        _this3._handleSwipe();

        if (_this3._config.pause === 'hover') {
          // If it's a touch-enabled device, mouseenter/leave are fired as
          // part of the mouse compatibility events on first tap - the carousel
          // would stop cycling until user tapped out of it;
          // here, we listen for touchend, explicitly pause the carousel
          // (as if it's the second time we tap on it, mouseenter compat event
          // is NOT fired) and after a timeout (to allow for mouse compatibility
          // events to fire) we explicitly restart cycling
          _this3.pause();

          if (_this3.touchTimeout) {
            clearTimeout(_this3.touchTimeout);
          }

          _this3.touchTimeout = setTimeout(function (event) {
            return _this3.cycle(event);
          }, TOUCHEVENT_COMPAT_WAIT + _this3._config.interval);
        }
      };

      $(this._element.querySelectorAll(Selector$2.ITEM_IMG)).on(Event$2.DRAG_START, function (e) {
        return e.preventDefault();
      });

      if (this._pointerEvent) {
        $(this._element).on(Event$2.POINTERDOWN, function (event) {
          return start(event);
        });
        $(this._element).on(Event$2.POINTERUP, function (event) {
          return end(event);
        });

        this._element.classList.add(ClassName$2.POINTER_EVENT);
      } else {
        $(this._element).on(Event$2.TOUCHSTART, function (event) {
          return start(event);
        });
        $(this._element).on(Event$2.TOUCHMOVE, function (event) {
          return move(event);
        });
        $(this._element).on(Event$2.TOUCHEND, function (event) {
          return end(event);
        });
      }
    };

    _proto._keydown = function _keydown(event) {
      if (/input|textarea/i.test(event.target.tagName)) {
        return;
      }

      switch (event.which) {
        case ARROW_LEFT_KEYCODE:
          event.preventDefault();
          this.prev();
          break;

        case ARROW_RIGHT_KEYCODE:
          event.preventDefault();
          this.next();
          break;

        default:
      }
    };

    _proto._getItemIndex = function _getItemIndex(element) {
      this._items = element && element.parentNode ? [].slice.call(element.parentNode.querySelectorAll(Selector$2.ITEM)) : [];
      return this._items.indexOf(element);
    };

    _proto._getItemByDirection = function _getItemByDirection(direction, activeElement) {
      var isNextDirection = direction === Direction.NEXT;
      var isPrevDirection = direction === Direction.PREV;

      var activeIndex = this._getItemIndex(activeElement);

      var lastItemIndex = this._items.length - 1;
      var isGoingToWrap = isPrevDirection && activeIndex === 0 || isNextDirection && activeIndex === lastItemIndex;

      if (isGoingToWrap && !this._config.wrap) {
        return activeElement;
      }

      var delta = direction === Direction.PREV ? -1 : 1;
      var itemIndex = (activeIndex + delta) % this._items.length;
      return itemIndex === -1 ? this._items[this._items.length - 1] : this._items[itemIndex];
    };

    _proto._triggerSlideEvent = function _triggerSlideEvent(relatedTarget, eventDirectionName) {
      var targetIndex = this._getItemIndex(relatedTarget);

      var fromIndex = this._getItemIndex(this._element.querySelector(Selector$2.ACTIVE_ITEM));

      var slideEvent = $.Event(Event$2.SLIDE, {
        relatedTarget: relatedTarget,
        direction: eventDirectionName,
        from: fromIndex,
        to: targetIndex
      });
      $(this._element).trigger(slideEvent);
      return slideEvent;
    };

    _proto._setActiveIndicatorElement = function _setActiveIndicatorElement(element) {
      if (this._indicatorsElement) {
        var indicators = [].slice.call(this._indicatorsElement.querySelectorAll(Selector$2.ACTIVE));
        $(indicators).removeClass(ClassName$2.ACTIVE);

        var nextIndicator = this._indicatorsElement.children[this._getItemIndex(element)];

        if (nextIndicator) {
          $(nextIndicator).addClass(ClassName$2.ACTIVE);
        }
      }
    };

    _proto._slide = function _slide(direction, element) {
      var _this4 = this;

      var activeElement = this._element.querySelector(Selector$2.ACTIVE_ITEM);

      var activeElementIndex = this._getItemIndex(activeElement);

      var nextElement = element || activeElement && this._getItemByDirection(direction, activeElement);

      var nextElementIndex = this._getItemIndex(nextElement);

      var isCycling = Boolean(this._interval);
      var directionalClassName;
      var orderClassName;
      var eventDirectionName;

      if (direction === Direction.NEXT) {
        directionalClassName = ClassName$2.LEFT;
        orderClassName = ClassName$2.NEXT;
        eventDirectionName = Direction.LEFT;
      } else {
        directionalClassName = ClassName$2.RIGHT;
        orderClassName = ClassName$2.PREV;
        eventDirectionName = Direction.RIGHT;
      }

      if (nextElement && $(nextElement).hasClass(ClassName$2.ACTIVE)) {
        this._isSliding = false;
        return;
      }

      var slideEvent = this._triggerSlideEvent(nextElement, eventDirectionName);

      if (slideEvent.isDefaultPrevented()) {
        return;
      }

      if (!activeElement || !nextElement) {
        // Some weirdness is happening, so we bail
        return;
      }

      this._isSliding = true;

      if (isCycling) {
        this.pause();
      }

      this._setActiveIndicatorElement(nextElement);

      var slidEvent = $.Event(Event$2.SLID, {
        relatedTarget: nextElement,
        direction: eventDirectionName,
        from: activeElementIndex,
        to: nextElementIndex
      });

      if ($(this._element).hasClass(ClassName$2.SLIDE)) {
        $(nextElement).addClass(orderClassName);
        Util.reflow(nextElement);
        $(activeElement).addClass(directionalClassName);
        $(nextElement).addClass(directionalClassName);
        var nextElementInterval = parseInt(nextElement.getAttribute('data-interval'), 10);

        if (nextElementInterval) {
          this._config.defaultInterval = this._config.defaultInterval || this._config.interval;
          this._config.interval = nextElementInterval;
        } else {
          this._config.interval = this._config.defaultInterval || this._config.interval;
        }

        var transitionDuration = Util.getTransitionDurationFromElement(activeElement);
        $(activeElement).one(Util.TRANSITION_END, function () {
          $(nextElement).removeClass(directionalClassName + " " + orderClassName).addClass(ClassName$2.ACTIVE);
          $(activeElement).removeClass(ClassName$2.ACTIVE + " " + orderClassName + " " + directionalClassName);
          _this4._isSliding = false;
          setTimeout(function () {
            return $(_this4._element).trigger(slidEvent);
          }, 0);
        }).emulateTransitionEnd(transitionDuration);
      } else {
        $(activeElement).removeClass(ClassName$2.ACTIVE);
        $(nextElement).addClass(ClassName$2.ACTIVE);
        this._isSliding = false;
        $(this._element).trigger(slidEvent);
      }

      if (isCycling) {
        this.cycle();
      }
    } // Static
    ;

    Carousel._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$2);

        var _config = _objectSpread({}, Default, $(this).data());

        if (typeof config === 'object') {
          _config = _objectSpread({}, _config, config);
        }

        var action = typeof config === 'string' ? config : _config.slide;

        if (!data) {
          data = new Carousel(this, _config);
          $(this).data(DATA_KEY$2, data);
        }

        if (typeof config === 'number') {
          data.to(config);
        } else if (typeof action === 'string') {
          if (typeof data[action] === 'undefined') {
            throw new TypeError("No method named \"" + action + "\"");
          }

          data[action]();
        } else if (_config.interval && _config.ride) {
          data.pause();
          data.cycle();
        }
      });
    };

    Carousel._dataApiClickHandler = function _dataApiClickHandler(event) {
      var selector = Util.getSelectorFromElement(this);

      if (!selector) {
        return;
      }

      var target = $(selector)[0];

      if (!target || !$(target).hasClass(ClassName$2.CAROUSEL)) {
        return;
      }

      var config = _objectSpread({}, $(target).data(), $(this).data());

      var slideIndex = this.getAttribute('data-slide-to');

      if (slideIndex) {
        config.interval = false;
      }

      Carousel._jQueryInterface.call($(target), config);

      if (slideIndex) {
        $(target).data(DATA_KEY$2).to(slideIndex);
      }

      event.preventDefault();
    };

    _createClass(Carousel, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$2;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default;
      }
    }]);

    return Carousel;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event$2.CLICK_DATA_API, Selector$2.DATA_SLIDE, Carousel._dataApiClickHandler);
  $(window).on(Event$2.LOAD_DATA_API, function () {
    var carousels = [].slice.call(document.querySelectorAll(Selector$2.DATA_RIDE));

    for (var i = 0, len = carousels.length; i < len; i++) {
      var $carousel = $(carousels[i]);

      Carousel._jQueryInterface.call($carousel, $carousel.data());
    }
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$2] = Carousel._jQueryInterface;
  $.fn[NAME$2].Constructor = Carousel;

  $.fn[NAME$2].noConflict = function () {
    $.fn[NAME$2] = JQUERY_NO_CONFLICT$2;
    return Carousel._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$3 = 'collapse';
  var VERSION$3 = '4.3.1';
  var DATA_KEY$3 = 'bs.collapse';
  var EVENT_KEY$3 = "." + DATA_KEY$3;
  var DATA_API_KEY$3 = '.data-api';
  var JQUERY_NO_CONFLICT$3 = $.fn[NAME$3];
  var Default$1 = {
    toggle: true,
    parent: ''
  };
  var DefaultType$1 = {
    toggle: 'boolean',
    parent: '(string|element)'
  };
  var Event$3 = {
    SHOW: "show" + EVENT_KEY$3,
    SHOWN: "shown" + EVENT_KEY$3,
    HIDE: "hide" + EVENT_KEY$3,
    HIDDEN: "hidden" + EVENT_KEY$3,
    CLICK_DATA_API: "click" + EVENT_KEY$3 + DATA_API_KEY$3
  };
  var ClassName$3 = {
    SHOW: 'show',
    COLLAPSE: 'collapse',
    COLLAPSING: 'collapsing',
    COLLAPSED: 'collapsed'
  };
  var Dimension = {
    WIDTH: 'width',
    HEIGHT: 'height'
  };
  var Selector$3 = {
    ACTIVES: '.show, .collapsing',
    DATA_TOGGLE: '[data-toggle="collapse"]'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Collapse =
  /*#__PURE__*/
  function () {
    function Collapse(element, config) {
      this._isTransitioning = false;
      this._element = element;
      this._config = this._getConfig(config);
      this._triggerArray = [].slice.call(document.querySelectorAll("[data-toggle=\"collapse\"][href=\"#" + element.id + "\"]," + ("[data-toggle=\"collapse\"][data-target=\"#" + element.id + "\"]")));
      var toggleList = [].slice.call(document.querySelectorAll(Selector$3.DATA_TOGGLE));

      for (var i = 0, len = toggleList.length; i < len; i++) {
        var elem = toggleList[i];
        var selector = Util.getSelectorFromElement(elem);
        var filterElement = [].slice.call(document.querySelectorAll(selector)).filter(function (foundElem) {
          return foundElem === element;
        });

        if (selector !== null && filterElement.length > 0) {
          this._selector = selector;

          this._triggerArray.push(elem);
        }
      }

      this._parent = this._config.parent ? this._getParent() : null;

      if (!this._config.parent) {
        this._addAriaAndCollapsedClass(this._element, this._triggerArray);
      }

      if (this._config.toggle) {
        this.toggle();
      }
    } // Getters


    var _proto = Collapse.prototype;

    // Public
    _proto.toggle = function toggle() {
      if ($(this._element).hasClass(ClassName$3.SHOW)) {
        this.hide();
      } else {
        this.show();
      }
    };

    _proto.show = function show() {
      var _this = this;

      if (this._isTransitioning || $(this._element).hasClass(ClassName$3.SHOW)) {
        return;
      }

      var actives;
      var activesData;

      if (this._parent) {
        actives = [].slice.call(this._parent.querySelectorAll(Selector$3.ACTIVES)).filter(function (elem) {
          if (typeof _this._config.parent === 'string') {
            return elem.getAttribute('data-parent') === _this._config.parent;
          }

          return elem.classList.contains(ClassName$3.COLLAPSE);
        });

        if (actives.length === 0) {
          actives = null;
        }
      }

      if (actives) {
        activesData = $(actives).not(this._selector).data(DATA_KEY$3);

        if (activesData && activesData._isTransitioning) {
          return;
        }
      }

      var startEvent = $.Event(Event$3.SHOW);
      $(this._element).trigger(startEvent);

      if (startEvent.isDefaultPrevented()) {
        return;
      }

      if (actives) {
        Collapse._jQueryInterface.call($(actives).not(this._selector), 'hide');

        if (!activesData) {
          $(actives).data(DATA_KEY$3, null);
        }
      }

      var dimension = this._getDimension();

      $(this._element).removeClass(ClassName$3.COLLAPSE).addClass(ClassName$3.COLLAPSING);
      this._element.style[dimension] = 0;

      if (this._triggerArray.length) {
        $(this._triggerArray).removeClass(ClassName$3.COLLAPSED).attr('aria-expanded', true);
      }

      this.setTransitioning(true);

      var complete = function complete() {
        $(_this._element).removeClass(ClassName$3.COLLAPSING).addClass(ClassName$3.COLLAPSE).addClass(ClassName$3.SHOW);
        _this._element.style[dimension] = '';

        _this.setTransitioning(false);

        $(_this._element).trigger(Event$3.SHOWN);
      };

      var capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1);
      var scrollSize = "scroll" + capitalizedDimension;
      var transitionDuration = Util.getTransitionDurationFromElement(this._element);
      $(this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      this._element.style[dimension] = this._element[scrollSize] + "px";
    };

    _proto.hide = function hide() {
      var _this2 = this;

      if (this._isTransitioning || !$(this._element).hasClass(ClassName$3.SHOW)) {
        return;
      }

      var startEvent = $.Event(Event$3.HIDE);
      $(this._element).trigger(startEvent);

      if (startEvent.isDefaultPrevented()) {
        return;
      }

      var dimension = this._getDimension();

      this._element.style[dimension] = this._element.getBoundingClientRect()[dimension] + "px";
      Util.reflow(this._element);
      $(this._element).addClass(ClassName$3.COLLAPSING).removeClass(ClassName$3.COLLAPSE).removeClass(ClassName$3.SHOW);
      var triggerArrayLength = this._triggerArray.length;

      if (triggerArrayLength > 0) {
        for (var i = 0; i < triggerArrayLength; i++) {
          var trigger = this._triggerArray[i];
          var selector = Util.getSelectorFromElement(trigger);

          if (selector !== null) {
            var $elem = $([].slice.call(document.querySelectorAll(selector)));

            if (!$elem.hasClass(ClassName$3.SHOW)) {
              $(trigger).addClass(ClassName$3.COLLAPSED).attr('aria-expanded', false);
            }
          }
        }
      }

      this.setTransitioning(true);

      var complete = function complete() {
        _this2.setTransitioning(false);

        $(_this2._element).removeClass(ClassName$3.COLLAPSING).addClass(ClassName$3.COLLAPSE).trigger(Event$3.HIDDEN);
      };

      this._element.style[dimension] = '';
      var transitionDuration = Util.getTransitionDurationFromElement(this._element);
      $(this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
    };

    _proto.setTransitioning = function setTransitioning(isTransitioning) {
      this._isTransitioning = isTransitioning;
    };

    _proto.dispose = function dispose() {
      $.removeData(this._element, DATA_KEY$3);
      this._config = null;
      this._parent = null;
      this._element = null;
      this._triggerArray = null;
      this._isTransitioning = null;
    } // Private
    ;

    _proto._getConfig = function _getConfig(config) {
      config = _objectSpread({}, Default$1, config);
      config.toggle = Boolean(config.toggle); // Coerce string values

      Util.typeCheckConfig(NAME$3, config, DefaultType$1);
      return config;
    };

    _proto._getDimension = function _getDimension() {
      var hasWidth = $(this._element).hasClass(Dimension.WIDTH);
      return hasWidth ? Dimension.WIDTH : Dimension.HEIGHT;
    };

    _proto._getParent = function _getParent() {
      var _this3 = this;

      var parent;

      if (Util.isElement(this._config.parent)) {
        parent = this._config.parent; // It's a jQuery object

        if (typeof this._config.parent.jquery !== 'undefined') {
          parent = this._config.parent[0];
        }
      } else {
        parent = document.querySelector(this._config.parent);
      }

      var selector = "[data-toggle=\"collapse\"][data-parent=\"" + this._config.parent + "\"]";
      var children = [].slice.call(parent.querySelectorAll(selector));
      $(children).each(function (i, element) {
        _this3._addAriaAndCollapsedClass(Collapse._getTargetFromElement(element), [element]);
      });
      return parent;
    };

    _proto._addAriaAndCollapsedClass = function _addAriaAndCollapsedClass(element, triggerArray) {
      var isOpen = $(element).hasClass(ClassName$3.SHOW);

      if (triggerArray.length) {
        $(triggerArray).toggleClass(ClassName$3.COLLAPSED, !isOpen).attr('aria-expanded', isOpen);
      }
    } // Static
    ;

    Collapse._getTargetFromElement = function _getTargetFromElement(element) {
      var selector = Util.getSelectorFromElement(element);
      return selector ? document.querySelector(selector) : null;
    };

    Collapse._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $this = $(this);
        var data = $this.data(DATA_KEY$3);

        var _config = _objectSpread({}, Default$1, $this.data(), typeof config === 'object' && config ? config : {});

        if (!data && _config.toggle && /show|hide/.test(config)) {
          _config.toggle = false;
        }

        if (!data) {
          data = new Collapse(this, _config);
          $this.data(DATA_KEY$3, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Collapse, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$3;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$1;
      }
    }]);

    return Collapse;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event$3.CLICK_DATA_API, Selector$3.DATA_TOGGLE, function (event) {
    // preventDefault only for <a> elements (which change the URL) not inside the collapsible element
    if (event.currentTarget.tagName === 'A') {
      event.preventDefault();
    }

    var $trigger = $(this);
    var selector = Util.getSelectorFromElement(this);
    var selectors = [].slice.call(document.querySelectorAll(selector));
    $(selectors).each(function () {
      var $target = $(this);
      var data = $target.data(DATA_KEY$3);
      var config = data ? 'toggle' : $trigger.data();

      Collapse._jQueryInterface.call($target, config);
    });
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$3] = Collapse._jQueryInterface;
  $.fn[NAME$3].Constructor = Collapse;

  $.fn[NAME$3].noConflict = function () {
    $.fn[NAME$3] = JQUERY_NO_CONFLICT$3;
    return Collapse._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$4 = 'dropdown';
  var VERSION$4 = '4.3.1';
  var DATA_KEY$4 = 'bs.dropdown';
  var EVENT_KEY$4 = "." + DATA_KEY$4;
  var DATA_API_KEY$4 = '.data-api';
  var JQUERY_NO_CONFLICT$4 = $.fn[NAME$4];
  var ESCAPE_KEYCODE = 27; // KeyboardEvent.which value for Escape (Esc) key

  var SPACE_KEYCODE = 32; // KeyboardEvent.which value for space key

  var TAB_KEYCODE = 9; // KeyboardEvent.which value for tab key

  var ARROW_UP_KEYCODE = 38; // KeyboardEvent.which value for up arrow key

  var ARROW_DOWN_KEYCODE = 40; // KeyboardEvent.which value for down arrow key

  var RIGHT_MOUSE_BUTTON_WHICH = 3; // MouseEvent.which value for the right button (assuming a right-handed mouse)

  var REGEXP_KEYDOWN = new RegExp(ARROW_UP_KEYCODE + "|" + ARROW_DOWN_KEYCODE + "|" + ESCAPE_KEYCODE);
  var Event$4 = {
    HIDE: "hide" + EVENT_KEY$4,
    HIDDEN: "hidden" + EVENT_KEY$4,
    SHOW: "show" + EVENT_KEY$4,
    SHOWN: "shown" + EVENT_KEY$4,
    CLICK: "click" + EVENT_KEY$4,
    CLICK_DATA_API: "click" + EVENT_KEY$4 + DATA_API_KEY$4,
    KEYDOWN_DATA_API: "keydown" + EVENT_KEY$4 + DATA_API_KEY$4,
    KEYUP_DATA_API: "keyup" + EVENT_KEY$4 + DATA_API_KEY$4
  };
  var ClassName$4 = {
    DISABLED: 'disabled',
    SHOW: 'show',
    DROPUP: 'dropup',
    DROPRIGHT: 'dropright',
    DROPLEFT: 'dropleft',
    MENURIGHT: 'dropdown-menu-right',
    MENULEFT: 'dropdown-menu-left',
    POSITION_STATIC: 'position-static'
  };
  var Selector$4 = {
    DATA_TOGGLE: '[data-toggle="dropdown"]',
    FORM_CHILD: '.dropdown form',
    MENU: '.dropdown-menu',
    NAVBAR_NAV: '.navbar-nav',
    VISIBLE_ITEMS: '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'
  };
  var AttachmentMap = {
    TOP: 'top-start',
    TOPEND: 'top-end',
    BOTTOM: 'bottom-start',
    BOTTOMEND: 'bottom-end',
    RIGHT: 'right-start',
    RIGHTEND: 'right-end',
    LEFT: 'left-start',
    LEFTEND: 'left-end'
  };
  var Default$2 = {
    offset: 0,
    flip: true,
    boundary: 'scrollParent',
    reference: 'toggle',
    display: 'dynamic'
  };
  var DefaultType$2 = {
    offset: '(number|string|function)',
    flip: 'boolean',
    boundary: '(string|element)',
    reference: '(string|element)',
    display: 'string'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Dropdown =
  /*#__PURE__*/
  function () {
    function Dropdown(element, config) {
      this._element = element;
      this._popper = null;
      this._config = this._getConfig(config);
      this._menu = this._getMenuElement();
      this._inNavbar = this._detectNavbar();

      this._addEventListeners();
    } // Getters


    var _proto = Dropdown.prototype;

    // Public
    _proto.toggle = function toggle() {
      if (this._element.disabled || $(this._element).hasClass(ClassName$4.DISABLED)) {
        return;
      }

      var parent = Dropdown._getParentFromElement(this._element);

      var isActive = $(this._menu).hasClass(ClassName$4.SHOW);

      Dropdown._clearMenus();

      if (isActive) {
        return;
      }

      var relatedTarget = {
        relatedTarget: this._element
      };
      var showEvent = $.Event(Event$4.SHOW, relatedTarget);
      $(parent).trigger(showEvent);

      if (showEvent.isDefaultPrevented()) {
        return;
      } // Disable totally Popper.js for Dropdown in Navbar


      if (!this._inNavbar) {
        /**
         * Check for Popper dependency
         * Popper - https://popper.js.org
         */
        if (typeof Popper === 'undefined') {
          throw new TypeError('Bootstrap\'s dropdowns require Popper.js (https://popper.js.org/)');
        }

        var referenceElement = this._element;

        if (this._config.reference === 'parent') {
          referenceElement = parent;
        } else if (Util.isElement(this._config.reference)) {
          referenceElement = this._config.reference; // Check if it's jQuery element

          if (typeof this._config.reference.jquery !== 'undefined') {
            referenceElement = this._config.reference[0];
          }
        } // If boundary is not `scrollParent`, then set position to `static`
        // to allow the menu to "escape" the scroll parent's boundaries
        // https://github.com/twbs/bootstrap/issues/24251


        if (this._config.boundary !== 'scrollParent') {
          $(parent).addClass(ClassName$4.POSITION_STATIC);
        }

        this._popper = new Popper(referenceElement, this._menu, this._getPopperConfig());
      } // If this is a touch-enabled device we add extra
      // empty mouseover listeners to the body's immediate children;
      // only needed because of broken event delegation on iOS
      // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html


      if ('ontouchstart' in document.documentElement && $(parent).closest(Selector$4.NAVBAR_NAV).length === 0) {
        $(document.body).children().on('mouseover', null, $.noop);
      }

      this._element.focus();

      this._element.setAttribute('aria-expanded', true);

      $(this._menu).toggleClass(ClassName$4.SHOW);
      $(parent).toggleClass(ClassName$4.SHOW).trigger($.Event(Event$4.SHOWN, relatedTarget));
    };

    _proto.show = function show() {
      if (this._element.disabled || $(this._element).hasClass(ClassName$4.DISABLED) || $(this._menu).hasClass(ClassName$4.SHOW)) {
        return;
      }

      var relatedTarget = {
        relatedTarget: this._element
      };
      var showEvent = $.Event(Event$4.SHOW, relatedTarget);

      var parent = Dropdown._getParentFromElement(this._element);

      $(parent).trigger(showEvent);

      if (showEvent.isDefaultPrevented()) {
        return;
      }

      $(this._menu).toggleClass(ClassName$4.SHOW);
      $(parent).toggleClass(ClassName$4.SHOW).trigger($.Event(Event$4.SHOWN, relatedTarget));
    };

    _proto.hide = function hide() {
      if (this._element.disabled || $(this._element).hasClass(ClassName$4.DISABLED) || !$(this._menu).hasClass(ClassName$4.SHOW)) {
        return;
      }

      var relatedTarget = {
        relatedTarget: this._element
      };
      var hideEvent = $.Event(Event$4.HIDE, relatedTarget);

      var parent = Dropdown._getParentFromElement(this._element);

      $(parent).trigger(hideEvent);

      if (hideEvent.isDefaultPrevented()) {
        return;
      }

      $(this._menu).toggleClass(ClassName$4.SHOW);
      $(parent).toggleClass(ClassName$4.SHOW).trigger($.Event(Event$4.HIDDEN, relatedTarget));
    };

    _proto.dispose = function dispose() {
      $.removeData(this._element, DATA_KEY$4);
      $(this._element).off(EVENT_KEY$4);
      this._element = null;
      this._menu = null;

      if (this._popper !== null) {
        this._popper.destroy();

        this._popper = null;
      }
    };

    _proto.update = function update() {
      this._inNavbar = this._detectNavbar();

      if (this._popper !== null) {
        this._popper.scheduleUpdate();
      }
    } // Private
    ;

    _proto._addEventListeners = function _addEventListeners() {
      var _this = this;

      $(this._element).on(Event$4.CLICK, function (event) {
        event.preventDefault();
        event.stopPropagation();

        _this.toggle();
      });
    };

    _proto._getConfig = function _getConfig(config) {
      config = _objectSpread({}, this.constructor.Default, $(this._element).data(), config);
      Util.typeCheckConfig(NAME$4, config, this.constructor.DefaultType);
      return config;
    };

    _proto._getMenuElement = function _getMenuElement() {
      if (!this._menu) {
        var parent = Dropdown._getParentFromElement(this._element);

        if (parent) {
          this._menu = parent.querySelector(Selector$4.MENU);
        }
      }

      return this._menu;
    };

    _proto._getPlacement = function _getPlacement() {
      var $parentDropdown = $(this._element.parentNode);
      var placement = AttachmentMap.BOTTOM; // Handle dropup

      if ($parentDropdown.hasClass(ClassName$4.DROPUP)) {
        placement = AttachmentMap.TOP;

        if ($(this._menu).hasClass(ClassName$4.MENURIGHT)) {
          placement = AttachmentMap.TOPEND;
        }
      } else if ($parentDropdown.hasClass(ClassName$4.DROPRIGHT)) {
        placement = AttachmentMap.RIGHT;
      } else if ($parentDropdown.hasClass(ClassName$4.DROPLEFT)) {
        placement = AttachmentMap.LEFT;
      } else if ($(this._menu).hasClass(ClassName$4.MENURIGHT)) {
        placement = AttachmentMap.BOTTOMEND;
      }

      return placement;
    };

    _proto._detectNavbar = function _detectNavbar() {
      return $(this._element).closest('.navbar').length > 0;
    };

    _proto._getOffset = function _getOffset() {
      var _this2 = this;

      var offset = {};

      if (typeof this._config.offset === 'function') {
        offset.fn = function (data) {
          data.offsets = _objectSpread({}, data.offsets, _this2._config.offset(data.offsets, _this2._element) || {});
          return data;
        };
      } else {
        offset.offset = this._config.offset;
      }

      return offset;
    };

    _proto._getPopperConfig = function _getPopperConfig() {
      var popperConfig = {
        placement: this._getPlacement(),
        modifiers: {
          offset: this._getOffset(),
          flip: {
            enabled: this._config.flip
          },
          preventOverflow: {
            boundariesElement: this._config.boundary
          }
        } // Disable Popper.js if we have a static display

      };

      if (this._config.display === 'static') {
        popperConfig.modifiers.applyStyle = {
          enabled: false
        };
      }

      return popperConfig;
    } // Static
    ;

    Dropdown._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$4);

        var _config = typeof config === 'object' ? config : null;

        if (!data) {
          data = new Dropdown(this, _config);
          $(this).data(DATA_KEY$4, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    Dropdown._clearMenus = function _clearMenus(event) {
      if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH || event.type === 'keyup' && event.which !== TAB_KEYCODE)) {
        return;
      }

      var toggles = [].slice.call(document.querySelectorAll(Selector$4.DATA_TOGGLE));

      for (var i = 0, len = toggles.length; i < len; i++) {
        var parent = Dropdown._getParentFromElement(toggles[i]);

        var context = $(toggles[i]).data(DATA_KEY$4);
        var relatedTarget = {
          relatedTarget: toggles[i]
        };

        if (event && event.type === 'click') {
          relatedTarget.clickEvent = event;
        }

        if (!context) {
          continue;
        }

        var dropdownMenu = context._menu;

        if (!$(parent).hasClass(ClassName$4.SHOW)) {
          continue;
        }

        if (event && (event.type === 'click' && /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) && $.contains(parent, event.target)) {
          continue;
        }

        var hideEvent = $.Event(Event$4.HIDE, relatedTarget);
        $(parent).trigger(hideEvent);

        if (hideEvent.isDefaultPrevented()) {
          continue;
        } // If this is a touch-enabled device we remove the extra
        // empty mouseover listeners we added for iOS support


        if ('ontouchstart' in document.documentElement) {
          $(document.body).children().off('mouseover', null, $.noop);
        }

        toggles[i].setAttribute('aria-expanded', 'false');
        $(dropdownMenu).removeClass(ClassName$4.SHOW);
        $(parent).removeClass(ClassName$4.SHOW).trigger($.Event(Event$4.HIDDEN, relatedTarget));
      }
    };

    Dropdown._getParentFromElement = function _getParentFromElement(element) {
      var parent;
      var selector = Util.getSelectorFromElement(element);

      if (selector) {
        parent = document.querySelector(selector);
      }

      return parent || element.parentNode;
    } // eslint-disable-next-line complexity
    ;

    Dropdown._dataApiKeydownHandler = function _dataApiKeydownHandler(event) {
      // If not input/textarea:
      //  - And not a key in REGEXP_KEYDOWN => not a dropdown command
      // If input/textarea:
      //  - If space key => not a dropdown command
      //  - If key is other than escape
      //    - If key is not up or down => not a dropdown command
      //    - If trigger inside the menu => not a dropdown command
      if (/input|textarea/i.test(event.target.tagName) ? event.which === SPACE_KEYCODE || event.which !== ESCAPE_KEYCODE && (event.which !== ARROW_DOWN_KEYCODE && event.which !== ARROW_UP_KEYCODE || $(event.target).closest(Selector$4.MENU).length) : !REGEXP_KEYDOWN.test(event.which)) {
        return;
      }

      event.preventDefault();
      event.stopPropagation();

      if (this.disabled || $(this).hasClass(ClassName$4.DISABLED)) {
        return;
      }

      var parent = Dropdown._getParentFromElement(this);

      var isActive = $(parent).hasClass(ClassName$4.SHOW);

      if (!isActive || isActive && (event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE)) {
        if (event.which === ESCAPE_KEYCODE) {
          var toggle = parent.querySelector(Selector$4.DATA_TOGGLE);
          $(toggle).trigger('focus');
        }

        $(this).trigger('click');
        return;
      }

      var items = [].slice.call(parent.querySelectorAll(Selector$4.VISIBLE_ITEMS));

      if (items.length === 0) {
        return;
      }

      var index = items.indexOf(event.target);

      if (event.which === ARROW_UP_KEYCODE && index > 0) {
        // Up
        index--;
      }

      if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) {
        // Down
        index++;
      }

      if (index < 0) {
        index = 0;
      }

      items[index].focus();
    };

    _createClass(Dropdown, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$4;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$2;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$2;
      }
    }]);

    return Dropdown;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event$4.KEYDOWN_DATA_API, Selector$4.DATA_TOGGLE, Dropdown._dataApiKeydownHandler).on(Event$4.KEYDOWN_DATA_API, Selector$4.MENU, Dropdown._dataApiKeydownHandler).on(Event$4.CLICK_DATA_API + " " + Event$4.KEYUP_DATA_API, Dropdown._clearMenus).on(Event$4.CLICK_DATA_API, Selector$4.DATA_TOGGLE, function (event) {
    event.preventDefault();
    event.stopPropagation();

    Dropdown._jQueryInterface.call($(this), 'toggle');
  }).on(Event$4.CLICK_DATA_API, Selector$4.FORM_CHILD, function (e) {
    e.stopPropagation();
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$4] = Dropdown._jQueryInterface;
  $.fn[NAME$4].Constructor = Dropdown;

  $.fn[NAME$4].noConflict = function () {
    $.fn[NAME$4] = JQUERY_NO_CONFLICT$4;
    return Dropdown._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$5 = 'modal';
  var VERSION$5 = '4.3.1';
  var DATA_KEY$5 = 'bs.modal';
  var EVENT_KEY$5 = "." + DATA_KEY$5;
  var DATA_API_KEY$5 = '.data-api';
  var JQUERY_NO_CONFLICT$5 = $.fn[NAME$5];
  var ESCAPE_KEYCODE$1 = 27; // KeyboardEvent.which value for Escape (Esc) key

  var Default$3 = {
    backdrop: true,
    keyboard: true,
    focus: true,
    show: true
  };
  var DefaultType$3 = {
    backdrop: '(boolean|string)',
    keyboard: 'boolean',
    focus: 'boolean',
    show: 'boolean'
  };
  var Event$5 = {
    HIDE: "hide" + EVENT_KEY$5,
    HIDDEN: "hidden" + EVENT_KEY$5,
    SHOW: "show" + EVENT_KEY$5,
    SHOWN: "shown" + EVENT_KEY$5,
    FOCUSIN: "focusin" + EVENT_KEY$5,
    RESIZE: "resize" + EVENT_KEY$5,
    CLICK_DISMISS: "click.dismiss" + EVENT_KEY$5,
    KEYDOWN_DISMISS: "keydown.dismiss" + EVENT_KEY$5,
    MOUSEUP_DISMISS: "mouseup.dismiss" + EVENT_KEY$5,
    MOUSEDOWN_DISMISS: "mousedown.dismiss" + EVENT_KEY$5,
    CLICK_DATA_API: "click" + EVENT_KEY$5 + DATA_API_KEY$5
  };
  var ClassName$5 = {
    SCROLLABLE: 'modal-dialog-scrollable',
    SCROLLBAR_MEASURER: 'modal-scrollbar-measure',
    BACKDROP: 'modal-backdrop',
    OPEN: 'modal-open',
    FADE: 'fade',
    SHOW: 'show'
  };
  var Selector$5 = {
    DIALOG: '.modal-dialog',
    MODAL_BODY: '.modal-body',
    DATA_TOGGLE: '[data-toggle="modal"]',
    DATA_DISMISS: '[data-dismiss="modal"]',
    FIXED_CONTENT: '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top',
    STICKY_CONTENT: '.sticky-top'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Modal =
  /*#__PURE__*/
  function () {
    function Modal(element, config) {
      this._config = this._getConfig(config);
      this._element = element;
      this._dialog = element.querySelector(Selector$5.DIALOG);
      this._backdrop = null;
      this._isShown = false;
      this._isBodyOverflowing = false;
      this._ignoreBackdropClick = false;
      this._isTransitioning = false;
      this._scrollbarWidth = 0;
    } // Getters


    var _proto = Modal.prototype;

    // Public
    _proto.toggle = function toggle(relatedTarget) {
      return this._isShown ? this.hide() : this.show(relatedTarget);
    };

    _proto.show = function show(relatedTarget) {
      var _this = this;

      if (this._isShown || this._isTransitioning) {
        return;
      }

      if ($(this._element).hasClass(ClassName$5.FADE)) {
        this._isTransitioning = true;
      }

      var showEvent = $.Event(Event$5.SHOW, {
        relatedTarget: relatedTarget
      });
      $(this._element).trigger(showEvent);

      if (this._isShown || showEvent.isDefaultPrevented()) {
        return;
      }

      this._isShown = true;

      this._checkScrollbar();

      this._setScrollbar();

      this._adjustDialog();

      this._setEscapeEvent();

      this._setResizeEvent();

      $(this._element).on(Event$5.CLICK_DISMISS, Selector$5.DATA_DISMISS, function (event) {
        return _this.hide(event);
      });
      $(this._dialog).on(Event$5.MOUSEDOWN_DISMISS, function () {
        $(_this._element).one(Event$5.MOUSEUP_DISMISS, function (event) {
          if ($(event.target).is(_this._element)) {
            _this._ignoreBackdropClick = true;
          }
        });
      });

      this._showBackdrop(function () {
        return _this._showElement(relatedTarget);
      });
    };

    _proto.hide = function hide(event) {
      var _this2 = this;

      if (event) {
        event.preventDefault();
      }

      if (!this._isShown || this._isTransitioning) {
        return;
      }

      var hideEvent = $.Event(Event$5.HIDE);
      $(this._element).trigger(hideEvent);

      if (!this._isShown || hideEvent.isDefaultPrevented()) {
        return;
      }

      this._isShown = false;
      var transition = $(this._element).hasClass(ClassName$5.FADE);

      if (transition) {
        this._isTransitioning = true;
      }

      this._setEscapeEvent();

      this._setResizeEvent();

      $(document).off(Event$5.FOCUSIN);
      $(this._element).removeClass(ClassName$5.SHOW);
      $(this._element).off(Event$5.CLICK_DISMISS);
      $(this._dialog).off(Event$5.MOUSEDOWN_DISMISS);

      if (transition) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._element);
        $(this._element).one(Util.TRANSITION_END, function (event) {
          return _this2._hideModal(event);
        }).emulateTransitionEnd(transitionDuration);
      } else {
        this._hideModal();
      }
    };

    _proto.dispose = function dispose() {
      [window, this._element, this._dialog].forEach(function (htmlElement) {
        return $(htmlElement).off(EVENT_KEY$5);
      });
      /**
       * `document` has 2 events `Event.FOCUSIN` and `Event.CLICK_DATA_API`
       * Do not move `document` in `htmlElements` array
       * It will remove `Event.CLICK_DATA_API` event that should remain
       */

      $(document).off(Event$5.FOCUSIN);
      $.removeData(this._element, DATA_KEY$5);
      this._config = null;
      this._element = null;
      this._dialog = null;
      this._backdrop = null;
      this._isShown = null;
      this._isBodyOverflowing = null;
      this._ignoreBackdropClick = null;
      this._isTransitioning = null;
      this._scrollbarWidth = null;
    };

    _proto.handleUpdate = function handleUpdate() {
      this._adjustDialog();
    } // Private
    ;

    _proto._getConfig = function _getConfig(config) {
      config = _objectSpread({}, Default$3, config);
      Util.typeCheckConfig(NAME$5, config, DefaultType$3);
      return config;
    };

    _proto._showElement = function _showElement(relatedTarget) {
      var _this3 = this;

      var transition = $(this._element).hasClass(ClassName$5.FADE);

      if (!this._element.parentNode || this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {
        // Don't move modal's DOM position
        document.body.appendChild(this._element);
      }

      this._element.style.display = 'block';

      this._element.removeAttribute('aria-hidden');

      this._element.setAttribute('aria-modal', true);

      if ($(this._dialog).hasClass(ClassName$5.SCROLLABLE)) {
        this._dialog.querySelector(Selector$5.MODAL_BODY).scrollTop = 0;
      } else {
        this._element.scrollTop = 0;
      }

      if (transition) {
        Util.reflow(this._element);
      }

      $(this._element).addClass(ClassName$5.SHOW);

      if (this._config.focus) {
        this._enforceFocus();
      }

      var shownEvent = $.Event(Event$5.SHOWN, {
        relatedTarget: relatedTarget
      });

      var transitionComplete = function transitionComplete() {
        if (_this3._config.focus) {
          _this3._element.focus();
        }

        _this3._isTransitioning = false;
        $(_this3._element).trigger(shownEvent);
      };

      if (transition) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._dialog);
        $(this._dialog).one(Util.TRANSITION_END, transitionComplete).emulateTransitionEnd(transitionDuration);
      } else {
        transitionComplete();
      }
    };

    _proto._enforceFocus = function _enforceFocus() {
      var _this4 = this;

      $(document).off(Event$5.FOCUSIN) // Guard against infinite focus loop
      .on(Event$5.FOCUSIN, function (event) {
        if (document !== event.target && _this4._element !== event.target && $(_this4._element).has(event.target).length === 0) {
          _this4._element.focus();
        }
      });
    };

    _proto._setEscapeEvent = function _setEscapeEvent() {
      var _this5 = this;

      if (this._isShown && this._config.keyboard) {
        $(this._element).on(Event$5.KEYDOWN_DISMISS, function (event) {
          if (event.which === ESCAPE_KEYCODE$1) {
            event.preventDefault();

            _this5.hide();
          }
        });
      } else if (!this._isShown) {
        $(this._element).off(Event$5.KEYDOWN_DISMISS);
      }
    };

    _proto._setResizeEvent = function _setResizeEvent() {
      var _this6 = this;

      if (this._isShown) {
        $(window).on(Event$5.RESIZE, function (event) {
          return _this6.handleUpdate(event);
        });
      } else {
        $(window).off(Event$5.RESIZE);
      }
    };

    _proto._hideModal = function _hideModal() {
      var _this7 = this;

      this._element.style.display = 'none';

      this._element.setAttribute('aria-hidden', true);

      this._element.removeAttribute('aria-modal');

      this._isTransitioning = false;

      this._showBackdrop(function () {
        $(document.body).removeClass(ClassName$5.OPEN);

        _this7._resetAdjustments();

        _this7._resetScrollbar();

        $(_this7._element).trigger(Event$5.HIDDEN);
      });
    };

    _proto._removeBackdrop = function _removeBackdrop() {
      if (this._backdrop) {
        $(this._backdrop).remove();
        this._backdrop = null;
      }
    };

    _proto._showBackdrop = function _showBackdrop(callback) {
      var _this8 = this;

      var animate = $(this._element).hasClass(ClassName$5.FADE) ? ClassName$5.FADE : '';

      if (this._isShown && this._config.backdrop) {
        this._backdrop = document.createElement('div');
        this._backdrop.className = ClassName$5.BACKDROP;

        if (animate) {
          this._backdrop.classList.add(animate);
        }

        $(this._backdrop).appendTo(document.body);
        $(this._element).on(Event$5.CLICK_DISMISS, function (event) {
          if (_this8._ignoreBackdropClick) {
            _this8._ignoreBackdropClick = false;
            return;
          }

          if (event.target !== event.currentTarget) {
            return;
          }

          if (_this8._config.backdrop === 'static') {
            _this8._element.focus();
          } else {
            _this8.hide();
          }
        });

        if (animate) {
          Util.reflow(this._backdrop);
        }

        $(this._backdrop).addClass(ClassName$5.SHOW);

        if (!callback) {
          return;
        }

        if (!animate) {
          callback();
          return;
        }

        var backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop);
        $(this._backdrop).one(Util.TRANSITION_END, callback).emulateTransitionEnd(backdropTransitionDuration);
      } else if (!this._isShown && this._backdrop) {
        $(this._backdrop).removeClass(ClassName$5.SHOW);

        var callbackRemove = function callbackRemove() {
          _this8._removeBackdrop();

          if (callback) {
            callback();
          }
        };

        if ($(this._element).hasClass(ClassName$5.FADE)) {
          var _backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop);

          $(this._backdrop).one(Util.TRANSITION_END, callbackRemove).emulateTransitionEnd(_backdropTransitionDuration);
        } else {
          callbackRemove();
        }
      } else if (callback) {
        callback();
      }
    } // ----------------------------------------------------------------------
    // the following methods are used to handle overflowing modals
    // todo (fat): these should probably be refactored out of modal.js
    // ----------------------------------------------------------------------
    ;

    _proto._adjustDialog = function _adjustDialog() {
      var isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight;

      if (!this._isBodyOverflowing && isModalOverflowing) {
        this._element.style.paddingLeft = this._scrollbarWidth + "px";
      }

      if (this._isBodyOverflowing && !isModalOverflowing) {
        this._element.style.paddingRight = this._scrollbarWidth + "px";
      }
    };

    _proto._resetAdjustments = function _resetAdjustments() {
      this._element.style.paddingLeft = '';
      this._element.style.paddingRight = '';
    };

    _proto._checkScrollbar = function _checkScrollbar() {
      var rect = document.body.getBoundingClientRect();
      this._isBodyOverflowing = rect.left + rect.right < window.innerWidth;
      this._scrollbarWidth = this._getScrollbarWidth();
    };

    _proto._setScrollbar = function _setScrollbar() {
      var _this9 = this;

      if (this._isBodyOverflowing) {
        // Note: DOMNode.style.paddingRight returns the actual value or '' if not set
        //   while $(DOMNode).css('padding-right') returns the calculated value or 0 if not set
        var fixedContent = [].slice.call(document.querySelectorAll(Selector$5.FIXED_CONTENT));
        var stickyContent = [].slice.call(document.querySelectorAll(Selector$5.STICKY_CONTENT)); // Adjust fixed content padding

        $(fixedContent).each(function (index, element) {
          var actualPadding = element.style.paddingRight;
          var calculatedPadding = $(element).css('padding-right');
          $(element).data('padding-right', actualPadding).css('padding-right', parseFloat(calculatedPadding) + _this9._scrollbarWidth + "px");
        }); // Adjust sticky content margin

        $(stickyContent).each(function (index, element) {
          var actualMargin = element.style.marginRight;
          var calculatedMargin = $(element).css('margin-right');
          $(element).data('margin-right', actualMargin).css('margin-right', parseFloat(calculatedMargin) - _this9._scrollbarWidth + "px");
        }); // Adjust body padding

        var actualPadding = document.body.style.paddingRight;
        var calculatedPadding = $(document.body).css('padding-right');
        $(document.body).data('padding-right', actualPadding).css('padding-right', parseFloat(calculatedPadding) + this._scrollbarWidth + "px");
      }

      $(document.body).addClass(ClassName$5.OPEN);
    };

    _proto._resetScrollbar = function _resetScrollbar() {
      // Restore fixed content padding
      var fixedContent = [].slice.call(document.querySelectorAll(Selector$5.FIXED_CONTENT));
      $(fixedContent).each(function (index, element) {
        var padding = $(element).data('padding-right');
        $(element).removeData('padding-right');
        element.style.paddingRight = padding ? padding : '';
      }); // Restore sticky content

      var elements = [].slice.call(document.querySelectorAll("" + Selector$5.STICKY_CONTENT));
      $(elements).each(function (index, element) {
        var margin = $(element).data('margin-right');

        if (typeof margin !== 'undefined') {
          $(element).css('margin-right', margin).removeData('margin-right');
        }
      }); // Restore body padding

      var padding = $(document.body).data('padding-right');
      $(document.body).removeData('padding-right');
      document.body.style.paddingRight = padding ? padding : '';
    };

    _proto._getScrollbarWidth = function _getScrollbarWidth() {
      // thx d.walsh
      var scrollDiv = document.createElement('div');
      scrollDiv.className = ClassName$5.SCROLLBAR_MEASURER;
      document.body.appendChild(scrollDiv);
      var scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth;
      document.body.removeChild(scrollDiv);
      return scrollbarWidth;
    } // Static
    ;

    Modal._jQueryInterface = function _jQueryInterface(config, relatedTarget) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$5);

        var _config = _objectSpread({}, Default$3, $(this).data(), typeof config === 'object' && config ? config : {});

        if (!data) {
          data = new Modal(this, _config);
          $(this).data(DATA_KEY$5, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config](relatedTarget);
        } else if (_config.show) {
          data.show(relatedTarget);
        }
      });
    };

    _createClass(Modal, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$5;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$3;
      }
    }]);

    return Modal;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event$5.CLICK_DATA_API, Selector$5.DATA_TOGGLE, function (event) {
    var _this10 = this;

    var target;
    var selector = Util.getSelectorFromElement(this);

    if (selector) {
      target = document.querySelector(selector);
    }

    var config = $(target).data(DATA_KEY$5) ? 'toggle' : _objectSpread({}, $(target).data(), $(this).data());

    if (this.tagName === 'A' || this.tagName === 'AREA') {
      event.preventDefault();
    }

    var $target = $(target).one(Event$5.SHOW, function (showEvent) {
      if (showEvent.isDefaultPrevented()) {
        // Only register focus restorer if modal will actually get shown
        return;
      }

      $target.one(Event$5.HIDDEN, function () {
        if ($(_this10).is(':visible')) {
          _this10.focus();
        }
      });
    });

    Modal._jQueryInterface.call($(target), config, this);
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$5] = Modal._jQueryInterface;
  $.fn[NAME$5].Constructor = Modal;

  $.fn[NAME$5].noConflict = function () {
    $.fn[NAME$5] = JQUERY_NO_CONFLICT$5;
    return Modal._jQueryInterface;
  };

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v4.3.1): tools/sanitizer.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
   * --------------------------------------------------------------------------
   */
  var uriAttrs = ['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href'];
  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\w-]*$/i;
  var DefaultWhitelist = {
    // Global attributes allowed on any supplied element below.
    '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],
    a: ['target', 'href', 'title', 'rel'],
    area: [],
    b: [],
    br: [],
    col: [],
    code: [],
    div: [],
    em: [],
    hr: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    i: [],
    img: ['src', 'alt', 'title', 'width', 'height'],
    li: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    small: [],
    span: [],
    sub: [],
    sup: [],
    strong: [],
    u: [],
    ul: []
    /**
     * A pattern that recognizes a commonly useful subset of URLs that are safe.
     *
     * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts
     */

  };
  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;
  /**
   * A pattern that matches safe data URLs. Only matches image, video and audio types.
   *
   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts
   */

  var DATA_URL_PATTERN = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;

  function allowedAttribute(attr, allowedAttributeList) {
    var attrName = attr.nodeName.toLowerCase();

    if (allowedAttributeList.indexOf(attrName) !== -1) {
      if (uriAttrs.indexOf(attrName) !== -1) {
        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN));
      }

      return true;
    }

    var regExp = allowedAttributeList.filter(function (attrRegex) {
      return attrRegex instanceof RegExp;
    }); // Check if a regular expression validates the attribute.

    for (var i = 0, l = regExp.length; i < l; i++) {
      if (attrName.match(regExp[i])) {
        return true;
      }
    }

    return false;
  }

  function sanitizeHtml(unsafeHtml, whiteList, sanitizeFn) {
    if (unsafeHtml.length === 0) {
      return unsafeHtml;
    }

    if (sanitizeFn && typeof sanitizeFn === 'function') {
      return sanitizeFn(unsafeHtml);
    }

    var domParser = new window.DOMParser();
    var createdDocument = domParser.parseFromString(unsafeHtml, 'text/html');
    var whitelistKeys = Object.keys(whiteList);
    var elements = [].slice.call(createdDocument.body.querySelectorAll('*'));

    var _loop = function _loop(i, len) {
      var el = elements[i];
      var elName = el.nodeName.toLowerCase();

      if (whitelistKeys.indexOf(el.nodeName.toLowerCase()) === -1) {
        el.parentNode.removeChild(el);
        return "continue";
      }

      var attributeList = [].slice.call(el.attributes);
      var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);
      attributeList.forEach(function (attr) {
        if (!allowedAttribute(attr, whitelistedAttributes)) {
          el.removeAttribute(attr.nodeName);
        }
      });
    };

    for (var i = 0, len = elements.length; i < len; i++) {
      var _ret = _loop(i, len);

      if (_ret === "continue") continue;
    }

    return createdDocument.body.innerHTML;
  }

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$6 = 'tooltip';
  var VERSION$6 = '4.3.1';
  var DATA_KEY$6 = 'bs.tooltip';
  var EVENT_KEY$6 = "." + DATA_KEY$6;
  var JQUERY_NO_CONFLICT$6 = $.fn[NAME$6];
  var CLASS_PREFIX = 'bs-tooltip';
  var BSCLS_PREFIX_REGEX = new RegExp("(^|\\s)" + CLASS_PREFIX + "\\S+", 'g');
  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];
  var DefaultType$4 = {
    animation: 'boolean',
    template: 'string',
    title: '(string|element|function)',
    trigger: 'string',
    delay: '(number|object)',
    html: 'boolean',
    selector: '(string|boolean)',
    placement: '(string|function)',
    offset: '(number|string|function)',
    container: '(string|element|boolean)',
    fallbackPlacement: '(string|array)',
    boundary: '(string|element)',
    sanitize: 'boolean',
    sanitizeFn: '(null|function)',
    whiteList: 'object'
  };
  var AttachmentMap$1 = {
    AUTO: 'auto',
    TOP: 'top',
    RIGHT: 'right',
    BOTTOM: 'bottom',
    LEFT: 'left'
  };
  var Default$4 = {
    animation: true,
    template: '<div class="tooltip" role="tooltip">' + '<div class="arrow"></div>' + '<div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    selector: false,
    placement: 'top',
    offset: 0,
    container: false,
    fallbackPlacement: 'flip',
    boundary: 'scrollParent',
    sanitize: true,
    sanitizeFn: null,
    whiteList: DefaultWhitelist
  };
  var HoverState = {
    SHOW: 'show',
    OUT: 'out'
  };
  var Event$6 = {
    HIDE: "hide" + EVENT_KEY$6,
    HIDDEN: "hidden" + EVENT_KEY$6,
    SHOW: "show" + EVENT_KEY$6,
    SHOWN: "shown" + EVENT_KEY$6,
    INSERTED: "inserted" + EVENT_KEY$6,
    CLICK: "click" + EVENT_KEY$6,
    FOCUSIN: "focusin" + EVENT_KEY$6,
    FOCUSOUT: "focusout" + EVENT_KEY$6,
    MOUSEENTER: "mouseenter" + EVENT_KEY$6,
    MOUSELEAVE: "mouseleave" + EVENT_KEY$6
  };
  var ClassName$6 = {
    FADE: 'fade',
    SHOW: 'show'
  };
  var Selector$6 = {
    TOOLTIP: '.tooltip',
    TOOLTIP_INNER: '.tooltip-inner',
    ARROW: '.arrow'
  };
  var Trigger = {
    HOVER: 'hover',
    FOCUS: 'focus',
    CLICK: 'click',
    MANUAL: 'manual'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Tooltip =
  /*#__PURE__*/
  function () {
    function Tooltip(element, config) {
      /**
       * Check for Popper dependency
       * Popper - https://popper.js.org
       */
      if (typeof Popper === 'undefined') {
        throw new TypeError('Bootstrap\'s tooltips require Popper.js (https://popper.js.org/)');
      } // private


      this._isEnabled = true;
      this._timeout = 0;
      this._hoverState = '';
      this._activeTrigger = {};
      this._popper = null; // Protected

      this.element = element;
      this.config = this._getConfig(config);
      this.tip = null;

      this._setListeners();
    } // Getters


    var _proto = Tooltip.prototype;

    // Public
    _proto.enable = function enable() {
      this._isEnabled = true;
    };

    _proto.disable = function disable() {
      this._isEnabled = false;
    };

    _proto.toggleEnabled = function toggleEnabled() {
      this._isEnabled = !this._isEnabled;
    };

    _proto.toggle = function toggle(event) {
      if (!this._isEnabled) {
        return;
      }

      if (event) {
        var dataKey = this.constructor.DATA_KEY;
        var context = $(event.currentTarget).data(dataKey);

        if (!context) {
          context = new this.constructor(event.currentTarget, this._getDelegateConfig());
          $(event.currentTarget).data(dataKey, context);
        }

        context._activeTrigger.click = !context._activeTrigger.click;

        if (context._isWithActiveTrigger()) {
          context._enter(null, context);
        } else {
          context._leave(null, context);
        }
      } else {
        if ($(this.getTipElement()).hasClass(ClassName$6.SHOW)) {
          this._leave(null, this);

          return;
        }

        this._enter(null, this);
      }
    };

    _proto.dispose = function dispose() {
      clearTimeout(this._timeout);
      $.removeData(this.element, this.constructor.DATA_KEY);
      $(this.element).off(this.constructor.EVENT_KEY);
      $(this.element).closest('.modal').off('hide.bs.modal');

      if (this.tip) {
        $(this.tip).remove();
      }

      this._isEnabled = null;
      this._timeout = null;
      this._hoverState = null;
      this._activeTrigger = null;

      if (this._popper !== null) {
        this._popper.destroy();
      }

      this._popper = null;
      this.element = null;
      this.config = null;
      this.tip = null;
    };

    _proto.show = function show() {
      var _this = this;

      if ($(this.element).css('display') === 'none') {
        throw new Error('Please use show on visible elements');
      }

      var showEvent = $.Event(this.constructor.Event.SHOW);

      if (this.isWithContent() && this._isEnabled) {
        $(this.element).trigger(showEvent);
        var shadowRoot = Util.findShadowRoot(this.element);
        var isInTheDom = $.contains(shadowRoot !== null ? shadowRoot : this.element.ownerDocument.documentElement, this.element);

        if (showEvent.isDefaultPrevented() || !isInTheDom) {
          return;
        }

        var tip = this.getTipElement();
        var tipId = Util.getUID(this.constructor.NAME);
        tip.setAttribute('id', tipId);
        this.element.setAttribute('aria-describedby', tipId);
        this.setContent();

        if (this.config.animation) {
          $(tip).addClass(ClassName$6.FADE);
        }

        var placement = typeof this.config.placement === 'function' ? this.config.placement.call(this, tip, this.element) : this.config.placement;

        var attachment = this._getAttachment(placement);

        this.addAttachmentClass(attachment);

        var container = this._getContainer();

        $(tip).data(this.constructor.DATA_KEY, this);

        if (!$.contains(this.element.ownerDocument.documentElement, this.tip)) {
          $(tip).appendTo(container);
        }

        $(this.element).trigger(this.constructor.Event.INSERTED);
        this._popper = new Popper(this.element, tip, {
          placement: attachment,
          modifiers: {
            offset: this._getOffset(),
            flip: {
              behavior: this.config.fallbackPlacement
            },
            arrow: {
              element: Selector$6.ARROW
            },
            preventOverflow: {
              boundariesElement: this.config.boundary
            }
          },
          onCreate: function onCreate(data) {
            if (data.originalPlacement !== data.placement) {
              _this._handlePopperPlacementChange(data);
            }
          },
          onUpdate: function onUpdate(data) {
            return _this._handlePopperPlacementChange(data);
          }
        });
        $(tip).addClass(ClassName$6.SHOW); // If this is a touch-enabled device we add extra
        // empty mouseover listeners to the body's immediate children;
        // only needed because of broken event delegation on iOS
        // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html

        if ('ontouchstart' in document.documentElement) {
          $(document.body).children().on('mouseover', null, $.noop);
        }

        var complete = function complete() {
          if (_this.config.animation) {
            _this._fixTransition();
          }

          var prevHoverState = _this._hoverState;
          _this._hoverState = null;
          $(_this.element).trigger(_this.constructor.Event.SHOWN);

          if (prevHoverState === HoverState.OUT) {
            _this._leave(null, _this);
          }
        };

        if ($(this.tip).hasClass(ClassName$6.FADE)) {
          var transitionDuration = Util.getTransitionDurationFromElement(this.tip);
          $(this.tip).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
        } else {
          complete();
        }
      }
    };

    _proto.hide = function hide(callback) {
      var _this2 = this;

      var tip = this.getTipElement();
      var hideEvent = $.Event(this.constructor.Event.HIDE);

      var complete = function complete() {
        if (_this2._hoverState !== HoverState.SHOW && tip.parentNode) {
          tip.parentNode.removeChild(tip);
        }

        _this2._cleanTipClass();

        _this2.element.removeAttribute('aria-describedby');

        $(_this2.element).trigger(_this2.constructor.Event.HIDDEN);

        if (_this2._popper !== null) {
          _this2._popper.destroy();
        }

        if (callback) {
          callback();
        }
      };

      $(this.element).trigger(hideEvent);

      if (hideEvent.isDefaultPrevented()) {
        return;
      }

      $(tip).removeClass(ClassName$6.SHOW); // If this is a touch-enabled device we remove the extra
      // empty mouseover listeners we added for iOS support

      if ('ontouchstart' in document.documentElement) {
        $(document.body).children().off('mouseover', null, $.noop);
      }

      this._activeTrigger[Trigger.CLICK] = false;
      this._activeTrigger[Trigger.FOCUS] = false;
      this._activeTrigger[Trigger.HOVER] = false;

      if ($(this.tip).hasClass(ClassName$6.FADE)) {
        var transitionDuration = Util.getTransitionDurationFromElement(tip);
        $(tip).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }

      this._hoverState = '';
    };

    _proto.update = function update() {
      if (this._popper !== null) {
        this._popper.scheduleUpdate();
      }
    } // Protected
    ;

    _proto.isWithContent = function isWithContent() {
      return Boolean(this.getTitle());
    };

    _proto.addAttachmentClass = function addAttachmentClass(attachment) {
      $(this.getTipElement()).addClass(CLASS_PREFIX + "-" + attachment);
    };

    _proto.getTipElement = function getTipElement() {
      this.tip = this.tip || $(this.config.template)[0];
      return this.tip;
    };

    _proto.setContent = function setContent() {
      var tip = this.getTipElement();
      this.setElementContent($(tip.querySelectorAll(Selector$6.TOOLTIP_INNER)), this.getTitle());
      $(tip).removeClass(ClassName$6.FADE + " " + ClassName$6.SHOW);
    };

    _proto.setElementContent = function setElementContent($element, content) {
      if (typeof content === 'object' && (content.nodeType || content.jquery)) {
        // Content is a DOM node or a jQuery
        if (this.config.html) {
          if (!$(content).parent().is($element)) {
            $element.empty().append(content);
          }
        } else {
          $element.text($(content).text());
        }

        return;
      }

      if (this.config.html) {
        if (this.config.sanitize) {
          content = sanitizeHtml(content, this.config.whiteList, this.config.sanitizeFn);
        }

        $element.html(content);
      } else {
        $element.text(content);
      }
    };

    _proto.getTitle = function getTitle() {
      var title = this.element.getAttribute('data-original-title');

      if (!title) {
        title = typeof this.config.title === 'function' ? this.config.title.call(this.element) : this.config.title;
      }

      return title;
    } // Private
    ;

    _proto._getOffset = function _getOffset() {
      var _this3 = this;

      var offset = {};

      if (typeof this.config.offset === 'function') {
        offset.fn = function (data) {
          data.offsets = _objectSpread({}, data.offsets, _this3.config.offset(data.offsets, _this3.element) || {});
          return data;
        };
      } else {
        offset.offset = this.config.offset;
      }

      return offset;
    };

    _proto._getContainer = function _getContainer() {
      if (this.config.container === false) {
        return document.body;
      }

      if (Util.isElement(this.config.container)) {
        return $(this.config.container);
      }

      return $(document).find(this.config.container);
    };

    _proto._getAttachment = function _getAttachment(placement) {
      return AttachmentMap$1[placement.toUpperCase()];
    };

    _proto._setListeners = function _setListeners() {
      var _this4 = this;

      var triggers = this.config.trigger.split(' ');
      triggers.forEach(function (trigger) {
        if (trigger === 'click') {
          $(_this4.element).on(_this4.constructor.Event.CLICK, _this4.config.selector, function (event) {
            return _this4.toggle(event);
          });
        } else if (trigger !== Trigger.MANUAL) {
          var eventIn = trigger === Trigger.HOVER ? _this4.constructor.Event.MOUSEENTER : _this4.constructor.Event.FOCUSIN;
          var eventOut = trigger === Trigger.HOVER ? _this4.constructor.Event.MOUSELEAVE : _this4.constructor.Event.FOCUSOUT;
          $(_this4.element).on(eventIn, _this4.config.selector, function (event) {
            return _this4._enter(event);
          }).on(eventOut, _this4.config.selector, function (event) {
            return _this4._leave(event);
          });
        }
      });
      $(this.element).closest('.modal').on('hide.bs.modal', function () {
        if (_this4.element) {
          _this4.hide();
        }
      });

      if (this.config.selector) {
        this.config = _objectSpread({}, this.config, {
          trigger: 'manual',
          selector: ''
        });
      } else {
        this._fixTitle();
      }
    };

    _proto._fixTitle = function _fixTitle() {
      var titleType = typeof this.element.getAttribute('data-original-title');

      if (this.element.getAttribute('title') || titleType !== 'string') {
        this.element.setAttribute('data-original-title', this.element.getAttribute('title') || '');
        this.element.setAttribute('title', '');
      }
    };

    _proto._enter = function _enter(event, context) {
      var dataKey = this.constructor.DATA_KEY;
      context = context || $(event.currentTarget).data(dataKey);

      if (!context) {
        context = new this.constructor(event.currentTarget, this._getDelegateConfig());
        $(event.currentTarget).data(dataKey, context);
      }

      if (event) {
        context._activeTrigger[event.type === 'focusin' ? Trigger.FOCUS : Trigger.HOVER] = true;
      }

      if ($(context.getTipElement()).hasClass(ClassName$6.SHOW) || context._hoverState === HoverState.SHOW) {
        context._hoverState = HoverState.SHOW;
        return;
      }

      clearTimeout(context._timeout);
      context._hoverState = HoverState.SHOW;

      if (!context.config.delay || !context.config.delay.show) {
        context.show();
        return;
      }

      context._timeout = setTimeout(function () {
        if (context._hoverState === HoverState.SHOW) {
          context.show();
        }
      }, context.config.delay.show);
    };

    _proto._leave = function _leave(event, context) {
      var dataKey = this.constructor.DATA_KEY;
      context = context || $(event.currentTarget).data(dataKey);

      if (!context) {
        context = new this.constructor(event.currentTarget, this._getDelegateConfig());
        $(event.currentTarget).data(dataKey, context);
      }

      if (event) {
        context._activeTrigger[event.type === 'focusout' ? Trigger.FOCUS : Trigger.HOVER] = false;
      }

      if (context._isWithActiveTrigger()) {
        return;
      }

      clearTimeout(context._timeout);
      context._hoverState = HoverState.OUT;

      if (!context.config.delay || !context.config.delay.hide) {
        context.hide();
        return;
      }

      context._timeout = setTimeout(function () {
        if (context._hoverState === HoverState.OUT) {
          context.hide();
        }
      }, context.config.delay.hide);
    };

    _proto._isWithActiveTrigger = function _isWithActiveTrigger() {
      for (var trigger in this._activeTrigger) {
        if (this._activeTrigger[trigger]) {
          return true;
        }
      }

      return false;
    };

    _proto._getConfig = function _getConfig(config) {
      var dataAttributes = $(this.element).data();
      Object.keys(dataAttributes).forEach(function (dataAttr) {
        if (DISALLOWED_ATTRIBUTES.indexOf(dataAttr) !== -1) {
          delete dataAttributes[dataAttr];
        }
      });
      config = _objectSpread({}, this.constructor.Default, dataAttributes, typeof config === 'object' && config ? config : {});

      if (typeof config.delay === 'number') {
        config.delay = {
          show: config.delay,
          hide: config.delay
        };
      }

      if (typeof config.title === 'number') {
        config.title = config.title.toString();
      }

      if (typeof config.content === 'number') {
        config.content = config.content.toString();
      }

      Util.typeCheckConfig(NAME$6, config, this.constructor.DefaultType);

      if (config.sanitize) {
        config.template = sanitizeHtml(config.template, config.whiteList, config.sanitizeFn);
      }

      return config;
    };

    _proto._getDelegateConfig = function _getDelegateConfig() {
      var config = {};

      if (this.config) {
        for (var key in this.config) {
          if (this.constructor.Default[key] !== this.config[key]) {
            config[key] = this.config[key];
          }
        }
      }

      return config;
    };

    _proto._cleanTipClass = function _cleanTipClass() {
      var $tip = $(this.getTipElement());
      var tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX);

      if (tabClass !== null && tabClass.length) {
        $tip.removeClass(tabClass.join(''));
      }
    };

    _proto._handlePopperPlacementChange = function _handlePopperPlacementChange(popperData) {
      var popperInstance = popperData.instance;
      this.tip = popperInstance.popper;

      this._cleanTipClass();

      this.addAttachmentClass(this._getAttachment(popperData.placement));
    };

    _proto._fixTransition = function _fixTransition() {
      var tip = this.getTipElement();
      var initConfigAnimation = this.config.animation;

      if (tip.getAttribute('x-placement') !== null) {
        return;
      }

      $(tip).removeClass(ClassName$6.FADE);
      this.config.animation = false;
      this.hide();
      this.show();
      this.config.animation = initConfigAnimation;
    } // Static
    ;

    Tooltip._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$6);

        var _config = typeof config === 'object' && config;

        if (!data && /dispose|hide/.test(config)) {
          return;
        }

        if (!data) {
          data = new Tooltip(this, _config);
          $(this).data(DATA_KEY$6, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Tooltip, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$6;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$4;
      }
    }, {
      key: "NAME",
      get: function get() {
        return NAME$6;
      }
    }, {
      key: "DATA_KEY",
      get: function get() {
        return DATA_KEY$6;
      }
    }, {
      key: "Event",
      get: function get() {
        return Event$6;
      }
    }, {
      key: "EVENT_KEY",
      get: function get() {
        return EVENT_KEY$6;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$4;
      }
    }]);

    return Tooltip;
  }();
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */


  $.fn[NAME$6] = Tooltip._jQueryInterface;
  $.fn[NAME$6].Constructor = Tooltip;

  $.fn[NAME$6].noConflict = function () {
    $.fn[NAME$6] = JQUERY_NO_CONFLICT$6;
    return Tooltip._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$7 = 'popover';
  var VERSION$7 = '4.3.1';
  var DATA_KEY$7 = 'bs.popover';
  var EVENT_KEY$7 = "." + DATA_KEY$7;
  var JQUERY_NO_CONFLICT$7 = $.fn[NAME$7];
  var CLASS_PREFIX$1 = 'bs-popover';
  var BSCLS_PREFIX_REGEX$1 = new RegExp("(^|\\s)" + CLASS_PREFIX$1 + "\\S+", 'g');

  var Default$5 = _objectSpread({}, Tooltip.Default, {
    placement: 'right',
    trigger: 'click',
    content: '',
    template: '<div class="popover" role="tooltip">' + '<div class="arrow"></div>' + '<h3 class="popover-header"></h3>' + '<div class="popover-body"></div></div>'
  });

  var DefaultType$5 = _objectSpread({}, Tooltip.DefaultType, {
    content: '(string|element|function)'
  });

  var ClassName$7 = {
    FADE: 'fade',
    SHOW: 'show'
  };
  var Selector$7 = {
    TITLE: '.popover-header',
    CONTENT: '.popover-body'
  };
  var Event$7 = {
    HIDE: "hide" + EVENT_KEY$7,
    HIDDEN: "hidden" + EVENT_KEY$7,
    SHOW: "show" + EVENT_KEY$7,
    SHOWN: "shown" + EVENT_KEY$7,
    INSERTED: "inserted" + EVENT_KEY$7,
    CLICK: "click" + EVENT_KEY$7,
    FOCUSIN: "focusin" + EVENT_KEY$7,
    FOCUSOUT: "focusout" + EVENT_KEY$7,
    MOUSEENTER: "mouseenter" + EVENT_KEY$7,
    MOUSELEAVE: "mouseleave" + EVENT_KEY$7
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Popover =
  /*#__PURE__*/
  function (_Tooltip) {
    _inheritsLoose(Popover, _Tooltip);

    function Popover() {
      return _Tooltip.apply(this, arguments) || this;
    }

    var _proto = Popover.prototype;

    // Overrides
    _proto.isWithContent = function isWithContent() {
      return this.getTitle() || this._getContent();
    };

    _proto.addAttachmentClass = function addAttachmentClass(attachment) {
      $(this.getTipElement()).addClass(CLASS_PREFIX$1 + "-" + attachment);
    };

    _proto.getTipElement = function getTipElement() {
      this.tip = this.tip || $(this.config.template)[0];
      return this.tip;
    };

    _proto.setContent = function setContent() {
      var $tip = $(this.getTipElement()); // We use append for html objects to maintain js events

      this.setElementContent($tip.find(Selector$7.TITLE), this.getTitle());

      var content = this._getContent();

      if (typeof content === 'function') {
        content = content.call(this.element);
      }

      this.setElementContent($tip.find(Selector$7.CONTENT), content);
      $tip.removeClass(ClassName$7.FADE + " " + ClassName$7.SHOW);
    } // Private
    ;

    _proto._getContent = function _getContent() {
      return this.element.getAttribute('data-content') || this.config.content;
    };

    _proto._cleanTipClass = function _cleanTipClass() {
      var $tip = $(this.getTipElement());
      var tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX$1);

      if (tabClass !== null && tabClass.length > 0) {
        $tip.removeClass(tabClass.join(''));
      }
    } // Static
    ;

    Popover._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$7);

        var _config = typeof config === 'object' ? config : null;

        if (!data && /dispose|hide/.test(config)) {
          return;
        }

        if (!data) {
          data = new Popover(this, _config);
          $(this).data(DATA_KEY$7, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Popover, null, [{
      key: "VERSION",
      // Getters
      get: function get() {
        return VERSION$7;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$5;
      }
    }, {
      key: "NAME",
      get: function get() {
        return NAME$7;
      }
    }, {
      key: "DATA_KEY",
      get: function get() {
        return DATA_KEY$7;
      }
    }, {
      key: "Event",
      get: function get() {
        return Event$7;
      }
    }, {
      key: "EVENT_KEY",
      get: function get() {
        return EVENT_KEY$7;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$5;
      }
    }]);

    return Popover;
  }(Tooltip);
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */


  $.fn[NAME$7] = Popover._jQueryInterface;
  $.fn[NAME$7].Constructor = Popover;

  $.fn[NAME$7].noConflict = function () {
    $.fn[NAME$7] = JQUERY_NO_CONFLICT$7;
    return Popover._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$8 = 'scrollspy';
  var VERSION$8 = '4.3.1';
  var DATA_KEY$8 = 'bs.scrollspy';
  var EVENT_KEY$8 = "." + DATA_KEY$8;
  var DATA_API_KEY$6 = '.data-api';
  var JQUERY_NO_CONFLICT$8 = $.fn[NAME$8];
  var Default$6 = {
    offset: 10,
    method: 'auto',
    target: ''
  };
  var DefaultType$6 = {
    offset: 'number',
    method: 'string',
    target: '(string|element)'
  };
  var Event$8 = {
    ACTIVATE: "activate" + EVENT_KEY$8,
    SCROLL: "scroll" + EVENT_KEY$8,
    LOAD_DATA_API: "load" + EVENT_KEY$8 + DATA_API_KEY$6
  };
  var ClassName$8 = {
    DROPDOWN_ITEM: 'dropdown-item',
    DROPDOWN_MENU: 'dropdown-menu',
    ACTIVE: 'active'
  };
  var Selector$8 = {
    DATA_SPY: '[data-spy="scroll"]',
    ACTIVE: '.active',
    NAV_LIST_GROUP: '.nav, .list-group',
    NAV_LINKS: '.nav-link',
    NAV_ITEMS: '.nav-item',
    LIST_ITEMS: '.list-group-item',
    DROPDOWN: '.dropdown',
    DROPDOWN_ITEMS: '.dropdown-item',
    DROPDOWN_TOGGLE: '.dropdown-toggle'
  };
  var OffsetMethod = {
    OFFSET: 'offset',
    POSITION: 'position'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var ScrollSpy =
  /*#__PURE__*/
  function () {
    function ScrollSpy(element, config) {
      var _this = this;

      this._element = element;
      this._scrollElement = element.tagName === 'BODY' ? window : element;
      this._config = this._getConfig(config);
      this._selector = this._config.target + " " + Selector$8.NAV_LINKS + "," + (this._config.target + " " + Selector$8.LIST_ITEMS + ",") + (this._config.target + " " + Selector$8.DROPDOWN_ITEMS);
      this._offsets = [];
      this._targets = [];
      this._activeTarget = null;
      this._scrollHeight = 0;
      $(this._scrollElement).on(Event$8.SCROLL, function (event) {
        return _this._process(event);
      });
      this.refresh();

      this._process();
    } // Getters


    var _proto = ScrollSpy.prototype;

    // Public
    _proto.refresh = function refresh() {
      var _this2 = this;

      var autoMethod = this._scrollElement === this._scrollElement.window ? OffsetMethod.OFFSET : OffsetMethod.POSITION;
      var offsetMethod = this._config.method === 'auto' ? autoMethod : this._config.method;
      var offsetBase = offsetMethod === OffsetMethod.POSITION ? this._getScrollTop() : 0;
      this._offsets = [];
      this._targets = [];
      this._scrollHeight = this._getScrollHeight();
      var targets = [].slice.call(document.querySelectorAll(this._selector));
      targets.map(function (element) {
        var target;
        var targetSelector = Util.getSelectorFromElement(element);

        if (targetSelector) {
          target = document.querySelector(targetSelector);
        }

        if (target) {
          var targetBCR = target.getBoundingClientRect();

          if (targetBCR.width || targetBCR.height) {
            // TODO (fat): remove sketch reliance on jQuery position/offset
            return [$(target)[offsetMethod]().top + offsetBase, targetSelector];
          }
        }

        return null;
      }).filter(function (item) {
        return item;
      }).sort(function (a, b) {
        return a[0] - b[0];
      }).forEach(function (item) {
        _this2._offsets.push(item[0]);

        _this2._targets.push(item[1]);
      });
    };

    _proto.dispose = function dispose() {
      $.removeData(this._element, DATA_KEY$8);
      $(this._scrollElement).off(EVENT_KEY$8);
      this._element = null;
      this._scrollElement = null;
      this._config = null;
      this._selector = null;
      this._offsets = null;
      this._targets = null;
      this._activeTarget = null;
      this._scrollHeight = null;
    } // Private
    ;

    _proto._getConfig = function _getConfig(config) {
      config = _objectSpread({}, Default$6, typeof config === 'object' && config ? config : {});

      if (typeof config.target !== 'string') {
        var id = $(config.target).attr('id');

        if (!id) {
          id = Util.getUID(NAME$8);
          $(config.target).attr('id', id);
        }

        config.target = "#" + id;
      }

      Util.typeCheckConfig(NAME$8, config, DefaultType$6);
      return config;
    };

    _proto._getScrollTop = function _getScrollTop() {
      return this._scrollElement === window ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop;
    };

    _proto._getScrollHeight = function _getScrollHeight() {
      return this._scrollElement.scrollHeight || Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
    };

    _proto._getOffsetHeight = function _getOffsetHeight() {
      return this._scrollElement === window ? window.innerHeight : this._scrollElement.getBoundingClientRect().height;
    };

    _proto._process = function _process() {
      var scrollTop = this._getScrollTop() + this._config.offset;

      var scrollHeight = this._getScrollHeight();

      var maxScroll = this._config.offset + scrollHeight - this._getOffsetHeight();

      if (this._scrollHeight !== scrollHeight) {
        this.refresh();
      }

      if (scrollTop >= maxScroll) {
        var target = this._targets[this._targets.length - 1];

        if (this._activeTarget !== target) {
          this._activate(target);
        }

        return;
      }

      if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {
        this._activeTarget = null;

        this._clear();

        return;
      }

      var offsetLength = this._offsets.length;

      for (var i = offsetLength; i--;) {
        var isActiveTarget = this._activeTarget !== this._targets[i] && scrollTop >= this._offsets[i] && (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1]);

        if (isActiveTarget) {
          this._activate(this._targets[i]);
        }
      }
    };

    _proto._activate = function _activate(target) {
      this._activeTarget = target;

      this._clear();

      var queries = this._selector.split(',').map(function (selector) {
        return selector + "[data-target=\"" + target + "\"]," + selector + "[href=\"" + target + "\"]";
      });

      var $link = $([].slice.call(document.querySelectorAll(queries.join(','))));

      if ($link.hasClass(ClassName$8.DROPDOWN_ITEM)) {
        $link.closest(Selector$8.DROPDOWN).find(Selector$8.DROPDOWN_TOGGLE).addClass(ClassName$8.ACTIVE);
        $link.addClass(ClassName$8.ACTIVE);
      } else {
        // Set triggered link as active
        $link.addClass(ClassName$8.ACTIVE); // Set triggered links parents as active
        // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor

        $link.parents(Selector$8.NAV_LIST_GROUP).prev(Selector$8.NAV_LINKS + ", " + Selector$8.LIST_ITEMS).addClass(ClassName$8.ACTIVE); // Handle special case when .nav-link is inside .nav-item

        $link.parents(Selector$8.NAV_LIST_GROUP).prev(Selector$8.NAV_ITEMS).children(Selector$8.NAV_LINKS).addClass(ClassName$8.ACTIVE);
      }

      $(this._scrollElement).trigger(Event$8.ACTIVATE, {
        relatedTarget: target
      });
    };

    _proto._clear = function _clear() {
      [].slice.call(document.querySelectorAll(this._selector)).filter(function (node) {
        return node.classList.contains(ClassName$8.ACTIVE);
      }).forEach(function (node) {
        return node.classList.remove(ClassName$8.ACTIVE);
      });
    } // Static
    ;

    ScrollSpy._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var data = $(this).data(DATA_KEY$8);

        var _config = typeof config === 'object' && config;

        if (!data) {
          data = new ScrollSpy(this, _config);
          $(this).data(DATA_KEY$8, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(ScrollSpy, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$8;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$6;
      }
    }]);

    return ScrollSpy;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(window).on(Event$8.LOAD_DATA_API, function () {
    var scrollSpys = [].slice.call(document.querySelectorAll(Selector$8.DATA_SPY));
    var scrollSpysLength = scrollSpys.length;

    for (var i = scrollSpysLength; i--;) {
      var $spy = $(scrollSpys[i]);

      ScrollSpy._jQueryInterface.call($spy, $spy.data());
    }
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$8] = ScrollSpy._jQueryInterface;
  $.fn[NAME$8].Constructor = ScrollSpy;

  $.fn[NAME$8].noConflict = function () {
    $.fn[NAME$8] = JQUERY_NO_CONFLICT$8;
    return ScrollSpy._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$9 = 'tab';
  var VERSION$9 = '4.3.1';
  var DATA_KEY$9 = 'bs.tab';
  var EVENT_KEY$9 = "." + DATA_KEY$9;
  var DATA_API_KEY$7 = '.data-api';
  var JQUERY_NO_CONFLICT$9 = $.fn[NAME$9];
  var Event$9 = {
    HIDE: "hide" + EVENT_KEY$9,
    HIDDEN: "hidden" + EVENT_KEY$9,
    SHOW: "show" + EVENT_KEY$9,
    SHOWN: "shown" + EVENT_KEY$9,
    CLICK_DATA_API: "click" + EVENT_KEY$9 + DATA_API_KEY$7
  };
  var ClassName$9 = {
    DROPDOWN_MENU: 'dropdown-menu',
    ACTIVE: 'active',
    DISABLED: 'disabled',
    FADE: 'fade',
    SHOW: 'show'
  };
  var Selector$9 = {
    DROPDOWN: '.dropdown',
    NAV_LIST_GROUP: '.nav, .list-group',
    ACTIVE: '.active',
    ACTIVE_UL: '> li > .active',
    DATA_TOGGLE: '[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',
    DROPDOWN_TOGGLE: '.dropdown-toggle',
    DROPDOWN_ACTIVE_CHILD: '> .dropdown-menu .active'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Tab =
  /*#__PURE__*/
  function () {
    function Tab(element) {
      this._element = element;
    } // Getters


    var _proto = Tab.prototype;

    // Public
    _proto.show = function show() {
      var _this = this;

      if (this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && $(this._element).hasClass(ClassName$9.ACTIVE) || $(this._element).hasClass(ClassName$9.DISABLED)) {
        return;
      }

      var target;
      var previous;
      var listElement = $(this._element).closest(Selector$9.NAV_LIST_GROUP)[0];
      var selector = Util.getSelectorFromElement(this._element);

      if (listElement) {
        var itemSelector = listElement.nodeName === 'UL' || listElement.nodeName === 'OL' ? Selector$9.ACTIVE_UL : Selector$9.ACTIVE;
        previous = $.makeArray($(listElement).find(itemSelector));
        previous = previous[previous.length - 1];
      }

      var hideEvent = $.Event(Event$9.HIDE, {
        relatedTarget: this._element
      });
      var showEvent = $.Event(Event$9.SHOW, {
        relatedTarget: previous
      });

      if (previous) {
        $(previous).trigger(hideEvent);
      }

      $(this._element).trigger(showEvent);

      if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) {
        return;
      }

      if (selector) {
        target = document.querySelector(selector);
      }

      this._activate(this._element, listElement);

      var complete = function complete() {
        var hiddenEvent = $.Event(Event$9.HIDDEN, {
          relatedTarget: _this._element
        });
        var shownEvent = $.Event(Event$9.SHOWN, {
          relatedTarget: previous
        });
        $(previous).trigger(hiddenEvent);
        $(_this._element).trigger(shownEvent);
      };

      if (target) {
        this._activate(target, target.parentNode, complete);
      } else {
        complete();
      }
    };

    _proto.dispose = function dispose() {
      $.removeData(this._element, DATA_KEY$9);
      this._element = null;
    } // Private
    ;

    _proto._activate = function _activate(element, container, callback) {
      var _this2 = this;

      var activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL') ? $(container).find(Selector$9.ACTIVE_UL) : $(container).children(Selector$9.ACTIVE);
      var active = activeElements[0];
      var isTransitioning = callback && active && $(active).hasClass(ClassName$9.FADE);

      var complete = function complete() {
        return _this2._transitionComplete(element, active, callback);
      };

      if (active && isTransitioning) {
        var transitionDuration = Util.getTransitionDurationFromElement(active);
        $(active).removeClass(ClassName$9.SHOW).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }
    };

    _proto._transitionComplete = function _transitionComplete(element, active, callback) {
      if (active) {
        $(active).removeClass(ClassName$9.ACTIVE);
        var dropdownChild = $(active.parentNode).find(Selector$9.DROPDOWN_ACTIVE_CHILD)[0];

        if (dropdownChild) {
          $(dropdownChild).removeClass(ClassName$9.ACTIVE);
        }

        if (active.getAttribute('role') === 'tab') {
          active.setAttribute('aria-selected', false);
        }
      }

      $(element).addClass(ClassName$9.ACTIVE);

      if (element.getAttribute('role') === 'tab') {
        element.setAttribute('aria-selected', true);
      }

      Util.reflow(element);

      if (element.classList.contains(ClassName$9.FADE)) {
        element.classList.add(ClassName$9.SHOW);
      }

      if (element.parentNode && $(element.parentNode).hasClass(ClassName$9.DROPDOWN_MENU)) {
        var dropdownElement = $(element).closest(Selector$9.DROPDOWN)[0];

        if (dropdownElement) {
          var dropdownToggleList = [].slice.call(dropdownElement.querySelectorAll(Selector$9.DROPDOWN_TOGGLE));
          $(dropdownToggleList).addClass(ClassName$9.ACTIVE);
        }

        element.setAttribute('aria-expanded', true);
      }

      if (callback) {
        callback();
      }
    } // Static
    ;

    Tab._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $this = $(this);
        var data = $this.data(DATA_KEY$9);

        if (!data) {
          data = new Tab(this);
          $this.data(DATA_KEY$9, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config]();
        }
      });
    };

    _createClass(Tab, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$9;
      }
    }]);

    return Tab;
  }();
  /**
   * ------------------------------------------------------------------------
   * Data Api implementation
   * ------------------------------------------------------------------------
   */


  $(document).on(Event$9.CLICK_DATA_API, Selector$9.DATA_TOGGLE, function (event) {
    event.preventDefault();

    Tab._jQueryInterface.call($(this), 'show');
  });
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */

  $.fn[NAME$9] = Tab._jQueryInterface;
  $.fn[NAME$9].Constructor = Tab;

  $.fn[NAME$9].noConflict = function () {
    $.fn[NAME$9] = JQUERY_NO_CONFLICT$9;
    return Tab._jQueryInterface;
  };

  /**
   * ------------------------------------------------------------------------
   * Constants
   * ------------------------------------------------------------------------
   */

  var NAME$a = 'toast';
  var VERSION$a = '4.3.1';
  var DATA_KEY$a = 'bs.toast';
  var EVENT_KEY$a = "." + DATA_KEY$a;
  var JQUERY_NO_CONFLICT$a = $.fn[NAME$a];
  var Event$a = {
    CLICK_DISMISS: "click.dismiss" + EVENT_KEY$a,
    HIDE: "hide" + EVENT_KEY$a,
    HIDDEN: "hidden" + EVENT_KEY$a,
    SHOW: "show" + EVENT_KEY$a,
    SHOWN: "shown" + EVENT_KEY$a
  };
  var ClassName$a = {
    FADE: 'fade',
    HIDE: 'hide',
    SHOW: 'show',
    SHOWING: 'showing'
  };
  var DefaultType$7 = {
    animation: 'boolean',
    autohide: 'boolean',
    delay: 'number'
  };
  var Default$7 = {
    animation: true,
    autohide: true,
    delay: 500
  };
  var Selector$a = {
    DATA_DISMISS: '[data-dismiss="toast"]'
    /**
     * ------------------------------------------------------------------------
     * Class Definition
     * ------------------------------------------------------------------------
     */

  };

  var Toast =
  /*#__PURE__*/
  function () {
    function Toast(element, config) {
      this._element = element;
      this._config = this._getConfig(config);
      this._timeout = null;

      this._setListeners();
    } // Getters


    var _proto = Toast.prototype;

    // Public
    _proto.show = function show() {
      var _this = this;

      $(this._element).trigger(Event$a.SHOW);

      if (this._config.animation) {
        this._element.classList.add(ClassName$a.FADE);
      }

      var complete = function complete() {
        _this._element.classList.remove(ClassName$a.SHOWING);

        _this._element.classList.add(ClassName$a.SHOW);

        $(_this._element).trigger(Event$a.SHOWN);

        if (_this._config.autohide) {
          _this.hide();
        }
      };

      this._element.classList.remove(ClassName$a.HIDE);

      this._element.classList.add(ClassName$a.SHOWING);

      if (this._config.animation) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._element);
        $(this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }
    };

    _proto.hide = function hide(withoutTimeout) {
      var _this2 = this;

      if (!this._element.classList.contains(ClassName$a.SHOW)) {
        return;
      }

      $(this._element).trigger(Event$a.HIDE);

      if (withoutTimeout) {
        this._close();
      } else {
        this._timeout = setTimeout(function () {
          _this2._close();
        }, this._config.delay);
      }
    };

    _proto.dispose = function dispose() {
      clearTimeout(this._timeout);
      this._timeout = null;

      if (this._element.classList.contains(ClassName$a.SHOW)) {
        this._element.classList.remove(ClassName$a.SHOW);
      }

      $(this._element).off(Event$a.CLICK_DISMISS);
      $.removeData(this._element, DATA_KEY$a);
      this._element = null;
      this._config = null;
    } // Private
    ;

    _proto._getConfig = function _getConfig(config) {
      config = _objectSpread({}, Default$7, $(this._element).data(), typeof config === 'object' && config ? config : {});
      Util.typeCheckConfig(NAME$a, config, this.constructor.DefaultType);
      return config;
    };

    _proto._setListeners = function _setListeners() {
      var _this3 = this;

      $(this._element).on(Event$a.CLICK_DISMISS, Selector$a.DATA_DISMISS, function () {
        return _this3.hide(true);
      });
    };

    _proto._close = function _close() {
      var _this4 = this;

      var complete = function complete() {
        _this4._element.classList.add(ClassName$a.HIDE);

        $(_this4._element).trigger(Event$a.HIDDEN);
      };

      this._element.classList.remove(ClassName$a.SHOW);

      if (this._config.animation) {
        var transitionDuration = Util.getTransitionDurationFromElement(this._element);
        $(this._element).one(Util.TRANSITION_END, complete).emulateTransitionEnd(transitionDuration);
      } else {
        complete();
      }
    } // Static
    ;

    Toast._jQueryInterface = function _jQueryInterface(config) {
      return this.each(function () {
        var $element = $(this);
        var data = $element.data(DATA_KEY$a);

        var _config = typeof config === 'object' && config;

        if (!data) {
          data = new Toast(this, _config);
          $element.data(DATA_KEY$a, data);
        }

        if (typeof config === 'string') {
          if (typeof data[config] === 'undefined') {
            throw new TypeError("No method named \"" + config + "\"");
          }

          data[config](this);
        }
      });
    };

    _createClass(Toast, null, [{
      key: "VERSION",
      get: function get() {
        return VERSION$a;
      }
    }, {
      key: "DefaultType",
      get: function get() {
        return DefaultType$7;
      }
    }, {
      key: "Default",
      get: function get() {
        return Default$7;
      }
    }]);

    return Toast;
  }();
  /**
   * ------------------------------------------------------------------------
   * jQuery
   * ------------------------------------------------------------------------
   */


  $.fn[NAME$a] = Toast._jQueryInterface;
  $.fn[NAME$a].Constructor = Toast;

  $.fn[NAME$a].noConflict = function () {
    $.fn[NAME$a] = JQUERY_NO_CONFLICT$a;
    return Toast._jQueryInterface;
  };

  /**
   * --------------------------------------------------------------------------
   * Bootstrap (v4.3.1): index.js
   * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
   * --------------------------------------------------------------------------
   */

  (function () {
    if (typeof $ === 'undefined') {
      throw new TypeError('Bootstrap\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\'s JavaScript.');
    }

    var version = $.fn.jquery.split(' ')[0].split('.');
    var minMajor = 1;
    var ltMajor = 2;
    var minMinor = 9;
    var minPatch = 1;
    var maxMajor = 4;

    if (version[0] < ltMajor && version[1] < minMinor || version[0] === minMajor && version[1] === minMinor && version[2] < minPatch || version[0] >= maxMajor) {
      throw new Error('Bootstrap\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0');
    }
  })();

  exports.Util = Util;
  exports.Alert = Alert;
  exports.Button = Button;
  exports.Carousel = Carousel;
  exports.Collapse = Collapse;
  exports.Dropdown = Dropdown;
  exports.Modal = Modal;
  exports.Popover = Popover;
  exports.Scrollspy = ScrollSpy;
  exports.Tab = Tab;
  exports.Toast = Toast;
  exports.Tooltip = Tooltip;

  Object.defineProperty(exports, '__esModule', { value: true });

}));
//# sourceMappingURL=bootstrap.js.map


/***/ }),

/***/ "./node_modules/is-buffer/index.js":
/*!*****************************************!*\
  !*** ./node_modules/is-buffer/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */

module.exports = function isBuffer (obj) {
  return obj != null && obj.constructor != null &&
    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)
}


/***/ }),

/***/ "./node_modules/jquery/dist/jquery.js":
/*!********************************************!*\
  !*** ./node_modules/jquery/dist/jquery.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
( function( global, factory ) {

	"use strict";

	if (  true && typeof module.exports === "object" ) {

		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
} )( typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
// enough that all such attempts are guarded in a try block.
"use strict";

var arr = [];

var document = window.document;

var getProto = Object.getPrototypeOf;

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var fnToString = hasOwn.toString;

var ObjectFunctionString = fnToString.call( Object );

var support = {};

var isFunction = function isFunction( obj ) {

      // Support: Chrome <=57, Firefox <=52
      // In some browsers, typeof returns "function" for HTML <object> elements
      // (i.e., `typeof document.createElement( "object" ) === "function"`).
      // We don't want to classify *any* DOM node as a function.
      return typeof obj === "function" && typeof obj.nodeType !== "number";
  };


var isWindow = function isWindow( obj ) {
		return obj != null && obj === obj.window;
	};




	var preservedScriptAttributes = {
		type: true,
		src: true,
		nonce: true,
		noModule: true
	};

	function DOMEval( code, node, doc ) {
		doc = doc || document;

		var i, val,
			script = doc.createElement( "script" );

		script.text = code;
		if ( node ) {
			for ( i in preservedScriptAttributes ) {

				// Support: Firefox 64+, Edge 18+
				// Some browsers don't support the "nonce" property on scripts.
				// On the other hand, just using `getAttribute` is not enough as
				// the `nonce` attribute is reset to an empty string whenever it
				// becomes browsing-context connected.
				// See https://github.com/whatwg/html/issues/2369
				// See https://html.spec.whatwg.org/#nonce-attributes
				// The `node.getAttribute` check was added for the sake of
				// `jQuery.globalEval` so that it can fake a nonce-containing node
				// via an object.
				val = node[ i ] || node.getAttribute && node.getAttribute( i );
				if ( val ) {
					script.setAttribute( i, val );
				}
			}
		}
		doc.head.appendChild( script ).parentNode.removeChild( script );
	}


function toType( obj ) {
	if ( obj == null ) {
		return obj + "";
	}

	// Support: Android <=2.3 only (functionish RegExp)
	return typeof obj === "object" || typeof obj === "function" ?
		class2type[ toString.call( obj ) ] || "object" :
		typeof obj;
}
/* global Symbol */
// Defining this global in .eslintrc.json would create a danger of using the global
// unguarded in another place, it seems safer to define global only for this module



var
	version = "3.4.1",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android <=4.0 only
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {

		// Return all the elements in a clean array
		if ( num == null ) {
			return slice.call( this );
		}

		// Return just the one element from the set
		return num < 0 ? this[ num + this.length ] : this[ num ];
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction( target ) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				copy = options[ name ];

				// Prevent Object.prototype pollution
				// Prevent never-ending loop
				if ( name === "__proto__" || target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = Array.isArray( copy ) ) ) ) {
					src = target[ name ];

					// Ensure proper type for the source value
					if ( copyIsArray && !Array.isArray( src ) ) {
						clone = [];
					} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {
						clone = {};
					} else {
						clone = src;
					}
					copyIsArray = false;

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isPlainObject: function( obj ) {
		var proto, Ctor;

		// Detect obvious negatives
		// Use toString instead of jQuery.type to catch host objects
		if ( !obj || toString.call( obj ) !== "[object Object]" ) {
			return false;
		}

		proto = getProto( obj );

		// Objects with no prototype (e.g., `Object.create( null )`) are plain
		if ( !proto ) {
			return true;
		}

		// Objects with prototype are plain iff they were constructed by a global Object function
		Ctor = hasOwn.call( proto, "constructor" ) && proto.constructor;
		return typeof Ctor === "function" && fnToString.call( Ctor ) === ObjectFunctionString;
	},

	isEmptyObject: function( obj ) {
		var name;

		for ( name in obj ) {
			return false;
		}
		return true;
	},

	// Evaluates a script in a global context
	globalEval: function( code, options ) {
		DOMEval( code, { nonce: options && options.nonce } );
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// Support: Android <=4.0 only
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	// Support: Android <=4.0 only, PhantomJS 1 only
	// push.apply(_, arraylike) throws on ancient WebKit
	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];
}

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
function( i, name ) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
} );

function isArrayLike( obj ) {

	// Support: real iOS 8.2 only (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = toType( obj );

	if ( isFunction( obj ) || isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	nonnativeSelectorCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// https://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),
	rdescend = new RegExp( whitespace + "|>" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rhtml = /HTML$/i,
	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,

	// CSS escapes
	// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// CSS string/identifier serialization
	// https://drafts.csswg.org/cssom/#common-serializing-idioms
	rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
	fcssescape = function( ch, asCodePoint ) {
		if ( asCodePoint ) {

			// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
			if ( ch === "\0" ) {
				return "\uFFFD";
			}

			// Control characters and (dependent upon position) numbers get escaped as code points
			return ch.slice( 0, -1 ) + "\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + " ";
		}

		// Other potentially-special ASCII characters get backslash-escaped
		return "\\" + ch;
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	},

	inDisabledFieldset = addCombinator(
		function( elem ) {
			return elem.disabled === true && elem.nodeName.toLowerCase() === "fieldset";
		},
		{ dir: "parentNode", next: "legend" }
	);

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {

		if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
			setDocument( context );
		}
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {

				// ID selector
				if ( (m = match[1]) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( (elem = context.getElementById( m )) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && (elem = newContext.getElementById( m )) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[2] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( (m = match[3]) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!nonnativeSelectorCache[ selector + " " ] &&
				(!rbuggyQSA || !rbuggyQSA.test( selector )) &&

				// Support: IE 8 only
				// Exclude object elements
				(nodeType !== 1 || context.nodeName.toLowerCase() !== "object") ) {

				newSelector = selector;
				newContext = context;

				// qSA considers elements outside a scoping root when evaluating child or
				// descendant combinators, which is not what we want.
				// In such cases, we work around the behavior by prefixing every selector in the
				// list with an ID selector referencing the scope context.
				// Thanks to Andrew Dupont for this technique.
				if ( nodeType === 1 && rdescend.test( selector ) ) {

					// Capture the context ID, setting it first if necessary
					if ( (nid = context.getAttribute( "id" )) ) {
						nid = nid.replace( rcssescape, fcssescape );
					} else {
						context.setAttribute( "id", (nid = expando) );
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					while ( i-- ) {
						groups[i] = "#" + nid + " " + toSelector( groups[i] );
					}
					newSelector = groups.join( "," );

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;
				}

				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch ( qsaError ) {
					nonnativeSelectorCache( selector, true );
				} finally {
					if ( nid === expando ) {
						context.removeAttribute( "id" );
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created element and returns a boolean result
 */
function assert( fn ) {
	var el = document.createElement("fieldset");

	try {
		return !!fn( el );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( el.parentNode ) {
			el.parentNode.removeChild( el );
		}
		// release memory in IE
		el = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			a.sourceIndex - b.sourceIndex;

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for :enabled/:disabled
 * @param {Boolean} disabled true for :disabled; false for :enabled
 */
function createDisabledPseudo( disabled ) {

	// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
	return function( elem ) {

		// Only certain elements can match :enabled or :disabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
		if ( "form" in elem ) {

			// Check for inherited disabledness on relevant non-disabled elements:
			// * listed form-associated elements in a disabled fieldset
			//   https://html.spec.whatwg.org/multipage/forms.html#category-listed
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
			// * option elements in a disabled optgroup
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
			// All such elements have a "form" property.
			if ( elem.parentNode && elem.disabled === false ) {

				// Option elements defer to a parent optgroup if present
				if ( "label" in elem ) {
					if ( "label" in elem.parentNode ) {
						return elem.parentNode.disabled === disabled;
					} else {
						return elem.disabled === disabled;
					}
				}

				// Support: IE 6 - 11
				// Use the isDisabled shortcut property to check for disabled fieldset ancestors
				return elem.isDisabled === disabled ||

					// Where there is no isDisabled, check manually
					/* jshint -W018 */
					elem.isDisabled !== !disabled &&
						inDisabledFieldset( elem ) === disabled;
			}

			return elem.disabled === disabled;

		// Try to winnow out elements that can't be disabled before trusting the disabled property.
		// Some victims get caught in our net (label, legend, menu, track), but it shouldn't
		// even exist on them, let alone have a boolean value.
		} else if ( "label" in elem ) {
			return elem.disabled === disabled;
		}

		// Remaining elements are neither :enabled nor :disabled
		return false;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	var namespace = elem.namespaceURI,
		docElem = (elem.ownerDocument || elem).documentElement;

	// Support: IE <=8
	// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes
	// https://bugs.jquery.com/ticket/4833
	return !rhtml.test( namespace || docElem && docElem.nodeName || "HTML" );
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, subWindow,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9-11, Edge
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	if ( preferredDoc !== document &&
		(subWindow = document.defaultView) && subWindow.top !== subWindow ) {

		// Support: IE 11, Edge
		if ( subWindow.addEventListener ) {
			subWindow.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( subWindow.attachEvent ) {
			subWindow.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( el ) {
		el.className = "i";
		return !el.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( el ) {
		el.appendChild( document.createComment("") );
		return !el.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programmatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( el ) {
		docElem.appendChild( el ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	});

	// ID filter and find
	if ( support.getById ) {
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var elem = context.getElementById( id );
				return elem ? [ elem ] : [];
			}
		};
	} else {
		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};

		// Support: IE 6 - 7 only
		// getElementById is not reliable as a find shortcut
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var node, i, elems,
					elem = context.getElementById( id );

				if ( elem ) {

					// Verify the id attribute
					node = elem.getAttributeNode("id");
					if ( node && node.value === id ) {
						return [ elem ];
					}

					// Fall back on getElementsByName
					elems = context.getElementsByName( id );
					i = 0;
					while ( (elem = elems[i++]) ) {
						node = elem.getAttributeNode("id");
						if ( node && node.value === id ) {
							return [ elem ];
						}
					}
				}

				return [];
			}
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See https://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( document.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( el ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// https://bugs.jquery.com/ticket/12359
			docElem.appendChild( el ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( el.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !el.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !el.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !el.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibling-combinator selector` fails
			if ( !el.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( el ) {
			el.innerHTML = "<a href='' disabled='disabled'></a>" +
				"<select disabled='disabled'><option/></select>";

			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement("input");
			input.setAttribute( "type", "hidden" );
			el.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( el.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( el.querySelectorAll(":enabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: IE9-11+
			// IE's :disabled selector does not pick up the children of disabled fieldsets
			docElem.appendChild( el ).disabled = true;
			if ( el.querySelectorAll(":disabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			el.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( el ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( el, "*" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( el, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === document ? -1 :
				b === document ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	if ( support.matchesSelector && documentIsHTML &&
		!nonnativeSelectorCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {
			nonnativeSelectorCache( expr, true );
		}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.escape = function( sel ) {
	return (sel + "").replace( rcssescape, fcssescape );
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || (node[ expando ] = {});

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								(outerCache[ node.uniqueID ] = {});

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {
							// Use previously-cached element index if available
							if ( useCache ) {
								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || (node[ expando ] = {});

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									(outerCache[ node.uniqueID ] = {});

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {
								// Use the same loop as above to seek `elem` from the start
								while ( (node = ++nodeIndex && node && node[ dir ] ||
									(diff = nodeIndex = 0) || start.pop()) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] || (node[ expando ] = {});

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												(outerCache[ node.uniqueID ] = {});

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": createDisabledPseudo( false ),
		"disabled": createDisabledPseudo( true ),

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ?
				argument + length :
				argument > length ?
					length :
					argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		skip = combinator.next,
		key = skip || dir,
		checkNonElements = base && key === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
			return false;
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});

						if ( skip && skip === elem.nodeName.toLowerCase() ) {
							elem = elem[ dir ] || elem;
						} else if ( (oldCache = uniqueCache[ key ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ key ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
			return false;
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context === document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					if ( !context && elem.ownerDocument !== document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context || document, xml) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				context.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( el ) {
	// Should return 1, but returns 4 (following)
	return el.compareDocumentPosition( document.createElement("fieldset") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( el ) {
	el.innerHTML = "<a href='#'></a>";
	return el.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( el ) {
	el.innerHTML = "<input/>";
	el.firstChild.setAttribute( "value", "" );
	return el.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( el ) {
	return el.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;

// Deprecated
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;
jQuery.escapeSelector = Sizzle.escape;




var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;



function nodeName( elem, name ) {

  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();

};
var rsingleTag = ( /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i );



// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			return !!qualifier.call( elem, i, elem ) !== not;
		} );
	}

	// Single element
	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );
	}

	// Arraylike of elements (jQuery, arguments, Array)
	if ( typeof qualifier !== "string" ) {
		return jQuery.grep( elements, function( elem ) {
			return ( indexOf.call( qualifier, elem ) > -1 ) !== not;
		} );
	}

	// Filtered directly for both simple and complex selectors
	return jQuery.filter( qualifier, elements, not );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	if ( elems.length === 1 && elem.nodeType === 1 ) {
		return jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];
	}

	return jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
		return elem.nodeType === 1;
	} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i, ret,
			len = this.length,
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		ret = this.pushStack( [] );

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		return len > 1 ? jQuery.uniqueSort( ret ) : ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	// Shortcut simple #id case for speed
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Method init() accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[ 0 ] === "<" &&
				selector[ selector.length - 1 ] === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					if ( elem ) {

						// Inject the element directly into the jQuery object
						this[ 0 ] = elem;
						this.length = 1;
					}
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( isFunction( selector ) ) {
			return root.ready !== undefined ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter( function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			targets = typeof selectors !== "string" && jQuery( selectors );

		// Positional selectors never match, since there's no _selection_ context
		if ( !rneedsContext.test( selectors ) ) {
			for ( ; i < l; i++ ) {
				for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

					// Always skip document fragments
					if ( cur.nodeType < 11 && ( targets ?
						targets.index( cur ) > -1 :

						// Don't pass non-elements to Sizzle
						cur.nodeType === 1 &&
							jQuery.find.matchesSelector( cur, selectors ) ) ) {

						matched.push( cur );
						break;
					}
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	while ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
		if ( typeof elem.contentDocument !== "undefined" ) {
			return elem.contentDocument;
		}

		// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
		// Treat the template element as a regular one in browsers that
		// don't support it.
		if ( nodeName( elem, "template" ) ) {
			elem = elem.content || elem;
		}

		return jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.uniqueSort( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
} );
var rnothtmlwhite = ( /[^\x20\t\r\n\f]+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = locked || options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && toType( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = queue = [];
				if ( !memory && !firing ) {
					list = memory = "";
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


function Identity( v ) {
	return v;
}
function Thrower( ex ) {
	throw ex;
}

function adoptValue( value, resolve, reject, noValue ) {
	var method;

	try {

		// Check for promise aspect first to privilege synchronous behavior
		if ( value && isFunction( ( method = value.promise ) ) ) {
			method.call( value ).done( resolve ).fail( reject );

		// Other thenables
		} else if ( value && isFunction( ( method = value.then ) ) ) {
			method.call( value, resolve, reject );

		// Other non-thenables
		} else {

			// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
			// * false: [ value ].slice( 0 ) => resolve( value )
			// * true: [ value ].slice( 1 ) => resolve()
			resolve.apply( undefined, [ value ].slice( noValue ) );
		}

	// For Promises/A+, convert exceptions into rejections
	// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
	// Deferred#then to conditionally suppress rejection.
	} catch ( value ) {

		// Support: Android 4.0 only
		// Strict mode functions invoked without .call/.apply get global-object context
		reject.apply( undefined, [ value ] );
	}
}

jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, callbacks,
				// ... .then handlers, argument index, [final state]
				[ "notify", "progress", jQuery.Callbacks( "memory" ),
					jQuery.Callbacks( "memory" ), 2 ],
				[ "resolve", "done", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 0, "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 1, "rejected" ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				"catch": function( fn ) {
					return promise.then( null, fn );
				},

				// Keep pipe for back-compat
				pipe: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;

					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {

							// Map tuples (progress, done, fail) to arguments (done, fail, progress)
							var fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];

							// deferred.progress(function() { bind to newDefer or newDefer.notify })
							// deferred.done(function() { bind to newDefer or newDefer.resolve })
							// deferred.fail(function() { bind to newDefer or newDefer.reject })
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},
				then: function( onFulfilled, onRejected, onProgress ) {
					var maxDepth = 0;
					function resolve( depth, deferred, handler, special ) {
						return function() {
							var that = this,
								args = arguments,
								mightThrow = function() {
									var returned, then;

									// Support: Promises/A+ section 2.3.3.3.3
									// https://promisesaplus.com/#point-59
									// Ignore double-resolution attempts
									if ( depth < maxDepth ) {
										return;
									}

									returned = handler.apply( that, args );

									// Support: Promises/A+ section 2.3.1
									// https://promisesaplus.com/#point-48
									if ( returned === deferred.promise() ) {
										throw new TypeError( "Thenable self-resolution" );
									}

									// Support: Promises/A+ sections 2.3.3.1, 3.5
									// https://promisesaplus.com/#point-54
									// https://promisesaplus.com/#point-75
									// Retrieve `then` only once
									then = returned &&

										// Support: Promises/A+ section 2.3.4
										// https://promisesaplus.com/#point-64
										// Only check objects and functions for thenability
										( typeof returned === "object" ||
											typeof returned === "function" ) &&
										returned.then;

									// Handle a returned thenable
									if ( isFunction( then ) ) {

										// Special processors (notify) just wait for resolution
										if ( special ) {
											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special )
											);

										// Normal processors (resolve) also hook into progress
										} else {

											// ...and disregard older resolution values
											maxDepth++;

											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special ),
												resolve( maxDepth, deferred, Identity,
													deferred.notifyWith )
											);
										}

									// Handle all other returned values
									} else {

										// Only substitute handlers pass on context
										// and multiple values (non-spec behavior)
										if ( handler !== Identity ) {
											that = undefined;
											args = [ returned ];
										}

										// Process the value(s)
										// Default process is resolve
										( special || deferred.resolveWith )( that, args );
									}
								},

								// Only normal processors (resolve) catch and reject exceptions
								process = special ?
									mightThrow :
									function() {
										try {
											mightThrow();
										} catch ( e ) {

											if ( jQuery.Deferred.exceptionHook ) {
												jQuery.Deferred.exceptionHook( e,
													process.stackTrace );
											}

											// Support: Promises/A+ section 2.3.3.3.4.1
											// https://promisesaplus.com/#point-61
											// Ignore post-resolution exceptions
											if ( depth + 1 >= maxDepth ) {

												// Only substitute handlers pass on context
												// and multiple values (non-spec behavior)
												if ( handler !== Thrower ) {
													that = undefined;
													args = [ e ];
												}

												deferred.rejectWith( that, args );
											}
										}
									};

							// Support: Promises/A+ section 2.3.3.3.1
							// https://promisesaplus.com/#point-57
							// Re-resolve promises immediately to dodge false rejection from
							// subsequent errors
							if ( depth ) {
								process();
							} else {

								// Call an optional hook to record the stack, in case of exception
								// since it's otherwise lost when execution goes async
								if ( jQuery.Deferred.getStackHook ) {
									process.stackTrace = jQuery.Deferred.getStackHook();
								}
								window.setTimeout( process );
							}
						};
					}

					return jQuery.Deferred( function( newDefer ) {

						// progress_handlers.add( ... )
						tuples[ 0 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onProgress ) ?
									onProgress :
									Identity,
								newDefer.notifyWith
							)
						);

						// fulfilled_handlers.add( ... )
						tuples[ 1 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onFulfilled ) ?
									onFulfilled :
									Identity
							)
						);

						// rejected_handlers.add( ... )
						tuples[ 2 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onRejected ) ?
									onRejected :
									Thrower
							)
						);
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 5 ];

			// promise.progress = list.add
			// promise.done = list.add
			// promise.fail = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(
					function() {

						// state = "resolved" (i.e., fulfilled)
						// state = "rejected"
						state = stateString;
					},

					// rejected_callbacks.disable
					// fulfilled_callbacks.disable
					tuples[ 3 - i ][ 2 ].disable,

					// rejected_handlers.disable
					// fulfilled_handlers.disable
					tuples[ 3 - i ][ 3 ].disable,

					// progress_callbacks.lock
					tuples[ 0 ][ 2 ].lock,

					// progress_handlers.lock
					tuples[ 0 ][ 3 ].lock
				);
			}

			// progress_handlers.fire
			// fulfilled_handlers.fire
			// rejected_handlers.fire
			list.add( tuple[ 3 ].fire );

			// deferred.notify = function() { deferred.notifyWith(...) }
			// deferred.resolve = function() { deferred.resolveWith(...) }
			// deferred.reject = function() { deferred.rejectWith(...) }
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? undefined : this, arguments );
				return this;
			};

			// deferred.notifyWith = list.fireWith
			// deferred.resolveWith = list.fireWith
			// deferred.rejectWith = list.fireWith
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( singleValue ) {
		var

			// count of uncompleted subordinates
			remaining = arguments.length,

			// count of unprocessed arguments
			i = remaining,

			// subordinate fulfillment data
			resolveContexts = Array( i ),
			resolveValues = slice.call( arguments ),

			// the master Deferred
			master = jQuery.Deferred(),

			// subordinate callback factory
			updateFunc = function( i ) {
				return function( value ) {
					resolveContexts[ i ] = this;
					resolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( !( --remaining ) ) {
						master.resolveWith( resolveContexts, resolveValues );
					}
				};
			};

		// Single- and empty arguments are adopted like Promise.resolve
		if ( remaining <= 1 ) {
			adoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,
				!remaining );

			// Use .then() to unwrap secondary thenables (cf. gh-3000)
			if ( master.state() === "pending" ||
				isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {

				return master.then();
			}
		}

		// Multiple arguments are aggregated like Promise.all array elements
		while ( i-- ) {
			adoptValue( resolveValues[ i ], updateFunc( i ), master.reject );
		}

		return master.promise();
	}
} );


// These usually indicate a programmer mistake during development,
// warn about them ASAP rather than swallowing them by default.
var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;

jQuery.Deferred.exceptionHook = function( error, stack ) {

	// Support: IE 8 - 9 only
	// Console exists when dev tools are open, which can happen at any time
	if ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {
		window.console.warn( "jQuery.Deferred exception: " + error.message, error.stack, stack );
	}
};




jQuery.readyException = function( error ) {
	window.setTimeout( function() {
		throw error;
	} );
};




// The deferred used on DOM ready
var readyList = jQuery.Deferred();

jQuery.fn.ready = function( fn ) {

	readyList
		.then( fn )

		// Wrap jQuery.readyException in a function so that the lookup
		// happens at the time of error handling instead of callback
		// registration.
		.catch( function( error ) {
			jQuery.readyException( error );
		} );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );
	}
} );

jQuery.ready.then = readyList.then;

// The ready event handler and self cleanup method
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed );
	window.removeEventListener( "load", completed );
	jQuery.ready();
}

// Catch cases where $(document).ready() is called
// after the browser event has already occurred.
// Support: IE <=9 - 10 only
// Older IE sometimes signals "interactive" too soon
if ( document.readyState === "complete" ||
	( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

	// Handle it asynchronously to allow scripts the opportunity to delay ready
	window.setTimeout( jQuery.ready );

} else {

	// Use the handy event callback
	document.addEventListener( "DOMContentLoaded", completed );

	// A fallback to window.onload, that will always work
	window.addEventListener( "load", completed );
}




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( toType( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn(
					elems[ i ], key, raw ?
					value :
					value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	if ( chainable ) {
		return elems;
	}

	// Gets
	if ( bulk ) {
		return fn.call( elems );
	}

	return len ? fn( elems[ 0 ], key ) : emptyGet;
};


// Matches dashed string for camelizing
var rmsPrefix = /^-ms-/,
	rdashAlpha = /-([a-z])/g;

// Used by camelCase as callback to replace()
function fcamelCase( all, letter ) {
	return letter.toUpperCase();
}

// Convert dashed to camelCase; used by the css and data modules
// Support: IE <=9 - 11, Edge 12 - 15
// Microsoft forgot to hump their vendor prefix (#9572)
function camelCase( string ) {
	return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
}
var acceptData = function( owner ) {

	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};




function Data() {
	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;

Data.prototype = {

	cache: function( owner ) {

		// Check if the owner object already has a cache
		var value = owner[ this.expando ];

		// If not, create one
		if ( !value ) {
			value = {};

			// We can accept data for non-element nodes in modern browsers,
			// but we should not, see #8335.
			// Always return an empty object.
			if ( acceptData( owner ) ) {

				// If it is a node unlikely to be stringify-ed or looped over
				// use plain assignment
				if ( owner.nodeType ) {
					owner[ this.expando ] = value;

				// Otherwise secure it in a non-enumerable property
				// configurable must be true to allow the property to be
				// deleted when data is removed
				} else {
					Object.defineProperty( owner, this.expando, {
						value: value,
						configurable: true
					} );
				}
			}
		}

		return value;
	},
	set: function( owner, data, value ) {
		var prop,
			cache = this.cache( owner );

		// Handle: [ owner, key, value ] args
		// Always use camelCase key (gh-2257)
		if ( typeof data === "string" ) {
			cache[ camelCase( data ) ] = value;

		// Handle: [ owner, { properties } ] args
		} else {

			// Copy the properties one-by-one to the cache object
			for ( prop in data ) {
				cache[ camelCase( prop ) ] = data[ prop ];
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		return key === undefined ?
			this.cache( owner ) :

			// Always use camelCase key (gh-2257)
			owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];
	},
	access: function( owner, key, value ) {

		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				( ( key && typeof key === "string" ) && value === undefined ) ) {

			return this.get( owner, key );
		}

		// When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i,
			cache = owner[ this.expando ];

		if ( cache === undefined ) {
			return;
		}

		if ( key !== undefined ) {

			// Support array or space separated string of keys
			if ( Array.isArray( key ) ) {

				// If key is an array of keys...
				// We always set camelCase keys, so remove that.
				key = key.map( camelCase );
			} else {
				key = camelCase( key );

				// If a key with the spaces exists, use it.
				// Otherwise, create an array by matching non-whitespace
				key = key in cache ?
					[ key ] :
					( key.match( rnothtmlwhite ) || [] );
			}

			i = key.length;

			while ( i-- ) {
				delete cache[ key[ i ] ];
			}
		}

		// Remove the expando if there's no more data
		if ( key === undefined || jQuery.isEmptyObject( cache ) ) {

			// Support: Chrome <=35 - 45
			// Webkit & Blink performance suffers when deleting properties
			// from DOM nodes, so set to undefined instead
			// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
			if ( owner.nodeType ) {
				owner[ this.expando ] = undefined;
			} else {
				delete owner[ this.expando ];
			}
		}
	},
	hasData: function( owner ) {
		var cache = owner[ this.expando ];
		return cache !== undefined && !jQuery.isEmptyObject( cache );
	}
};
var dataPriv = new Data();

var dataUser = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /[A-Z]/g;

function getData( data ) {
	if ( data === "true" ) {
		return true;
	}

	if ( data === "false" ) {
		return false;
	}

	if ( data === "null" ) {
		return null;
	}

	// Only convert to a number if it doesn't change the string
	if ( data === +data + "" ) {
		return +data;
	}

	if ( rbrace.test( data ) ) {
		return JSON.parse( data );
	}

	return data;
}

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$&" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = getData( data );
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			dataUser.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend( {
	hasData: function( elem ) {
		return dataUser.hasData( elem ) || dataPriv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return dataUser.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		dataUser.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to dataPriv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return dataPriv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		dataPriv.remove( elem, name );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = dataUser.get( elem );

				if ( elem.nodeType === 1 && !dataPriv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE 11 only
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					dataPriv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				dataUser.set( this, key );
			} );
		}

		return access( this, function( value ) {
			var data;

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {

				// Attempt to get data from the cache
				// The key will always be camelCased in Data
				data = dataUser.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each( function() {

				// We always store the camelCased key
				dataUser.set( this, key, value );
			} );
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each( function() {
			dataUser.remove( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = dataPriv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || Array.isArray( data ) ) {
					queue = dataPriv.access( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return dataPriv.get( elem, key ) || dataPriv.access( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				dataPriv.remove( elem, [ type + "queue", key ] );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = dataPriv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var documentElement = document.documentElement;



	var isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem );
		},
		composed = { composed: true };

	// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only
	// Check attachment across shadow DOM boundaries when possible (gh-3504)
	// Support: iOS 10.0-10.2 only
	// Early iOS 10 versions support `attachShadow` but not `getRootNode`,
	// leading to errors. We need to check for `getRootNode`.
	if ( documentElement.getRootNode ) {
		isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem ) ||
				elem.getRootNode( composed ) === elem.ownerDocument;
		};
	}
var isHiddenWithinTree = function( elem, el ) {

		// isHiddenWithinTree might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;

		// Inline style trumps all
		return elem.style.display === "none" ||
			elem.style.display === "" &&

			// Otherwise, check computed style
			// Support: Firefox <=43 - 45
			// Disconnected elements can have computed display: none, so first confirm that elem is
			// in the document.
			isAttached( elem ) &&

			jQuery.css( elem, "display" ) === "none";
	};

var swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};




function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted, scale,
		maxIterations = 20,
		currentValue = tween ?
			function() {
				return tween.cur();
			} :
			function() {
				return jQuery.css( elem, prop, "" );
			},
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = elem.nodeType &&
			( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Support: Firefox <=54
		// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
		initial = initial / 2;

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		while ( maxIterations-- ) {

			// Evaluate and update our best guess (doubling guesses that zero out).
			// Finish if the scale equals or crosses 1 (making the old*new product non-positive).
			jQuery.style( elem, prop, initialInUnit + unit );
			if ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {
				maxIterations = 0;
			}
			initialInUnit = initialInUnit / scale;

		}

		initialInUnit = initialInUnit * 2;
		jQuery.style( elem, prop, initialInUnit + unit );

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


var defaultDisplayMap = {};

function getDefaultDisplay( elem ) {
	var temp,
		doc = elem.ownerDocument,
		nodeName = elem.nodeName,
		display = defaultDisplayMap[ nodeName ];

	if ( display ) {
		return display;
	}

	temp = doc.body.appendChild( doc.createElement( nodeName ) );
	display = jQuery.css( temp, "display" );

	temp.parentNode.removeChild( temp );

	if ( display === "none" ) {
		display = "block";
	}
	defaultDisplayMap[ nodeName ] = display;

	return display;
}

function showHide( elements, show ) {
	var display, elem,
		values = [],
		index = 0,
		length = elements.length;

	// Determine new display value for elements that need to change
	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		display = elem.style.display;
		if ( show ) {

			// Since we force visibility upon cascade-hidden elements, an immediate (and slow)
			// check is required in this first loop unless we have a nonempty display value (either
			// inline or about-to-be-restored)
			if ( display === "none" ) {
				values[ index ] = dataPriv.get( elem, "display" ) || null;
				if ( !values[ index ] ) {
					elem.style.display = "";
				}
			}
			if ( elem.style.display === "" && isHiddenWithinTree( elem ) ) {
				values[ index ] = getDefaultDisplay( elem );
			}
		} else {
			if ( display !== "none" ) {
				values[ index ] = "none";

				// Remember what we're overwriting
				dataPriv.set( elem, "display", display );
			}
		}
	}

	// Set the display of the elements in a second loop to avoid constant reflow
	for ( index = 0; index < length; index++ ) {
		if ( values[ index ] != null ) {
			elements[ index ].style.display = values[ index ];
		}
	}

	return elements;
}

jQuery.fn.extend( {
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHiddenWithinTree( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([a-z][^\/\0>\x20\t\r\n\f]*)/i );

var rscriptType = ( /^$|^module$|\/(?:java|ecma)script/i );



// We have to close these tags to support XHTML (#13200)
var wrapMap = {

	// Support: IE <=9 only
	option: [ 1, "<select multiple='multiple'>", "</select>" ],

	// XHTML parsers do not magically insert elements in the
	// same way that tag soup parsers do. So we cannot shorten
	// this by omitting <tbody> or other required elements.
	thead: [ 1, "<table>", "</table>" ],
	col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	_default: [ 0, "", "" ]
};

// Support: IE <=9 only
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;


function getAll( context, tag ) {

	// Support: IE <=9 - 11 only
	// Use typeof to avoid zero-argument method invocation on host objects (#15151)
	var ret;

	if ( typeof context.getElementsByTagName !== "undefined" ) {
		ret = context.getElementsByTagName( tag || "*" );

	} else if ( typeof context.querySelectorAll !== "undefined" ) {
		ret = context.querySelectorAll( tag || "*" );

	} else {
		ret = [];
	}

	if ( tag === undefined || tag && nodeName( context, tag ) ) {
		return jQuery.merge( [ context ], ret );
	}

	return ret;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		dataPriv.set(
			elems[ i ],
			"globalEval",
			!refElements || dataPriv.get( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/;

function buildFragment( elems, context, scripts, selection, ignored ) {
	var elem, tmp, tag, wrap, attached, j,
		fragment = context.createDocumentFragment(),
		nodes = [],
		i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( toType( elem ) === "object" ) {

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || fragment.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;
				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, tmp.childNodes );

				// Remember the top-level container
				tmp = fragment.firstChild;

				// Ensure the created nodes are orphaned (#12392)
				tmp.textContent = "";
			}
		}
	}

	// Remove wrapper from fragment
	fragment.textContent = "";

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}
			continue;
		}

		attached = isAttached( elem );

		// Append to fragment
		tmp = getAll( fragment.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( attached ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	return fragment;
}


( function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Android 4.0 - 4.3 only
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Android <=4.1 only
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE <=11 only
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
} )();


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE <=9 - 11+
// focus() and blur() are asynchronous, except when they are no-op.
// So expect focus to be synchronous when the element is already active,
// and blur to be synchronous when the element is not already active.
// (focus and blur are always synchronous in other supported browsers,
// this just defines when we can count on it).
function expectSync( elem, type ) {
	return ( elem === safeActiveElement() ) === ( type === "focus" );
}

// Support: IE <=9 only
// Accessing document.activeElement can throw unexpectedly
// https://bugs.jquery.com/ticket/13393
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Ensure that invalid selectors throw exceptions at attach time
		// Evaluate against documentElement in case elem is a non-element node (e.g., document)
		if ( selector ) {
			jQuery.find.matchesSelector( documentElement, selector );
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = {};
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.hasData( elem ) && dataPriv.get( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove data and the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			dataPriv.remove( elem, "handle events" );
		}
	},

	dispatch: function( nativeEvent ) {

		// Make a writable jQuery.Event from the native event object
		var event = jQuery.event.fix( nativeEvent );

		var i, j, ret, matched, handleObj, handlerQueue,
			args = new Array( arguments.length ),
			handlers = ( dataPriv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;

		for ( i = 1; i < arguments.length; i++ ) {
			args[ i ] = arguments[ i ];
		}

		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// If the event is namespaced, then each handler is only invoked if it is
				// specially universal or its namespaces are a superset of the event's.
				if ( !event.rnamespace || handleObj.namespace === false ||
					event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, handleObj, sel, matchedHandlers, matchedSelectors,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		if ( delegateCount &&

			// Support: IE <=9
			// Black-hole SVG <use> instance trees (trac-13180)
			cur.nodeType &&

			// Support: Firefox <=42
			// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
			// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
			// Support: IE 11 only
			// ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
			!( event.type === "click" && event.button >= 1 ) ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && !( event.type === "click" && cur.disabled === true ) ) {
					matchedHandlers = [];
					matchedSelectors = {};
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matchedSelectors[ sel ] === undefined ) {
							matchedSelectors[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matchedSelectors[ sel ] ) {
							matchedHandlers.push( handleObj );
						}
					}
					if ( matchedHandlers.length ) {
						handlerQueue.push( { elem: cur, handlers: matchedHandlers } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		cur = this;
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	addProp: function( name, hook ) {
		Object.defineProperty( jQuery.Event.prototype, name, {
			enumerable: true,
			configurable: true,

			get: isFunction( hook ) ?
				function() {
					if ( this.originalEvent ) {
							return hook( this.originalEvent );
					}
				} :
				function() {
					if ( this.originalEvent ) {
							return this.originalEvent[ name ];
					}
				},

			set: function( value ) {
				Object.defineProperty( this, name, {
					enumerable: true,
					configurable: true,
					writable: true,
					value: value
				} );
			}
		} );
	},

	fix: function( originalEvent ) {
		return originalEvent[ jQuery.expando ] ?
			originalEvent :
			new jQuery.Event( originalEvent );
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		click: {

			// Utilize native event to ensure correct state for checkable inputs
			setup: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Claim the first handler
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					// dataPriv.set( el, "click", ... )
					leverageNative( el, "click", returnTrue );
				}

				// Return false to allow normal processing in the caller
				return false;
			},
			trigger: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Force setup before triggering a click
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					leverageNative( el, "click" );
				}

				// Return non-false to allow normal event-path propagation
				return true;
			},

			// For cross-browser consistency, suppress native .click() on links
			// Also prevent it if we're currently inside a leveraged native-event stack
			_default: function( event ) {
				var target = event.target;
				return rcheckableType.test( target.type ) &&
					target.click && nodeName( target, "input" ) &&
					dataPriv.get( target, "click" ) ||
					nodeName( target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	}
};

// Ensure the presence of an event listener that handles manually-triggered
// synthetic events by interrupting progress until reinvoked in response to
// *native* events that it fires directly, ensuring that state changes have
// already occurred before other listeners are invoked.
function leverageNative( el, type, expectSync ) {

	// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add
	if ( !expectSync ) {
		if ( dataPriv.get( el, type ) === undefined ) {
			jQuery.event.add( el, type, returnTrue );
		}
		return;
	}

	// Register the controller as a special universal handler for all event namespaces
	dataPriv.set( el, type, false );
	jQuery.event.add( el, type, {
		namespace: false,
		handler: function( event ) {
			var notAsync, result,
				saved = dataPriv.get( this, type );

			if ( ( event.isTrigger & 1 ) && this[ type ] ) {

				// Interrupt processing of the outer synthetic .trigger()ed event
				// Saved data should be false in such cases, but might be a leftover capture object
				// from an async native handler (gh-4350)
				if ( !saved.length ) {

					// Store arguments for use when handling the inner native event
					// There will always be at least one argument (an event object), so this array
					// will not be confused with a leftover capture object.
					saved = slice.call( arguments );
					dataPriv.set( this, type, saved );

					// Trigger the native event and capture its result
					// Support: IE <=9 - 11+
					// focus() and blur() are asynchronous
					notAsync = expectSync( this, type );
					this[ type ]();
					result = dataPriv.get( this, type );
					if ( saved !== result || notAsync ) {
						dataPriv.set( this, type, false );
					} else {
						result = {};
					}
					if ( saved !== result ) {

						// Cancel the outer synthetic event
						event.stopImmediatePropagation();
						event.preventDefault();
						return result.value;
					}

				// If this is an inner synthetic event for an event with a bubbling surrogate
				// (focus or blur), assume that the surrogate already propagated from triggering the
				// native event and prevent that from happening again here.
				// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the
				// bubbling surrogate propagates *after* the non-bubbling base), but that seems
				// less bad than duplication.
				} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {
					event.stopPropagation();
				}

			// If this is a native event triggered above, everything is now in order
			// Fire an inner synthetic event with the original arguments
			} else if ( saved.length ) {

				// ...and capture the result
				dataPriv.set( this, type, {
					value: jQuery.event.trigger(

						// Support: IE <=9 - 11+
						// Extend with the prototype to reset the above stopImmediatePropagation()
						jQuery.extend( saved[ 0 ], jQuery.Event.prototype ),
						saved.slice( 1 ),
						this
					)
				} );

				// Abort handling of the native event
				event.stopImmediatePropagation();
			}
		}
	} );
}

jQuery.removeEvent = function( elem, type, handle ) {

	// This "if" is needed for plain objects
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle );
	}
};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: Android <=2.3 only
				src.returnValue === false ?
			returnTrue :
			returnFalse;

		// Create target properties
		// Support: Safari <=6 - 7 only
		// Target should not be a text node (#504, #13143)
		this.target = ( src.target && src.target.nodeType === 3 ) ?
			src.target.parentNode :
			src.target;

		this.currentTarget = src.currentTarget;
		this.relatedTarget = src.relatedTarget;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || Date.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,
	isSimulated: false,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && !this.isSimulated ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Includes all common event props including KeyEvent and MouseEvent specific props
jQuery.each( {
	altKey: true,
	bubbles: true,
	cancelable: true,
	changedTouches: true,
	ctrlKey: true,
	detail: true,
	eventPhase: true,
	metaKey: true,
	pageX: true,
	pageY: true,
	shiftKey: true,
	view: true,
	"char": true,
	code: true,
	charCode: true,
	key: true,
	keyCode: true,
	button: true,
	buttons: true,
	clientX: true,
	clientY: true,
	offsetX: true,
	offsetY: true,
	pointerId: true,
	pointerType: true,
	screenX: true,
	screenY: true,
	targetTouches: true,
	toElement: true,
	touches: true,

	which: function( event ) {
		var button = event.button;

		// Add which for key events
		if ( event.which == null && rkeyEvent.test( event.type ) ) {
			return event.charCode != null ? event.charCode : event.keyCode;
		}

		// Add which for click: 1 === left; 2 === middle; 3 === right
		if ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {
			if ( button & 1 ) {
				return 1;
			}

			if ( button & 2 ) {
				return 3;
			}

			if ( button & 4 ) {
				return 2;
			}

			return 0;
		}

		return event.which;
	}
}, jQuery.event.addProp );

jQuery.each( { focus: "focusin", blur: "focusout" }, function( type, delegateType ) {
	jQuery.event.special[ type ] = {

		// Utilize native event if possible so blur/focus sequence is correct
		setup: function() {

			// Claim the first handler
			// dataPriv.set( this, "focus", ... )
			// dataPriv.set( this, "blur", ... )
			leverageNative( this, type, expectSync );

			// Return false to allow normal processing in the caller
			return false;
		},
		trigger: function() {

			// Force setup before trigger
			leverageNative( this, type );

			// Return non-false to allow normal event-path propagation
			return true;
		},

		delegateType: delegateType
	};
} );

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://bugs.chromium.org/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	}
} );


var

	/* eslint-disable max-len */

	// See https://github.com/eslint/eslint/issues/3229
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,

	/* eslint-enable */

	// Support: IE <=10 - 11, Edge 12 - 13 only
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

// Prefer a tbody over its parent table for containing new rows
function manipulationTarget( elem, content ) {
	if ( nodeName( elem, "table" ) &&
		nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ) {

		return jQuery( elem ).children( "tbody" )[ 0 ] || elem;
	}

	return elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( elem.getAttribute( "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	if ( ( elem.type || "" ).slice( 0, 5 ) === "true/" ) {
		elem.type = elem.type.slice( 5 );
	} else {
		elem.removeAttribute( "type" );
	}

	return elem;
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( dataPriv.hasData( src ) ) {
		pdataOld = dataPriv.access( src );
		pdataCur = dataPriv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( dataUser.hasData( src ) ) {
		udataOld = dataUser.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		dataUser.set( dest, udataCur );
	}
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = concat.apply( [], args );

	var fragment, first, scripts, hasScripts, node, doc,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		valueIsFunction = isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( valueIsFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( valueIsFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android <=4.0 only, PhantomJS 1 only
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!dataPriv.access( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src && ( node.type || "" ).toLowerCase()  !== "module" ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl && !node.noModule ) {
								jQuery._evalUrl( node.src, {
									nonce: node.nonce || node.getAttribute( "nonce" )
								} );
							}
						} else {
							DOMEval( node.textContent.replace( rcleanScript, "" ), node, doc );
						}
					}
				}
			}
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		nodes = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = nodes[ i ] ) != null; i++ ) {
		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && isAttached( node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html.replace( rxhtmlTag, "<$1></$2>" );
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = isAttached( elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems ) {
		var data, elem, type,
			special = jQuery.event.special,
			i = 0;

		for ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {
			if ( acceptData( elem ) ) {
				if ( ( data = elem[ dataPriv.expando ] ) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataPriv.expando ] = undefined;
				}
				if ( elem[ dataUser.expando ] ) {

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataUser.expando ] = undefined;
				}
			}
		}
	}
} );

jQuery.fn.extend( {
	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each( function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				} );
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: Android <=4.0 only, PhantomJS 1 only
			// .get() because push.apply(_, arraylike) throws on ancient WebKit
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );
var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {

		// Support: IE <=11 only, Firefox <=30 (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

var rboxStyle = new RegExp( cssExpand.join( "|" ), "i" );



( function() {

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computeStyleTests() {

		// This is a singleton, we need to execute it only once
		if ( !div ) {
			return;
		}

		container.style.cssText = "position:absolute;left:-11111px;width:60px;" +
			"margin-top:1px;padding:0;border:0";
		div.style.cssText =
			"position:relative;display:block;box-sizing:border-box;overflow:scroll;" +
			"margin:auto;border:1px;padding:1px;" +
			"width:60%;top:1%";
		documentElement.appendChild( container ).appendChild( div );

		var divStyle = window.getComputedStyle( div );
		pixelPositionVal = divStyle.top !== "1%";

		// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
		reliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;

		// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
		// Some styles come back with percentage values, even though they shouldn't
		div.style.right = "60%";
		pixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;

		// Support: IE 9 - 11 only
		// Detect misreporting of content dimensions for box-sizing:border-box elements
		boxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;

		// Support: IE 9 only
		// Detect overflow:scroll screwiness (gh-3699)
		// Support: Chrome <=64
		// Don't get tricked when zoom affects offsetWidth (gh-4029)
		div.style.position = "absolute";
		scrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;

		documentElement.removeChild( container );

		// Nullify the div so it wouldn't be stored in the memory and
		// it will also be a sign that checks already performed
		div = null;
	}

	function roundPixelMeasures( measure ) {
		return Math.round( parseFloat( measure ) );
	}

	var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,
		reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	// Support: IE <=9 - 11 only
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	jQuery.extend( support, {
		boxSizingReliable: function() {
			computeStyleTests();
			return boxSizingReliableVal;
		},
		pixelBoxStyles: function() {
			computeStyleTests();
			return pixelBoxStylesVal;
		},
		pixelPosition: function() {
			computeStyleTests();
			return pixelPositionVal;
		},
		reliableMarginLeft: function() {
			computeStyleTests();
			return reliableMarginLeftVal;
		},
		scrollboxSize: function() {
			computeStyleTests();
			return scrollboxSizeVal;
		}
	} );
} )();


function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,

		// Support: Firefox 51+
		// Retrieving style before computed somehow
		// fixes an issue with getting wrong values
		// on detached elements
		style = elem.style;

	computed = computed || getStyles( elem );

	// getPropertyValue is needed for:
	//   .css('filter') (IE 9 only, #12537)
	//   .css('--customProperty) (#3144)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];

		if ( ret === "" && !isAttached( elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// A tribute to the "awesome hack by Dean Edwards"
		// Android Browser returns percentage for some values,
		// but width seems to be reliably pixels.
		// This is against the CSSOM draft spec:
		// https://drafts.csswg.org/cssom/#resolved-values
		if ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?

		// Support: IE <=9 - 11 only
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var cssPrefixes = [ "Webkit", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style,
	vendorProps = {};

// Return a vendor-prefixed property or undefined
function vendorPropName( name ) {

	// Check for vendor prefixed names
	var capName = name[ 0 ].toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

// Return a potentially-mapped jQuery.cssProps or vendor prefixed property
function finalPropName( name ) {
	var final = jQuery.cssProps[ name ] || vendorProps[ name ];

	if ( final ) {
		return final;
	}
	if ( name in emptyStyle ) {
		return name;
	}
	return vendorProps[ name ] = vendorPropName( name ) || name;
}


var

	// Swappable if display is none or starts with table
	// except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rcustomProp = /^--/,
	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	};

function setPositiveNumber( elem, value, subtract ) {

	// Any relative (+/-) values have already been
	// normalized at this point
	var matches = rcssNum.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || "px" ) :
		value;
}

function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {
	var i = dimension === "width" ? 1 : 0,
		extra = 0,
		delta = 0;

	// Adjustment may not be necessary
	if ( box === ( isBorderBox ? "border" : "content" ) ) {
		return 0;
	}

	for ( ; i < 4; i += 2 ) {

		// Both box models exclude margin
		if ( box === "margin" ) {
			delta += jQuery.css( elem, box + cssExpand[ i ], true, styles );
		}

		// If we get here with a content-box, we're seeking "padding" or "border" or "margin"
		if ( !isBorderBox ) {

			// Add padding
			delta += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// For "border" or "margin", add border
			if ( box !== "padding" ) {
				delta += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );

			// But still keep track of it otherwise
			} else {
				extra += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}

		// If we get here with a border-box (content + padding + border), we're seeking "content" or
		// "padding" or "margin"
		} else {

			// For "content", subtract padding
			if ( box === "content" ) {
				delta -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// For "content" or "padding", subtract border
			if ( box !== "margin" ) {
				delta -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	// Account for positive content-box scroll gutter when requested by providing computedVal
	if ( !isBorderBox && computedVal >= 0 ) {

		// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
		// Assuming integer scroll gutter, subtract the rest and round down
		delta += Math.max( 0, Math.ceil(
			elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
			computedVal -
			delta -
			extra -
			0.5

		// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter
		// Use an explicit zero to avoid NaN (gh-3964)
		) ) || 0;
	}

	return delta;
}

function getWidthOrHeight( elem, dimension, extra ) {

	// Start with computed style
	var styles = getStyles( elem ),

		// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).
		// Fake content-box until we know it's needed to know the true value.
		boxSizingNeeded = !support.boxSizingReliable() || extra,
		isBorderBox = boxSizingNeeded &&
			jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
		valueIsBorderBox = isBorderBox,

		val = curCSS( elem, dimension, styles ),
		offsetProp = "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );

	// Support: Firefox <=54
	// Return a confounding non-pixel value or feign ignorance, as appropriate.
	if ( rnumnonpx.test( val ) ) {
		if ( !extra ) {
			return val;
		}
		val = "auto";
	}


	// Fall back to offsetWidth/offsetHeight when value is "auto"
	// This happens for inline elements with no explicit setting (gh-3571)
	// Support: Android <=4.1 - 4.3 only
	// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
	// Support: IE 9-11 only
	// Also use offsetWidth/offsetHeight for when box sizing is unreliable
	// We use getClientRects() to check for hidden/disconnected.
	// In those cases, the computed value can be trusted to be border-box
	if ( ( !support.boxSizingReliable() && isBorderBox ||
		val === "auto" ||
		!parseFloat( val ) && jQuery.css( elem, "display", false, styles ) === "inline" ) &&
		elem.getClientRects().length ) {

		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

		// Where available, offsetWidth/offsetHeight approximate border box dimensions.
		// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the
		// retrieved value as a content box dimension.
		valueIsBorderBox = offsetProp in elem;
		if ( valueIsBorderBox ) {
			val = elem[ offsetProp ];
		}
	}

	// Normalize "" and auto
	val = parseFloat( val ) || 0;

	// Adjust for the element's box model
	return ( val +
		boxModelAdjustment(
			elem,
			dimension,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles,

			// Provide the current computed size to request scroll gutter calculation (gh-3589)
			val
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"gridArea": true,
		"gridColumn": true,
		"gridColumnEnd": true,
		"gridColumnStart": true,
		"gridRow": true,
		"gridRowEnd": true,
		"gridRowStart": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name ),
			style = elem.style;

		// Make sure that we're working with the right name. We don't
		// want to query the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append
			// "px" to a few hardcoded values.
			if ( type === "number" && !isCustomProp ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				if ( isCustomProp ) {
					style.setProperty( name, value );
				} else {
					style[ name ] = value;
				}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name );

		// Make sure that we're working with the right name. We don't
		// want to modify the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}

		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( i, dimension ) {
	jQuery.cssHooks[ dimension ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&

					// Support: Safari 8+
					// Table columns in Safari have non-zero offsetWidth & zero
					// getBoundingClientRect().width unless display is changed.
					// Support: IE <=11 only
					// Running getBoundingClientRect on a disconnected node
					// in IE throws an error.
					( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?
						swap( elem, cssShow, function() {
							return getWidthOrHeight( elem, dimension, extra );
						} ) :
						getWidthOrHeight( elem, dimension, extra );
			}
		},

		set: function( elem, value, extra ) {
			var matches,
				styles = getStyles( elem ),

				// Only read styles.position if the test has a chance to fail
				// to avoid forcing a reflow.
				scrollboxSizeBuggy = !support.scrollboxSize() &&
					styles.position === "absolute",

				// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)
				boxSizingNeeded = scrollboxSizeBuggy || extra,
				isBorderBox = boxSizingNeeded &&
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
				subtract = extra ?
					boxModelAdjustment(
						elem,
						dimension,
						extra,
						isBorderBox,
						styles
					) :
					0;

			// Account for unreliable border-box dimensions by comparing offset* to computed and
			// faking a content-box to get border and padding (gh-3699)
			if ( isBorderBox && scrollboxSizeBuggy ) {
				subtract -= Math.ceil(
					elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
					parseFloat( styles[ dimension ] ) -
					boxModelAdjustment( elem, dimension, "border", false, styles ) -
					0.5
				);
			}

			// Convert to pixels if value adjustment is needed
			if ( subtract && ( matches = rcssNum.exec( value ) ) &&
				( matches[ 3 ] || "px" ) !== "px" ) {

				elem.style[ dimension ] = value;
				value = jQuery.css( elem, dimension );
			}

			return setPositiveNumber( elem, value, subtract );
		}
	};
} );

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return ( parseFloat( curCSS( elem, "marginLeft" ) ) ||
				elem.getBoundingClientRect().left -
					swap( elem, { marginLeft: 0 }, function() {
						return elem.getBoundingClientRect().left;
					} )
				) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( prefix !== "margin" ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( Array.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 && (
					jQuery.cssHooks[ tween.prop ] ||
					tween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9 only
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, inProgress,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

function schedule() {
	if ( inProgress ) {
		if ( document.hidden === false && window.requestAnimationFrame ) {
			window.requestAnimationFrame( schedule );
		} else {
			window.setTimeout( schedule, jQuery.fx.interval );
		}

		jQuery.fx.tick();
	}
}

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = Date.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,
		isBox = "width" in props || "height" in props,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHiddenWithinTree( elem ),
		dataShow = dataPriv.get( elem, "fxshow" );

	// Queue-skipping animations hijack the fx hooks
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// Ensure the complete handler is called before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// Detect show/hide animations
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.test( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// Pretend to be hidden if this is a "show" and
				// there is still data from a stopped show/hide
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;

				// Ignore all other no-op show/hide data
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	// Bail out if this is a no-op like .hide().hide()
	propTween = !jQuery.isEmptyObject( props );
	if ( !propTween && jQuery.isEmptyObject( orig ) ) {
		return;
	}

	// Restrict "overflow" and "display" styles during box animations
	if ( isBox && elem.nodeType === 1 ) {

		// Support: IE <=9 - 11, Edge 12 - 15
		// Record all 3 overflow attributes because IE does not infer the shorthand
		// from identically-valued overflowX and overflowY and Edge just mirrors
		// the overflowX value there.
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Identify a display type, preferring old show/hide data over the CSS cascade
		restoreDisplay = dataShow && dataShow.display;
		if ( restoreDisplay == null ) {
			restoreDisplay = dataPriv.get( elem, "display" );
		}
		display = jQuery.css( elem, "display" );
		if ( display === "none" ) {
			if ( restoreDisplay ) {
				display = restoreDisplay;
			} else {

				// Get nonempty value(s) by temporarily forcing visibility
				showHide( [ elem ], true );
				restoreDisplay = elem.style.display || restoreDisplay;
				display = jQuery.css( elem, "display" );
				showHide( [ elem ] );
			}
		}

		// Animate inline elements as inline-block
		if ( display === "inline" || display === "inline-block" && restoreDisplay != null ) {
			if ( jQuery.css( elem, "float" ) === "none" ) {

				// Restore the original display value at the end of pure show/hide animations
				if ( !propTween ) {
					anim.done( function() {
						style.display = restoreDisplay;
					} );
					if ( restoreDisplay == null ) {
						display = style.display;
						restoreDisplay = display === "none" ? "" : display;
					}
				}
				style.display = "inline-block";
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always( function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		} );
	}

	// Implement show/hide animations
	propTween = false;
	for ( prop in orig ) {

		// General show/hide setup for this element animation
		if ( !propTween ) {
			if ( dataShow ) {
				if ( "hidden" in dataShow ) {
					hidden = dataShow.hidden;
				}
			} else {
				dataShow = dataPriv.access( elem, "fxshow", { display: restoreDisplay } );
			}

			// Store hidden/visible for toggle so `.stop().toggle()` "reverses"
			if ( toggle ) {
				dataShow.hidden = !hidden;
			}

			// Show elements before animating them
			if ( hidden ) {
				showHide( [ elem ], true );
			}

			/* eslint-disable no-loop-func */

			anim.done( function() {

			/* eslint-enable no-loop-func */

				// The final step of a "hide" animation is actually hiding the element
				if ( !hidden ) {
					showHide( [ elem ] );
				}
				dataPriv.remove( elem, "fxshow" );
				for ( prop in orig ) {
					jQuery.style( elem, prop, orig[ prop ] );
				}
			} );
		}

		// Per-property setup
		propTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
		if ( !( prop in dataShow ) ) {
			dataShow[ prop ] = propTween.start;
			if ( hidden ) {
				propTween.end = propTween.start;
				propTween.start = 0;
			}
		}
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( Array.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// Don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3 only
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			// If there's more to do, yield
			if ( percent < 1 && length ) {
				return remaining;
			}

			// If this was an empty animation, synthesize a final progress notification
			if ( !length ) {
				deferred.notifyWith( elem, [ animation, 1, 0 ] );
			}

			// Resolve the animation and report its conclusion
			deferred.resolveWith( elem, [ animation ] );
			return false;
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					result.stop.bind( result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	// Attach callbacks from options
	animation
		.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	return animation;
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnothtmlwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !isFunction( easing ) && easing
	};

	// Go to the end state if fx are off
	if ( jQuery.fx.off ) {
		opt.duration = 0;

	} else {
		if ( typeof opt.duration !== "number" ) {
			if ( opt.duration in jQuery.fx.speeds ) {
				opt.duration = jQuery.fx.speeds[ opt.duration ];

			} else {
				opt.duration = jQuery.fx.speeds._default;
			}
		}
	}

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHiddenWithinTree ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || dataPriv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = dataPriv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = dataPriv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = Date.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Run the timer and safely remove it when done (allowing for external removal)
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	jQuery.fx.start();
};

jQuery.fx.interval = 13;
jQuery.fx.start = function() {
	if ( inProgress ) {
		return;
	}

	inProgress = true;
	schedule();
};

jQuery.fx.stop = function() {
	inProgress = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: Android <=4.3 only
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE <=11 only
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: IE <=11 only
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
} )();


var boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// Attribute hooks are determined by the lowercase version
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			hooks = jQuery.attrHooks[ name.toLowerCase() ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name,
			i = 0,

			// Attribute names can contain non-HTML whitespace characters
			// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
			attrNames = value && value.match( rnothtmlwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				elem.removeAttribute( name );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle,
			lowercaseName = name.toLowerCase();

		if ( !isXML ) {

			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ lowercaseName ];
			attrHandle[ lowercaseName ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				lowercaseName :
				null;
			attrHandle[ lowercaseName ] = handle;
		}
		return ret;
	};
} );




var rfocusable = /^(?:input|select|textarea|button)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each( function() {
			delete this[ jQuery.propFix[ name ] || name ];
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// Support: IE <=9 - 11 only
				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				if ( tabindex ) {
					return parseInt( tabindex, 10 );
				}

				if (
					rfocusable.test( elem.nodeName ) ||
					rclickable.test( elem.nodeName ) &&
					elem.href
				) {
					return 0;
				}

				return -1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Support: IE <=11 only
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
// eslint rule "no-unused-expressions" is disabled for this code
// since it considers such accessions noop
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		},
		set: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );




	// Strip and collapse whitespace according to HTML spec
	// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
	function stripAndCollapse( value ) {
		var tokens = value.match( rnothtmlwhite ) || [];
		return tokens.join( " " );
	}


function getClass( elem ) {
	return elem.getAttribute && elem.getAttribute( "class" ) || "";
}

function classesToArray( value ) {
	if ( Array.isArray( value ) ) {
		return value;
	}
	if ( typeof value === "string" ) {
		return value.match( rnothtmlwhite ) || [];
	}
	return [];
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isValidValue = type === "string" || Array.isArray( value );

		if ( typeof stateVal === "boolean" && isValidValue ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( isValidValue ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = classesToArray( value );

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// Store className if set
					dataPriv.set( this, "__className__", className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				if ( this.setAttribute ) {
					this.setAttribute( "class",
						className || value === false ?
						"" :
						dataPriv.get( this, "__className__" ) || ""
					);
				}
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + stripAndCollapse( getClass( elem ) ) + " " ).indexOf( className ) > -1 ) {
					return true;
			}
		}

		return false;
	}
} );




var rreturn = /\r/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, valueIsFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				// Handle most common string cases
				if ( typeof ret === "string" ) {
					return ret.replace( rreturn, "" );
				}

				// Handle cases where value is null/undef or number
				return ret == null ? "" : ret;
			}

			return;
		}

		valueIsFunction = isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( valueIsFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( Array.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {

				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE <=10 - 11 only
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					stripAndCollapse( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option, i,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one",
					values = one ? null : [],
					max = one ? index + 1 : options.length;

				if ( index < 0 ) {
					i = max;

				} else {
					i = one ? index : 0;
				}

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// Support: IE <=9 only
					// IE8-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							!option.disabled &&
							( !option.parentNode.disabled ||
								!nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					/* eslint-disable no-cond-assign */

					if ( option.selected =
						jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1
					) {
						optionSet = true;
					}

					/* eslint-enable no-cond-assign */
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( Array.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




// Return jQuery for attributes-only inclusion


support.focusin = "onfocusin" in window;


var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	stopPropagationCallback = function( e ) {
		e.stopPropagation();
	};

jQuery.extend( jQuery.event, {

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = lastElement = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {
			lastElement = cur;
			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( dataPriv.get( cur, "events" ) || {} )[ event.type ] &&
				dataPriv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( ( !special._default ||
				special._default.apply( eventPath.pop(), data ) === false ) &&
				acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;

					if ( event.isPropagationStopped() ) {
						lastElement.addEventListener( type, stopPropagationCallback );
					}

					elem[ type ]();

					if ( event.isPropagationStopped() ) {
						lastElement.removeEventListener( type, stopPropagationCallback );
					}

					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	// Piggyback on a donor event to simulate a different one
	// Used only for `focus(in | out)` events
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true
			}
		);

		jQuery.event.trigger( e, null, elem );
	}

} );

jQuery.fn.extend( {

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


// Support: Firefox <=44
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				dataPriv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					dataPriv.remove( doc, fix );

				} else {
					dataPriv.access( doc, fix, attaches );
				}
			}
		};
	} );
}
var location = window.location;

var nonce = Date.now();

var rquery = ( /\?/ );



// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE 9 - 11 only
	// IE throws on parseFromString with invalid input.
	try {
		xml = ( new window.DOMParser() ).parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( Array.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && toType( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, valueOrFunction ) {

			// If value is a function, invoke it and use its return value
			var value = isFunction( valueOrFunction ) ?
				valueOrFunction() :
				valueOrFunction;

			s[ s.length ] = encodeURIComponent( key ) + "=" +
				encodeURIComponent( value == null ? "" : value );
		};

	if ( a == null ) {
		return "";
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} )
		.filter( function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} )
		.map( function( i, elem ) {
			var val = jQuery( this ).val();

			if ( val == null ) {
				return null;
			}

			if ( Array.isArray( val ) ) {
				return jQuery.map( val, function( val ) {
					return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
				} );
			}

			return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


var
	r20 = /%20/g,
	rhash = /#.*$/,
	rantiCache = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Anchor tag for parsing the document origin
	originAnchor = document.createElement( "a" );
	originAnchor.href = location.href;

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];

		if ( isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType[ 0 ] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s.throws ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: location.href,
		type: "GET",
		isLocal: rlocalProtocol.test( location.protocol ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",

		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": JSON.parse,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,

			// URL without anti-cache param
			cacheURL,

			// Response headers
			responseHeadersString,
			responseHeaders,

			// timeout handle
			timeoutTimer,

			// Url cleanup var
			urlAnchor,

			// Request state (becomes false upon send and true upon completion)
			completed,

			// To know if global events are to be dispatched
			fireGlobals,

			// Loop variable
			i,

			// uncached part of the url
			uncached,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
					jQuery( callbackContext ) :
					jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( completed ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() + " " ] =
									( responseHeaders[ match[ 1 ].toLowerCase() + " " ] || [] )
										.concat( match[ 2 ] );
							}
						}
						match = responseHeaders[ key.toLowerCase() + " " ];
					}
					return match == null ? null : match.join( ", " );
				},

				// Raw string
				getAllResponseHeaders: function() {
					return completed ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					if ( completed == null ) {
						name = requestHeadersNames[ name.toLowerCase() ] =
							requestHeadersNames[ name.toLowerCase() ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( completed == null ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( completed ) {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						} else {

							// Lazy-add the new callbacks in a way that preserves old ones
							for ( code in map ) {
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR );

		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || location.href ) + "" )
			.replace( rprotocol, location.protocol + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = ( s.dataType || "*" ).toLowerCase().match( rnothtmlwhite ) || [ "" ];

		// A cross-domain request is in order when the origin doesn't match the current origin.
		if ( s.crossDomain == null ) {
			urlAnchor = document.createElement( "a" );

			// Support: IE <=8 - 11, Edge 12 - 15
			// IE throws exception on accessing the href property if url is malformed,
			// e.g. http://example.com:80x/
			try {
				urlAnchor.href = s.url;

				// Support: IE <=8 - 11 only
				// Anchor's host property isn't correctly set when s.url is relative
				urlAnchor.href = urlAnchor.href;
				s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !==
					urlAnchor.protocol + "//" + urlAnchor.host;
			} catch ( e ) {

				// If there is an error parsing the URL, assume it is crossDomain,
				// it can be rejected by the transport if it is invalid
				s.crossDomain = true;
			}
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( completed ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		// Remove hash to simplify url manipulation
		cacheURL = s.url.replace( rhash, "" );

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// Remember the hash so we can put it back
			uncached = s.url.slice( cacheURL.length );

			// If data is available and should be processed, append data to url
			if ( s.data && ( s.processData || typeof s.data === "string" ) ) {
				cacheURL += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data;

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add or update anti-cache param if needed
			if ( s.cache === false ) {
				cacheURL = cacheURL.replace( rantiCache, "$1" );
				uncached = ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ( nonce++ ) + uncached;
			}

			// Put hash and anti-cache on the URL that will be requested (gh-1732)
			s.url = cacheURL + uncached;

		// Change '%20' to '+' if this is encoded form body content (gh-2658)
		} else if ( s.data && s.processData &&
			( s.contentType || "" ).indexOf( "application/x-www-form-urlencoded" ) === 0 ) {
			s.data = s.data.replace( r20, "+" );
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		completeDeferred.add( s.complete );
		jqXHR.done( s.success );
		jqXHR.fail( s.error );

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( completed ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				completed = false;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Rethrow post-completion exceptions
				if ( completed ) {
					throw e;
				}

				// Propagate others as results
				done( -1, e );
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Ignore repeat invocations
			if ( completed ) {
				return;
			}

			completed = true;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// Shift arguments if data argument was omitted
		if ( isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );


jQuery._evalUrl = function( url, options ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,

		// Only evaluate the response if it is successful (gh-4126)
		// dataFilter is not invoked for failure responses, so using it instead
		// of the default converter is kludgy but it works.
		converters: {
			"text script": function() {}
		},
		dataFilter: function( response ) {
			jQuery.globalEval( response, options );
		}
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		var wrap;

		if ( this[ 0 ] ) {
			if ( isFunction( html ) ) {
				html = html.call( this[ 0 ] );
			}

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var htmlIsFunction = isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function( selector ) {
		this.parent( selector ).not( "body" ).each( function() {
			jQuery( this ).replaceWith( this.childNodes );
		} );
		return this;
	}
} );


jQuery.expr.pseudos.hidden = function( elem ) {
	return !jQuery.expr.pseudos.visible( elem );
};
jQuery.expr.pseudos.visible = function( elem ) {
	return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );
};




jQuery.ajaxSettings.xhr = function() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
};

var xhrSuccessStatus = {

		// File protocol always yields status code 0, assume 200
		0: 200,

		// Support: IE <=9 only
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport( function( options ) {
	var callback, errorCallback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr();

				xhr.open(
					options.type,
					options.url,
					options.async,
					options.username,
					options.password
				);

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
					headers[ "X-Requested-With" ] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							callback = errorCallback = xhr.onload =
								xhr.onerror = xhr.onabort = xhr.ontimeout =
									xhr.onreadystatechange = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {

								// Support: IE <=9 only
								// On a manual native abort, IE9 throws
								// errors on any property access that is not readyState
								if ( typeof xhr.status !== "number" ) {
									complete( 0, "error" );
								} else {
									complete(

										// File: protocol always yields status 0; see #8605, #14207
										xhr.status,
										xhr.statusText
									);
								}
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,

									// Support: IE <=9 only
									// IE9 has no XHR2 but throws on binary (trac-11426)
									// For XHR2 non-text, let the caller handle it (gh-2498)
									( xhr.responseType || "text" ) !== "text"  ||
									typeof xhr.responseText !== "string" ?
										{ binary: xhr.response } :
										{ text: xhr.responseText },
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				errorCallback = xhr.onerror = xhr.ontimeout = callback( "error" );

				// Support: IE 9 only
				// Use onreadystatechange to replace onabort
				// to handle uncaught aborts
				if ( xhr.onabort !== undefined ) {
					xhr.onabort = errorCallback;
				} else {
					xhr.onreadystatechange = function() {

						// Check readyState before timeout as it changes
						if ( xhr.readyState === 4 ) {

							// Allow onerror to be called first,
							// but that will not handle a native abort
							// Also, save errorCallback to a variable
							// as xhr.onerror cannot be accessed
							window.setTimeout( function() {
								if ( callback ) {
									errorCallback();
								}
							} );
						}
					};
				}

				// Create the abort callback
				callback = callback( "abort" );

				try {

					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {

					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
jQuery.ajaxPrefilter( function( s ) {
	if ( s.crossDomain ) {
		s.contents.script = false;
	}
} );

// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain or forced-by-attrs requests
	if ( s.crossDomain || s.scriptAttrs ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery( "<script>" )
					.attr( s.scriptAttrs || {} )
					.prop( { charset: s.scriptCharset, src: s.url } )
					.on( "load error", callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					} );

				// Use native DOM manipulation to avoid our domManip AJAX trickery
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// Force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// Make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// Save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// Support: Safari 8 only
// In Safari 8 documents created via document.implementation.createHTMLDocument
// collapse sibling forms: the second one becomes a child of the first one.
// Because of that, this security measure has to be disabled in Safari 8.
// https://bugs.webkit.org/show_bug.cgi?id=137337
support.createHTMLDocument = ( function() {
	var body = document.implementation.createHTMLDocument( "" ).body;
	body.innerHTML = "<form></form><form></form>";
	return body.childNodes.length === 2;
} )();


// Argument "data" should be string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( typeof data !== "string" ) {
		return [];
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}

	var base, parsed, scripts;

	if ( !context ) {

		// Stop scripts or inline event handlers from being executed immediately
		// by using document.implementation
		if ( support.createHTMLDocument ) {
			context = document.implementation.createHTMLDocument( "" );

			// Set the base href for the created document
			// so any parsed elements with URLs
			// are based on the document's URL (gh-2965)
			base = context.createElement( "base" );
			base.href = document.location.href;
			context.head.appendChild( base );
		} else {
			context = document;
		}
	}

	parsed = rsingleTag.exec( data );
	scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = stripAndCollapse( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.expr.pseudos.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};




jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf( "auto" ) > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {

	// offset() relates an element's border box to the document origin
	offset: function( options ) {

		// Preserve chaining for setter
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var rect, win,
			elem = this[ 0 ];

		if ( !elem ) {
			return;
		}

		// Return zeros for disconnected and hidden (display: none) elements (gh-2310)
		// Support: IE <=11 only
		// Running getBoundingClientRect on a
		// disconnected node in IE throws an error
		if ( !elem.getClientRects().length ) {
			return { top: 0, left: 0 };
		}

		// Get document-relative position by adding viewport scroll to viewport-relative gBCR
		rect = elem.getBoundingClientRect();
		win = elem.ownerDocument.defaultView;
		return {
			top: rect.top + win.pageYOffset,
			left: rect.left + win.pageXOffset
		};
	},

	// position() relates an element's margin box to its offset parent's padding box
	// This corresponds to the behavior of CSS absolute positioning
	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset, doc,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// position:fixed elements are offset from the viewport, which itself always has zero offset
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// Assume position:fixed implies availability of getBoundingClientRect
			offset = elem.getBoundingClientRect();

		} else {
			offset = this.offset();

			// Account for the *real* offset parent, which can be the document or its root element
			// when a statically positioned element is identified
			doc = elem.ownerDocument;
			offsetParent = elem.offsetParent || doc.documentElement;
			while ( offsetParent &&
				( offsetParent === doc.body || offsetParent === doc.documentElement ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) {

				offsetParent = offsetParent.parentNode;
			}
			if ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {

				// Incorporate borders into its offset, since they are outside its content origin
				parentOffset = jQuery( offsetParent ).offset();
				parentOffset.top += jQuery.css( offsetParent, "borderTopWidth", true );
				parentOffset.left += jQuery.css( offsetParent, "borderLeftWidth", true );
			}
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	// This method will return documentElement in the following cases:
	// 1) For the element inside the iframe without offsetParent, this method will return
	//    documentElement of the parent window
	// 2) For the hidden or detached element
	// 3) For body or html element, i.e. in case of the html node - it will return itself
	//
	// but those exceptions were never presented as a real life use-cases
	// and might be considered as more preferable results.
	//
	// This logic, however, is not guaranteed and can change at any point in the future
	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && jQuery.css( offsetParent, "position" ) === "static" ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {

			// Coalesce documents and windows
			var win;
			if ( isWindow( elem ) ) {
				win = elem;
			} else if ( elem.nodeType === 9 ) {
				win = elem.defaultView;
			}

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : win.pageXOffset,
					top ? val : win.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length );
	};
} );

// Support: Safari <=7 - 9.1, Chrome <=37 - 49
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name },
		function( defaultExtra, funcName ) {

		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( isWindow( elem ) ) {

					// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
					return funcName.indexOf( "outer" ) === 0 ?
						elem[ "inner" + name ] :
						elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable );
		};
	} );
} );


jQuery.each( ( "blur focus focusin focusout resize scroll click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup contextmenu" ).split( " " ),
	function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
} );

jQuery.fn.extend( {
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );




jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	}
} );

// Bind a function to a context, optionally partially applying any
// arguments.
// jQuery.proxy is deprecated to promote standards (specifically Function#bind)
// However, it is not slated for removal any time soon
jQuery.proxy = function( fn, context ) {
	var tmp, args, proxy;

	if ( typeof context === "string" ) {
		tmp = fn[ context ];
		context = fn;
		fn = tmp;
	}

	// Quick check to determine if target is callable, in the spec
	// this throws a TypeError, but we will just return undefined.
	if ( !isFunction( fn ) ) {
		return undefined;
	}

	// Simulated bind
	args = slice.call( arguments, 2 );
	proxy = function() {
		return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
	};

	// Set the guid of unique handler to the same of original handler, so it can be removed
	proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	return proxy;
};

jQuery.holdReady = function( hold ) {
	if ( hold ) {
		jQuery.readyWait++;
	} else {
		jQuery.ready( true );
	}
};
jQuery.isArray = Array.isArray;
jQuery.parseJSON = JSON.parse;
jQuery.nodeName = nodeName;
jQuery.isFunction = isFunction;
jQuery.isWindow = isWindow;
jQuery.camelCase = camelCase;
jQuery.type = toType;

jQuery.now = Date.now;

jQuery.isNumeric = function( obj ) {

	// As of jQuery 3.0, isNumeric is limited to
	// strings and numbers (primitives or objects)
	// that can be coerced to finite numbers (gh-2662)
	var type = jQuery.type( obj );
	return ( type === "number" || type === "string" ) &&

		// parseFloat NaNs numeric-cast false positives ("")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		!isNaN( obj - parseFloat( obj ) );
};




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( true ) {
	!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
		return jQuery;
	}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
}




var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( !noGlobal ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;
} );


/***/ }),

/***/ "./node_modules/lodash/lodash.js":
/*!***************************************!*\
  !*** ./node_modules/lodash/lodash.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, module) {var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
;(function() {

  /** Used as a safe reference for `undefined` in pre-ES5 environments. */
  var undefined;

  /** Used as the semantic version number. */
  var VERSION = '4.17.15';

  /** Used as the size to enable large array optimizations. */
  var LARGE_ARRAY_SIZE = 200;

  /** Error message constants. */
  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',
      FUNC_ERROR_TEXT = 'Expected a function';

  /** Used to stand-in for `undefined` hash values. */
  var HASH_UNDEFINED = '__lodash_hash_undefined__';

  /** Used as the maximum memoize cache size. */
  var MAX_MEMOIZE_SIZE = 500;

  /** Used as the internal argument placeholder. */
  var PLACEHOLDER = '__lodash_placeholder__';

  /** Used to compose bitmasks for cloning. */
  var CLONE_DEEP_FLAG = 1,
      CLONE_FLAT_FLAG = 2,
      CLONE_SYMBOLS_FLAG = 4;

  /** Used to compose bitmasks for value comparisons. */
  var COMPARE_PARTIAL_FLAG = 1,
      COMPARE_UNORDERED_FLAG = 2;

  /** Used to compose bitmasks for function metadata. */
  var WRAP_BIND_FLAG = 1,
      WRAP_BIND_KEY_FLAG = 2,
      WRAP_CURRY_BOUND_FLAG = 4,
      WRAP_CURRY_FLAG = 8,
      WRAP_CURRY_RIGHT_FLAG = 16,
      WRAP_PARTIAL_FLAG = 32,
      WRAP_PARTIAL_RIGHT_FLAG = 64,
      WRAP_ARY_FLAG = 128,
      WRAP_REARG_FLAG = 256,
      WRAP_FLIP_FLAG = 512;

  /** Used as default options for `_.truncate`. */
  var DEFAULT_TRUNC_LENGTH = 30,
      DEFAULT_TRUNC_OMISSION = '...';

  /** Used to detect hot functions by number of calls within a span of milliseconds. */
  var HOT_COUNT = 800,
      HOT_SPAN = 16;

  /** Used to indicate the type of lazy iteratees. */
  var LAZY_FILTER_FLAG = 1,
      LAZY_MAP_FLAG = 2,
      LAZY_WHILE_FLAG = 3;

  /** Used as references for various `Number` constants. */
  var INFINITY = 1 / 0,
      MAX_SAFE_INTEGER = 9007199254740991,
      MAX_INTEGER = 1.7976931348623157e+308,
      NAN = 0 / 0;

  /** Used as references for the maximum length and index of an array. */
  var MAX_ARRAY_LENGTH = 4294967295,
      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

  /** Used to associate wrap methods with their bit flags. */
  var wrapFlags = [
    ['ary', WRAP_ARY_FLAG],
    ['bind', WRAP_BIND_FLAG],
    ['bindKey', WRAP_BIND_KEY_FLAG],
    ['curry', WRAP_CURRY_FLAG],
    ['curryRight', WRAP_CURRY_RIGHT_FLAG],
    ['flip', WRAP_FLIP_FLAG],
    ['partial', WRAP_PARTIAL_FLAG],
    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],
    ['rearg', WRAP_REARG_FLAG]
  ];

  /** `Object#toString` result references. */
  var argsTag = '[object Arguments]',
      arrayTag = '[object Array]',
      asyncTag = '[object AsyncFunction]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      domExcTag = '[object DOMException]',
      errorTag = '[object Error]',
      funcTag = '[object Function]',
      genTag = '[object GeneratorFunction]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      nullTag = '[object Null]',
      objectTag = '[object Object]',
      promiseTag = '[object Promise]',
      proxyTag = '[object Proxy]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      symbolTag = '[object Symbol]',
      undefinedTag = '[object Undefined]',
      weakMapTag = '[object WeakMap]',
      weakSetTag = '[object WeakSet]';

  var arrayBufferTag = '[object ArrayBuffer]',
      dataViewTag = '[object DataView]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';

  /** Used to match empty string literals in compiled template source. */
  var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

  /** Used to match HTML entities and HTML characters. */
  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,
      reUnescapedHtml = /[&<>"']/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source),
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

  /** Used to match template delimiters. */
  var reEscape = /<%-([\s\S]+?)%>/g,
      reEvaluate = /<%([\s\S]+?)%>/g,
      reInterpolate = /<%=([\s\S]+?)%>/g;

  /** Used to match property names within property paths. */
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
      reIsPlainProp = /^\w*$/,
      rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

  /**
   * Used to match `RegExp`
   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
   */
  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g,
      reHasRegExpChar = RegExp(reRegExpChar.source);

  /** Used to match leading and trailing whitespace. */
  var reTrim = /^\s+|\s+$/g,
      reTrimStart = /^\s+/,
      reTrimEnd = /\s+$/;

  /** Used to match wrap detail comments. */
  var reWrapComment = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
      reWrapDetails = /\{\n\/\* \[wrapped with (.+)\] \*/,
      reSplitDetails = /,? & /;

  /** Used to match words composed of alphanumeric characters. */
  var reAsciiWord = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;

  /** Used to match backslashes in property paths. */
  var reEscapeChar = /\\(\\)?/g;

  /**
   * Used to match
   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).
   */
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

  /** Used to match `RegExp` flags from their coerced string values. */
  var reFlags = /\w*$/;

  /** Used to detect bad signed hexadecimal string values. */
  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

  /** Used to detect binary string values. */
  var reIsBinary = /^0b[01]+$/i;

  /** Used to detect host constructors (Safari). */
  var reIsHostCtor = /^\[object .+?Constructor\]$/;

  /** Used to detect octal string values. */
  var reIsOctal = /^0o[0-7]+$/i;

  /** Used to detect unsigned integer values. */
  var reIsUint = /^(?:0|[1-9]\d*)$/;

  /** Used to match Latin Unicode letters (excluding mathematical operators). */
  var reLatin = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;

  /** Used to ensure capturing order of template delimiters. */
  var reNoMatch = /($^)/;

  /** Used to match unescaped characters in compiled string literals. */
  var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

  /** Used to compose unicode character classes. */
  var rsAstralRange = '\\ud800-\\udfff',
      rsComboMarksRange = '\\u0300-\\u036f',
      reComboHalfMarksRange = '\\ufe20-\\ufe2f',
      rsComboSymbolsRange = '\\u20d0-\\u20ff',
      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
      rsDingbatRange = '\\u2700-\\u27bf',
      rsLowerRange = 'a-z\\xdf-\\xf6\\xf8-\\xff',
      rsMathOpRange = '\\xac\\xb1\\xd7\\xf7',
      rsNonCharRange = '\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf',
      rsPunctuationRange = '\\u2000-\\u206f',
      rsSpaceRange = ' \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000',
      rsUpperRange = 'A-Z\\xc0-\\xd6\\xd8-\\xde',
      rsVarRange = '\\ufe0e\\ufe0f',
      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;

  /** Used to compose unicode capture groups. */
  var rsApos = "['\u2019]",
      rsAstral = '[' + rsAstralRange + ']',
      rsBreak = '[' + rsBreakRange + ']',
      rsCombo = '[' + rsComboRange + ']',
      rsDigits = '\\d+',
      rsDingbat = '[' + rsDingbatRange + ']',
      rsLower = '[' + rsLowerRange + ']',
      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',
      rsFitz = '\\ud83c[\\udffb-\\udfff]',
      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
      rsNonAstral = '[^' + rsAstralRange + ']',
      rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
      rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
      rsUpper = '[' + rsUpperRange + ']',
      rsZWJ = '\\u200d';

  /** Used to compose unicode regexes. */
  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',
      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',
      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',
      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',
      reOptMod = rsModifier + '?',
      rsOptVar = '[' + rsVarRange + ']?',
      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
      rsOrdLower = '\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',
      rsOrdUpper = '\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])',
      rsSeq = rsOptVar + reOptMod + rsOptJoin,
      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,
      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';

  /** Used to match apostrophes. */
  var reApos = RegExp(rsApos, 'g');

  /**
   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and
   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).
   */
  var reComboMark = RegExp(rsCombo, 'g');

  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */
  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

  /** Used to match complex or compound words. */
  var reUnicodeWord = RegExp([
    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',
    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',
    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,
    rsUpper + '+' + rsOptContrUpper,
    rsOrdUpper,
    rsOrdLower,
    rsDigits,
    rsEmoji
  ].join('|'), 'g');

  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */
  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');

  /** Used to detect strings that need a more robust regexp to match words. */
  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;

  /** Used to assign default `context` object properties. */
  var contextProps = [
    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',
    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',
    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',
    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',
    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'
  ];

  /** Used to make template sourceURLs easier to identify. */
  var templateCounter = -1;

  /** Used to identify `toStringTag` values of typed arrays. */
  var typedArrayTags = {};
  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
  typedArrayTags[uint32Tag] = true;
  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
  typedArrayTags[errorTag] = typedArrayTags[funcTag] =
  typedArrayTags[mapTag] = typedArrayTags[numberTag] =
  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
  typedArrayTags[setTag] = typedArrayTags[stringTag] =
  typedArrayTags[weakMapTag] = false;

  /** Used to identify `toStringTag` values supported by `_.clone`. */
  var cloneableTags = {};
  cloneableTags[argsTag] = cloneableTags[arrayTag] =
  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =
  cloneableTags[boolTag] = cloneableTags[dateTag] =
  cloneableTags[float32Tag] = cloneableTags[float64Tag] =
  cloneableTags[int8Tag] = cloneableTags[int16Tag] =
  cloneableTags[int32Tag] = cloneableTags[mapTag] =
  cloneableTags[numberTag] = cloneableTags[objectTag] =
  cloneableTags[regexpTag] = cloneableTags[setTag] =
  cloneableTags[stringTag] = cloneableTags[symbolTag] =
  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =
  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
  cloneableTags[errorTag] = cloneableTags[funcTag] =
  cloneableTags[weakMapTag] = false;

  /** Used to map Latin Unicode letters to basic Latin letters. */
  var deburredLetters = {
    // Latin-1 Supplement block.
    '\xc0': 'A',  '\xc1': 'A', '\xc2': 'A', '\xc3': 'A', '\xc4': 'A', '\xc5': 'A',
    '\xe0': 'a',  '\xe1': 'a', '\xe2': 'a', '\xe3': 'a', '\xe4': 'a', '\xe5': 'a',
    '\xc7': 'C',  '\xe7': 'c',
    '\xd0': 'D',  '\xf0': 'd',
    '\xc8': 'E',  '\xc9': 'E', '\xca': 'E', '\xcb': 'E',
    '\xe8': 'e',  '\xe9': 'e', '\xea': 'e', '\xeb': 'e',
    '\xcc': 'I',  '\xcd': 'I', '\xce': 'I', '\xcf': 'I',
    '\xec': 'i',  '\xed': 'i', '\xee': 'i', '\xef': 'i',
    '\xd1': 'N',  '\xf1': 'n',
    '\xd2': 'O',  '\xd3': 'O', '\xd4': 'O', '\xd5': 'O', '\xd6': 'O', '\xd8': 'O',
    '\xf2': 'o',  '\xf3': 'o', '\xf4': 'o', '\xf5': 'o', '\xf6': 'o', '\xf8': 'o',
    '\xd9': 'U',  '\xda': 'U', '\xdb': 'U', '\xdc': 'U',
    '\xf9': 'u',  '\xfa': 'u', '\xfb': 'u', '\xfc': 'u',
    '\xdd': 'Y',  '\xfd': 'y', '\xff': 'y',
    '\xc6': 'Ae', '\xe6': 'ae',
    '\xde': 'Th', '\xfe': 'th',
    '\xdf': 'ss',
    // Latin Extended-A block.
    '\u0100': 'A',  '\u0102': 'A', '\u0104': 'A',
    '\u0101': 'a',  '\u0103': 'a', '\u0105': 'a',
    '\u0106': 'C',  '\u0108': 'C', '\u010a': 'C', '\u010c': 'C',
    '\u0107': 'c',  '\u0109': 'c', '\u010b': 'c', '\u010d': 'c',
    '\u010e': 'D',  '\u0110': 'D', '\u010f': 'd', '\u0111': 'd',
    '\u0112': 'E',  '\u0114': 'E', '\u0116': 'E', '\u0118': 'E', '\u011a': 'E',
    '\u0113': 'e',  '\u0115': 'e', '\u0117': 'e', '\u0119': 'e', '\u011b': 'e',
    '\u011c': 'G',  '\u011e': 'G', '\u0120': 'G', '\u0122': 'G',
    '\u011d': 'g',  '\u011f': 'g', '\u0121': 'g', '\u0123': 'g',
    '\u0124': 'H',  '\u0126': 'H', '\u0125': 'h', '\u0127': 'h',
    '\u0128': 'I',  '\u012a': 'I', '\u012c': 'I', '\u012e': 'I', '\u0130': 'I',
    '\u0129': 'i',  '\u012b': 'i', '\u012d': 'i', '\u012f': 'i', '\u0131': 'i',
    '\u0134': 'J',  '\u0135': 'j',
    '\u0136': 'K',  '\u0137': 'k', '\u0138': 'k',
    '\u0139': 'L',  '\u013b': 'L', '\u013d': 'L', '\u013f': 'L', '\u0141': 'L',
    '\u013a': 'l',  '\u013c': 'l', '\u013e': 'l', '\u0140': 'l', '\u0142': 'l',
    '\u0143': 'N',  '\u0145': 'N', '\u0147': 'N', '\u014a': 'N',
    '\u0144': 'n',  '\u0146': 'n', '\u0148': 'n', '\u014b': 'n',
    '\u014c': 'O',  '\u014e': 'O', '\u0150': 'O',
    '\u014d': 'o',  '\u014f': 'o', '\u0151': 'o',
    '\u0154': 'R',  '\u0156': 'R', '\u0158': 'R',
    '\u0155': 'r',  '\u0157': 'r', '\u0159': 'r',
    '\u015a': 'S',  '\u015c': 'S', '\u015e': 'S', '\u0160': 'S',
    '\u015b': 's',  '\u015d': 's', '\u015f': 's', '\u0161': 's',
    '\u0162': 'T',  '\u0164': 'T', '\u0166': 'T',
    '\u0163': 't',  '\u0165': 't', '\u0167': 't',
    '\u0168': 'U',  '\u016a': 'U', '\u016c': 'U', '\u016e': 'U', '\u0170': 'U', '\u0172': 'U',
    '\u0169': 'u',  '\u016b': 'u', '\u016d': 'u', '\u016f': 'u', '\u0171': 'u', '\u0173': 'u',
    '\u0174': 'W',  '\u0175': 'w',
    '\u0176': 'Y',  '\u0177': 'y', '\u0178': 'Y',
    '\u0179': 'Z',  '\u017b': 'Z', '\u017d': 'Z',
    '\u017a': 'z',  '\u017c': 'z', '\u017e': 'z',
    '\u0132': 'IJ', '\u0133': 'ij',
    '\u0152': 'Oe', '\u0153': 'oe',
    '\u0149': "'n", '\u017f': 's'
  };

  /** Used to map characters to HTML entities. */
  var htmlEscapes = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;'
  };

  /** Used to map HTML entities to characters. */
  var htmlUnescapes = {
    '&amp;': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&#39;': "'"
  };

  /** Used to escape characters for inclusion in compiled string literals. */
  var stringEscapes = {
    '\\': '\\',
    "'": "'",
    '\n': 'n',
    '\r': 'r',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  /** Built-in method references without a dependency on `root`. */
  var freeParseFloat = parseFloat,
      freeParseInt = parseInt;

  /** Detect free variable `global` from Node.js. */
  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

  /** Detect free variable `self`. */
  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

  /** Used as a reference to the global object. */
  var root = freeGlobal || freeSelf || Function('return this')();

  /** Detect free variable `exports`. */
  var freeExports =  true && exports && !exports.nodeType && exports;

  /** Detect free variable `module`. */
  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

  /** Detect the popular CommonJS extension `module.exports`. */
  var moduleExports = freeModule && freeModule.exports === freeExports;

  /** Detect free variable `process` from Node.js. */
  var freeProcess = moduleExports && freeGlobal.process;

  /** Used to access faster Node.js helpers. */
  var nodeUtil = (function() {
    try {
      // Use `util.types` for Node.js 10+.
      var types = freeModule && freeModule.require && freeModule.require('util').types;

      if (types) {
        return types;
      }

      // Legacy `process.binding('util')` for Node.js < 10.
      return freeProcess && freeProcess.binding && freeProcess.binding('util');
    } catch (e) {}
  }());

  /* Node.js helper references. */
  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,
      nodeIsDate = nodeUtil && nodeUtil.isDate,
      nodeIsMap = nodeUtil && nodeUtil.isMap,
      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,
      nodeIsSet = nodeUtil && nodeUtil.isSet,
      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

  /*--------------------------------------------------------------------------*/

  /**
   * A faster alternative to `Function#apply`, this function invokes `func`
   * with the `this` binding of `thisArg` and the arguments of `args`.
   *
   * @private
   * @param {Function} func The function to invoke.
   * @param {*} thisArg The `this` binding of `func`.
   * @param {Array} args The arguments to invoke `func` with.
   * @returns {*} Returns the result of `func`.
   */
  function apply(func, thisArg, args) {
    switch (args.length) {
      case 0: return func.call(thisArg);
      case 1: return func.call(thisArg, args[0]);
      case 2: return func.call(thisArg, args[0], args[1]);
      case 3: return func.call(thisArg, args[0], args[1], args[2]);
    }
    return func.apply(thisArg, args);
  }

  /**
   * A specialized version of `baseAggregator` for arrays.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} setter The function to set `accumulator` values.
   * @param {Function} iteratee The iteratee to transform keys.
   * @param {Object} accumulator The initial aggregated object.
   * @returns {Function} Returns `accumulator`.
   */
  function arrayAggregator(array, setter, iteratee, accumulator) {
    var index = -1,
        length = array == null ? 0 : array.length;

    while (++index < length) {
      var value = array[index];
      setter(accumulator, value, iteratee(value), array);
    }
    return accumulator;
  }

  /**
   * A specialized version of `_.forEach` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns `array`.
   */
  function arrayEach(array, iteratee) {
    var index = -1,
        length = array == null ? 0 : array.length;

    while (++index < length) {
      if (iteratee(array[index], index, array) === false) {
        break;
      }
    }
    return array;
  }

  /**
   * A specialized version of `_.forEachRight` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns `array`.
   */
  function arrayEachRight(array, iteratee) {
    var length = array == null ? 0 : array.length;

    while (length--) {
      if (iteratee(array[length], length, array) === false) {
        break;
      }
    }
    return array;
  }

  /**
   * A specialized version of `_.every` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {boolean} Returns `true` if all elements pass the predicate check,
   *  else `false`.
   */
  function arrayEvery(array, predicate) {
    var index = -1,
        length = array == null ? 0 : array.length;

    while (++index < length) {
      if (!predicate(array[index], index, array)) {
        return false;
      }
    }
    return true;
  }

  /**
   * A specialized version of `_.filter` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {Array} Returns the new filtered array.
   */
  function arrayFilter(array, predicate) {
    var index = -1,
        length = array == null ? 0 : array.length,
        resIndex = 0,
        result = [];

    while (++index < length) {
      var value = array[index];
      if (predicate(value, index, array)) {
        result[resIndex++] = value;
      }
    }
    return result;
  }

  /**
   * A specialized version of `_.includes` for arrays without support for
   * specifying an index to search from.
   *
   * @private
   * @param {Array} [array] The array to inspect.
   * @param {*} target The value to search for.
   * @returns {boolean} Returns `true` if `target` is found, else `false`.
   */
  function arrayIncludes(array, value) {
    var length = array == null ? 0 : array.length;
    return !!length && baseIndexOf(array, value, 0) > -1;
  }

  /**
   * This function is like `arrayIncludes` except that it accepts a comparator.
   *
   * @private
   * @param {Array} [array] The array to inspect.
   * @param {*} target The value to search for.
   * @param {Function} comparator The comparator invoked per element.
   * @returns {boolean} Returns `true` if `target` is found, else `false`.
   */
  function arrayIncludesWith(array, value, comparator) {
    var index = -1,
        length = array == null ? 0 : array.length;

    while (++index < length) {
      if (comparator(value, array[index])) {
        return true;
      }
    }
    return false;
  }

  /**
   * A specialized version of `_.map` for arrays without support for iteratee
   * shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns the new mapped array.
   */
  function arrayMap(array, iteratee) {
    var index = -1,
        length = array == null ? 0 : array.length,
        result = Array(length);

    while (++index < length) {
      result[index] = iteratee(array[index], index, array);
    }
    return result;
  }

  /**
   * Appends the elements of `values` to `array`.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {Array} values The values to append.
   * @returns {Array} Returns `array`.
   */
  function arrayPush(array, values) {
    var index = -1,
        length = values.length,
        offset = array.length;

    while (++index < length) {
      array[offset + index] = values[index];
    }
    return array;
  }

  /**
   * A specialized version of `_.reduce` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @param {*} [accumulator] The initial value.
   * @param {boolean} [initAccum] Specify using the first element of `array` as
   *  the initial value.
   * @returns {*} Returns the accumulated value.
   */
  function arrayReduce(array, iteratee, accumulator, initAccum) {
    var index = -1,
        length = array == null ? 0 : array.length;

    if (initAccum && length) {
      accumulator = array[++index];
    }
    while (++index < length) {
      accumulator = iteratee(accumulator, array[index], index, array);
    }
    return accumulator;
  }

  /**
   * A specialized version of `_.reduceRight` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @param {*} [accumulator] The initial value.
   * @param {boolean} [initAccum] Specify using the last element of `array` as
   *  the initial value.
   * @returns {*} Returns the accumulated value.
   */
  function arrayReduceRight(array, iteratee, accumulator, initAccum) {
    var length = array == null ? 0 : array.length;
    if (initAccum && length) {
      accumulator = array[--length];
    }
    while (length--) {
      accumulator = iteratee(accumulator, array[length], length, array);
    }
    return accumulator;
  }

  /**
   * A specialized version of `_.some` for arrays without support for iteratee
   * shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {boolean} Returns `true` if any element passes the predicate check,
   *  else `false`.
   */
  function arraySome(array, predicate) {
    var index = -1,
        length = array == null ? 0 : array.length;

    while (++index < length) {
      if (predicate(array[index], index, array)) {
        return true;
      }
    }
    return false;
  }

  /**
   * Gets the size of an ASCII `string`.
   *
   * @private
   * @param {string} string The string inspect.
   * @returns {number} Returns the string size.
   */
  var asciiSize = baseProperty('length');

  /**
   * Converts an ASCII `string` to an array.
   *
   * @private
   * @param {string} string The string to convert.
   * @returns {Array} Returns the converted array.
   */
  function asciiToArray(string) {
    return string.split('');
  }

  /**
   * Splits an ASCII `string` into an array of its words.
   *
   * @private
   * @param {string} The string to inspect.
   * @returns {Array} Returns the words of `string`.
   */
  function asciiWords(string) {
    return string.match(reAsciiWord) || [];
  }

  /**
   * The base implementation of methods like `_.findKey` and `_.findLastKey`,
   * without support for iteratee shorthands, which iterates over `collection`
   * using `eachFunc`.
   *
   * @private
   * @param {Array|Object} collection The collection to inspect.
   * @param {Function} predicate The function invoked per iteration.
   * @param {Function} eachFunc The function to iterate over `collection`.
   * @returns {*} Returns the found element or its key, else `undefined`.
   */
  function baseFindKey(collection, predicate, eachFunc) {
    var result;
    eachFunc(collection, function(value, key, collection) {
      if (predicate(value, key, collection)) {
        result = key;
        return false;
      }
    });
    return result;
  }

  /**
   * The base implementation of `_.findIndex` and `_.findLastIndex` without
   * support for iteratee shorthands.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {Function} predicate The function invoked per iteration.
   * @param {number} fromIndex The index to search from.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseFindIndex(array, predicate, fromIndex, fromRight) {
    var length = array.length,
        index = fromIndex + (fromRight ? 1 : -1);

    while ((fromRight ? index-- : ++index < length)) {
      if (predicate(array[index], index, array)) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseIndexOf(array, value, fromIndex) {
    return value === value
      ? strictIndexOf(array, value, fromIndex)
      : baseFindIndex(array, baseIsNaN, fromIndex);
  }

  /**
   * This function is like `baseIndexOf` except that it accepts a comparator.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @param {Function} comparator The comparator invoked per element.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function baseIndexOfWith(array, value, fromIndex, comparator) {
    var index = fromIndex - 1,
        length = array.length;

    while (++index < length) {
      if (comparator(array[index], value)) {
        return index;
      }
    }
    return -1;
  }

  /**
   * The base implementation of `_.isNaN` without support for number objects.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
   */
  function baseIsNaN(value) {
    return value !== value;
  }

  /**
   * The base implementation of `_.mean` and `_.meanBy` without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} array The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {number} Returns the mean.
   */
  function baseMean(array, iteratee) {
    var length = array == null ? 0 : array.length;
    return length ? (baseSum(array, iteratee) / length) : NAN;
  }

  /**
   * The base implementation of `_.property` without support for deep paths.
   *
   * @private
   * @param {string} key The key of the property to get.
   * @returns {Function} Returns the new accessor function.
   */
  function baseProperty(key) {
    return function(object) {
      return object == null ? undefined : object[key];
    };
  }

  /**
   * The base implementation of `_.propertyOf` without support for deep paths.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Function} Returns the new accessor function.
   */
  function basePropertyOf(object) {
    return function(key) {
      return object == null ? undefined : object[key];
    };
  }

  /**
   * The base implementation of `_.reduce` and `_.reduceRight`, without support
   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.
   *
   * @private
   * @param {Array|Object} collection The collection to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @param {*} accumulator The initial value.
   * @param {boolean} initAccum Specify using the first or last element of
   *  `collection` as the initial value.
   * @param {Function} eachFunc The function to iterate over `collection`.
   * @returns {*} Returns the accumulated value.
   */
  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {
    eachFunc(collection, function(value, index, collection) {
      accumulator = initAccum
        ? (initAccum = false, value)
        : iteratee(accumulator, value, index, collection);
    });
    return accumulator;
  }

  /**
   * The base implementation of `_.sortBy` which uses `comparer` to define the
   * sort order of `array` and replaces criteria objects with their corresponding
   * values.
   *
   * @private
   * @param {Array} array The array to sort.
   * @param {Function} comparer The function to define sort order.
   * @returns {Array} Returns `array`.
   */
  function baseSortBy(array, comparer) {
    var length = array.length;

    array.sort(comparer);
    while (length--) {
      array[length] = array[length].value;
    }
    return array;
  }

  /**
   * The base implementation of `_.sum` and `_.sumBy` without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} array The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {number} Returns the sum.
   */
  function baseSum(array, iteratee) {
    var result,
        index = -1,
        length = array.length;

    while (++index < length) {
      var current = iteratee(array[index]);
      if (current !== undefined) {
        result = result === undefined ? current : (result + current);
      }
    }
    return result;
  }

  /**
   * The base implementation of `_.times` without support for iteratee shorthands
   * or max array length checks.
   *
   * @private
   * @param {number} n The number of times to invoke `iteratee`.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns the array of results.
   */
  function baseTimes(n, iteratee) {
    var index = -1,
        result = Array(n);

    while (++index < n) {
      result[index] = iteratee(index);
    }
    return result;
  }

  /**
   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array
   * of key-value pairs for `object` corresponding to the property names of `props`.
   *
   * @private
   * @param {Object} object The object to query.
   * @param {Array} props The property names to get values for.
   * @returns {Object} Returns the key-value pairs.
   */
  function baseToPairs(object, props) {
    return arrayMap(props, function(key) {
      return [key, object[key]];
    });
  }

  /**
   * The base implementation of `_.unary` without support for storing metadata.
   *
   * @private
   * @param {Function} func The function to cap arguments for.
   * @returns {Function} Returns the new capped function.
   */
  function baseUnary(func) {
    return function(value) {
      return func(value);
    };
  }

  /**
   * The base implementation of `_.values` and `_.valuesIn` which creates an
   * array of `object` property values corresponding to the property names
   * of `props`.
   *
   * @private
   * @param {Object} object The object to query.
   * @param {Array} props The property names to get values for.
   * @returns {Object} Returns the array of property values.
   */
  function baseValues(object, props) {
    return arrayMap(props, function(key) {
      return object[key];
    });
  }

  /**
   * Checks if a `cache` value for `key` exists.
   *
   * @private
   * @param {Object} cache The cache to query.
   * @param {string} key The key of the entry to check.
   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
   */
  function cacheHas(cache, key) {
    return cache.has(key);
  }

  /**
   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol
   * that is not found in the character symbols.
   *
   * @private
   * @param {Array} strSymbols The string symbols to inspect.
   * @param {Array} chrSymbols The character symbols to find.
   * @returns {number} Returns the index of the first unmatched string symbol.
   */
  function charsStartIndex(strSymbols, chrSymbols) {
    var index = -1,
        length = strSymbols.length;

    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}
    return index;
  }

  /**
   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol
   * that is not found in the character symbols.
   *
   * @private
   * @param {Array} strSymbols The string symbols to inspect.
   * @param {Array} chrSymbols The character symbols to find.
   * @returns {number} Returns the index of the last unmatched string symbol.
   */
  function charsEndIndex(strSymbols, chrSymbols) {
    var index = strSymbols.length;

    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}
    return index;
  }

  /**
   * Gets the number of `placeholder` occurrences in `array`.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} placeholder The placeholder to search for.
   * @returns {number} Returns the placeholder count.
   */
  function countHolders(array, placeholder) {
    var length = array.length,
        result = 0;

    while (length--) {
      if (array[length] === placeholder) {
        ++result;
      }
    }
    return result;
  }

  /**
   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A
   * letters to basic Latin letters.
   *
   * @private
   * @param {string} letter The matched letter to deburr.
   * @returns {string} Returns the deburred letter.
   */
  var deburrLetter = basePropertyOf(deburredLetters);

  /**
   * Used by `_.escape` to convert characters to HTML entities.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  var escapeHtmlChar = basePropertyOf(htmlEscapes);

  /**
   * Used by `_.template` to escape characters for inclusion in compiled string literals.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */
  function escapeStringChar(chr) {
    return '\\' + stringEscapes[chr];
  }

  /**
   * Gets the value at `key` of `object`.
   *
   * @private
   * @param {Object} [object] The object to query.
   * @param {string} key The key of the property to get.
   * @returns {*} Returns the property value.
   */
  function getValue(object, key) {
    return object == null ? undefined : object[key];
  }

  /**
   * Checks if `string` contains Unicode symbols.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {boolean} Returns `true` if a symbol is found, else `false`.
   */
  function hasUnicode(string) {
    return reHasUnicode.test(string);
  }

  /**
   * Checks if `string` contains a word composed of Unicode symbols.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {boolean} Returns `true` if a word is found, else `false`.
   */
  function hasUnicodeWord(string) {
    return reHasUnicodeWord.test(string);
  }

  /**
   * Converts `iterator` to an array.
   *
   * @private
   * @param {Object} iterator The iterator to convert.
   * @returns {Array} Returns the converted array.
   */
  function iteratorToArray(iterator) {
    var data,
        result = [];

    while (!(data = iterator.next()).done) {
      result.push(data.value);
    }
    return result;
  }

  /**
   * Converts `map` to its key-value pairs.
   *
   * @private
   * @param {Object} map The map to convert.
   * @returns {Array} Returns the key-value pairs.
   */
  function mapToArray(map) {
    var index = -1,
        result = Array(map.size);

    map.forEach(function(value, key) {
      result[++index] = [key, value];
    });
    return result;
  }

  /**
   * Creates a unary function that invokes `func` with its argument transformed.
   *
   * @private
   * @param {Function} func The function to wrap.
   * @param {Function} transform The argument transform.
   * @returns {Function} Returns the new function.
   */
  function overArg(func, transform) {
    return function(arg) {
      return func(transform(arg));
    };
  }

  /**
   * Replaces all `placeholder` elements in `array` with an internal placeholder
   * and returns an array of their indexes.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {*} placeholder The placeholder to replace.
   * @returns {Array} Returns the new array of placeholder indexes.
   */
  function replaceHolders(array, placeholder) {
    var index = -1,
        length = array.length,
        resIndex = 0,
        result = [];

    while (++index < length) {
      var value = array[index];
      if (value === placeholder || value === PLACEHOLDER) {
        array[index] = PLACEHOLDER;
        result[resIndex++] = index;
      }
    }
    return result;
  }

  /**
   * Converts `set` to an array of its values.
   *
   * @private
   * @param {Object} set The set to convert.
   * @returns {Array} Returns the values.
   */
  function setToArray(set) {
    var index = -1,
        result = Array(set.size);

    set.forEach(function(value) {
      result[++index] = value;
    });
    return result;
  }

  /**
   * Converts `set` to its value-value pairs.
   *
   * @private
   * @param {Object} set The set to convert.
   * @returns {Array} Returns the value-value pairs.
   */
  function setToPairs(set) {
    var index = -1,
        result = Array(set.size);

    set.forEach(function(value) {
      result[++index] = [value, value];
    });
    return result;
  }

  /**
   * A specialized version of `_.indexOf` which performs strict equality
   * comparisons of values, i.e. `===`.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function strictIndexOf(array, value, fromIndex) {
    var index = fromIndex - 1,
        length = array.length;

    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }

  /**
   * A specialized version of `_.lastIndexOf` which performs strict equality
   * comparisons of values, i.e. `===`.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */
  function strictLastIndexOf(array, value, fromIndex) {
    var index = fromIndex + 1;
    while (index--) {
      if (array[index] === value) {
        return index;
      }
    }
    return index;
  }

  /**
   * Gets the number of symbols in `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the string size.
   */
  function stringSize(string) {
    return hasUnicode(string)
      ? unicodeSize(string)
      : asciiSize(string);
  }

  /**
   * Converts `string` to an array.
   *
   * @private
   * @param {string} string The string to convert.
   * @returns {Array} Returns the converted array.
   */
  function stringToArray(string) {
    return hasUnicode(string)
      ? unicodeToArray(string)
      : asciiToArray(string);
  }

  /**
   * Used by `_.unescape` to convert HTML entities to characters.
   *
   * @private
   * @param {string} chr The matched character to unescape.
   * @returns {string} Returns the unescaped character.
   */
  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);

  /**
   * Gets the size of a Unicode `string`.
   *
   * @private
   * @param {string} string The string inspect.
   * @returns {number} Returns the string size.
   */
  function unicodeSize(string) {
    var result = reUnicode.lastIndex = 0;
    while (reUnicode.test(string)) {
      ++result;
    }
    return result;
  }

  /**
   * Converts a Unicode `string` to an array.
   *
   * @private
   * @param {string} string The string to convert.
   * @returns {Array} Returns the converted array.
   */
  function unicodeToArray(string) {
    return string.match(reUnicode) || [];
  }

  /**
   * Splits a Unicode `string` into an array of its words.
   *
   * @private
   * @param {string} The string to inspect.
   * @returns {Array} Returns the words of `string`.
   */
  function unicodeWords(string) {
    return string.match(reUnicodeWord) || [];
  }

  /*--------------------------------------------------------------------------*/

  /**
   * Create a new pristine `lodash` function using the `context` object.
   *
   * @static
   * @memberOf _
   * @since 1.1.0
   * @category Util
   * @param {Object} [context=root] The context object.
   * @returns {Function} Returns a new `lodash` function.
   * @example
   *
   * _.mixin({ 'foo': _.constant('foo') });
   *
   * var lodash = _.runInContext();
   * lodash.mixin({ 'bar': lodash.constant('bar') });
   *
   * _.isFunction(_.foo);
   * // => true
   * _.isFunction(_.bar);
   * // => false
   *
   * lodash.isFunction(lodash.foo);
   * // => false
   * lodash.isFunction(lodash.bar);
   * // => true
   *
   * // Create a suped-up `defer` in Node.js.
   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;
   */
  var runInContext = (function runInContext(context) {
    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));

    /** Built-in constructor references. */
    var Array = context.Array,
        Date = context.Date,
        Error = context.Error,
        Function = context.Function,
        Math = context.Math,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

    /** Used for built-in method references. */
    var arrayProto = Array.prototype,
        funcProto = Function.prototype,
        objectProto = Object.prototype;

    /** Used to detect overreaching core-js shims. */
    var coreJsData = context['__core-js_shared__'];

    /** Used to resolve the decompiled source of functions. */
    var funcToString = funcProto.toString;

    /** Used to check objects for own properties. */
    var hasOwnProperty = objectProto.hasOwnProperty;

    /** Used to generate unique IDs. */
    var idCounter = 0;

    /** Used to detect methods masquerading as native. */
    var maskSrcKey = (function() {
      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
      return uid ? ('Symbol(src)_1.' + uid) : '';
    }());

    /**
     * Used to resolve the
     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
     * of values.
     */
    var nativeObjectToString = objectProto.toString;

    /** Used to infer the `Object` constructor. */
    var objectCtorString = funcToString.call(Object);

    /** Used to restore the original `_` reference in `_.noConflict`. */
    var oldDash = root._;

    /** Used to detect if a method is native. */
    var reIsNative = RegExp('^' +
      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
      .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
    );

    /** Built-in value references. */
    var Buffer = moduleExports ? context.Buffer : undefined,
        Symbol = context.Symbol,
        Uint8Array = context.Uint8Array,
        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,
        getPrototype = overArg(Object.getPrototypeOf, Object),
        objectCreate = Object.create,
        propertyIsEnumerable = objectProto.propertyIsEnumerable,
        splice = arrayProto.splice,
        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,
        symIterator = Symbol ? Symbol.iterator : undefined,
        symToStringTag = Symbol ? Symbol.toStringTag : undefined;

    var defineProperty = (function() {
      try {
        var func = getNative(Object, 'defineProperty');
        func({}, '', {});
        return func;
      } catch (e) {}
    }());

    /** Mocked built-ins. */
    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,
        ctxNow = Date && Date.now !== root.Date.now && Date.now,
        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;

    /* Built-in method references for those with the same name as other `lodash` methods. */
    var nativeCeil = Math.ceil,
        nativeFloor = Math.floor,
        nativeGetSymbols = Object.getOwnPropertySymbols,
        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,
        nativeIsFinite = context.isFinite,
        nativeJoin = arrayProto.join,
        nativeKeys = overArg(Object.keys, Object),
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeNow = Date.now,
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random,
        nativeReverse = arrayProto.reverse;

    /* Built-in method references that are verified to be native. */
    var DataView = getNative(context, 'DataView'),
        Map = getNative(context, 'Map'),
        Promise = getNative(context, 'Promise'),
        Set = getNative(context, 'Set'),
        WeakMap = getNative(context, 'WeakMap'),
        nativeCreate = getNative(Object, 'create');

    /** Used to store function metadata. */
    var metaMap = WeakMap && new WeakMap;

    /** Used to lookup unminified function names. */
    var realNames = {};

    /** Used to detect maps, sets, and weakmaps. */
    var dataViewCtorString = toSource(DataView),
        mapCtorString = toSource(Map),
        promiseCtorString = toSource(Promise),
        setCtorString = toSource(Set),
        weakMapCtorString = toSource(WeakMap);

    /** Used to convert symbols to primitives and strings. */
    var symbolProto = Symbol ? Symbol.prototype : undefined,
        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,
        symbolToString = symbolProto ? symbolProto.toString : undefined;

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` object which wraps `value` to enable implicit method
     * chain sequences. Methods that operate on and return arrays, collections,
     * and functions can be chained together. Methods that retrieve a single value
     * or may return a primitive value will automatically end the chain sequence
     * and return the unwrapped value. Otherwise, the value must be unwrapped
     * with `_#value`.
     *
     * Explicit chain sequences, which must be unwrapped with `_#value`, may be
     * enabled using `_.chain`.
     *
     * The execution of chained methods is lazy, that is, it's deferred until
     * `_#value` is implicitly or explicitly called.
     *
     * Lazy evaluation allows several methods to support shortcut fusion.
     * Shortcut fusion is an optimization to merge iteratee calls; this avoids
     * the creation of intermediate arrays and can greatly reduce the number of
     * iteratee executions. Sections of a chain sequence qualify for shortcut
     * fusion if the section is applied to an array and iteratees accept only
     * one argument. The heuristic for whether a section qualifies for shortcut
     * fusion is subject to change.
     *
     * Chaining is supported in custom builds as long as the `_#value` method is
     * directly or indirectly included in the build.
     *
     * In addition to lodash methods, wrappers have `Array` and `String` methods.
     *
     * The wrapper `Array` methods are:
     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`
     *
     * The wrapper `String` methods are:
     * `replace` and `split`
     *
     * The wrapper methods that support shortcut fusion are:
     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,
     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,
     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`
     *
     * The chainable wrapper methods are:
     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,
     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,
     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,
     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,
     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,
     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,
     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,
     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,
     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,
     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,
     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,
     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,
     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,
     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,
     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,
     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,
     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,
     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,
     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,
     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,
     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,
     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,
     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,
     * `zipObject`, `zipObjectDeep`, and `zipWith`
     *
     * The wrapper methods that are **not** chainable by default are:
     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,
     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,
     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,
     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,
     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,
     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,
     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,
     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,
     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,
     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,
     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,
     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,
     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,
     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,
     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,
     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,
     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,
     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,
     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,
     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,
     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,
     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,
     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,
     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,
     * `upperFirst`, `value`, and `words`
     *
     * @name _
     * @constructor
     * @category Seq
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // Returns an unwrapped value.
     * wrapped.reduce(_.add);
     * // => 6
     *
     * // Returns a wrapped value.
     * var squares = wrapped.map(square);
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */
    function lodash(value) {
      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {
        if (value instanceof LodashWrapper) {
          return value;
        }
        if (hasOwnProperty.call(value, '__wrapped__')) {
          return wrapperClone(value);
        }
      }
      return new LodashWrapper(value);
    }

    /**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} proto The object to inherit from.
     * @returns {Object} Returns the new object.
     */
    var baseCreate = (function() {
      function object() {}
      return function(proto) {
        if (!isObject(proto)) {
          return {};
        }
        if (objectCreate) {
          return objectCreate(proto);
        }
        object.prototype = proto;
        var result = new object;
        object.prototype = undefined;
        return result;
      };
    }());

    /**
     * The function whose prototype chain sequence wrappers inherit from.
     *
     * @private
     */
    function baseLodash() {
      // No operation performed.
    }

    /**
     * The base constructor for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap.
     * @param {boolean} [chainAll] Enable explicit method chain sequences.
     */
    function LodashWrapper(value, chainAll) {
      this.__wrapped__ = value;
      this.__actions__ = [];
      this.__chain__ = !!chainAll;
      this.__index__ = 0;
      this.__values__ = undefined;
    }

    /**
     * By default, the template delimiters used by lodash are like those in
     * embedded Ruby (ERB) as well as ES2015 template strings. Change the
     * following template settings to use alternative delimiters.
     *
     * @static
     * @memberOf _
     * @type {Object}
     */
    lodash.templateSettings = {

      /**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type {RegExp}
       */
      'escape': reEscape,

      /**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type {RegExp}
       */
      'evaluate': reEvaluate,

      /**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type {RegExp}
       */
      'interpolate': reInterpolate,

      /**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type {string}
       */
      'variable': '',

      /**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type {Object}
       */
      'imports': {

        /**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type {Function}
         */
        '_': lodash
      }
    };

    // Ensure wrappers are instances of `baseLodash`.
    lodash.prototype = baseLodash.prototype;
    lodash.prototype.constructor = lodash;

    LodashWrapper.prototype = baseCreate(baseLodash.prototype);
    LodashWrapper.prototype.constructor = LodashWrapper;

    /*------------------------------------------------------------------------*/

    /**
     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
     *
     * @private
     * @constructor
     * @param {*} value The value to wrap.
     */
    function LazyWrapper(value) {
      this.__wrapped__ = value;
      this.__actions__ = [];
      this.__dir__ = 1;
      this.__filtered__ = false;
      this.__iteratees__ = [];
      this.__takeCount__ = MAX_ARRAY_LENGTH;
      this.__views__ = [];
    }

    /**
     * Creates a clone of the lazy wrapper object.
     *
     * @private
     * @name clone
     * @memberOf LazyWrapper
     * @returns {Object} Returns the cloned `LazyWrapper` object.
     */
    function lazyClone() {
      var result = new LazyWrapper(this.__wrapped__);
      result.__actions__ = copyArray(this.__actions__);
      result.__dir__ = this.__dir__;
      result.__filtered__ = this.__filtered__;
      result.__iteratees__ = copyArray(this.__iteratees__);
      result.__takeCount__ = this.__takeCount__;
      result.__views__ = copyArray(this.__views__);
      return result;
    }

    /**
     * Reverses the direction of lazy iteration.
     *
     * @private
     * @name reverse
     * @memberOf LazyWrapper
     * @returns {Object} Returns the new reversed `LazyWrapper` object.
     */
    function lazyReverse() {
      if (this.__filtered__) {
        var result = new LazyWrapper(this);
        result.__dir__ = -1;
        result.__filtered__ = true;
      } else {
        result = this.clone();
        result.__dir__ *= -1;
      }
      return result;
    }

    /**
     * Extracts the unwrapped value from its lazy wrapper.
     *
     * @private
     * @name value
     * @memberOf LazyWrapper
     * @returns {*} Returns the unwrapped value.
     */
    function lazyValue() {
      var array = this.__wrapped__.value(),
          dir = this.__dir__,
          isArr = isArray(array),
          isRight = dir < 0,
          arrLength = isArr ? array.length : 0,
          view = getView(0, arrLength, this.__views__),
          start = view.start,
          end = view.end,
          length = end - start,
          index = isRight ? end : (start - 1),
          iteratees = this.__iteratees__,
          iterLength = iteratees.length,
          resIndex = 0,
          takeCount = nativeMin(length, this.__takeCount__);

      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {
        return baseWrapperValue(array, this.__actions__);
      }
      var result = [];

      outer:
      while (length-- && resIndex < takeCount) {
        index += dir;

        var iterIndex = -1,
            value = array[index];

        while (++iterIndex < iterLength) {
          var data = iteratees[iterIndex],
              iteratee = data.iteratee,
              type = data.type,
              computed = iteratee(value);

          if (type == LAZY_MAP_FLAG) {
            value = computed;
          } else if (!computed) {
            if (type == LAZY_FILTER_FLAG) {
              continue outer;
            } else {
              break outer;
            }
          }
        }
        result[resIndex++] = value;
      }
      return result;
    }

    // Ensure `LazyWrapper` is an instance of `baseLodash`.
    LazyWrapper.prototype = baseCreate(baseLodash.prototype);
    LazyWrapper.prototype.constructor = LazyWrapper;

    /*------------------------------------------------------------------------*/

    /**
     * Creates a hash object.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */
    function Hash(entries) {
      var index = -1,
          length = entries == null ? 0 : entries.length;

      this.clear();
      while (++index < length) {
        var entry = entries[index];
        this.set(entry[0], entry[1]);
      }
    }

    /**
     * Removes all key-value entries from the hash.
     *
     * @private
     * @name clear
     * @memberOf Hash
     */
    function hashClear() {
      this.__data__ = nativeCreate ? nativeCreate(null) : {};
      this.size = 0;
    }

    /**
     * Removes `key` and its value from the hash.
     *
     * @private
     * @name delete
     * @memberOf Hash
     * @param {Object} hash The hash to modify.
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
    function hashDelete(key) {
      var result = this.has(key) && delete this.__data__[key];
      this.size -= result ? 1 : 0;
      return result;
    }

    /**
     * Gets the hash value for `key`.
     *
     * @private
     * @name get
     * @memberOf Hash
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
    function hashGet(key) {
      var data = this.__data__;
      if (nativeCreate) {
        var result = data[key];
        return result === HASH_UNDEFINED ? undefined : result;
      }
      return hasOwnProperty.call(data, key) ? data[key] : undefined;
    }

    /**
     * Checks if a hash value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf Hash
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function hashHas(key) {
      var data = this.__data__;
      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);
    }

    /**
     * Sets the hash `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf Hash
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the hash instance.
     */
    function hashSet(key, value) {
      var data = this.__data__;
      this.size += this.has(key) ? 0 : 1;
      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;
      return this;
    }

    // Add methods to `Hash`.
    Hash.prototype.clear = hashClear;
    Hash.prototype['delete'] = hashDelete;
    Hash.prototype.get = hashGet;
    Hash.prototype.has = hashHas;
    Hash.prototype.set = hashSet;

    /*------------------------------------------------------------------------*/

    /**
     * Creates an list cache object.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */
    function ListCache(entries) {
      var index = -1,
          length = entries == null ? 0 : entries.length;

      this.clear();
      while (++index < length) {
        var entry = entries[index];
        this.set(entry[0], entry[1]);
      }
    }

    /**
     * Removes all key-value entries from the list cache.
     *
     * @private
     * @name clear
     * @memberOf ListCache
     */
    function listCacheClear() {
      this.__data__ = [];
      this.size = 0;
    }

    /**
     * Removes `key` and its value from the list cache.
     *
     * @private
     * @name delete
     * @memberOf ListCache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
    function listCacheDelete(key) {
      var data = this.__data__,
          index = assocIndexOf(data, key);

      if (index < 0) {
        return false;
      }
      var lastIndex = data.length - 1;
      if (index == lastIndex) {
        data.pop();
      } else {
        splice.call(data, index, 1);
      }
      --this.size;
      return true;
    }

    /**
     * Gets the list cache value for `key`.
     *
     * @private
     * @name get
     * @memberOf ListCache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
    function listCacheGet(key) {
      var data = this.__data__,
          index = assocIndexOf(data, key);

      return index < 0 ? undefined : data[index][1];
    }

    /**
     * Checks if a list cache value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf ListCache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function listCacheHas(key) {
      return assocIndexOf(this.__data__, key) > -1;
    }

    /**
     * Sets the list cache `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf ListCache
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the list cache instance.
     */
    function listCacheSet(key, value) {
      var data = this.__data__,
          index = assocIndexOf(data, key);

      if (index < 0) {
        ++this.size;
        data.push([key, value]);
      } else {
        data[index][1] = value;
      }
      return this;
    }

    // Add methods to `ListCache`.
    ListCache.prototype.clear = listCacheClear;
    ListCache.prototype['delete'] = listCacheDelete;
    ListCache.prototype.get = listCacheGet;
    ListCache.prototype.has = listCacheHas;
    ListCache.prototype.set = listCacheSet;

    /*------------------------------------------------------------------------*/

    /**
     * Creates a map cache object to store key-value pairs.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */
    function MapCache(entries) {
      var index = -1,
          length = entries == null ? 0 : entries.length;

      this.clear();
      while (++index < length) {
        var entry = entries[index];
        this.set(entry[0], entry[1]);
      }
    }

    /**
     * Removes all key-value entries from the map.
     *
     * @private
     * @name clear
     * @memberOf MapCache
     */
    function mapCacheClear() {
      this.size = 0;
      this.__data__ = {
        'hash': new Hash,
        'map': new (Map || ListCache),
        'string': new Hash
      };
    }

    /**
     * Removes `key` and its value from the map.
     *
     * @private
     * @name delete
     * @memberOf MapCache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
    function mapCacheDelete(key) {
      var result = getMapData(this, key)['delete'](key);
      this.size -= result ? 1 : 0;
      return result;
    }

    /**
     * Gets the map value for `key`.
     *
     * @private
     * @name get
     * @memberOf MapCache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
    function mapCacheGet(key) {
      return getMapData(this, key).get(key);
    }

    /**
     * Checks if a map value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf MapCache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function mapCacheHas(key) {
      return getMapData(this, key).has(key);
    }

    /**
     * Sets the map `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf MapCache
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the map cache instance.
     */
    function mapCacheSet(key, value) {
      var data = getMapData(this, key),
          size = data.size;

      data.set(key, value);
      this.size += data.size == size ? 0 : 1;
      return this;
    }

    // Add methods to `MapCache`.
    MapCache.prototype.clear = mapCacheClear;
    MapCache.prototype['delete'] = mapCacheDelete;
    MapCache.prototype.get = mapCacheGet;
    MapCache.prototype.has = mapCacheHas;
    MapCache.prototype.set = mapCacheSet;

    /*------------------------------------------------------------------------*/

    /**
     *
     * Creates an array cache object to store unique values.
     *
     * @private
     * @constructor
     * @param {Array} [values] The values to cache.
     */
    function SetCache(values) {
      var index = -1,
          length = values == null ? 0 : values.length;

      this.__data__ = new MapCache;
      while (++index < length) {
        this.add(values[index]);
      }
    }

    /**
     * Adds `value` to the array cache.
     *
     * @private
     * @name add
     * @memberOf SetCache
     * @alias push
     * @param {*} value The value to cache.
     * @returns {Object} Returns the cache instance.
     */
    function setCacheAdd(value) {
      this.__data__.set(value, HASH_UNDEFINED);
      return this;
    }

    /**
     * Checks if `value` is in the array cache.
     *
     * @private
     * @name has
     * @memberOf SetCache
     * @param {*} value The value to search for.
     * @returns {number} Returns `true` if `value` is found, else `false`.
     */
    function setCacheHas(value) {
      return this.__data__.has(value);
    }

    // Add methods to `SetCache`.
    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
    SetCache.prototype.has = setCacheHas;

    /*------------------------------------------------------------------------*/

    /**
     * Creates a stack cache object to store key-value pairs.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */
    function Stack(entries) {
      var data = this.__data__ = new ListCache(entries);
      this.size = data.size;
    }

    /**
     * Removes all key-value entries from the stack.
     *
     * @private
     * @name clear
     * @memberOf Stack
     */
    function stackClear() {
      this.__data__ = new ListCache;
      this.size = 0;
    }

    /**
     * Removes `key` and its value from the stack.
     *
     * @private
     * @name delete
     * @memberOf Stack
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */
    function stackDelete(key) {
      var data = this.__data__,
          result = data['delete'](key);

      this.size = data.size;
      return result;
    }

    /**
     * Gets the stack value for `key`.
     *
     * @private
     * @name get
     * @memberOf Stack
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */
    function stackGet(key) {
      return this.__data__.get(key);
    }

    /**
     * Checks if a stack value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf Stack
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */
    function stackHas(key) {
      return this.__data__.has(key);
    }

    /**
     * Sets the stack `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf Stack
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the stack cache instance.
     */
    function stackSet(key, value) {
      var data = this.__data__;
      if (data instanceof ListCache) {
        var pairs = data.__data__;
        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
          pairs.push([key, value]);
          this.size = ++data.size;
          return this;
        }
        data = this.__data__ = new MapCache(pairs);
      }
      data.set(key, value);
      this.size = data.size;
      return this;
    }

    // Add methods to `Stack`.
    Stack.prototype.clear = stackClear;
    Stack.prototype['delete'] = stackDelete;
    Stack.prototype.get = stackGet;
    Stack.prototype.has = stackHas;
    Stack.prototype.set = stackSet;

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of the enumerable property names of the array-like `value`.
     *
     * @private
     * @param {*} value The value to query.
     * @param {boolean} inherited Specify returning inherited property names.
     * @returns {Array} Returns the array of property names.
     */
    function arrayLikeKeys(value, inherited) {
      var isArr = isArray(value),
          isArg = !isArr && isArguments(value),
          isBuff = !isArr && !isArg && isBuffer(value),
          isType = !isArr && !isArg && !isBuff && isTypedArray(value),
          skipIndexes = isArr || isArg || isBuff || isType,
          result = skipIndexes ? baseTimes(value.length, String) : [],
          length = result.length;

      for (var key in value) {
        if ((inherited || hasOwnProperty.call(value, key)) &&
            !(skipIndexes && (
               // Safari 9 has enumerable `arguments.length` in strict mode.
               key == 'length' ||
               // Node.js 0.10 has enumerable non-index properties on buffers.
               (isBuff && (key == 'offset' || key == 'parent')) ||
               // PhantomJS 2 has enumerable non-index properties on typed arrays.
               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
               // Skip index properties.
               isIndex(key, length)
            ))) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * A specialized version of `_.sample` for arrays.
     *
     * @private
     * @param {Array} array The array to sample.
     * @returns {*} Returns the random element.
     */
    function arraySample(array) {
      var length = array.length;
      return length ? array[baseRandom(0, length - 1)] : undefined;
    }

    /**
     * A specialized version of `_.sampleSize` for arrays.
     *
     * @private
     * @param {Array} array The array to sample.
     * @param {number} n The number of elements to sample.
     * @returns {Array} Returns the random elements.
     */
    function arraySampleSize(array, n) {
      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));
    }

    /**
     * A specialized version of `_.shuffle` for arrays.
     *
     * @private
     * @param {Array} array The array to shuffle.
     * @returns {Array} Returns the new shuffled array.
     */
    function arrayShuffle(array) {
      return shuffleSelf(copyArray(array));
    }

    /**
     * This function is like `assignValue` except that it doesn't assign
     * `undefined` values.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */
    function assignMergeValue(object, key, value) {
      if ((value !== undefined && !eq(object[key], value)) ||
          (value === undefined && !(key in object))) {
        baseAssignValue(object, key, value);
      }
    }

    /**
     * Assigns `value` to `key` of `object` if the existing value is not equivalent
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */
    function assignValue(object, key, value) {
      var objValue = object[key];
      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
          (value === undefined && !(key in object))) {
        baseAssignValue(object, key, value);
      }
    }

    /**
     * Gets the index at which the `key` is found in `array` of key-value pairs.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {*} key The key to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     */
    function assocIndexOf(array, key) {
      var length = array.length;
      while (length--) {
        if (eq(array[length][0], key)) {
          return length;
        }
      }
      return -1;
    }

    /**
     * Aggregates elements of `collection` on `accumulator` with keys transformed
     * by `iteratee` and values set by `setter`.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} setter The function to set `accumulator` values.
     * @param {Function} iteratee The iteratee to transform keys.
     * @param {Object} accumulator The initial aggregated object.
     * @returns {Function} Returns `accumulator`.
     */
    function baseAggregator(collection, setter, iteratee, accumulator) {
      baseEach(collection, function(value, key, collection) {
        setter(accumulator, value, iteratee(value), collection);
      });
      return accumulator;
    }

    /**
     * The base implementation of `_.assign` without support for multiple sources
     * or `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
    function baseAssign(object, source) {
      return object && copyObject(source, keys(source), object);
    }

    /**
     * The base implementation of `_.assignIn` without support for multiple sources
     * or `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */
    function baseAssignIn(object, source) {
      return object && copyObject(source, keysIn(source), object);
    }

    /**
     * The base implementation of `assignValue` and `assignMergeValue` without
     * value checks.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */
    function baseAssignValue(object, key, value) {
      if (key == '__proto__' && defineProperty) {
        defineProperty(object, key, {
          'configurable': true,
          'enumerable': true,
          'value': value,
          'writable': true
        });
      } else {
        object[key] = value;
      }
    }

    /**
     * The base implementation of `_.at` without support for individual paths.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {string[]} paths The property paths to pick.
     * @returns {Array} Returns the picked elements.
     */
    function baseAt(object, paths) {
      var index = -1,
          length = paths.length,
          result = Array(length),
          skip = object == null;

      while (++index < length) {
        result[index] = skip ? undefined : get(object, paths[index]);
      }
      return result;
    }

    /**
     * The base implementation of `_.clamp` which doesn't coerce arguments.
     *
     * @private
     * @param {number} number The number to clamp.
     * @param {number} [lower] The lower bound.
     * @param {number} upper The upper bound.
     * @returns {number} Returns the clamped number.
     */
    function baseClamp(number, lower, upper) {
      if (number === number) {
        if (upper !== undefined) {
          number = number <= upper ? number : upper;
        }
        if (lower !== undefined) {
          number = number >= lower ? number : lower;
        }
      }
      return number;
    }

    /**
     * The base implementation of `_.clone` and `_.cloneDeep` which tracks
     * traversed objects.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} bitmask The bitmask flags.
     *  1 - Deep clone
     *  2 - Flatten inherited properties
     *  4 - Clone symbols
     * @param {Function} [customizer] The function to customize cloning.
     * @param {string} [key] The key of `value`.
     * @param {Object} [object] The parent object of `value`.
     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.
     * @returns {*} Returns the cloned value.
     */
    function baseClone(value, bitmask, customizer, key, object, stack) {
      var result,
          isDeep = bitmask & CLONE_DEEP_FLAG,
          isFlat = bitmask & CLONE_FLAT_FLAG,
          isFull = bitmask & CLONE_SYMBOLS_FLAG;

      if (customizer) {
        result = object ? customizer(value, key, object, stack) : customizer(value);
      }
      if (result !== undefined) {
        return result;
      }
      if (!isObject(value)) {
        return value;
      }
      var isArr = isArray(value);
      if (isArr) {
        result = initCloneArray(value);
        if (!isDeep) {
          return copyArray(value, result);
        }
      } else {
        var tag = getTag(value),
            isFunc = tag == funcTag || tag == genTag;

        if (isBuffer(value)) {
          return cloneBuffer(value, isDeep);
        }
        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {
          result = (isFlat || isFunc) ? {} : initCloneObject(value);
          if (!isDeep) {
            return isFlat
              ? copySymbolsIn(value, baseAssignIn(result, value))
              : copySymbols(value, baseAssign(result, value));
          }
        } else {
          if (!cloneableTags[tag]) {
            return object ? value : {};
          }
          result = initCloneByTag(value, tag, isDeep);
        }
      }
      // Check for circular references and return its corresponding clone.
      stack || (stack = new Stack);
      var stacked = stack.get(value);
      if (stacked) {
        return stacked;
      }
      stack.set(value, result);

      if (isSet(value)) {
        value.forEach(function(subValue) {
          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
        });
      } else if (isMap(value)) {
        value.forEach(function(subValue, key) {
          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
        });
      }

      var keysFunc = isFull
        ? (isFlat ? getAllKeysIn : getAllKeys)
        : (isFlat ? keysIn : keys);

      var props = isArr ? undefined : keysFunc(value);
      arrayEach(props || value, function(subValue, key) {
        if (props) {
          key = subValue;
          subValue = value[key];
        }
        // Recursively populate clone (susceptible to call stack limits).
        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
      });
      return result;
    }

    /**
     * The base implementation of `_.conforms` which doesn't clone `source`.
     *
     * @private
     * @param {Object} source The object of property predicates to conform to.
     * @returns {Function} Returns the new spec function.
     */
    function baseConforms(source) {
      var props = keys(source);
      return function(object) {
        return baseConformsTo(object, source, props);
      };
    }

    /**
     * The base implementation of `_.conformsTo` which accepts `props` to check.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property predicates to conform to.
     * @returns {boolean} Returns `true` if `object` conforms, else `false`.
     */
    function baseConformsTo(object, source, props) {
      var length = props.length;
      if (object == null) {
        return !length;
      }
      object = Object(object);
      while (length--) {
        var key = props[length],
            predicate = source[key],
            value = object[key];

        if ((value === undefined && !(key in object)) || !predicate(value)) {
          return false;
        }
      }
      return true;
    }

    /**
     * The base implementation of `_.delay` and `_.defer` which accepts `args`
     * to provide to `func`.
     *
     * @private
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {Array} args The arguments to provide to `func`.
     * @returns {number|Object} Returns the timer id or timeout object.
     */
    function baseDelay(func, wait, args) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return setTimeout(function() { func.apply(undefined, args); }, wait);
    }

    /**
     * The base implementation of methods like `_.difference` without support
     * for excluding multiple arrays or iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Array} values The values to exclude.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of filtered values.
     */
    function baseDifference(array, values, iteratee, comparator) {
      var index = -1,
          includes = arrayIncludes,
          isCommon = true,
          length = array.length,
          result = [],
          valuesLength = values.length;

      if (!length) {
        return result;
      }
      if (iteratee) {
        values = arrayMap(values, baseUnary(iteratee));
      }
      if (comparator) {
        includes = arrayIncludesWith;
        isCommon = false;
      }
      else if (values.length >= LARGE_ARRAY_SIZE) {
        includes = cacheHas;
        isCommon = false;
        values = new SetCache(values);
      }
      outer:
      while (++index < length) {
        var value = array[index],
            computed = iteratee == null ? value : iteratee(value);

        value = (comparator || value !== 0) ? value : 0;
        if (isCommon && computed === computed) {
          var valuesIndex = valuesLength;
          while (valuesIndex--) {
            if (values[valuesIndex] === computed) {
              continue outer;
            }
          }
          result.push(value);
        }
        else if (!includes(values, computed, comparator)) {
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.forEach` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     */
    var baseEach = createBaseEach(baseForOwn);

    /**
     * The base implementation of `_.forEachRight` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     */
    var baseEachRight = createBaseEach(baseForOwnRight, true);

    /**
     * The base implementation of `_.every` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`
     */
    function baseEvery(collection, predicate) {
      var result = true;
      baseEach(collection, function(value, index, collection) {
        result = !!predicate(value, index, collection);
        return result;
      });
      return result;
    }

    /**
     * The base implementation of methods like `_.max` and `_.min` which accepts a
     * `comparator` to determine the extremum value.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The iteratee invoked per iteration.
     * @param {Function} comparator The comparator used to compare values.
     * @returns {*} Returns the extremum value.
     */
    function baseExtremum(array, iteratee, comparator) {
      var index = -1,
          length = array.length;

      while (++index < length) {
        var value = array[index],
            current = iteratee(value);

        if (current != null && (computed === undefined
              ? (current === current && !isSymbol(current))
              : comparator(current, computed)
            )) {
          var computed = current,
              result = value;
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.fill` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     */
    function baseFill(array, value, start, end) {
      var length = array.length;

      start = toInteger(start);
      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = (end === undefined || end > length) ? length : toInteger(end);
      if (end < 0) {
        end += length;
      }
      end = start > end ? 0 : toLength(end);
      while (start < end) {
        array[start++] = value;
      }
      return array;
    }

    /**
     * The base implementation of `_.filter` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */
    function baseFilter(collection, predicate) {
      var result = [];
      baseEach(collection, function(value, index, collection) {
        if (predicate(value, index, collection)) {
          result.push(value);
        }
      });
      return result;
    }

    /**
     * The base implementation of `_.flatten` with support for restricting flattening.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {number} depth The maximum recursion depth.
     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.
     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.
     * @param {Array} [result=[]] The initial result value.
     * @returns {Array} Returns the new flattened array.
     */
    function baseFlatten(array, depth, predicate, isStrict, result) {
      var index = -1,
          length = array.length;

      predicate || (predicate = isFlattenable);
      result || (result = []);

      while (++index < length) {
        var value = array[index];
        if (depth > 0 && predicate(value)) {
          if (depth > 1) {
            // Recursively flatten arrays (susceptible to call stack limits).
            baseFlatten(value, depth - 1, predicate, isStrict, result);
          } else {
            arrayPush(result, value);
          }
        } else if (!isStrict) {
          result[result.length] = value;
        }
      }
      return result;
    }

    /**
     * The base implementation of `baseForOwn` which iterates over `object`
     * properties returned by `keysFunc` and invokes `iteratee` for each property.
     * Iteratee functions may exit iteration early by explicitly returning `false`.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseFor = createBaseFor();

    /**
     * This function is like `baseFor` except that it iterates over properties
     * in the opposite order.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */
    var baseForRight = createBaseFor(true);

    /**
     * The base implementation of `_.forOwn` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwn(object, iteratee) {
      return object && baseFor(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */
    function baseForOwnRight(object, iteratee) {
      return object && baseForRight(object, iteratee, keys);
    }

    /**
     * The base implementation of `_.functions` which creates an array of
     * `object` function property names filtered from `props`.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} props The property names to filter.
     * @returns {Array} Returns the function names.
     */
    function baseFunctions(object, props) {
      return arrayFilter(props, function(key) {
        return isFunction(object[key]);
      });
    }

    /**
     * The base implementation of `_.get` without support for default values.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @returns {*} Returns the resolved value.
     */
    function baseGet(object, path) {
      path = castPath(path, object);

      var index = 0,
          length = path.length;

      while (object != null && index < length) {
        object = object[toKey(path[index++])];
      }
      return (index && index == length) ? object : undefined;
    }

    /**
     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
     * `keysFunc` and `symbolsFunc` to get the enumerable property names and
     * symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @param {Function} symbolsFunc The function to get the symbols of `object`.
     * @returns {Array} Returns the array of property names and symbols.
     */
    function baseGetAllKeys(object, keysFunc, symbolsFunc) {
      var result = keysFunc(object);
      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
    }

    /**
     * The base implementation of `getTag` without fallbacks for buggy environments.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the `toStringTag`.
     */
    function baseGetTag(value) {
      if (value == null) {
        return value === undefined ? undefinedTag : nullTag;
      }
      return (symToStringTag && symToStringTag in Object(value))
        ? getRawTag(value)
        : objectToString(value);
    }

    /**
     * The base implementation of `_.gt` which doesn't coerce arguments.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`,
     *  else `false`.
     */
    function baseGt(value, other) {
      return value > other;
    }

    /**
     * The base implementation of `_.has` without support for deep paths.
     *
     * @private
     * @param {Object} [object] The object to query.
     * @param {Array|string} key The key to check.
     * @returns {boolean} Returns `true` if `key` exists, else `false`.
     */
    function baseHas(object, key) {
      return object != null && hasOwnProperty.call(object, key);
    }

    /**
     * The base implementation of `_.hasIn` without support for deep paths.
     *
     * @private
     * @param {Object} [object] The object to query.
     * @param {Array|string} key The key to check.
     * @returns {boolean} Returns `true` if `key` exists, else `false`.
     */
    function baseHasIn(object, key) {
      return object != null && key in Object(object);
    }

    /**
     * The base implementation of `_.inRange` which doesn't coerce arguments.
     *
     * @private
     * @param {number} number The number to check.
     * @param {number} start The start of the range.
     * @param {number} end The end of the range.
     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.
     */
    function baseInRange(number, start, end) {
      return number >= nativeMin(start, end) && number < nativeMax(start, end);
    }

    /**
     * The base implementation of methods like `_.intersection`, without support
     * for iteratee shorthands, that accepts an array of arrays to inspect.
     *
     * @private
     * @param {Array} arrays The arrays to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of shared values.
     */
    function baseIntersection(arrays, iteratee, comparator) {
      var includes = comparator ? arrayIncludesWith : arrayIncludes,
          length = arrays[0].length,
          othLength = arrays.length,
          othIndex = othLength,
          caches = Array(othLength),
          maxLength = Infinity,
          result = [];

      while (othIndex--) {
        var array = arrays[othIndex];
        if (othIndex && iteratee) {
          array = arrayMap(array, baseUnary(iteratee));
        }
        maxLength = nativeMin(array.length, maxLength);
        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))
          ? new SetCache(othIndex && array)
          : undefined;
      }
      array = arrays[0];

      var index = -1,
          seen = caches[0];

      outer:
      while (++index < length && result.length < maxLength) {
        var value = array[index],
            computed = iteratee ? iteratee(value) : value;

        value = (comparator || value !== 0) ? value : 0;
        if (!(seen
              ? cacheHas(seen, computed)
              : includes(result, computed, comparator)
            )) {
          othIndex = othLength;
          while (--othIndex) {
            var cache = caches[othIndex];
            if (!(cache
                  ? cacheHas(cache, computed)
                  : includes(arrays[othIndex], computed, comparator))
                ) {
              continue outer;
            }
          }
          if (seen) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.invert` and `_.invertBy` which inverts
     * `object` with values transformed by `iteratee` and set by `setter`.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} setter The function to set `accumulator` values.
     * @param {Function} iteratee The iteratee to transform values.
     * @param {Object} accumulator The initial inverted object.
     * @returns {Function} Returns `accumulator`.
     */
    function baseInverter(object, setter, iteratee, accumulator) {
      baseForOwn(object, function(value, key, object) {
        setter(accumulator, iteratee(value), key, object);
      });
      return accumulator;
    }

    /**
     * The base implementation of `_.invoke` without support for individual
     * method arguments.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the method to invoke.
     * @param {Array} args The arguments to invoke the method with.
     * @returns {*} Returns the result of the invoked method.
     */
    function baseInvoke(object, path, args) {
      path = castPath(path, object);
      object = parent(object, path);
      var func = object == null ? object : object[toKey(last(path))];
      return func == null ? undefined : apply(func, object, args);
    }

    /**
     * The base implementation of `_.isArguments`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an `arguments` object,
     */
    function baseIsArguments(value) {
      return isObjectLike(value) && baseGetTag(value) == argsTag;
    }

    /**
     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.
     */
    function baseIsArrayBuffer(value) {
      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;
    }

    /**
     * The base implementation of `_.isDate` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.
     */
    function baseIsDate(value) {
      return isObjectLike(value) && baseGetTag(value) == dateTag;
    }

    /**
     * The base implementation of `_.isEqual` which supports partial comparisons
     * and tracks traversed objects.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {boolean} bitmask The bitmask flags.
     *  1 - Unordered comparison
     *  2 - Partial comparison
     * @param {Function} [customizer] The function to customize comparisons.
     * @param {Object} [stack] Tracks traversed `value` and `other` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */
    function baseIsEqual(value, other, bitmask, customizer, stack) {
      if (value === other) {
        return true;
      }
      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {
        return value !== value && other !== other;
      }
      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
    }

    /**
     * A specialized version of `baseIsEqual` for arrays and objects which performs
     * deep comparisons and tracks traversed objects enabling objects with circular
     * references to be compared.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} [stack] Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
      var objIsArr = isArray(object),
          othIsArr = isArray(other),
          objTag = objIsArr ? arrayTag : getTag(object),
          othTag = othIsArr ? arrayTag : getTag(other);

      objTag = objTag == argsTag ? objectTag : objTag;
      othTag = othTag == argsTag ? objectTag : othTag;

      var objIsObj = objTag == objectTag,
          othIsObj = othTag == objectTag,
          isSameTag = objTag == othTag;

      if (isSameTag && isBuffer(object)) {
        if (!isBuffer(other)) {
          return false;
        }
        objIsArr = true;
        objIsObj = false;
      }
      if (isSameTag && !objIsObj) {
        stack || (stack = new Stack);
        return (objIsArr || isTypedArray(object))
          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)
          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
      }
      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

        if (objIsWrapped || othIsWrapped) {
          var objUnwrapped = objIsWrapped ? object.value() : object,
              othUnwrapped = othIsWrapped ? other.value() : other;

          stack || (stack = new Stack);
          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
        }
      }
      if (!isSameTag) {
        return false;
      }
      stack || (stack = new Stack);
      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
    }

    /**
     * The base implementation of `_.isMap` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a map, else `false`.
     */
    function baseIsMap(value) {
      return isObjectLike(value) && getTag(value) == mapTag;
    }

    /**
     * The base implementation of `_.isMatch` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Array} matchData The property names, values, and compare flags to match.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     */
    function baseIsMatch(object, source, matchData, customizer) {
      var index = matchData.length,
          length = index,
          noCustomizer = !customizer;

      if (object == null) {
        return !length;
      }
      object = Object(object);
      while (index--) {
        var data = matchData[index];
        if ((noCustomizer && data[2])
              ? data[1] !== object[data[0]]
              : !(data[0] in object)
            ) {
          return false;
        }
      }
      while (++index < length) {
        data = matchData[index];
        var key = data[0],
            objValue = object[key],
            srcValue = data[1];

        if (noCustomizer && data[2]) {
          if (objValue === undefined && !(key in object)) {
            return false;
          }
        } else {
          var stack = new Stack;
          if (customizer) {
            var result = customizer(objValue, srcValue, key, object, source, stack);
          }
          if (!(result === undefined
                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)
                : result
              )) {
            return false;
          }
        }
      }
      return true;
    }

    /**
     * The base implementation of `_.isNative` without bad shim checks.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function,
     *  else `false`.
     */
    function baseIsNative(value) {
      if (!isObject(value) || isMasked(value)) {
        return false;
      }
      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
      return pattern.test(toSource(value));
    }

    /**
     * The base implementation of `_.isRegExp` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.
     */
    function baseIsRegExp(value) {
      return isObjectLike(value) && baseGetTag(value) == regexpTag;
    }

    /**
     * The base implementation of `_.isSet` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a set, else `false`.
     */
    function baseIsSet(value) {
      return isObjectLike(value) && getTag(value) == setTag;
    }

    /**
     * The base implementation of `_.isTypedArray` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
     */
    function baseIsTypedArray(value) {
      return isObjectLike(value) &&
        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
    }

    /**
     * The base implementation of `_.iteratee`.
     *
     * @private
     * @param {*} [value=_.identity] The value to convert to an iteratee.
     * @returns {Function} Returns the iteratee.
     */
    function baseIteratee(value) {
      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.
      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.
      if (typeof value == 'function') {
        return value;
      }
      if (value == null) {
        return identity;
      }
      if (typeof value == 'object') {
        return isArray(value)
          ? baseMatchesProperty(value[0], value[1])
          : baseMatches(value);
      }
      return property(value);
    }

    /**
     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
    function baseKeys(object) {
      if (!isPrototype(object)) {
        return nativeKeys(object);
      }
      var result = [];
      for (var key in Object(object)) {
        if (hasOwnProperty.call(object, key) && key != 'constructor') {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
    function baseKeysIn(object) {
      if (!isObject(object)) {
        return nativeKeysIn(object);
      }
      var isProto = isPrototype(object),
          result = [];

      for (var key in object) {
        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.lt` which doesn't coerce arguments.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than `other`,
     *  else `false`.
     */
    function baseLt(value, other) {
      return value < other;
    }

    /**
     * The base implementation of `_.map` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */
    function baseMap(collection, iteratee) {
      var index = -1,
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value, key, collection) {
        result[++index] = iteratee(value, key, collection);
      });
      return result;
    }

    /**
     * The base implementation of `_.matches` which doesn't clone `source`.
     *
     * @private
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new spec function.
     */
    function baseMatches(source) {
      var matchData = getMatchData(source);
      if (matchData.length == 1 && matchData[0][2]) {
        return matchesStrictComparable(matchData[0][0], matchData[0][1]);
      }
      return function(object) {
        return object === source || baseIsMatch(object, source, matchData);
      };
    }

    /**
     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.
     *
     * @private
     * @param {string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     */
    function baseMatchesProperty(path, srcValue) {
      if (isKey(path) && isStrictComparable(srcValue)) {
        return matchesStrictComparable(toKey(path), srcValue);
      }
      return function(object) {
        var objValue = get(object, path);
        return (objValue === undefined && objValue === srcValue)
          ? hasIn(object, path)
          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
      };
    }

    /**
     * The base implementation of `_.merge` without support for multiple sources.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {number} srcIndex The index of `source`.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Object} [stack] Tracks traversed source values and their merged
     *  counterparts.
     */
    function baseMerge(object, source, srcIndex, customizer, stack) {
      if (object === source) {
        return;
      }
      baseFor(source, function(srcValue, key) {
        stack || (stack = new Stack);
        if (isObject(srcValue)) {
          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
        }
        else {
          var newValue = customizer
            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)
            : undefined;

          if (newValue === undefined) {
            newValue = srcValue;
          }
          assignMergeValue(object, key, newValue);
        }
      }, keysIn);
    }

    /**
     * A specialized version of `baseMerge` for arrays and objects which performs
     * deep merges and tracks traversed objects enabling objects with circular
     * references to be merged.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {string} key The key of the value to merge.
     * @param {number} srcIndex The index of `source`.
     * @param {Function} mergeFunc The function to merge values.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {Object} [stack] Tracks traversed source values and their merged
     *  counterparts.
     */
    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
      var objValue = safeGet(object, key),
          srcValue = safeGet(source, key),
          stacked = stack.get(srcValue);

      if (stacked) {
        assignMergeValue(object, key, stacked);
        return;
      }
      var newValue = customizer
        ? customizer(objValue, srcValue, (key + ''), object, source, stack)
        : undefined;

      var isCommon = newValue === undefined;

      if (isCommon) {
        var isArr = isArray(srcValue),
            isBuff = !isArr && isBuffer(srcValue),
            isTyped = !isArr && !isBuff && isTypedArray(srcValue);

        newValue = srcValue;
        if (isArr || isBuff || isTyped) {
          if (isArray(objValue)) {
            newValue = objValue;
          }
          else if (isArrayLikeObject(objValue)) {
            newValue = copyArray(objValue);
          }
          else if (isBuff) {
            isCommon = false;
            newValue = cloneBuffer(srcValue, true);
          }
          else if (isTyped) {
            isCommon = false;
            newValue = cloneTypedArray(srcValue, true);
          }
          else {
            newValue = [];
          }
        }
        else if (isPlainObject(srcValue) || isArguments(srcValue)) {
          newValue = objValue;
          if (isArguments(objValue)) {
            newValue = toPlainObject(objValue);
          }
          else if (!isObject(objValue) || isFunction(objValue)) {
            newValue = initCloneObject(srcValue);
          }
        }
        else {
          isCommon = false;
        }
      }
      if (isCommon) {
        // Recursively merge objects and arrays (susceptible to call stack limits).
        stack.set(srcValue, newValue);
        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
        stack['delete'](srcValue);
      }
      assignMergeValue(object, key, newValue);
    }

    /**
     * The base implementation of `_.nth` which doesn't coerce arguments.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {number} n The index of the element to return.
     * @returns {*} Returns the nth element of `array`.
     */
    function baseNth(array, n) {
      var length = array.length;
      if (!length) {
        return;
      }
      n += n < 0 ? length : 0;
      return isIndex(n, length) ? array[n] : undefined;
    }

    /**
     * The base implementation of `_.orderBy` without param guards.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {string[]} orders The sort orders of `iteratees`.
     * @returns {Array} Returns the new sorted array.
     */
    function baseOrderBy(collection, iteratees, orders) {
      var index = -1;
      iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(getIteratee()));

      var result = baseMap(collection, function(value, key, collection) {
        var criteria = arrayMap(iteratees, function(iteratee) {
          return iteratee(value);
        });
        return { 'criteria': criteria, 'index': ++index, 'value': value };
      });

      return baseSortBy(result, function(object, other) {
        return compareMultiple(object, other, orders);
      });
    }

    /**
     * The base implementation of `_.pick` without support for individual
     * property identifiers.
     *
     * @private
     * @param {Object} object The source object.
     * @param {string[]} paths The property paths to pick.
     * @returns {Object} Returns the new object.
     */
    function basePick(object, paths) {
      return basePickBy(object, paths, function(value, path) {
        return hasIn(object, path);
      });
    }

    /**
     * The base implementation of  `_.pickBy` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The source object.
     * @param {string[]} paths The property paths to pick.
     * @param {Function} predicate The function invoked per property.
     * @returns {Object} Returns the new object.
     */
    function basePickBy(object, paths, predicate) {
      var index = -1,
          length = paths.length,
          result = {};

      while (++index < length) {
        var path = paths[index],
            value = baseGet(object, path);

        if (predicate(value, path)) {
          baseSet(result, castPath(path, object), value);
        }
      }
      return result;
    }

    /**
     * A specialized version of `baseProperty` which supports deep paths.
     *
     * @private
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new accessor function.
     */
    function basePropertyDeep(path) {
      return function(object) {
        return baseGet(object, path);
      };
    }

    /**
     * The base implementation of `_.pullAllBy` without support for iteratee
     * shorthands.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns `array`.
     */
    function basePullAll(array, values, iteratee, comparator) {
      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,
          index = -1,
          length = values.length,
          seen = array;

      if (array === values) {
        values = copyArray(values);
      }
      if (iteratee) {
        seen = arrayMap(array, baseUnary(iteratee));
      }
      while (++index < length) {
        var fromIndex = 0,
            value = values[index],
            computed = iteratee ? iteratee(value) : value;

        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {
          if (seen !== array) {
            splice.call(seen, fromIndex, 1);
          }
          splice.call(array, fromIndex, 1);
        }
      }
      return array;
    }

    /**
     * The base implementation of `_.pullAt` without support for individual
     * indexes or capturing the removed elements.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {number[]} indexes The indexes of elements to remove.
     * @returns {Array} Returns `array`.
     */
    function basePullAt(array, indexes) {
      var length = array ? indexes.length : 0,
          lastIndex = length - 1;

      while (length--) {
        var index = indexes[length];
        if (length == lastIndex || index !== previous) {
          var previous = index;
          if (isIndex(index)) {
            splice.call(array, index, 1);
          } else {
            baseUnset(array, index);
          }
        }
      }
      return array;
    }

    /**
     * The base implementation of `_.random` without support for returning
     * floating-point numbers.
     *
     * @private
     * @param {number} lower The lower bound.
     * @param {number} upper The upper bound.
     * @returns {number} Returns the random number.
     */
    function baseRandom(lower, upper) {
      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));
    }

    /**
     * The base implementation of `_.range` and `_.rangeRight` which doesn't
     * coerce arguments.
     *
     * @private
     * @param {number} start The start of the range.
     * @param {number} end The end of the range.
     * @param {number} step The value to increment or decrement by.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the range of numbers.
     */
    function baseRange(start, end, step, fromRight) {
      var index = -1,
          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),
          result = Array(length);

      while (length--) {
        result[fromRight ? length : ++index] = start;
        start += step;
      }
      return result;
    }

    /**
     * The base implementation of `_.repeat` which doesn't coerce arguments.
     *
     * @private
     * @param {string} string The string to repeat.
     * @param {number} n The number of times to repeat the string.
     * @returns {string} Returns the repeated string.
     */
    function baseRepeat(string, n) {
      var result = '';
      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {
        return result;
      }
      // Leverage the exponentiation by squaring algorithm for a faster repeat.
      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.
      do {
        if (n % 2) {
          result += string;
        }
        n = nativeFloor(n / 2);
        if (n) {
          string += string;
        }
      } while (n);

      return result;
    }

    /**
     * The base implementation of `_.rest` which doesn't validate or coerce arguments.
     *
     * @private
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     */
    function baseRest(func, start) {
      return setToString(overRest(func, start, identity), func + '');
    }

    /**
     * The base implementation of `_.sample`.
     *
     * @private
     * @param {Array|Object} collection The collection to sample.
     * @returns {*} Returns the random element.
     */
    function baseSample(collection) {
      return arraySample(values(collection));
    }

    /**
     * The base implementation of `_.sampleSize` without param guards.
     *
     * @private
     * @param {Array|Object} collection The collection to sample.
     * @param {number} n The number of elements to sample.
     * @returns {Array} Returns the random elements.
     */
    function baseSampleSize(collection, n) {
      var array = values(collection);
      return shuffleSelf(array, baseClamp(n, 0, array.length));
    }

    /**
     * The base implementation of `_.set`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @param {Function} [customizer] The function to customize path creation.
     * @returns {Object} Returns `object`.
     */
    function baseSet(object, path, value, customizer) {
      if (!isObject(object)) {
        return object;
      }
      path = castPath(path, object);

      var index = -1,
          length = path.length,
          lastIndex = length - 1,
          nested = object;

      while (nested != null && ++index < length) {
        var key = toKey(path[index]),
            newValue = value;

        if (index != lastIndex) {
          var objValue = nested[key];
          newValue = customizer ? customizer(objValue, key, nested) : undefined;
          if (newValue === undefined) {
            newValue = isObject(objValue)
              ? objValue
              : (isIndex(path[index + 1]) ? [] : {});
          }
        }
        assignValue(nested, key, newValue);
        nested = nested[key];
      }
      return object;
    }

    /**
     * The base implementation of `setData` without support for hot loop shorting.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var baseSetData = !metaMap ? identity : function(func, data) {
      metaMap.set(func, data);
      return func;
    };

    /**
     * The base implementation of `setToString` without support for hot loop shorting.
     *
     * @private
     * @param {Function} func The function to modify.
     * @param {Function} string The `toString` result.
     * @returns {Function} Returns `func`.
     */
    var baseSetToString = !defineProperty ? identity : function(func, string) {
      return defineProperty(func, 'toString', {
        'configurable': true,
        'enumerable': false,
        'value': constant(string),
        'writable': true
      });
    };

    /**
     * The base implementation of `_.shuffle`.
     *
     * @private
     * @param {Array|Object} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     */
    function baseShuffle(collection) {
      return shuffleSelf(values(collection));
    }

    /**
     * The base implementation of `_.slice` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseSlice(array, start, end) {
      var index = -1,
          length = array.length;

      if (start < 0) {
        start = -start > length ? 0 : (length + start);
      }
      end = end > length ? length : end;
      if (end < 0) {
        end += length;
      }
      length = start > end ? 0 : ((end - start) >>> 0);
      start >>>= 0;

      var result = Array(length);
      while (++index < length) {
        result[index] = array[index + start];
      }
      return result;
    }

    /**
     * The base implementation of `_.some` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */
    function baseSome(collection, predicate) {
      var result;

      baseEach(collection, function(value, index, collection) {
        result = predicate(value, index, collection);
        return !result;
      });
      return !!result;
    }

    /**
     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which
     * performs a binary search of `array` to determine the index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function baseSortedIndex(array, value, retHighest) {
      var low = 0,
          high = array == null ? low : array.length;

      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
        while (low < high) {
          var mid = (low + high) >>> 1,
              computed = array[mid];

          if (computed !== null && !isSymbol(computed) &&
              (retHighest ? (computed <= value) : (computed < value))) {
            low = mid + 1;
          } else {
            high = mid;
          }
        }
        return high;
      }
      return baseSortedIndexBy(array, value, identity, retHighest);
    }

    /**
     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`
     * which invokes `iteratee` for `value` and each element of `array` to compute
     * their sort ranking. The iteratee is invoked with one argument; (value).
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} iteratee The iteratee invoked per element.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */
    function baseSortedIndexBy(array, value, iteratee, retHighest) {
      value = iteratee(value);

      var low = 0,
          high = array == null ? 0 : array.length,
          valIsNaN = value !== value,
          valIsNull = value === null,
          valIsSymbol = isSymbol(value),
          valIsUndefined = value === undefined;

      while (low < high) {
        var mid = nativeFloor((low + high) / 2),
            computed = iteratee(array[mid]),
            othIsDefined = computed !== undefined,
            othIsNull = computed === null,
            othIsReflexive = computed === computed,
            othIsSymbol = isSymbol(computed);

        if (valIsNaN) {
          var setLow = retHighest || othIsReflexive;
        } else if (valIsUndefined) {
          setLow = othIsReflexive && (retHighest || othIsDefined);
        } else if (valIsNull) {
          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);
        } else if (valIsSymbol) {
          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);
        } else if (othIsNull || othIsSymbol) {
          setLow = false;
        } else {
          setLow = retHighest ? (computed <= value) : (computed < value);
        }
        if (setLow) {
          low = mid + 1;
        } else {
          high = mid;
        }
      }
      return nativeMin(high, MAX_ARRAY_INDEX);
    }

    /**
     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without
     * support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     */
    function baseSortedUniq(array, iteratee) {
      var index = -1,
          length = array.length,
          resIndex = 0,
          result = [];

      while (++index < length) {
        var value = array[index],
            computed = iteratee ? iteratee(value) : value;

        if (!index || !eq(computed, seen)) {
          var seen = computed;
          result[resIndex++] = value === 0 ? 0 : value;
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.toNumber` which doesn't ensure correct
     * conversions of binary, hexadecimal, or octal string values.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {number} Returns the number.
     */
    function baseToNumber(value) {
      if (typeof value == 'number') {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      return +value;
    }

    /**
     * The base implementation of `_.toString` which doesn't convert nullish
     * values to empty strings.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {string} Returns the string.
     */
    function baseToString(value) {
      // Exit early for strings to avoid a performance hit in some environments.
      if (typeof value == 'string') {
        return value;
      }
      if (isArray(value)) {
        // Recursively convert values (susceptible to call stack limits).
        return arrayMap(value, baseToString) + '';
      }
      if (isSymbol(value)) {
        return symbolToString ? symbolToString.call(value) : '';
      }
      var result = (value + '');
      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
    }

    /**
     * The base implementation of `_.uniqBy` without support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     */
    function baseUniq(array, iteratee, comparator) {
      var index = -1,
          includes = arrayIncludes,
          length = array.length,
          isCommon = true,
          result = [],
          seen = result;

      if (comparator) {
        isCommon = false;
        includes = arrayIncludesWith;
      }
      else if (length >= LARGE_ARRAY_SIZE) {
        var set = iteratee ? null : createSet(array);
        if (set) {
          return setToArray(set);
        }
        isCommon = false;
        includes = cacheHas;
        seen = new SetCache;
      }
      else {
        seen = iteratee ? [] : result;
      }
      outer:
      while (++index < length) {
        var value = array[index],
            computed = iteratee ? iteratee(value) : value;

        value = (comparator || value !== 0) ? value : 0;
        if (isCommon && computed === computed) {
          var seenIndex = seen.length;
          while (seenIndex--) {
            if (seen[seenIndex] === computed) {
              continue outer;
            }
          }
          if (iteratee) {
            seen.push(computed);
          }
          result.push(value);
        }
        else if (!includes(seen, computed, comparator)) {
          if (seen !== result) {
            seen.push(computed);
          }
          result.push(value);
        }
      }
      return result;
    }

    /**
     * The base implementation of `_.unset`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The property path to unset.
     * @returns {boolean} Returns `true` if the property is deleted, else `false`.
     */
    function baseUnset(object, path) {
      path = castPath(path, object);
      object = parent(object, path);
      return object == null || delete object[toKey(last(path))];
    }

    /**
     * The base implementation of `_.update`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to update.
     * @param {Function} updater The function to produce the updated value.
     * @param {Function} [customizer] The function to customize path creation.
     * @returns {Object} Returns `object`.
     */
    function baseUpdate(object, path, updater, customizer) {
      return baseSet(object, path, updater(baseGet(object, path)), customizer);
    }

    /**
     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`
     * without support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {Function} predicate The function invoked per iteration.
     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the slice of `array`.
     */
    function baseWhile(array, predicate, isDrop, fromRight) {
      var length = array.length,
          index = fromRight ? length : -1;

      while ((fromRight ? index-- : ++index < length) &&
        predicate(array[index], index, array)) {}

      return isDrop
        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))
        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));
    }

    /**
     * The base implementation of `wrapperValue` which returns the result of
     * performing a sequence of actions on the unwrapped `value`, where each
     * successive action is supplied the return value of the previous.
     *
     * @private
     * @param {*} value The unwrapped value.
     * @param {Array} actions Actions to perform to resolve the unwrapped value.
     * @returns {*} Returns the resolved value.
     */
    function baseWrapperValue(value, actions) {
      var result = value;
      if (result instanceof LazyWrapper) {
        result = result.value();
      }
      return arrayReduce(actions, function(result, action) {
        return action.func.apply(action.thisArg, arrayPush([result], action.args));
      }, result);
    }

    /**
     * The base implementation of methods like `_.xor`, without support for
     * iteratee shorthands, that accepts an array of arrays to inspect.
     *
     * @private
     * @param {Array} arrays The arrays to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of values.
     */
    function baseXor(arrays, iteratee, comparator) {
      var length = arrays.length;
      if (length < 2) {
        return length ? baseUniq(arrays[0]) : [];
      }
      var index = -1,
          result = Array(length);

      while (++index < length) {
        var array = arrays[index],
            othIndex = -1;

        while (++othIndex < length) {
          if (othIndex != index) {
            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);
          }
        }
      }
      return baseUniq(baseFlatten(result, 1), iteratee, comparator);
    }

    /**
     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.
     *
     * @private
     * @param {Array} props The property identifiers.
     * @param {Array} values The property values.
     * @param {Function} assignFunc The function to assign values.
     * @returns {Object} Returns the new object.
     */
    function baseZipObject(props, values, assignFunc) {
      var index = -1,
          length = props.length,
          valsLength = values.length,
          result = {};

      while (++index < length) {
        var value = index < valsLength ? values[index] : undefined;
        assignFunc(result, props[index], value);
      }
      return result;
    }

    /**
     * Casts `value` to an empty array if it's not an array like object.
     *
     * @private
     * @param {*} value The value to inspect.
     * @returns {Array|Object} Returns the cast array-like object.
     */
    function castArrayLikeObject(value) {
      return isArrayLikeObject(value) ? value : [];
    }

    /**
     * Casts `value` to `identity` if it's not a function.
     *
     * @private
     * @param {*} value The value to inspect.
     * @returns {Function} Returns cast function.
     */
    function castFunction(value) {
      return typeof value == 'function' ? value : identity;
    }

    /**
     * Casts `value` to a path array if it's not one.
     *
     * @private
     * @param {*} value The value to inspect.
     * @param {Object} [object] The object to query keys on.
     * @returns {Array} Returns the cast property path array.
     */
    function castPath(value, object) {
      if (isArray(value)) {
        return value;
      }
      return isKey(value, object) ? [value] : stringToPath(toString(value));
    }

    /**
     * A `baseRest` alias which can be replaced with `identity` by module
     * replacement plugins.
     *
     * @private
     * @type {Function}
     * @param {Function} func The function to apply a rest parameter to.
     * @returns {Function} Returns the new function.
     */
    var castRest = baseRest;

    /**
     * Casts `array` to a slice if it's needed.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {number} start The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the cast slice.
     */
    function castSlice(array, start, end) {
      var length = array.length;
      end = end === undefined ? length : end;
      return (!start && end >= length) ? array : baseSlice(array, start, end);
    }

    /**
     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).
     *
     * @private
     * @param {number|Object} id The timer id or timeout object of the timer to clear.
     */
    var clearTimeout = ctxClearTimeout || function(id) {
      return root.clearTimeout(id);
    };

    /**
     * Creates a clone of  `buffer`.
     *
     * @private
     * @param {Buffer} buffer The buffer to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Buffer} Returns the cloned buffer.
     */
    function cloneBuffer(buffer, isDeep) {
      if (isDeep) {
        return buffer.slice();
      }
      var length = buffer.length,
          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);

      buffer.copy(result);
      return result;
    }

    /**
     * Creates a clone of `arrayBuffer`.
     *
     * @private
     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
     * @returns {ArrayBuffer} Returns the cloned array buffer.
     */
    function cloneArrayBuffer(arrayBuffer) {
      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
      new Uint8Array(result).set(new Uint8Array(arrayBuffer));
      return result;
    }

    /**
     * Creates a clone of `dataView`.
     *
     * @private
     * @param {Object} dataView The data view to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the cloned data view.
     */
    function cloneDataView(dataView, isDeep) {
      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;
      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
    }

    /**
     * Creates a clone of `regexp`.
     *
     * @private
     * @param {Object} regexp The regexp to clone.
     * @returns {Object} Returns the cloned regexp.
     */
    function cloneRegExp(regexp) {
      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
      result.lastIndex = regexp.lastIndex;
      return result;
    }

    /**
     * Creates a clone of the `symbol` object.
     *
     * @private
     * @param {Object} symbol The symbol object to clone.
     * @returns {Object} Returns the cloned symbol object.
     */
    function cloneSymbol(symbol) {
      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
    }

    /**
     * Creates a clone of `typedArray`.
     *
     * @private
     * @param {Object} typedArray The typed array to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the cloned typed array.
     */
    function cloneTypedArray(typedArray, isDeep) {
      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
    }

    /**
     * Compares values to sort them in ascending order.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {number} Returns the sort order indicator for `value`.
     */
    function compareAscending(value, other) {
      if (value !== other) {
        var valIsDefined = value !== undefined,
            valIsNull = value === null,
            valIsReflexive = value === value,
            valIsSymbol = isSymbol(value);

        var othIsDefined = other !== undefined,
            othIsNull = other === null,
            othIsReflexive = other === other,
            othIsSymbol = isSymbol(other);

        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||
            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||
            (valIsNull && othIsDefined && othIsReflexive) ||
            (!valIsDefined && othIsReflexive) ||
            !valIsReflexive) {
          return 1;
        }
        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||
            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||
            (othIsNull && valIsDefined && valIsReflexive) ||
            (!othIsDefined && valIsReflexive) ||
            !othIsReflexive) {
          return -1;
        }
      }
      return 0;
    }

    /**
     * Used by `_.orderBy` to compare multiple properties of a value to another
     * and stable sort them.
     *
     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,
     * specify an order of "desc" for descending or "asc" for ascending sort order
     * of corresponding values.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {boolean[]|string[]} orders The order to sort by for each property.
     * @returns {number} Returns the sort order indicator for `object`.
     */
    function compareMultiple(object, other, orders) {
      var index = -1,
          objCriteria = object.criteria,
          othCriteria = other.criteria,
          length = objCriteria.length,
          ordersLength = orders.length;

      while (++index < length) {
        var result = compareAscending(objCriteria[index], othCriteria[index]);
        if (result) {
          if (index >= ordersLength) {
            return result;
          }
          var order = orders[index];
          return result * (order == 'desc' ? -1 : 1);
        }
      }
      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
      // that causes it, under certain circumstances, to provide the same value for
      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247
      // for more details.
      //
      // This also ensures a stable sort in V8 and other engines.
      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.
      return object.index - other.index;
    }

    /**
     * Creates an array that is the composition of partially applied arguments,
     * placeholders, and provided arguments into a single array of arguments.
     *
     * @private
     * @param {Array} args The provided arguments.
     * @param {Array} partials The arguments to prepend to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @params {boolean} [isCurried] Specify composing for a curried function.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgs(args, partials, holders, isCurried) {
      var argsIndex = -1,
          argsLength = args.length,
          holdersLength = holders.length,
          leftIndex = -1,
          leftLength = partials.length,
          rangeLength = nativeMax(argsLength - holdersLength, 0),
          result = Array(leftLength + rangeLength),
          isUncurried = !isCurried;

      while (++leftIndex < leftLength) {
        result[leftIndex] = partials[leftIndex];
      }
      while (++argsIndex < holdersLength) {
        if (isUncurried || argsIndex < argsLength) {
          result[holders[argsIndex]] = args[argsIndex];
        }
      }
      while (rangeLength--) {
        result[leftIndex++] = args[argsIndex++];
      }
      return result;
    }

    /**
     * This function is like `composeArgs` except that the arguments composition
     * is tailored for `_.partialRight`.
     *
     * @private
     * @param {Array} args The provided arguments.
     * @param {Array} partials The arguments to append to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @params {boolean} [isCurried] Specify composing for a curried function.
     * @returns {Array} Returns the new array of composed arguments.
     */
    function composeArgsRight(args, partials, holders, isCurried) {
      var argsIndex = -1,
          argsLength = args.length,
          holdersIndex = -1,
          holdersLength = holders.length,
          rightIndex = -1,
          rightLength = partials.length,
          rangeLength = nativeMax(argsLength - holdersLength, 0),
          result = Array(rangeLength + rightLength),
          isUncurried = !isCurried;

      while (++argsIndex < rangeLength) {
        result[argsIndex] = args[argsIndex];
      }
      var offset = argsIndex;
      while (++rightIndex < rightLength) {
        result[offset + rightIndex] = partials[rightIndex];
      }
      while (++holdersIndex < holdersLength) {
        if (isUncurried || argsIndex < argsLength) {
          result[offset + holders[holdersIndex]] = args[argsIndex++];
        }
      }
      return result;
    }

    /**
     * Copies the values of `source` to `array`.
     *
     * @private
     * @param {Array} source The array to copy values from.
     * @param {Array} [array=[]] The array to copy values to.
     * @returns {Array} Returns `array`.
     */
    function copyArray(source, array) {
      var index = -1,
          length = source.length;

      array || (array = Array(length));
      while (++index < length) {
        array[index] = source[index];
      }
      return array;
    }

    /**
     * Copies properties of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy properties from.
     * @param {Array} props The property identifiers to copy.
     * @param {Object} [object={}] The object to copy properties to.
     * @param {Function} [customizer] The function to customize copied values.
     * @returns {Object} Returns `object`.
     */
    function copyObject(source, props, object, customizer) {
      var isNew = !object;
      object || (object = {});

      var index = -1,
          length = props.length;

      while (++index < length) {
        var key = props[index];

        var newValue = customizer
          ? customizer(object[key], source[key], key, object, source)
          : undefined;

        if (newValue === undefined) {
          newValue = source[key];
        }
        if (isNew) {
          baseAssignValue(object, key, newValue);
        } else {
          assignValue(object, key, newValue);
        }
      }
      return object;
    }

    /**
     * Copies own symbols of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy symbols from.
     * @param {Object} [object={}] The object to copy symbols to.
     * @returns {Object} Returns `object`.
     */
    function copySymbols(source, object) {
      return copyObject(source, getSymbols(source), object);
    }

    /**
     * Copies own and inherited symbols of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy symbols from.
     * @param {Object} [object={}] The object to copy symbols to.
     * @returns {Object} Returns `object`.
     */
    function copySymbolsIn(source, object) {
      return copyObject(source, getSymbolsIn(source), object);
    }

    /**
     * Creates a function like `_.groupBy`.
     *
     * @private
     * @param {Function} setter The function to set accumulator values.
     * @param {Function} [initializer] The accumulator object initializer.
     * @returns {Function} Returns the new aggregator function.
     */
    function createAggregator(setter, initializer) {
      return function(collection, iteratee) {
        var func = isArray(collection) ? arrayAggregator : baseAggregator,
            accumulator = initializer ? initializer() : {};

        return func(collection, setter, getIteratee(iteratee, 2), accumulator);
      };
    }

    /**
     * Creates a function like `_.assign`.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @returns {Function} Returns the new assigner function.
     */
    function createAssigner(assigner) {
      return baseRest(function(object, sources) {
        var index = -1,
            length = sources.length,
            customizer = length > 1 ? sources[length - 1] : undefined,
            guard = length > 2 ? sources[2] : undefined;

        customizer = (assigner.length > 3 && typeof customizer == 'function')
          ? (length--, customizer)
          : undefined;

        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          customizer = length < 3 ? undefined : customizer;
          length = 1;
        }
        object = Object(object);
        while (++index < length) {
          var source = sources[index];
          if (source) {
            assigner(object, source, index, customizer);
          }
        }
        return object;
      });
    }

    /**
     * Creates a `baseEach` or `baseEachRight` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseEach(eachFunc, fromRight) {
      return function(collection, iteratee) {
        if (collection == null) {
          return collection;
        }
        if (!isArrayLike(collection)) {
          return eachFunc(collection, iteratee);
        }
        var length = collection.length,
            index = fromRight ? length : -1,
            iterable = Object(collection);

        while ((fromRight ? index-- : ++index < length)) {
          if (iteratee(iterable[index], index, iterable) === false) {
            break;
          }
        }
        return collection;
      };
    }

    /**
     * Creates a base function for methods like `_.forIn` and `_.forOwn`.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */
    function createBaseFor(fromRight) {
      return function(object, iteratee, keysFunc) {
        var index = -1,
            iterable = Object(object),
            props = keysFunc(object),
            length = props.length;

        while (length--) {
          var key = props[fromRight ? length : ++index];
          if (iteratee(iterable[key], key, iterable) === false) {
            break;
          }
        }
        return object;
      };
    }

    /**
     * Creates a function that wraps `func` to invoke it with the optional `this`
     * binding of `thisArg`.
     *
     * @private
     * @param {Function} func The function to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createBind(func, bitmask, thisArg) {
      var isBind = bitmask & WRAP_BIND_FLAG,
          Ctor = createCtor(func);

      function wrapper() {
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return fn.apply(isBind ? thisArg : this, arguments);
      }
      return wrapper;
    }

    /**
     * Creates a function like `_.lowerFirst`.
     *
     * @private
     * @param {string} methodName The name of the `String` case method to use.
     * @returns {Function} Returns the new case function.
     */
    function createCaseFirst(methodName) {
      return function(string) {
        string = toString(string);

        var strSymbols = hasUnicode(string)
          ? stringToArray(string)
          : undefined;

        var chr = strSymbols
          ? strSymbols[0]
          : string.charAt(0);

        var trailing = strSymbols
          ? castSlice(strSymbols, 1).join('')
          : string.slice(1);

        return chr[methodName]() + trailing;
      };
    }

    /**
     * Creates a function like `_.camelCase`.
     *
     * @private
     * @param {Function} callback The function to combine each word.
     * @returns {Function} Returns the new compounder function.
     */
    function createCompounder(callback) {
      return function(string) {
        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');
      };
    }

    /**
     * Creates a function that produces an instance of `Ctor` regardless of
     * whether it was invoked as part of a `new` expression or by `call` or `apply`.
     *
     * @private
     * @param {Function} Ctor The constructor to wrap.
     * @returns {Function} Returns the new wrapped function.
     */
    function createCtor(Ctor) {
      return function() {
        // Use a `switch` statement to work with class constructors. See
        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist
        // for more details.
        var args = arguments;
        switch (args.length) {
          case 0: return new Ctor;
          case 1: return new Ctor(args[0]);
          case 2: return new Ctor(args[0], args[1]);
          case 3: return new Ctor(args[0], args[1], args[2]);
          case 4: return new Ctor(args[0], args[1], args[2], args[3]);
          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);
          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
        }
        var thisBinding = baseCreate(Ctor.prototype),
            result = Ctor.apply(thisBinding, args);

        // Mimic the constructor's `return` behavior.
        // See https://es5.github.io/#x13.2.2 for more details.
        return isObject(result) ? result : thisBinding;
      };
    }

    /**
     * Creates a function that wraps `func` to enable currying.
     *
     * @private
     * @param {Function} func The function to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {number} arity The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createCurry(func, bitmask, arity) {
      var Ctor = createCtor(func);

      function wrapper() {
        var length = arguments.length,
            args = Array(length),
            index = length,
            placeholder = getHolder(wrapper);

        while (index--) {
          args[index] = arguments[index];
        }
        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)
          ? []
          : replaceHolders(args, placeholder);

        length -= holders.length;
        if (length < arity) {
          return createRecurry(
            func, bitmask, createHybrid, wrapper.placeholder, undefined,
            args, holders, undefined, undefined, arity - length);
        }
        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;
        return apply(fn, this, args);
      }
      return wrapper;
    }

    /**
     * Creates a `_.find` or `_.findLast` function.
     *
     * @private
     * @param {Function} findIndexFunc The function to find the collection index.
     * @returns {Function} Returns the new find function.
     */
    function createFind(findIndexFunc) {
      return function(collection, predicate, fromIndex) {
        var iterable = Object(collection);
        if (!isArrayLike(collection)) {
          var iteratee = getIteratee(predicate, 3);
          collection = keys(collection);
          predicate = function(key) { return iteratee(iterable[key], key, iterable); };
        }
        var index = findIndexFunc(collection, predicate, fromIndex);
        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;
      };
    }

    /**
     * Creates a `_.flow` or `_.flowRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new flow function.
     */
    function createFlow(fromRight) {
      return flatRest(function(funcs) {
        var length = funcs.length,
            index = length,
            prereq = LodashWrapper.prototype.thru;

        if (fromRight) {
          funcs.reverse();
        }
        while (index--) {
          var func = funcs[index];
          if (typeof func != 'function') {
            throw new TypeError(FUNC_ERROR_TEXT);
          }
          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {
            var wrapper = new LodashWrapper([], true);
          }
        }
        index = wrapper ? index : length;
        while (++index < length) {
          func = funcs[index];

          var funcName = getFuncName(func),
              data = funcName == 'wrapper' ? getData(func) : undefined;

          if (data && isLaziable(data[0]) &&
                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&
                !data[4].length && data[9] == 1
              ) {
            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
          } else {
            wrapper = (func.length == 1 && isLaziable(func))
              ? wrapper[funcName]()
              : wrapper.thru(func);
          }
        }
        return function() {
          var args = arguments,
              value = args[0];

          if (wrapper && args.length == 1 && isArray(value)) {
            return wrapper.plant(value).value();
          }
          var index = 0,
              result = length ? funcs[index].apply(this, args) : value;

          while (++index < length) {
            result = funcs[index].call(this, result);
          }
          return result;
        };
      });
    }

    /**
     * Creates a function that wraps `func` to invoke it with optional `this`
     * binding of `thisArg`, partial application, and currying.
     *
     * @private
     * @param {Function|string} func The function or method name to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to
     *  the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [partialsRight] The arguments to append to those provided
     *  to the new function.
     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {
      var isAry = bitmask & WRAP_ARY_FLAG,
          isBind = bitmask & WRAP_BIND_FLAG,
          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,
          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),
          isFlip = bitmask & WRAP_FLIP_FLAG,
          Ctor = isBindKey ? undefined : createCtor(func);

      function wrapper() {
        var length = arguments.length,
            args = Array(length),
            index = length;

        while (index--) {
          args[index] = arguments[index];
        }
        if (isCurried) {
          var placeholder = getHolder(wrapper),
              holdersCount = countHolders(args, placeholder);
        }
        if (partials) {
          args = composeArgs(args, partials, holders, isCurried);
        }
        if (partialsRight) {
          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);
        }
        length -= holdersCount;
        if (isCurried && length < arity) {
          var newHolders = replaceHolders(args, placeholder);
          return createRecurry(
            func, bitmask, createHybrid, wrapper.placeholder, thisArg,
            args, newHolders, argPos, ary, arity - length
          );
        }
        var thisBinding = isBind ? thisArg : this,
            fn = isBindKey ? thisBinding[func] : func;

        length = args.length;
        if (argPos) {
          args = reorder(args, argPos);
        } else if (isFlip && length > 1) {
          args.reverse();
        }
        if (isAry && ary < length) {
          args.length = ary;
        }
        if (this && this !== root && this instanceof wrapper) {
          fn = Ctor || createCtor(fn);
        }
        return fn.apply(thisBinding, args);
      }
      return wrapper;
    }

    /**
     * Creates a function like `_.invertBy`.
     *
     * @private
     * @param {Function} setter The function to set accumulator values.
     * @param {Function} toIteratee The function to resolve iteratees.
     * @returns {Function} Returns the new inverter function.
     */
    function createInverter(setter, toIteratee) {
      return function(object, iteratee) {
        return baseInverter(object, setter, toIteratee(iteratee), {});
      };
    }

    /**
     * Creates a function that performs a mathematical operation on two values.
     *
     * @private
     * @param {Function} operator The function to perform the operation.
     * @param {number} [defaultValue] The value used for `undefined` arguments.
     * @returns {Function} Returns the new mathematical operation function.
     */
    function createMathOperation(operator, defaultValue) {
      return function(value, other) {
        var result;
        if (value === undefined && other === undefined) {
          return defaultValue;
        }
        if (value !== undefined) {
          result = value;
        }
        if (other !== undefined) {
          if (result === undefined) {
            return other;
          }
          if (typeof value == 'string' || typeof other == 'string') {
            value = baseToString(value);
            other = baseToString(other);
          } else {
            value = baseToNumber(value);
            other = baseToNumber(other);
          }
          result = operator(value, other);
        }
        return result;
      };
    }

    /**
     * Creates a function like `_.over`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over iteratees.
     * @returns {Function} Returns the new over function.
     */
    function createOver(arrayFunc) {
      return flatRest(function(iteratees) {
        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));
        return baseRest(function(args) {
          var thisArg = this;
          return arrayFunc(iteratees, function(iteratee) {
            return apply(iteratee, thisArg, args);
          });
        });
      });
    }

    /**
     * Creates the padding for `string` based on `length`. The `chars` string
     * is truncated if the number of characters exceeds `length`.
     *
     * @private
     * @param {number} length The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padding for `string`.
     */
    function createPadding(length, chars) {
      chars = chars === undefined ? ' ' : baseToString(chars);

      var charsLength = chars.length;
      if (charsLength < 2) {
        return charsLength ? baseRepeat(chars, length) : chars;
      }
      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));
      return hasUnicode(chars)
        ? castSlice(stringToArray(result), 0, length).join('')
        : result.slice(0, length);
    }

    /**
     * Creates a function that wraps `func` to invoke it with the `this` binding
     * of `thisArg` and `partials` prepended to the arguments it receives.
     *
     * @private
     * @param {Function} func The function to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {Array} partials The arguments to prepend to those provided to
     *  the new function.
     * @returns {Function} Returns the new wrapped function.
     */
    function createPartial(func, bitmask, thisArg, partials) {
      var isBind = bitmask & WRAP_BIND_FLAG,
          Ctor = createCtor(func);

      function wrapper() {
        var argsIndex = -1,
            argsLength = arguments.length,
            leftIndex = -1,
            leftLength = partials.length,
            args = Array(leftLength + argsLength),
            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;

        while (++leftIndex < leftLength) {
          args[leftIndex] = partials[leftIndex];
        }
        while (argsLength--) {
          args[leftIndex++] = arguments[++argsIndex];
        }
        return apply(fn, isBind ? thisArg : this, args);
      }
      return wrapper;
    }

    /**
     * Creates a `_.range` or `_.rangeRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new range function.
     */
    function createRange(fromRight) {
      return function(start, end, step) {
        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {
          end = step = undefined;
        }
        // Ensure the sign of `-0` is preserved.
        start = toFinite(start);
        if (end === undefined) {
          end = start;
          start = 0;
        } else {
          end = toFinite(end);
        }
        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);
        return baseRange(start, end, step, fromRight);
      };
    }

    /**
     * Creates a function that performs a relational operation on two values.
     *
     * @private
     * @param {Function} operator The function to perform the operation.
     * @returns {Function} Returns the new relational operation function.
     */
    function createRelationalOperation(operator) {
      return function(value, other) {
        if (!(typeof value == 'string' && typeof other == 'string')) {
          value = toNumber(value);
          other = toNumber(other);
        }
        return operator(value, other);
      };
    }

    /**
     * Creates a function that wraps `func` to continue currying.
     *
     * @private
     * @param {Function} func The function to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {Function} wrapFunc The function to create the `func` wrapper.
     * @param {*} placeholder The placeholder value.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to
     *  the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {
      var isCurry = bitmask & WRAP_CURRY_FLAG,
          newHolders = isCurry ? holders : undefined,
          newHoldersRight = isCurry ? undefined : holders,
          newPartials = isCurry ? partials : undefined,
          newPartialsRight = isCurry ? undefined : partials;

      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);
      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);

      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {
        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);
      }
      var newData = [
        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,
        newHoldersRight, argPos, ary, arity
      ];

      var result = wrapFunc.apply(undefined, newData);
      if (isLaziable(func)) {
        setData(result, newData);
      }
      result.placeholder = placeholder;
      return setWrapToString(result, func, bitmask);
    }

    /**
     * Creates a function like `_.round`.
     *
     * @private
     * @param {string} methodName The name of the `Math` method to use when rounding.
     * @returns {Function} Returns the new round function.
     */
    function createRound(methodName) {
      var func = Math[methodName];
      return function(number, precision) {
        number = toNumber(number);
        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);
        if (precision && nativeIsFinite(number)) {
          // Shift with exponential notation to avoid floating-point issues.
          // See [MDN](https://mdn.io/round#Examples) for more details.
          var pair = (toString(number) + 'e').split('e'),
              value = func(pair[0] + 'e' + (+pair[1] + precision));

          pair = (toString(value) + 'e').split('e');
          return +(pair[0] + 'e' + (+pair[1] - precision));
        }
        return func(number);
      };
    }

    /**
     * Creates a set object of `values`.
     *
     * @private
     * @param {Array} values The values to add to the set.
     * @returns {Object} Returns the new set.
     */
    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {
      return new Set(values);
    };

    /**
     * Creates a `_.toPairs` or `_.toPairsIn` function.
     *
     * @private
     * @param {Function} keysFunc The function to get the keys of a given object.
     * @returns {Function} Returns the new pairs function.
     */
    function createToPairs(keysFunc) {
      return function(object) {
        var tag = getTag(object);
        if (tag == mapTag) {
          return mapToArray(object);
        }
        if (tag == setTag) {
          return setToPairs(object);
        }
        return baseToPairs(object, keysFunc(object));
      };
    }

    /**
     * Creates a function that either curries or invokes `func` with optional
     * `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to wrap.
     * @param {number} bitmask The bitmask flags.
     *    1 - `_.bind`
     *    2 - `_.bindKey`
     *    4 - `_.curry` or `_.curryRight` of a bound function
     *    8 - `_.curry`
     *   16 - `_.curryRight`
     *   32 - `_.partial`
     *   64 - `_.partialRight`
     *  128 - `_.rearg`
     *  256 - `_.ary`
     *  512 - `_.flip`
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to be partially applied.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */
    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {
      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;
      if (!isBindKey && typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var length = partials ? partials.length : 0;
      if (!length) {
        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);
        partials = holders = undefined;
      }
      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);
      arity = arity === undefined ? arity : toInteger(arity);
      length -= holders ? holders.length : 0;

      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {
        var partialsRight = partials,
            holdersRight = holders;

        partials = holders = undefined;
      }
      var data = isBindKey ? undefined : getData(func);

      var newData = [
        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,
        argPos, ary, arity
      ];

      if (data) {
        mergeData(newData, data);
      }
      func = newData[0];
      bitmask = newData[1];
      thisArg = newData[2];
      partials = newData[3];
      holders = newData[4];
      arity = newData[9] = newData[9] === undefined
        ? (isBindKey ? 0 : func.length)
        : nativeMax(newData[9] - length, 0);

      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {
        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);
      }
      if (!bitmask || bitmask == WRAP_BIND_FLAG) {
        var result = createBind(func, bitmask, thisArg);
      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {
        result = createCurry(func, bitmask, arity);
      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {
        result = createPartial(func, bitmask, thisArg, partials);
      } else {
        result = createHybrid.apply(undefined, newData);
      }
      var setter = data ? baseSetData : setData;
      return setWrapToString(setter(result, newData), func, bitmask);
    }

    /**
     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties
     * of source objects to the destination object for all destination properties
     * that resolve to `undefined`.
     *
     * @private
     * @param {*} objValue The destination value.
     * @param {*} srcValue The source value.
     * @param {string} key The key of the property to assign.
     * @param {Object} object The parent object of `objValue`.
     * @returns {*} Returns the value to assign.
     */
    function customDefaultsAssignIn(objValue, srcValue, key, object) {
      if (objValue === undefined ||
          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {
        return srcValue;
      }
      return objValue;
    }

    /**
     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source
     * objects into destination objects that are passed thru.
     *
     * @private
     * @param {*} objValue The destination value.
     * @param {*} srcValue The source value.
     * @param {string} key The key of the property to merge.
     * @param {Object} object The parent object of `objValue`.
     * @param {Object} source The parent object of `srcValue`.
     * @param {Object} [stack] Tracks traversed source values and their merged
     *  counterparts.
     * @returns {*} Returns the value to assign.
     */
    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {
      if (isObject(objValue) && isObject(srcValue)) {
        // Recursively merge objects and arrays (susceptible to call stack limits).
        stack.set(srcValue, objValue);
        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);
        stack['delete'](srcValue);
      }
      return objValue;
    }

    /**
     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain
     * objects.
     *
     * @private
     * @param {*} value The value to inspect.
     * @param {string} key The key of the property to inspect.
     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.
     */
    function customOmitClone(value) {
      return isPlainObject(value) ? undefined : value;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for arrays with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Array} array The array to compare.
     * @param {Array} other The other array to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `array` and `other` objects.
     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
     */
    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
          arrLength = array.length,
          othLength = other.length;

      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
        return false;
      }
      // Assume cyclic values are equal.
      var stacked = stack.get(array);
      if (stacked && stack.get(other)) {
        return stacked == other;
      }
      var index = -1,
          result = true,
          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;

      stack.set(array, other);
      stack.set(other, array);

      // Ignore non-index properties.
      while (++index < arrLength) {
        var arrValue = array[index],
            othValue = other[index];

        if (customizer) {
          var compared = isPartial
            ? customizer(othValue, arrValue, index, other, array, stack)
            : customizer(arrValue, othValue, index, array, other, stack);
        }
        if (compared !== undefined) {
          if (compared) {
            continue;
          }
          result = false;
          break;
        }
        // Recursively compare arrays (susceptible to call stack limits).
        if (seen) {
          if (!arraySome(other, function(othValue, othIndex) {
                if (!cacheHas(seen, othIndex) &&
                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
                  return seen.push(othIndex);
                }
              })) {
            result = false;
            break;
          }
        } else if (!(
              arrValue === othValue ||
                equalFunc(arrValue, othValue, bitmask, customizer, stack)
            )) {
          result = false;
          break;
        }
      }
      stack['delete'](array);
      stack['delete'](other);
      return result;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for comparing objects of
     * the same `toStringTag`.
     *
     * **Note:** This function only supports comparing values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {string} tag The `toStringTag` of the objects to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
      switch (tag) {
        case dataViewTag:
          if ((object.byteLength != other.byteLength) ||
              (object.byteOffset != other.byteOffset)) {
            return false;
          }
          object = object.buffer;
          other = other.buffer;

        case arrayBufferTag:
          if ((object.byteLength != other.byteLength) ||
              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
            return false;
          }
          return true;

        case boolTag:
        case dateTag:
        case numberTag:
          // Coerce booleans to `1` or `0` and dates to milliseconds.
          // Invalid dates are coerced to `NaN`.
          return eq(+object, +other);

        case errorTag:
          return object.name == other.name && object.message == other.message;

        case regexpTag:
        case stringTag:
          // Coerce regexes to strings and treat strings, primitives and objects,
          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring
          // for more details.
          return object == (other + '');

        case mapTag:
          var convert = mapToArray;

        case setTag:
          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
          convert || (convert = setToArray);

          if (object.size != other.size && !isPartial) {
            return false;
          }
          // Assume cyclic values are equal.
          var stacked = stack.get(object);
          if (stacked) {
            return stacked == other;
          }
          bitmask |= COMPARE_UNORDERED_FLAG;

          // Recursively compare objects (susceptible to call stack limits).
          stack.set(object, other);
          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
          stack['delete'](object);
          return result;

        case symbolTag:
          if (symbolValueOf) {
            return symbolValueOf.call(object) == symbolValueOf.call(other);
          }
      }
      return false;
    }

    /**
     * A specialized version of `baseIsEqualDeep` for objects with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */
    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
          objProps = getAllKeys(object),
          objLength = objProps.length,
          othProps = getAllKeys(other),
          othLength = othProps.length;

      if (objLength != othLength && !isPartial) {
        return false;
      }
      var index = objLength;
      while (index--) {
        var key = objProps[index];
        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
          return false;
        }
      }
      // Assume cyclic values are equal.
      var stacked = stack.get(object);
      if (stacked && stack.get(other)) {
        return stacked == other;
      }
      var result = true;
      stack.set(object, other);
      stack.set(other, object);

      var skipCtor = isPartial;
      while (++index < objLength) {
        key = objProps[index];
        var objValue = object[key],
            othValue = other[key];

        if (customizer) {
          var compared = isPartial
            ? customizer(othValue, objValue, key, other, object, stack)
            : customizer(objValue, othValue, key, object, other, stack);
        }
        // Recursively compare objects (susceptible to call stack limits).
        if (!(compared === undefined
              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))
              : compared
            )) {
          result = false;
          break;
        }
        skipCtor || (skipCtor = key == 'constructor');
      }
      if (result && !skipCtor) {
        var objCtor = object.constructor,
            othCtor = other.constructor;

        // Non `Object` object instances with different constructors are not equal.
        if (objCtor != othCtor &&
            ('constructor' in object && 'constructor' in other) &&
            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
              typeof othCtor == 'function' && othCtor instanceof othCtor)) {
          result = false;
        }
      }
      stack['delete'](object);
      stack['delete'](other);
      return result;
    }

    /**
     * A specialized version of `baseRest` which flattens the rest array.
     *
     * @private
     * @param {Function} func The function to apply a rest parameter to.
     * @returns {Function} Returns the new function.
     */
    function flatRest(func) {
      return setToString(overRest(func, undefined, flatten), func + '');
    }

    /**
     * Creates an array of own enumerable property names and symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names and symbols.
     */
    function getAllKeys(object) {
      return baseGetAllKeys(object, keys, getSymbols);
    }

    /**
     * Creates an array of own and inherited enumerable property names and
     * symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names and symbols.
     */
    function getAllKeysIn(object) {
      return baseGetAllKeys(object, keysIn, getSymbolsIn);
    }

    /**
     * Gets metadata for `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {*} Returns the metadata for `func`.
     */
    var getData = !metaMap ? noop : function(func) {
      return metaMap.get(func);
    };

    /**
     * Gets the name of `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {string} Returns the function name.
     */
    function getFuncName(func) {
      var result = (func.name + ''),
          array = realNames[result],
          length = hasOwnProperty.call(realNames, result) ? array.length : 0;

      while (length--) {
        var data = array[length],
            otherFunc = data.func;
        if (otherFunc == null || otherFunc == func) {
          return data.name;
        }
      }
      return result;
    }

    /**
     * Gets the argument placeholder value for `func`.
     *
     * @private
     * @param {Function} func The function to inspect.
     * @returns {*} Returns the placeholder value.
     */
    function getHolder(func) {
      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;
      return object.placeholder;
    }

    /**
     * Gets the appropriate "iteratee" function. If `_.iteratee` is customized,
     * this function returns the custom method, otherwise it returns `baseIteratee`.
     * If arguments are provided, the chosen function is invoked with them and
     * its result is returned.
     *
     * @private
     * @param {*} [value] The value to convert to an iteratee.
     * @param {number} [arity] The arity of the created iteratee.
     * @returns {Function} Returns the chosen function or its result.
     */
    function getIteratee() {
      var result = lodash.iteratee || iteratee;
      result = result === iteratee ? baseIteratee : result;
      return arguments.length ? result(arguments[0], arguments[1]) : result;
    }

    /**
     * Gets the data for `map`.
     *
     * @private
     * @param {Object} map The map to query.
     * @param {string} key The reference key.
     * @returns {*} Returns the map data.
     */
    function getMapData(map, key) {
      var data = map.__data__;
      return isKeyable(key)
        ? data[typeof key == 'string' ? 'string' : 'hash']
        : data.map;
    }

    /**
     * Gets the property names, values, and compare flags of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the match data of `object`.
     */
    function getMatchData(object) {
      var result = keys(object),
          length = result.length;

      while (length--) {
        var key = result[length],
            value = object[key];

        result[length] = [key, value, isStrictComparable(value)];
      }
      return result;
    }

    /**
     * Gets the native function at `key` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the method to get.
     * @returns {*} Returns the function if it's native, else `undefined`.
     */
    function getNative(object, key) {
      var value = getValue(object, key);
      return baseIsNative(value) ? value : undefined;
    }

    /**
     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the raw `toStringTag`.
     */
    function getRawTag(value) {
      var isOwn = hasOwnProperty.call(value, symToStringTag),
          tag = value[symToStringTag];

      try {
        value[symToStringTag] = undefined;
        var unmasked = true;
      } catch (e) {}

      var result = nativeObjectToString.call(value);
      if (unmasked) {
        if (isOwn) {
          value[symToStringTag] = tag;
        } else {
          delete value[symToStringTag];
        }
      }
      return result;
    }

    /**
     * Creates an array of the own enumerable symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of symbols.
     */
    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
      if (object == null) {
        return [];
      }
      object = Object(object);
      return arrayFilter(nativeGetSymbols(object), function(symbol) {
        return propertyIsEnumerable.call(object, symbol);
      });
    };

    /**
     * Creates an array of the own and inherited enumerable symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of symbols.
     */
    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {
      var result = [];
      while (object) {
        arrayPush(result, getSymbols(object));
        object = getPrototype(object);
      }
      return result;
    };

    /**
     * Gets the `toStringTag` of `value`.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the `toStringTag`.
     */
    var getTag = baseGetTag;

    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.
    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||
        (Map && getTag(new Map) != mapTag) ||
        (Promise && getTag(Promise.resolve()) != promiseTag) ||
        (Set && getTag(new Set) != setTag) ||
        (WeakMap && getTag(new WeakMap) != weakMapTag)) {
      getTag = function(value) {
        var result = baseGetTag(value),
            Ctor = result == objectTag ? value.constructor : undefined,
            ctorString = Ctor ? toSource(Ctor) : '';

        if (ctorString) {
          switch (ctorString) {
            case dataViewCtorString: return dataViewTag;
            case mapCtorString: return mapTag;
            case promiseCtorString: return promiseTag;
            case setCtorString: return setTag;
            case weakMapCtorString: return weakMapTag;
          }
        }
        return result;
      };
    }

    /**
     * Gets the view, applying any `transforms` to the `start` and `end` positions.
     *
     * @private
     * @param {number} start The start of the view.
     * @param {number} end The end of the view.
     * @param {Array} transforms The transformations to apply to the view.
     * @returns {Object} Returns an object containing the `start` and `end`
     *  positions of the view.
     */
    function getView(start, end, transforms) {
      var index = -1,
          length = transforms.length;

      while (++index < length) {
        var data = transforms[index],
            size = data.size;

        switch (data.type) {
          case 'drop':      start += size; break;
          case 'dropRight': end -= size; break;
          case 'take':      end = nativeMin(end, start + size); break;
          case 'takeRight': start = nativeMax(start, end - size); break;
        }
      }
      return { 'start': start, 'end': end };
    }

    /**
     * Extracts wrapper details from the `source` body comment.
     *
     * @private
     * @param {string} source The source to inspect.
     * @returns {Array} Returns the wrapper details.
     */
    function getWrapDetails(source) {
      var match = source.match(reWrapDetails);
      return match ? match[1].split(reSplitDetails) : [];
    }

    /**
     * Checks if `path` exists on `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @param {Function} hasFunc The function to check properties.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     */
    function hasPath(object, path, hasFunc) {
      path = castPath(path, object);

      var index = -1,
          length = path.length,
          result = false;

      while (++index < length) {
        var key = toKey(path[index]);
        if (!(result = object != null && hasFunc(object, key))) {
          break;
        }
        object = object[key];
      }
      if (result || ++index != length) {
        return result;
      }
      length = object == null ? 0 : object.length;
      return !!length && isLength(length) && isIndex(key, length) &&
        (isArray(object) || isArguments(object));
    }

    /**
     * Initializes an array clone.
     *
     * @private
     * @param {Array} array The array to clone.
     * @returns {Array} Returns the initialized clone.
     */
    function initCloneArray(array) {
      var length = array.length,
          result = new array.constructor(length);

      // Add properties assigned by `RegExp#exec`.
      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
        result.index = array.index;
        result.input = array.input;
      }
      return result;
    }

    /**
     * Initializes an object clone.
     *
     * @private
     * @param {Object} object The object to clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneObject(object) {
      return (typeof object.constructor == 'function' && !isPrototype(object))
        ? baseCreate(getPrototype(object))
        : {};
    }

    /**
     * Initializes an object clone based on its `toStringTag`.
     *
     * **Note:** This function only supports cloning values with tags of
     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.
     *
     * @private
     * @param {Object} object The object to clone.
     * @param {string} tag The `toStringTag` of the object to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the initialized clone.
     */
    function initCloneByTag(object, tag, isDeep) {
      var Ctor = object.constructor;
      switch (tag) {
        case arrayBufferTag:
          return cloneArrayBuffer(object);

        case boolTag:
        case dateTag:
          return new Ctor(+object);

        case dataViewTag:
          return cloneDataView(object, isDeep);

        case float32Tag: case float64Tag:
        case int8Tag: case int16Tag: case int32Tag:
        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:
          return cloneTypedArray(object, isDeep);

        case mapTag:
          return new Ctor;

        case numberTag:
        case stringTag:
          return new Ctor(object);

        case regexpTag:
          return cloneRegExp(object);

        case setTag:
          return new Ctor;

        case symbolTag:
          return cloneSymbol(object);
      }
    }

    /**
     * Inserts wrapper `details` in a comment at the top of the `source` body.
     *
     * @private
     * @param {string} source The source to modify.
     * @returns {Array} details The details to insert.
     * @returns {string} Returns the modified source.
     */
    function insertWrapDetails(source, details) {
      var length = details.length;
      if (!length) {
        return source;
      }
      var lastIndex = length - 1;
      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];
      details = details.join(length > 2 ? ', ' : ' ');
      return source.replace(reWrapComment, '{\n/* [wrapped with ' + details + '] */\n');
    }

    /**
     * Checks if `value` is a flattenable `arguments` object or array.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.
     */
    function isFlattenable(value) {
      return isArray(value) || isArguments(value) ||
        !!(spreadableSymbol && value && value[spreadableSymbol]);
    }

    /**
     * Checks if `value` is a valid array-like index.
     *
     * @private
     * @param {*} value The value to check.
     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
     */
    function isIndex(value, length) {
      var type = typeof value;
      length = length == null ? MAX_SAFE_INTEGER : length;

      return !!length &&
        (type == 'number' ||
          (type != 'symbol' && reIsUint.test(value))) &&
            (value > -1 && value % 1 == 0 && value < length);
    }

    /**
     * Checks if the given arguments are from an iteratee call.
     *
     * @private
     * @param {*} value The potential iteratee value argument.
     * @param {*} index The potential iteratee index or key argument.
     * @param {*} object The potential iteratee object argument.
     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
     *  else `false`.
     */
    function isIterateeCall(value, index, object) {
      if (!isObject(object)) {
        return false;
      }
      var type = typeof index;
      if (type == 'number'
            ? (isArrayLike(object) && isIndex(index, object.length))
            : (type == 'string' && index in object)
          ) {
        return eq(object[index], value);
      }
      return false;
    }

    /**
     * Checks if `value` is a property name and not a property path.
     *
     * @private
     * @param {*} value The value to check.
     * @param {Object} [object] The object to query keys on.
     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
     */
    function isKey(value, object) {
      if (isArray(value)) {
        return false;
      }
      var type = typeof value;
      if (type == 'number' || type == 'symbol' || type == 'boolean' ||
          value == null || isSymbol(value)) {
        return true;
      }
      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||
        (object != null && value in Object(object));
    }

    /**
     * Checks if `value` is suitable for use as unique object key.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
     */
    function isKeyable(value) {
      var type = typeof value;
      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
        ? (value !== '__proto__')
        : (value === null);
    }

    /**
     * Checks if `func` has a lazy counterpart.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,
     *  else `false`.
     */
    function isLaziable(func) {
      var funcName = getFuncName(func),
          other = lodash[funcName];

      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {
        return false;
      }
      if (func === other) {
        return true;
      }
      var data = getData(other);
      return !!data && func === data[0];
    }

    /**
     * Checks if `func` has its source masked.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` is masked, else `false`.
     */
    function isMasked(func) {
      return !!maskSrcKey && (maskSrcKey in func);
    }

    /**
     * Checks if `func` is capable of being masked.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.
     */
    var isMaskable = coreJsData ? isFunction : stubFalse;

    /**
     * Checks if `value` is likely a prototype object.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
     */
    function isPrototype(value) {
      var Ctor = value && value.constructor,
          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

      return value === proto;
    }

    /**
     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` if suitable for strict
     *  equality comparisons, else `false`.
     */
    function isStrictComparable(value) {
      return value === value && !isObject(value);
    }

    /**
     * A specialized version of `matchesProperty` for source values suitable
     * for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     */
    function matchesStrictComparable(key, srcValue) {
      return function(object) {
        if (object == null) {
          return false;
        }
        return object[key] === srcValue &&
          (srcValue !== undefined || (key in Object(object)));
      };
    }

    /**
     * A specialized version of `_.memoize` which clears the memoized function's
     * cache when it exceeds `MAX_MEMOIZE_SIZE`.
     *
     * @private
     * @param {Function} func The function to have its output memoized.
     * @returns {Function} Returns the new memoized function.
     */
    function memoizeCapped(func) {
      var result = memoize(func, function(key) {
        if (cache.size === MAX_MEMOIZE_SIZE) {
          cache.clear();
        }
        return key;
      });

      var cache = result.cache;
      return result;
    }

    /**
     * Merges the function metadata of `source` into `data`.
     *
     * Merging metadata reduces the number of wrappers used to invoke a function.
     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`
     * may be applied regardless of execution order. Methods like `_.ary` and
     * `_.rearg` modify function arguments, making the order in which they are
     * executed important, preventing the merging of metadata. However, we make
     * an exception for a safe combined case where curried functions have `_.ary`
     * and or `_.rearg` applied.
     *
     * @private
     * @param {Array} data The destination metadata.
     * @param {Array} source The source metadata.
     * @returns {Array} Returns `data`.
     */
    function mergeData(data, source) {
      var bitmask = data[1],
          srcBitmask = source[1],
          newBitmask = bitmask | srcBitmask,
          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);

      var isCombo =
        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||
        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||
        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));

      // Exit early if metadata can't be merged.
      if (!(isCommon || isCombo)) {
        return data;
      }
      // Use source `thisArg` if available.
      if (srcBitmask & WRAP_BIND_FLAG) {
        data[2] = source[2];
        // Set when currying a bound function.
        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;
      }
      // Compose partial arguments.
      var value = source[3];
      if (value) {
        var partials = data[3];
        data[3] = partials ? composeArgs(partials, value, source[4]) : value;
        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];
      }
      // Compose partial right arguments.
      value = source[5];
      if (value) {
        partials = data[5];
        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;
        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];
      }
      // Use source `argPos` if available.
      value = source[7];
      if (value) {
        data[7] = value;
      }
      // Use source `ary` if it's smaller.
      if (srcBitmask & WRAP_ARY_FLAG) {
        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
      }
      // Use source `arity` if one is not provided.
      if (data[9] == null) {
        data[9] = source[9];
      }
      // Use source `func` and merge bitmasks.
      data[0] = source[0];
      data[1] = newBitmask;

      return data;
    }

    /**
     * This function is like
     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
     * except that it includes inherited enumerable properties.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */
    function nativeKeysIn(object) {
      var result = [];
      if (object != null) {
        for (var key in Object(object)) {
          result.push(key);
        }
      }
      return result;
    }

    /**
     * Converts `value` to a string using `Object.prototype.toString`.
     *
     * @private
     * @param {*} value The value to convert.
     * @returns {string} Returns the converted string.
     */
    function objectToString(value) {
      return nativeObjectToString.call(value);
    }

    /**
     * A specialized version of `baseRest` which transforms the rest array.
     *
     * @private
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @param {Function} transform The rest array transform.
     * @returns {Function} Returns the new function.
     */
    function overRest(func, start, transform) {
      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);
      return function() {
        var args = arguments,
            index = -1,
            length = nativeMax(args.length - start, 0),
            array = Array(length);

        while (++index < length) {
          array[index] = args[start + index];
        }
        index = -1;
        var otherArgs = Array(start + 1);
        while (++index < start) {
          otherArgs[index] = args[index];
        }
        otherArgs[start] = transform(array);
        return apply(func, this, otherArgs);
      };
    }

    /**
     * Gets the parent value at `path` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} path The path to get the parent value of.
     * @returns {*} Returns the parent value.
     */
    function parent(object, path) {
      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
    }

    /**
     * Reorder `array` according to the specified indexes where the element at
     * the first index is assigned as the first element, the element at
     * the second index is assigned as the second element, and so on.
     *
     * @private
     * @param {Array} array The array to reorder.
     * @param {Array} indexes The arranged array indexes.
     * @returns {Array} Returns `array`.
     */
    function reorder(array, indexes) {
      var arrLength = array.length,
          length = nativeMin(indexes.length, arrLength),
          oldArray = copyArray(array);

      while (length--) {
        var index = indexes[length];
        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;
      }
      return array;
    }

    /**
     * Gets the value at `key`, unless `key` is "__proto__" or "constructor".
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the property to get.
     * @returns {*} Returns the property value.
     */
    function safeGet(object, key) {
      if (key === 'constructor' && typeof object[key] === 'function') {
        return;
      }

      if (key == '__proto__') {
        return;
      }

      return object[key];
    }

    /**
     * Sets metadata for `func`.
     *
     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short
     * period of time, it will trip its breaker and transition to an identity
     * function to avoid garbage collection pauses in V8. See
     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)
     * for more details.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */
    var setData = shortOut(baseSetData);

    /**
     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).
     *
     * @private
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @returns {number|Object} Returns the timer id or timeout object.
     */
    var setTimeout = ctxSetTimeout || function(func, wait) {
      return root.setTimeout(func, wait);
    };

    /**
     * Sets the `toString` method of `func` to return `string`.
     *
     * @private
     * @param {Function} func The function to modify.
     * @param {Function} string The `toString` result.
     * @returns {Function} Returns `func`.
     */
    var setToString = shortOut(baseSetToString);

    /**
     * Sets the `toString` method of `wrapper` to mimic the source of `reference`
     * with wrapper details in a comment at the top of the source body.
     *
     * @private
     * @param {Function} wrapper The function to modify.
     * @param {Function} reference The reference function.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @returns {Function} Returns `wrapper`.
     */
    function setWrapToString(wrapper, reference, bitmask) {
      var source = (reference + '');
      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));
    }

    /**
     * Creates a function that'll short out and invoke `identity` instead
     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
     * milliseconds.
     *
     * @private
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new shortable function.
     */
    function shortOut(func) {
      var count = 0,
          lastCalled = 0;

      return function() {
        var stamp = nativeNow(),
            remaining = HOT_SPAN - (stamp - lastCalled);

        lastCalled = stamp;
        if (remaining > 0) {
          if (++count >= HOT_COUNT) {
            return arguments[0];
          }
        } else {
          count = 0;
        }
        return func.apply(undefined, arguments);
      };
    }

    /**
     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.
     *
     * @private
     * @param {Array} array The array to shuffle.
     * @param {number} [size=array.length] The size of `array`.
     * @returns {Array} Returns `array`.
     */
    function shuffleSelf(array, size) {
      var index = -1,
          length = array.length,
          lastIndex = length - 1;

      size = size === undefined ? length : size;
      while (++index < size) {
        var rand = baseRandom(index, lastIndex),
            value = array[rand];

        array[rand] = array[index];
        array[index] = value;
      }
      array.length = size;
      return array;
    }

    /**
     * Converts `string` to a property path array.
     *
     * @private
     * @param {string} string The string to convert.
     * @returns {Array} Returns the property path array.
     */
    var stringToPath = memoizeCapped(function(string) {
      var result = [];
      if (string.charCodeAt(0) === 46 /* . */) {
        result.push('');
      }
      string.replace(rePropName, function(match, number, quote, subString) {
        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));
      });
      return result;
    });

    /**
     * Converts `value` to a string key if it's not a string or symbol.
     *
     * @private
     * @param {*} value The value to inspect.
     * @returns {string|symbol} Returns the key.
     */
    function toKey(value) {
      if (typeof value == 'string' || isSymbol(value)) {
        return value;
      }
      var result = (value + '');
      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
    }

    /**
     * Converts `func` to its source code.
     *
     * @private
     * @param {Function} func The function to convert.
     * @returns {string} Returns the source code.
     */
    function toSource(func) {
      if (func != null) {
        try {
          return funcToString.call(func);
        } catch (e) {}
        try {
          return (func + '');
        } catch (e) {}
      }
      return '';
    }

    /**
     * Updates wrapper `details` based on `bitmask` flags.
     *
     * @private
     * @returns {Array} details The details to modify.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @returns {Array} Returns `details`.
     */
    function updateWrapDetails(details, bitmask) {
      arrayEach(wrapFlags, function(pair) {
        var value = '_.' + pair[0];
        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {
          details.push(value);
        }
      });
      return details.sort();
    }

    /**
     * Creates a clone of `wrapper`.
     *
     * @private
     * @param {Object} wrapper The wrapper to clone.
     * @returns {Object} Returns the cloned wrapper.
     */
    function wrapperClone(wrapper) {
      if (wrapper instanceof LazyWrapper) {
        return wrapper.clone();
      }
      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);
      result.__actions__ = copyArray(wrapper.__actions__);
      result.__index__  = wrapper.__index__;
      result.__values__ = wrapper.__values__;
      return result;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an array of elements split into groups the length of `size`.
     * If `array` can't be split evenly, the final chunk will be the remaining
     * elements.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to process.
     * @param {number} [size=1] The length of each chunk
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the new array of chunks.
     * @example
     *
     * _.chunk(['a', 'b', 'c', 'd'], 2);
     * // => [['a', 'b'], ['c', 'd']]
     *
     * _.chunk(['a', 'b', 'c', 'd'], 3);
     * // => [['a', 'b', 'c'], ['d']]
     */
    function chunk(array, size, guard) {
      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {
        size = 1;
      } else {
        size = nativeMax(toInteger(size), 0);
      }
      var length = array == null ? 0 : array.length;
      if (!length || size < 1) {
        return [];
      }
      var index = 0,
          resIndex = 0,
          result = Array(nativeCeil(length / size));

      while (index < length) {
        result[resIndex++] = baseSlice(array, index, (index += size));
      }
      return result;
    }

    /**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are falsey.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to compact.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */
    function compact(array) {
      var index = -1,
          length = array == null ? 0 : array.length,
          resIndex = 0,
          result = [];

      while (++index < length) {
        var value = array[index];
        if (value) {
          result[resIndex++] = value;
        }
      }
      return result;
    }

    /**
     * Creates a new array concatenating `array` with any additional arrays
     * and/or values.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to concatenate.
     * @param {...*} [values] The values to concatenate.
     * @returns {Array} Returns the new concatenated array.
     * @example
     *
     * var array = [1];
     * var other = _.concat(array, 2, [3], [[4]]);
     *
     * console.log(other);
     * // => [1, 2, 3, [4]]
     *
     * console.log(array);
     * // => [1]
     */
    function concat() {
      var length = arguments.length;
      if (!length) {
        return [];
      }
      var args = Array(length - 1),
          array = arguments[0],
          index = length;

      while (index--) {
        args[index - 1] = arguments[index];
      }
      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));
    }

    /**
     * Creates an array of `array` values not included in the other given arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons. The order and references of result values are
     * determined by the first array.
     *
     * **Note:** Unlike `_.pullAll`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @see _.without, _.xor
     * @example
     *
     * _.difference([2, 1], [2, 3]);
     * // => [1]
     */
    var difference = baseRest(function(array, values) {
      return isArrayLikeObject(array)
        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))
        : [];
    });

    /**
     * This method is like `_.difference` except that it accepts `iteratee` which
     * is invoked for each element of `array` and `values` to generate the criterion
     * by which they're compared. The order and references of result values are
     * determined by the first array. The iteratee is invoked with one argument:
     * (value).
     *
     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The values to exclude.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);
     * // => [1.2]
     *
     * // The `_.property` iteratee shorthand.
     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');
     * // => [{ 'x': 2 }]
     */
    var differenceBy = baseRest(function(array, values) {
      var iteratee = last(values);
      if (isArrayLikeObject(iteratee)) {
        iteratee = undefined;
      }
      return isArrayLikeObject(array)
        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))
        : [];
    });

    /**
     * This method is like `_.difference` except that it accepts `comparator`
     * which is invoked to compare elements of `array` to `values`. The order and
     * references of result values are determined by the first array. The comparator
     * is invoked with two arguments: (arrVal, othVal).
     *
     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The values to exclude.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
     *
     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);
     * // => [{ 'x': 2, 'y': 1 }]
     */
    var differenceWith = baseRest(function(array, values) {
      var comparator = last(values);
      if (isArrayLikeObject(comparator)) {
        comparator = undefined;
      }
      return isArrayLikeObject(array)
        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)
        : [];
    });

    /**
     * Creates a slice of `array` with `n` elements dropped from the beginning.
     *
     * @static
     * @memberOf _
     * @since 0.5.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.drop([1, 2, 3]);
     * // => [2, 3]
     *
     * _.drop([1, 2, 3], 2);
     * // => [3]
     *
     * _.drop([1, 2, 3], 5);
     * // => []
     *
     * _.drop([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function drop(array, n, guard) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return [];
      }
      n = (guard || n === undefined) ? 1 : toInteger(n);
      return baseSlice(array, n < 0 ? 0 : n, length);
    }

    /**
     * Creates a slice of `array` with `n` elements dropped from the end.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRight([1, 2, 3]);
     * // => [1, 2]
     *
     * _.dropRight([1, 2, 3], 2);
     * // => [1]
     *
     * _.dropRight([1, 2, 3], 5);
     * // => []
     *
     * _.dropRight([1, 2, 3], 0);
     * // => [1, 2, 3]
     */
    function dropRight(array, n, guard) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return [];
      }
      n = (guard || n === undefined) ? 1 : toInteger(n);
      n = length - n;
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the end.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * invoked with three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.dropRightWhile(users, function(o) { return !o.active; });
     * // => objects for ['barney']
     *
     * // The `_.matches` iteratee shorthand.
     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });
     * // => objects for ['barney', 'fred']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.dropRightWhile(users, ['active', false]);
     * // => objects for ['barney']
     *
     * // The `_.property` iteratee shorthand.
     * _.dropRightWhile(users, 'active');
     * // => objects for ['barney', 'fred', 'pebbles']
     */
    function dropRightWhile(array, predicate) {
      return (array && array.length)
        ? baseWhile(array, getIteratee(predicate, 3), true, true)
        : [];
    }

    /**
     * Creates a slice of `array` excluding elements dropped from the beginning.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * invoked with three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.dropWhile(users, function(o) { return !o.active; });
     * // => objects for ['pebbles']
     *
     * // The `_.matches` iteratee shorthand.
     * _.dropWhile(users, { 'user': 'barney', 'active': false });
     * // => objects for ['fred', 'pebbles']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.dropWhile(users, ['active', false]);
     * // => objects for ['pebbles']
     *
     * // The `_.property` iteratee shorthand.
     * _.dropWhile(users, 'active');
     * // => objects for ['barney', 'fred', 'pebbles']
     */
    function dropWhile(array, predicate) {
      return (array && array.length)
        ? baseWhile(array, getIteratee(predicate, 3), true)
        : [];
    }

    /**
     * Fills elements of `array` with `value` from `start` up to, but not
     * including, `end`.
     *
     * **Note:** This method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 3.2.0
     * @category Array
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.fill(array, 'a');
     * console.log(array);
     * // => ['a', 'a', 'a']
     *
     * _.fill(Array(3), 2);
     * // => [2, 2, 2]
     *
     * _.fill([4, 6, 8, 10], '*', 1, 3);
     * // => [4, '*', '*', 10]
     */
    function fill(array, value, start, end) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return [];
      }
      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
        start = 0;
        end = length;
      }
      return baseFill(array, value, start, end);
    }

    /**
     * This method is like `_.find` except that it returns the index of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * @static
     * @memberOf _
     * @since 1.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.findIndex(users, function(o) { return o.user == 'barney'; });
     * // => 0
     *
     * // The `_.matches` iteratee shorthand.
     * _.findIndex(users, { 'user': 'fred', 'active': false });
     * // => 1
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findIndex(users, ['active', false]);
     * // => 0
     *
     * // The `_.property` iteratee shorthand.
     * _.findIndex(users, 'active');
     * // => 2
     */
    function findIndex(array, predicate, fromIndex) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return -1;
      }
      var index = fromIndex == null ? 0 : toInteger(fromIndex);
      if (index < 0) {
        index = nativeMax(length + index, 0);
      }
      return baseFindIndex(array, getIteratee(predicate, 3), index);
    }

    /**
     * This method is like `_.findIndex` except that it iterates over elements
     * of `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });
     * // => 2
     *
     * // The `_.matches` iteratee shorthand.
     * _.findLastIndex(users, { 'user': 'barney', 'active': true });
     * // => 0
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findLastIndex(users, ['active', false]);
     * // => 2
     *
     * // The `_.property` iteratee shorthand.
     * _.findLastIndex(users, 'active');
     * // => 0
     */
    function findLastIndex(array, predicate, fromIndex) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return -1;
      }
      var index = length - 1;
      if (fromIndex !== undefined) {
        index = toInteger(fromIndex);
        index = fromIndex < 0
          ? nativeMax(length + index, 0)
          : nativeMin(index, length - 1);
      }
      return baseFindIndex(array, getIteratee(predicate, 3), index, true);
    }

    /**
     * Flattens `array` a single level deep.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flatten([1, [2, [3, [4]], 5]]);
     * // => [1, 2, [3, [4]], 5]
     */
    function flatten(array) {
      var length = array == null ? 0 : array.length;
      return length ? baseFlatten(array, 1) : [];
    }

    /**
     * Recursively flattens `array`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flattenDeep([1, [2, [3, [4]], 5]]);
     * // => [1, 2, 3, 4, 5]
     */
    function flattenDeep(array) {
      var length = array == null ? 0 : array.length;
      return length ? baseFlatten(array, INFINITY) : [];
    }

    /**
     * Recursively flatten `array` up to `depth` times.
     *
     * @static
     * @memberOf _
     * @since 4.4.0
     * @category Array
     * @param {Array} array The array to flatten.
     * @param {number} [depth=1] The maximum recursion depth.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * var array = [1, [2, [3, [4]], 5]];
     *
     * _.flattenDepth(array, 1);
     * // => [1, 2, [3, [4]], 5]
     *
     * _.flattenDepth(array, 2);
     * // => [1, 2, 3, [4], 5]
     */
    function flattenDepth(array, depth) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return [];
      }
      depth = depth === undefined ? 1 : toInteger(depth);
      return baseFlatten(array, depth);
    }

    /**
     * The inverse of `_.toPairs`; this method returns an object composed
     * from key-value `pairs`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} pairs The key-value pairs.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.fromPairs([['a', 1], ['b', 2]]);
     * // => { 'a': 1, 'b': 2 }
     */
    function fromPairs(pairs) {
      var index = -1,
          length = pairs == null ? 0 : pairs.length,
          result = {};

      while (++index < length) {
        var pair = pairs[index];
        result[pair[0]] = pair[1];
      }
      return result;
    }

    /**
     * Gets the first element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @alias first
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the first element of `array`.
     * @example
     *
     * _.head([1, 2, 3]);
     * // => 1
     *
     * _.head([]);
     * // => undefined
     */
    function head(array) {
      return (array && array.length) ? array[0] : undefined;
    }

    /**
     * Gets the index at which the first occurrence of `value` is found in `array`
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it's used as the
     * offset from the end of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.indexOf([1, 2, 1, 2], 2);
     * // => 1
     *
     * // Search from the `fromIndex`.
     * _.indexOf([1, 2, 1, 2], 2, 2);
     * // => 3
     */
    function indexOf(array, value, fromIndex) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return -1;
      }
      var index = fromIndex == null ? 0 : toInteger(fromIndex);
      if (index < 0) {
        index = nativeMax(length + index, 0);
      }
      return baseIndexOf(array, value, index);
    }

    /**
     * Gets all but the last element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     */
    function initial(array) {
      var length = array == null ? 0 : array.length;
      return length ? baseSlice(array, 0, -1) : [];
    }

    /**
     * Creates an array of unique values that are included in all given arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons. The order and references of result values are
     * determined by the first array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of intersecting values.
     * @example
     *
     * _.intersection([2, 1], [2, 3]);
     * // => [2]
     */
    var intersection = baseRest(function(arrays) {
      var mapped = arrayMap(arrays, castArrayLikeObject);
      return (mapped.length && mapped[0] === arrays[0])
        ? baseIntersection(mapped)
        : [];
    });

    /**
     * This method is like `_.intersection` except that it accepts `iteratee`
     * which is invoked for each element of each `arrays` to generate the criterion
     * by which they're compared. The order and references of result values are
     * determined by the first array. The iteratee is invoked with one argument:
     * (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns the new array of intersecting values.
     * @example
     *
     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);
     * // => [2.1]
     *
     * // The `_.property` iteratee shorthand.
     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }]
     */
    var intersectionBy = baseRest(function(arrays) {
      var iteratee = last(arrays),
          mapped = arrayMap(arrays, castArrayLikeObject);

      if (iteratee === last(mapped)) {
        iteratee = undefined;
      } else {
        mapped.pop();
      }
      return (mapped.length && mapped[0] === arrays[0])
        ? baseIntersection(mapped, getIteratee(iteratee, 2))
        : [];
    });

    /**
     * This method is like `_.intersection` except that it accepts `comparator`
     * which is invoked to compare elements of `arrays`. The order and references
     * of result values are determined by the first array. The comparator is
     * invoked with two arguments: (arrVal, othVal).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of intersecting values.
     * @example
     *
     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];
     *
     * _.intersectionWith(objects, others, _.isEqual);
     * // => [{ 'x': 1, 'y': 2 }]
     */
    var intersectionWith = baseRest(function(arrays) {
      var comparator = last(arrays),
          mapped = arrayMap(arrays, castArrayLikeObject);

      comparator = typeof comparator == 'function' ? comparator : undefined;
      if (comparator) {
        mapped.pop();
      }
      return (mapped.length && mapped[0] === arrays[0])
        ? baseIntersection(mapped, undefined, comparator)
        : [];
    });

    /**
     * Converts all elements in `array` into a string separated by `separator`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to convert.
     * @param {string} [separator=','] The element separator.
     * @returns {string} Returns the joined string.
     * @example
     *
     * _.join(['a', 'b', 'c'], '~');
     * // => 'a~b~c'
     */
    function join(array, separator) {
      return array == null ? '' : nativeJoin.call(array, separator);
    }

    /**
     * Gets the last element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the last element of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     */
    function last(array) {
      var length = array == null ? 0 : array.length;
      return length ? array[length - 1] : undefined;
    }

    /**
     * This method is like `_.indexOf` except that it iterates over elements of
     * `array` from right to left.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 1, 2], 2);
     * // => 3
     *
     * // Search from the `fromIndex`.
     * _.lastIndexOf([1, 2, 1, 2], 2, 2);
     * // => 1
     */
    function lastIndexOf(array, value, fromIndex) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return -1;
      }
      var index = length;
      if (fromIndex !== undefined) {
        index = toInteger(fromIndex);
        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
      }
      return value === value
        ? strictLastIndexOf(array, value, index)
        : baseFindIndex(array, baseIsNaN, index, true);
    }

    /**
     * Gets the element at index `n` of `array`. If `n` is negative, the nth
     * element from the end is returned.
     *
     * @static
     * @memberOf _
     * @since 4.11.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=0] The index of the element to return.
     * @returns {*} Returns the nth element of `array`.
     * @example
     *
     * var array = ['a', 'b', 'c', 'd'];
     *
     * _.nth(array, 1);
     * // => 'b'
     *
     * _.nth(array, -2);
     * // => 'c';
     */
    function nth(array, n) {
      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;
    }

    /**
     * Removes all given values from `array` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`
     * to remove elements from an array by predicate.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...*} [values] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];
     *
     * _.pull(array, 'a', 'c');
     * console.log(array);
     * // => ['b', 'b']
     */
    var pull = baseRest(pullAll);

    /**
     * This method is like `_.pull` except that it accepts an array of values to remove.
     *
     * **Note:** Unlike `_.difference`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];
     *
     * _.pullAll(array, ['a', 'c']);
     * console.log(array);
     * // => ['b', 'b']
     */
    function pullAll(array, values) {
      return (array && array.length && values && values.length)
        ? basePullAll(array, values)
        : array;
    }

    /**
     * This method is like `_.pullAll` except that it accepts `iteratee` which is
     * invoked for each element of `array` and `values` to generate the criterion
     * by which they're compared. The iteratee is invoked with one argument: (value).
     *
     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];
     *
     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');
     * console.log(array);
     * // => [{ 'x': 2 }]
     */
    function pullAllBy(array, values, iteratee) {
      return (array && array.length && values && values.length)
        ? basePullAll(array, values, getIteratee(iteratee, 2))
        : array;
    }

    /**
     * This method is like `_.pullAll` except that it accepts `comparator` which
     * is invoked to compare elements of `array` to `values`. The comparator is
     * invoked with two arguments: (arrVal, othVal).
     *
     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 4.6.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];
     *
     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);
     * console.log(array);
     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]
     */
    function pullAllWith(array, values, comparator) {
      return (array && array.length && values && values.length)
        ? basePullAll(array, values, undefined, comparator)
        : array;
    }

    /**
     * Removes elements from `array` corresponding to `indexes` and returns an
     * array of removed elements.
     *
     * **Note:** Unlike `_.at`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...(number|number[])} [indexes] The indexes of elements to remove.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = ['a', 'b', 'c', 'd'];
     * var pulled = _.pullAt(array, [1, 3]);
     *
     * console.log(array);
     * // => ['a', 'c']
     *
     * console.log(pulled);
     * // => ['b', 'd']
     */
    var pullAt = flatRest(function(array, indexes) {
      var length = array == null ? 0 : array.length,
          result = baseAt(array, indexes);

      basePullAt(array, arrayMap(indexes, function(index) {
        return isIndex(index, length) ? +index : index;
      }).sort(compareAscending));

      return result;
    });

    /**
     * Removes all elements from `array` that `predicate` returns truthy for
     * and returns an array of the removed elements. The predicate is invoked
     * with three arguments: (value, index, array).
     *
     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`
     * to pull elements from an array by value.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4];
     * var evens = _.remove(array, function(n) {
     *   return n % 2 == 0;
     * });
     *
     * console.log(array);
     * // => [1, 3]
     *
     * console.log(evens);
     * // => [2, 4]
     */
    function remove(array, predicate) {
      var result = [];
      if (!(array && array.length)) {
        return result;
      }
      var index = -1,
          indexes = [],
          length = array.length;

      predicate = getIteratee(predicate, 3);
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result.push(value);
          indexes.push(index);
        }
      }
      basePullAt(array, indexes);
      return result;
    }

    /**
     * Reverses `array` so that the first element becomes the last, the second
     * element becomes the second to last, and so on.
     *
     * **Note:** This method mutates `array` and is based on
     * [`Array#reverse`](https://mdn.io/Array/reverse).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.reverse(array);
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */
    function reverse(array) {
      return array == null ? array : nativeReverse.call(array);
    }

    /**
     * Creates a slice of `array` from `start` up to, but not including, `end`.
     *
     * **Note:** This method is used instead of
     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are
     * returned.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */
    function slice(array, start, end) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return [];
      }
      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
        start = 0;
        end = length;
      }
      else {
        start = start == null ? 0 : toInteger(start);
        end = end === undefined ? length : toInteger(end);
      }
      return baseSlice(array, start, end);
    }

    /**
     * Uses a binary search to determine the lowest index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([30, 50], 40);
     * // => 1
     */
    function sortedIndex(array, value) {
      return baseSortedIndex(array, value);
    }

    /**
     * This method is like `_.sortedIndex` except that it accepts `iteratee`
     * which is invoked for `value` and each element of `array` to compute their
     * sort ranking. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * var objects = [{ 'x': 4 }, { 'x': 5 }];
     *
     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });
     * // => 0
     *
     * // The `_.property` iteratee shorthand.
     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');
     * // => 0
     */
    function sortedIndexBy(array, value, iteratee) {
      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));
    }

    /**
     * This method is like `_.indexOf` except that it performs a binary
     * search on a sorted `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);
     * // => 1
     */
    function sortedIndexOf(array, value) {
      var length = array == null ? 0 : array.length;
      if (length) {
        var index = baseSortedIndex(array, value);
        if (index < length && eq(array[index], value)) {
          return index;
        }
      }
      return -1;
    }

    /**
     * This method is like `_.sortedIndex` except that it returns the highest
     * index at which `value` should be inserted into `array` in order to
     * maintain its sort order.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);
     * // => 4
     */
    function sortedLastIndex(array, value) {
      return baseSortedIndex(array, value, true);
    }

    /**
     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`
     * which is invoked for `value` and each element of `array` to compute their
     * sort ranking. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * var objects = [{ 'x': 4 }, { 'x': 5 }];
     *
     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });
     * // => 1
     *
     * // The `_.property` iteratee shorthand.
     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');
     * // => 1
     */
    function sortedLastIndexBy(array, value, iteratee) {
      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);
    }

    /**
     * This method is like `_.lastIndexOf` except that it performs a binary
     * search on a sorted `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);
     * // => 3
     */
    function sortedLastIndexOf(array, value) {
      var length = array == null ? 0 : array.length;
      if (length) {
        var index = baseSortedIndex(array, value, true) - 1;
        if (eq(array[index], value)) {
          return index;
        }
      }
      return -1;
    }

    /**
     * This method is like `_.uniq` except that it's designed and optimized
     * for sorted arrays.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.sortedUniq([1, 1, 2]);
     * // => [1, 2]
     */
    function sortedUniq(array) {
      return (array && array.length)
        ? baseSortedUniq(array)
        : [];
    }

    /**
     * This method is like `_.uniqBy` except that it's designed and optimized
     * for sorted arrays.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);
     * // => [1.1, 2.3]
     */
    function sortedUniqBy(array, iteratee) {
      return (array && array.length)
        ? baseSortedUniq(array, getIteratee(iteratee, 2))
        : [];
    }

    /**
     * Gets all but the first element of `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.tail([1, 2, 3]);
     * // => [2, 3]
     */
    function tail(array) {
      var length = array == null ? 0 : array.length;
      return length ? baseSlice(array, 1, length) : [];
    }

    /**
     * Creates a slice of `array` with `n` elements taken from the beginning.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.take([1, 2, 3]);
     * // => [1]
     *
     * _.take([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.take([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.take([1, 2, 3], 0);
     * // => []
     */
    function take(array, n, guard) {
      if (!(array && array.length)) {
        return [];
      }
      n = (guard || n === undefined) ? 1 : toInteger(n);
      return baseSlice(array, 0, n < 0 ? 0 : n);
    }

    /**
     * Creates a slice of `array` with `n` elements taken from the end.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRight([1, 2, 3]);
     * // => [3]
     *
     * _.takeRight([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.takeRight([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.takeRight([1, 2, 3], 0);
     * // => []
     */
    function takeRight(array, n, guard) {
      var length = array == null ? 0 : array.length;
      if (!length) {
        return [];
      }
      n = (guard || n === undefined) ? 1 : toInteger(n);
      n = length - n;
      return baseSlice(array, n < 0 ? 0 : n, length);
    }

    /**
     * Creates a slice of `array` with elements taken from the end. Elements are
     * taken until `predicate` returns falsey. The predicate is invoked with
     * three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.takeRightWhile(users, function(o) { return !o.active; });
     * // => objects for ['fred', 'pebbles']
     *
     * // The `_.matches` iteratee shorthand.
     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });
     * // => objects for ['pebbles']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.takeRightWhile(users, ['active', false]);
     * // => objects for ['fred', 'pebbles']
     *
     * // The `_.property` iteratee shorthand.
     * _.takeRightWhile(users, 'active');
     * // => []
     */
    function takeRightWhile(array, predicate) {
      return (array && array.length)
        ? baseWhile(array, getIteratee(predicate, 3), false, true)
        : [];
    }

    /**
     * Creates a slice of `array` with elements taken from the beginning. Elements
     * are taken until `predicate` returns falsey. The predicate is invoked with
     * three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.takeWhile(users, function(o) { return !o.active; });
     * // => objects for ['barney', 'fred']
     *
     * // The `_.matches` iteratee shorthand.
     * _.takeWhile(users, { 'user': 'barney', 'active': false });
     * // => objects for ['barney']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.takeWhile(users, ['active', false]);
     * // => objects for ['barney', 'fred']
     *
     * // The `_.property` iteratee shorthand.
     * _.takeWhile(users, 'active');
     * // => []
     */
    function takeWhile(array, predicate) {
      return (array && array.length)
        ? baseWhile(array, getIteratee(predicate, 3))
        : [];
    }

    /**
     * Creates an array of unique values, in order, from all given arrays using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * _.union([2], [1, 2]);
     * // => [2, 1]
     */
    var union = baseRest(function(arrays) {
      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));
    });

    /**
     * This method is like `_.union` except that it accepts `iteratee` which is
     * invoked for each element of each `arrays` to generate the criterion by
     * which uniqueness is computed. Result values are chosen from the first
     * array in which the value occurs. The iteratee is invoked with one argument:
     * (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * _.unionBy([2.1], [1.2, 2.3], Math.floor);
     * // => [2.1, 1.2]
     *
     * // The `_.property` iteratee shorthand.
     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    var unionBy = baseRest(function(arrays) {
      var iteratee = last(arrays);
      if (isArrayLikeObject(iteratee)) {
        iteratee = undefined;
      }
      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));
    });

    /**
     * This method is like `_.union` except that it accepts `comparator` which
     * is invoked to compare elements of `arrays`. Result values are chosen from
     * the first array in which the value occurs. The comparator is invoked
     * with two arguments: (arrVal, othVal).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];
     *
     * _.unionWith(objects, others, _.isEqual);
     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]
     */
    var unionWith = baseRest(function(arrays) {
      var comparator = last(arrays);
      comparator = typeof comparator == 'function' ? comparator : undefined;
      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);
    });

    /**
     * Creates a duplicate-free version of an array, using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons, in which only the first occurrence of each element
     * is kept. The order of result values is determined by the order they occur
     * in the array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.uniq([2, 1, 2]);
     * // => [2, 1]
     */
    function uniq(array) {
      return (array && array.length) ? baseUniq(array) : [];
    }

    /**
     * This method is like `_.uniq` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the criterion by which
     * uniqueness is computed. The order of result values is determined by the
     * order they occur in the array. The iteratee is invoked with one argument:
     * (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);
     * // => [2.1, 1.2]
     *
     * // The `_.property` iteratee shorthand.
     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */
    function uniqBy(array, iteratee) {
      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];
    }

    /**
     * This method is like `_.uniq` except that it accepts `comparator` which
     * is invoked to compare elements of `array`. The order of result values is
     * determined by the order they occur in the array.The comparator is invoked
     * with two arguments: (arrVal, othVal).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];
     *
     * _.uniqWith(objects, _.isEqual);
     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]
     */
    function uniqWith(array, comparator) {
      comparator = typeof comparator == 'function' ? comparator : undefined;
      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];
    }

    /**
     * This method is like `_.zip` except that it accepts an array of grouped
     * elements and creates an array regrouping the elements to their pre-zip
     * configuration.
     *
     * @static
     * @memberOf _
     * @since 1.2.0
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);
     * // => [['a', 1, true], ['b', 2, false]]
     *
     * _.unzip(zipped);
     * // => [['a', 'b'], [1, 2], [true, false]]
     */
    function unzip(array) {
      if (!(array && array.length)) {
        return [];
      }
      var length = 0;
      array = arrayFilter(array, function(group) {
        if (isArrayLikeObject(group)) {
          length = nativeMax(group.length, length);
          return true;
        }
      });
      return baseTimes(length, function(index) {
        return arrayMap(array, baseProperty(index));
      });
    }

    /**
     * This method is like `_.unzip` except that it accepts `iteratee` to specify
     * how regrouped values should be combined. The iteratee is invoked with the
     * elements of each group: (...group).
     *
     * @static
     * @memberOf _
     * @since 3.8.0
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @param {Function} [iteratee=_.identity] The function to combine
     *  regrouped values.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);
     * // => [[1, 10, 100], [2, 20, 200]]
     *
     * _.unzipWith(zipped, _.add);
     * // => [3, 30, 300]
     */
    function unzipWith(array, iteratee) {
      if (!(array && array.length)) {
        return [];
      }
      var result = unzip(array);
      if (iteratee == null) {
        return result;
      }
      return arrayMap(result, function(group) {
        return apply(iteratee, undefined, group);
      });
    }

    /**
     * Creates an array excluding all given values using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.pull`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...*} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @see _.difference, _.xor
     * @example
     *
     * _.without([2, 1, 2, 3], 1, 2);
     * // => [3]
     */
    var without = baseRest(function(array, values) {
      return isArrayLikeObject(array)
        ? baseDifference(array, values)
        : [];
    });

    /**
     * Creates an array of unique values that is the
     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)
     * of the given arrays. The order of result values is determined by the order
     * they occur in the arrays.
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of filtered values.
     * @see _.difference, _.without
     * @example
     *
     * _.xor([2, 1], [2, 3]);
     * // => [1, 3]
     */
    var xor = baseRest(function(arrays) {
      return baseXor(arrayFilter(arrays, isArrayLikeObject));
    });

    /**
     * This method is like `_.xor` except that it accepts `iteratee` which is
     * invoked for each element of each `arrays` to generate the criterion by
     * which by which they're compared. The order of result values is determined
     * by the order they occur in the arrays. The iteratee is invoked with one
     * argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);
     * // => [1.2, 3.4]
     *
     * // The `_.property` iteratee shorthand.
     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 2 }]
     */
    var xorBy = baseRest(function(arrays) {
      var iteratee = last(arrays);
      if (isArrayLikeObject(iteratee)) {
        iteratee = undefined;
      }
      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));
    });

    /**
     * This method is like `_.xor` except that it accepts `comparator` which is
     * invoked to compare elements of `arrays`. The order of result values is
     * determined by the order they occur in the arrays. The comparator is invoked
     * with two arguments: (arrVal, othVal).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];
     *
     * _.xorWith(objects, others, _.isEqual);
     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]
     */
    var xorWith = baseRest(function(arrays) {
      var comparator = last(arrays);
      comparator = typeof comparator == 'function' ? comparator : undefined;
      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);
    });

    /**
     * Creates an array of grouped elements, the first of which contains the
     * first elements of the given arrays, the second of which contains the
     * second elements of the given arrays, and so on.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zip(['a', 'b'], [1, 2], [true, false]);
     * // => [['a', 1, true], ['b', 2, false]]
     */
    var zip = baseRest(unzip);

    /**
     * This method is like `_.fromPairs` except that it accepts two arrays,
     * one of property identifiers and one of corresponding values.
     *
     * @static
     * @memberOf _
     * @since 0.4.0
     * @category Array
     * @param {Array} [props=[]] The property identifiers.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObject(['a', 'b'], [1, 2]);
     * // => { 'a': 1, 'b': 2 }
     */
    function zipObject(props, values) {
      return baseZipObject(props || [], values || [], assignValue);
    }

    /**
     * This method is like `_.zipObject` except that it supports property paths.
     *
     * @static
     * @memberOf _
     * @since 4.1.0
     * @category Array
     * @param {Array} [props=[]] The property identifiers.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);
     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }
     */
    function zipObjectDeep(props, values) {
      return baseZipObject(props || [], values || [], baseSet);
    }

    /**
     * This method is like `_.zip` except that it accepts `iteratee` to specify
     * how grouped values should be combined. The iteratee is invoked with the
     * elements of each group: (...group).
     *
     * @static
     * @memberOf _
     * @since 3.8.0
     * @category Array
     * @param {...Array} [arrays] The arrays to process.
     * @param {Function} [iteratee=_.identity] The function to combine
     *  grouped values.
     * @returns {Array} Returns the new array of grouped elements.
     * @example
     *
     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {
     *   return a + b + c;
     * });
     * // => [111, 222]
     */
    var zipWith = baseRest(function(arrays) {
      var length = arrays.length,
          iteratee = length > 1 ? arrays[length - 1] : undefined;

      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;
      return unzipWith(arrays, iteratee);
    });

    /*------------------------------------------------------------------------*/

    /**
     * Creates a `lodash` wrapper instance that wraps `value` with explicit method
     * chain sequences enabled. The result of such sequences must be unwrapped
     * with `_#value`.
     *
     * @static
     * @memberOf _
     * @since 1.3.0
     * @category Seq
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36 },
     *   { 'user': 'fred',    'age': 40 },
     *   { 'user': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _
     *   .chain(users)
     *   .sortBy('age')
     *   .map(function(o) {
     *     return o.user + ' is ' + o.age;
     *   })
     *   .head()
     *   .value();
     * // => 'pebbles is 1'
     */
    function chain(value) {
      var result = lodash(value);
      result.__chain__ = true;
      return result;
    }

    /**
     * This method invokes `interceptor` and returns `value`. The interceptor
     * is invoked with one argument; (value). The purpose of this method is to
     * "tap into" a method chain sequence in order to modify intermediate results.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Seq
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3])
     *  .tap(function(array) {
     *    // Mutate input array.
     *    array.pop();
     *  })
     *  .reverse()
     *  .value();
     * // => [2, 1]
     */
    function tap(value, interceptor) {
      interceptor(value);
      return value;
    }

    /**
     * This method is like `_.tap` except that it returns the result of `interceptor`.
     * The purpose of this method is to "pass thru" values replacing intermediate
     * results in a method chain sequence.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Seq
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns the result of `interceptor`.
     * @example
     *
     * _('  abc  ')
     *  .chain()
     *  .trim()
     *  .thru(function(value) {
     *    return [value];
     *  })
     *  .value();
     * // => ['abc']
     */
    function thru(value, interceptor) {
      return interceptor(value);
    }

    /**
     * This method is the wrapper version of `_.at`.
     *
     * @name at
     * @memberOf _
     * @since 1.0.0
     * @category Seq
     * @param {...(string|string[])} [paths] The property paths to pick.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };
     *
     * _(object).at(['a[0].b.c', 'a[1]']).value();
     * // => [3, 4]
     */
    var wrapperAt = flatRest(function(paths) {
      var length = paths.length,
          start = length ? paths[0] : 0,
          value = this.__wrapped__,
          interceptor = function(object) { return baseAt(object, paths); };

      if (length > 1 || this.__actions__.length ||
          !(value instanceof LazyWrapper) || !isIndex(start)) {
        return this.thru(interceptor);
      }
      value = value.slice(start, +start + (length ? 1 : 0));
      value.__actions__.push({
        'func': thru,
        'args': [interceptor],
        'thisArg': undefined
      });
      return new LodashWrapper(value, this.__chain__).thru(function(array) {
        if (length && !array.length) {
          array.push(undefined);
        }
        return array;
      });
    });

    /**
     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.
     *
     * @name chain
     * @memberOf _
     * @since 0.1.0
     * @category Seq
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // A sequence without explicit chaining.
     * _(users).head();
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // A sequence with explicit chaining.
     * _(users)
     *   .chain()
     *   .head()
     *   .pick('user')
     *   .value();
     * // => { 'user': 'barney' }
     */
    function wrapperChain() {
      return chain(this);
    }

    /**
     * Executes the chain sequence and returns the wrapped result.
     *
     * @name commit
     * @memberOf _
     * @since 3.2.0
     * @category Seq
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).push(3);
     *
     * console.log(array);
     * // => [1, 2]
     *
     * wrapped = wrapped.commit();
     * console.log(array);
     * // => [1, 2, 3]
     *
     * wrapped.last();
     * // => 3
     *
     * console.log(array);
     * // => [1, 2, 3]
     */
    function wrapperCommit() {
      return new LodashWrapper(this.value(), this.__chain__);
    }

    /**
     * Gets the next value on a wrapped object following the
     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).
     *
     * @name next
     * @memberOf _
     * @since 4.0.0
     * @category Seq
     * @returns {Object} Returns the next iterator value.
     * @example
     *
     * var wrapped = _([1, 2]);
     *
     * wrapped.next();
     * // => { 'done': false, 'value': 1 }
     *
     * wrapped.next();
     * // => { 'done': false, 'value': 2 }
     *
     * wrapped.next();
     * // => { 'done': true, 'value': undefined }
     */
    function wrapperNext() {
      if (this.__values__ === undefined) {
        this.__values__ = toArray(this.value());
      }
      var done = this.__index__ >= this.__values__.length,
          value = done ? undefined : this.__values__[this.__index__++];

      return { 'done': done, 'value': value };
    }

    /**
     * Enables the wrapper to be iterable.
     *
     * @name Symbol.iterator
     * @memberOf _
     * @since 4.0.0
     * @category Seq
     * @returns {Object} Returns the wrapper object.
     * @example
     *
     * var wrapped = _([1, 2]);
     *
     * wrapped[Symbol.iterator]() === wrapped;
     * // => true
     *
     * Array.from(wrapped);
     * // => [1, 2]
     */
    function wrapperToIterator() {
      return this;
    }

    /**
     * Creates a clone of the chain sequence planting `value` as the wrapped value.
     *
     * @name plant
     * @memberOf _
     * @since 3.2.0
     * @category Seq
     * @param {*} value The value to plant.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var wrapped = _([1, 2]).map(square);
     * var other = wrapped.plant([3, 4]);
     *
     * other.value();
     * // => [9, 16]
     *
     * wrapped.value();
     * // => [1, 4]
     */
    function wrapperPlant(value) {
      var result,
          parent = this;

      while (parent instanceof baseLodash) {
        var clone = wrapperClone(parent);
        clone.__index__ = 0;
        clone.__values__ = undefined;
        if (result) {
          previous.__wrapped__ = clone;
        } else {
          result = clone;
        }
        var previous = clone;
        parent = parent.__wrapped__;
      }
      previous.__wrapped__ = value;
      return result;
    }

    /**
     * This method is the wrapper version of `_.reverse`.
     *
     * **Note:** This method mutates the wrapped array.
     *
     * @name reverse
     * @memberOf _
     * @since 0.1.0
     * @category Seq
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _(array).reverse().value()
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */
    function wrapperReverse() {
      var value = this.__wrapped__;
      if (value instanceof LazyWrapper) {
        var wrapped = value;
        if (this.__actions__.length) {
          wrapped = new LazyWrapper(this);
        }
        wrapped = wrapped.reverse();
        wrapped.__actions__.push({
          'func': thru,
          'args': [reverse],
          'thisArg': undefined
        });
        return new LodashWrapper(wrapped, this.__chain__);
      }
      return this.thru(reverse);
    }

    /**
     * Executes the chain sequence to resolve the unwrapped value.
     *
     * @name value
     * @memberOf _
     * @since 0.1.0
     * @alias toJSON, valueOf
     * @category Seq
     * @returns {*} Returns the resolved unwrapped value.
     * @example
     *
     * _([1, 2, 3]).value();
     * // => [1, 2, 3]
     */
    function wrapperValue() {
      return baseWrapperValue(this.__wrapped__, this.__actions__);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` thru `iteratee`. The corresponding value of
     * each key is the number of times the key was returned by `iteratee`. The
     * iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 0.5.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.countBy([6.1, 4.2, 6.3], Math.floor);
     * // => { '4': 1, '6': 2 }
     *
     * // The `_.property` iteratee shorthand.
     * _.countBy(['one', 'two', 'three'], 'length');
     * // => { '3': 2, '5': 1 }
     */
    var countBy = createAggregator(function(result, value, key) {
      if (hasOwnProperty.call(result, key)) {
        ++result[key];
      } else {
        baseAssignValue(result, key, 1);
      }
    });

    /**
     * Checks if `predicate` returns truthy for **all** elements of `collection`.
     * Iteration is stopped once `predicate` returns falsey. The predicate is
     * invoked with three arguments: (value, index|key, collection).
     *
     * **Note:** This method returns `true` for
     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because
     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of
     * elements of empty collections.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes'], Boolean);
     * // => false
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.every(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.every(users, ['active', false]);
     * // => true
     *
     * // The `_.property` iteratee shorthand.
     * _.every(users, 'active');
     * // => false
     */
    function every(collection, predicate, guard) {
      var func = isArray(collection) ? arrayEvery : baseEvery;
      if (guard && isIterateeCall(collection, predicate, guard)) {
        predicate = undefined;
      }
      return func(collection, getIteratee(predicate, 3));
    }

    /**
     * Iterates over elements of `collection`, returning an array of all elements
     * `predicate` returns truthy for. The predicate is invoked with three
     * arguments: (value, index|key, collection).
     *
     * **Note:** Unlike `_.remove`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     * @see _.reject
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.filter(users, function(o) { return !o.active; });
     * // => objects for ['fred']
     *
     * // The `_.matches` iteratee shorthand.
     * _.filter(users, { 'age': 36, 'active': true });
     * // => objects for ['barney']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.filter(users, ['active', false]);
     * // => objects for ['fred']
     *
     * // The `_.property` iteratee shorthand.
     * _.filter(users, 'active');
     * // => objects for ['barney']
     */
    function filter(collection, predicate) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      return func(collection, getIteratee(predicate, 3));
    }

    /**
     * Iterates over elements of `collection`, returning the first element
     * `predicate` returns truthy for. The predicate is invoked with three
     * arguments: (value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': true },
     *   { 'user': 'fred',    'age': 40, 'active': false },
     *   { 'user': 'pebbles', 'age': 1,  'active': true }
     * ];
     *
     * _.find(users, function(o) { return o.age < 40; });
     * // => object for 'barney'
     *
     * // The `_.matches` iteratee shorthand.
     * _.find(users, { 'age': 1, 'active': true });
     * // => object for 'pebbles'
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.find(users, ['active', false]);
     * // => object for 'fred'
     *
     * // The `_.property` iteratee shorthand.
     * _.find(users, 'active');
     * // => object for 'barney'
     */
    var find = createFind(findIndex);

    /**
     * This method is like `_.find` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param {number} [fromIndex=collection.length-1] The index to search from.
     * @returns {*} Returns the matched element, else `undefined`.
     * @example
     *
     * _.findLast([1, 2, 3, 4], function(n) {
     *   return n % 2 == 1;
     * });
     * // => 3
     */
    var findLast = createFind(findLastIndex);

    /**
     * Creates a flattened array of values by running each element in `collection`
     * thru `iteratee` and flattening the mapped results. The iteratee is invoked
     * with three arguments: (value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * function duplicate(n) {
     *   return [n, n];
     * }
     *
     * _.flatMap([1, 2], duplicate);
     * // => [1, 1, 2, 2]
     */
    function flatMap(collection, iteratee) {
      return baseFlatten(map(collection, iteratee), 1);
    }

    /**
     * This method is like `_.flatMap` except that it recursively flattens the
     * mapped results.
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * function duplicate(n) {
     *   return [[[n, n]]];
     * }
     *
     * _.flatMapDeep([1, 2], duplicate);
     * // => [1, 1, 2, 2]
     */
    function flatMapDeep(collection, iteratee) {
      return baseFlatten(map(collection, iteratee), INFINITY);
    }

    /**
     * This method is like `_.flatMap` except that it recursively flattens the
     * mapped results up to `depth` times.
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {number} [depth=1] The maximum recursion depth.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * function duplicate(n) {
     *   return [[[n, n]]];
     * }
     *
     * _.flatMapDepth([1, 2], duplicate, 2);
     * // => [[1, 1], [2, 2]]
     */
    function flatMapDepth(collection, iteratee, depth) {
      depth = depth === undefined ? 1 : toInteger(depth);
      return baseFlatten(map(collection, iteratee), depth);
    }

    /**
     * Iterates over elements of `collection` and invokes `iteratee` for each element.
     * The iteratee is invoked with three arguments: (value, index|key, collection).
     * Iteratee functions may exit iteration early by explicitly returning `false`.
     *
     * **Note:** As with other "Collections" methods, objects with a "length"
     * property are iterated like arrays. To avoid this behavior use `_.forIn`
     * or `_.forOwn` for object iteration.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @alias each
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     * @see _.forEachRight
     * @example
     *
     * _.forEach([1, 2], function(value) {
     *   console.log(value);
     * });
     * // => Logs `1` then `2`.
     *
     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'a' then 'b' (iteration order is not guaranteed).
     */
    function forEach(collection, iteratee) {
      var func = isArray(collection) ? arrayEach : baseEach;
      return func(collection, getIteratee(iteratee, 3));
    }

    /**
     * This method is like `_.forEach` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @alias eachRight
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     * @see _.forEach
     * @example
     *
     * _.forEachRight([1, 2], function(value) {
     *   console.log(value);
     * });
     * // => Logs `2` then `1`.
     */
    function forEachRight(collection, iteratee) {
      var func = isArray(collection) ? arrayEachRight : baseEachRight;
      return func(collection, getIteratee(iteratee, 3));
    }

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` thru `iteratee`. The order of grouped values
     * is determined by the order they occur in `collection`. The corresponding
     * value of each key is an array of elements responsible for generating the
     * key. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([6.1, 4.2, 6.3], Math.floor);
     * // => { '4': [4.2], '6': [6.1, 6.3] }
     *
     * // The `_.property` iteratee shorthand.
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */
    var groupBy = createAggregator(function(result, value, key) {
      if (hasOwnProperty.call(result, key)) {
        result[key].push(value);
      } else {
        baseAssignValue(result, key, [value]);
      }
    });

    /**
     * Checks if `value` is in `collection`. If `collection` is a string, it's
     * checked for a substring of `value`, otherwise
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * is used for equality comparisons. If `fromIndex` is negative, it's used as
     * the offset from the end of `collection`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
     * @returns {boolean} Returns `true` if `value` is found, else `false`.
     * @example
     *
     * _.includes([1, 2, 3], 1);
     * // => true
     *
     * _.includes([1, 2, 3], 1, 2);
     * // => false
     *
     * _.includes({ 'a': 1, 'b': 2 }, 1);
     * // => true
     *
     * _.includes('abcd', 'bc');
     * // => true
     */
    function includes(collection, value, fromIndex, guard) {
      collection = isArrayLike(collection) ? collection : values(collection);
      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;

      var length = collection.length;
      if (fromIndex < 0) {
        fromIndex = nativeMax(length + fromIndex, 0);
      }
      return isString(collection)
        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)
        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);
    }

    /**
     * Invokes the method at `path` of each element in `collection`, returning
     * an array of the results of each invoked method. Any additional arguments
     * are provided to each invoked method. If `path` is a function, it's invoked
     * for, and `this` bound to, each element in `collection`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Array|Function|string} path The path of the method to invoke or
     *  the function invoked per iteration.
     * @param {...*} [args] The arguments to invoke each method with.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');
     * // => [[1, 5, 7], [1, 2, 3]]
     *
     * _.invokeMap([123, 456], String.prototype.split, '');
     * // => [['1', '2', '3'], ['4', '5', '6']]
     */
    var invokeMap = baseRest(function(collection, path, args) {
      var index = -1,
          isFunc = typeof path == 'function',
          result = isArrayLike(collection) ? Array(collection.length) : [];

      baseEach(collection, function(value) {
        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);
      });
      return result;
    });

    /**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` thru `iteratee`. The corresponding value of
     * each key is the last element responsible for generating the key. The
     * iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * var array = [
     *   { 'dir': 'left', 'code': 97 },
     *   { 'dir': 'right', 'code': 100 }
     * ];
     *
     * _.keyBy(array, function(o) {
     *   return String.fromCharCode(o.code);
     * });
     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
     *
     * _.keyBy(array, 'dir');
     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
     */
    var keyBy = createAggregator(function(result, value, key) {
      baseAssignValue(result, key, value);
    });

    /**
     * Creates an array of values by running each element in `collection` thru
     * `iteratee`. The iteratee is invoked with three arguments:
     * (value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.
     *
     * The guarded methods are:
     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,
     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,
     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,
     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * _.map([4, 8], square);
     * // => [16, 64]
     *
     * _.map({ 'a': 4, 'b': 8 }, square);
     * // => [16, 64] (iteration order is not guaranteed)
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * // The `_.property` iteratee shorthand.
     * _.map(users, 'user');
     * // => ['barney', 'fred']
     */
    function map(collection, iteratee) {
      var func = isArray(collection) ? arrayMap : baseMap;
      return func(collection, getIteratee(iteratee, 3));
    }

    /**
     * This method is like `_.sortBy` except that it allows specifying the sort
     * orders of the iteratees to sort by. If `orders` is unspecified, all values
     * are sorted in ascending order. Otherwise, specify an order of "desc" for
     * descending or "asc" for ascending sort order of corresponding values.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]
     *  The iteratees to sort by.
     * @param {string[]} [orders] The sort orders of `iteratees`.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 34 },
     *   { 'user': 'fred',   'age': 40 },
     *   { 'user': 'barney', 'age': 36 }
     * ];
     *
     * // Sort by `user` in ascending order and by `age` in descending order.
     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);
     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]
     */
    function orderBy(collection, iteratees, orders, guard) {
      if (collection == null) {
        return [];
      }
      if (!isArray(iteratees)) {
        iteratees = iteratees == null ? [] : [iteratees];
      }
      orders = guard ? undefined : orders;
      if (!isArray(orders)) {
        orders = orders == null ? [] : [orders];
      }
      return baseOrderBy(collection, iteratees, orders);
    }

    /**
     * Creates an array of elements split into two groups, the first of which
     * contains elements `predicate` returns truthy for, the second of which
     * contains elements `predicate` returns falsey for. The predicate is
     * invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the array of grouped elements.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': false },
     *   { 'user': 'fred',    'age': 40, 'active': true },
     *   { 'user': 'pebbles', 'age': 1,  'active': false }
     * ];
     *
     * _.partition(users, function(o) { return o.active; });
     * // => objects for [['fred'], ['barney', 'pebbles']]
     *
     * // The `_.matches` iteratee shorthand.
     * _.partition(users, { 'age': 1, 'active': false });
     * // => objects for [['pebbles'], ['barney', 'fred']]
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.partition(users, ['active', false]);
     * // => objects for [['barney', 'pebbles'], ['fred']]
     *
     * // The `_.property` iteratee shorthand.
     * _.partition(users, 'active');
     * // => objects for [['fred'], ['barney', 'pebbles']]
     */
    var partition = createAggregator(function(result, value, key) {
      result[key ? 0 : 1].push(value);
    }, function() { return [[], []]; });

    /**
     * Reduces `collection` to a value which is the accumulated result of running
     * each element in `collection` thru `iteratee`, where each successive
     * invocation is supplied the return value of the previous. If `accumulator`
     * is not given, the first element of `collection` is used as the initial
     * value. The iteratee is invoked with four arguments:
     * (accumulator, value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.reduce`, `_.reduceRight`, and `_.transform`.
     *
     * The guarded methods are:
     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,
     * and `sortBy`
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @returns {*} Returns the accumulated value.
     * @see _.reduceRight
     * @example
     *
     * _.reduce([1, 2], function(sum, n) {
     *   return sum + n;
     * }, 0);
     * // => 3
     *
     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {
     *   (result[value] || (result[value] = [])).push(key);
     *   return result;
     * }, {});
     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)
     */
    function reduce(collection, iteratee, accumulator) {
      var func = isArray(collection) ? arrayReduce : baseReduce,
          initAccum = arguments.length < 3;

      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);
    }

    /**
     * This method is like `_.reduce` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @returns {*} Returns the accumulated value.
     * @see _.reduce
     * @example
     *
     * var array = [[0, 1], [2, 3], [4, 5]];
     *
     * _.reduceRight(array, function(flattened, other) {
     *   return flattened.concat(other);
     * }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */
    function reduceRight(collection, iteratee, accumulator) {
      var func = isArray(collection) ? arrayReduceRight : baseReduce,
          initAccum = arguments.length < 3;

      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);
    }

    /**
     * The opposite of `_.filter`; this method returns the elements of `collection`
     * that `predicate` does **not** return truthy for.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     * @see _.filter
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': true }
     * ];
     *
     * _.reject(users, function(o) { return !o.active; });
     * // => objects for ['fred']
     *
     * // The `_.matches` iteratee shorthand.
     * _.reject(users, { 'age': 40, 'active': true });
     * // => objects for ['barney']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.reject(users, ['active', false]);
     * // => objects for ['fred']
     *
     * // The `_.property` iteratee shorthand.
     * _.reject(users, 'active');
     * // => objects for ['barney']
     */
    function reject(collection, predicate) {
      var func = isArray(collection) ? arrayFilter : baseFilter;
      return func(collection, negate(getIteratee(predicate, 3)));
    }

    /**
     * Gets a random element from `collection`.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to sample.
     * @returns {*} Returns the random element.
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     */
    function sample(collection) {
      var func = isArray(collection) ? arraySample : baseSample;
      return func(collection);
    }

    /**
     * Gets `n` random elements at unique keys from `collection` up to the
     * size of `collection`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to sample.
     * @param {number} [n=1] The number of elements to sample.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the random elements.
     * @example
     *
     * _.sampleSize([1, 2, 3], 2);
     * // => [3, 1]
     *
     * _.sampleSize([1, 2, 3], 4);
     * // => [2, 3, 1]
     */
    function sampleSize(collection, n, guard) {
      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {
        n = 1;
      } else {
        n = toInteger(n);
      }
      var func = isArray(collection) ? arraySampleSize : baseSampleSize;
      return func(collection, n);
    }

    /**
     * Creates an array of shuffled values, using a version of the
     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     * @example
     *
     * _.shuffle([1, 2, 3, 4]);
     * // => [4, 1, 3, 2]
     */
    function shuffle(collection) {
      var func = isArray(collection) ? arrayShuffle : baseShuffle;
      return func(collection);
    }

    /**
     * Gets the size of `collection` by returning its length for array-like
     * values or the number of own enumerable string keyed properties for objects.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns the collection size.
     * @example
     *
     * _.size([1, 2, 3]);
     * // => 3
     *
     * _.size({ 'a': 1, 'b': 2 });
     * // => 2
     *
     * _.size('pebbles');
     * // => 7
     */
    function size(collection) {
      if (collection == null) {
        return 0;
      }
      if (isArrayLike(collection)) {
        return isString(collection) ? stringSize(collection) : collection.length;
      }
      var tag = getTag(collection);
      if (tag == mapTag || tag == setTag) {
        return collection.size;
      }
      return baseKeys(collection).length;
    }

    /**
     * Checks if `predicate` returns truthy for **any** element of `collection`.
     * Iteration is stopped once `predicate` returns truthy. The predicate is
     * invoked with three arguments: (value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var users = [
     *   { 'user': 'barney', 'active': true },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.some(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.some(users, ['active', false]);
     * // => true
     *
     * // The `_.property` iteratee shorthand.
     * _.some(users, 'active');
     * // => true
     */
    function some(collection, predicate, guard) {
      var func = isArray(collection) ? arraySome : baseSome;
      if (guard && isIterateeCall(collection, predicate, guard)) {
        predicate = undefined;
      }
      return func(collection, getIteratee(predicate, 3));
    }

    /**
     * Creates an array of elements, sorted in ascending order by the results of
     * running each element in a collection thru each iteratee. This method
     * performs a stable sort, that is, it preserves the original sort order of
     * equal elements. The iteratees are invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {...(Function|Function[])} [iteratees=[_.identity]]
     *  The iteratees to sort by.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 },
     *   { 'user': 'barney', 'age': 34 }
     * ];
     *
     * _.sortBy(users, [function(o) { return o.user; }]);
     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]
     *
     * _.sortBy(users, ['user', 'age']);
     * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]
     */
    var sortBy = baseRest(function(collection, iteratees) {
      if (collection == null) {
        return [];
      }
      var length = iteratees.length;
      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
        iteratees = [];
      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
        iteratees = [iteratees[0]];
      }
      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
    });

    /*------------------------------------------------------------------------*/

    /**
     * Gets the timestamp of the number of milliseconds that have elapsed since
     * the Unix epoch (1 January 1970 00:00:00 UTC).
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Date
     * @returns {number} Returns the timestamp.
     * @example
     *
     * _.defer(function(stamp) {
     *   console.log(_.now() - stamp);
     * }, _.now());
     * // => Logs the number of milliseconds it took for the deferred invocation.
     */
    var now = ctxNow || function() {
      return root.Date.now();
    };

    /*------------------------------------------------------------------------*/

    /**
     * The opposite of `_.before`; this method creates a function that invokes
     * `func` once it's called `n` or more times.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {number} n The number of calls before `func` is invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => Logs 'done saving!' after the two async saves have completed.
     */
    function after(n, func) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      n = toInteger(n);
      return function() {
        if (--n < 1) {
          return func.apply(this, arguments);
        }
      };
    }

    /**
     * Creates a function that invokes `func`, with up to `n` arguments,
     * ignoring any additional arguments.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @param {number} [n=func.length] The arity cap.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the new capped function.
     * @example
     *
     * _.map(['6', '8', '10'], _.ary(parseInt, 1));
     * // => [6, 8, 10]
     */
    function ary(func, n, guard) {
      n = guard ? undefined : n;
      n = (func && n == null) ? func.length : n;
      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);
    }

    /**
     * Creates a function that invokes `func`, with the `this` binding and arguments
     * of the created function, while it's called less than `n` times. Subsequent
     * calls to the created function return the result of the last `func` invocation.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {number} n The number of calls at which `func` is no longer invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * jQuery(element).on('click', _.before(5, addContactToList));
     * // => Allows adding up to 4 contacts to the list.
     */
    function before(n, func) {
      var result;
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      n = toInteger(n);
      return function() {
        if (--n > 0) {
          result = func.apply(this, arguments);
        }
        if (n <= 1) {
          func = undefined;
        }
        return result;
      };
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and `partials` prepended to the arguments it receives.
     *
     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for partially applied arguments.
     *
     * **Note:** Unlike native `Function#bind`, this method doesn't set the "length"
     * property of bound functions.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * function greet(greeting, punctuation) {
     *   return greeting + ' ' + this.user + punctuation;
     * }
     *
     * var object = { 'user': 'fred' };
     *
     * var bound = _.bind(greet, object, 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * // Bound with placeholders.
     * var bound = _.bind(greet, object, _, '!');
     * bound('hi');
     * // => 'hi fred!'
     */
    var bind = baseRest(function(func, thisArg, partials) {
      var bitmask = WRAP_BIND_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, getHolder(bind));
        bitmask |= WRAP_PARTIAL_FLAG;
      }
      return createWrap(func, bitmask, thisArg, partials, holders);
    });

    /**
     * Creates a function that invokes the method at `object[key]` with `partials`
     * prepended to the arguments it receives.
     *
     * This method differs from `_.bind` by allowing bound functions to reference
     * methods that may be redefined or don't yet exist. See
     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)
     * for more details.
     *
     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * @static
     * @memberOf _
     * @since 0.10.0
     * @category Function
     * @param {Object} object The object to invoke the method on.
     * @param {string} key The key of the method.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * var object = {
     *   'user': 'fred',
     *   'greet': function(greeting, punctuation) {
     *     return greeting + ' ' + this.user + punctuation;
     *   }
     * };
     *
     * var bound = _.bindKey(object, 'greet', 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * object.greet = function(greeting, punctuation) {
     *   return greeting + 'ya ' + this.user + punctuation;
     * };
     *
     * bound('!');
     * // => 'hiya fred!'
     *
     * // Bound with placeholders.
     * var bound = _.bindKey(object, 'greet', _, '!');
     * bound('hi');
     * // => 'hiya fred!'
     */
    var bindKey = baseRest(function(object, key, partials) {
      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;
      if (partials.length) {
        var holders = replaceHolders(partials, getHolder(bindKey));
        bitmask |= WRAP_PARTIAL_FLAG;
      }
      return createWrap(key, bitmask, object, partials, holders);
    });

    /**
     * Creates a function that accepts arguments of `func` and either invokes
     * `func` returning its result, if at least `arity` number of arguments have
     * been provided, or returns a function that accepts the remaining `func`
     * arguments, and so on. The arity of `func` may be specified if `func.length`
     * is not sufficient.
     *
     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for provided arguments.
     *
     * **Note:** This method doesn't set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curry(abc);
     *
     * curried(1)(2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // Curried with placeholders.
     * curried(1)(_, 3)(2);
     * // => [1, 2, 3]
     */
    function curry(func, arity, guard) {
      arity = guard ? undefined : arity;
      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);
      result.placeholder = curry.placeholder;
      return result;
    }

    /**
     * This method is like `_.curry` except that arguments are applied to `func`
     * in the manner of `_.partialRight` instead of `_.partial`.
     *
     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for provided arguments.
     *
     * **Note:** This method doesn't set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curryRight(abc);
     *
     * curried(3)(2)(1);
     * // => [1, 2, 3]
     *
     * curried(2, 3)(1);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // Curried with placeholders.
     * curried(3)(1, _)(2);
     * // => [1, 2, 3]
     */
    function curryRight(func, arity, guard) {
      arity = guard ? undefined : arity;
      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);
      result.placeholder = curryRight.placeholder;
      return result;
    }

    /**
     * Creates a debounced function that delays invoking `func` until after `wait`
     * milliseconds have elapsed since the last time the debounced function was
     * invoked. The debounced function comes with a `cancel` method to cancel
     * delayed `func` invocations and a `flush` method to immediately invoke them.
     * Provide `options` to indicate whether `func` should be invoked on the
     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
     * with the last arguments provided to the debounced function. Subsequent
     * calls to the debounced function return the result of the last `func`
     * invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is
     * invoked on the trailing edge of the timeout only if the debounced function
     * is invoked more than once during the `wait` timeout.
     *
     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
     * until to the next tick, similar to `setTimeout` with a timeout of `0`.
     *
     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
     * for details over the differences between `_.debounce` and `_.throttle`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to debounce.
     * @param {number} [wait=0] The number of milliseconds to delay.
     * @param {Object} [options={}] The options object.
     * @param {boolean} [options.leading=false]
     *  Specify invoking on the leading edge of the timeout.
     * @param {number} [options.maxWait]
     *  The maximum time `func` is allowed to be delayed before it's invoked.
     * @param {boolean} [options.trailing=true]
     *  Specify invoking on the trailing edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // Avoid costly calculations while the window size is in flux.
     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
     *
     * // Invoke `sendMail` when clicked, debouncing subsequent calls.
     * jQuery(element).on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * }));
     *
     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
     * var source = new EventSource('/stream');
     * jQuery(source).on('message', debounced);
     *
     * // Cancel the trailing debounced invocation.
     * jQuery(window).on('popstate', debounced.cancel);
     */
    function debounce(func, wait, options) {
      var lastArgs,
          lastThis,
          maxWait,
          result,
          timerId,
          lastCallTime,
          lastInvokeTime = 0,
          leading = false,
          maxing = false,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      wait = toNumber(wait) || 0;
      if (isObject(options)) {
        leading = !!options.leading;
        maxing = 'maxWait' in options;
        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }

      function invokeFunc(time) {
        var args = lastArgs,
            thisArg = lastThis;

        lastArgs = lastThis = undefined;
        lastInvokeTime = time;
        result = func.apply(thisArg, args);
        return result;
      }

      function leadingEdge(time) {
        // Reset any `maxWait` timer.
        lastInvokeTime = time;
        // Start the timer for the trailing edge.
        timerId = setTimeout(timerExpired, wait);
        // Invoke the leading edge.
        return leading ? invokeFunc(time) : result;
      }

      function remainingWait(time) {
        var timeSinceLastCall = time - lastCallTime,
            timeSinceLastInvoke = time - lastInvokeTime,
            timeWaiting = wait - timeSinceLastCall;

        return maxing
          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
          : timeWaiting;
      }

      function shouldInvoke(time) {
        var timeSinceLastCall = time - lastCallTime,
            timeSinceLastInvoke = time - lastInvokeTime;

        // Either this is the first call, activity has stopped and we're at the
        // trailing edge, the system time has gone backwards and we're treating
        // it as the trailing edge, or we've hit the `maxWait` limit.
        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
      }

      function timerExpired() {
        var time = now();
        if (shouldInvoke(time)) {
          return trailingEdge(time);
        }
        // Restart the timer.
        timerId = setTimeout(timerExpired, remainingWait(time));
      }

      function trailingEdge(time) {
        timerId = undefined;

        // Only invoke if we have `lastArgs` which means `func` has been
        // debounced at least once.
        if (trailing && lastArgs) {
          return invokeFunc(time);
        }
        lastArgs = lastThis = undefined;
        return result;
      }

      function cancel() {
        if (timerId !== undefined) {
          clearTimeout(timerId);
        }
        lastInvokeTime = 0;
        lastArgs = lastCallTime = lastThis = timerId = undefined;
      }

      function flush() {
        return timerId === undefined ? result : trailingEdge(now());
      }

      function debounced() {
        var time = now(),
            isInvoking = shouldInvoke(time);

        lastArgs = arguments;
        lastThis = this;
        lastCallTime = time;

        if (isInvoking) {
          if (timerId === undefined) {
            return leadingEdge(lastCallTime);
          }
          if (maxing) {
            // Handle invocations in a tight loop.
            clearTimeout(timerId);
            timerId = setTimeout(timerExpired, wait);
            return invokeFunc(lastCallTime);
          }
        }
        if (timerId === undefined) {
          timerId = setTimeout(timerExpired, wait);
        }
        return result;
      }
      debounced.cancel = cancel;
      debounced.flush = flush;
      return debounced;
    }

    /**
     * Defers invoking the `func` until the current call stack has cleared. Any
     * additional arguments are provided to `func` when it's invoked.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to defer.
     * @param {...*} [args] The arguments to invoke `func` with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) {
     *   console.log(text);
     * }, 'deferred');
     * // => Logs 'deferred' after one millisecond.
     */
    var defer = baseRest(function(func, args) {
      return baseDelay(func, 1, args);
    });

    /**
     * Invokes `func` after `wait` milliseconds. Any additional arguments are
     * provided to `func` when it's invoked.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {...*} [args] The arguments to invoke `func` with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.delay(function(text) {
     *   console.log(text);
     * }, 1000, 'later');
     * // => Logs 'later' after one second.
     */
    var delay = baseRest(function(func, wait, args) {
      return baseDelay(func, toNumber(wait) || 0, args);
    });

    /**
     * Creates a function that invokes `func` with arguments reversed.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Function
     * @param {Function} func The function to flip arguments for.
     * @returns {Function} Returns the new flipped function.
     * @example
     *
     * var flipped = _.flip(function() {
     *   return _.toArray(arguments);
     * });
     *
     * flipped('a', 'b', 'c', 'd');
     * // => ['d', 'c', 'b', 'a']
     */
    function flip(func) {
      return createWrap(func, WRAP_FLIP_FLAG);
    }

    /**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided, it determines the cache key for storing the result based on the
     * arguments provided to the memoized function. By default, the first argument
     * provided to the memoized function is used as the map cache key. The `func`
     * is invoked with the `this` binding of the memoized function.
     *
     * **Note:** The cache is exposed as the `cache` property on the memoized
     * function. Its creation may be customized by replacing the `_.memoize.Cache`
     * constructor with one whose instances implement the
     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
     * method interface of `clear`, `delete`, `get`, `has`, and `set`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] The function to resolve the cache key.
     * @returns {Function} Returns the new memoized function.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     * var other = { 'c': 3, 'd': 4 };
     *
     * var values = _.memoize(_.values);
     * values(object);
     * // => [1, 2]
     *
     * values(other);
     * // => [3, 4]
     *
     * object.a = 2;
     * values(object);
     * // => [1, 2]
     *
     * // Modify the result cache.
     * values.cache.set(object, ['a', 'b']);
     * values(object);
     * // => ['a', 'b']
     *
     * // Replace `_.memoize.Cache`.
     * _.memoize.Cache = WeakMap;
     */
    function memoize(func, resolver) {
      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      var memoized = function() {
        var args = arguments,
            key = resolver ? resolver.apply(this, args) : args[0],
            cache = memoized.cache;

        if (cache.has(key)) {
          return cache.get(key);
        }
        var result = func.apply(this, args);
        memoized.cache = cache.set(key, result) || cache;
        return result;
      };
      memoized.cache = new (memoize.Cache || MapCache);
      return memoized;
    }

    // Expose `MapCache`.
    memoize.Cache = MapCache;

    /**
     * Creates a function that negates the result of the predicate `func`. The
     * `func` predicate is invoked with the `this` binding and arguments of the
     * created function.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} predicate The predicate to negate.
     * @returns {Function} Returns the new negated function.
     * @example
     *
     * function isEven(n) {
     *   return n % 2 == 0;
     * }
     *
     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
     * // => [1, 3, 5]
     */
    function negate(predicate) {
      if (typeof predicate != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      return function() {
        var args = arguments;
        switch (args.length) {
          case 0: return !predicate.call(this);
          case 1: return !predicate.call(this, args[0]);
          case 2: return !predicate.call(this, args[0], args[1]);
          case 3: return !predicate.call(this, args[0], args[1], args[2]);
        }
        return !predicate.apply(this, args);
      };
    }

    /**
     * Creates a function that is restricted to invoking `func` once. Repeat calls
     * to the function return the value of the first invocation. The `func` is
     * invoked with the `this` binding and arguments of the created function.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // => `createApplication` is invoked once
     */
    function once(func) {
      return before(2, func);
    }

    /**
     * Creates a function that invokes `func` with its arguments transformed.
     *
     * @static
     * @since 4.0.0
     * @memberOf _
     * @category Function
     * @param {Function} func The function to wrap.
     * @param {...(Function|Function[])} [transforms=[_.identity]]
     *  The argument transforms.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function doubled(n) {
     *   return n * 2;
     * }
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var func = _.overArgs(function(x, y) {
     *   return [x, y];
     * }, [square, doubled]);
     *
     * func(9, 3);
     * // => [81, 6]
     *
     * func(10, 5);
     * // => [100, 10]
     */
    var overArgs = castRest(function(func, transforms) {
      transforms = (transforms.length == 1 && isArray(transforms[0]))
        ? arrayMap(transforms[0], baseUnary(getIteratee()))
        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));

      var funcsLength = transforms.length;
      return baseRest(function(args) {
        var index = -1,
            length = nativeMin(args.length, funcsLength);

        while (++index < length) {
          args[index] = transforms[index].call(this, args[index]);
        }
        return apply(func, this, args);
      });
    });

    /**
     * Creates a function that invokes `func` with `partials` prepended to the
     * arguments it receives. This method is like `_.bind` except it does **not**
     * alter the `this` binding.
     *
     * The `_.partial.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method doesn't set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @since 0.2.0
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * function greet(greeting, name) {
     *   return greeting + ' ' + name;
     * }
     *
     * var sayHelloTo = _.partial(greet, 'hello');
     * sayHelloTo('fred');
     * // => 'hello fred'
     *
     * // Partially applied with placeholders.
     * var greetFred = _.partial(greet, _, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     */
    var partial = baseRest(function(func, partials) {
      var holders = replaceHolders(partials, getHolder(partial));
      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);
    });

    /**
     * This method is like `_.partial` except that partially applied arguments
     * are appended to the arguments it receives.
     *
     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for partially applied arguments.
     *
     * **Note:** This method doesn't set the "length" property of partially
     * applied functions.
     *
     * @static
     * @memberOf _
     * @since 1.0.0
     * @category Function
     * @param {Function} func The function to partially apply arguments to.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new partially applied function.
     * @example
     *
     * function greet(greeting, name) {
     *   return greeting + ' ' + name;
     * }
     *
     * var greetFred = _.partialRight(greet, 'fred');
     * greetFred('hi');
     * // => 'hi fred'
     *
     * // Partially applied with placeholders.
     * var sayHelloTo = _.partialRight(greet, 'hello', _);
     * sayHelloTo('fred');
     * // => 'hello fred'
     */
    var partialRight = baseRest(function(func, partials) {
      var holders = replaceHolders(partials, getHolder(partialRight));
      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);
    });

    /**
     * Creates a function that invokes `func` with arguments arranged according
     * to the specified `indexes` where the argument value at the first index is
     * provided as the first argument, the argument value at the second index is
     * provided as the second argument, and so on.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} func The function to rearrange arguments for.
     * @param {...(number|number[])} indexes The arranged argument indexes.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var rearged = _.rearg(function(a, b, c) {
     *   return [a, b, c];
     * }, [2, 0, 1]);
     *
     * rearged('b', 'c', 'a')
     * // => ['a', 'b', 'c']
     */
    var rearg = flatRest(function(func, indexes) {
      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);
    });

    /**
     * Creates a function that invokes `func` with the `this` binding of the
     * created function and arguments from `start` and beyond provided as
     * an array.
     *
     * **Note:** This method is based on the
     * [rest parameter](https://mdn.io/rest_parameters).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Function
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.rest(function(what, names) {
     *   return what + ' ' + _.initial(names).join(', ') +
     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
     * });
     *
     * say('hello', 'fred', 'barney', 'pebbles');
     * // => 'hello fred, barney, & pebbles'
     */
    function rest(func, start) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      start = start === undefined ? start : toInteger(start);
      return baseRest(func, start);
    }

    /**
     * Creates a function that invokes `func` with the `this` binding of the
     * create function and an array of arguments much like
     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).
     *
     * **Note:** This method is based on the
     * [spread operator](https://mdn.io/spread_operator).
     *
     * @static
     * @memberOf _
     * @since 3.2.0
     * @category Function
     * @param {Function} func The function to spread arguments over.
     * @param {number} [start=0] The start position of the spread.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.spread(function(who, what) {
     *   return who + ' says ' + what;
     * });
     *
     * say(['fred', 'hello']);
     * // => 'fred says hello'
     *
     * var numbers = Promise.all([
     *   Promise.resolve(40),
     *   Promise.resolve(36)
     * ]);
     *
     * numbers.then(_.spread(function(x, y) {
     *   return x + y;
     * }));
     * // => a Promise of 76
     */
    function spread(func, start) {
      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      start = start == null ? 0 : nativeMax(toInteger(start), 0);
      return baseRest(function(args) {
        var array = args[start],
            otherArgs = castSlice(args, 0, start);

        if (array) {
          arrayPush(otherArgs, array);
        }
        return apply(func, this, otherArgs);
      });
    }

    /**
     * Creates a throttled function that only invokes `func` at most once per
     * every `wait` milliseconds. The throttled function comes with a `cancel`
     * method to cancel delayed `func` invocations and a `flush` method to
     * immediately invoke them. Provide `options` to indicate whether `func`
     * should be invoked on the leading and/or trailing edge of the `wait`
     * timeout. The `func` is invoked with the last arguments provided to the
     * throttled function. Subsequent calls to the throttled function return the
     * result of the last `func` invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is
     * invoked on the trailing edge of the timeout only if the throttled function
     * is invoked more than once during the `wait` timeout.
     *
     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
     * until to the next tick, similar to `setTimeout` with a timeout of `0`.
     *
     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
     * for details over the differences between `_.throttle` and `_.debounce`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to throttle.
     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
     * @param {Object} [options={}] The options object.
     * @param {boolean} [options.leading=true]
     *  Specify invoking on the leading edge of the timeout.
     * @param {boolean} [options.trailing=true]
     *  Specify invoking on the trailing edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // Avoid excessively updating the position while scrolling.
     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
     *
     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
     * jQuery(element).on('click', throttled);
     *
     * // Cancel the trailing throttled invocation.
     * jQuery(window).on('popstate', throttled.cancel);
     */
    function throttle(func, wait, options) {
      var leading = true,
          trailing = true;

      if (typeof func != 'function') {
        throw new TypeError(FUNC_ERROR_TEXT);
      }
      if (isObject(options)) {
        leading = 'leading' in options ? !!options.leading : leading;
        trailing = 'trailing' in options ? !!options.trailing : trailing;
      }
      return debounce(func, wait, {
        'leading': leading,
        'maxWait': wait,
        'trailing': trailing
      });
    }

    /**
     * Creates a function that accepts up to one argument, ignoring any
     * additional arguments.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @returns {Function} Returns the new capped function.
     * @example
     *
     * _.map(['6', '8', '10'], _.unary(parseInt));
     * // => [6, 8, 10]
     */
    function unary(func) {
      return ary(func, 1);
    }

    /**
     * Creates a function that provides `value` to `wrapper` as its first
     * argument. Any additional arguments provided to the function are appended
     * to those provided to the `wrapper`. The wrapper is invoked with the `this`
     * binding of the created function.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {*} value The value to wrap.
     * @param {Function} [wrapper=identity] The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('fred, barney, & pebbles');
     * // => '<p>fred, barney, &amp; pebbles</p>'
     */
    function wrap(value, wrapper) {
      return partial(castFunction(wrapper), value);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Casts `value` as an array if it's not one.
     *
     * @static
     * @memberOf _
     * @since 4.4.0
     * @category Lang
     * @param {*} value The value to inspect.
     * @returns {Array} Returns the cast array.
     * @example
     *
     * _.castArray(1);
     * // => [1]
     *
     * _.castArray({ 'a': 1 });
     * // => [{ 'a': 1 }]
     *
     * _.castArray('abc');
     * // => ['abc']
     *
     * _.castArray(null);
     * // => [null]
     *
     * _.castArray(undefined);
     * // => [undefined]
     *
     * _.castArray();
     * // => []
     *
     * var array = [1, 2, 3];
     * console.log(_.castArray(array) === array);
     * // => true
     */
    function castArray() {
      if (!arguments.length) {
        return [];
      }
      var value = arguments[0];
      return isArray(value) ? value : [value];
    }

    /**
     * Creates a shallow clone of `value`.
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)
     * and supports cloning arrays, array buffers, booleans, date objects, maps,
     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed
     * arrays. The own enumerable properties of `arguments` objects are cloned
     * as plain objects. An empty object is returned for uncloneable values such
     * as error objects, functions, DOM nodes, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to clone.
     * @returns {*} Returns the cloned value.
     * @see _.cloneDeep
     * @example
     *
     * var objects = [{ 'a': 1 }, { 'b': 2 }];
     *
     * var shallow = _.clone(objects);
     * console.log(shallow[0] === objects[0]);
     * // => true
     */
    function clone(value) {
      return baseClone(value, CLONE_SYMBOLS_FLAG);
    }

    /**
     * This method is like `_.clone` except that it accepts `customizer` which
     * is invoked to produce the cloned value. If `customizer` returns `undefined`,
     * cloning is handled by the method instead. The `customizer` is invoked with
     * up to four arguments; (value [, index|key, object, stack]).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to clone.
     * @param {Function} [customizer] The function to customize cloning.
     * @returns {*} Returns the cloned value.
     * @see _.cloneDeepWith
     * @example
     *
     * function customizer(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(false);
     *   }
     * }
     *
     * var el = _.cloneWith(document.body, customizer);
     *
     * console.log(el === document.body);
     * // => false
     * console.log(el.nodeName);
     * // => 'BODY'
     * console.log(el.childNodes.length);
     * // => 0
     */
    function cloneWith(value, customizer) {
      customizer = typeof customizer == 'function' ? customizer : undefined;
      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);
    }

    /**
     * This method is like `_.clone` except that it recursively clones `value`.
     *
     * @static
     * @memberOf _
     * @since 1.0.0
     * @category Lang
     * @param {*} value The value to recursively clone.
     * @returns {*} Returns the deep cloned value.
     * @see _.clone
     * @example
     *
     * var objects = [{ 'a': 1 }, { 'b': 2 }];
     *
     * var deep = _.cloneDeep(objects);
     * console.log(deep[0] === objects[0]);
     * // => false
     */
    function cloneDeep(value) {
      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);
    }

    /**
     * This method is like `_.cloneWith` except that it recursively clones `value`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to recursively clone.
     * @param {Function} [customizer] The function to customize cloning.
     * @returns {*} Returns the deep cloned value.
     * @see _.cloneWith
     * @example
     *
     * function customizer(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(true);
     *   }
     * }
     *
     * var el = _.cloneDeepWith(document.body, customizer);
     *
     * console.log(el === document.body);
     * // => false
     * console.log(el.nodeName);
     * // => 'BODY'
     * console.log(el.childNodes.length);
     * // => 20
     */
    function cloneDeepWith(value, customizer) {
      customizer = typeof customizer == 'function' ? customizer : undefined;
      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);
    }

    /**
     * Checks if `object` conforms to `source` by invoking the predicate
     * properties of `source` with the corresponding property values of `object`.
     *
     * **Note:** This method is equivalent to `_.conforms` when `source` is
     * partially applied.
     *
     * @static
     * @memberOf _
     * @since 4.14.0
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property predicates to conform to.
     * @returns {boolean} Returns `true` if `object` conforms, else `false`.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     *
     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });
     * // => true
     *
     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });
     * // => false
     */
    function conformsTo(object, source) {
      return source == null || baseConformsTo(object, source, keys(source));
    }

    /**
     * Performs a
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * comparison between two values to determine if they are equivalent.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'a': 1 };
     * var other = { 'a': 1 };
     *
     * _.eq(object, object);
     * // => true
     *
     * _.eq(object, other);
     * // => false
     *
     * _.eq('a', 'a');
     * // => true
     *
     * _.eq('a', Object('a'));
     * // => false
     *
     * _.eq(NaN, NaN);
     * // => true
     */
    function eq(value, other) {
      return value === other || (value !== value && other !== other);
    }

    /**
     * Checks if `value` is greater than `other`.
     *
     * @static
     * @memberOf _
     * @since 3.9.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`,
     *  else `false`.
     * @see _.lt
     * @example
     *
     * _.gt(3, 1);
     * // => true
     *
     * _.gt(3, 3);
     * // => false
     *
     * _.gt(1, 3);
     * // => false
     */
    var gt = createRelationalOperation(baseGt);

    /**
     * Checks if `value` is greater than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @since 3.9.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than or equal to
     *  `other`, else `false`.
     * @see _.lte
     * @example
     *
     * _.gte(3, 1);
     * // => true
     *
     * _.gte(3, 3);
     * // => true
     *
     * _.gte(1, 3);
     * // => false
     */
    var gte = createRelationalOperation(function(value, other) {
      return value >= other;
    });

    /**
     * Checks if `value` is likely an `arguments` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an `arguments` object,
     *  else `false`.
     * @example
     *
     * _.isArguments(function() { return arguments; }());
     * // => true
     *
     * _.isArguments([1, 2, 3]);
     * // => false
     */
    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {
      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&
        !propertyIsEnumerable.call(value, 'callee');
    };

    /**
     * Checks if `value` is classified as an `Array` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an array, else `false`.
     * @example
     *
     * _.isArray([1, 2, 3]);
     * // => true
     *
     * _.isArray(document.body.children);
     * // => false
     *
     * _.isArray('abc');
     * // => false
     *
     * _.isArray(_.noop);
     * // => false
     */
    var isArray = Array.isArray;

    /**
     * Checks if `value` is classified as an `ArrayBuffer` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.
     * @example
     *
     * _.isArrayBuffer(new ArrayBuffer(2));
     * // => true
     *
     * _.isArrayBuffer(new Array(2));
     * // => false
     */
    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;

    /**
     * Checks if `value` is array-like. A value is considered array-like if it's
     * not a function and has a `value.length` that's an integer greater than or
     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
     * @example
     *
     * _.isArrayLike([1, 2, 3]);
     * // => true
     *
     * _.isArrayLike(document.body.children);
     * // => true
     *
     * _.isArrayLike('abc');
     * // => true
     *
     * _.isArrayLike(_.noop);
     * // => false
     */
    function isArrayLike(value) {
      return value != null && isLength(value.length) && !isFunction(value);
    }

    /**
     * This method is like `_.isArrayLike` except that it also checks if `value`
     * is an object.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an array-like object,
     *  else `false`.
     * @example
     *
     * _.isArrayLikeObject([1, 2, 3]);
     * // => true
     *
     * _.isArrayLikeObject(document.body.children);
     * // => true
     *
     * _.isArrayLikeObject('abc');
     * // => false
     *
     * _.isArrayLikeObject(_.noop);
     * // => false
     */
    function isArrayLikeObject(value) {
      return isObjectLike(value) && isArrayLike(value);
    }

    /**
     * Checks if `value` is classified as a boolean primitive or object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.
     * @example
     *
     * _.isBoolean(false);
     * // => true
     *
     * _.isBoolean(null);
     * // => false
     */
    function isBoolean(value) {
      return value === true || value === false ||
        (isObjectLike(value) && baseGetTag(value) == boolTag);
    }

    /**
     * Checks if `value` is a buffer.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
     * @example
     *
     * _.isBuffer(new Buffer(2));
     * // => true
     *
     * _.isBuffer(new Uint8Array(2));
     * // => false
     */
    var isBuffer = nativeIsBuffer || stubFalse;

    /**
     * Checks if `value` is classified as a `Date` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.
     * @example
     *
     * _.isDate(new Date);
     * // => true
     *
     * _.isDate('Mon April 23 2012');
     * // => false
     */
    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;

    /**
     * Checks if `value` is likely a DOM element.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     *
     * _.isElement('<body>');
     * // => false
     */
    function isElement(value) {
      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);
    }

    /**
     * Checks if `value` is an empty object, collection, map, or set.
     *
     * Objects are considered empty if they have no own enumerable string keyed
     * properties.
     *
     * Array-like values such as `arguments` objects, arrays, buffers, strings, or
     * jQuery-like collections are considered empty if they have a `length` of `0`.
     * Similarly, maps and sets are considered empty if they have a `size` of `0`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty(null);
     * // => true
     *
     * _.isEmpty(true);
     * // => true
     *
     * _.isEmpty(1);
     * // => true
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({ 'a': 1 });
     * // => false
     */
    function isEmpty(value) {
      if (value == null) {
        return true;
      }
      if (isArrayLike(value) &&
          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||
            isBuffer(value) || isTypedArray(value) || isArguments(value))) {
        return !value.length;
      }
      var tag = getTag(value);
      if (tag == mapTag || tag == setTag) {
        return !value.size;
      }
      if (isPrototype(value)) {
        return !baseKeys(value).length;
      }
      for (var key in value) {
        if (hasOwnProperty.call(value, key)) {
          return false;
        }
      }
      return true;
    }

    /**
     * Performs a deep comparison between two values to determine if they are
     * equivalent.
     *
     * **Note:** This method supports comparing arrays, array buffers, booleans,
     * date objects, error objects, maps, numbers, `Object` objects, regexes,
     * sets, strings, symbols, and typed arrays. `Object` objects are compared
     * by their own, not inherited, enumerable properties. Functions and DOM
     * nodes are compared by strict equality, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'a': 1 };
     * var other = { 'a': 1 };
     *
     * _.isEqual(object, other);
     * // => true
     *
     * object === other;
     * // => false
     */
    function isEqual(value, other) {
      return baseIsEqual(value, other);
    }

    /**
     * This method is like `_.isEqual` except that it accepts `customizer` which
     * is invoked to compare values. If `customizer` returns `undefined`, comparisons
     * are handled by the method instead. The `customizer` is invoked with up to
     * six arguments: (objValue, othValue [, index|key, object, other, stack]).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * function isGreeting(value) {
     *   return /^h(?:i|ello)$/.test(value);
     * }
     *
     * function customizer(objValue, othValue) {
     *   if (isGreeting(objValue) && isGreeting(othValue)) {
     *     return true;
     *   }
     * }
     *
     * var array = ['hello', 'goodbye'];
     * var other = ['hi', 'goodbye'];
     *
     * _.isEqualWith(array, other, customizer);
     * // => true
     */
    function isEqualWith(value, other, customizer) {
      customizer = typeof customizer == 'function' ? customizer : undefined;
      var result = customizer ? customizer(value, other) : undefined;
      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;
    }

    /**
     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
     * `SyntaxError`, `TypeError`, or `URIError` object.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
     * @example
     *
     * _.isError(new Error);
     * // => true
     *
     * _.isError(Error);
     * // => false
     */
    function isError(value) {
      if (!isObjectLike(value)) {
        return false;
      }
      var tag = baseGetTag(value);
      return tag == errorTag || tag == domExcTag ||
        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));
    }

    /**
     * Checks if `value` is a finite primitive number.
     *
     * **Note:** This method is based on
     * [`Number.isFinite`](https://mdn.io/Number/isFinite).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.
     * @example
     *
     * _.isFinite(3);
     * // => true
     *
     * _.isFinite(Number.MIN_VALUE);
     * // => true
     *
     * _.isFinite(Infinity);
     * // => false
     *
     * _.isFinite('3');
     * // => false
     */
    function isFinite(value) {
      return typeof value == 'number' && nativeIsFinite(value);
    }

    /**
     * Checks if `value` is classified as a `Function` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a function, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     *
     * _.isFunction(/abc/);
     * // => false
     */
    function isFunction(value) {
      if (!isObject(value)) {
        return false;
      }
      // The use of `Object#toString` avoids issues with the `typeof` operator
      // in Safari 9 which returns 'object' for typed arrays and other constructors.
      var tag = baseGetTag(value);
      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
    }

    /**
     * Checks if `value` is an integer.
     *
     * **Note:** This method is based on
     * [`Number.isInteger`](https://mdn.io/Number/isInteger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.
     * @example
     *
     * _.isInteger(3);
     * // => true
     *
     * _.isInteger(Number.MIN_VALUE);
     * // => false
     *
     * _.isInteger(Infinity);
     * // => false
     *
     * _.isInteger('3');
     * // => false
     */
    function isInteger(value) {
      return typeof value == 'number' && value == toInteger(value);
    }

    /**
     * Checks if `value` is a valid array-like length.
     *
     * **Note:** This method is loosely based on
     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
     * @example
     *
     * _.isLength(3);
     * // => true
     *
     * _.isLength(Number.MIN_VALUE);
     * // => false
     *
     * _.isLength(Infinity);
     * // => false
     *
     * _.isLength('3');
     * // => false
     */
    function isLength(value) {
      return typeof value == 'number' &&
        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }

    /**
     * Checks if `value` is the
     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(_.noop);
     * // => true
     *
     * _.isObject(null);
     * // => false
     */
    function isObject(value) {
      var type = typeof value;
      return value != null && (type == 'object' || type == 'function');
    }

    /**
     * Checks if `value` is object-like. A value is object-like if it's not `null`
     * and has a `typeof` result of "object".
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
     * @example
     *
     * _.isObjectLike({});
     * // => true
     *
     * _.isObjectLike([1, 2, 3]);
     * // => true
     *
     * _.isObjectLike(_.noop);
     * // => false
     *
     * _.isObjectLike(null);
     * // => false
     */
    function isObjectLike(value) {
      return value != null && typeof value == 'object';
    }

    /**
     * Checks if `value` is classified as a `Map` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a map, else `false`.
     * @example
     *
     * _.isMap(new Map);
     * // => true
     *
     * _.isMap(new WeakMap);
     * // => false
     */
    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;

    /**
     * Performs a partial deep comparison between `object` and `source` to
     * determine if `object` contains equivalent property values.
     *
     * **Note:** This method is equivalent to `_.matches` when `source` is
     * partially applied.
     *
     * Partial comparisons will match empty array and empty object `source`
     * values against any array or object value, respectively. See `_.isEqual`
     * for a list of supported value comparisons.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     *
     * _.isMatch(object, { 'b': 2 });
     * // => true
     *
     * _.isMatch(object, { 'b': 1 });
     * // => false
     */
    function isMatch(object, source) {
      return object === source || baseIsMatch(object, source, getMatchData(source));
    }

    /**
     * This method is like `_.isMatch` except that it accepts `customizer` which
     * is invoked to compare values. If `customizer` returns `undefined`, comparisons
     * are handled by the method instead. The `customizer` is invoked with five
     * arguments: (objValue, srcValue, index|key, object, source).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * function isGreeting(value) {
     *   return /^h(?:i|ello)$/.test(value);
     * }
     *
     * function customizer(objValue, srcValue) {
     *   if (isGreeting(objValue) && isGreeting(srcValue)) {
     *     return true;
     *   }
     * }
     *
     * var object = { 'greeting': 'hello' };
     * var source = { 'greeting': 'hi' };
     *
     * _.isMatchWith(object, source, customizer);
     * // => true
     */
    function isMatchWith(object, source, customizer) {
      customizer = typeof customizer == 'function' ? customizer : undefined;
      return baseIsMatch(object, source, getMatchData(source), customizer);
    }

    /**
     * Checks if `value` is `NaN`.
     *
     * **Note:** This method is based on
     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as
     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for
     * `undefined` and other non-number values.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */
    function isNaN(value) {
      // An `NaN` primitive is the only value that is not equal to itself.
      // Perform the `toStringTag` check first to avoid errors with some
      // ActiveX objects in IE.
      return isNumber(value) && value != +value;
    }

    /**
     * Checks if `value` is a pristine native function.
     *
     * **Note:** This method can't reliably detect native functions in the presence
     * of the core-js package because core-js circumvents this kind of detection.
     * Despite multiple requests, the core-js maintainer has made it clear: any
     * attempt to fix the detection will be obstructed. As a result, we're left
     * with little choice but to throw an error. Unfortunately, this also affects
     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),
     * which rely on core-js.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function,
     *  else `false`.
     * @example
     *
     * _.isNative(Array.prototype.push);
     * // => true
     *
     * _.isNative(_);
     * // => false
     */
    function isNative(value) {
      if (isMaskable(value)) {
        throw new Error(CORE_ERROR_TEXT);
      }
      return baseIsNative(value);
    }

    /**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(void 0);
     * // => false
     */
    function isNull(value) {
      return value === null;
    }

    /**
     * Checks if `value` is `null` or `undefined`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.
     * @example
     *
     * _.isNil(null);
     * // => true
     *
     * _.isNil(void 0);
     * // => true
     *
     * _.isNil(NaN);
     * // => false
     */
    function isNil(value) {
      return value == null;
    }

    /**
     * Checks if `value` is classified as a `Number` primitive or object.
     *
     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are
     * classified as numbers, use the `_.isFinite` method.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a number, else `false`.
     * @example
     *
     * _.isNumber(3);
     * // => true
     *
     * _.isNumber(Number.MIN_VALUE);
     * // => true
     *
     * _.isNumber(Infinity);
     * // => true
     *
     * _.isNumber('3');
     * // => false
     */
    function isNumber(value) {
      return typeof value == 'number' ||
        (isObjectLike(value) && baseGetTag(value) == numberTag);
    }

    /**
     * Checks if `value` is a plain object, that is, an object created by the
     * `Object` constructor or one with a `[[Prototype]]` of `null`.
     *
     * @static
     * @memberOf _
     * @since 0.8.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * _.isPlainObject(new Foo);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     *
     * _.isPlainObject(Object.create(null));
     * // => true
     */
    function isPlainObject(value) {
      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
        return false;
      }
      var proto = getPrototype(value);
      if (proto === null) {
        return true;
      }
      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
      return typeof Ctor == 'function' && Ctor instanceof Ctor &&
        funcToString.call(Ctor) == objectCtorString;
    }

    /**
     * Checks if `value` is classified as a `RegExp` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.
     * @example
     *
     * _.isRegExp(/abc/);
     * // => true
     *
     * _.isRegExp('/abc/');
     * // => false
     */
    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;

    /**
     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754
     * double precision number which isn't the result of a rounded unsafe integer.
     *
     * **Note:** This method is based on
     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.
     * @example
     *
     * _.isSafeInteger(3);
     * // => true
     *
     * _.isSafeInteger(Number.MIN_VALUE);
     * // => false
     *
     * _.isSafeInteger(Infinity);
     * // => false
     *
     * _.isSafeInteger('3');
     * // => false
     */
    function isSafeInteger(value) {
      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;
    }

    /**
     * Checks if `value` is classified as a `Set` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a set, else `false`.
     * @example
     *
     * _.isSet(new Set);
     * // => true
     *
     * _.isSet(new WeakSet);
     * // => false
     */
    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;

    /**
     * Checks if `value` is classified as a `String` primitive or object.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a string, else `false`.
     * @example
     *
     * _.isString('abc');
     * // => true
     *
     * _.isString(1);
     * // => false
     */
    function isString(value) {
      return typeof value == 'string' ||
        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);
    }

    /**
     * Checks if `value` is classified as a `Symbol` primitive or object.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
     * @example
     *
     * _.isSymbol(Symbol.iterator);
     * // => true
     *
     * _.isSymbol('abc');
     * // => false
     */
    function isSymbol(value) {
      return typeof value == 'symbol' ||
        (isObjectLike(value) && baseGetTag(value) == symbolTag);
    }

    /**
     * Checks if `value` is classified as a typed array.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
     * @example
     *
     * _.isTypedArray(new Uint8Array);
     * // => true
     *
     * _.isTypedArray([]);
     * // => false
     */
    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

    /**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     *
     * _.isUndefined(null);
     * // => false
     */
    function isUndefined(value) {
      return value === undefined;
    }

    /**
     * Checks if `value` is classified as a `WeakMap` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.
     * @example
     *
     * _.isWeakMap(new WeakMap);
     * // => true
     *
     * _.isWeakMap(new Map);
     * // => false
     */
    function isWeakMap(value) {
      return isObjectLike(value) && getTag(value) == weakMapTag;
    }

    /**
     * Checks if `value` is classified as a `WeakSet` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.
     * @example
     *
     * _.isWeakSet(new WeakSet);
     * // => true
     *
     * _.isWeakSet(new Set);
     * // => false
     */
    function isWeakSet(value) {
      return isObjectLike(value) && baseGetTag(value) == weakSetTag;
    }

    /**
     * Checks if `value` is less than `other`.
     *
     * @static
     * @memberOf _
     * @since 3.9.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than `other`,
     *  else `false`.
     * @see _.gt
     * @example
     *
     * _.lt(1, 3);
     * // => true
     *
     * _.lt(3, 3);
     * // => false
     *
     * _.lt(3, 1);
     * // => false
     */
    var lt = createRelationalOperation(baseLt);

    /**
     * Checks if `value` is less than or equal to `other`.
     *
     * @static
     * @memberOf _
     * @since 3.9.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than or equal to
     *  `other`, else `false`.
     * @see _.gte
     * @example
     *
     * _.lte(1, 3);
     * // => true
     *
     * _.lte(3, 3);
     * // => true
     *
     * _.lte(3, 1);
     * // => false
     */
    var lte = createRelationalOperation(function(value, other) {
      return value <= other;
    });

    /**
     * Converts `value` to an array.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Array} Returns the converted array.
     * @example
     *
     * _.toArray({ 'a': 1, 'b': 2 });
     * // => [1, 2]
     *
     * _.toArray('abc');
     * // => ['a', 'b', 'c']
     *
     * _.toArray(1);
     * // => []
     *
     * _.toArray(null);
     * // => []
     */
    function toArray(value) {
      if (!value) {
        return [];
      }
      if (isArrayLike(value)) {
        return isString(value) ? stringToArray(value) : copyArray(value);
      }
      if (symIterator && value[symIterator]) {
        return iteratorToArray(value[symIterator]());
      }
      var tag = getTag(value),
          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);

      return func(value);
    }

    /**
     * Converts `value` to a finite number.
     *
     * @static
     * @memberOf _
     * @since 4.12.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted number.
     * @example
     *
     * _.toFinite(3.2);
     * // => 3.2
     *
     * _.toFinite(Number.MIN_VALUE);
     * // => 5e-324
     *
     * _.toFinite(Infinity);
     * // => 1.7976931348623157e+308
     *
     * _.toFinite('3.2');
     * // => 3.2
     */
    function toFinite(value) {
      if (!value) {
        return value === 0 ? value : 0;
      }
      value = toNumber(value);
      if (value === INFINITY || value === -INFINITY) {
        var sign = (value < 0 ? -1 : 1);
        return sign * MAX_INTEGER;
      }
      return value === value ? value : 0;
    }

    /**
     * Converts `value` to an integer.
     *
     * **Note:** This method is loosely based on
     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toInteger(3.2);
     * // => 3
     *
     * _.toInteger(Number.MIN_VALUE);
     * // => 0
     *
     * _.toInteger(Infinity);
     * // => 1.7976931348623157e+308
     *
     * _.toInteger('3.2');
     * // => 3
     */
    function toInteger(value) {
      var result = toFinite(value),
          remainder = result % 1;

      return result === result ? (remainder ? result - remainder : result) : 0;
    }

    /**
     * Converts `value` to an integer suitable for use as the length of an
     * array-like object.
     *
     * **Note:** This method is based on
     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toLength(3.2);
     * // => 3
     *
     * _.toLength(Number.MIN_VALUE);
     * // => 0
     *
     * _.toLength(Infinity);
     * // => 4294967295
     *
     * _.toLength('3.2');
     * // => 3
     */
    function toLength(value) {
      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;
    }

    /**
     * Converts `value` to a number.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to process.
     * @returns {number} Returns the number.
     * @example
     *
     * _.toNumber(3.2);
     * // => 3.2
     *
     * _.toNumber(Number.MIN_VALUE);
     * // => 5e-324
     *
     * _.toNumber(Infinity);
     * // => Infinity
     *
     * _.toNumber('3.2');
     * // => 3.2
     */
    function toNumber(value) {
      if (typeof value == 'number') {
        return value;
      }
      if (isSymbol(value)) {
        return NAN;
      }
      if (isObject(value)) {
        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
        value = isObject(other) ? (other + '') : other;
      }
      if (typeof value != 'string') {
        return value === 0 ? value : +value;
      }
      value = value.replace(reTrim, '');
      var isBinary = reIsBinary.test(value);
      return (isBinary || reIsOctal.test(value))
        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
        : (reIsBadHex.test(value) ? NAN : +value);
    }

    /**
     * Converts `value` to a plain object flattening inherited enumerable string
     * keyed properties of `value` to own properties of the plain object.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Object} Returns the converted plain object.
     * @example
     *
     * function Foo() {
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.assign({ 'a': 1 }, new Foo);
     * // => { 'a': 1, 'b': 2 }
     *
     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
     * // => { 'a': 1, 'b': 2, 'c': 3 }
     */
    function toPlainObject(value) {
      return copyObject(value, keysIn(value));
    }

    /**
     * Converts `value` to a safe integer. A safe integer can be compared and
     * represented correctly.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toSafeInteger(3.2);
     * // => 3
     *
     * _.toSafeInteger(Number.MIN_VALUE);
     * // => 0
     *
     * _.toSafeInteger(Infinity);
     * // => 9007199254740991
     *
     * _.toSafeInteger('3.2');
     * // => 3
     */
    function toSafeInteger(value) {
      return value
        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)
        : (value === 0 ? value : 0);
    }

    /**
     * Converts `value` to a string. An empty string is returned for `null`
     * and `undefined` values. The sign of `-0` is preserved.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {string} Returns the converted string.
     * @example
     *
     * _.toString(null);
     * // => ''
     *
     * _.toString(-0);
     * // => '-0'
     *
     * _.toString([1, 2, 3]);
     * // => '1,2,3'
     */
    function toString(value) {
      return value == null ? '' : baseToString(value);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Assigns own enumerable string keyed properties of source objects to the
     * destination object. Source objects are applied from left to right.
     * Subsequent sources overwrite property assignments of previous sources.
     *
     * **Note:** This method mutates `object` and is loosely based on
     * [`Object.assign`](https://mdn.io/Object/assign).
     *
     * @static
     * @memberOf _
     * @since 0.10.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @see _.assignIn
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * function Bar() {
     *   this.c = 3;
     * }
     *
     * Foo.prototype.b = 2;
     * Bar.prototype.d = 4;
     *
     * _.assign({ 'a': 0 }, new Foo, new Bar);
     * // => { 'a': 1, 'c': 3 }
     */
    var assign = createAssigner(function(object, source) {
      if (isPrototype(source) || isArrayLike(source)) {
        copyObject(source, keys(source), object);
        return;
      }
      for (var key in source) {
        if (hasOwnProperty.call(source, key)) {
          assignValue(object, key, source[key]);
        }
      }
    });

    /**
     * This method is like `_.assign` except that it iterates over own and
     * inherited source properties.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @alias extend
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @see _.assign
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * function Bar() {
     *   this.c = 3;
     * }
     *
     * Foo.prototype.b = 2;
     * Bar.prototype.d = 4;
     *
     * _.assignIn({ 'a': 0 }, new Foo, new Bar);
     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }
     */
    var assignIn = createAssigner(function(object, source) {
      copyObject(source, keysIn(source), object);
    });

    /**
     * This method is like `_.assignIn` except that it accepts `customizer`
     * which is invoked to produce the assigned values. If `customizer` returns
     * `undefined`, assignment is handled by the method instead. The `customizer`
     * is invoked with five arguments: (objValue, srcValue, key, object, source).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @alias extendWith
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} sources The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @see _.assignWith
     * @example
     *
     * function customizer(objValue, srcValue) {
     *   return _.isUndefined(objValue) ? srcValue : objValue;
     * }
     *
     * var defaults = _.partialRight(_.assignInWith, customizer);
     *
     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });
     * // => { 'a': 1, 'b': 2 }
     */
    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {
      copyObject(source, keysIn(source), object, customizer);
    });

    /**
     * This method is like `_.assign` except that it accepts `customizer`
     * which is invoked to produce the assigned values. If `customizer` returns
     * `undefined`, assignment is handled by the method instead. The `customizer`
     * is invoked with five arguments: (objValue, srcValue, key, object, source).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} sources The source objects.
     * @param {Function} [customizer] The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @see _.assignInWith
     * @example
     *
     * function customizer(objValue, srcValue) {
     *   return _.isUndefined(objValue) ? srcValue : objValue;
     * }
     *
     * var defaults = _.partialRight(_.assignWith, customizer);
     *
     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });
     * // => { 'a': 1, 'b': 2 }
     */
    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {
      copyObject(source, keys(source), object, customizer);
    });

    /**
     * Creates an array of values corresponding to `paths` of `object`.
     *
     * @static
     * @memberOf _
     * @since 1.0.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {...(string|string[])} [paths] The property paths to pick.
     * @returns {Array} Returns the picked values.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };
     *
     * _.at(object, ['a[0].b.c', 'a[1]']);
     * // => [3, 4]
     */
    var at = flatRest(baseAt);

    /**
     * Creates an object that inherits from the `prototype` object. If a
     * `properties` object is given, its own enumerable string keyed properties
     * are assigned to the created object.
     *
     * @static
     * @memberOf _
     * @since 2.3.0
     * @category Object
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, {
     *   'constructor': Circle
     * });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */
    function create(prototype, properties) {
      var result = baseCreate(prototype);
      return properties == null ? result : baseAssign(result, properties);
    }

    /**
     * Assigns own and inherited enumerable string keyed properties of source
     * objects to the destination object for all destination properties that
     * resolve to `undefined`. Source objects are applied from left to right.
     * Once a property is set, additional values of the same property are ignored.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @see _.defaultsDeep
     * @example
     *
     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });
     * // => { 'a': 1, 'b': 2 }
     */
    var defaults = baseRest(function(object, sources) {
      object = Object(object);

      var index = -1;
      var length = sources.length;
      var guard = length > 2 ? sources[2] : undefined;

      if (guard && isIterateeCall(sources[0], sources[1], guard)) {
        length = 1;
      }

      while (++index < length) {
        var source = sources[index];
        var props = keysIn(source);
        var propsIndex = -1;
        var propsLength = props.length;

        while (++propsIndex < propsLength) {
          var key = props[propsIndex];
          var value = object[key];

          if (value === undefined ||
              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {
            object[key] = source[key];
          }
        }
      }

      return object;
    });

    /**
     * This method is like `_.defaults` except that it recursively assigns
     * default properties.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 3.10.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @see _.defaults
     * @example
     *
     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });
     * // => { 'a': { 'b': 2, 'c': 3 } }
     */
    var defaultsDeep = baseRest(function(args) {
      args.push(undefined, customDefaultsMerge);
      return apply(mergeWith, undefined, args);
    });

    /**
     * This method is like `_.find` except that it returns the key of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * @static
     * @memberOf _
     * @since 1.1.0
     * @category Object
     * @param {Object} object The object to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {string|undefined} Returns the key of the matched element,
     *  else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findKey(users, function(o) { return o.age < 40; });
     * // => 'barney' (iteration order is not guaranteed)
     *
     * // The `_.matches` iteratee shorthand.
     * _.findKey(users, { 'age': 1, 'active': true });
     * // => 'pebbles'
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findKey(users, ['active', false]);
     * // => 'fred'
     *
     * // The `_.property` iteratee shorthand.
     * _.findKey(users, 'active');
     * // => 'barney'
     */
    function findKey(object, predicate) {
      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);
    }

    /**
     * This method is like `_.findKey` except that it iterates over elements of
     * a collection in the opposite order.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Object
     * @param {Object} object The object to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {string|undefined} Returns the key of the matched element,
     *  else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findLastKey(users, function(o) { return o.age < 40; });
     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'
     *
     * // The `_.matches` iteratee shorthand.
     * _.findLastKey(users, { 'age': 36, 'active': true });
     * // => 'barney'
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findLastKey(users, ['active', false]);
     * // => 'fred'
     *
     * // The `_.property` iteratee shorthand.
     * _.findLastKey(users, 'active');
     * // => 'pebbles'
     */
    function findLastKey(object, predicate) {
      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);
    }

    /**
     * Iterates over own and inherited enumerable string keyed properties of an
     * object and invokes `iteratee` for each property. The iteratee is invoked
     * with three arguments: (value, key, object). Iteratee functions may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @since 0.3.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forInRight
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forIn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).
     */
    function forIn(object, iteratee) {
      return object == null
        ? object
        : baseFor(object, getIteratee(iteratee, 3), keysIn);
    }

    /**
     * This method is like `_.forIn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forIn
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forInRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.
     */
    function forInRight(object, iteratee) {
      return object == null
        ? object
        : baseForRight(object, getIteratee(iteratee, 3), keysIn);
    }

    /**
     * Iterates over own enumerable string keyed properties of an object and
     * invokes `iteratee` for each property. The iteratee is invoked with three
     * arguments: (value, key, object). Iteratee functions may exit iteration
     * early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @since 0.3.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forOwnRight
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'a' then 'b' (iteration order is not guaranteed).
     */
    function forOwn(object, iteratee) {
      return object && baseForOwn(object, getIteratee(iteratee, 3));
    }

    /**
     * This method is like `_.forOwn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forOwn
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwnRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.
     */
    function forOwnRight(object, iteratee) {
      return object && baseForOwnRight(object, getIteratee(iteratee, 3));
    }

    /**
     * Creates an array of function property names from own enumerable properties
     * of `object`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the function names.
     * @see _.functionsIn
     * @example
     *
     * function Foo() {
     *   this.a = _.constant('a');
     *   this.b = _.constant('b');
     * }
     *
     * Foo.prototype.c = _.constant('c');
     *
     * _.functions(new Foo);
     * // => ['a', 'b']
     */
    function functions(object) {
      return object == null ? [] : baseFunctions(object, keys(object));
    }

    /**
     * Creates an array of function property names from own and inherited
     * enumerable properties of `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the function names.
     * @see _.functions
     * @example
     *
     * function Foo() {
     *   this.a = _.constant('a');
     *   this.b = _.constant('b');
     * }
     *
     * Foo.prototype.c = _.constant('c');
     *
     * _.functionsIn(new Foo);
     * // => ['a', 'b', 'c']
     */
    function functionsIn(object) {
      return object == null ? [] : baseFunctions(object, keysIn(object));
    }

    /**
     * Gets the value at `path` of `object`. If the resolved value is
     * `undefined`, the `defaultValue` is returned in its place.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @param {*} [defaultValue] The value returned for `undefined` resolved values.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.get(object, 'a[0].b.c');
     * // => 3
     *
     * _.get(object, ['a', '0', 'b', 'c']);
     * // => 3
     *
     * _.get(object, 'a.b.c', 'default');
     * // => 'default'
     */
    function get(object, path, defaultValue) {
      var result = object == null ? undefined : baseGet(object, path);
      return result === undefined ? defaultValue : result;
    }

    /**
     * Checks if `path` is a direct property of `object`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     * @example
     *
     * var object = { 'a': { 'b': 2 } };
     * var other = _.create({ 'a': _.create({ 'b': 2 }) });
     *
     * _.has(object, 'a');
     * // => true
     *
     * _.has(object, 'a.b');
     * // => true
     *
     * _.has(object, ['a', 'b']);
     * // => true
     *
     * _.has(other, 'a');
     * // => false
     */
    function has(object, path) {
      return object != null && hasPath(object, path, baseHas);
    }

    /**
     * Checks if `path` is a direct or inherited property of `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     * @example
     *
     * var object = _.create({ 'a': _.create({ 'b': 2 }) });
     *
     * _.hasIn(object, 'a');
     * // => true
     *
     * _.hasIn(object, 'a.b');
     * // => true
     *
     * _.hasIn(object, ['a', 'b']);
     * // => true
     *
     * _.hasIn(object, 'b');
     * // => false
     */
    function hasIn(object, path) {
      return object != null && hasPath(object, path, baseHasIn);
    }

    /**
     * Creates an object composed of the inverted keys and values of `object`.
     * If `object` contains duplicate values, subsequent values overwrite
     * property assignments of previous values.
     *
     * @static
     * @memberOf _
     * @since 0.7.0
     * @category Object
     * @param {Object} object The object to invert.
     * @returns {Object} Returns the new inverted object.
     * @example
     *
     * var object = { 'a': 1, 'b': 2, 'c': 1 };
     *
     * _.invert(object);
     * // => { '1': 'c', '2': 'b' }
     */
    var invert = createInverter(function(result, value, key) {
      if (value != null &&
          typeof value.toString != 'function') {
        value = nativeObjectToString.call(value);
      }

      result[value] = key;
    }, constant(identity));

    /**
     * This method is like `_.invert` except that the inverted object is generated
     * from the results of running each element of `object` thru `iteratee`. The
     * corresponding inverted value of each inverted key is an array of keys
     * responsible for generating the inverted value. The iteratee is invoked
     * with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.1.0
     * @category Object
     * @param {Object} object The object to invert.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Object} Returns the new inverted object.
     * @example
     *
     * var object = { 'a': 1, 'b': 2, 'c': 1 };
     *
     * _.invertBy(object);
     * // => { '1': ['a', 'c'], '2': ['b'] }
     *
     * _.invertBy(object, function(value) {
     *   return 'group' + value;
     * });
     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }
     */
    var invertBy = createInverter(function(result, value, key) {
      if (value != null &&
          typeof value.toString != 'function') {
        value = nativeObjectToString.call(value);
      }

      if (hasOwnProperty.call(result, value)) {
        result[value].push(key);
      } else {
        result[value] = [key];
      }
    }, getIteratee);

    /**
     * Invokes the method at `path` of `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the method to invoke.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {*} Returns the result of the invoked method.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };
     *
     * _.invoke(object, 'a[0].b.c.slice', 1, 3);
     * // => [2, 3]
     */
    var invoke = baseRest(baseInvoke);

    /**
     * Creates an array of the own enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects. See the
     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
     * for more details.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keys(new Foo);
     * // => ['a', 'b'] (iteration order is not guaranteed)
     *
     * _.keys('hi');
     * // => ['0', '1']
     */
    function keys(object) {
      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
    }

    /**
     * Creates an array of the own and inherited enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keysIn(new Foo);
     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
     */
    function keysIn(object) {
      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
    }

    /**
     * The opposite of `_.mapValues`; this method creates an object with the
     * same values as `object` and keys generated by running each own enumerable
     * string keyed property of `object` thru `iteratee`. The iteratee is invoked
     * with three arguments: (value, key, object).
     *
     * @static
     * @memberOf _
     * @since 3.8.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns the new mapped object.
     * @see _.mapValues
     * @example
     *
     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {
     *   return key + value;
     * });
     * // => { 'a1': 1, 'b2': 2 }
     */
    function mapKeys(object, iteratee) {
      var result = {};
      iteratee = getIteratee(iteratee, 3);

      baseForOwn(object, function(value, key, object) {
        baseAssignValue(result, iteratee(value, key, object), value);
      });
      return result;
    }

    /**
     * Creates an object with the same keys as `object` and values generated
     * by running each own enumerable string keyed property of `object` thru
     * `iteratee`. The iteratee is invoked with three arguments:
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns the new mapped object.
     * @see _.mapKeys
     * @example
     *
     * var users = {
     *   'fred':    { 'user': 'fred',    'age': 40 },
     *   'pebbles': { 'user': 'pebbles', 'age': 1 }
     * };
     *
     * _.mapValues(users, function(o) { return o.age; });
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     *
     * // The `_.property` iteratee shorthand.
     * _.mapValues(users, 'age');
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     */
    function mapValues(object, iteratee) {
      var result = {};
      iteratee = getIteratee(iteratee, 3);

      baseForOwn(object, function(value, key, object) {
        baseAssignValue(result, key, iteratee(value, key, object));
      });
      return result;
    }

    /**
     * This method is like `_.assign` except that it recursively merges own and
     * inherited enumerable string keyed properties of source objects into the
     * destination object. Source properties that resolve to `undefined` are
     * skipped if a destination value exists. Array and plain object properties
     * are merged recursively. Other objects and value types are overridden by
     * assignment. Source objects are applied from left to right. Subsequent
     * sources overwrite property assignments of previous sources.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 0.5.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = {
     *   'a': [{ 'b': 2 }, { 'd': 4 }]
     * };
     *
     * var other = {
     *   'a': [{ 'c': 3 }, { 'e': 5 }]
     * };
     *
     * _.merge(object, other);
     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }
     */
    var merge = createAssigner(function(object, source, srcIndex) {
      baseMerge(object, source, srcIndex);
    });

    /**
     * This method is like `_.merge` except that it accepts `customizer` which
     * is invoked to produce the merged values of the destination and source
     * properties. If `customizer` returns `undefined`, merging is handled by the
     * method instead. The `customizer` is invoked with six arguments:
     * (objValue, srcValue, key, object, source, stack).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} sources The source objects.
     * @param {Function} customizer The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @example
     *
     * function customizer(objValue, srcValue) {
     *   if (_.isArray(objValue)) {
     *     return objValue.concat(srcValue);
     *   }
     * }
     *
     * var object = { 'a': [1], 'b': [2] };
     * var other = { 'a': [3], 'b': [4] };
     *
     * _.mergeWith(object, other, customizer);
     * // => { 'a': [1, 3], 'b': [2, 4] }
     */
    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {
      baseMerge(object, source, srcIndex, customizer);
    });

    /**
     * The opposite of `_.pick`; this method creates an object composed of the
     * own and inherited enumerable property paths of `object` that are not omitted.
     *
     * **Note:** This method is considerably slower than `_.pick`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {...(string|string[])} [paths] The property paths to omit.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'a': 1, 'b': '2', 'c': 3 };
     *
     * _.omit(object, ['a', 'c']);
     * // => { 'b': '2' }
     */
    var omit = flatRest(function(object, paths) {
      var result = {};
      if (object == null) {
        return result;
      }
      var isDeep = false;
      paths = arrayMap(paths, function(path) {
        path = castPath(path, object);
        isDeep || (isDeep = path.length > 1);
        return path;
      });
      copyObject(object, getAllKeysIn(object), result);
      if (isDeep) {
        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
      }
      var length = paths.length;
      while (length--) {
        baseUnset(result, paths[length]);
      }
      return result;
    });

    /**
     * The opposite of `_.pickBy`; this method creates an object composed of
     * the own and inherited enumerable string keyed properties of `object` that
     * `predicate` doesn't return truthy for. The predicate is invoked with two
     * arguments: (value, key).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The source object.
     * @param {Function} [predicate=_.identity] The function invoked per property.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'a': 1, 'b': '2', 'c': 3 };
     *
     * _.omitBy(object, _.isNumber);
     * // => { 'b': '2' }
     */
    function omitBy(object, predicate) {
      return pickBy(object, negate(getIteratee(predicate)));
    }

    /**
     * Creates an object composed of the picked `object` properties.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The source object.
     * @param {...(string|string[])} [paths] The property paths to pick.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'a': 1, 'b': '2', 'c': 3 };
     *
     * _.pick(object, ['a', 'c']);
     * // => { 'a': 1, 'c': 3 }
     */
    var pick = flatRest(function(object, paths) {
      return object == null ? {} : basePick(object, paths);
    });

    /**
     * Creates an object composed of the `object` properties `predicate` returns
     * truthy for. The predicate is invoked with two arguments: (value, key).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The source object.
     * @param {Function} [predicate=_.identity] The function invoked per property.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'a': 1, 'b': '2', 'c': 3 };
     *
     * _.pickBy(object, _.isNumber);
     * // => { 'a': 1, 'c': 3 }
     */
    function pickBy(object, predicate) {
      if (object == null) {
        return {};
      }
      var props = arrayMap(getAllKeysIn(object), function(prop) {
        return [prop];
      });
      predicate = getIteratee(predicate);
      return basePickBy(object, props, function(value, path) {
        return predicate(value, path[0]);
      });
    }

    /**
     * This method is like `_.get` except that if the resolved value is a
     * function it's invoked with the `this` binding of its parent object and
     * its result is returned.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to resolve.
     * @param {*} [defaultValue] The value returned for `undefined` resolved values.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };
     *
     * _.result(object, 'a[0].b.c1');
     * // => 3
     *
     * _.result(object, 'a[0].b.c2');
     * // => 4
     *
     * _.result(object, 'a[0].b.c3', 'default');
     * // => 'default'
     *
     * _.result(object, 'a[0].b.c3', _.constant('default'));
     * // => 'default'
     */
    function result(object, path, defaultValue) {
      path = castPath(path, object);

      var index = -1,
          length = path.length;

      // Ensure the loop is entered when path is empty.
      if (!length) {
        length = 1;
        object = undefined;
      }
      while (++index < length) {
        var value = object == null ? undefined : object[toKey(path[index])];
        if (value === undefined) {
          index = length;
          value = defaultValue;
        }
        object = isFunction(value) ? value.call(object) : value;
      }
      return object;
    }

    /**
     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,
     * it's created. Arrays are created for missing index properties while objects
     * are created for all other missing properties. Use `_.setWith` to customize
     * `path` creation.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.set(object, 'a[0].b.c', 4);
     * console.log(object.a[0].b.c);
     * // => 4
     *
     * _.set(object, ['x', '0', 'y', 'z'], 5);
     * console.log(object.x[0].y.z);
     * // => 5
     */
    function set(object, path, value) {
      return object == null ? object : baseSet(object, path, value);
    }

    /**
     * This method is like `_.set` except that it accepts `customizer` which is
     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`
     * path creation is handled by the method instead. The `customizer` is invoked
     * with three arguments: (nsValue, key, nsObject).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @param {Function} [customizer] The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = {};
     *
     * _.setWith(object, '[0][1]', 'a', Object);
     * // => { '0': { '1': 'a' } }
     */
    function setWith(object, path, value, customizer) {
      customizer = typeof customizer == 'function' ? customizer : undefined;
      return object == null ? object : baseSet(object, path, value, customizer);
    }

    /**
     * Creates an array of own enumerable string keyed-value pairs for `object`
     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its
     * entries are returned.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @alias entries
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the key-value pairs.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.toPairs(new Foo);
     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)
     */
    var toPairs = createToPairs(keys);

    /**
     * Creates an array of own and inherited enumerable string keyed-value pairs
     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map
     * or set, its entries are returned.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @alias entriesIn
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the key-value pairs.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.toPairsIn(new Foo);
     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)
     */
    var toPairsIn = createToPairs(keysIn);

    /**
     * An alternative to `_.reduce`; this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own
     * enumerable string keyed properties thru `iteratee`, with each invocation
     * potentially mutating the `accumulator` object. If `accumulator` is not
     * provided, a new object with the same `[[Prototype]]` will be used. The
     * iteratee is invoked with four arguments: (accumulator, value, key, object).
     * Iteratee functions may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @since 1.3.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.transform([2, 3, 4], function(result, n) {
     *   result.push(n *= n);
     *   return n % 2 == 0;
     * }, []);
     * // => [4, 9]
     *
     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {
     *   (result[value] || (result[value] = [])).push(key);
     * }, {});
     * // => { '1': ['a', 'c'], '2': ['b'] }
     */
    function transform(object, iteratee, accumulator) {
      var isArr = isArray(object),
          isArrLike = isArr || isBuffer(object) || isTypedArray(object);

      iteratee = getIteratee(iteratee, 4);
      if (accumulator == null) {
        var Ctor = object && object.constructor;
        if (isArrLike) {
          accumulator = isArr ? new Ctor : [];
        }
        else if (isObject(object)) {
          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};
        }
        else {
          accumulator = {};
        }
      }
      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {
        return iteratee(accumulator, value, index, object);
      });
      return accumulator;
    }

    /**
     * Removes the property at `path` of `object`.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to unset.
     * @returns {boolean} Returns `true` if the property is deleted, else `false`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 7 } }] };
     * _.unset(object, 'a[0].b.c');
     * // => true
     *
     * console.log(object);
     * // => { 'a': [{ 'b': {} }] };
     *
     * _.unset(object, ['a', '0', 'b', 'c']);
     * // => true
     *
     * console.log(object);
     * // => { 'a': [{ 'b': {} }] };
     */
    function unset(object, path) {
      return object == null ? true : baseUnset(object, path);
    }

    /**
     * This method is like `_.set` except that accepts `updater` to produce the
     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`
     * is invoked with one argument: (value).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.6.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {Function} updater The function to produce the updated value.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.update(object, 'a[0].b.c', function(n) { return n * n; });
     * console.log(object.a[0].b.c);
     * // => 9
     *
     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });
     * console.log(object.x[0].y.z);
     * // => 0
     */
    function update(object, path, updater) {
      return object == null ? object : baseUpdate(object, path, castFunction(updater));
    }

    /**
     * This method is like `_.update` except that it accepts `customizer` which is
     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`
     * path creation is handled by the method instead. The `customizer` is invoked
     * with three arguments: (nsValue, key, nsObject).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.6.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {Function} updater The function to produce the updated value.
     * @param {Function} [customizer] The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = {};
     *
     * _.updateWith(object, '[0][1]', _.constant('a'), Object);
     * // => { '0': { '1': 'a' } }
     */
    function updateWith(object, path, updater, customizer) {
      customizer = typeof customizer == 'function' ? customizer : undefined;
      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);
    }

    /**
     * Creates an array of the own enumerable string keyed property values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.values(new Foo);
     * // => [1, 2] (iteration order is not guaranteed)
     *
     * _.values('hi');
     * // => ['h', 'i']
     */
    function values(object) {
      return object == null ? [] : baseValues(object, keys(object));
    }

    /**
     * Creates an array of the own and inherited enumerable string keyed property
     * values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.valuesIn(new Foo);
     * // => [1, 2, 3] (iteration order is not guaranteed)
     */
    function valuesIn(object) {
      return object == null ? [] : baseValues(object, keysIn(object));
    }

    /*------------------------------------------------------------------------*/

    /**
     * Clamps `number` within the inclusive `lower` and `upper` bounds.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Number
     * @param {number} number The number to clamp.
     * @param {number} [lower] The lower bound.
     * @param {number} upper The upper bound.
     * @returns {number} Returns the clamped number.
     * @example
     *
     * _.clamp(-10, -5, 5);
     * // => -5
     *
     * _.clamp(10, -5, 5);
     * // => 5
     */
    function clamp(number, lower, upper) {
      if (upper === undefined) {
        upper = lower;
        lower = undefined;
      }
      if (upper !== undefined) {
        upper = toNumber(upper);
        upper = upper === upper ? upper : 0;
      }
      if (lower !== undefined) {
        lower = toNumber(lower);
        lower = lower === lower ? lower : 0;
      }
      return baseClamp(toNumber(number), lower, upper);
    }

    /**
     * Checks if `n` is between `start` and up to, but not including, `end`. If
     * `end` is not specified, it's set to `start` with `start` then set to `0`.
     * If `start` is greater than `end` the params are swapped to support
     * negative ranges.
     *
     * @static
     * @memberOf _
     * @since 3.3.0
     * @category Number
     * @param {number} number The number to check.
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.
     * @see _.range, _.rangeRight
     * @example
     *
     * _.inRange(3, 2, 4);
     * // => true
     *
     * _.inRange(4, 8);
     * // => true
     *
     * _.inRange(4, 2);
     * // => false
     *
     * _.inRange(2, 2);
     * // => false
     *
     * _.inRange(1.2, 2);
     * // => true
     *
     * _.inRange(5.2, 4);
     * // => false
     *
     * _.inRange(-3, -2, -6);
     * // => true
     */
    function inRange(number, start, end) {
      start = toFinite(start);
      if (end === undefined) {
        end = start;
        start = 0;
      } else {
        end = toFinite(end);
      }
      number = toNumber(number);
      return baseInRange(number, start, end);
    }

    /**
     * Produces a random number between the inclusive `lower` and `upper` bounds.
     * If only one argument is provided a number between `0` and the given number
     * is returned. If `floating` is `true`, or either `lower` or `upper` are
     * floats, a floating-point number is returned instead of an integer.
     *
     * **Note:** JavaScript follows the IEEE-754 standard for resolving
     * floating-point values which can produce unexpected results.
     *
     * @static
     * @memberOf _
     * @since 0.7.0
     * @category Number
     * @param {number} [lower=0] The lower bound.
     * @param {number} [upper=1] The upper bound.
     * @param {boolean} [floating] Specify returning a floating-point number.
     * @returns {number} Returns the random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */
    function random(lower, upper, floating) {
      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {
        upper = floating = undefined;
      }
      if (floating === undefined) {
        if (typeof upper == 'boolean') {
          floating = upper;
          upper = undefined;
        }
        else if (typeof lower == 'boolean') {
          floating = lower;
          lower = undefined;
        }
      }
      if (lower === undefined && upper === undefined) {
        lower = 0;
        upper = 1;
      }
      else {
        lower = toFinite(lower);
        if (upper === undefined) {
          upper = lower;
          lower = 0;
        } else {
          upper = toFinite(upper);
        }
      }
      if (lower > upper) {
        var temp = lower;
        lower = upper;
        upper = temp;
      }
      if (floating || lower % 1 || upper % 1) {
        var rand = nativeRandom();
        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);
      }
      return baseRandom(lower, upper);
    }

    /*------------------------------------------------------------------------*/

    /**
     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the camel cased string.
     * @example
     *
     * _.camelCase('Foo Bar');
     * // => 'fooBar'
     *
     * _.camelCase('--foo-bar--');
     * // => 'fooBar'
     *
     * _.camelCase('__FOO_BAR__');
     * // => 'fooBar'
     */
    var camelCase = createCompounder(function(result, word, index) {
      word = word.toLowerCase();
      return result + (index ? capitalize(word) : word);
    });

    /**
     * Converts the first character of `string` to upper case and the remaining
     * to lower case.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to capitalize.
     * @returns {string} Returns the capitalized string.
     * @example
     *
     * _.capitalize('FRED');
     * // => 'Fred'
     */
    function capitalize(string) {
      return upperFirst(toString(string).toLowerCase());
    }

    /**
     * Deburrs `string` by converting
     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)
     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)
     * letters to basic Latin letters and removing
     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to deburr.
     * @returns {string} Returns the deburred string.
     * @example
     *
     * _.deburr('dj vu');
     * // => 'deja vu'
     */
    function deburr(string) {
      string = toString(string);
      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');
    }

    /**
     * Checks if `string` ends with the given target string.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {string} [target] The string to search for.
     * @param {number} [position=string.length] The position to search up to.
     * @returns {boolean} Returns `true` if `string` ends with `target`,
     *  else `false`.
     * @example
     *
     * _.endsWith('abc', 'c');
     * // => true
     *
     * _.endsWith('abc', 'b');
     * // => false
     *
     * _.endsWith('abc', 'b', 2);
     * // => true
     */
    function endsWith(string, target, position) {
      string = toString(string);
      target = baseToString(target);

      var length = string.length;
      position = position === undefined
        ? length
        : baseClamp(toInteger(position), 0, length);

      var end = position;
      position -= target.length;
      return position >= 0 && string.slice(position, end) == target;
    }

    /**
     * Converts the characters "&", "<", ">", '"', and "'" in `string` to their
     * corresponding HTML entities.
     *
     * **Note:** No other characters are escaped. To escape additional
     * characters use a third-party library like [_he_](https://mths.be/he).
     *
     * Though the ">" character is escaped for symmetry, characters like
     * ">" and "/" don't need escaping in HTML and have no special meaning
     * unless they're part of a tag or unquoted attribute value. See
     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
     * (under "semi-related fun fact") for more details.
     *
     * When working with HTML you should always
     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce
     * XSS vectors.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('fred, barney, & pebbles');
     * // => 'fred, barney, &amp; pebbles'
     */
    function escape(string) {
      string = toString(string);
      return (string && reHasUnescapedHtml.test(string))
        ? string.replace(reUnescapedHtml, escapeHtmlChar)
        : string;
    }

    /**
     * Escapes the `RegExp` special characters "^", "$", "\", ".", "*", "+",
     * "?", "(", ")", "[", "]", "{", "}", and "|" in `string`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escapeRegExp('[lodash](https://lodash.com/)');
     * // => '\[lodash\]\(https://lodash\.com/\)'
     */
    function escapeRegExp(string) {
      string = toString(string);
      return (string && reHasRegExpChar.test(string))
        ? string.replace(reRegExpChar, '\\$&')
        : string;
    }

    /**
     * Converts `string` to
     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the kebab cased string.
     * @example
     *
     * _.kebabCase('Foo Bar');
     * // => 'foo-bar'
     *
     * _.kebabCase('fooBar');
     * // => 'foo-bar'
     *
     * _.kebabCase('__FOO_BAR__');
     * // => 'foo-bar'
     */
    var kebabCase = createCompounder(function(result, word, index) {
      return result + (index ? '-' : '') + word.toLowerCase();
    });

    /**
     * Converts `string`, as space separated words, to lower case.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the lower cased string.
     * @example
     *
     * _.lowerCase('--Foo-Bar--');
     * // => 'foo bar'
     *
     * _.lowerCase('fooBar');
     * // => 'foo bar'
     *
     * _.lowerCase('__FOO_BAR__');
     * // => 'foo bar'
     */
    var lowerCase = createCompounder(function(result, word, index) {
      return result + (index ? ' ' : '') + word.toLowerCase();
    });

    /**
     * Converts the first character of `string` to lower case.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the converted string.
     * @example
     *
     * _.lowerFirst('Fred');
     * // => 'fred'
     *
     * _.lowerFirst('FRED');
     * // => 'fRED'
     */
    var lowerFirst = createCaseFirst('toLowerCase');

    /**
     * Pads `string` on the left and right sides if it's shorter than `length`.
     * Padding characters are truncated if they can't be evenly divided by `length`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.pad('abc', 8);
     * // => '  abc   '
     *
     * _.pad('abc', 8, '_-');
     * // => '_-abc_-_'
     *
     * _.pad('abc', 3);
     * // => 'abc'
     */
    function pad(string, length, chars) {
      string = toString(string);
      length = toInteger(length);

      var strLength = length ? stringSize(string) : 0;
      if (!length || strLength >= length) {
        return string;
      }
      var mid = (length - strLength) / 2;
      return (
        createPadding(nativeFloor(mid), chars) +
        string +
        createPadding(nativeCeil(mid), chars)
      );
    }

    /**
     * Pads `string` on the right side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padEnd('abc', 6);
     * // => 'abc   '
     *
     * _.padEnd('abc', 6, '_-');
     * // => 'abc_-_'
     *
     * _.padEnd('abc', 3);
     * // => 'abc'
     */
    function padEnd(string, length, chars) {
      string = toString(string);
      length = toInteger(length);

      var strLength = length ? stringSize(string) : 0;
      return (length && strLength < length)
        ? (string + createPadding(length - strLength, chars))
        : string;
    }

    /**
     * Pads `string` on the left side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padStart('abc', 6);
     * // => '   abc'
     *
     * _.padStart('abc', 6, '_-');
     * // => '_-_abc'
     *
     * _.padStart('abc', 3);
     * // => 'abc'
     */
    function padStart(string, length, chars) {
      string = toString(string);
      length = toInteger(length);

      var strLength = length ? stringSize(string) : 0;
      return (length && strLength < length)
        ? (createPadding(length - strLength, chars) + string)
        : string;
    }

    /**
     * Converts `string` to an integer of the specified radix. If `radix` is
     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a
     * hexadecimal, in which case a `radix` of `16` is used.
     *
     * **Note:** This method aligns with the
     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.
     *
     * @static
     * @memberOf _
     * @since 1.1.0
     * @category String
     * @param {string} string The string to convert.
     * @param {number} [radix=10] The radix to interpret `value` by.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     *
     * _.map(['6', '08', '10'], _.parseInt);
     * // => [6, 8, 10]
     */
    function parseInt(string, radix, guard) {
      if (guard || radix == null) {
        radix = 0;
      } else if (radix) {
        radix = +radix;
      }
      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);
    }

    /**
     * Repeats the given string `n` times.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to repeat.
     * @param {number} [n=1] The number of times to repeat the string.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the repeated string.
     * @example
     *
     * _.repeat('*', 3);
     * // => '***'
     *
     * _.repeat('abc', 2);
     * // => 'abcabc'
     *
     * _.repeat('abc', 0);
     * // => ''
     */
    function repeat(string, n, guard) {
      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {
        n = 1;
      } else {
        n = toInteger(n);
      }
      return baseRepeat(toString(string), n);
    }

    /**
     * Replaces matches for `pattern` in `string` with `replacement`.
     *
     * **Note:** This method is based on
     * [`String#replace`](https://mdn.io/String/replace).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to modify.
     * @param {RegExp|string} pattern The pattern to replace.
     * @param {Function|string} replacement The match replacement.
     * @returns {string} Returns the modified string.
     * @example
     *
     * _.replace('Hi Fred', 'Fred', 'Barney');
     * // => 'Hi Barney'
     */
    function replace() {
      var args = arguments,
          string = toString(args[0]);

      return args.length < 3 ? string : string.replace(args[1], args[2]);
    }

    /**
     * Converts `string` to
     * [snake case](https://en.wikipedia.org/wiki/Snake_case).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the snake cased string.
     * @example
     *
     * _.snakeCase('Foo Bar');
     * // => 'foo_bar'
     *
     * _.snakeCase('fooBar');
     * // => 'foo_bar'
     *
     * _.snakeCase('--FOO-BAR--');
     * // => 'foo_bar'
     */
    var snakeCase = createCompounder(function(result, word, index) {
      return result + (index ? '_' : '') + word.toLowerCase();
    });

    /**
     * Splits `string` by `separator`.
     *
     * **Note:** This method is based on
     * [`String#split`](https://mdn.io/String/split).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to split.
     * @param {RegExp|string} separator The separator pattern to split by.
     * @param {number} [limit] The length to truncate results to.
     * @returns {Array} Returns the string segments.
     * @example
     *
     * _.split('a-b-c', '-', 2);
     * // => ['a', 'b']
     */
    function split(string, separator, limit) {
      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {
        separator = limit = undefined;
      }
      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;
      if (!limit) {
        return [];
      }
      string = toString(string);
      if (string && (
            typeof separator == 'string' ||
            (separator != null && !isRegExp(separator))
          )) {
        separator = baseToString(separator);
        if (!separator && hasUnicode(string)) {
          return castSlice(stringToArray(string), 0, limit);
        }
      }
      return string.split(separator, limit);
    }

    /**
     * Converts `string` to
     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).
     *
     * @static
     * @memberOf _
     * @since 3.1.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the start cased string.
     * @example
     *
     * _.startCase('--foo-bar--');
     * // => 'Foo Bar'
     *
     * _.startCase('fooBar');
     * // => 'Foo Bar'
     *
     * _.startCase('__FOO_BAR__');
     * // => 'FOO BAR'
     */
    var startCase = createCompounder(function(result, word, index) {
      return result + (index ? ' ' : '') + upperFirst(word);
    });

    /**
     * Checks if `string` starts with the given target string.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {string} [target] The string to search for.
     * @param {number} [position=0] The position to search from.
     * @returns {boolean} Returns `true` if `string` starts with `target`,
     *  else `false`.
     * @example
     *
     * _.startsWith('abc', 'a');
     * // => true
     *
     * _.startsWith('abc', 'b');
     * // => false
     *
     * _.startsWith('abc', 'b', 1);
     * // => true
     */
    function startsWith(string, target, position) {
      string = toString(string);
      position = position == null
        ? 0
        : baseClamp(toInteger(position), 0, string.length);

      target = baseToString(target);
      return string.slice(position, position + target.length) == target;
    }

    /**
     * Creates a compiled template function that can interpolate data properties
     * in "interpolate" delimiters, HTML-escape interpolated data properties in
     * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
     * properties may be accessed as free variables in the template. If a setting
     * object is given, it takes precedence over `_.templateSettings` values.
     *
     * **Note:** In the development build `_.template` utilizes
     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
     * for easier debugging.
     *
     * For more information on precompiling templates see
     * [lodash's custom builds documentation](https://lodash.com/custom-builds).
     *
     * For more information on Chrome extension sandboxes see
     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category String
     * @param {string} [string=''] The template string.
     * @param {Object} [options={}] The options object.
     * @param {RegExp} [options.escape=_.templateSettings.escape]
     *  The HTML "escape" delimiter.
     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]
     *  The "evaluate" delimiter.
     * @param {Object} [options.imports=_.templateSettings.imports]
     *  An object to import into the template as free variables.
     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]
     *  The "interpolate" delimiter.
     * @param {string} [options.sourceURL='lodash.templateSources[n]']
     *  The sourceURL of the compiled template.
     * @param {string} [options.variable='obj']
     *  The data object variable name.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the compiled template function.
     * @example
     *
     * // Use the "interpolate" delimiter to create a compiled template.
     * var compiled = _.template('hello <%= user %>!');
     * compiled({ 'user': 'fred' });
     * // => 'hello fred!'
     *
     * // Use the HTML "escape" delimiter to escape data property values.
     * var compiled = _.template('<b><%- value %></b>');
     * compiled({ 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // Use the "evaluate" delimiter to execute JavaScript and generate HTML.
     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // Use the internal `print` function in "evaluate" delimiters.
     * var compiled = _.template('<% print("hello " + user); %>!');
     * compiled({ 'user': 'barney' });
     * // => 'hello barney!'
     *
     * // Use the ES template literal delimiter as an "interpolate" delimiter.
     * // Disable support by replacing the "interpolate" delimiter.
     * var compiled = _.template('hello ${ user }!');
     * compiled({ 'user': 'pebbles' });
     * // => 'hello pebbles!'
     *
     * // Use backslashes to treat delimiters as plain text.
     * var compiled = _.template('<%= "\\<%- value %\\>" %>');
     * compiled({ 'value': 'ignored' });
     * // => '<%- value %>'
     *
     * // Use the `imports` option to import `jQuery` as `jq`.
     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // Use the `sourceURL` option to specify a custom sourceURL for the template.
     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => Find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector.
     *
     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.
     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     * //   var __t, __p = '';
     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
     * //   return __p;
     * // }
     *
     * // Use custom template delimiters.
     * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
     * var compiled = _.template('hello {{ user }}!');
     * compiled({ 'user': 'mustache' });
     * // => 'hello mustache!'
     *
     * // Use the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and stack traces.
     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */
    function template(string, options, guard) {
      // Based on John Resig's `tmpl` implementation
      // (http://ejohn.org/blog/javascript-micro-templating/)
      // and Laura Doktorova's doT.js (https://github.com/olado/doT).
      var settings = lodash.templateSettings;

      if (guard && isIterateeCall(string, options, guard)) {
        options = undefined;
      }
      string = toString(string);
      options = assignInWith({}, options, settings, customDefaultsAssignIn);

      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),
          importsKeys = keys(imports),
          importsValues = baseValues(imports, importsKeys);

      var isEscaping,
          isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

      // Compile the regexp to match each delimiter.
      var reDelimiters = RegExp(
        (options.escape || reNoMatch).source + '|' +
        interpolate.source + '|' +
        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
        (options.evaluate || reNoMatch).source + '|$'
      , 'g');

      // Use a sourceURL for easier debugging.
      // The sourceURL gets injected into the source that's eval-ed, so be careful
      // with lookup (in case of e.g. prototype pollution), and strip newlines if any.
      // A newline wouldn't be a valid sourceURL anyway, and it'd enable code injection.
      var sourceURL = '//# sourceURL=' +
        (hasOwnProperty.call(options, 'sourceURL')
          ? (options.sourceURL + '').replace(/[\r\n]/g, ' ')
          : ('lodash.templateSources[' + (++templateCounter) + ']')
        ) + '\n';

      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
        interpolateValue || (interpolateValue = esTemplateValue);

        // Escape characters that can't be included in string literals.
        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

        // Replace delimiters with snippets.
        if (escapeValue) {
          isEscaping = true;
          source += "' +\n__e(" + escapeValue + ") +\n'";
        }
        if (evaluateValue) {
          isEvaluating = true;
          source += "';\n" + evaluateValue + ";\n__p += '";
        }
        if (interpolateValue) {
          source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
        }
        index = offset + match.length;

        // The JS engine embedded in Adobe products needs `match` returned in
        // order to produce the correct `offset` value.
        return match;
      });

      source += "';\n";

      // If `variable` is not specified wrap a with-statement around the generated
      // code to add the data object to the top of the scope chain.
      // Like with sourceURL, we take care to not check the option's prototype,
      // as this configuration is a code injection vector.
      var variable = hasOwnProperty.call(options, 'variable') && options.variable;
      if (!variable) {
        source = 'with (obj) {\n' + source + '\n}\n';
      }
      // Cleanup code by stripping empty strings.
      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
        .replace(reEmptyStringMiddle, '$1')
        .replace(reEmptyStringTrailing, '$1;');

      // Frame code as the function body.
      source = 'function(' + (variable || 'obj') + ') {\n' +
        (variable
          ? ''
          : 'obj || (obj = {});\n'
        ) +
        "var __t, __p = ''" +
        (isEscaping
           ? ', __e = _.escape'
           : ''
        ) +
        (isEvaluating
          ? ', __j = Array.prototype.join;\n' +
            "function print() { __p += __j.call(arguments, '') }\n"
          : ';\n'
        ) +
        source +
        'return __p\n}';

      var result = attempt(function() {
        return Function(importsKeys, sourceURL + 'return ' + source)
          .apply(undefined, importsValues);
      });

      // Provide the compiled function's source by its `toString` method or
      // the `source` property as a convenience for inlining compiled templates.
      result.source = source;
      if (isError(result)) {
        throw result;
      }
      return result;
    }

    /**
     * Converts `string`, as a whole, to lower case just like
     * [String#toLowerCase](https://mdn.io/toLowerCase).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the lower cased string.
     * @example
     *
     * _.toLower('--Foo-Bar--');
     * // => '--foo-bar--'
     *
     * _.toLower('fooBar');
     * // => 'foobar'
     *
     * _.toLower('__FOO_BAR__');
     * // => '__foo_bar__'
     */
    function toLower(value) {
      return toString(value).toLowerCase();
    }

    /**
     * Converts `string`, as a whole, to upper case just like
     * [String#toUpperCase](https://mdn.io/toUpperCase).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the upper cased string.
     * @example
     *
     * _.toUpper('--foo-bar--');
     * // => '--FOO-BAR--'
     *
     * _.toUpper('fooBar');
     * // => 'FOOBAR'
     *
     * _.toUpper('__foo_bar__');
     * // => '__FOO_BAR__'
     */
    function toUpper(value) {
      return toString(value).toUpperCase();
    }

    /**
     * Removes leading and trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trim('  abc  ');
     * // => 'abc'
     *
     * _.trim('-_-abc-_-', '_-');
     * // => 'abc'
     *
     * _.map(['  foo  ', '  bar  '], _.trim);
     * // => ['foo', 'bar']
     */
    function trim(string, chars, guard) {
      string = toString(string);
      if (string && (guard || chars === undefined)) {
        return string.replace(reTrim, '');
      }
      if (!string || !(chars = baseToString(chars))) {
        return string;
      }
      var strSymbols = stringToArray(string),
          chrSymbols = stringToArray(chars),
          start = charsStartIndex(strSymbols, chrSymbols),
          end = charsEndIndex(strSymbols, chrSymbols) + 1;

      return castSlice(strSymbols, start, end).join('');
    }

    /**
     * Removes trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimEnd('  abc  ');
     * // => '  abc'
     *
     * _.trimEnd('-_-abc-_-', '_-');
     * // => '-_-abc'
     */
    function trimEnd(string, chars, guard) {
      string = toString(string);
      if (string && (guard || chars === undefined)) {
        return string.replace(reTrimEnd, '');
      }
      if (!string || !(chars = baseToString(chars))) {
        return string;
      }
      var strSymbols = stringToArray(string),
          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;

      return castSlice(strSymbols, 0, end).join('');
    }

    /**
     * Removes leading whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimStart('  abc  ');
     * // => 'abc  '
     *
     * _.trimStart('-_-abc-_-', '_-');
     * // => 'abc-_-'
     */
    function trimStart(string, chars, guard) {
      string = toString(string);
      if (string && (guard || chars === undefined)) {
        return string.replace(reTrimStart, '');
      }
      if (!string || !(chars = baseToString(chars))) {
        return string;
      }
      var strSymbols = stringToArray(string),
          start = charsStartIndex(strSymbols, stringToArray(chars));

      return castSlice(strSymbols, start).join('');
    }

    /**
     * Truncates `string` if it's longer than the given maximum string length.
     * The last characters of the truncated string are replaced with the omission
     * string which defaults to "...".
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to truncate.
     * @param {Object} [options={}] The options object.
     * @param {number} [options.length=30] The maximum string length.
     * @param {string} [options.omission='...'] The string to indicate text is omitted.
     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.
     * @returns {string} Returns the truncated string.
     * @example
     *
     * _.truncate('hi-diddly-ho there, neighborino');
     * // => 'hi-diddly-ho there, neighbo...'
     *
     * _.truncate('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': ' '
     * });
     * // => 'hi-diddly-ho there,...'
     *
     * _.truncate('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': /,? +/
     * });
     * // => 'hi-diddly-ho there...'
     *
     * _.truncate('hi-diddly-ho there, neighborino', {
     *   'omission': ' [...]'
     * });
     * // => 'hi-diddly-ho there, neig [...]'
     */
    function truncate(string, options) {
      var length = DEFAULT_TRUNC_LENGTH,
          omission = DEFAULT_TRUNC_OMISSION;

      if (isObject(options)) {
        var separator = 'separator' in options ? options.separator : separator;
        length = 'length' in options ? toInteger(options.length) : length;
        omission = 'omission' in options ? baseToString(options.omission) : omission;
      }
      string = toString(string);

      var strLength = string.length;
      if (hasUnicode(string)) {
        var strSymbols = stringToArray(string);
        strLength = strSymbols.length;
      }
      if (length >= strLength) {
        return string;
      }
      var end = length - stringSize(omission);
      if (end < 1) {
        return omission;
      }
      var result = strSymbols
        ? castSlice(strSymbols, 0, end).join('')
        : string.slice(0, end);

      if (separator === undefined) {
        return result + omission;
      }
      if (strSymbols) {
        end += (result.length - end);
      }
      if (isRegExp(separator)) {
        if (string.slice(end).search(separator)) {
          var match,
              substring = result;

          if (!separator.global) {
            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');
          }
          separator.lastIndex = 0;
          while ((match = separator.exec(substring))) {
            var newEnd = match.index;
          }
          result = result.slice(0, newEnd === undefined ? end : newEnd);
        }
      } else if (string.indexOf(baseToString(separator), end) != end) {
        var index = result.lastIndexOf(separator);
        if (index > -1) {
          result = result.slice(0, index);
        }
      }
      return result + omission;
    }

    /**
     * The inverse of `_.escape`; this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to
     * their corresponding characters.
     *
     * **Note:** No other HTML entities are unescaped. To unescape additional
     * HTML entities use a third-party library like [_he_](https://mths.be/he).
     *
     * @static
     * @memberOf _
     * @since 0.6.0
     * @category String
     * @param {string} [string=''] The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('fred, barney, &amp; pebbles');
     * // => 'fred, barney, & pebbles'
     */
    function unescape(string) {
      string = toString(string);
      return (string && reHasEscapedHtml.test(string))
        ? string.replace(reEscapedHtml, unescapeHtmlChar)
        : string;
    }

    /**
     * Converts `string`, as space separated words, to upper case.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the upper cased string.
     * @example
     *
     * _.upperCase('--foo-bar');
     * // => 'FOO BAR'
     *
     * _.upperCase('fooBar');
     * // => 'FOO BAR'
     *
     * _.upperCase('__foo_bar__');
     * // => 'FOO BAR'
     */
    var upperCase = createCompounder(function(result, word, index) {
      return result + (index ? ' ' : '') + word.toUpperCase();
    });

    /**
     * Converts the first character of `string` to upper case.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the converted string.
     * @example
     *
     * _.upperFirst('fred');
     * // => 'Fred'
     *
     * _.upperFirst('FRED');
     * // => 'FRED'
     */
    var upperFirst = createCaseFirst('toUpperCase');

    /**
     * Splits `string` into an array of its words.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {RegExp|string} [pattern] The pattern to match words.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the words of `string`.
     * @example
     *
     * _.words('fred, barney, & pebbles');
     * // => ['fred', 'barney', 'pebbles']
     *
     * _.words('fred, barney, & pebbles', /[^, ]+/g);
     * // => ['fred', 'barney', '&', 'pebbles']
     */
    function words(string, pattern, guard) {
      string = toString(string);
      pattern = guard ? undefined : pattern;

      if (pattern === undefined) {
        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);
      }
      return string.match(pattern) || [];
    }

    /*------------------------------------------------------------------------*/

    /**
     * Attempts to invoke `func`, returning either the result or the caught error
     * object. Any additional arguments are provided to `func` when it's invoked.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {Function} func The function to attempt.
     * @param {...*} [args] The arguments to invoke `func` with.
     * @returns {*} Returns the `func` result or error object.
     * @example
     *
     * // Avoid throwing errors for invalid selectors.
     * var elements = _.attempt(function(selector) {
     *   return document.querySelectorAll(selector);
     * }, '>_>');
     *
     * if (_.isError(elements)) {
     *   elements = [];
     * }
     */
    var attempt = baseRest(function(func, args) {
      try {
        return apply(func, undefined, args);
      } catch (e) {
        return isError(e) ? e : new Error(e);
      }
    });

    /**
     * Binds methods of an object to the object itself, overwriting the existing
     * method.
     *
     * **Note:** This method doesn't set the "length" property of bound functions.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {Object} object The object to bind and assign the bound methods to.
     * @param {...(string|string[])} methodNames The object method names to bind.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var view = {
     *   'label': 'docs',
     *   'click': function() {
     *     console.log('clicked ' + this.label);
     *   }
     * };
     *
     * _.bindAll(view, ['click']);
     * jQuery(element).on('click', view.click);
     * // => Logs 'clicked docs' when clicked.
     */
    var bindAll = flatRest(function(object, methodNames) {
      arrayEach(methodNames, function(key) {
        key = toKey(key);
        baseAssignValue(object, key, bind(object[key], object));
      });
      return object;
    });

    /**
     * Creates a function that iterates over `pairs` and invokes the corresponding
     * function of the first predicate to return truthy. The predicate-function
     * pairs are invoked with the `this` binding and arguments of the created
     * function.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {Array} pairs The predicate-function pairs.
     * @returns {Function} Returns the new composite function.
     * @example
     *
     * var func = _.cond([
     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],
     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],
     *   [_.stubTrue,                      _.constant('no match')]
     * ]);
     *
     * func({ 'a': 1, 'b': 2 });
     * // => 'matches A'
     *
     * func({ 'a': 0, 'b': 1 });
     * // => 'matches B'
     *
     * func({ 'a': '1', 'b': '2' });
     * // => 'no match'
     */
    function cond(pairs) {
      var length = pairs == null ? 0 : pairs.length,
          toIteratee = getIteratee();

      pairs = !length ? [] : arrayMap(pairs, function(pair) {
        if (typeof pair[1] != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        return [toIteratee(pair[0]), pair[1]];
      });

      return baseRest(function(args) {
        var index = -1;
        while (++index < length) {
          var pair = pairs[index];
          if (apply(pair[0], this, args)) {
            return apply(pair[1], this, args);
          }
        }
      });
    }

    /**
     * Creates a function that invokes the predicate properties of `source` with
     * the corresponding property values of a given object, returning `true` if
     * all predicates return truthy, else `false`.
     *
     * **Note:** The created function is equivalent to `_.conformsTo` with
     * `source` partially applied.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {Object} source The object of property predicates to conform to.
     * @returns {Function} Returns the new spec function.
     * @example
     *
     * var objects = [
     *   { 'a': 2, 'b': 1 },
     *   { 'a': 1, 'b': 2 }
     * ];
     *
     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));
     * // => [{ 'a': 1, 'b': 2 }]
     */
    function conforms(source) {
      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));
    }

    /**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Util
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new constant function.
     * @example
     *
     * var objects = _.times(2, _.constant({ 'a': 1 }));
     *
     * console.log(objects);
     * // => [{ 'a': 1 }, { 'a': 1 }]
     *
     * console.log(objects[0] === objects[1]);
     * // => true
     */
    function constant(value) {
      return function() {
        return value;
      };
    }

    /**
     * Checks `value` to determine whether a default value should be returned in
     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,
     * or `undefined`.
     *
     * @static
     * @memberOf _
     * @since 4.14.0
     * @category Util
     * @param {*} value The value to check.
     * @param {*} defaultValue The default value.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * _.defaultTo(1, 10);
     * // => 1
     *
     * _.defaultTo(undefined, 10);
     * // => 10
     */
    function defaultTo(value, defaultValue) {
      return (value == null || value !== value) ? defaultValue : value;
    }

    /**
     * Creates a function that returns the result of invoking the given functions
     * with the `this` binding of the created function, where each successive
     * invocation is supplied the return value of the previous.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {...(Function|Function[])} [funcs] The functions to invoke.
     * @returns {Function} Returns the new composite function.
     * @see _.flowRight
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flow([_.add, square]);
     * addSquare(1, 2);
     * // => 9
     */
    var flow = createFlow();

    /**
     * This method is like `_.flow` except that it creates a function that
     * invokes the given functions from right to left.
     *
     * @static
     * @since 3.0.0
     * @memberOf _
     * @category Util
     * @param {...(Function|Function[])} [funcs] The functions to invoke.
     * @returns {Function} Returns the new composite function.
     * @see _.flow
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flowRight([square, _.add]);
     * addSquare(1, 2);
     * // => 9
     */
    var flowRight = createFlow(true);

    /**
     * This method returns the first argument it receives.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'a': 1 };
     *
     * console.log(_.identity(object) === object);
     * // => true
     */
    function identity(value) {
      return value;
    }

    /**
     * Creates a function that invokes `func` with the arguments of the created
     * function. If `func` is a property name, the created function returns the
     * property value for a given element. If `func` is an array or object, the
     * created function returns `true` for elements that contain the equivalent
     * source properties, otherwise it returns `false`.
     *
     * @static
     * @since 4.0.0
     * @memberOf _
     * @category Util
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @returns {Function} Returns the callback.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));
     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.filter(users, _.iteratee(['user', 'fred']));
     * // => [{ 'user': 'fred', 'age': 40 }]
     *
     * // The `_.property` iteratee shorthand.
     * _.map(users, _.iteratee('user'));
     * // => ['barney', 'fred']
     *
     * // Create custom iteratee shorthands.
     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {
     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {
     *     return func.test(string);
     *   };
     * });
     *
     * _.filter(['abc', 'def'], /ef/);
     * // => ['def']
     */
    function iteratee(func) {
      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));
    }

    /**
     * Creates a function that performs a partial deep comparison between a given
     * object and `source`, returning `true` if the given object has equivalent
     * property values, else `false`.
     *
     * **Note:** The created function is equivalent to `_.isMatch` with `source`
     * partially applied.
     *
     * Partial comparisons will match empty array and empty object `source`
     * values against any array or object value, respectively. See `_.isEqual`
     * for a list of supported value comparisons.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new spec function.
     * @example
     *
     * var objects = [
     *   { 'a': 1, 'b': 2, 'c': 3 },
     *   { 'a': 4, 'b': 5, 'c': 6 }
     * ];
     *
     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));
     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]
     */
    function matches(source) {
      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));
    }

    /**
     * Creates a function that performs a partial deep comparison between the
     * value at `path` of a given object to `srcValue`, returning `true` if the
     * object value is equivalent, else `false`.
     *
     * **Note:** Partial comparisons will match empty array and empty object
     * `srcValue` values against any array or object value, respectively. See
     * `_.isEqual` for a list of supported value comparisons.
     *
     * @static
     * @memberOf _
     * @since 3.2.0
     * @category Util
     * @param {Array|string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     * @example
     *
     * var objects = [
     *   { 'a': 1, 'b': 2, 'c': 3 },
     *   { 'a': 4, 'b': 5, 'c': 6 }
     * ];
     *
     * _.find(objects, _.matchesProperty('a', 4));
     * // => { 'a': 4, 'b': 5, 'c': 6 }
     */
    function matchesProperty(path, srcValue) {
      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));
    }

    /**
     * Creates a function that invokes the method at `path` of a given object.
     * Any additional arguments are provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Util
     * @param {Array|string} path The path of the method to invoke.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new invoker function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': _.constant(2) } },
     *   { 'a': { 'b': _.constant(1) } }
     * ];
     *
     * _.map(objects, _.method('a.b'));
     * // => [2, 1]
     *
     * _.map(objects, _.method(['a', 'b']));
     * // => [2, 1]
     */
    var method = baseRest(function(path, args) {
      return function(object) {
        return baseInvoke(object, path, args);
      };
    });

    /**
     * The opposite of `_.method`; this method creates a function that invokes
     * the method at a given path of `object`. Any additional arguments are
     * provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Util
     * @param {Object} object The object to query.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new invoker function.
     * @example
     *
     * var array = _.times(3, _.constant),
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.methodOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));
     * // => [2, 0]
     */
    var methodOf = baseRest(function(object, args) {
      return function(path) {
        return baseInvoke(object, path, args);
      };
    });

    /**
     * Adds all own enumerable string keyed function properties of a source
     * object to the destination object. If `object` is a function, then methods
     * are added to its prototype as well.
     *
     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to
     * avoid conflicts caused by modifying the original.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {Function|Object} [object=lodash] The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options={}] The options object.
     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.
     * @returns {Function|Object} Returns `object`.
     * @example
     *
     * function vowels(string) {
     *   return _.filter(string, function(v) {
     *     return /[aeiou]/i.test(v);
     *   });
     * }
     *
     * _.mixin({ 'vowels': vowels });
     * _.vowels('fred');
     * // => ['e']
     *
     * _('fred').vowels().value();
     * // => ['e']
     *
     * _.mixin({ 'vowels': vowels }, { 'chain': false });
     * _('fred').vowels();
     * // => ['e']
     */
    function mixin(object, source, options) {
      var props = keys(source),
          methodNames = baseFunctions(source, props);

      if (options == null &&
          !(isObject(source) && (methodNames.length || !props.length))) {
        options = source;
        source = object;
        object = this;
        methodNames = baseFunctions(source, keys(source));
      }
      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,
          isFunc = isFunction(object);

      arrayEach(methodNames, function(methodName) {
        var func = source[methodName];
        object[methodName] = func;
        if (isFunc) {
          object.prototype[methodName] = function() {
            var chainAll = this.__chain__;
            if (chain || chainAll) {
              var result = object(this.__wrapped__),
                  actions = result.__actions__ = copyArray(this.__actions__);

              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });
              result.__chain__ = chainAll;
              return result;
            }
            return func.apply(object, arrayPush([this.value()], arguments));
          };
        }
      });

      return object;
    }

    /**
     * Reverts the `_` variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */
    function noConflict() {
      if (root._ === this) {
        root._ = oldDash;
      }
      return this;
    }

    /**
     * This method returns `undefined`.
     *
     * @static
     * @memberOf _
     * @since 2.3.0
     * @category Util
     * @example
     *
     * _.times(2, _.noop);
     * // => [undefined, undefined]
     */
    function noop() {
      // No operation performed.
    }

    /**
     * Creates a function that gets the argument at index `n`. If `n` is negative,
     * the nth argument from the end is returned.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {number} [n=0] The index of the argument to return.
     * @returns {Function} Returns the new pass-thru function.
     * @example
     *
     * var func = _.nthArg(1);
     * func('a', 'b', 'c', 'd');
     * // => 'b'
     *
     * var func = _.nthArg(-2);
     * func('a', 'b', 'c', 'd');
     * // => 'c'
     */
    function nthArg(n) {
      n = toInteger(n);
      return baseRest(function(args) {
        return baseNth(args, n);
      });
    }

    /**
     * Creates a function that invokes `iteratees` with the arguments it receives
     * and returns their results.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {...(Function|Function[])} [iteratees=[_.identity]]
     *  The iteratees to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var func = _.over([Math.max, Math.min]);
     *
     * func(1, 2, 3, 4);
     * // => [4, 1]
     */
    var over = createOver(arrayMap);

    /**
     * Creates a function that checks if **all** of the `predicates` return
     * truthy when invoked with the arguments it receives.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {...(Function|Function[])} [predicates=[_.identity]]
     *  The predicates to check.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var func = _.overEvery([Boolean, isFinite]);
     *
     * func('1');
     * // => true
     *
     * func(null);
     * // => false
     *
     * func(NaN);
     * // => false
     */
    var overEvery = createOver(arrayEvery);

    /**
     * Creates a function that checks if **any** of the `predicates` return
     * truthy when invoked with the arguments it receives.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {...(Function|Function[])} [predicates=[_.identity]]
     *  The predicates to check.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var func = _.overSome([Boolean, isFinite]);
     *
     * func('1');
     * // => true
     *
     * func(null);
     * // => true
     *
     * func(NaN);
     * // => false
     */
    var overSome = createOver(arraySome);

    /**
     * Creates a function that returns the value at `path` of a given object.
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Util
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new accessor function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': 2 } },
     *   { 'a': { 'b': 1 } }
     * ];
     *
     * _.map(objects, _.property('a.b'));
     * // => [2, 1]
     *
     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');
     * // => [1, 2]
     */
    function property(path) {
      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
    }

    /**
     * The opposite of `_.property`; this method creates a function that returns
     * the value at a given path of `object`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {Object} object The object to query.
     * @returns {Function} Returns the new accessor function.
     * @example
     *
     * var array = [0, 1, 2],
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));
     * // => [2, 0]
     */
    function propertyOf(object) {
      return function(path) {
        return object == null ? undefined : baseGet(object, path);
      };
    }

    /**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to, but not including, `end`. A step of `-1` is used if a negative
     * `start` is specified without an `end` or `step`. If `end` is not specified,
     * it's set to `start` with `start` then set to `0`.
     *
     * **Note:** JavaScript follows the IEEE-754 standard for resolving
     * floating-point values which can produce unexpected results.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns the range of numbers.
     * @see _.inRange, _.rangeRight
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(-4);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */
    var range = createRange();

    /**
     * This method is like `_.range` except that it populates values in
     * descending order.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns the range of numbers.
     * @see _.inRange, _.range
     * @example
     *
     * _.rangeRight(4);
     * // => [3, 2, 1, 0]
     *
     * _.rangeRight(-4);
     * // => [-3, -2, -1, 0]
     *
     * _.rangeRight(1, 5);
     * // => [4, 3, 2, 1]
     *
     * _.rangeRight(0, 20, 5);
     * // => [15, 10, 5, 0]
     *
     * _.rangeRight(0, -4, -1);
     * // => [-3, -2, -1, 0]
     *
     * _.rangeRight(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.rangeRight(0);
     * // => []
     */
    var rangeRight = createRange(true);

    /**
     * This method returns a new empty array.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {Array} Returns the new empty array.
     * @example
     *
     * var arrays = _.times(2, _.stubArray);
     *
     * console.log(arrays);
     * // => [[], []]
     *
     * console.log(arrays[0] === arrays[1]);
     * // => false
     */
    function stubArray() {
      return [];
    }

    /**
     * This method returns `false`.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {boolean} Returns `false`.
     * @example
     *
     * _.times(2, _.stubFalse);
     * // => [false, false]
     */
    function stubFalse() {
      return false;
    }

    /**
     * This method returns a new empty object.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {Object} Returns the new empty object.
     * @example
     *
     * var objects = _.times(2, _.stubObject);
     *
     * console.log(objects);
     * // => [{}, {}]
     *
     * console.log(objects[0] === objects[1]);
     * // => false
     */
    function stubObject() {
      return {};
    }

    /**
     * This method returns an empty string.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {string} Returns the empty string.
     * @example
     *
     * _.times(2, _.stubString);
     * // => ['', '']
     */
    function stubString() {
      return '';
    }

    /**
     * This method returns `true`.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {boolean} Returns `true`.
     * @example
     *
     * _.times(2, _.stubTrue);
     * // => [true, true]
     */
    function stubTrue() {
      return true;
    }

    /**
     * Invokes the iteratee `n` times, returning an array of the results of
     * each invocation. The iteratee is invoked with one argument; (index).
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {number} n The number of times to invoke `iteratee`.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * _.times(3, String);
     * // => ['0', '1', '2']
     *
     *  _.times(4, _.constant(0));
     * // => [0, 0, 0, 0]
     */
    function times(n, iteratee) {
      n = toInteger(n);
      if (n < 1 || n > MAX_SAFE_INTEGER) {
        return [];
      }
      var index = MAX_ARRAY_LENGTH,
          length = nativeMin(n, MAX_ARRAY_LENGTH);

      iteratee = getIteratee(iteratee);
      n -= MAX_ARRAY_LENGTH;

      var result = baseTimes(length, iteratee);
      while (++index < n) {
        iteratee(index);
      }
      return result;
    }

    /**
     * Converts `value` to a property path array.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {*} value The value to convert.
     * @returns {Array} Returns the new property path array.
     * @example
     *
     * _.toPath('a.b.c');
     * // => ['a', 'b', 'c']
     *
     * _.toPath('a[0].b.c');
     * // => ['a', '0', 'b', 'c']
     */
    function toPath(value) {
      if (isArray(value)) {
        return arrayMap(value, toKey);
      }
      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));
    }

    /**
     * Generates a unique ID. If `prefix` is given, the ID is appended to it.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {string} [prefix=''] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */
    function uniqueId(prefix) {
      var id = ++idCounter;
      return toString(prefix) + id;
    }

    /*------------------------------------------------------------------------*/

    /**
     * Adds two numbers.
     *
     * @static
     * @memberOf _
     * @since 3.4.0
     * @category Math
     * @param {number} augend The first number in an addition.
     * @param {number} addend The second number in an addition.
     * @returns {number} Returns the total.
     * @example
     *
     * _.add(6, 4);
     * // => 10
     */
    var add = createMathOperation(function(augend, addend) {
      return augend + addend;
    }, 0);

    /**
     * Computes `number` rounded up to `precision`.
     *
     * @static
     * @memberOf _
     * @since 3.10.0
     * @category Math
     * @param {number} number The number to round up.
     * @param {number} [precision=0] The precision to round up to.
     * @returns {number} Returns the rounded up number.
     * @example
     *
     * _.ceil(4.006);
     * // => 5
     *
     * _.ceil(6.004, 2);
     * // => 6.01
     *
     * _.ceil(6040, -2);
     * // => 6100
     */
    var ceil = createRound('ceil');

    /**
     * Divide two numbers.
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Math
     * @param {number} dividend The first number in a division.
     * @param {number} divisor The second number in a division.
     * @returns {number} Returns the quotient.
     * @example
     *
     * _.divide(6, 4);
     * // => 1.5
     */
    var divide = createMathOperation(function(dividend, divisor) {
      return dividend / divisor;
    }, 1);

    /**
     * Computes `number` rounded down to `precision`.
     *
     * @static
     * @memberOf _
     * @since 3.10.0
     * @category Math
     * @param {number} number The number to round down.
     * @param {number} [precision=0] The precision to round down to.
     * @returns {number} Returns the rounded down number.
     * @example
     *
     * _.floor(4.006);
     * // => 4
     *
     * _.floor(0.046, 2);
     * // => 0.04
     *
     * _.floor(4060, -2);
     * // => 4000
     */
    var floor = createRound('floor');

    /**
     * Computes the maximum value of `array`. If `array` is empty or falsey,
     * `undefined` is returned.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * _.max([]);
     * // => undefined
     */
    function max(array) {
      return (array && array.length)
        ? baseExtremum(array, identity, baseGt)
        : undefined;
    }

    /**
     * This method is like `_.max` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the criterion by which
     * the value is ranked. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * var objects = [{ 'n': 1 }, { 'n': 2 }];
     *
     * _.maxBy(objects, function(o) { return o.n; });
     * // => { 'n': 2 }
     *
     * // The `_.property` iteratee shorthand.
     * _.maxBy(objects, 'n');
     * // => { 'n': 2 }
     */
    function maxBy(array, iteratee) {
      return (array && array.length)
        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)
        : undefined;
    }

    /**
     * Computes the mean of the values in `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {number} Returns the mean.
     * @example
     *
     * _.mean([4, 2, 8, 6]);
     * // => 5
     */
    function mean(array) {
      return baseMean(array, identity);
    }

    /**
     * This method is like `_.mean` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the value to be averaged.
     * The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the mean.
     * @example
     *
     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];
     *
     * _.meanBy(objects, function(o) { return o.n; });
     * // => 5
     *
     * // The `_.property` iteratee shorthand.
     * _.meanBy(objects, 'n');
     * // => 5
     */
    function meanBy(array, iteratee) {
      return baseMean(array, getIteratee(iteratee, 2));
    }

    /**
     * Computes the minimum value of `array`. If `array` is empty or falsey,
     * `undefined` is returned.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * _.min([]);
     * // => undefined
     */
    function min(array) {
      return (array && array.length)
        ? baseExtremum(array, identity, baseLt)
        : undefined;
    }

    /**
     * This method is like `_.min` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the criterion by which
     * the value is ranked. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * var objects = [{ 'n': 1 }, { 'n': 2 }];
     *
     * _.minBy(objects, function(o) { return o.n; });
     * // => { 'n': 1 }
     *
     * // The `_.property` iteratee shorthand.
     * _.minBy(objects, 'n');
     * // => { 'n': 1 }
     */
    function minBy(array, iteratee) {
      return (array && array.length)
        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)
        : undefined;
    }

    /**
     * Multiply two numbers.
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Math
     * @param {number} multiplier The first number in a multiplication.
     * @param {number} multiplicand The second number in a multiplication.
     * @returns {number} Returns the product.
     * @example
     *
     * _.multiply(6, 4);
     * // => 24
     */
    var multiply = createMathOperation(function(multiplier, multiplicand) {
      return multiplier * multiplicand;
    }, 1);

    /**
     * Computes `number` rounded to `precision`.
     *
     * @static
     * @memberOf _
     * @since 3.10.0
     * @category Math
     * @param {number} number The number to round.
     * @param {number} [precision=0] The precision to round to.
     * @returns {number} Returns the rounded number.
     * @example
     *
     * _.round(4.006);
     * // => 4
     *
     * _.round(4.006, 2);
     * // => 4.01
     *
     * _.round(4060, -2);
     * // => 4100
     */
    var round = createRound('round');

    /**
     * Subtract two numbers.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {number} minuend The first number in a subtraction.
     * @param {number} subtrahend The second number in a subtraction.
     * @returns {number} Returns the difference.
     * @example
     *
     * _.subtract(6, 4);
     * // => 2
     */
    var subtract = createMathOperation(function(minuend, subtrahend) {
      return minuend - subtrahend;
    }, 0);

    /**
     * Computes the sum of the values in `array`.
     *
     * @static
     * @memberOf _
     * @since 3.4.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.sum([4, 2, 8, 6]);
     * // => 20
     */
    function sum(array) {
      return (array && array.length)
        ? baseSum(array, identity)
        : 0;
    }

    /**
     * This method is like `_.sum` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the value to be summed.
     * The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the sum.
     * @example
     *
     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];
     *
     * _.sumBy(objects, function(o) { return o.n; });
     * // => 20
     *
     * // The `_.property` iteratee shorthand.
     * _.sumBy(objects, 'n');
     * // => 20
     */
    function sumBy(array, iteratee) {
      return (array && array.length)
        ? baseSum(array, getIteratee(iteratee, 2))
        : 0;
    }

    /*------------------------------------------------------------------------*/

    // Add methods that return wrapped values in chain sequences.
    lodash.after = after;
    lodash.ary = ary;
    lodash.assign = assign;
    lodash.assignIn = assignIn;
    lodash.assignInWith = assignInWith;
    lodash.assignWith = assignWith;
    lodash.at = at;
    lodash.before = before;
    lodash.bind = bind;
    lodash.bindAll = bindAll;
    lodash.bindKey = bindKey;
    lodash.castArray = castArray;
    lodash.chain = chain;
    lodash.chunk = chunk;
    lodash.compact = compact;
    lodash.concat = concat;
    lodash.cond = cond;
    lodash.conforms = conforms;
    lodash.constant = constant;
    lodash.countBy = countBy;
    lodash.create = create;
    lodash.curry = curry;
    lodash.curryRight = curryRight;
    lodash.debounce = debounce;
    lodash.defaults = defaults;
    lodash.defaultsDeep = defaultsDeep;
    lodash.defer = defer;
    lodash.delay = delay;
    lodash.difference = difference;
    lodash.differenceBy = differenceBy;
    lodash.differenceWith = differenceWith;
    lodash.drop = drop;
    lodash.dropRight = dropRight;
    lodash.dropRightWhile = dropRightWhile;
    lodash.dropWhile = dropWhile;
    lodash.fill = fill;
    lodash.filter = filter;
    lodash.flatMap = flatMap;
    lodash.flatMapDeep = flatMapDeep;
    lodash.flatMapDepth = flatMapDepth;
    lodash.flatten = flatten;
    lodash.flattenDeep = flattenDeep;
    lodash.flattenDepth = flattenDepth;
    lodash.flip = flip;
    lodash.flow = flow;
    lodash.flowRight = flowRight;
    lodash.fromPairs = fromPairs;
    lodash.functions = functions;
    lodash.functionsIn = functionsIn;
    lodash.groupBy = groupBy;
    lodash.initial = initial;
    lodash.intersection = intersection;
    lodash.intersectionBy = intersectionBy;
    lodash.intersectionWith = intersectionWith;
    lodash.invert = invert;
    lodash.invertBy = invertBy;
    lodash.invokeMap = invokeMap;
    lodash.iteratee = iteratee;
    lodash.keyBy = keyBy;
    lodash.keys = keys;
    lodash.keysIn = keysIn;
    lodash.map = map;
    lodash.mapKeys = mapKeys;
    lodash.mapValues = mapValues;
    lodash.matches = matches;
    lodash.matchesProperty = matchesProperty;
    lodash.memoize = memoize;
    lodash.merge = merge;
    lodash.mergeWith = mergeWith;
    lodash.method = method;
    lodash.methodOf = methodOf;
    lodash.mixin = mixin;
    lodash.negate = negate;
    lodash.nthArg = nthArg;
    lodash.omit = omit;
    lodash.omitBy = omitBy;
    lodash.once = once;
    lodash.orderBy = orderBy;
    lodash.over = over;
    lodash.overArgs = overArgs;
    lodash.overEvery = overEvery;
    lodash.overSome = overSome;
    lodash.partial = partial;
    lodash.partialRight = partialRight;
    lodash.partition = partition;
    lodash.pick = pick;
    lodash.pickBy = pickBy;
    lodash.property = property;
    lodash.propertyOf = propertyOf;
    lodash.pull = pull;
    lodash.pullAll = pullAll;
    lodash.pullAllBy = pullAllBy;
    lodash.pullAllWith = pullAllWith;
    lodash.pullAt = pullAt;
    lodash.range = range;
    lodash.rangeRight = rangeRight;
    lodash.rearg = rearg;
    lodash.reject = reject;
    lodash.remove = remove;
    lodash.rest = rest;
    lodash.reverse = reverse;
    lodash.sampleSize = sampleSize;
    lodash.set = set;
    lodash.setWith = setWith;
    lodash.shuffle = shuffle;
    lodash.slice = slice;
    lodash.sortBy = sortBy;
    lodash.sortedUniq = sortedUniq;
    lodash.sortedUniqBy = sortedUniqBy;
    lodash.split = split;
    lodash.spread = spread;
    lodash.tail = tail;
    lodash.take = take;
    lodash.takeRight = takeRight;
    lodash.takeRightWhile = takeRightWhile;
    lodash.takeWhile = takeWhile;
    lodash.tap = tap;
    lodash.throttle = throttle;
    lodash.thru = thru;
    lodash.toArray = toArray;
    lodash.toPairs = toPairs;
    lodash.toPairsIn = toPairsIn;
    lodash.toPath = toPath;
    lodash.toPlainObject = toPlainObject;
    lodash.transform = transform;
    lodash.unary = unary;
    lodash.union = union;
    lodash.unionBy = unionBy;
    lodash.unionWith = unionWith;
    lodash.uniq = uniq;
    lodash.uniqBy = uniqBy;
    lodash.uniqWith = uniqWith;
    lodash.unset = unset;
    lodash.unzip = unzip;
    lodash.unzipWith = unzipWith;
    lodash.update = update;
    lodash.updateWith = updateWith;
    lodash.values = values;
    lodash.valuesIn = valuesIn;
    lodash.without = without;
    lodash.words = words;
    lodash.wrap = wrap;
    lodash.xor = xor;
    lodash.xorBy = xorBy;
    lodash.xorWith = xorWith;
    lodash.zip = zip;
    lodash.zipObject = zipObject;
    lodash.zipObjectDeep = zipObjectDeep;
    lodash.zipWith = zipWith;

    // Add aliases.
    lodash.entries = toPairs;
    lodash.entriesIn = toPairsIn;
    lodash.extend = assignIn;
    lodash.extendWith = assignInWith;

    // Add methods to `lodash.prototype`.
    mixin(lodash, lodash);

    /*------------------------------------------------------------------------*/

    // Add methods that return unwrapped values in chain sequences.
    lodash.add = add;
    lodash.attempt = attempt;
    lodash.camelCase = camelCase;
    lodash.capitalize = capitalize;
    lodash.ceil = ceil;
    lodash.clamp = clamp;
    lodash.clone = clone;
    lodash.cloneDeep = cloneDeep;
    lodash.cloneDeepWith = cloneDeepWith;
    lodash.cloneWith = cloneWith;
    lodash.conformsTo = conformsTo;
    lodash.deburr = deburr;
    lodash.defaultTo = defaultTo;
    lodash.divide = divide;
    lodash.endsWith = endsWith;
    lodash.eq = eq;
    lodash.escape = escape;
    lodash.escapeRegExp = escapeRegExp;
    lodash.every = every;
    lodash.find = find;
    lodash.findIndex = findIndex;
    lodash.findKey = findKey;
    lodash.findLast = findLast;
    lodash.findLastIndex = findLastIndex;
    lodash.findLastKey = findLastKey;
    lodash.floor = floor;
    lodash.forEach = forEach;
    lodash.forEachRight = forEachRight;
    lodash.forIn = forIn;
    lodash.forInRight = forInRight;
    lodash.forOwn = forOwn;
    lodash.forOwnRight = forOwnRight;
    lodash.get = get;
    lodash.gt = gt;
    lodash.gte = gte;
    lodash.has = has;
    lodash.hasIn = hasIn;
    lodash.head = head;
    lodash.identity = identity;
    lodash.includes = includes;
    lodash.indexOf = indexOf;
    lodash.inRange = inRange;
    lodash.invoke = invoke;
    lodash.isArguments = isArguments;
    lodash.isArray = isArray;
    lodash.isArrayBuffer = isArrayBuffer;
    lodash.isArrayLike = isArrayLike;
    lodash.isArrayLikeObject = isArrayLikeObject;
    lodash.isBoolean = isBoolean;
    lodash.isBuffer = isBuffer;
    lodash.isDate = isDate;
    lodash.isElement = isElement;
    lodash.isEmpty = isEmpty;
    lodash.isEqual = isEqual;
    lodash.isEqualWith = isEqualWith;
    lodash.isError = isError;
    lodash.isFinite = isFinite;
    lodash.isFunction = isFunction;
    lodash.isInteger = isInteger;
    lodash.isLength = isLength;
    lodash.isMap = isMap;
    lodash.isMatch = isMatch;
    lodash.isMatchWith = isMatchWith;
    lodash.isNaN = isNaN;
    lodash.isNative = isNative;
    lodash.isNil = isNil;
    lodash.isNull = isNull;
    lodash.isNumber = isNumber;
    lodash.isObject = isObject;
    lodash.isObjectLike = isObjectLike;
    lodash.isPlainObject = isPlainObject;
    lodash.isRegExp = isRegExp;
    lodash.isSafeInteger = isSafeInteger;
    lodash.isSet = isSet;
    lodash.isString = isString;
    lodash.isSymbol = isSymbol;
    lodash.isTypedArray = isTypedArray;
    lodash.isUndefined = isUndefined;
    lodash.isWeakMap = isWeakMap;
    lodash.isWeakSet = isWeakSet;
    lodash.join = join;
    lodash.kebabCase = kebabCase;
    lodash.last = last;
    lodash.lastIndexOf = lastIndexOf;
    lodash.lowerCase = lowerCase;
    lodash.lowerFirst = lowerFirst;
    lodash.lt = lt;
    lodash.lte = lte;
    lodash.max = max;
    lodash.maxBy = maxBy;
    lodash.mean = mean;
    lodash.meanBy = meanBy;
    lodash.min = min;
    lodash.minBy = minBy;
    lodash.stubArray = stubArray;
    lodash.stubFalse = stubFalse;
    lodash.stubObject = stubObject;
    lodash.stubString = stubString;
    lodash.stubTrue = stubTrue;
    lodash.multiply = multiply;
    lodash.nth = nth;
    lodash.noConflict = noConflict;
    lodash.noop = noop;
    lodash.now = now;
    lodash.pad = pad;
    lodash.padEnd = padEnd;
    lodash.padStart = padStart;
    lodash.parseInt = parseInt;
    lodash.random = random;
    lodash.reduce = reduce;
    lodash.reduceRight = reduceRight;
    lodash.repeat = repeat;
    lodash.replace = replace;
    lodash.result = result;
    lodash.round = round;
    lodash.runInContext = runInContext;
    lodash.sample = sample;
    lodash.size = size;
    lodash.snakeCase = snakeCase;
    lodash.some = some;
    lodash.sortedIndex = sortedIndex;
    lodash.sortedIndexBy = sortedIndexBy;
    lodash.sortedIndexOf = sortedIndexOf;
    lodash.sortedLastIndex = sortedLastIndex;
    lodash.sortedLastIndexBy = sortedLastIndexBy;
    lodash.sortedLastIndexOf = sortedLastIndexOf;
    lodash.startCase = startCase;
    lodash.startsWith = startsWith;
    lodash.subtract = subtract;
    lodash.sum = sum;
    lodash.sumBy = sumBy;
    lodash.template = template;
    lodash.times = times;
    lodash.toFinite = toFinite;
    lodash.toInteger = toInteger;
    lodash.toLength = toLength;
    lodash.toLower = toLower;
    lodash.toNumber = toNumber;
    lodash.toSafeInteger = toSafeInteger;
    lodash.toString = toString;
    lodash.toUpper = toUpper;
    lodash.trim = trim;
    lodash.trimEnd = trimEnd;
    lodash.trimStart = trimStart;
    lodash.truncate = truncate;
    lodash.unescape = unescape;
    lodash.uniqueId = uniqueId;
    lodash.upperCase = upperCase;
    lodash.upperFirst = upperFirst;

    // Add aliases.
    lodash.each = forEach;
    lodash.eachRight = forEachRight;
    lodash.first = head;

    mixin(lodash, (function() {
      var source = {};
      baseForOwn(lodash, function(func, methodName) {
        if (!hasOwnProperty.call(lodash.prototype, methodName)) {
          source[methodName] = func;
        }
      });
      return source;
    }()), { 'chain': false });

    /*------------------------------------------------------------------------*/

    /**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type {string}
     */
    lodash.VERSION = VERSION;

    // Assign default placeholders.
    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {
      lodash[methodName].placeholder = lodash;
    });

    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.
    arrayEach(['drop', 'take'], function(methodName, index) {
      LazyWrapper.prototype[methodName] = function(n) {
        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);

        var result = (this.__filtered__ && !index)
          ? new LazyWrapper(this)
          : this.clone();

        if (result.__filtered__) {
          result.__takeCount__ = nativeMin(n, result.__takeCount__);
        } else {
          result.__views__.push({
            'size': nativeMin(n, MAX_ARRAY_LENGTH),
            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')
          });
        }
        return result;
      };

      LazyWrapper.prototype[methodName + 'Right'] = function(n) {
        return this.reverse()[methodName](n).reverse();
      };
    });

    // Add `LazyWrapper` methods that accept an `iteratee` value.
    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {
      var type = index + 1,
          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;

      LazyWrapper.prototype[methodName] = function(iteratee) {
        var result = this.clone();
        result.__iteratees__.push({
          'iteratee': getIteratee(iteratee, 3),
          'type': type
        });
        result.__filtered__ = result.__filtered__ || isFilter;
        return result;
      };
    });

    // Add `LazyWrapper` methods for `_.head` and `_.last`.
    arrayEach(['head', 'last'], function(methodName, index) {
      var takeName = 'take' + (index ? 'Right' : '');

      LazyWrapper.prototype[methodName] = function() {
        return this[takeName](1).value()[0];
      };
    });

    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.
    arrayEach(['initial', 'tail'], function(methodName, index) {
      var dropName = 'drop' + (index ? '' : 'Right');

      LazyWrapper.prototype[methodName] = function() {
        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
      };
    });

    LazyWrapper.prototype.compact = function() {
      return this.filter(identity);
    };

    LazyWrapper.prototype.find = function(predicate) {
      return this.filter(predicate).head();
    };

    LazyWrapper.prototype.findLast = function(predicate) {
      return this.reverse().find(predicate);
    };

    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {
      if (typeof path == 'function') {
        return new LazyWrapper(this);
      }
      return this.map(function(value) {
        return baseInvoke(value, path, args);
      });
    });

    LazyWrapper.prototype.reject = function(predicate) {
      return this.filter(negate(getIteratee(predicate)));
    };

    LazyWrapper.prototype.slice = function(start, end) {
      start = toInteger(start);

      var result = this;
      if (result.__filtered__ && (start > 0 || end < 0)) {
        return new LazyWrapper(result);
      }
      if (start < 0) {
        result = result.takeRight(-start);
      } else if (start) {
        result = result.drop(start);
      }
      if (end !== undefined) {
        end = toInteger(end);
        result = end < 0 ? result.dropRight(-end) : result.take(end - start);
      }
      return result;
    };

    LazyWrapper.prototype.takeRightWhile = function(predicate) {
      return this.reverse().takeWhile(predicate).reverse();
    };

    LazyWrapper.prototype.toArray = function() {
      return this.take(MAX_ARRAY_LENGTH);
    };

    // Add `LazyWrapper` methods to `lodash.prototype`.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),
          isTaker = /^(?:head|last)$/.test(methodName),
          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],
          retUnwrapped = isTaker || /^find/.test(methodName);

      if (!lodashFunc) {
        return;
      }
      lodash.prototype[methodName] = function() {
        var value = this.__wrapped__,
            args = isTaker ? [1] : arguments,
            isLazy = value instanceof LazyWrapper,
            iteratee = args[0],
            useLazy = isLazy || isArray(value);

        var interceptor = function(value) {
          var result = lodashFunc.apply(lodash, arrayPush([value], args));
          return (isTaker && chainAll) ? result[0] : result;
        };

        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {
          // Avoid lazy use if the iteratee has a "length" value other than `1`.
          isLazy = useLazy = false;
        }
        var chainAll = this.__chain__,
            isHybrid = !!this.__actions__.length,
            isUnwrapped = retUnwrapped && !chainAll,
            onlyLazy = isLazy && !isHybrid;

        if (!retUnwrapped && useLazy) {
          value = onlyLazy ? value : new LazyWrapper(this);
          var result = func.apply(value, args);
          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });
          return new LodashWrapper(result, chainAll);
        }
        if (isUnwrapped && onlyLazy) {
          return func.apply(this, args);
        }
        result = this.thru(interceptor);
        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;
      };
    });

    // Add `Array` methods to `lodash.prototype`.
    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {
      var func = arrayProto[methodName],
          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',
          retUnwrapped = /^(?:pop|shift)$/.test(methodName);

      lodash.prototype[methodName] = function() {
        var args = arguments;
        if (retUnwrapped && !this.__chain__) {
          var value = this.value();
          return func.apply(isArray(value) ? value : [], args);
        }
        return this[chainName](function(value) {
          return func.apply(isArray(value) ? value : [], args);
        });
      };
    });

    // Map minified method names to their real names.
    baseForOwn(LazyWrapper.prototype, function(func, methodName) {
      var lodashFunc = lodash[methodName];
      if (lodashFunc) {
        var key = lodashFunc.name + '';
        if (!hasOwnProperty.call(realNames, key)) {
          realNames[key] = [];
        }
        realNames[key].push({ 'name': methodName, 'func': lodashFunc });
      }
    });

    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{
      'name': 'wrapper',
      'func': undefined
    }];

    // Add methods to `LazyWrapper`.
    LazyWrapper.prototype.clone = lazyClone;
    LazyWrapper.prototype.reverse = lazyReverse;
    LazyWrapper.prototype.value = lazyValue;

    // Add chain sequence methods to the `lodash` wrapper.
    lodash.prototype.at = wrapperAt;
    lodash.prototype.chain = wrapperChain;
    lodash.prototype.commit = wrapperCommit;
    lodash.prototype.next = wrapperNext;
    lodash.prototype.plant = wrapperPlant;
    lodash.prototype.reverse = wrapperReverse;
    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;

    // Add lazy aliases.
    lodash.prototype.first = lodash.prototype.head;

    if (symIterator) {
      lodash.prototype[symIterator] = wrapperToIterator;
    }
    return lodash;
  });

  /*--------------------------------------------------------------------------*/

  // Export lodash.
  var _ = runInContext();

  // Some AMD build optimizers, like r.js, check for condition patterns like:
  if (true) {
    // Expose Lodash on the global object to prevent errors when Lodash is
    // loaded by a script tag in the presence of an AMD loader.
    // See http://requirejs.org/docs/errors.html#mismatch for more details.
    // Use `_.noConflict` to remove Lodash from the global object.
    root._ = _;

    // Define as an anonymous module so, through path mapping, it can be
    // referenced as the "underscore" module.
    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
      return _;
    }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  }
  // Check for `exports` after `define` in case a build optimizer adds it.
  else {}
}.call(this));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../webpack/buildin/module.js */ "./node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "./node_modules/popper.js/dist/esm/popper.js":
/*!***************************************************!*\
  !*** ./node_modules/popper.js/dist/esm/popper.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global) {/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.15.0
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';

var longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];
var timeoutDuration = 0;
for (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {
  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {
    timeoutDuration = 1;
    break;
  }
}

function microtaskDebounce(fn) {
  var called = false;
  return function () {
    if (called) {
      return;
    }
    called = true;
    window.Promise.resolve().then(function () {
      called = false;
      fn();
    });
  };
}

function taskDebounce(fn) {
  var scheduled = false;
  return function () {
    if (!scheduled) {
      scheduled = true;
      setTimeout(function () {
        scheduled = false;
        fn();
      }, timeoutDuration);
    }
  };
}

var supportsMicroTasks = isBrowser && window.Promise;

/**
* Create a debounced version of a method, that's asynchronously deferred
* but called in the minimum time possible.
*
* @method
* @memberof Popper.Utils
* @argument {Function} fn
* @returns {Function}
*/
var debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;

/**
 * Check if the given variable is a function
 * @method
 * @memberof Popper.Utils
 * @argument {Any} functionToCheck - variable to check
 * @returns {Boolean} answer to: is a function?
 */
function isFunction(functionToCheck) {
  var getType = {};
  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';
}

/**
 * Get CSS computed property of the given element
 * @method
 * @memberof Popper.Utils
 * @argument {Eement} element
 * @argument {String} property
 */
function getStyleComputedProperty(element, property) {
  if (element.nodeType !== 1) {
    return [];
  }
  // NOTE: 1 DOM access here
  var window = element.ownerDocument.defaultView;
  var css = window.getComputedStyle(element, null);
  return property ? css[property] : css;
}

/**
 * Returns the parentNode or the host of the element
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @returns {Element} parent
 */
function getParentNode(element) {
  if (element.nodeName === 'HTML') {
    return element;
  }
  return element.parentNode || element.host;
}

/**
 * Returns the scrolling parent of the given element
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @returns {Element} scroll parent
 */
function getScrollParent(element) {
  // Return body, `getScroll` will take care to get the correct `scrollTop` from it
  if (!element) {
    return document.body;
  }

  switch (element.nodeName) {
    case 'HTML':
    case 'BODY':
      return element.ownerDocument.body;
    case '#document':
      return element.body;
  }

  // Firefox want us to check `-x` and `-y` variations as well

  var _getStyleComputedProp = getStyleComputedProperty(element),
      overflow = _getStyleComputedProp.overflow,
      overflowX = _getStyleComputedProp.overflowX,
      overflowY = _getStyleComputedProp.overflowY;

  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {
    return element;
  }

  return getScrollParent(getParentNode(element));
}

var isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);
var isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);

/**
 * Determines if the browser is Internet Explorer
 * @method
 * @memberof Popper.Utils
 * @param {Number} version to check
 * @returns {Boolean} isIE
 */
function isIE(version) {
  if (version === 11) {
    return isIE11;
  }
  if (version === 10) {
    return isIE10;
  }
  return isIE11 || isIE10;
}

/**
 * Returns the offset parent of the given element
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @returns {Element} offset parent
 */
function getOffsetParent(element) {
  if (!element) {
    return document.documentElement;
  }

  var noOffsetParent = isIE(10) ? document.body : null;

  // NOTE: 1 DOM access here
  var offsetParent = element.offsetParent || null;
  // Skip hidden elements which don't have an offsetParent
  while (offsetParent === noOffsetParent && element.nextElementSibling) {
    offsetParent = (element = element.nextElementSibling).offsetParent;
  }

  var nodeName = offsetParent && offsetParent.nodeName;

  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {
    return element ? element.ownerDocument.documentElement : document.documentElement;
  }

  // .offsetParent will return the closest TH, TD or TABLE in case
  // no offsetParent is present, I hate this job...
  if (['TH', 'TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {
    return getOffsetParent(offsetParent);
  }

  return offsetParent;
}

function isOffsetContainer(element) {
  var nodeName = element.nodeName;

  if (nodeName === 'BODY') {
    return false;
  }
  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;
}

/**
 * Finds the root node (document, shadowDOM root) of the given element
 * @method
 * @memberof Popper.Utils
 * @argument {Element} node
 * @returns {Element} root node
 */
function getRoot(node) {
  if (node.parentNode !== null) {
    return getRoot(node.parentNode);
  }

  return node;
}

/**
 * Finds the offset parent common to the two provided nodes
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element1
 * @argument {Element} element2
 * @returns {Element} common offset parent
 */
function findCommonOffsetParent(element1, element2) {
  // This check is needed to avoid errors in case one of the elements isn't defined for any reason
  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {
    return document.documentElement;
  }

  // Here we make sure to give as "start" the element that comes first in the DOM
  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;
  var start = order ? element1 : element2;
  var end = order ? element2 : element1;

  // Get common ancestor container
  var range = document.createRange();
  range.setStart(start, 0);
  range.setEnd(end, 0);
  var commonAncestorContainer = range.commonAncestorContainer;

  // Both nodes are inside #document

  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {
    if (isOffsetContainer(commonAncestorContainer)) {
      return commonAncestorContainer;
    }

    return getOffsetParent(commonAncestorContainer);
  }

  // one of the nodes is inside shadowDOM, find which one
  var element1root = getRoot(element1);
  if (element1root.host) {
    return findCommonOffsetParent(element1root.host, element2);
  } else {
    return findCommonOffsetParent(element1, getRoot(element2).host);
  }
}

/**
 * Gets the scroll value of the given element in the given side (top and left)
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @argument {String} side `top` or `left`
 * @returns {number} amount of scrolled pixels
 */
function getScroll(element) {
  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';

  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';
  var nodeName = element.nodeName;

  if (nodeName === 'BODY' || nodeName === 'HTML') {
    var html = element.ownerDocument.documentElement;
    var scrollingElement = element.ownerDocument.scrollingElement || html;
    return scrollingElement[upperSide];
  }

  return element[upperSide];
}

/*
 * Sum or subtract the element scroll values (left and top) from a given rect object
 * @method
 * @memberof Popper.Utils
 * @param {Object} rect - Rect object you want to change
 * @param {HTMLElement} element - The element from the function reads the scroll values
 * @param {Boolean} subtract - set to true if you want to subtract the scroll values
 * @return {Object} rect - The modifier rect object
 */
function includeScroll(rect, element) {
  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  var scrollTop = getScroll(element, 'top');
  var scrollLeft = getScroll(element, 'left');
  var modifier = subtract ? -1 : 1;
  rect.top += scrollTop * modifier;
  rect.bottom += scrollTop * modifier;
  rect.left += scrollLeft * modifier;
  rect.right += scrollLeft * modifier;
  return rect;
}

/*
 * Helper to detect borders of a given element
 * @method
 * @memberof Popper.Utils
 * @param {CSSStyleDeclaration} styles
 * Result of `getStyleComputedProperty` on the given element
 * @param {String} axis - `x` or `y`
 * @return {number} borders - The borders size of the given axis
 */

function getBordersSize(styles, axis) {
  var sideA = axis === 'x' ? 'Left' : 'Top';
  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';

  return parseFloat(styles['border' + sideA + 'Width'], 10) + parseFloat(styles['border' + sideB + 'Width'], 10);
}

function getSize(axis, body, html, computedStyle) {
  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);
}

function getWindowSizes(document) {
  var body = document.body;
  var html = document.documentElement;
  var computedStyle = isIE(10) && getComputedStyle(html);

  return {
    height: getSize('Height', body, html, computedStyle),
    width: getSize('Width', body, html, computedStyle)
  };
}

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();





var defineProperty = function (obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
};

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};

/**
 * Given element offsets, generate an output similar to getBoundingClientRect
 * @method
 * @memberof Popper.Utils
 * @argument {Object} offsets
 * @returns {Object} ClientRect like output
 */
function getClientRect(offsets) {
  return _extends({}, offsets, {
    right: offsets.left + offsets.width,
    bottom: offsets.top + offsets.height
  });
}

/**
 * Get bounding client rect of given element
 * @method
 * @memberof Popper.Utils
 * @param {HTMLElement} element
 * @return {Object} client rect
 */
function getBoundingClientRect(element) {
  var rect = {};

  // IE10 10 FIX: Please, don't ask, the element isn't
  // considered in DOM in some circumstances...
  // This isn't reproducible in IE10 compatibility mode of IE11
  try {
    if (isIE(10)) {
      rect = element.getBoundingClientRect();
      var scrollTop = getScroll(element, 'top');
      var scrollLeft = getScroll(element, 'left');
      rect.top += scrollTop;
      rect.left += scrollLeft;
      rect.bottom += scrollTop;
      rect.right += scrollLeft;
    } else {
      rect = element.getBoundingClientRect();
    }
  } catch (e) {}

  var result = {
    left: rect.left,
    top: rect.top,
    width: rect.right - rect.left,
    height: rect.bottom - rect.top
  };

  // subtract scrollbar size from sizes
  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};
  var width = sizes.width || element.clientWidth || result.right - result.left;
  var height = sizes.height || element.clientHeight || result.bottom - result.top;

  var horizScrollbar = element.offsetWidth - width;
  var vertScrollbar = element.offsetHeight - height;

  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`
  // we make this check conditional for performance reasons
  if (horizScrollbar || vertScrollbar) {
    var styles = getStyleComputedProperty(element);
    horizScrollbar -= getBordersSize(styles, 'x');
    vertScrollbar -= getBordersSize(styles, 'y');

    result.width -= horizScrollbar;
    result.height -= vertScrollbar;
  }

  return getClientRect(result);
}

function getOffsetRectRelativeToArbitraryNode(children, parent) {
  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  var isIE10 = isIE(10);
  var isHTML = parent.nodeName === 'HTML';
  var childrenRect = getBoundingClientRect(children);
  var parentRect = getBoundingClientRect(parent);
  var scrollParent = getScrollParent(children);

  var styles = getStyleComputedProperty(parent);
  var borderTopWidth = parseFloat(styles.borderTopWidth, 10);
  var borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);

  // In cases where the parent is fixed, we must ignore negative scroll in offset calc
  if (fixedPosition && isHTML) {
    parentRect.top = Math.max(parentRect.top, 0);
    parentRect.left = Math.max(parentRect.left, 0);
  }
  var offsets = getClientRect({
    top: childrenRect.top - parentRect.top - borderTopWidth,
    left: childrenRect.left - parentRect.left - borderLeftWidth,
    width: childrenRect.width,
    height: childrenRect.height
  });
  offsets.marginTop = 0;
  offsets.marginLeft = 0;

  // Subtract margins of documentElement in case it's being used as parent
  // we do this only on HTML because it's the only element that behaves
  // differently when margins are applied to it. The margins are included in
  // the box of the documentElement, in the other cases not.
  if (!isIE10 && isHTML) {
    var marginTop = parseFloat(styles.marginTop, 10);
    var marginLeft = parseFloat(styles.marginLeft, 10);

    offsets.top -= borderTopWidth - marginTop;
    offsets.bottom -= borderTopWidth - marginTop;
    offsets.left -= borderLeftWidth - marginLeft;
    offsets.right -= borderLeftWidth - marginLeft;

    // Attach marginTop and marginLeft because in some circumstances we may need them
    offsets.marginTop = marginTop;
    offsets.marginLeft = marginLeft;
  }

  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {
    offsets = includeScroll(offsets, parent);
  }

  return offsets;
}

function getViewportOffsetRectRelativeToArtbitraryNode(element) {
  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

  var html = element.ownerDocument.documentElement;
  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);
  var width = Math.max(html.clientWidth, window.innerWidth || 0);
  var height = Math.max(html.clientHeight, window.innerHeight || 0);

  var scrollTop = !excludeScroll ? getScroll(html) : 0;
  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;

  var offset = {
    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,
    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,
    width: width,
    height: height
  };

  return getClientRect(offset);
}

/**
 * Check if the given element is fixed or is inside a fixed parent
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @argument {Element} customContainer
 * @returns {Boolean} answer to "isFixed?"
 */
function isFixed(element) {
  var nodeName = element.nodeName;
  if (nodeName === 'BODY' || nodeName === 'HTML') {
    return false;
  }
  if (getStyleComputedProperty(element, 'position') === 'fixed') {
    return true;
  }
  var parentNode = getParentNode(element);
  if (!parentNode) {
    return false;
  }
  return isFixed(parentNode);
}

/**
 * Finds the first parent of an element that has a transformed property defined
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @returns {Element} first transformed parent or documentElement
 */

function getFixedPositionOffsetParent(element) {
  // This check is needed to avoid errors in case one of the elements isn't defined for any reason
  if (!element || !element.parentElement || isIE()) {
    return document.documentElement;
  }
  var el = element.parentElement;
  while (el && getStyleComputedProperty(el, 'transform') === 'none') {
    el = el.parentElement;
  }
  return el || document.documentElement;
}

/**
 * Computed the boundaries limits and return them
 * @method
 * @memberof Popper.Utils
 * @param {HTMLElement} popper
 * @param {HTMLElement} reference
 * @param {number} padding
 * @param {HTMLElement} boundariesElement - Element used to define the boundaries
 * @param {Boolean} fixedPosition - Is in fixed position mode
 * @returns {Object} Coordinates of the boundaries
 */
function getBoundaries(popper, reference, padding, boundariesElement) {
  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;

  // NOTE: 1 DOM access here

  var boundaries = { top: 0, left: 0 };
  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);

  // Handle viewport case
  if (boundariesElement === 'viewport') {
    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);
  } else {
    // Handle other cases based on DOM element used as boundaries
    var boundariesNode = void 0;
    if (boundariesElement === 'scrollParent') {
      boundariesNode = getScrollParent(getParentNode(reference));
      if (boundariesNode.nodeName === 'BODY') {
        boundariesNode = popper.ownerDocument.documentElement;
      }
    } else if (boundariesElement === 'window') {
      boundariesNode = popper.ownerDocument.documentElement;
    } else {
      boundariesNode = boundariesElement;
    }

    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);

    // In case of HTML, we need a different computation
    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {
      var _getWindowSizes = getWindowSizes(popper.ownerDocument),
          height = _getWindowSizes.height,
          width = _getWindowSizes.width;

      boundaries.top += offsets.top - offsets.marginTop;
      boundaries.bottom = height + offsets.top;
      boundaries.left += offsets.left - offsets.marginLeft;
      boundaries.right = width + offsets.left;
    } else {
      // for all the other DOM elements, this one is good
      boundaries = offsets;
    }
  }

  // Add paddings
  padding = padding || 0;
  var isPaddingNumber = typeof padding === 'number';
  boundaries.left += isPaddingNumber ? padding : padding.left || 0;
  boundaries.top += isPaddingNumber ? padding : padding.top || 0;
  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;
  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;

  return boundaries;
}

function getArea(_ref) {
  var width = _ref.width,
      height = _ref.height;

  return width * height;
}

/**
 * Utility used to transform the `auto` placement to the placement with more
 * available space.
 * @method
 * @memberof Popper.Utils
 * @argument {Object} data - The data object generated by update method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {
  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;

  if (placement.indexOf('auto') === -1) {
    return placement;
  }

  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);

  var rects = {
    top: {
      width: boundaries.width,
      height: refRect.top - boundaries.top
    },
    right: {
      width: boundaries.right - refRect.right,
      height: boundaries.height
    },
    bottom: {
      width: boundaries.width,
      height: boundaries.bottom - refRect.bottom
    },
    left: {
      width: refRect.left - boundaries.left,
      height: boundaries.height
    }
  };

  var sortedAreas = Object.keys(rects).map(function (key) {
    return _extends({
      key: key
    }, rects[key], {
      area: getArea(rects[key])
    });
  }).sort(function (a, b) {
    return b.area - a.area;
  });

  var filteredAreas = sortedAreas.filter(function (_ref2) {
    var width = _ref2.width,
        height = _ref2.height;
    return width >= popper.clientWidth && height >= popper.clientHeight;
  });

  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;

  var variation = placement.split('-')[1];

  return computedPlacement + (variation ? '-' + variation : '');
}

/**
 * Get offsets to the reference element
 * @method
 * @memberof Popper.Utils
 * @param {Object} state
 * @param {Element} popper - the popper element
 * @param {Element} reference - the reference element (the popper will be relative to this)
 * @param {Element} fixedPosition - is in fixed position mode
 * @returns {Object} An object containing the offsets which will be applied to the popper
 */
function getReferenceOffsets(state, popper, reference) {
  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);
  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);
}

/**
 * Get the outer sizes of the given element (offset size + margins)
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element
 * @returns {Object} object containing width and height properties
 */
function getOuterSizes(element) {
  var window = element.ownerDocument.defaultView;
  var styles = window.getComputedStyle(element);
  var x = parseFloat(styles.marginTop || 0) + parseFloat(styles.marginBottom || 0);
  var y = parseFloat(styles.marginLeft || 0) + parseFloat(styles.marginRight || 0);
  var result = {
    width: element.offsetWidth + y,
    height: element.offsetHeight + x
  };
  return result;
}

/**
 * Get the opposite placement of the given one
 * @method
 * @memberof Popper.Utils
 * @argument {String} placement
 * @returns {String} flipped placement
 */
function getOppositePlacement(placement) {
  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };
  return placement.replace(/left|right|bottom|top/g, function (matched) {
    return hash[matched];
  });
}

/**
 * Get offsets to the popper
 * @method
 * @memberof Popper.Utils
 * @param {Object} position - CSS position the Popper will get applied
 * @param {HTMLElement} popper - the popper element
 * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)
 * @param {String} placement - one of the valid placement options
 * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper
 */
function getPopperOffsets(popper, referenceOffsets, placement) {
  placement = placement.split('-')[0];

  // Get popper node sizes
  var popperRect = getOuterSizes(popper);

  // Add position, width and height to our offsets object
  var popperOffsets = {
    width: popperRect.width,
    height: popperRect.height
  };

  // depending by the popper placement we have to compute its offsets slightly differently
  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;
  var mainSide = isHoriz ? 'top' : 'left';
  var secondarySide = isHoriz ? 'left' : 'top';
  var measurement = isHoriz ? 'height' : 'width';
  var secondaryMeasurement = !isHoriz ? 'height' : 'width';

  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;
  if (placement === secondarySide) {
    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];
  } else {
    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];
  }

  return popperOffsets;
}

/**
 * Mimics the `find` method of Array
 * @method
 * @memberof Popper.Utils
 * @argument {Array} arr
 * @argument prop
 * @argument value
 * @returns index or -1
 */
function find(arr, check) {
  // use native find if supported
  if (Array.prototype.find) {
    return arr.find(check);
  }

  // use `filter` to obtain the same behavior of `find`
  return arr.filter(check)[0];
}

/**
 * Return the index of the matching object
 * @method
 * @memberof Popper.Utils
 * @argument {Array} arr
 * @argument prop
 * @argument value
 * @returns index or -1
 */
function findIndex(arr, prop, value) {
  // use native findIndex if supported
  if (Array.prototype.findIndex) {
    return arr.findIndex(function (cur) {
      return cur[prop] === value;
    });
  }

  // use `find` + `indexOf` if `findIndex` isn't supported
  var match = find(arr, function (obj) {
    return obj[prop] === value;
  });
  return arr.indexOf(match);
}

/**
 * Loop trough the list of modifiers and run them in order,
 * each of them will then edit the data object.
 * @method
 * @memberof Popper.Utils
 * @param {dataObject} data
 * @param {Array} modifiers
 * @param {String} ends - Optional modifier name used as stopper
 * @returns {dataObject}
 */
function runModifiers(modifiers, data, ends) {
  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));

  modifiersToRun.forEach(function (modifier) {
    if (modifier['function']) {
      // eslint-disable-line dot-notation
      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');
    }
    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation
    if (modifier.enabled && isFunction(fn)) {
      // Add properties to offsets to make them a complete clientRect object
      // we do this before each modifier to make sure the previous one doesn't
      // mess with these values
      data.offsets.popper = getClientRect(data.offsets.popper);
      data.offsets.reference = getClientRect(data.offsets.reference);

      data = fn(data, modifier);
    }
  });

  return data;
}

/**
 * Updates the position of the popper, computing the new offsets and applying
 * the new style.<br />
 * Prefer `scheduleUpdate` over `update` because of performance reasons.
 * @method
 * @memberof Popper
 */
function update() {
  // if popper is destroyed, don't perform any further update
  if (this.state.isDestroyed) {
    return;
  }

  var data = {
    instance: this,
    styles: {},
    arrowStyles: {},
    attributes: {},
    flipped: false,
    offsets: {}
  };

  // compute reference element offsets
  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);

  // compute auto placement, store placement inside the data object,
  // modifiers will be able to edit `placement` if needed
  // and refer to originalPlacement to know the original value
  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);

  // store the computed placement inside `originalPlacement`
  data.originalPlacement = data.placement;

  data.positionFixed = this.options.positionFixed;

  // compute the popper offsets
  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);

  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';

  // run the modifiers
  data = runModifiers(this.modifiers, data);

  // the first `update` will call `onCreate` callback
  // the other ones will call `onUpdate` callback
  if (!this.state.isCreated) {
    this.state.isCreated = true;
    this.options.onCreate(data);
  } else {
    this.options.onUpdate(data);
  }
}

/**
 * Helper used to know if the given modifier is enabled.
 * @method
 * @memberof Popper.Utils
 * @returns {Boolean}
 */
function isModifierEnabled(modifiers, modifierName) {
  return modifiers.some(function (_ref) {
    var name = _ref.name,
        enabled = _ref.enabled;
    return enabled && name === modifierName;
  });
}

/**
 * Get the prefixed supported property name
 * @method
 * @memberof Popper.Utils
 * @argument {String} property (camelCase)
 * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)
 */
function getSupportedPropertyName(property) {
  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];
  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);

  for (var i = 0; i < prefixes.length; i++) {
    var prefix = prefixes[i];
    var toCheck = prefix ? '' + prefix + upperProp : property;
    if (typeof document.body.style[toCheck] !== 'undefined') {
      return toCheck;
    }
  }
  return null;
}

/**
 * Destroys the popper.
 * @method
 * @memberof Popper
 */
function destroy() {
  this.state.isDestroyed = true;

  // touch DOM only if `applyStyle` modifier is enabled
  if (isModifierEnabled(this.modifiers, 'applyStyle')) {
    this.popper.removeAttribute('x-placement');
    this.popper.style.position = '';
    this.popper.style.top = '';
    this.popper.style.left = '';
    this.popper.style.right = '';
    this.popper.style.bottom = '';
    this.popper.style.willChange = '';
    this.popper.style[getSupportedPropertyName('transform')] = '';
  }

  this.disableEventListeners();

  // remove the popper if user explicity asked for the deletion on destroy
  // do not use `remove` because IE11 doesn't support it
  if (this.options.removeOnDestroy) {
    this.popper.parentNode.removeChild(this.popper);
  }
  return this;
}

/**
 * Get the window associated with the element
 * @argument {Element} element
 * @returns {Window}
 */
function getWindow(element) {
  var ownerDocument = element.ownerDocument;
  return ownerDocument ? ownerDocument.defaultView : window;
}

function attachToScrollParents(scrollParent, event, callback, scrollParents) {
  var isBody = scrollParent.nodeName === 'BODY';
  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;
  target.addEventListener(event, callback, { passive: true });

  if (!isBody) {
    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);
  }
  scrollParents.push(target);
}

/**
 * Setup needed event listeners used to update the popper position
 * @method
 * @memberof Popper.Utils
 * @private
 */
function setupEventListeners(reference, options, state, updateBound) {
  // Resize event listener on window
  state.updateBound = updateBound;
  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });

  // Scroll event listener on scroll parents
  var scrollElement = getScrollParent(reference);
  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);
  state.scrollElement = scrollElement;
  state.eventsEnabled = true;

  return state;
}

/**
 * It will add resize/scroll events and start recalculating
 * position of the popper element when they are triggered.
 * @method
 * @memberof Popper
 */
function enableEventListeners() {
  if (!this.state.eventsEnabled) {
    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);
  }
}

/**
 * Remove event listeners used to update the popper position
 * @method
 * @memberof Popper.Utils
 * @private
 */
function removeEventListeners(reference, state) {
  // Remove resize event listener on window
  getWindow(reference).removeEventListener('resize', state.updateBound);

  // Remove scroll event listener on scroll parents
  state.scrollParents.forEach(function (target) {
    target.removeEventListener('scroll', state.updateBound);
  });

  // Reset state
  state.updateBound = null;
  state.scrollParents = [];
  state.scrollElement = null;
  state.eventsEnabled = false;
  return state;
}

/**
 * It will remove resize/scroll events and won't recalculate popper position
 * when they are triggered. It also won't trigger `onUpdate` callback anymore,
 * unless you call `update` method manually.
 * @method
 * @memberof Popper
 */
function disableEventListeners() {
  if (this.state.eventsEnabled) {
    cancelAnimationFrame(this.scheduleUpdate);
    this.state = removeEventListeners(this.reference, this.state);
  }
}

/**
 * Tells if a given input is a number
 * @method
 * @memberof Popper.Utils
 * @param {*} input to check
 * @return {Boolean}
 */
function isNumeric(n) {
  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);
}

/**
 * Set the style to the given popper
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element - Element to apply the style to
 * @argument {Object} styles
 * Object with a list of properties and values which will be applied to the element
 */
function setStyles(element, styles) {
  Object.keys(styles).forEach(function (prop) {
    var unit = '';
    // add unit if the value is numeric and is one of the following
    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {
      unit = 'px';
    }
    element.style[prop] = styles[prop] + unit;
  });
}

/**
 * Set the attributes to the given popper
 * @method
 * @memberof Popper.Utils
 * @argument {Element} element - Element to apply the attributes to
 * @argument {Object} styles
 * Object with a list of properties and values which will be applied to the element
 */
function setAttributes(element, attributes) {
  Object.keys(attributes).forEach(function (prop) {
    var value = attributes[prop];
    if (value !== false) {
      element.setAttribute(prop, attributes[prop]);
    } else {
      element.removeAttribute(prop);
    }
  });
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by `update` method
 * @argument {Object} data.styles - List of style properties - values to apply to popper element
 * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The same data object
 */
function applyStyle(data) {
  // any property present in `data.styles` will be applied to the popper,
  // in this way we can make the 3rd party modifiers add custom styles to it
  // Be aware, modifiers could override the properties defined in the previous
  // lines of this modifier!
  setStyles(data.instance.popper, data.styles);

  // any property present in `data.attributes` will be applied to the popper,
  // they will be set as HTML attributes of the element
  setAttributes(data.instance.popper, data.attributes);

  // if arrowElement is defined and arrowStyles has some properties
  if (data.arrowElement && Object.keys(data.arrowStyles).length) {
    setStyles(data.arrowElement, data.arrowStyles);
  }

  return data;
}

/**
 * Set the x-placement attribute before everything else because it could be used
 * to add margins to the popper margins needs to be calculated to get the
 * correct popper offsets.
 * @method
 * @memberof Popper.modifiers
 * @param {HTMLElement} reference - The reference element used to position the popper
 * @param {HTMLElement} popper - The HTML element used as popper
 * @param {Object} options - Popper.js options
 */
function applyStyleOnLoad(reference, popper, options, modifierOptions, state) {
  // compute reference element offsets
  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);

  // compute auto placement, store placement inside the data object,
  // modifiers will be able to edit `placement` if needed
  // and refer to originalPlacement to know the original value
  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);

  popper.setAttribute('x-placement', placement);

  // Apply `position` to popper before anything else because
  // without the position applied we can't guarantee correct computations
  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });

  return options;
}

/**
 * @function
 * @memberof Popper.Utils
 * @argument {Object} data - The data object generated by `update` method
 * @argument {Boolean} shouldRound - If the offsets should be rounded at all
 * @returns {Object} The popper's position offsets rounded
 *
 * The tale of pixel-perfect positioning. It's still not 100% perfect, but as
 * good as it can be within reason.
 * Discussion here: https://github.com/FezVrasta/popper.js/pull/715
 *
 * Low DPI screens cause a popper to be blurry if not using full pixels (Safari
 * as well on High DPI screens).
 *
 * Firefox prefers no rounding for positioning and does not have blurriness on
 * high DPI screens.
 *
 * Only horizontal placement and left/right values need to be considered.
 */
function getRoundedOffsets(data, shouldRound) {
  var _data$offsets = data.offsets,
      popper = _data$offsets.popper,
      reference = _data$offsets.reference;
  var round = Math.round,
      floor = Math.floor;

  var noRound = function noRound(v) {
    return v;
  };

  var referenceWidth = round(reference.width);
  var popperWidth = round(popper.width);

  var isVertical = ['left', 'right'].indexOf(data.placement) !== -1;
  var isVariation = data.placement.indexOf('-') !== -1;
  var sameWidthParity = referenceWidth % 2 === popperWidth % 2;
  var bothOddWidth = referenceWidth % 2 === 1 && popperWidth % 2 === 1;

  var horizontalToInteger = !shouldRound ? noRound : isVertical || isVariation || sameWidthParity ? round : floor;
  var verticalToInteger = !shouldRound ? noRound : round;

  return {
    left: horizontalToInteger(bothOddWidth && !isVariation && shouldRound ? popper.left - 1 : popper.left),
    top: verticalToInteger(popper.top),
    bottom: verticalToInteger(popper.bottom),
    right: horizontalToInteger(popper.right)
  };
}

var isFirefox = isBrowser && /Firefox/i.test(navigator.userAgent);

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by `update` method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function computeStyle(data, options) {
  var x = options.x,
      y = options.y;
  var popper = data.offsets.popper;

  // Remove this legacy support in Popper.js v2

  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {
    return modifier.name === 'applyStyle';
  }).gpuAcceleration;
  if (legacyGpuAccelerationOption !== undefined) {
    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');
  }
  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;

  var offsetParent = getOffsetParent(data.instance.popper);
  var offsetParentRect = getBoundingClientRect(offsetParent);

  // Styles
  var styles = {
    position: popper.position
  };

  var offsets = getRoundedOffsets(data, window.devicePixelRatio < 2 || !isFirefox);

  var sideA = x === 'bottom' ? 'top' : 'bottom';
  var sideB = y === 'right' ? 'left' : 'right';

  // if gpuAcceleration is set to `true` and transform is supported,
  //  we use `translate3d` to apply the position to the popper we
  // automatically use the supported prefixed version if needed
  var prefixedProperty = getSupportedPropertyName('transform');

  // now, let's make a step back and look at this code closely (wtf?)
  // If the content of the popper grows once it's been positioned, it
  // may happen that the popper gets misplaced because of the new content
  // overflowing its reference element
  // To avoid this problem, we provide two options (x and y), which allow
  // the consumer to define the offset origin.
  // If we position a popper on top of a reference element, we can set
  // `x` to `top` to make the popper grow towards its top instead of
  // its bottom.
  var left = void 0,
      top = void 0;
  if (sideA === 'bottom') {
    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)
    // and not the bottom of the html element
    if (offsetParent.nodeName === 'HTML') {
      top = -offsetParent.clientHeight + offsets.bottom;
    } else {
      top = -offsetParentRect.height + offsets.bottom;
    }
  } else {
    top = offsets.top;
  }
  if (sideB === 'right') {
    if (offsetParent.nodeName === 'HTML') {
      left = -offsetParent.clientWidth + offsets.right;
    } else {
      left = -offsetParentRect.width + offsets.right;
    }
  } else {
    left = offsets.left;
  }
  if (gpuAcceleration && prefixedProperty) {
    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';
    styles[sideA] = 0;
    styles[sideB] = 0;
    styles.willChange = 'transform';
  } else {
    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties
    var invertTop = sideA === 'bottom' ? -1 : 1;
    var invertLeft = sideB === 'right' ? -1 : 1;
    styles[sideA] = top * invertTop;
    styles[sideB] = left * invertLeft;
    styles.willChange = sideA + ', ' + sideB;
  }

  // Attributes
  var attributes = {
    'x-placement': data.placement
  };

  // Update `data` attributes, styles and arrowStyles
  data.attributes = _extends({}, attributes, data.attributes);
  data.styles = _extends({}, styles, data.styles);
  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);

  return data;
}

/**
 * Helper used to know if the given modifier depends from another one.<br />
 * It checks if the needed modifier is listed and enabled.
 * @method
 * @memberof Popper.Utils
 * @param {Array} modifiers - list of modifiers
 * @param {String} requestingName - name of requesting modifier
 * @param {String} requestedName - name of requested modifier
 * @returns {Boolean}
 */
function isModifierRequired(modifiers, requestingName, requestedName) {
  var requesting = find(modifiers, function (_ref) {
    var name = _ref.name;
    return name === requestingName;
  });

  var isRequired = !!requesting && modifiers.some(function (modifier) {
    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;
  });

  if (!isRequired) {
    var _requesting = '`' + requestingName + '`';
    var requested = '`' + requestedName + '`';
    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');
  }
  return isRequired;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by update method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function arrow(data, options) {
  var _data$offsets$arrow;

  // arrow depends on keepTogether in order to work
  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {
    return data;
  }

  var arrowElement = options.element;

  // if arrowElement is a string, suppose it's a CSS selector
  if (typeof arrowElement === 'string') {
    arrowElement = data.instance.popper.querySelector(arrowElement);

    // if arrowElement is not found, don't run the modifier
    if (!arrowElement) {
      return data;
    }
  } else {
    // if the arrowElement isn't a query selector we must check that the
    // provided DOM node is child of its popper node
    if (!data.instance.popper.contains(arrowElement)) {
      console.warn('WARNING: `arrow.element` must be child of its popper element!');
      return data;
    }
  }

  var placement = data.placement.split('-')[0];
  var _data$offsets = data.offsets,
      popper = _data$offsets.popper,
      reference = _data$offsets.reference;

  var isVertical = ['left', 'right'].indexOf(placement) !== -1;

  var len = isVertical ? 'height' : 'width';
  var sideCapitalized = isVertical ? 'Top' : 'Left';
  var side = sideCapitalized.toLowerCase();
  var altSide = isVertical ? 'left' : 'top';
  var opSide = isVertical ? 'bottom' : 'right';
  var arrowElementSize = getOuterSizes(arrowElement)[len];

  //
  // extends keepTogether behavior making sure the popper and its
  // reference have enough pixels in conjunction
  //

  // top/left side
  if (reference[opSide] - arrowElementSize < popper[side]) {
    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);
  }
  // bottom/right side
  if (reference[side] + arrowElementSize > popper[opSide]) {
    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];
  }
  data.offsets.popper = getClientRect(data.offsets.popper);

  // compute center of the popper
  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;

  // Compute the sideValue using the updated popper offsets
  // take popper margin in account because we don't have this info available
  var css = getStyleComputedProperty(data.instance.popper);
  var popperMarginSide = parseFloat(css['margin' + sideCapitalized], 10);
  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width'], 10);
  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;

  // prevent arrowElement from being placed not contiguously to its popper
  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);

  data.arrowElement = arrowElement;
  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);

  return data;
}

/**
 * Get the opposite placement variation of the given one
 * @method
 * @memberof Popper.Utils
 * @argument {String} placement variation
 * @returns {String} flipped placement variation
 */
function getOppositeVariation(variation) {
  if (variation === 'end') {
    return 'start';
  } else if (variation === 'start') {
    return 'end';
  }
  return variation;
}

/**
 * List of accepted placements to use as values of the `placement` option.<br />
 * Valid placements are:
 * - `auto`
 * - `top`
 * - `right`
 * - `bottom`
 * - `left`
 *
 * Each placement can have a variation from this list:
 * - `-start`
 * - `-end`
 *
 * Variations are interpreted easily if you think of them as the left to right
 * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`
 * is right.<br />
 * Vertically (`left` and `right`), `start` is top and `end` is bottom.
 *
 * Some valid examples are:
 * - `top-end` (on top of reference, right aligned)
 * - `right-start` (on right of reference, top aligned)
 * - `bottom` (on bottom, centered)
 * - `auto-end` (on the side with more space available, alignment depends by placement)
 *
 * @static
 * @type {Array}
 * @enum {String}
 * @readonly
 * @method placements
 * @memberof Popper
 */
var placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];

// Get rid of `auto` `auto-start` and `auto-end`
var validPlacements = placements.slice(3);

/**
 * Given an initial placement, returns all the subsequent placements
 * clockwise (or counter-clockwise).
 *
 * @method
 * @memberof Popper.Utils
 * @argument {String} placement - A valid placement (it accepts variations)
 * @argument {Boolean} counter - Set to true to walk the placements counterclockwise
 * @returns {Array} placements including their variations
 */
function clockwise(placement) {
  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

  var index = validPlacements.indexOf(placement);
  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));
  return counter ? arr.reverse() : arr;
}

var BEHAVIORS = {
  FLIP: 'flip',
  CLOCKWISE: 'clockwise',
  COUNTERCLOCKWISE: 'counterclockwise'
};

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by update method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function flip(data, options) {
  // if `inner` modifier is enabled, we can't use the `flip` modifier
  if (isModifierEnabled(data.instance.modifiers, 'inner')) {
    return data;
  }

  if (data.flipped && data.placement === data.originalPlacement) {
    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides
    return data;
  }

  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);

  var placement = data.placement.split('-')[0];
  var placementOpposite = getOppositePlacement(placement);
  var variation = data.placement.split('-')[1] || '';

  var flipOrder = [];

  switch (options.behavior) {
    case BEHAVIORS.FLIP:
      flipOrder = [placement, placementOpposite];
      break;
    case BEHAVIORS.CLOCKWISE:
      flipOrder = clockwise(placement);
      break;
    case BEHAVIORS.COUNTERCLOCKWISE:
      flipOrder = clockwise(placement, true);
      break;
    default:
      flipOrder = options.behavior;
  }

  flipOrder.forEach(function (step, index) {
    if (placement !== step || flipOrder.length === index + 1) {
      return data;
    }

    placement = data.placement.split('-')[0];
    placementOpposite = getOppositePlacement(placement);

    var popperOffsets = data.offsets.popper;
    var refOffsets = data.offsets.reference;

    // using floor because the reference offsets may contain decimals we are not going to consider here
    var floor = Math.floor;
    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);

    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);
    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);
    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);
    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);

    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;

    // flip the variation if required
    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;

    // flips variation if reference element overflows boundaries
    var flippedVariationByRef = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);

    // flips variation if popper content overflows boundaries
    var flippedVariationByContent = !!options.flipVariationsByContent && (isVertical && variation === 'start' && overflowsRight || isVertical && variation === 'end' && overflowsLeft || !isVertical && variation === 'start' && overflowsBottom || !isVertical && variation === 'end' && overflowsTop);

    var flippedVariation = flippedVariationByRef || flippedVariationByContent;

    if (overlapsRef || overflowsBoundaries || flippedVariation) {
      // this boolean to detect any flip loop
      data.flipped = true;

      if (overlapsRef || overflowsBoundaries) {
        placement = flipOrder[index + 1];
      }

      if (flippedVariation) {
        variation = getOppositeVariation(variation);
      }

      data.placement = placement + (variation ? '-' + variation : '');

      // this object contains `position`, we want to preserve it along with
      // any additional property we may add in the future
      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));

      data = runModifiers(data.instance.modifiers, data, 'flip');
    }
  });
  return data;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by update method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function keepTogether(data) {
  var _data$offsets = data.offsets,
      popper = _data$offsets.popper,
      reference = _data$offsets.reference;

  var placement = data.placement.split('-')[0];
  var floor = Math.floor;
  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;
  var side = isVertical ? 'right' : 'bottom';
  var opSide = isVertical ? 'left' : 'top';
  var measurement = isVertical ? 'width' : 'height';

  if (popper[side] < floor(reference[opSide])) {
    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];
  }
  if (popper[opSide] > floor(reference[side])) {
    data.offsets.popper[opSide] = floor(reference[side]);
  }

  return data;
}

/**
 * Converts a string containing value + unit into a px value number
 * @function
 * @memberof {modifiers~offset}
 * @private
 * @argument {String} str - Value + unit string
 * @argument {String} measurement - `height` or `width`
 * @argument {Object} popperOffsets
 * @argument {Object} referenceOffsets
 * @returns {Number|String}
 * Value in pixels, or original string if no values were extracted
 */
function toValue(str, measurement, popperOffsets, referenceOffsets) {
  // separate value from unit
  var split = str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/);
  var value = +split[1];
  var unit = split[2];

  // If it's not a number it's an operator, I guess
  if (!value) {
    return str;
  }

  if (unit.indexOf('%') === 0) {
    var element = void 0;
    switch (unit) {
      case '%p':
        element = popperOffsets;
        break;
      case '%':
      case '%r':
      default:
        element = referenceOffsets;
    }

    var rect = getClientRect(element);
    return rect[measurement] / 100 * value;
  } else if (unit === 'vh' || unit === 'vw') {
    // if is a vh or vw, we calculate the size based on the viewport
    var size = void 0;
    if (unit === 'vh') {
      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
    } else {
      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    }
    return size / 100 * value;
  } else {
    // if is an explicit pixel unit, we get rid of the unit and keep the value
    // if is an implicit unit, it's px, and we return just the value
    return value;
  }
}

/**
 * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.
 * @function
 * @memberof {modifiers~offset}
 * @private
 * @argument {String} offset
 * @argument {Object} popperOffsets
 * @argument {Object} referenceOffsets
 * @argument {String} basePlacement
 * @returns {Array} a two cells array with x and y offsets in numbers
 */
function parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {
  var offsets = [0, 0];

  // Use height if placement is left or right and index is 0 otherwise use width
  // in this way the first offset will use an axis and the second one
  // will use the other one
  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;

  // Split the offset string to obtain a list of values and operands
  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)
  var fragments = offset.split(/(\+|\-)/).map(function (frag) {
    return frag.trim();
  });

  // Detect if the offset string contains a pair of values or a single one
  // they could be separated by comma or space
  var divider = fragments.indexOf(find(fragments, function (frag) {
    return frag.search(/,|\s/) !== -1;
  }));

  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {
    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');
  }

  // If divider is found, we divide the list of values and operands to divide
  // them by ofset X and Y.
  var splitRegex = /\s*,\s*|\s+/;
  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];

  // Convert the values with units to absolute pixels to allow our computations
  ops = ops.map(function (op, index) {
    // Most of the units rely on the orientation of the popper
    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';
    var mergeWithPrevious = false;
    return op
    // This aggregates any `+` or `-` sign that aren't considered operators
    // e.g.: 10 + +5 => [10, +, +5]
    .reduce(function (a, b) {
      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {
        a[a.length - 1] = b;
        mergeWithPrevious = true;
        return a;
      } else if (mergeWithPrevious) {
        a[a.length - 1] += b;
        mergeWithPrevious = false;
        return a;
      } else {
        return a.concat(b);
      }
    }, [])
    // Here we convert the string values into number values (in px)
    .map(function (str) {
      return toValue(str, measurement, popperOffsets, referenceOffsets);
    });
  });

  // Loop trough the offsets arrays and execute the operations
  ops.forEach(function (op, index) {
    op.forEach(function (frag, index2) {
      if (isNumeric(frag)) {
        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);
      }
    });
  });
  return offsets;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by update method
 * @argument {Object} options - Modifiers configuration and options
 * @argument {Number|String} options.offset=0
 * The offset value as described in the modifier description
 * @returns {Object} The data object, properly modified
 */
function offset(data, _ref) {
  var offset = _ref.offset;
  var placement = data.placement,
      _data$offsets = data.offsets,
      popper = _data$offsets.popper,
      reference = _data$offsets.reference;

  var basePlacement = placement.split('-')[0];

  var offsets = void 0;
  if (isNumeric(+offset)) {
    offsets = [+offset, 0];
  } else {
    offsets = parseOffset(offset, popper, reference, basePlacement);
  }

  if (basePlacement === 'left') {
    popper.top += offsets[0];
    popper.left -= offsets[1];
  } else if (basePlacement === 'right') {
    popper.top += offsets[0];
    popper.left += offsets[1];
  } else if (basePlacement === 'top') {
    popper.left += offsets[0];
    popper.top -= offsets[1];
  } else if (basePlacement === 'bottom') {
    popper.left += offsets[0];
    popper.top += offsets[1];
  }

  data.popper = popper;
  return data;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by `update` method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function preventOverflow(data, options) {
  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);

  // If offsetParent is the reference element, we really want to
  // go one step up and use the next offsetParent as reference to
  // avoid to make this modifier completely useless and look like broken
  if (data.instance.reference === boundariesElement) {
    boundariesElement = getOffsetParent(boundariesElement);
  }

  // NOTE: DOM access here
  // resets the popper's position so that the document size can be calculated excluding
  // the size of the popper element itself
  var transformProp = getSupportedPropertyName('transform');
  var popperStyles = data.instance.popper.style; // assignment to help minification
  var top = popperStyles.top,
      left = popperStyles.left,
      transform = popperStyles[transformProp];

  popperStyles.top = '';
  popperStyles.left = '';
  popperStyles[transformProp] = '';

  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);

  // NOTE: DOM access here
  // restores the original style properties after the offsets have been computed
  popperStyles.top = top;
  popperStyles.left = left;
  popperStyles[transformProp] = transform;

  options.boundaries = boundaries;

  var order = options.priority;
  var popper = data.offsets.popper;

  var check = {
    primary: function primary(placement) {
      var value = popper[placement];
      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {
        value = Math.max(popper[placement], boundaries[placement]);
      }
      return defineProperty({}, placement, value);
    },
    secondary: function secondary(placement) {
      var mainSide = placement === 'right' ? 'left' : 'top';
      var value = popper[mainSide];
      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {
        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));
      }
      return defineProperty({}, mainSide, value);
    }
  };

  order.forEach(function (placement) {
    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';
    popper = _extends({}, popper, check[side](placement));
  });

  data.offsets.popper = popper;

  return data;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by `update` method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function shift(data) {
  var placement = data.placement;
  var basePlacement = placement.split('-')[0];
  var shiftvariation = placement.split('-')[1];

  // if shift shiftvariation is specified, run the modifier
  if (shiftvariation) {
    var _data$offsets = data.offsets,
        reference = _data$offsets.reference,
        popper = _data$offsets.popper;

    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;
    var side = isVertical ? 'left' : 'top';
    var measurement = isVertical ? 'width' : 'height';

    var shiftOffsets = {
      start: defineProperty({}, side, reference[side]),
      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])
    };

    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);
  }

  return data;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by update method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function hide(data) {
  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {
    return data;
  }

  var refRect = data.offsets.reference;
  var bound = find(data.instance.modifiers, function (modifier) {
    return modifier.name === 'preventOverflow';
  }).boundaries;

  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {
    // Avoid unnecessary DOM access if visibility hasn't changed
    if (data.hide === true) {
      return data;
    }

    data.hide = true;
    data.attributes['x-out-of-boundaries'] = '';
  } else {
    // Avoid unnecessary DOM access if visibility hasn't changed
    if (data.hide === false) {
      return data;
    }

    data.hide = false;
    data.attributes['x-out-of-boundaries'] = false;
  }

  return data;
}

/**
 * @function
 * @memberof Modifiers
 * @argument {Object} data - The data object generated by `update` method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {Object} The data object, properly modified
 */
function inner(data) {
  var placement = data.placement;
  var basePlacement = placement.split('-')[0];
  var _data$offsets = data.offsets,
      popper = _data$offsets.popper,
      reference = _data$offsets.reference;

  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;

  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;

  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);

  data.placement = getOppositePlacement(placement);
  data.offsets.popper = getClientRect(popper);

  return data;
}

/**
 * Modifier function, each modifier can have a function of this type assigned
 * to its `fn` property.<br />
 * These functions will be called on each update, this means that you must
 * make sure they are performant enough to avoid performance bottlenecks.
 *
 * @function ModifierFn
 * @argument {dataObject} data - The data object generated by `update` method
 * @argument {Object} options - Modifiers configuration and options
 * @returns {dataObject} The data object, properly modified
 */

/**
 * Modifiers are plugins used to alter the behavior of your poppers.<br />
 * Popper.js uses a set of 9 modifiers to provide all the basic functionalities
 * needed by the library.
 *
 * Usually you don't want to override the `order`, `fn` and `onLoad` props.
 * All the other properties are configurations that could be tweaked.
 * @namespace modifiers
 */
var modifiers = {
  /**
   * Modifier used to shift the popper on the start or end of its reference
   * element.<br />
   * It will read the variation of the `placement` property.<br />
   * It can be one either `-end` or `-start`.
   * @memberof modifiers
   * @inner
   */
  shift: {
    /** @prop {number} order=100 - Index used to define the order of execution */
    order: 100,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: shift
  },

  /**
   * The `offset` modifier can shift your popper on both its axis.
   *
   * It accepts the following units:
   * - `px` or unit-less, interpreted as pixels
   * - `%` or `%r`, percentage relative to the length of the reference element
   * - `%p`, percentage relative to the length of the popper element
   * - `vw`, CSS viewport width unit
   * - `vh`, CSS viewport height unit
   *
   * For length is intended the main axis relative to the placement of the popper.<br />
   * This means that if the placement is `top` or `bottom`, the length will be the
   * `width`. In case of `left` or `right`, it will be the `height`.
   *
   * You can provide a single value (as `Number` or `String`), or a pair of values
   * as `String` divided by a comma or one (or more) white spaces.<br />
   * The latter is a deprecated method because it leads to confusion and will be
   * removed in v2.<br />
   * Additionally, it accepts additions and subtractions between different units.
   * Note that multiplications and divisions aren't supported.
   *
   * Valid examples are:
   * ```
   * 10
   * '10%'
   * '10, 10'
   * '10%, 10'
   * '10 + 10%'
   * '10 - 5vh + 3%'
   * '-10px + 5vh, 5px - 6%'
   * ```
   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap
   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.
   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).
   *
   * @memberof modifiers
   * @inner
   */
  offset: {
    /** @prop {number} order=200 - Index used to define the order of execution */
    order: 200,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: offset,
    /** @prop {Number|String} offset=0
     * The offset value as described in the modifier description
     */
    offset: 0
  },

  /**
   * Modifier used to prevent the popper from being positioned outside the boundary.
   *
   * A scenario exists where the reference itself is not within the boundaries.<br />
   * We can say it has "escaped the boundaries"  or just "escaped".<br />
   * In this case we need to decide whether the popper should either:
   *
   * - detach from the reference and remain "trapped" in the boundaries, or
   * - if it should ignore the boundary and "escape with its reference"
   *
   * When `escapeWithReference` is set to`true` and reference is completely
   * outside its boundaries, the popper will overflow (or completely leave)
   * the boundaries in order to remain attached to the edge of the reference.
   *
   * @memberof modifiers
   * @inner
   */
  preventOverflow: {
    /** @prop {number} order=300 - Index used to define the order of execution */
    order: 300,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: preventOverflow,
    /**
     * @prop {Array} [priority=['left','right','top','bottom']]
     * Popper will try to prevent overflow following these priorities by default,
     * then, it could overflow on the left and on top of the `boundariesElement`
     */
    priority: ['left', 'right', 'top', 'bottom'],
    /**
     * @prop {number} padding=5
     * Amount of pixel used to define a minimum distance between the boundaries
     * and the popper. This makes sure the popper always has a little padding
     * between the edges of its container
     */
    padding: 5,
    /**
     * @prop {String|HTMLElement} boundariesElement='scrollParent'
     * Boundaries used by the modifier. Can be `scrollParent`, `window`,
     * `viewport` or any DOM element.
     */
    boundariesElement: 'scrollParent'
  },

  /**
   * Modifier used to make sure the reference and its popper stay near each other
   * without leaving any gap between the two. Especially useful when the arrow is
   * enabled and you want to ensure that it points to its reference element.
   * It cares only about the first axis. You can still have poppers with margin
   * between the popper and its reference element.
   * @memberof modifiers
   * @inner
   */
  keepTogether: {
    /** @prop {number} order=400 - Index used to define the order of execution */
    order: 400,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: keepTogether
  },

  /**
   * This modifier is used to move the `arrowElement` of the popper to make
   * sure it is positioned between the reference element and its popper element.
   * It will read the outer size of the `arrowElement` node to detect how many
   * pixels of conjunction are needed.
   *
   * It has no effect if no `arrowElement` is provided.
   * @memberof modifiers
   * @inner
   */
  arrow: {
    /** @prop {number} order=500 - Index used to define the order of execution */
    order: 500,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: arrow,
    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */
    element: '[x-arrow]'
  },

  /**
   * Modifier used to flip the popper's placement when it starts to overlap its
   * reference element.
   *
   * Requires the `preventOverflow` modifier before it in order to work.
   *
   * **NOTE:** this modifier will interrupt the current update cycle and will
   * restart it if it detects the need to flip the placement.
   * @memberof modifiers
   * @inner
   */
  flip: {
    /** @prop {number} order=600 - Index used to define the order of execution */
    order: 600,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: flip,
    /**
     * @prop {String|Array} behavior='flip'
     * The behavior used to change the popper's placement. It can be one of
     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid
     * placements (with optional variations)
     */
    behavior: 'flip',
    /**
     * @prop {number} padding=5
     * The popper will flip if it hits the edges of the `boundariesElement`
     */
    padding: 5,
    /**
     * @prop {String|HTMLElement} boundariesElement='viewport'
     * The element which will define the boundaries of the popper position.
     * The popper will never be placed outside of the defined boundaries
     * (except if `keepTogether` is enabled)
     */
    boundariesElement: 'viewport',
    /**
     * @prop {Boolean} flipVariations=false
     * The popper will switch placement variation between `-start` and `-end` when
     * the reference element overlaps its boundaries.
     *
     * The original placement should have a set variation.
     */
    flipVariations: false,
    /**
     * @prop {Boolean} flipVariationsByContent=false
     * The popper will switch placement variation between `-start` and `-end` when
     * the popper element overlaps its reference boundaries.
     *
     * The original placement should have a set variation.
     */
    flipVariationsByContent: false
  },

  /**
   * Modifier used to make the popper flow toward the inner of the reference element.
   * By default, when this modifier is disabled, the popper will be placed outside
   * the reference element.
   * @memberof modifiers
   * @inner
   */
  inner: {
    /** @prop {number} order=700 - Index used to define the order of execution */
    order: 700,
    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */
    enabled: false,
    /** @prop {ModifierFn} */
    fn: inner
  },

  /**
   * Modifier used to hide the popper when its reference element is outside of the
   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can
   * be used to hide with a CSS selector the popper when its reference is
   * out of boundaries.
   *
   * Requires the `preventOverflow` modifier before it in order to work.
   * @memberof modifiers
   * @inner
   */
  hide: {
    /** @prop {number} order=800 - Index used to define the order of execution */
    order: 800,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: hide
  },

  /**
   * Computes the style that will be applied to the popper element to gets
   * properly positioned.
   *
   * Note that this modifier will not touch the DOM, it just prepares the styles
   * so that `applyStyle` modifier can apply it. This separation is useful
   * in case you need to replace `applyStyle` with a custom implementation.
   *
   * This modifier has `850` as `order` value to maintain backward compatibility
   * with previous versions of Popper.js. Expect the modifiers ordering method
   * to change in future major versions of the library.
   *
   * @memberof modifiers
   * @inner
   */
  computeStyle: {
    /** @prop {number} order=850 - Index used to define the order of execution */
    order: 850,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: computeStyle,
    /**
     * @prop {Boolean} gpuAcceleration=true
     * If true, it uses the CSS 3D transformation to position the popper.
     * Otherwise, it will use the `top` and `left` properties
     */
    gpuAcceleration: true,
    /**
     * @prop {string} [x='bottom']
     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.
     * Change this if your popper should grow in a direction different from `bottom`
     */
    x: 'bottom',
    /**
     * @prop {string} [x='left']
     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.
     * Change this if your popper should grow in a direction different from `right`
     */
    y: 'right'
  },

  /**
   * Applies the computed styles to the popper element.
   *
   * All the DOM manipulations are limited to this modifier. This is useful in case
   * you want to integrate Popper.js inside a framework or view library and you
   * want to delegate all the DOM manipulations to it.
   *
   * Note that if you disable this modifier, you must make sure the popper element
   * has its position set to `absolute` before Popper.js can do its work!
   *
   * Just disable this modifier and define your own to achieve the desired effect.
   *
   * @memberof modifiers
   * @inner
   */
  applyStyle: {
    /** @prop {number} order=900 - Index used to define the order of execution */
    order: 900,
    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */
    enabled: true,
    /** @prop {ModifierFn} */
    fn: applyStyle,
    /** @prop {Function} */
    onLoad: applyStyleOnLoad,
    /**
     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier
     * @prop {Boolean} gpuAcceleration=true
     * If true, it uses the CSS 3D transformation to position the popper.
     * Otherwise, it will use the `top` and `left` properties
     */
    gpuAcceleration: undefined
  }
};

/**
 * The `dataObject` is an object containing all the information used by Popper.js.
 * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.
 * @name dataObject
 * @property {Object} data.instance The Popper.js instance
 * @property {String} data.placement Placement applied to popper
 * @property {String} data.originalPlacement Placement originally defined on init
 * @property {Boolean} data.flipped True if popper has been flipped by flip modifier
 * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper
 * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier
 * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)
 * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)
 * @property {Object} data.boundaries Offsets of the popper boundaries
 * @property {Object} data.offsets The measurements of popper, reference and arrow elements
 * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values
 * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values
 * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0
 */

/**
 * Default options provided to Popper.js constructor.<br />
 * These can be overridden using the `options` argument of Popper.js.<br />
 * To override an option, simply pass an object with the same
 * structure of the `options` object, as the 3rd argument. For example:
 * ```
 * new Popper(ref, pop, {
 *   modifiers: {
 *     preventOverflow: { enabled: false }
 *   }
 * })
 * ```
 * @type {Object}
 * @static
 * @memberof Popper
 */
var Defaults = {
  /**
   * Popper's placement.
   * @prop {Popper.placements} placement='bottom'
   */
  placement: 'bottom',

  /**
   * Set this to true if you want popper to position it self in 'fixed' mode
   * @prop {Boolean} positionFixed=false
   */
  positionFixed: false,

  /**
   * Whether events (resize, scroll) are initially enabled.
   * @prop {Boolean} eventsEnabled=true
   */
  eventsEnabled: true,

  /**
   * Set to true if you want to automatically remove the popper when
   * you call the `destroy` method.
   * @prop {Boolean} removeOnDestroy=false
   */
  removeOnDestroy: false,

  /**
   * Callback called when the popper is created.<br />
   * By default, it is set to no-op.<br />
   * Access Popper.js instance with `data.instance`.
   * @prop {onCreate}
   */
  onCreate: function onCreate() {},

  /**
   * Callback called when the popper is updated. This callback is not called
   * on the initialization/creation of the popper, but only on subsequent
   * updates.<br />
   * By default, it is set to no-op.<br />
   * Access Popper.js instance with `data.instance`.
   * @prop {onUpdate}
   */
  onUpdate: function onUpdate() {},

  /**
   * List of modifiers used to modify the offsets before they are applied to the popper.
   * They provide most of the functionalities of Popper.js.
   * @prop {modifiers}
   */
  modifiers: modifiers
};

/**
 * @callback onCreate
 * @param {dataObject} data
 */

/**
 * @callback onUpdate
 * @param {dataObject} data
 */

// Utils
// Methods
var Popper = function () {
  /**
   * Creates a new Popper.js instance.
   * @class Popper
   * @param {Element|referenceObject} reference - The reference element used to position the popper
   * @param {Element} popper - The HTML / XML element used as the popper
   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)
   * @return {Object} instance - The generated Popper.js instance
   */
  function Popper(reference, popper) {
    var _this = this;

    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    classCallCheck(this, Popper);

    this.scheduleUpdate = function () {
      return requestAnimationFrame(_this.update);
    };

    // make update() debounced, so that it only runs at most once-per-tick
    this.update = debounce(this.update.bind(this));

    // with {} we create a new object with the options inside it
    this.options = _extends({}, Popper.Defaults, options);

    // init state
    this.state = {
      isDestroyed: false,
      isCreated: false,
      scrollParents: []
    };

    // get reference and popper elements (allow jQuery wrappers)
    this.reference = reference && reference.jquery ? reference[0] : reference;
    this.popper = popper && popper.jquery ? popper[0] : popper;

    // Deep merge modifiers options
    this.options.modifiers = {};
    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {
      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});
    });

    // Refactoring modifiers' list (Object => Array)
    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {
      return _extends({
        name: name
      }, _this.options.modifiers[name]);
    })
    // sort the modifiers by order
    .sort(function (a, b) {
      return a.order - b.order;
    });

    // modifiers have the ability to execute arbitrary code when Popper.js get inited
    // such code is executed in the same order of its modifier
    // they could add new properties to their options configuration
    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!
    this.modifiers.forEach(function (modifierOptions) {
      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {
        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);
      }
    });

    // fire the first update to position the popper in the right place
    this.update();

    var eventsEnabled = this.options.eventsEnabled;
    if (eventsEnabled) {
      // setup event listeners, they will take care of update the position in specific situations
      this.enableEventListeners();
    }

    this.state.eventsEnabled = eventsEnabled;
  }

  // We can't use class properties because they don't get listed in the
  // class prototype and break stuff like Sinon stubs


  createClass(Popper, [{
    key: 'update',
    value: function update$$1() {
      return update.call(this);
    }
  }, {
    key: 'destroy',
    value: function destroy$$1() {
      return destroy.call(this);
    }
  }, {
    key: 'enableEventListeners',
    value: function enableEventListeners$$1() {
      return enableEventListeners.call(this);
    }
  }, {
    key: 'disableEventListeners',
    value: function disableEventListeners$$1() {
      return disableEventListeners.call(this);
    }

    /**
     * Schedules an update. It will run on the next UI update available.
     * @method scheduleUpdate
     * @memberof Popper
     */


    /**
     * Collection of utilities useful when writing custom modifiers.
     * Starting from version 1.7, this method is available only if you
     * include `popper-utils.js` before `popper.js`.
     *
     * **DEPRECATION**: This way to access PopperUtils is deprecated
     * and will be removed in v2! Use the PopperUtils module directly instead.
     * Due to the high instability of the methods contained in Utils, we can't
     * guarantee them to follow semver. Use them at your own risk!
     * @static
     * @private
     * @type {Object}
     * @deprecated since version 1.8
     * @member Utils
     * @memberof Popper
     */

  }]);
  return Popper;
}();

/**
 * The `referenceObject` is an object that provides an interface compatible with Popper.js
 * and lets you use it as replacement of a real DOM node.<br />
 * You can use this method to position a popper relatively to a set of coordinates
 * in case you don't have a DOM node to use as reference.
 *
 * ```
 * new Popper(referenceObject, popperNode);
 * ```
 *
 * NB: This feature isn't supported in Internet Explorer 10.
 * @name referenceObject
 * @property {Function} data.getBoundingClientRect
 * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.
 * @property {number} data.clientWidth
 * An ES6 getter that will return the width of the virtual reference element.
 * @property {number} data.clientHeight
 * An ES6 getter that will return the height of the virtual reference element.
 */


Popper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;
Popper.placements = placements;
Popper.Defaults = Defaults;

/* harmony default export */ __webpack_exports__["default"] = (Popper);
//# sourceMappingURL=popper.js.map

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : undefined
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}


/***/ }),

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!*******************************************!*\
  !*** (webpack)/buildin/harmony-module.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(originalModule) {
	if (!originalModule.webpackPolyfill) {
		var module = Object.create(originalModule);
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		Object.defineProperty(module, "exports", {
			enumerable: true
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./resources/js/@ckeditor/ckeditor5-build-classic/build/ckeditor.js":
/*!**************************************************************************!*\
  !*** ./resources/js/@ckeditor/ckeditor5-build-classic/build/ckeditor.js ***!
  \**************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*!
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */!function(t){t.en=Object.assign(t.en||{},{a:"Cannot upload file:",b:"Image toolbar",c:"Table toolbar",d:"Bold",e:"Italic",f:"Block quote",g:"Insert image or file",h:"Choose heading",i:"Heading",j:"image widget",k:"Full size image",l:"Side image",m:"Left aligned image",n:"Centered image",o:"Right aligned image",p:"Insert image",q:"Numbered List",r:"Bulleted List",s:"Insert table",t:"Header column",u:"Insert column left",v:"Insert column right",w:"Delete column",x:"Column",y:"Header row",z:"Insert row below",aa:"Insert row above",ab:"Delete row",ac:"Row",ad:"Merge cell up",ae:"Merge cell right",af:"Merge cell down",ag:"Merge cell left",ah:"Split cell vertically",ai:"Split cell horizontally",aj:"Merge cells",ak:"Enter image caption",al:"Upload failed",am:"media widget",an:"Insert media",ao:"The URL must not be empty.",ap:"This media URL is not supported.",aq:"Link",ar:"Could not obtain resized image URL.",as:"Selecting resized image failed",at:"Could not insert image at the current position.",au:"Inserting image failed",av:"Widget toolbar",aw:"Upload in progress",ax:"Open in a new tab",ay:"Downloadable",az:"Unlink",ba:"Edit link",bb:"Open link in new tab",bc:"This link has no URL",bd:"Save",be:"Cancel",bf:"Link URL",bg:"Paste the media URL in the input.",bh:"Tip: Paste the URL into the content to embed faster.",bi:"Media URL",bj:"Undo",bk:"Redo",bl:"Editor toolbar",bm:"Rich Text Editor, %0",bn:"Rich Text Editor",bo:"Dropdown toolbar",bp:"%0 of %1",bq:"Previous",br:"Next",bs:"Change image text alternative",bt:"Paragraph",bu:"Heading 1",bv:"Heading 2",bw:"Heading 3",bx:"Heading 4",by:"Heading 5",bz:"Heading 6",ca:"Text alternative"});}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(t,e){"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&"object"==( false?undefined:_typeof(module))?module.exports=e():"function"==typeof define&&__webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js")?define([],e):"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))?exports.ClassicEditor=e():t.ClassicEditor=e();}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports;}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i});},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t){n.d(i,o,function(e){return t[e];}.bind(null,o));}return i;},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"];}:function(){return t;};return n.d(e,"a",e),e;},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e);},n.p="",n(n.s=91);}([function(t,e,n){"use strict";n.d(e,"b",function(){return o;}),n.d(e,"a",function(){return r;});var i="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";var o=/*#__PURE__*/function(_Error){_inherits(o,_Error);function o(t,e,n){var _this;_classCallCheck(this,o);t=r(t),n&&(t+=" "+JSON.stringify(n)),_this=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,t)),_this.name="CKEditorError",_this.context=e,_this.data=n;return _this;}_createClass(o,[{key:"is",value:function is(t){return"CKEditorError"===t;}}]);return o;}(_wrapNativeSuper(Error));function r(t){var e=t.match(/^([^:]+):/);return e?t+" Read more: ".concat(i,"#error-").concat(e[1],"\n"):t;}},function(t,e,n){"use strict";var i={},o=function(){var t;return function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t;};}(),r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head;}catch(t){n=null;}t[e]=n;}return t[e];};}();function s(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]});}return n;}function a(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=i[o.id],s=0;if(r){for(r.refs++;s<r.parts.length;s++){r.parts[s](o.parts[s]);}for(;s<o.parts.length;s++){r.parts.push(f(o.parts[s],e));}}else{for(var a=[];s<o.parts.length;s++){a.push(f(o.parts[s],e));}i[o.id]={id:o.id,refs:1,parts:a};}}}function c(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var i=n.nc;i&&(t.attributes.nonce=i);}if(Object.keys(t.attributes).forEach(function(n){e.setAttribute(n,t.attributes[n]);}),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e);}return e;}var l=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n");};}();function d(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r);}}var h=null,u=0;function f(t,e){var n,i,o;if(e.singleton){var r=u++;n=h||(h=c(e)),i=d.bind(null,n,r,!1),o=d.bind(null,n,r,!0);}else n=c(e),i=function(t,e,n){var i=n.css,o=n.media,r=n.sourceMap;if(o&&t.setAttribute("media",o),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;){t.removeChild(t.firstChild);}t.appendChild(document.createTextNode(i));}}.bind(null,n,e),o=function o(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);}(n);};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e);}else o();};}t.exports=function(t,e){(e=e||{}).attributes="object"==_typeof(e.attributes)?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=s(t,e);return a(n,e),function(t){for(var o=[],r=0;r<n.length;r++){var c=n[r],l=i[c.id];l&&(l.refs--,o.push(l));}t&&a(s(t,e),e);for(var d=0;d<o.length;d++){var h=o[d];if(0===h.refs){for(var u=0;u<h.parts.length;u++){h.parts[u]();}delete i[h.id];}}};};},,function(t,e,n){"use strict";var i=n(7),o="object"==(typeof self==="undefined"?"undefined":_typeof(self))&&self&&self.Object===Object&&self,r=i.a||o||Function("return this")();e.a=r;},function(t,e,n){"use strict";(function(t){var i=n(7),o="object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(t)&&t&&!t.nodeType&&t,s=r&&r.exports===o&&i.a.process,a=function(){try{var t=r&&r.require&&r.require("util").types;return t||s&&s.binding&&s.binding("util");}catch(t){}}();e.a=a;}).call(this,n(8)(t));},function(t,e,n){"use strict";(function(t){var i=n(3),o=n(11),r="object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,s=r&&"object"==_typeof(t)&&t&&!t.nodeType&&t,a=s&&s.exports===r?i.a.Buffer:void 0,c=(a?a.isBuffer:void 0)||o.a;e.a=c;}).call(this,n(8)(t));},function(t,e,n){"use strict";(function(t){var e=n(13),i=n(0);var o="object"==(typeof window==="undefined"?"undefined":_typeof(window))?window:t;if(o.CKEDITOR_VERSION)throw new i.b("ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.",null);o.CKEDITOR_VERSION=e.a;}).call(this,n(9));},function(t,e,n){"use strict";(function(t){var n="object"==_typeof(t)&&t&&t.Object===Object&&t;e.a=n;}).call(this,n(9));},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l;}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i;}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1;}return e;};},function(t,e){var n;n=function(){return this;}();try{n=n||new Function("return this")();}catch(t){"object"==(typeof window==="undefined"?"undefined":_typeof(window))&&(n=window);}t.exports=n;},function(t,e,n){var i=n(68);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e,n){"use strict";e.a=function(){return!1;};},function(t,e,n){"use strict";(function(t){var i=n(3),o="object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,r=o&&"object"==_typeof(t)&&t&&!t.nodeType&&t,s=r&&r.exports===o?i.a.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i;};}).call(this,n(8)(t));},function(t){t.exports=JSON.parse('{"a":"12.4.0"}');},function(t,e,n){var i=n(15);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none;cursor:text;color:var(--ck-color-engine-placeholder-text)}";},function(t,e,n){var i=n(17);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border:#47a4f5;--ck-color-focus-shadow:rgba(119,186,248,0.5);--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}";},function(t,e,n){var i=n(19);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}";},function(t,e,n){var i=n(21);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}";},function(t,e,n){var i=n(23);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}";},function(t,e,n){var i=n(25);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row wrap;align-items:center}.ck.ck-toolbar.ck-toolbar_vertical{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating{flex-wrap:nowrap}.ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar__newline{display:block;width:100%}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-toolbar>*{margin-left:var(--ck-spacing-small);margin-right:0}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck{width:100%;margin:0;border-radius:0;border:0}[dir=ltr] .ck.ck-toolbar>:last-child{margin-right:0}[dir=rtl] .ck.ck-toolbar>:last-child{margin-left:0}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar__separator{align-self:stretch;width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck.ck-toolbar__newline{margin:0}";},function(t,e,n){var i=n(27);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}";},function(t,e,n){var i=n(29);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}";},function(t,e,n){var i=n(31);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck-tooltip .ck-tooltip__text{display:inline-block}.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{border-style:solid;left:50%}.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s}';},function(t,e,n){var i=n(33);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button .ck-button__label,.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button .ck-button__label,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;border-color:transparent}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}";},function(t,e,n){var i=n(35);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}";},function(t,e,n){var i=n(37);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0;outline:1px solid var(--ck-color-resizer)}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all;width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nesw-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nesw-resize}.ck .ck-widget.ck-widget_with-selection-handler{position:relative}.ck .ck-widget.ck-widget_with-selection-handler:hover .ck-widget__selection-handler{visibility:visible}.ck .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler{position:absolute}.ck .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handler.ck-widget_selected .ck-widget__selection-handler{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck-editor__editable>.ck-widget.ck-widget_with-selection-handler:first-child,.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handler:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}.ck .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handler.ck-widget_selected .ck-widget__selection-handler,.ck .ck-widget.ck-widget_with-selection-handler.ck-widget_selected:hover .ck-widget__selection-handler{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handler.ck-widget_selected .ck-widget__selection-handler .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handler.ck-widget_selected:hover .ck-widget__selection-handler .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handler:hover .ck-widget__selection-handler{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handler .ck-widget__selection-handler{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected .ck-widget__selection-handler,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected .ck-widget__selection-handler:hover,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover .ck-widget__selection-handler,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover .ck-widget__selection-handler:hover{background:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-read-only .ck-widget{--ck-widget-outline-thickness:0}";},function(t,e,n){var i=n(39);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}";},function(t,e,n){var i=n(41);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition-property:box-shadow,border;transition:.2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}";},function(t,e,n){var i=n(43);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-input{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}";},function(t,e,n){var i=n(45);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}';},function(t,e,n){var i=n(47);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}";},function(t,e,n){var i=n(49);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}";},function(t,e,n){var i=n(51);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}";},function(t,e,n){var i=n(53);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}";},function(t,e,n){var i=n(55);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';},function(t,e,n){var i=n(57);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';},function(t,e,n){var i=n(59);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block;will-change:transform}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{transform:translate3d(0,100%,0)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}";},function(t,e,n){var i=n(61);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;border:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:hover:not(ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}";},function(t,e,n){var i=n(63);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:1.3846153847em}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}";},function(t,e,n){var i=n(65);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-toolbar-dropdown .ck-toolbar{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}";},function(t,e,n){var i=n(67);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}";},function(t,e){t.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}";},function(t,e,n){var i=n(70);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}";},function(t,e,n){var i=n(72);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center:not(.image_resized),.ck-content .image-style-align-left:not(.image_resized),.ck-content .image-style-align-right:not(.image_resized),.ck-content .image-style-side:not(.image_resized){max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}";},function(t,e,n){var i=n(74);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}";},function(t,e,n){var i=n(76);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-input{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}";},function(t,e,n){var i=n(78);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}";},function(t,e,n){var i=n(80);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3*var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c8,#b900b4,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';},function(t,e,n){var i=n(82);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-input{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-input{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}.ck.ck-media-form{padding:var(--ck-spacing-standard)}.ck.ck-media-form:focus{outline:none}[dir=ltr] .ck.ck-media-form>:not(:first-child),[dir=rtl] .ck.ck-media-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-media-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-media-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-media-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-media-form .ck-labeled-input .ck-labeled-input__error{white-space:normal}.ck.ck-media-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-media-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-media-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-media-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-media-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}";},function(t,e,n){var i=n(84);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}";},function(t,e,n){var i=n(86);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=":root{--ck-color-table-focused-cell-background:#f5fafe}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}";},function(t,e,n){var i=n(88);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=":root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px;--ck-insert-table-dropdown-box-border-color:#bfbfbf;--ck-insert-table-dropdown-box-border-active-color:#53a0e4;--ck-insert-table-dropdown-box-active-background:#c7e5ff}.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-insert-table-dropdown-box-border-color);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-insert-table-dropdown-box-border-active-color);background:var(--ck-insert-table-dropdown-box-active-background)}";},function(t,e,n){var i=n(90);"string"==typeof i&&(i=[[t.i,i,""]]);var o={injectType:"singletonStyleTag",insert:"head",singleton:!0};n(1)(i,o);i.locals&&(t.exports=i.locals);},function(t,e){t.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border-color:#d9d9d9}.ck-content .table table th{font-weight:700;background:#fafafa}";},function(t,e,n){"use strict";var _marked=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(Ga),_marked2=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(Qa),_marked3=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(id);n.r(e);var i=n(3),o=i.a.Symbol,r=Object.prototype,s=r.hasOwnProperty,a=r.toString,c=o?o.toStringTag:void 0;var l=function l(t){var e=s.call(t,c),n=t[c];try{t[c]=void 0;var i=!0;}catch(t){}var o=a.call(t);return i&&(e?t[c]=n:delete t[c]),o;},d=Object.prototype.toString;var h=function h(t){return d.call(t);},u="[object Null]",f="[object Undefined]",m=o?o.toStringTag:void 0;var g=function g(t){return null==t?void 0===t?f:u:m&&m in Object(t)?l(t):h(t);};var p=function p(t,e){return function(n){return t(e(n));};},b=p(Object.getPrototypeOf,Object);var w=function w(t){return null!=t&&"object"==_typeof(t);},k="[object Object]",_=Function.prototype,v=Object.prototype,y=_.toString,x=v.hasOwnProperty,A=y.call(Object);var T=function T(t){if(!w(t)||g(t)!=k)return!1;var e=b(t);if(null===e)return!0;var n=x.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&y.call(n)==A;};var C=function C(){this.__data__=[],this.size=0;};var P=function P(t,e){return t===e||t!=t&&e!=e;};var S=function S(t,e){for(var n=t.length;n--;){if(P(t[n][0],e))return n;}return-1;},M=Array.prototype.splice;var E=function E(t){var e=this.__data__,n=S(e,t);return!(n<0||(n==e.length-1?e.pop():M.call(e,n,1),--this.size,0));};var I=function I(t){var e=this.__data__,n=S(e,t);return n<0?void 0:e[n][1];};var N=function N(t){return S(this.__data__,t)>-1;};var O=function O(t,e){var n=this.__data__,i=S(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this;};function R(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1]);}}R.prototype.clear=C,R.prototype["delete"]=E,R.prototype.get=I,R.prototype.has=N,R.prototype.set=O;var D=R;var L=function L(){this.__data__=new D(),this.size=0;};var j=function j(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n;};var V=function V(t){return this.__data__.get(t);};var z=function z(t){return this.__data__.has(t);};var B=function B(t){var e=_typeof(t);return null!=t&&("object"==e||"function"==e);},F="[object AsyncFunction]",U="[object Function]",H="[object GeneratorFunction]",q="[object Proxy]";var W=function W(t){if(!B(t))return!1;var e=g(t);return e==U||e==H||e==F||e==q;},Y=i.a["__core-js_shared__"],$=function(){var t=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:"";}();var G=function G(t){return!!$&&$ in t;},Q=Function.prototype.toString;var K=function K(t){if(null!=t){try{return Q.call(t);}catch(t){}try{return t+"";}catch(t){}}return"";},J=/^\[object .+?Constructor\]$/,Z=Function.prototype,X=Object.prototype,tt=Z.toString,et=X.hasOwnProperty,nt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var it=function it(t){return!(!B(t)||G(t))&&(W(t)?nt:J).test(K(t));};var ot=function ot(t,e){return null==t?void 0:t[e];};var rt=function rt(t,e){var n=ot(t,e);return it(n)?n:void 0;},st=rt(i.a,"Map"),at=rt(Object,"create");var ct=function ct(){this.__data__=at?at(null):{},this.size=0;};var lt=function lt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e;},dt="__lodash_hash_undefined__",ht=Object.prototype.hasOwnProperty;var ut=function ut(t){var e=this.__data__;if(at){var n=e[t];return n===dt?void 0:n;}return ht.call(e,t)?e[t]:void 0;},ft=Object.prototype.hasOwnProperty;var mt=function mt(t){var e=this.__data__;return at?void 0!==e[t]:ft.call(e,t);},gt="__lodash_hash_undefined__";var pt=function pt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=at&&void 0===e?gt:e,this;};function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1]);}}bt.prototype.clear=ct,bt.prototype["delete"]=lt,bt.prototype.get=ut,bt.prototype.has=mt,bt.prototype.set=pt;var wt=bt;var kt=function kt(){this.size=0,this.__data__={hash:new wt(),map:new(st||D)(),string:new wt()};};var _t=function _t(t){var e=_typeof(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t;};var vt=function vt(t,e){var n=t.__data__;return _t(e)?n["string"==typeof e?"string":"hash"]:n.map;};var yt=function yt(t){var e=vt(this,t)["delete"](t);return this.size-=e?1:0,e;};var xt=function xt(t){return vt(this,t).get(t);};var At=function At(t){return vt(this,t).has(t);};var Tt=function Tt(t,e){var n=vt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this;};function Ct(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1]);}}Ct.prototype.clear=kt,Ct.prototype["delete"]=yt,Ct.prototype.get=xt,Ct.prototype.has=At,Ct.prototype.set=Tt;var Pt=Ct,St=200;var Mt=function Mt(t,e){var n=this.__data__;if(n instanceof D){var i=n.__data__;if(!st||i.length<St-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Pt(i);}return n.set(t,e),this.size=n.size,this;};function Et(t){var e=this.__data__=new D(t);this.size=e.size;}Et.prototype.clear=L,Et.prototype["delete"]=j,Et.prototype.get=V,Et.prototype.has=z,Et.prototype.set=Mt;var It=Et;var Nt=function Nt(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t);){;}return t;},Ot=function(){try{var t=rt(Object,"defineProperty");return t({},"",{}),t;}catch(t){}}();var Rt=function Rt(t,e,n){"__proto__"==e&&Ot?Ot(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n;},Dt=Object.prototype.hasOwnProperty;var Lt=function Lt(t,e,n){var i=t[e];Dt.call(t,e)&&P(i,n)&&(void 0!==n||e in t)||Rt(t,e,n);};var jt=function jt(t,e,n,i){var o=!n;n||(n={});for(var r=-1,s=e.length;++r<s;){var a=e[r],c=i?i(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),o?Rt(n,a,c):Lt(n,a,c);}return n;};var Vt=function Vt(t,e){for(var n=-1,i=Array(t);++n<t;){i[n]=e(n);}return i;},zt="[object Arguments]";var Bt=function Bt(t){return w(t)&&g(t)==zt;},Ft=Object.prototype,Ut=Ft.hasOwnProperty,Ht=Ft.propertyIsEnumerable,qt=Bt(function(){return arguments;}())?Bt:function(t){return w(t)&&Ut.call(t,"callee")&&!Ht.call(t,"callee");},Wt=Array.isArray,Yt=n(5),$t=9007199254740991,Gt=/^(?:0|[1-9]\d*)$/;var Qt=function Qt(t,e){var n=_typeof(t);return!!(e=null==e?$t:e)&&("number"==n||"symbol"!=n&&Gt.test(t))&&t>-1&&t%1==0&&t<e;},Kt=9007199254740991;var Jt=function Jt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Kt;},Zt={};Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object Boolean]"]=Zt["[object DataView]"]=Zt["[object Date]"]=Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object WeakMap]"]=!1;var Xt=function Xt(t){return w(t)&&Jt(t.length)&&!!Zt[g(t)];};var te=function te(t){return function(e){return t(e);};},ee=n(4),ne=ee.a&&ee.a.isTypedArray,ie=ne?te(ne):Xt,oe=Object.prototype.hasOwnProperty;var re=function re(t,e){var n=Wt(t),i=!n&&qt(t),o=!n&&!i&&Object(Yt.a)(t),r=!n&&!i&&!o&&ie(t),s=n||i||o||r,a=s?Vt(t.length,String):[],c=a.length;for(var l in t){!e&&!oe.call(t,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Qt(l,c))||a.push(l);}return a;},se=Object.prototype;var ae=function ae(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||se);},ce=p(Object.keys,Object),le=Object.prototype.hasOwnProperty;var de=function de(t){if(!ae(t))return ce(t);var e=[];for(var n in Object(t)){le.call(t,n)&&"constructor"!=n&&e.push(n);}return e;};var he=function he(t){return null!=t&&Jt(t.length)&&!W(t);};var ue=function ue(t){return he(t)?re(t):de(t);};var fe=function fe(t,e){return t&&jt(e,ue(e),t);};var me=function me(t){var e=[];if(null!=t)for(var n in Object(t)){e.push(n);}return e;},ge=Object.prototype.hasOwnProperty;var pe=function pe(t){if(!B(t))return me(t);var e=ae(t),n=[];for(var i in t){("constructor"!=i||!e&&ge.call(t,i))&&n.push(i);}return n;};var be=function be(t){return he(t)?re(t,!0):pe(t);};var we=function we(t,e){return t&&jt(e,be(e),t);},ke=n(12);var _e=function _e(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;){e[n]=t[n];}return e;};var ve=function ve(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s);}return r;};var ye=function ye(){return[];},xe=Object.prototype.propertyIsEnumerable,Ae=Object.getOwnPropertySymbols,Te=Ae?function(t){return null==t?[]:(t=Object(t),ve(Ae(t),function(e){return xe.call(t,e);}));}:ye;var Ce=function Ce(t,e){return jt(t,Te(t),e);};var Pe=function Pe(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;){t[o+n]=e[n];}return t;},Se=Object.getOwnPropertySymbols?function(t){for(var e=[];t;){Pe(e,Te(t)),t=b(t);}return e;}:ye;var Me=function Me(t,e){return jt(t,Se(t),e);};var Ee=function Ee(t,e,n){var i=e(t);return Wt(t)?i:Pe(i,n(t));};var Ie=function Ie(t){return Ee(t,ue,Te);};var Ne=function Ne(t){return Ee(t,be,Se);},Oe=rt(i.a,"DataView"),Re=rt(i.a,"Promise"),De=rt(i.a,"Set"),Le=rt(i.a,"WeakMap"),je=K(Oe),Ve=K(st),ze=K(Re),Be=K(De),Fe=K(Le),Ue=g;(Oe&&"[object DataView]"!=Ue(new Oe(new ArrayBuffer(1)))||st&&"[object Map]"!=Ue(new st())||Re&&"[object Promise]"!=Ue(Re.resolve())||De&&"[object Set]"!=Ue(new De())||Le&&"[object WeakMap]"!=Ue(new Le()))&&(Ue=function Ue(t){var e=g(t),n="[object Object]"==e?t.constructor:void 0,i=n?K(n):"";if(i)switch(i){case je:return"[object DataView]";case Ve:return"[object Map]";case ze:return"[object Promise]";case Be:return"[object Set]";case Fe:return"[object WeakMap]";}return e;});var He=Ue,qe=Object.prototype.hasOwnProperty;var We=function We(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&qe.call(t,"index")&&(n.index=t.index,n.input=t.input),n;},Ye=i.a.Uint8Array;var $e=function $e(t){var e=new t.constructor(t.byteLength);return new Ye(e).set(new Ye(t)),e;};var Ge=function Ge(t,e){var n=e?$e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength);},Qe=/\w*$/;var Ke=function Ke(t){var e=new t.constructor(t.source,Qe.exec(t));return e.lastIndex=t.lastIndex,e;},Je=o?o.prototype:void 0,Ze=Je?Je.valueOf:void 0;var Xe=function Xe(t){return Ze?Object(Ze.call(t)):{};};var tn=function tn(t,e){var n=e?$e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length);},en="[object Boolean]",nn="[object Date]",on="[object Map]",rn="[object Number]",sn="[object RegExp]",an="[object Set]",cn="[object String]",ln="[object Symbol]",dn="[object ArrayBuffer]",hn="[object DataView]",un="[object Float32Array]",fn="[object Float64Array]",mn="[object Int8Array]",gn="[object Int16Array]",pn="[object Int32Array]",bn="[object Uint8Array]",wn="[object Uint8ClampedArray]",kn="[object Uint16Array]",_n="[object Uint32Array]";var vn=function vn(t,e,n){var i=t.constructor;switch(e){case dn:return $e(t);case en:case nn:return new i(+t);case hn:return Ge(t,n);case un:case fn:case mn:case gn:case pn:case bn:case wn:case kn:case _n:return tn(t,n);case on:return new i();case rn:case cn:return new i(t);case sn:return Ke(t);case an:return new i();case ln:return Xe(t);}},yn=Object.create,xn=function(){function t(){}return function(e){if(!B(e))return{};if(yn)return yn(e);t.prototype=e;var n=new t();return t.prototype=void 0,n;};}();var An=function An(t){return"function"!=typeof t.constructor||ae(t)?{}:xn(b(t));},Tn="[object Map]";var Cn=function Cn(t){return w(t)&&He(t)==Tn;},Pn=ee.a&&ee.a.isMap,Sn=Pn?te(Pn):Cn,Mn="[object Set]";var En=function En(t){return w(t)&&He(t)==Mn;},In=ee.a&&ee.a.isSet,Nn=In?te(In):En,On=1,Rn=2,Dn=4,Ln="[object Arguments]",jn="[object Function]",Vn="[object GeneratorFunction]",zn="[object Object]",Bn={};Bn[Ln]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object DataView]"]=Bn["[object Boolean]"]=Bn["[object Date]"]=Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn[zn]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object Symbol]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=!0,Bn["[object Error]"]=Bn[jn]=Bn["[object WeakMap]"]=!1;var Fn=function t(e,n,i,o,r,s){var a,c=n&On,l=n&Rn,d=n&Dn;if(i&&(a=r?i(e,o,r,s):i(e)),void 0!==a)return a;if(!B(e))return e;var h=Wt(e);if(h){if(a=We(e),!c)return _e(e,a);}else{var u=He(e),f=u==jn||u==Vn;if(Object(Yt.a)(e))return Object(ke.a)(e,c);if(u==zn||u==Ln||f&&!r){if(a=l||f?{}:An(e),!c)return l?Me(e,we(a,e)):Ce(e,fe(a,e));}else{if(!Bn[u])return r?e:{};a=vn(e,u,c);}}s||(s=new It());var m=s.get(e);if(m)return m;s.set(e,a),Nn(e)?e.forEach(function(o){a.add(t(o,n,i,o,e,s));}):Sn(e)&&e.forEach(function(o,r){a.set(r,t(o,n,i,r,e,s));});var g=d?l?Ne:Ie:l?keysIn:ue,p=h?void 0:g(e);return Nt(p||e,function(o,r){p&&(o=e[r=o]),Lt(a,r,t(o,n,i,r,e,s));}),a;},Un=1,Hn=4;var qn=function qn(t,e){return Fn(t,Un|Hn,e="function"==typeof e?e:void 0);};var Wn=function Wn(t){return w(t)&&1===t.nodeType&&!T(t);};var Yn=/*#__PURE__*/function(){function Yn(t,e){_classCallCheck(this,Yn);this._config={},e&&this.define(e),t&&this._setObjectToTarget(this._config,t);}_createClass(Yn,[{key:"set",value:function set(t,e){this._setToTarget(this._config,t,e);}},{key:"define",value:function define(t,e){this._setToTarget(this._config,t,e,!0);}},{key:"get",value:function get(t){return this._getFromSource(this._config,t);}},{key:"_setToTarget",value:function _setToTarget(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(T(e))return void this._setObjectToTarget(t,e,i);var o=e.split(".");e=o.pop();var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=o[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _e2=_step.value;T(t[_e2])||(t[_e2]={}),t=t[_e2];}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(T(n))return T(t[e])||(t[e]={}),t=t[e],void this._setObjectToTarget(t,n,i);i&&void 0!==t[e]||(t[e]=n);}},{key:"_getFromSource",value:function _getFromSource(t,e){var n=e.split(".");e=n.pop();var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=n[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _e3=_step2.value;if(!T(t[_e3])){t=null;break;}t=t[_e3];}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return t?function(t){return qn(t,$n);}(t[e]):void 0;}},{key:"_setObjectToTarget",value:function _setObjectToTarget(t,e,n){var _this2=this;Object.keys(e).forEach(function(i){_this2._setToTarget(t,i,e[i],n);});}}]);return Yn;}();function $n(t){return Wn(t)?t:void 0;}var Gn=n(0);var Qn=function Qn(){return function t(){t.called=!0;};};var Kn=function Kn(t,e){_classCallCheck(this,Kn);this.source=t,this.name=e,this.path=[],this.stop=Qn(),this.off=Qn();};function Jn(){var t="e";for(var _e4=0;_e4<8;_e4++){t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);}return t;}var Zn={get:function get(t){return"number"!=typeof t?this[t]||this.normal:t;},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};n(6);var Xn=Symbol("listeningTo"),ti=Symbol("emitterId");var ei={on:function on(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.listenTo(this,t,e,n);},once:function once(t,e,n){var i=!1;this.listenTo(this,t,function(t){for(var _len=arguments.length,n=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){n[_key-1]=arguments[_key];}i||(i=!0,t.off(),e.call.apply(e,[this,t].concat(n)));},n);},off:function off(t,e){this.stopListening(this,t,e);},listenTo:function listenTo(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o,r;this[Xn]||(this[Xn]={});var s=this[Xn];ii(t)||ni(t);var a=ii(t);(o=s[a])||(o=s[a]={emitter:t,callbacks:{}}),(r=o.callbacks[e])||(r=o.callbacks[e]=[]),r.push(n),function(t,e){var n=oi(t);if(n[e])return;var i=e,o=null;var r=[];for(;""!==i&&!n[i];){n[i]={callbacks:[],childEvents:[]},r.push(n[i]),o&&n[i].childEvents.push(o),o=i,i=i.substr(0,i.lastIndexOf(":"));}if(""!==i){for(var _i2=0,_r2=r;_i2<_r2.length;_i2++){var _t2=_r2[_i2];_t2.callbacks=n[i].callbacks.slice();}n[i].childEvents.push(o);}}(t,e);var c=ri(t,e),l=Zn.get(i.priority),d={callback:n,priority:l};var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=c[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _t3=_step3.value;var _e5=!1;for(var _n2=0;_n2<_t3.length;_n2++){if(_t3[_n2].priority<l){_t3.splice(_n2,0,d),_e5=!0;break;}}_e5||_t3.push(d);}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}},stopListening:function stopListening(t,e,n){var i=this[Xn];var o=t&&ii(t);var r=i&&o&&i[o],s=r&&e&&r.callbacks[e];if(!(!i||t&&!r||e&&!s))if(n)ai(t,e,n);else if(s){for(;n=s.pop();){ai(t,e,n);}delete r.callbacks[e];}else if(r){for(e in r.callbacks){this.stopListening(t,e);}delete i[o];}else{for(o in i){this.stopListening(i[o].emitter);}delete this[Xn];}},fire:function fire(t){var n=t instanceof Kn?t:new Kn(this,t),i=n.name;var o=function t(e,n){var i;if(!e._events||!(i=e._events[n])||!i.callbacks.length)return n.indexOf(":")>-1?t(e,n.substr(0,n.lastIndexOf(":"))):null;return i.callbacks;}(this,i);for(var _len2=arguments.length,e=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){e[_key2-1]=arguments[_key2];}if(n.path.push(this),o){var _t4=[n].concat(e);o=Array.from(o);for(var _e6=0;_e6<o.length&&(o[_e6].callback.apply(this,_t4),n.off.called&&(delete n.off.called,ai(this,i,o[_e6].callback)),!n.stop.called);_e6++){;}}if(this._delegations){var _t5=this._delegations.get(i),_o2=this._delegations.get("*");_t5&&si(_t5,n,e),_o2&&si(_o2,n,e);}return n["return"];},delegate:function delegate(){var _this3=this;for(var _len3=arguments.length,t=new Array(_len3),_key3=0;_key3<_len3;_key3++){t[_key3]=arguments[_key3];}return{to:function to(e,n){_this3._delegations||(_this3._delegations=new Map()),t.forEach(function(t){var i=_this3._delegations.get(t);i?i.set(e,n):_this3._delegations.set(t,new Map([[e,n]]));});}};},stopDelegating:function stopDelegating(t,e){if(this._delegations)if(t){if(e){var _n3=this._delegations.get(t);_n3&&_n3["delete"](e);}else this._delegations["delete"](t);}else this._delegations.clear();}};function ni(t,e){t[ti]||(t[ti]=e||Jn());}function ii(t){return t[ti];}function oi(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events;}function ri(t,e){var n=oi(t)[e];if(!n)return[];var i=[n.callbacks];for(var _e7=0;_e7<n.childEvents.length;_e7++){var _o3=ri(t,n.childEvents[_e7]);i=i.concat(_o3);}return i;}function si(t,e,n){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=t[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2),_i3=_step4$value[0],_o4=_step4$value[1];_o4?"function"==typeof _o4&&(_o4=_o4(e.name)):_o4=e.name;var _t6=new Kn(e.source,_o4);_t6.path=_toConsumableArray(e.path),_i3.fire.apply(_i3,[_t6].concat(_toConsumableArray(n)));}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}}function ai(t,e,n){var i=ri(t,e);var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=i[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _t7=_step5.value;for(var _e8=0;_e8<_t7.length;_e8++){_t7[_e8].callback==n&&(_t7.splice(_e8,1),_e8--);}}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}}function ci(t){for(var _len4=arguments.length,e=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){e[_key4-1]=arguments[_key4];}e.forEach(function(e){Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(n){if(n in t.prototype)return;var i=Object.getOwnPropertyDescriptor(e,n);i.enumerable=!1,Object.defineProperty(t.prototype,n,i);});});}function li(t,e){var n=Math.min(t.length,e.length);for(var _i4=0;_i4<n;_i4++){if(t[_i4]!=e[_i4])return _i4;}return t.length==e.length?"same":t.length<e.length?"prefix":"extension";}var di=4;var hi=function hi(t){return Fn(t,di);};var ui=/*#__PURE__*/function(){function ui(){_classCallCheck(this,ui);this.parent=null;}_createClass(ui,[{key:"getPath",value:function getPath(){var t=[];var e=this;for(;e.parent;){t.unshift(e.index),e=e.parent;}return t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var n=t.includeSelf?this:this.parent;for(;n;){e[t.parentFirst?"push":"unshift"](n),n=n.parent;}return e;}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this.getAncestors(e),i=t.getAncestors(e);var o=0;for(;n[o]==i[o]&&n[o];){o++;}return 0===o?null:n[o-1];}},{key:"isBefore",value:function isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),n=t.getPath(),i=li(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i];}}},{key:"isAfter",value:function isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_fireChange",value:function _fireChange(t,e){this.fire("change:"+t,e),this.parent&&this.parent._fireChange(t,e);}},{key:"toJSON",value:function toJSON(){var t=hi(this);return delete t.parent,t;}},{key:"is",value:function is(t){return"node"==t||"view:node"==t;}},{key:"index",get:function get(){var t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new Gn.b("view-node-not-found-in-parent: The node's parent does not contain this node.",this);return t;}},{key:"nextSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null;}},{key:"previousSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null;}},{key:"root",get:function get(){var t=this;for(;t.parent;){t=t.parent;}return t;}},{key:"document",get:function get(){return this.parent instanceof ui?this.parent.document:null;}}]);return ui;}();ci(ui,ei);var fi=/*#__PURE__*/function(_ui){_inherits(fi,_ui);function fi(t){var _this4;_classCallCheck(this,fi);_this4=_possibleConstructorReturn(this,_getPrototypeOf(fi).call(this)),_this4._textData=t;return _this4;}_createClass(fi,[{key:"is",value:function is(t){return"text"==t||"view:text"==t||_get(_getPrototypeOf(fi.prototype),"is",this).call(this,t);}},{key:"isSimilar",value:function isSimilar(t){return t instanceof fi&&(this===t||this.data===t.data);}},{key:"_clone",value:function _clone(){return new fi(this.data);}},{key:"data",get:function get(){return this._textData;}},{key:"_data",get:function get(){return this.data;},set:function set(t){this._fireChange("text",this),this._textData=t;}}]);return fi;}(ui);var mi=/*#__PURE__*/function(){function mi(t,e,n){_classCallCheck(this,mi);if(this.textNode=t,e<0||e>t.data.length)throw new Gn.b("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(n<0||e+n>t.data.length)throw new Gn.b("view-textproxy-wrong-length: Given length value is incorrect.",this);this.data=t.data.substring(e,e+n),this.offsetInText=e;}_createClass(mi,[{key:"is",value:function is(t){return"textProxy"==t||"view:textProxy"==t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var n=t.includeSelf?this.textNode:this.parent;for(;null!==n;){e[t.parentFirst?"push":"unshift"](n),n=n.parent;}return e;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"isPartial",get:function get(){return this.data.length!==this.textNode.data.length;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"document",get:function get(){return this.textNode.document;}}]);return mi;}();function gi(t){var e=new Map();for(var _n4 in t){e.set(_n4,t[_n4]);}return e;}function pi(t){return!(!t||!t[Symbol.iterator]);}var bi=/*#__PURE__*/function(){function bi(){_classCallCheck(this,bi);this._patterns=[],this.add.apply(this,arguments);}_createClass(bi,[{key:"add",value:function add(){for(var _len5=arguments.length,t=new Array(_len5),_key5=0;_key5<_len5;_key5++){t[_key5]=arguments[_key5];}for(var _i5=0,_t8=t;_i5<_t8.length;_i5++){var _e9=_t8[_i5];("string"==typeof _e9||_e9 instanceof RegExp)&&(_e9={name:_e9}),_e9.classes&&("string"==typeof _e9.classes||_e9.classes instanceof RegExp)&&(_e9.classes=[_e9.classes]),this._patterns.push(_e9);}}},{key:"match",value:function match(){for(var _len6=arguments.length,t=new Array(_len6),_key6=0;_key6<_len6;_key6++){t[_key6]=arguments[_key6];}for(var _i6=0,_t9=t;_i6<_t9.length;_i6++){var _e10=_t9[_i6];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=this._patterns[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _t10=_step6.value;var _n5=wi(_e10,_t10);if(_n5)return{element:_e10,pattern:_t10,match:_n5};}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6["return"]!=null){_iterator6["return"]();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}}return null;}},{key:"matchAll",value:function matchAll(){var e=[];for(var _len7=arguments.length,t=new Array(_len7),_key7=0;_key7<_len7;_key7++){t[_key7]=arguments[_key7];}for(var _i7=0,_t11=t;_i7<_t11.length;_i7++){var _n6=_t11[_i7];var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=this._patterns[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var _t12=_step7.value;var _i8=wi(_n6,_t12);_i8&&e.push({element:_n6,pattern:_t12,match:_i8});}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7["return"]!=null){_iterator7["return"]();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}}return e.length>0?e:null;}},{key:"getElementName",value:function getElementName(){if(1!==this._patterns.length)return null;var t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e;}}]);return bi;}();function wi(t,e){if("function"==typeof e)return e(t);var n={};return e.name&&(n.name=function(t,e){if(t instanceof RegExp)return t.test(e);return t===e;}(e.name,t.name),!n.name)?null:e.attributes&&(n.attributes=function(t,e){var n=[];for(var _i9 in t){var _o5=t[_i9];if(!e.hasAttribute(_i9))return null;{var _t13=e.getAttribute(_i9);if(!0===_o5)n.push(_i9);else if(_o5 instanceof RegExp){if(!_o5.test(_t13))return null;n.push(_i9);}else{if(_t13!==_o5)return null;n.push(_i9);}}}return n;}(e.attributes,t),!n.attributes)?null:!(e.classes&&(n.classes=function(t,e){var n=[];var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=t[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var _i10=_step8.value;if(_i10 instanceof RegExp){var _t14=e.getClassNames();var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=_t14[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var _e11=_step9.value;_i10.test(_e11)&&n.push(_e11);}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9["return"]!=null){_iterator9["return"]();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}if(0===n.length)return null;}else{if(!e.hasClass(_i10))return null;n.push(_i10);}}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8["return"]!=null){_iterator8["return"]();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}return n;}(e.classes,t),!n.classes))&&!(e.styles&&(n.styles=function(t,e){var n=[];for(var _i11 in t){var _o6=t[_i11];if(!e.hasStyle(_i11))return null;{var _t15=e.getStyle(_i11);if(_o6 instanceof RegExp){if(!_o6.test(_t15))return null;n.push(_i11);}else{if(_t15!==_o6)return null;n.push(_i11);}}}return n;}(e.styles,t),!n.styles))&&n;}var ki=/*#__PURE__*/function(_ui2){_inherits(ki,_ui2);function ki(t,e,n){var _this5;_classCallCheck(this,ki);if(_this5=_possibleConstructorReturn(this,_getPrototypeOf(ki).call(this)),_this5.name=t,_this5._attrs=function(t){t=T(t)?gi(t):new Map(t);var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=t[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var _step10$value=_slicedToArray(_step10.value,2),_e12=_step10$value[0],_n7=_step10$value[1];null===_n7?t["delete"](_e12):"string"!=typeof _n7&&t.set(_e12,String(_n7));}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10["return"]!=null){_iterator10["return"]();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}return t;}(e),_this5._children=[],n&&_this5._insertChild(0,n),_this5._classes=new Set(),_this5._attrs.has("class")){var _t16=_this5._attrs.get("class");vi(_this5._classes,_t16),_this5._attrs["delete"]("class");}_this5._styles=new Map(),_this5._attrs.has("style")&&(_i(_this5._styles,_this5._attrs.get("style")),_this5._attrs["delete"]("style")),_this5._customProperties=new Map();return _possibleConstructorReturn(_this5);}_createClass(ki,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t.replace(/^view:/,"");return e?"element"==n&&e==this.name:"element"==n||n==this.name||_get(_getPrototypeOf(ki.prototype),"is",this).call(this,t);}},{key:"getChild",value:function getChild(t){return this._children[t];}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.indexOf(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getAttributeKeys",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributeKeys$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=this._classes.size>0;if(!_context.t0){_context.next=4;break;}_context.next=4;return"class";case 4:_context.t1=this._styles.size>0;if(!_context.t1){_context.next=8;break;}_context.next=8;return"style";case 8:return _context.delegateYield(this._attrs.keys(),"t2",9);case 9:case"end":return _context.stop();}}},getAttributeKeys,this);})},{key:"getAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributes(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributes$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.delegateYield(this._attrs.entries(),"t0",1);case 1:_context2.t1=this._classes.size>0;if(!_context2.t1){_context2.next=5;break;}_context2.next=5;return["class",this.getAttribute("class")];case 5:_context2.t2=this._styles.size>0;if(!_context2.t2){_context2.next=9;break;}_context2.next=9;return["style",this.getAttribute("style")];case 9:case"end":return _context2.stop();}}},getAttributes,this);})},{key:"getAttribute",value:function getAttribute(t){if("class"==t)return this._classes.size>0?_toConsumableArray(this._classes).join(" "):void 0;if("style"!=t)return this._attrs.get(t);if(this._styles.size>0){var _t17="";var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=this._styles[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var _step11$value=_slicedToArray(_step11.value,2),_e13=_step11$value[0],_n8=_step11$value[1];_t17+="".concat(_e13,":").concat(_n8,";");}}catch(err){_didIteratorError11=true;_iteratorError11=err;}finally{try{if(!_iteratorNormalCompletion11&&_iterator11["return"]!=null){_iterator11["return"]();}}finally{if(_didIteratorError11){throw _iteratorError11;}}}return _t17;}}},{key:"hasAttribute",value:function hasAttribute(t){return"class"==t?this._classes.size>0:"style"==t?this._styles.size>0:this._attrs.has(t);}},{key:"isSimilar",value:function isSimilar(t){if(!(t instanceof ki))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=this._attrs[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var _step12$value=_slicedToArray(_step12.value,2),_e14=_step12$value[0],_n9=_step12$value[1];if(!t._attrs.has(_e14)||t._attrs.get(_e14)!==_n9)return!1;}}catch(err){_didIteratorError12=true;_iteratorError12=err;}finally{try{if(!_iteratorNormalCompletion12&&_iterator12["return"]!=null){_iterator12["return"]();}}finally{if(_didIteratorError12){throw _iteratorError12;}}}var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=this._classes[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var _e15=_step13.value;if(!t._classes.has(_e15))return!1;}}catch(err){_didIteratorError13=true;_iteratorError13=err;}finally{try{if(!_iteratorNormalCompletion13&&_iterator13["return"]!=null){_iterator13["return"]();}}finally{if(_didIteratorError13){throw _iteratorError13;}}}var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=this._styles[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _step14$value=_slicedToArray(_step14.value,2),_e16=_step14$value[0],_n10=_step14$value[1];if(!t._styles.has(_e16)||t._styles.get(_e16)!==_n10)return!1;}}catch(err){_didIteratorError14=true;_iteratorError14=err;}finally{try{if(!_iteratorNormalCompletion14&&_iterator14["return"]!=null){_iterator14["return"]();}}finally{if(_didIteratorError14){throw _iteratorError14;}}}return!0;}},{key:"hasClass",value:function hasClass(){for(var _len8=arguments.length,t=new Array(_len8),_key8=0;_key8<_len8;_key8++){t[_key8]=arguments[_key8];}for(var _i12=0,_t18=t;_i12<_t18.length;_i12++){var _e17=_t18[_i12];if(!this._classes.has(_e17))return!1;}return!0;}},{key:"getClassNames",value:function getClassNames(){return this._classes.keys();}},{key:"getStyle",value:function getStyle(t){return this._styles.get(t);}},{key:"getStyleNames",value:function getStyleNames(){return this._styles.keys();}},{key:"hasStyle",value:function hasStyle(){for(var _len9=arguments.length,t=new Array(_len9),_key9=0;_key9<_len9;_key9++){t[_key9]=arguments[_key9];}for(var _i13=0,_t19=t;_i13<_t19.length;_i13++){var _e18=_t19[_i13];if(!this._styles.has(_e18))return!1;}return!0;}},{key:"findAncestor",value:function findAncestor(){for(var _len10=arguments.length,t=new Array(_len10),_key10=0;_key10<_len10;_key10++){t[_key10]=arguments[_key10];}var e=_construct(bi,t);var n=this.parent;for(;n;){if(e.match(n))return n;n=n.parent;}return null;}},{key:"getCustomProperty",value:function getCustomProperty(t){return this._customProperties.get(t);}},{key:"getCustomProperties",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getCustomProperties(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getCustomProperties$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return _context3.stop();}}},getCustomProperties,this);})},{key:"getIdentity",value:function getIdentity(){var t=Array.from(this._classes).sort().join(","),e=Array.from(this._styles).map(function(t){return"".concat(t[0],":").concat(t[1]);}).sort().join(";"),n=Array.from(this._attrs).map(function(t){return"".concat(t[0],"=\"").concat(t[1],"\"");}).sort().join(" ");return this.name+(""==t?"":" class=\"".concat(t,"\""))+(""==e?"":" style=\"".concat(e,"\""))+(""==n?"":" ".concat(n));}},{key:"_clone",value:function _clone(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var e=[];if(t){var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=this.getChildren()[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var _n11=_step15.value;e.push(_n11._clone(t));}}catch(err){_didIteratorError15=true;_iteratorError15=err;}finally{try{if(!_iteratorNormalCompletion15&&_iterator15["return"]!=null){_iterator15["return"]();}}finally{if(_didIteratorError15){throw _iteratorError15;}}}}var n=new this.constructor(this.name,this._attrs,e);return n._classes=new Set(this._classes),n._styles=new Map(this._styles),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n;}},{key:"_appendChild",value:function _appendChild(t){return this._insertChild(this.childCount,t);}},{key:"_insertChild",value:function _insertChild(t,e){this._fireChange("children",this);var n=0;var i=function(t){if("string"==typeof t)return[new fi(t)];pi(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new fi(t):t instanceof mi?new fi(t.data):t;});}(e);var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{for(var _iterator16=i[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){var _e19=_step16.value;null!==_e19.parent&&_e19._remove(),_e19.parent=this,this._children.splice(t,0,_e19),t++,n++;}}catch(err){_didIteratorError16=true;_iteratorError16=err;}finally{try{if(!_iteratorNormalCompletion16&&_iterator16["return"]!=null){_iterator16["return"]();}}finally{if(_didIteratorError16){throw _iteratorError16;}}}return n;}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _n12=t;_n12<t+e;_n12++){this._children[_n12].parent=null;}return this._children.splice(t,e);}},{key:"_setAttribute",value:function _setAttribute(t,e){e=String(e),this._fireChange("attributes",this),"class"==t?vi(this._classes,e):"style"==t?_i(this._styles,e):this._attrs.set(t,e);}},{key:"_removeAttribute",value:function _removeAttribute(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?this._styles.size>0&&(this._styles.clear(),!0):this._attrs["delete"](t);}},{key:"_addClass",value:function _addClass(t){var _this6=this;this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(function(t){return _this6._classes.add(t);});}},{key:"_removeClass",value:function _removeClass(t){var _this7=this;this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(function(t){return _this7._classes["delete"](t);});}},{key:"_setStyle",value:function _setStyle(t,e){if(this._fireChange("attributes",this),T(t)){var _e20=Object.keys(t);for(var _i14=0,_e21=_e20;_i14<_e21.length;_i14++){var _n13=_e21[_i14];this._styles.set(_n13,t[_n13]);}}else this._styles.set(t,e);}},{key:"_removeStyle",value:function _removeStyle(t){var _this8=this;this._fireChange("attributes",this),(t=Array.isArray(t)?t:[t]).forEach(function(t){return _this8._styles["delete"](t);});}},{key:"_setCustomProperty",value:function _setCustomProperty(t,e){this._customProperties.set(t,e);}},{key:"_removeCustomProperty",value:function _removeCustomProperty(t){return this._customProperties["delete"](t);}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this._children.length;}}]);return ki;}(ui);function _i(t,e){var n=null,i=0,o=0,r=null;if(t.clear(),""!==e){";"!=e.charAt(e.length-1)&&(e+=";");for(var _s2=0;_s2<e.length;_s2++){var _a2=e.charAt(_s2);if(null===n)switch(_a2){case":":r||(r=e.substr(i,_s2-i),o=_s2+1);break;case'"':case"'":n=_a2;break;case";":{var _n14=e.substr(o,_s2-o);r&&t.set(r.trim(),_n14.trim()),r=null,i=_s2+1;break;}}else _a2===n&&(n=null);}}}function vi(t,e){var n=e.split(/\s+/);t.clear(),n.forEach(function(e){return t.add(e);});}var yi=/*#__PURE__*/function(_ki){_inherits(yi,_ki);function yi(t,e,n){var _this9;_classCallCheck(this,yi);_this9=_possibleConstructorReturn(this,_getPrototypeOf(yi).call(this,t,e,n)),_this9.getFillerOffset=xi;return _this9;}_createClass(yi,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t&&t.replace(/^view:/,"");return e?"containerElement"==n&&e==this.name||_get(_getPrototypeOf(yi.prototype),"is",this).call(this,t,e):"containerElement"==n||_get(_getPrototypeOf(yi.prototype),"is",this).call(this,t);}}]);return yi;}(ki);function xi(){var t=_toConsumableArray(this.getChildren()),e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{for(var _iterator17=t[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){var _e22=_step17.value;if(!_e22.is("uiElement"))return null;}}catch(err){_didIteratorError17=true;_iteratorError17=err;}finally{try{if(!_iteratorNormalCompletion17&&_iterator17["return"]!=null){_iterator17["return"]();}}finally{if(_didIteratorError17){throw _iteratorError17;}}}return this.childCount;}var Ai=function Ai(t){return t;};var Ti=function Ti(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);}return t.apply(e,n);},Ci=Math.max;var Pi=function Pi(t,e,n){return e=Ci(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,r=Ci(i.length-e,0),s=Array(r);++o<r;){s[o]=i[e+o];}o=-1;for(var a=Array(e+1);++o<e;){a[o]=i[o];}return a[e]=n(s),Ti(t,this,a);};};var Si=function Si(t){return function(){return t;};},Mi=Ot?function(t,e){return Ot(t,"toString",{configurable:!0,enumerable:!1,value:Si(e),writable:!0});}:Ai,Ei=800,Ii=16,Ni=Date.now;var Oi=function(t){var e=0,n=0;return function(){var i=Ni(),o=Ii-(i-n);if(n=i,o>0){if(++e>=Ei)return arguments[0];}else e=0;return t.apply(void 0,arguments);};}(Mi);var Ri=function Ri(t,e){return Oi(Pi(t,e,Ai),t+"");};var Di=function Di(t,e,n){if(!B(n))return!1;var i=_typeof(e);return!!("number"==i?he(n)&&Qt(e,n.length):"string"==i&&e in n)&&P(n[e],t);};var Li=function(t){return Ri(function(e,n){var i=-1,o=n.length,r=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(r=t.length>3&&"function"==typeof r?(o--,r):void 0,s&&Di(n[0],n[1],s)&&(r=o<3?void 0:r,o=1),e=Object(e);++i<o;){var a=n[i];a&&t(e,a,i,r);}return e;});}(function(t,e){jt(e,be(e),t);});var ji=Symbol("observableProperties"),Vi=Symbol("boundObservables"),zi=Symbol("boundProperties"),Bi={set:function set(t,e){var _this10=this;if(B(t))return void Object.keys(t).forEach(function(e){_this10.set(e,t[e]);},this);Ui(this);var n=this[ji];if(t in this&&!n.has(t))throw new Gn.b("observable-set-cannot-override: Cannot override an existing property.",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:function get(){return n.get(t);},set:function set(e){var i=n.get(t);var o=this.fire("set:"+t,t,e,i);void 0===o&&(o=e),i===o&&n.has(t)||(n.set(t,o),this.fire("change:"+t,t,o,i));}}),this[t]=e;},bind:function bind(){var _this11=this;for(var _len11=arguments.length,t=new Array(_len11),_key11=0;_key11<_len11;_key11++){t[_key11]=arguments[_key11];}if(!t.length||!Wi(t))throw new Gn.b("observable-bind-wrong-properties: All properties must be strings.",this);if(new Set(t).size!==t.length)throw new Gn.b("observable-bind-duplicate-properties: Properties must be unique.",this);Ui(this);var e=this[zi];t.forEach(function(t){if(e.has(t))throw new Gn.b("observable-bind-rebind: Cannot bind the same property more that once.",_this11);});var n=new Map();return t.forEach(function(t){var i={property:t,to:[]};e.set(t,i),n.set(t,i);}),{to:Hi,toMany:qi,_observable:this,_bindProperties:t,_to:[],_bindings:n};},unbind:function unbind(){var _this12=this;if(!(ji in this))return;var e=this[zi],n=this[Vi];for(var _len12=arguments.length,t=new Array(_len12),_key12=0;_key12<_len12;_key12++){t[_key12]=arguments[_key12];}if(t.length){if(!Wi(t))throw new Gn.b("observable-unbind-wrong-properties: Properties must be strings.",this);t.forEach(function(t){var i=e.get(t);if(!i)return;var o,r,s,a;i.to.forEach(function(t){o=t[0],r=t[1],s=n.get(o),(a=s[r])["delete"](i),a.size||delete s[r],Object.keys(s).length||(n["delete"](o),_this12.stopListening(o,"change"));}),e["delete"](t);});}else n.forEach(function(t,e){_this12.stopListening(e,"change");}),n.clear(),e.clear();},decorate:function decorate(t){var _this13=this;var e=this[t];if(!e)throw new Gn.b("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",this,{object:this,methodName:t});this.on(t,function(t,n){t["return"]=e.apply(_this13,n);}),this[t]=function(){for(var _len13=arguments.length,e=new Array(_len13),_key13=0;_key13<_len13;_key13++){e[_key13]=arguments[_key13];}return this.fire(t,e);};}};Li(Bi,ei);var Fi=Bi;function Ui(t){ji in t||(Object.defineProperty(t,ji,{value:new Map()}),Object.defineProperty(t,Vi,{value:new Map()}),Object.defineProperty(t,zi,{value:new Map()}));}function Hi(){var _this14=this;var e=function(){for(var _len14=arguments.length,t=new Array(_len14),_key14=0;_key14<_len14;_key14++){t[_key14]=arguments[_key14];}if(!t.length)throw new Gn.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);var e={to:[]};var n;"function"==typeof t[t.length-1]&&(e.callback=t.pop());return t.forEach(function(t){if("string"==typeof t)n.properties.push(t);else{if("object"!=_typeof(t))throw new Gn.b("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);n={observable:t,properties:[]},e.to.push(n);}}),e;}.apply(void 0,arguments),n=Array.from(this._bindings.keys()),i=n.length;if(!e.callback&&e.to.length>1)throw new Gn.b("observable-bind-to-no-callback: Binding multiple observables only possible with callback.",this);if(i>1&&e.callback)throw new Gn.b("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.",this);e.to.forEach(function(t){if(t.properties.length&&t.properties.length!==i)throw new Gn.b("observable-bind-to-properties-length: The number of properties must match.",_this14);t.properties.length||(t.properties=_this14._bindProperties);}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),function(t,e){e.forEach(function(e){var n=t[Vi];var i;n.get(e.observable)||t.listenTo(e.observable,"change",function(o,r){(i=n.get(e.observable)[r])&&i.forEach(function(e){Yi(t,e.property);});});});}(this._observable,this._to),function(t){var e;t._bindings.forEach(function(n,i){t._to.forEach(function(o){e=o.properties[n.callback?0:t._bindProperties.indexOf(i)],n.to.push([o.observable,e]),function(t,e,n,i){var o=t[Vi],r=o.get(n),s=r||{};s[i]||(s[i]=new Set());s[i].add(e),r||o.set(n,s);}(t._observable,n,o.observable,e);});});}(this),this._bindProperties.forEach(function(t){Yi(_this14._observable,t);});}function qi(t,e,n){if(this._bindings.size>1)throw new Gn.b("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().",this);this.to.apply(this,_toConsumableArray(function(t,e){var n=t.map(function(t){return[t,e];});return Array.prototype.concat.apply([],n);}(t,e)).concat([n]));}function Wi(t){return t.every(function(t){return"string"==typeof t;});}function Yi(t,e){var n=t[zi].get(e);var i;i=n.callback?n.callback.apply(t,n.to.map(function(t){return t[0][t[1]];})):(i=n.to[0])[0][i[1]],t.hasOwnProperty(e)?t[e]=i:t.set(e,i);}var $i=Symbol("document");var Gi=/*#__PURE__*/function(_yi){_inherits(Gi,_yi);function Gi(t,e,n){var _this15;_classCallCheck(this,Gi);_this15=_possibleConstructorReturn(this,_getPrototypeOf(Gi).call(this,t,e,n)),_this15.set("isReadOnly",!1),_this15.set("isFocused",!1);return _this15;}_createClass(Gi,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t&&t.replace(/^view:/,"");return e?"editableElement"==n&&e==this.name||_get(_getPrototypeOf(Gi.prototype),"is",this).call(this,t,e):"editableElement"==n||_get(_getPrototypeOf(Gi.prototype),"is",this).call(this,t);}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"document",get:function get(){return this.getCustomProperty($i);}},{key:"_document",set:function set(t){var _this16=this;if(this.getCustomProperty($i))throw new Gn.b("view-editableelement-document-already-set: View document is already set.",this);this._setCustomProperty($i,t),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",function(e){return e&&t.selection.editableElement==_this16;}),this.listenTo(t.selection,"change",function(){_this16.isFocused=t.isFocused&&t.selection.editableElement==_this16;});}}]);return Gi;}(yi);ci(Gi,Fi);var Qi=Symbol("rootName");var Ki=/*#__PURE__*/function(_Gi){_inherits(Ki,_Gi);function Ki(t){var _this17;_classCallCheck(this,Ki);_this17=_possibleConstructorReturn(this,_getPrototypeOf(Ki).call(this,t)),_this17.rootName="main";return _this17;}_createClass(Ki,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t.replace(/^view:/,"");return e?"rootElement"==n&&e==this.name||_get(_getPrototypeOf(Ki.prototype),"is",this).call(this,t,e):"rootElement"==n||_get(_getPrototypeOf(Ki.prototype),"is",this).call(this,t);}},{key:"rootName",get:function get(){return this.getCustomProperty(Qi);},set:function set(t){this._setCustomProperty(Qi,t);}},{key:"_name",set:function set(t){this.name=t;}}]);return Ki;}(Gi);var Ji=/*#__PURE__*/function(){function Ji(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Ji);if(!t.boundaries&&!t.startPosition)throw new Gn.b("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new Gn.b("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this.position=Zi._createAt(t.startPosition):this.position=Zi._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;}_createClass(Ji,[{key:Symbol.iterator,value:function value(){return this;}},{key:"skip",value:function skip(t){var e,n,i;do{var _this$next;i=this.position,(_this$next=this.next(),e=_this$next.done,n=_this$next.value,_this$next);}while(!e&&t(n));e||(this.position=i);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var t=this.position.clone();var e=this.position,n=t.parent;if(null===n.parent&&t.offset===n.childCount)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};var i;if(n instanceof fi){if(t.isAtEnd)return this.position=Zi._createAfter(n),this._next();i=n.data[t.offset];}else i=n.getChild(t.offset);if(i instanceof ki)return this.shallow?t.offset++:t=new Zi(i,0),this.position=t,this._formatReturnValue("elementStart",i,e,t,1);if(i instanceof fi){if(this.singleCharacters)return t=new Zi(i,0),this.position=t,this._next();{var _n15,_o7=i.data.length;return i==this._boundaryEndParent?(_o7=this.boundaries.end.offset,_n15=new mi(i,0,_o7),t=Zi._createAfter(_n15)):(_n15=new mi(i,0,i.data.length),t.offset++),this.position=t,this._formatReturnValue("text",_n15,e,t,_o7);}}if("string"==typeof i){var _i15;if(this.singleCharacters)_i15=1;else{_i15=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;}var _o8=new mi(n,t.offset,_i15);return t.offset+=_i15,this.position=t,this._formatReturnValue("text",_o8,e,t,_i15);}return t=Zi._createAfter(n),this.position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t);}},{key:"_previous",value:function _previous(){var t=this.position.clone();var e=this.position,n=t.parent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};var i;if(n instanceof fi){if(t.isAtStart)return this.position=Zi._createBefore(n),this._previous();i=n.data[t.offset-1];}else i=n.getChild(t.offset-1);if(i instanceof ki)return this.shallow?(t.offset--,this.position=t,this._formatReturnValue("elementStart",i,e,t,1)):(t=new Zi(i,i.childCount),this.position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,t));if(i instanceof fi){if(this.singleCharacters)return t=new Zi(i,i.data.length),this.position=t,this._previous();{var _n16,_o9=i.data.length;if(i==this._boundaryStartParent){var _e23=this.boundaries.start.offset;_o9=(_n16=new mi(i,_e23,i.data.length-_e23)).data.length,t=Zi._createBefore(_n16);}else _n16=new mi(i,0,i.data.length),t.offset--;return this.position=t,this._formatReturnValue("text",_n16,e,t,_o9);}}if("string"==typeof i){var _i16;if(this.singleCharacters)_i16=1;else{var _e24=n===this._boundaryStartParent?this.boundaries.start.offset:0;_i16=t.offset-_e24;}t.offset-=_i16;var _o10=new mi(n,t.offset,_i16);return this.position=t,this._formatReturnValue("text",_o10,e,t,_i16);}return t=Zi._createBefore(n),this.position=t,this._formatReturnValue("elementStart",n,e,t,1);}},{key:"_formatReturnValue",value:function _formatReturnValue(t,e,n,i,o){return e instanceof mi&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=Zi._createAfter(e.textNode):(i=Zi._createAfter(e.textNode),this.position=i)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=Zi._createBefore(e.textNode):(i=Zi._createBefore(e.textNode),this.position=i))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:o}};}}]);return Ji;}();var Zi=/*#__PURE__*/function(){function Zi(t,e){_classCallCheck(this,Zi);this.parent=t,this.offset=e;}_createClass(Zi,[{key:"getShiftedBy",value:function getShiftedBy(t){var e=Zi._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e;}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e.startPosition=this;var n=new Ji(e);return n.skip(t),n.position;}},{key:"getAncestors",value:function getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0});}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=this.getAncestors(),n=t.getAncestors();var i=0;for(;e[i]==n[i]&&e[i];){i++;}return 0===i?null:e[i-1];}},{key:"is",value:function is(t){return"position"==t||"view:position"==t;}},{key:"isEqual",value:function isEqual(t){return this.parent==t.parent&&this.offset==t.offset;}},{key:"isBefore",value:function isBefore(t){return"before"==this.compareWith(t);}},{key:"isAfter",value:function isAfter(t){return"after"==this.compareWith(t);}},{key:"compareWith",value:function compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";var e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);var i=li(e,n);switch(i){case"prefix":return"before";case"extension":return"after";default:return e[i]<n[i]?"before":"after";}}},{key:"getWalker",value:function getWalker(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.startPosition=this,new Ji(t);}},{key:"clone",value:function clone(){return new Zi(this.parent,this.offset);}},{key:"nodeAfter",get:function get(){return this.parent.is("text")?null:this.parent.getChild(this.offset)||null;}},{key:"nodeBefore",get:function get(){return this.parent.is("text")?null:this.parent.getChild(this.offset-1)||null;}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){var t=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===t;}},{key:"root",get:function get(){return this.parent.root;}},{key:"editableElement",get:function get(){var t=this.parent;for(;!(t instanceof Gi);){if(!t.parent)return null;t=t.parent;}return t;}}],[{key:"_createAt",value:function _createAt(t,e){if(t instanceof Zi)return new this(t.parent,t.offset);{var _n17=t;if("end"==e)e=_n17.is("text")?_n17.data.length:_n17.childCount;else{if("before"==e)return this._createBefore(_n17);if("after"==e)return this._createAfter(_n17);if(0!==e&&!e)throw new Gn.b("view-createPositionAt-offset-required: View#createPositionAt() requires the offset when the first parameter is a view item.",_n17);}return new Zi(_n17,e);}}},{key:"_createAfter",value:function _createAfter(t){if(t.is("textProxy"))return new Zi(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new Gn.b("view-position-after-root: You can not make position after root.",t,{root:t});return new Zi(t.parent,t.index+1);}},{key:"_createBefore",value:function _createBefore(t){if(t.is("textProxy"))return new Zi(t.textNode,t.offsetInText);if(!t.parent)throw new Gn.b("view-position-before-root: You can not make position before root.",t,{root:t});return new Zi(t.parent,t.index);}}]);return Zi;}();var Xi=/*#__PURE__*/function(){function Xi(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,Xi);this.start=t.clone(),this.end=e?e.clone():t.clone();}_createClass(Xi,[{key:Symbol.iterator,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function value$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.delegateYield(new Ji({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context4.stop();}}},value,this);})},{key:"getEnlarged",value:function getEnlarged(){var t=this.start.getLastMatchingPosition(to,{direction:"backward"}),e=this.end.getLastMatchingPosition(to);return t.parent.is("text")&&t.isAtStart&&(t=Zi._createBefore(t.parent)),e.parent.is("text")&&e.isAtEnd&&(e=Zi._createAfter(e.parent)),new Xi(t,e);}},{key:"getTrimmed",value:function getTrimmed(){var t=this.start.getLastMatchingPosition(to);if(t.isAfter(this.end)||t.isEqual(this.end))return new Xi(t,t);var e=this.end.getLastMatchingPosition(to,{direction:"backward"});var n=t.nodeAfter,i=e.nodeBefore;return n&&n.is("text")&&(t=new Zi(n,0)),i&&i.is("text")&&(e=new Zi(i,i.data.length)),new Xi(t,e);}},{key:"isEqual",value:function isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end);}},{key:"containsPosition",value:function containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end);}},{key:"containsRange",value:function containsRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t.isCollapsed&&(e=!1);var n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i;}},{key:"getDifference",value:function getDifference(t){var e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Xi(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Xi(t.end,this.end))):e.push(this.clone()),e;}},{key:"getIntersection",value:function getIntersection(t){if(this.isIntersecting(t)){var _e25=this.start,_n18=this.end;return this.containsPosition(t.start)&&(_e25=t.start),this.containsPosition(t.end)&&(_n18=t.end),new Xi(_e25,_n18);}return null;}},{key:"getWalker",value:function getWalker(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.boundaries=this,new Ji(t);}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"clone",value:function clone(){return new Xi(this.start,this.end);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getItems(){var t,e,_iteratorNormalCompletion18,_didIteratorError18,_iteratorError18,_iterator18,_step18,_t20,_args5=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getItems$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:t=_args5.length>0&&_args5[0]!==undefined?_args5[0]:{};t.boundaries=this,t.ignoreElementEnd=!0;e=new Ji(t);_iteratorNormalCompletion18=true;_didIteratorError18=false;_iteratorError18=undefined;_context5.prev=6;_iterator18=e[Symbol.iterator]();case 8:if(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done){_context5.next=15;break;}_t20=_step18.value;_context5.next=12;return _t20.item;case 12:_iteratorNormalCompletion18=true;_context5.next=8;break;case 15:_context5.next=21;break;case 17:_context5.prev=17;_context5.t0=_context5["catch"](6);_didIteratorError18=true;_iteratorError18=_context5.t0;case 21:_context5.prev=21;_context5.prev=22;if(!_iteratorNormalCompletion18&&_iterator18["return"]!=null){_iterator18["return"]();}case 24:_context5.prev=24;if(!_didIteratorError18){_context5.next=27;break;}throw _iteratorError18;case 27:return _context5.finish(24);case 28:return _context5.finish(21);case 29:case"end":return _context5.stop();}}},getItems,this,[[6,17,21,29],[22,,24,28]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getPositions(){var t,e,_iteratorNormalCompletion19,_didIteratorError19,_iteratorError19,_iterator19,_step19,_t21,_args6=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getPositions$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:t=_args6.length>0&&_args6[0]!==undefined?_args6[0]:{};t.boundaries=this;e=new Ji(t);_context6.next=5;return e.position;case 5:_iteratorNormalCompletion19=true;_didIteratorError19=false;_iteratorError19=undefined;_context6.prev=8;_iterator19=e[Symbol.iterator]();case 10:if(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done){_context6.next=17;break;}_t21=_step19.value;_context6.next=14;return _t21.nextPosition;case 14:_iteratorNormalCompletion19=true;_context6.next=10;break;case 17:_context6.next=23;break;case 19:_context6.prev=19;_context6.t0=_context6["catch"](8);_didIteratorError19=true;_iteratorError19=_context6.t0;case 23:_context6.prev=23;_context6.prev=24;if(!_iteratorNormalCompletion19&&_iterator19["return"]!=null){_iterator19["return"]();}case 26:_context6.prev=26;if(!_didIteratorError19){_context6.next=29;break;}throw _iteratorError19;case 29:return _context6.finish(26);case 30:return _context6.finish(23);case 31:case"end":return _context6.stop();}}},getPositions,this,[[8,19,23,31],[24,,26,30]]);})},{key:"is",value:function is(t){return"range"==t||"view:range"==t;}},{key:"isIntersecting",value:function isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start);}},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return this.start.parent===this.end.parent;}},{key:"root",get:function get(){return this.start.root;}}],[{key:"_createFromParentsAndOffsets",value:function _createFromParentsAndOffsets(t,e,n,i){return new this(new Zi(t,e),new Zi(n,i));}},{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(t,e){var n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n);}},{key:"_createIn",value:function _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount);}},{key:"_createOn",value:function _createOn(t){var e=t.is("textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Zi._createBefore(t),e);}}]);return Xi;}();function to(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"));}function eo(t){var e=0;var _iteratorNormalCompletion20=true;var _didIteratorError20=false;var _iteratorError20=undefined;try{for(var _iterator20=t[Symbol.iterator](),_step20;!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=true){var _n19=_step20.value;e++;}}catch(err){_didIteratorError20=true;_iteratorError20=err;}finally{try{if(!_iteratorNormalCompletion20&&_iterator20["return"]!=null){_iterator20["return"]();}}finally{if(_didIteratorError20){throw _iteratorError20;}}}return e;}var no=/*#__PURE__*/function(){function no(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=arguments.length>1?arguments[1]:undefined;var n=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,no);this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(t,e,n);}_createClass(no,[{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){var _iteratorNormalCompletion21,_didIteratorError21,_iteratorError21,_iterator21,_step21,_t22;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_iteratorNormalCompletion21=true;_didIteratorError21=false;_iteratorError21=undefined;_context7.prev=3;_iterator21=this._ranges[Symbol.iterator]();case 5:if(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done){_context7.next=12;break;}_t22=_step21.value;_context7.next=9;return _t22.clone();case 9:_iteratorNormalCompletion21=true;_context7.next=5;break;case 12:_context7.next=18;break;case 14:_context7.prev=14;_context7.t0=_context7["catch"](3);_didIteratorError21=true;_iteratorError21=_context7.t0;case 18:_context7.prev=18;_context7.prev=19;if(!_iteratorNormalCompletion21&&_iterator21["return"]!=null){_iterator21["return"]();}case 21:_context7.prev=21;if(!_didIteratorError21){_context7.next=24;break;}throw _iteratorError21;case 24:return _context7.finish(21);case 25:return _context7.finish(18);case 26:case"end":return _context7.stop();}}},getRanges,this,[[3,14,18,26],[19,,21,25]]);})},{key:"getFirstRange",value:function getFirstRange(){var t=null;var _iteratorNormalCompletion22=true;var _didIteratorError22=false;var _iteratorError22=undefined;try{for(var _iterator22=this._ranges[Symbol.iterator](),_step22;!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=true){var _e26=_step22.value;t&&!_e26.start.isBefore(t.start)||(t=_e26);}}catch(err){_didIteratorError22=true;_iteratorError22=err;}finally{try{if(!_iteratorNormalCompletion22&&_iterator22["return"]!=null){_iterator22["return"]();}}finally{if(_didIteratorError22){throw _iteratorError22;}}}return t?t.clone():null;}},{key:"getLastRange",value:function getLastRange(){var t=null;var _iteratorNormalCompletion23=true;var _didIteratorError23=false;var _iteratorError23=undefined;try{for(var _iterator23=this._ranges[Symbol.iterator](),_step23;!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=true){var _e27=_step23.value;t&&!_e27.end.isAfter(t.end)||(t=_e27);}}catch(err){_didIteratorError23=true;_iteratorError23=err;}finally{try{if(!_iteratorNormalCompletion23&&_iterator23["return"]!=null){_iterator23["return"]();}}finally{if(_didIteratorError23){throw _iteratorError23;}}}return t?t.clone():null;}},{key:"getFirstPosition",value:function getFirstPosition(){var t=this.getFirstRange();return t?t.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var t=this.getLastRange();return t?t.end.clone():null;}},{key:"isEqual",value:function isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;var _iteratorNormalCompletion24=true;var _didIteratorError24=false;var _iteratorError24=undefined;try{for(var _iterator24=this._ranges[Symbol.iterator](),_step24;!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=true){var _e28=_step24.value;var _n20=!1;var _iteratorNormalCompletion25=true;var _didIteratorError25=false;var _iteratorError25=undefined;try{for(var _iterator25=t._ranges[Symbol.iterator](),_step25;!(_iteratorNormalCompletion25=(_step25=_iterator25.next()).done);_iteratorNormalCompletion25=true){var _i17=_step25.value;if(_e28.isEqual(_i17)){_n20=!0;break;}}}catch(err){_didIteratorError25=true;_iteratorError25=err;}finally{try{if(!_iteratorNormalCompletion25&&_iterator25["return"]!=null){_iterator25["return"]();}}finally{if(_didIteratorError25){throw _iteratorError25;}}}if(!_n20)return!1;}}catch(err){_didIteratorError24=true;_iteratorError24=err;}finally{try{if(!_iteratorNormalCompletion24&&_iterator24["return"]!=null){_iterator24["return"]();}}finally{if(_didIteratorError24){throw _iteratorError24;}}}return!0;}},{key:"isSimilar",value:function isSimilar(t){if(this.isBackward!=t.isBackward)return!1;var e=eo(this.getRanges());if(e!=eo(t.getRanges()))return!1;if(0==e)return!0;var _iteratorNormalCompletion26=true;var _didIteratorError26=false;var _iteratorError26=undefined;try{for(var _iterator26=this.getRanges()[Symbol.iterator](),_step26;!(_iteratorNormalCompletion26=(_step26=_iterator26.next()).done);_iteratorNormalCompletion26=true){var _e29=_step26.value;_e29=_e29.getTrimmed();var _n21=!1;var _iteratorNormalCompletion27=true;var _didIteratorError27=false;var _iteratorError27=undefined;try{for(var _iterator27=t.getRanges()[Symbol.iterator](),_step27;!(_iteratorNormalCompletion27=(_step27=_iterator27.next()).done);_iteratorNormalCompletion27=true){var _i18=_step27.value;if(_i18=_i18.getTrimmed(),_e29.start.isEqual(_i18.start)&&_e29.end.isEqual(_i18.end)){_n21=!0;break;}}}catch(err){_didIteratorError27=true;_iteratorError27=err;}finally{try{if(!_iteratorNormalCompletion27&&_iterator27["return"]!=null){_iterator27["return"]();}}finally{if(_didIteratorError27){throw _iteratorError27;}}}if(!_n21)return!1;}}catch(err){_didIteratorError26=true;_iteratorError26=err;}finally{try{if(!_iteratorNormalCompletion26&&_iterator26["return"]!=null){_iterator26["return"]();}}finally{if(_didIteratorError26){throw _iteratorError26;}}}return!0;}},{key:"getSelectedElement",value:function getSelectedElement(){if(1!==this.rangeCount)return null;var t=this.getFirstRange();var e=t.start.nodeAfter,n=t.end.nodeBefore;return t.start.parent.is("text")&&t.start.isAtEnd&&t.start.parent.nextSibling&&(e=t.start.parent.nextSibling),t.end.parent.is("text")&&t.end.isAtStart&&t.end.parent.previousSibling&&(n=t.end.parent.previousSibling),e instanceof ki&&e==n?e:null;}},{key:"setTo",value:function setTo(t,e,n){if(null===t)this._setRanges([]),this._setFakeOptions(e);else if(t instanceof no||t instanceof io)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Xi)this._setRanges([t],e&&e.backward),this._setFakeOptions(e);else if(t instanceof Zi)this._setRanges([new Xi(t)]),this._setFakeOptions(e);else if(t instanceof ui){var _i19=!!n&&!!n.backward;var _o11;if(void 0===e)throw new Gn.b("view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",this);_o11="in"==e?Xi._createIn(t):"on"==e?Xi._createOn(t):new Xi(Zi._createAt(t,e)),this._setRanges([_o11],_i19),this._setFakeOptions(n);}else{if(!pi(t))throw new Gn.b("view-selection-setTo-not-selectable: Cannot set selection to given place.",this);this._setRanges(t,e&&e.backward),this._setFakeOptions(e);}this.fire("change");}},{key:"setFocus",value:function setFocus(t,e){if(null===this.anchor)throw new Gn.b("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",this);var n=Zi._createAt(t,e);if("same"==n.compareWith(this.focus))return;var i=this.anchor;this._ranges.pop(),"before"==n.compareWith(i)?this._addRange(new Xi(n,i),!0):this._addRange(new Xi(i,n)),this.fire("change");}},{key:"is",value:function is(t){return"selection"==t||"view:selection"==t;}},{key:"_setRanges",value:function _setRanges(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t=Array.from(t),this._ranges=[];var _iteratorNormalCompletion28=true;var _didIteratorError28=false;var _iteratorError28=undefined;try{for(var _iterator28=t[Symbol.iterator](),_step28;!(_iteratorNormalCompletion28=(_step28=_iterator28.next()).done);_iteratorNormalCompletion28=true){var _e30=_step28.value;this._addRange(_e30);}}catch(err){_didIteratorError28=true;_iteratorError28=err;}finally{try{if(!_iteratorNormalCompletion28&&_iterator28["return"]!=null){_iterator28["return"]();}}finally{if(_didIteratorError28){throw _iteratorError28;}}}this._lastRangeBackward=!!e;}},{key:"_setFakeOptions",value:function _setFakeOptions(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||"";}},{key:"_addRange",value:function _addRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;if(!(t instanceof Xi))throw new Gn.b("view-selection-add-range-not-range: Selection range set to an object that is not an instance of view.Range",this);this._pushRange(t),this._lastRangeBackward=!!e;}},{key:"_pushRange",value:function _pushRange(t){var _iteratorNormalCompletion29=true;var _didIteratorError29=false;var _iteratorError29=undefined;try{for(var _iterator29=this._ranges[Symbol.iterator](),_step29;!(_iteratorNormalCompletion29=(_step29=_iterator29.next()).done);_iteratorNormalCompletion29=true){var _e31=_step29.value;if(t.isIntersecting(_e31))throw new Gn.b("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",this,{addedRange:t,intersectingRange:_e31});}}catch(err){_didIteratorError29=true;_iteratorError29=err;}finally{try{if(!_iteratorNormalCompletion29&&_iterator29["return"]!=null){_iterator29["return"]();}}finally{if(_didIteratorError29){throw _iteratorError29;}}}this._ranges.push(new Xi(t.start,t.end));}},{key:"isFake",get:function get(){return this._isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._fakeSelectionLabel;}},{key:"anchor",get:function get(){if(!this._ranges.length)return null;var t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone();}},{key:"focus",get:function get(){if(!this._ranges.length)return null;var t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone();}},{key:"isCollapsed",get:function get(){return 1===this.rangeCount&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"editableElement",get:function get(){return this.anchor?this.anchor.editableElement:null;}}]);return no;}();ci(no,ei);var io=/*#__PURE__*/function(){function io(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=arguments.length>1?arguments[1]:undefined;var n=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,io);this._selection=new no(),this._selection.delegate("change").to(this),this._selection.setTo(t,e,n);}_createClass(io,[{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return _context8.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"isEqual",value:function isEqual(t){return this._selection.isEqual(t);}},{key:"isSimilar",value:function isSimilar(t){return this._selection.isSimilar(t);}},{key:"is",value:function is(t){return"selection"==t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t;}},{key:"_setTo",value:function _setTo(t,e,n){this._selection.setTo(t,e,n);}},{key:"_setFocus",value:function _setFocus(t,e){this._selection.setFocus(t,e);}},{key:"isFake",get:function get(){return this._selection.isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._selection.fakeSelectionLabel;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"editableElement",get:function get(){return this._selection.editableElement;}},{key:"_ranges",get:function get(){return this._selection._ranges;}}]);return io;}();ci(io,ei);var oo=/*#__PURE__*/function(){function oo(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,oo);this._items=[],this._itemMap=new Map(),this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap(),this._bindToInternalToExternalMap=new WeakMap(),this._skippedIndexesFromExternal=[];}_createClass(oo,[{key:"add",value:function add(t,e){var n;var i=this._idProperty;if(i in t){if("string"!=typeof(n=t[i]))throw new Gn.b("collection-add-invalid-id",this);if(this.get(n))throw new Gn.b("collection-add-item-already-exists",this);}else t[i]=n=Jn();if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new Gn.b("collection-add-item-invalid-index",this);return this._items.splice(e,0,t),this._itemMap.set(n,t),this.fire("add",t,e),this;}},{key:"get",value:function get(t){var e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new Gn.b("collection-get-invalid-arg: Index or id must be given.",this);e=this._items[t];}return e||null;}},{key:"has",value:function has(t){if("string"==typeof t)return this._itemMap.has(t);{var _e32=t[this._idProperty];return this._itemMap.has(_e32);}}},{key:"getIndex",value:function getIndex(t){var e;return e="string"==typeof t?this._itemMap.get(t):t,this._items.indexOf(e);}},{key:"remove",value:function remove(t){var e,n,i,o=!1;var r=this._idProperty;if("string"==typeof t?(n=t,o=!(i=this._itemMap.get(n)),i&&(e=this._items.indexOf(i))):"number"==typeof t?(e=t,o=!(i=this._items[e]),i&&(n=i[r])):(n=(i=t)[r],o=-1==(e=this._items.indexOf(i))||!this._itemMap.get(n)),o)throw new Gn.b("collection-remove-404: Item not found.",this);this._items.splice(e,1),this._itemMap["delete"](n);var s=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap["delete"](i),this._bindToExternalToInternalMap["delete"](s),this.fire("remove",i,e),i;}},{key:"map",value:function map(t,e){return this._items.map(t,e);}},{key:"find",value:function find(t,e){return this._items.find(t,e);}},{key:"filter",value:function filter(t,e){return this._items.filter(t,e);}},{key:"clear",value:function clear(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;){this.remove(0);}}},{key:"bindTo",value:function bindTo(t){var _this18=this;if(this._bindToCollection)throw new Gn.b("collection-bind-to-rebind: The collection cannot be bound more than once.",this);return this._bindToCollection=t,{as:function as(t){_this18._setUpBindToBinding(function(e){return new t(e);});},using:function using(t){"function"==typeof t?_this18._setUpBindToBinding(function(e){return t(e);}):_this18._setUpBindToBinding(function(e){return e[t];});}};}},{key:"_setUpBindToBinding",value:function _setUpBindToBinding(t){var _this19=this;var e=this._bindToCollection,n=function n(_n23,i,o){var r=e._bindToCollection==_this19,s=e._bindToInternalToExternalMap.get(i);if(r&&s)_this19._bindToExternalToInternalMap.set(i,s),_this19._bindToInternalToExternalMap.set(s,i);else{var _n22=t(i);if(!_n22)return void _this19._skippedIndexesFromExternal.push(o);var _r3=o;var _iteratorNormalCompletion30=true;var _didIteratorError30=false;var _iteratorError30=undefined;try{for(var _iterator30=_this19._skippedIndexesFromExternal[Symbol.iterator](),_step30;!(_iteratorNormalCompletion30=(_step30=_iterator30.next()).done);_iteratorNormalCompletion30=true){var _t24=_step30.value;o>_t24&&_r3--;}}catch(err){_didIteratorError30=true;_iteratorError30=err;}finally{try{if(!_iteratorNormalCompletion30&&_iterator30["return"]!=null){_iterator30["return"]();}}finally{if(_didIteratorError30){throw _iteratorError30;}}}var _iteratorNormalCompletion31=true;var _didIteratorError31=false;var _iteratorError31=undefined;try{for(var _iterator31=e._skippedIndexesFromExternal[Symbol.iterator](),_step31;!(_iteratorNormalCompletion31=(_step31=_iterator31.next()).done);_iteratorNormalCompletion31=true){var _t25=_step31.value;_r3>=_t25&&_r3++;}}catch(err){_didIteratorError31=true;_iteratorError31=err;}finally{try{if(!_iteratorNormalCompletion31&&_iterator31["return"]!=null){_iterator31["return"]();}}finally{if(_didIteratorError31){throw _iteratorError31;}}}_this19._bindToExternalToInternalMap.set(i,_n22),_this19._bindToInternalToExternalMap.set(_n22,i),_this19.add(_n22,_r3);for(var _t23=0;_t23<e._skippedIndexesFromExternal.length;_t23++){_r3<=e._skippedIndexesFromExternal[_t23]&&e._skippedIndexesFromExternal[_t23]++;}}};var _iteratorNormalCompletion32=true;var _didIteratorError32=false;var _iteratorError32=undefined;try{for(var _iterator32=e[Symbol.iterator](),_step32;!(_iteratorNormalCompletion32=(_step32=_iterator32.next()).done);_iteratorNormalCompletion32=true){var _t26=_step32.value;n(0,_t26,e.getIndex(_t26));}}catch(err){_didIteratorError32=true;_iteratorError32=err;}finally{try{if(!_iteratorNormalCompletion32&&_iterator32["return"]!=null){_iterator32["return"]();}}finally{if(_didIteratorError32){throw _iteratorError32;}}}this.listenTo(e,"add",n),this.listenTo(e,"remove",function(t,e,n){var i=_this19._bindToExternalToInternalMap.get(e);i&&_this19.remove(i),_this19._skippedIndexesFromExternal=_this19._skippedIndexesFromExternal.reduce(function(t,e){return n<e&&t.push(e-1),n>e&&t.push(e),t;},[]);});}},{key:Symbol.iterator,value:function value(){return this._items[Symbol.iterator]();}},{key:"length",get:function get(){return this._items.length;}},{key:"first",get:function get(){return this._items[0]||null;}},{key:"last",get:function get(){return this._items[this.length-1]||null;}}]);return oo;}();ci(oo,ei);var ro=/*#__PURE__*/function(){function ro(){_classCallCheck(this,ro);this.selection=new io(),this.roots=new oo({idProperty:"rootName"}),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set();}_createClass(ro,[{key:"getRoot",value:function getRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(t);}},{key:"registerPostFixer",value:function registerPostFixer(t){this._postFixers.add(t);}},{key:"destroy",value:function destroy(){this.roots.map(function(t){return t.destroy();}),this.stopListening();}},{key:"_callPostFixers",value:function _callPostFixers(t){var e=!1;do{var _iteratorNormalCompletion33=true;var _didIteratorError33=false;var _iteratorError33=undefined;try{for(var _iterator33=this._postFixers[Symbol.iterator](),_step33;!(_iteratorNormalCompletion33=(_step33=_iterator33.next()).done);_iteratorNormalCompletion33=true){var _n24=_step33.value;if(e=_n24(t))break;}}catch(err){_didIteratorError33=true;_iteratorError33=err;}finally{try{if(!_iteratorNormalCompletion33&&_iterator33["return"]!=null){_iterator33["return"]();}}finally{if(_didIteratorError33){throw _iteratorError33;}}}}while(e);}}]);return ro;}();ci(ro,Fi);var so=10;var ao=/*#__PURE__*/function(_ki2){_inherits(ao,_ki2);function ao(t,e,n){var _this20;_classCallCheck(this,ao);_this20=_possibleConstructorReturn(this,_getPrototypeOf(ao).call(this,t,e,n)),_this20.getFillerOffset=co,_this20._priority=so,_this20._id=null,_this20._clonesGroup=null;return _this20;}_createClass(ao,[{key:"getElementsWithSameId",value:function getElementsWithSameId(){if(null===this.id)throw new Gn.b("attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.",this);return new Set(this._clonesGroup);}},{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t&&t.replace(/^view:/,"");return e?"attributeElement"==n&&e==this.name||_get(_getPrototypeOf(ao.prototype),"is",this).call(this,t,e):"attributeElement"==n||_get(_getPrototypeOf(ao.prototype),"is",this).call(this,t);}},{key:"isSimilar",value:function isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:_get(_getPrototypeOf(ao.prototype),"isSimilar",this).call(this,t)&&this.priority==t.priority;}},{key:"_clone",value:function _clone(t){var e=_get(_getPrototypeOf(ao.prototype),"_clone",this).call(this,t);return e._priority=this._priority,e._id=this._id,e;}},{key:"priority",get:function get(){return this._priority;}},{key:"id",get:function get(){return this._id;}}]);return ao;}(ki);function co(){if(lo(this))return null;var t=this.parent;for(;t&&t.is("attributeElement");){if(lo(t)>1)return null;t=t.parent;}return!t||lo(t)>1?null:this.childCount;}function lo(t){return Array.from(t.getChildren()).filter(function(t){return!t.is("uiElement");}).length;}ao.DEFAULT_PRIORITY=so;var ho=/*#__PURE__*/function(_ki3){_inherits(ho,_ki3);function ho(t,e,n){var _this21;_classCallCheck(this,ho);_this21=_possibleConstructorReturn(this,_getPrototypeOf(ho).call(this,t,e,n)),_this21.getFillerOffset=uo;return _this21;}_createClass(ho,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t.replace(/^view:/,"");return e?"emptyElement"==n&&e==this.name||_get(_getPrototypeOf(ho.prototype),"is",this).call(this,t,e):"emptyElement"==n||_get(_getPrototypeOf(ho.prototype),"is",this).call(this,t);}},{key:"_insertChild",value:function _insertChild(t,e){if(e&&(e instanceof ui||Array.from(e).length>0))throw new Gn.b("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.",[this,e]);}}]);return ho;}(ki);function uo(){return null;}var fo=navigator.userAgent.toLowerCase();var mo={isMac:function(t){return t.indexOf("macintosh")>-1;}(fo),isEdge:function(t){return!!t.match(/edge\/(\d+.?\d*)/);}(fo),isGecko:function(t){return!!t.match(/gecko\/\d+/);}(fo),isSafari:function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome");}(fo),isAndroid:function(t){return t.indexOf("android")>-1;}(fo),features:{isRegExpUnicodePropertySupported:function(){var t=!1;try{t=0==="".search(new RegExp("[\\p{L}]","u"));}catch(t){}return t;}()}};var go={"":"ctrl","":"shift","":"alt"},po={ctrl:"",shift:"",alt:""},bo=function(){var t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,"delete":46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(var _e33=65;_e33<=90;_e33++){var _n25=String.fromCharCode(_e33);t[_n25.toLowerCase()]=_e33;}for(var _e34=48;_e34<=57;_e34++){t[_e34-48]=_e34;}for(var _e35=112;_e35<=123;_e35++){t["f"+(_e35-111)]=_e35;}return t;}();function wo(t){var e;if("string"==typeof t){if(!(e=bo[t.toLowerCase()]))throw new Gn.b("keyboard-unknown-key: Unknown key name.",null,{key:t});}else e=t.keyCode+(t.altKey?bo.alt:0)+(t.ctrlKey?bo.ctrl:0)+(t.shiftKey?bo.shift:0);return e;}function ko(t){return"string"==typeof t&&(t=_o(t)),t.map(function(t){return"string"==typeof t?wo(t):t;}).reduce(function(t,e){return e+t;},0);}function _o(t){return t.split(/\s*\+\s*/);}var vo=/*#__PURE__*/function(_ki4){_inherits(vo,_ki4);function vo(t,e,n){var _this22;_classCallCheck(this,vo);_this22=_possibleConstructorReturn(this,_getPrototypeOf(vo).call(this,t,e,n)),_this22.getFillerOffset=xo;return _this22;}_createClass(vo,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t.replace(/^view:/,"");return e?"uiElement"==n&&e==this.name||_get(_getPrototypeOf(vo.prototype),"is",this).call(this,t,e):"uiElement"==n||_get(_getPrototypeOf(vo.prototype),"is",this).call(this,t);}},{key:"_insertChild",value:function _insertChild(t,e){if(e&&(e instanceof ui||Array.from(e).length>0))throw new Gn.b("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.",this);}},{key:"render",value:function render(t){return this.toDomElement(t);}},{key:"toDomElement",value:function toDomElement(t){var e=t.createElement(this.name);var _iteratorNormalCompletion34=true;var _didIteratorError34=false;var _iteratorError34=undefined;try{for(var _iterator34=this.getAttributeKeys()[Symbol.iterator](),_step34;!(_iteratorNormalCompletion34=(_step34=_iterator34.next()).done);_iteratorNormalCompletion34=true){var _t27=_step34.value;e.setAttribute(_t27,this.getAttribute(_t27));}}catch(err){_didIteratorError34=true;_iteratorError34=err;}finally{try{if(!_iteratorNormalCompletion34&&_iterator34["return"]!=null){_iterator34["return"]();}}finally{if(_didIteratorError34){throw _iteratorError34;}}}return e;}}]);return vo;}(ki);function yo(t){t.document.on("keydown",function(e,n){return function(t,e,n){if(e.keyCode==bo.arrowright){var _t28=e.domTarget.ownerDocument.defaultView.getSelection(),_i20=1==_t28.rangeCount&&_t28.getRangeAt(0).collapsed;if(_i20||e.shiftKey){var _e36=_t28.focusNode,_o12=_t28.focusOffset,_r4=n.domPositionToView(_e36,_o12);if(null===_r4)return;var _s3=!1;var _a3=_r4.getLastMatchingPosition(function(t){return t.item.is("uiElement")&&(_s3=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"));});if(_s3){var _e37=n.viewPositionToDom(_a3);_i20?_t28.collapse(_e37.parent,_e37.offset):_t28.extend(_e37.parent,_e37.offset);}}}}(0,n,t.domConverter);});}function xo(){return null;}var Ao=/*#__PURE__*/function(){function Ao(t){_classCallCheck(this,Ao);this._children=[],t&&this._insertChild(0,t);}_createClass(Ao,[{key:Symbol.iterator,value:function value(){return this._children[Symbol.iterator]();}},{key:"is",value:function is(t){return"documentFragment"==t||"view:documentFragment"==t;}},{key:"_appendChild",value:function _appendChild(t){return this._insertChild(this.childCount,t);}},{key:"getChild",value:function getChild(t){return this._children[t];}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.indexOf(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"_insertChild",value:function _insertChild(t,e){this._fireChange("children",this);var n=0;var i=function(t){if("string"==typeof t)return[new fi(t)];pi(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new fi(t):t instanceof mi?new fi(t.data):t;});}(e);var _iteratorNormalCompletion35=true;var _didIteratorError35=false;var _iteratorError35=undefined;try{for(var _iterator35=i[Symbol.iterator](),_step35;!(_iteratorNormalCompletion35=(_step35=_iterator35.next()).done);_iteratorNormalCompletion35=true){var _e38=_step35.value;null!==_e38.parent&&_e38._remove(),_e38.parent=this,this._children.splice(t,0,_e38),t++,n++;}}catch(err){_didIteratorError35=true;_iteratorError35=err;}finally{try{if(!_iteratorNormalCompletion35&&_iterator35["return"]!=null){_iterator35["return"]();}}finally{if(_didIteratorError35){throw _iteratorError35;}}}return n;}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _n26=t;_n26<t+e;_n26++){this._children[_n26].parent=null;}return this._children.splice(t,e);}},{key:"_fireChange",value:function _fireChange(t,e){this.fire("change:"+t,e);}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}}]);return Ao;}();ci(Ao,ei);var To=/*#__PURE__*/function(){function To(t){_classCallCheck(this,To);this.document=t,this._cloneGroups=new Map();}_createClass(To,[{key:"setSelection",value:function setSelection(t,e,n){this.document.selection._setTo(t,e,n);}},{key:"setSelectionFocus",value:function setSelectionFocus(t,e){this.document.selection._setFocus(t,e);}},{key:"createText",value:function createText(t){return new fi(t);}},{key:"createAttributeElement",value:function createAttributeElement(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=new ao(t,e);return n.priority&&(i._priority=n.priority),n.id&&(i._id=n.id),i;}},{key:"createContainerElement",value:function createContainerElement(t,e){return new yi(t,e);}},{key:"createEditableElement",value:function createEditableElement(t,e){var n=new Gi(t,e);return n._document=this.document,n;}},{key:"createEmptyElement",value:function createEmptyElement(t,e){return new ho(t,e);}},{key:"createUIElement",value:function createUIElement(t,e,n){var i=new vo(t,e);return n&&(i.render=n),i;}},{key:"setAttribute",value:function setAttribute(t,e,n){n._setAttribute(t,e);}},{key:"removeAttribute",value:function removeAttribute(t,e){e._removeAttribute(t);}},{key:"addClass",value:function addClass(t,e){e._addClass(t);}},{key:"removeClass",value:function removeClass(t,e){e._removeClass(t);}},{key:"setStyle",value:function setStyle(t,e,n){T(t)&&void 0===n&&(n=e),n._setStyle(t,e);}},{key:"removeStyle",value:function removeStyle(t,e){e._removeStyle(t);}},{key:"setCustomProperty",value:function setCustomProperty(t,e,n){n._setCustomProperty(t,e);}},{key:"removeCustomProperty",value:function removeCustomProperty(t,e){return e._removeCustomProperty(t);}},{key:"breakAttributes",value:function breakAttributes(t){return t instanceof Zi?this._breakAttributes(t):this._breakAttributesRange(t);}},{key:"breakContainer",value:function breakContainer(t){var e=t.parent;if(!e.is("containerElement"))throw new Gn.b("view-writer-break-non-container-element: Trying to break an element which is not a container element.",this.document);if(!e.parent)throw new Gn.b("view-writer-break-root: Trying to break root element.",this.document);if(t.isAtStart)return Zi._createBefore(e);if(!t.isAtEnd){var _n27=e._clone(!1);this.insert(Zi._createAfter(e),_n27);var _i21=new Xi(t,Zi._createAt(e,"end")),_o13=new Zi(_n27,0);this.move(_i21,_o13);}return Zi._createAfter(e);}},{key:"mergeAttributes",value:function mergeAttributes(t){var e=t.offset,n=t.parent;if(n.is("text"))return t;if(n.is("attributeElement")&&0===n.childCount){var _t29=n.parent,_e39=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new Zi(_t29,_e39));}var i=n.getChild(e-1),o=n.getChild(e);if(!i||!o)return t;if(i.is("text")&&o.is("text"))return Eo(i,o);if(i.is("attributeElement")&&o.is("attributeElement")&&i.isSimilar(o)){var _t30=i.childCount;return i._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new Zi(i,_t30));}return t;}},{key:"mergeContainers",value:function mergeContainers(t){var e=t.nodeBefore,n=t.nodeAfter;if(!(e&&n&&e.is("containerElement")&&n.is("containerElement")))throw new Gn.b("view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.",this.document);var i=e.getChild(e.childCount-1),o=i instanceof fi?Zi._createAt(i,"end"):Zi._createAt(e,"end");return this.move(Xi._createIn(n),Zi._createAt(e,"end")),this.remove(Xi._createOn(n)),o;}},{key:"insert",value:function insert(t,e){(function t(e,n){var _iteratorNormalCompletion36=true;var _didIteratorError36=false;var _iteratorError36=undefined;try{var _loop=function _loop(){var i=_step36.value;if(!Io.some(function(t){return i instanceof t;}))throw new Gn.b("view-writer-insert-invalid-node",n);i.is("text")||t(i.getChildren(),n);};for(var _iterator36=e[Symbol.iterator](),_step36;!(_iteratorNormalCompletion36=(_step36=_iterator36.next()).done);_iteratorNormalCompletion36=true){_loop();}}catch(err){_didIteratorError36=true;_iteratorError36=err;}finally{try{if(!_iteratorNormalCompletion36&&_iterator36["return"]!=null){_iterator36["return"]();}}finally{if(_didIteratorError36){throw _iteratorError36;}}}})(e=pi(e)?_toConsumableArray(e):[e],this.document);var n=Co(t);if(!n)throw new Gn.b("view-writer-invalid-position-container",this.document);var i=this._breakAttributes(t,!0),o=n._insertChild(i.offset,e);var _iteratorNormalCompletion37=true;var _didIteratorError37=false;var _iteratorError37=undefined;try{for(var _iterator37=e[Symbol.iterator](),_step37;!(_iteratorNormalCompletion37=(_step37=_iterator37.next()).done);_iteratorNormalCompletion37=true){var _t32=_step37.value;this._addToClonedElementsGroup(_t32);}}catch(err){_didIteratorError37=true;_iteratorError37=err;}finally{try{if(!_iteratorNormalCompletion37&&_iterator37["return"]!=null){_iterator37["return"]();}}finally{if(_didIteratorError37){throw _iteratorError37;}}}var r=i.getShiftedBy(o),s=this.mergeAttributes(i);if(0===o)return new Xi(s,s);{s.isEqual(i)||r.offset--;var _t31=this.mergeAttributes(r);return new Xi(s,_t31);}}},{key:"remove",value:function remove(t){var e=t instanceof Xi?t:Xi._createOn(t);if(Oo(e,this.document),e.isCollapsed)return new Ao();var _this$_breakAttribute=this._breakAttributesRange(e,!0),n=_this$_breakAttribute.start,i=_this$_breakAttribute.end,o=n.parent,r=i.offset-n.offset,s=o._removeChildren(n.offset,r);var _iteratorNormalCompletion38=true;var _didIteratorError38=false;var _iteratorError38=undefined;try{for(var _iterator38=s[Symbol.iterator](),_step38;!(_iteratorNormalCompletion38=(_step38=_iterator38.next()).done);_iteratorNormalCompletion38=true){var _t33=_step38.value;this._removeFromClonedElementsGroup(_t33);}}catch(err){_didIteratorError38=true;_iteratorError38=err;}finally{try{if(!_iteratorNormalCompletion38&&_iterator38["return"]!=null){_iterator38["return"]();}}finally{if(_didIteratorError38){throw _iteratorError38;}}}var a=this.mergeAttributes(n);return e.start=a,e.end=a.clone(),new Ao(s);}},{key:"clear",value:function clear(t,e){Oo(t,this.document);var n=t.getWalker({direction:"backward",ignoreElementEnd:!0});var _iteratorNormalCompletion39=true;var _didIteratorError39=false;var _iteratorError39=undefined;try{for(var _iterator39=n[Symbol.iterator](),_step39;!(_iteratorNormalCompletion39=(_step39=_iterator39.next()).done);_iteratorNormalCompletion39=true){var _i22=_step39.value;var _n28=_i22.item;var _o14=void 0;if(_n28.is("element")&&e.isSimilar(_n28))_o14=Xi._createOn(_n28);else if(!_i22.nextPosition.isAfter(t.start)&&_n28.is("textProxy")){var _t34=_n28.getAncestors().find(function(t){return t.is("element")&&e.isSimilar(t);});_t34&&(_o14=Xi._createIn(_t34));}_o14&&(_o14.end.isAfter(t.end)&&(_o14.end=t.end),_o14.start.isBefore(t.start)&&(_o14.start=t.start),this.remove(_o14));}}catch(err){_didIteratorError39=true;_iteratorError39=err;}finally{try{if(!_iteratorNormalCompletion39&&_iterator39["return"]!=null){_iterator39["return"]();}}finally{if(_didIteratorError39){throw _iteratorError39;}}}}},{key:"move",value:function move(t,e){var n;if(e.isAfter(t.end)){var _i23=(e=this._breakAttributes(e,!0)).parent,_o15=_i23.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=_i23.childCount-_o15;}else n=this.remove(t);return this.insert(e,n);}},{key:"wrap",value:function wrap(t,e){if(!(e instanceof ao))throw new Gn.b("view-writer-wrap-invalid-attribute",this.document);if(Oo(t,this.document),t.isCollapsed){var _n29=t.start;_n29.parent.is("element")&&!function(t){return Array.from(t.getChildren()).some(function(t){return!t.is("uiElement");});}(_n29.parent)&&(_n29=_n29.getLastMatchingPosition(function(t){return t.item.is("uiElement");})),_n29=this._wrapPosition(_n29,e);var _i24=this.document.selection;return _i24.isCollapsed&&_i24.getFirstPosition().isEqual(t.start)&&this.setSelection(_n29),new Xi(_n29);}return this._wrapRange(t,e);}},{key:"unwrap",value:function unwrap(t,e){if(!(e instanceof ao))throw new Gn.b("view-writer-unwrap-invalid-attribute",this.document);if(Oo(t,this.document),t.isCollapsed)return t;var _this$_breakAttribute2=this._breakAttributesRange(t,!0),n=_this$_breakAttribute2.start,i=_this$_breakAttribute2.end,o=n.parent,r=this._unwrapChildren(o,n.offset,i.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new Xi(s,a);}},{key:"rename",value:function rename(t,e){var n=new yi(t,e.getAttributes());return this.insert(Zi._createAfter(e),n),this.move(Xi._createIn(e),Zi._createAt(n,0)),this.remove(Xi._createOn(e)),n;}},{key:"clearClonedElementsGroup",value:function clearClonedElementsGroup(t){this._cloneGroups["delete"](t);}},{key:"createPositionAt",value:function createPositionAt(t,e){return Zi._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Zi._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Zi._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new Xi(t,e);}},{key:"createRangeOn",value:function createRangeOn(t){return Xi._createOn(t);}},{key:"createRangeIn",value:function createRangeIn(t){return Xi._createIn(t);}},{key:"createSelection",value:function createSelection(t,e,n){return new no(t,e,n);}},{key:"_wrapChildren",value:function _wrapChildren(t,e,n,i){var o=e;var r=[];for(;o<n;){var _e40=t.getChild(o),_n30=_e40.is("text"),_s4=_e40.is("attributeElement"),_a4=_e40.is("emptyElement"),_c2=_e40.is("uiElement");if(_s4&&this._wrapAttributeElement(i,_e40))r.push(new Zi(t,o));else if(_n30||_a4||_c2||_s4&&Po(i,_e40)){var _n31=i._clone();_e40._remove(),_n31._appendChild(_e40),t._insertChild(o,_n31),this._addToClonedElementsGroup(_n31),r.push(new Zi(t,o));}else _s4&&this._wrapChildren(_e40,0,_e40.childCount,i);o++;}var s=0;for(var _i25=0,_r5=r;_i25<_r5.length;_i25++){var _t35=_r5[_i25];if(_t35.offset-=s,_t35.offset==e)continue;this.mergeAttributes(_t35).isEqual(_t35)||(s++,n--);}return Xi._createFromParentsAndOffsets(t,e,t,n);}},{key:"_unwrapChildren",value:function _unwrapChildren(t,e,n,i){var o=e;var r=[];for(;o<n;){var _e41=t.getChild(o);if(_e41.is("attributeElement")){if(_e41.isSimilar(i)){var _i26=_e41.getChildren(),_s5=_e41.childCount;_e41._remove(),t._insertChild(o,_i26),this._removeFromClonedElementsGroup(_e41),r.push(new Zi(t,o),new Zi(t,o+_s5)),o+=_s5,n+=_s5-1;}else this._unwrapAttributeElement(i,_e41)?(r.push(new Zi(t,o),new Zi(t,o+1)),o++):(this._unwrapChildren(_e41,0,_e41.childCount,i),o++);}else o++;}var s=0;for(var _i27=0,_r6=r;_i27<_r6.length;_i27++){var _t36=_r6[_i27];if(_t36.offset-=s,_t36.offset==e||_t36.offset==n)continue;this.mergeAttributes(_t36).isEqual(_t36)||(s++,n--);}return Xi._createFromParentsAndOffsets(t,e,t,n);}},{key:"_wrapRange",value:function _wrapRange(t,e){var _this$_breakAttribute3=this._breakAttributesRange(t,!0),n=_this$_breakAttribute3.start,i=_this$_breakAttribute3.end,o=n.parent,r=this._wrapChildren(o,n.offset,i.offset,e),s=this.mergeAttributes(r.start);s.isEqual(r.start)||r.end.offset--;var a=this.mergeAttributes(r.end);return new Xi(s,a);}},{key:"_wrapPosition",value:function _wrapPosition(t,e){if(e.isSimilar(t.parent))return So(t.clone());t.parent.is("text")&&(t=Mo(t));var n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=function(){return!1;},t.parent._insertChild(t.offset,n);var i=new Xi(t,t.getShiftedBy(1));this.wrap(i,e);var o=new Zi(n.parent,n.index);n._remove();var r=o.nodeBefore,s=o.nodeAfter;return r instanceof fi&&s instanceof fi?Eo(r,s):So(o);}},{key:"_wrapAttributeElement",value:function _wrapAttributeElement(t,e){if(!Ro(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;var _iteratorNormalCompletion40=true;var _didIteratorError40=false;var _iteratorError40=undefined;try{for(var _iterator40=t.getAttributeKeys()[Symbol.iterator](),_step40;!(_iteratorNormalCompletion40=(_step40=_iterator40.next()).done);_iteratorNormalCompletion40=true){var _n32=_step40.value;if("class"!==_n32&&"style"!==_n32&&e.hasAttribute(_n32)&&e.getAttribute(_n32)!==t.getAttribute(_n32))return!1;}}catch(err){_didIteratorError40=true;_iteratorError40=err;}finally{try{if(!_iteratorNormalCompletion40&&_iterator40["return"]!=null){_iterator40["return"]();}}finally{if(_didIteratorError40){throw _iteratorError40;}}}var _iteratorNormalCompletion41=true;var _didIteratorError41=false;var _iteratorError41=undefined;try{for(var _iterator41=t.getStyleNames()[Symbol.iterator](),_step41;!(_iteratorNormalCompletion41=(_step41=_iterator41.next()).done);_iteratorNormalCompletion41=true){var _n33=_step41.value;if(e.hasStyle(_n33)&&e.getStyle(_n33)!==t.getStyle(_n33))return!1;}}catch(err){_didIteratorError41=true;_iteratorError41=err;}finally{try{if(!_iteratorNormalCompletion41&&_iterator41["return"]!=null){_iterator41["return"]();}}finally{if(_didIteratorError41){throw _iteratorError41;}}}var _iteratorNormalCompletion42=true;var _didIteratorError42=false;var _iteratorError42=undefined;try{for(var _iterator42=t.getAttributeKeys()[Symbol.iterator](),_step42;!(_iteratorNormalCompletion42=(_step42=_iterator42.next()).done);_iteratorNormalCompletion42=true){var _n34=_step42.value;"class"!==_n34&&"style"!==_n34&&(e.hasAttribute(_n34)||this.setAttribute(_n34,t.getAttribute(_n34),e));}}catch(err){_didIteratorError42=true;_iteratorError42=err;}finally{try{if(!_iteratorNormalCompletion42&&_iterator42["return"]!=null){_iterator42["return"]();}}finally{if(_didIteratorError42){throw _iteratorError42;}}}var _iteratorNormalCompletion43=true;var _didIteratorError43=false;var _iteratorError43=undefined;try{for(var _iterator43=t.getStyleNames()[Symbol.iterator](),_step43;!(_iteratorNormalCompletion43=(_step43=_iterator43.next()).done);_iteratorNormalCompletion43=true){var _n35=_step43.value;e.hasStyle(_n35)||this.setStyle(_n35,t.getStyle(_n35),e);}}catch(err){_didIteratorError43=true;_iteratorError43=err;}finally{try{if(!_iteratorNormalCompletion43&&_iterator43["return"]!=null){_iterator43["return"]();}}finally{if(_didIteratorError43){throw _iteratorError43;}}}var _iteratorNormalCompletion44=true;var _didIteratorError44=false;var _iteratorError44=undefined;try{for(var _iterator44=t.getClassNames()[Symbol.iterator](),_step44;!(_iteratorNormalCompletion44=(_step44=_iterator44.next()).done);_iteratorNormalCompletion44=true){var _n36=_step44.value;e.hasClass(_n36)||this.addClass(_n36,e);}}catch(err){_didIteratorError44=true;_iteratorError44=err;}finally{try{if(!_iteratorNormalCompletion44&&_iterator44["return"]!=null){_iterator44["return"]();}}finally{if(_didIteratorError44){throw _iteratorError44;}}}return!0;}},{key:"_unwrapAttributeElement",value:function _unwrapAttributeElement(t,e){if(!Ro(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;var _iteratorNormalCompletion45=true;var _didIteratorError45=false;var _iteratorError45=undefined;try{for(var _iterator45=t.getAttributeKeys()[Symbol.iterator](),_step45;!(_iteratorNormalCompletion45=(_step45=_iterator45.next()).done);_iteratorNormalCompletion45=true){var _n37=_step45.value;if("class"!==_n37&&"style"!==_n37&&(!e.hasAttribute(_n37)||e.getAttribute(_n37)!==t.getAttribute(_n37)))return!1;}}catch(err){_didIteratorError45=true;_iteratorError45=err;}finally{try{if(!_iteratorNormalCompletion45&&_iterator45["return"]!=null){_iterator45["return"]();}}finally{if(_didIteratorError45){throw _iteratorError45;}}}if(!e.hasClass.apply(e,_toConsumableArray(t.getClassNames())))return!1;var _iteratorNormalCompletion46=true;var _didIteratorError46=false;var _iteratorError46=undefined;try{for(var _iterator46=t.getStyleNames()[Symbol.iterator](),_step46;!(_iteratorNormalCompletion46=(_step46=_iterator46.next()).done);_iteratorNormalCompletion46=true){var _n38=_step46.value;if(!e.hasStyle(_n38)||e.getStyle(_n38)!==t.getStyle(_n38))return!1;}}catch(err){_didIteratorError46=true;_iteratorError46=err;}finally{try{if(!_iteratorNormalCompletion46&&_iterator46["return"]!=null){_iterator46["return"]();}}finally{if(_didIteratorError46){throw _iteratorError46;}}}var _iteratorNormalCompletion47=true;var _didIteratorError47=false;var _iteratorError47=undefined;try{for(var _iterator47=t.getAttributeKeys()[Symbol.iterator](),_step47;!(_iteratorNormalCompletion47=(_step47=_iterator47.next()).done);_iteratorNormalCompletion47=true){var _n39=_step47.value;"class"!==_n39&&"style"!==_n39&&this.removeAttribute(_n39,e);}}catch(err){_didIteratorError47=true;_iteratorError47=err;}finally{try{if(!_iteratorNormalCompletion47&&_iterator47["return"]!=null){_iterator47["return"]();}}finally{if(_didIteratorError47){throw _iteratorError47;}}}return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0;}},{key:"_breakAttributesRange",value:function _breakAttributesRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var n=t.start,i=t.end;if(Oo(t,this.document),t.isCollapsed){var _n40=this._breakAttributes(t.start,e);return new Xi(_n40,_n40);}var o=this._breakAttributes(i,e),r=o.parent.childCount,s=this._breakAttributes(n,e);return o.offset+=o.parent.childCount-r,new Xi(s,o);}},{key:"_breakAttributes",value:function _breakAttributes(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var n=t.offset,i=t.parent;if(t.parent.is("emptyElement"))throw new Gn.b("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new Gn.b("view-writer-cannot-break-ui-element",this.document);if(!e&&i.is("text")&&No(i.parent))return t.clone();if(No(i))return t.clone();if(i.is("text"))return this._breakAttributes(Mo(t),e);if(n==i.childCount){var _t37=new Zi(i.parent,i.index+1);return this._breakAttributes(_t37,e);}if(0===n){var _t38=new Zi(i.parent,i.index);return this._breakAttributes(_t38,e);}{var _t39=i.index+1,_o16=i._clone();i.parent._insertChild(_t39,_o16),this._addToClonedElementsGroup(_o16);var _r7=i.childCount-n,_s6=i._removeChildren(n,_r7);_o16._appendChild(_s6);var _a5=new Zi(i.parent,_t39);return this._breakAttributes(_a5,e);}}},{key:"_addToClonedElementsGroup",value:function _addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element")){var _iteratorNormalCompletion48=true;var _didIteratorError48=false;var _iteratorError48=undefined;try{for(var _iterator48=t.getChildren()[Symbol.iterator](),_step48;!(_iteratorNormalCompletion48=(_step48=_iterator48.next()).done);_iteratorNormalCompletion48=true){var _e42=_step48.value;this._addToClonedElementsGroup(_e42);}}catch(err){_didIteratorError48=true;_iteratorError48=err;}finally{try{if(!_iteratorNormalCompletion48&&_iterator48["return"]!=null){_iterator48["return"]();}}finally{if(_didIteratorError48){throw _iteratorError48;}}}}var e=t.id;if(!e)return;var n=this._cloneGroups.get(e);n||(n=new Set(),this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n;}},{key:"_removeFromClonedElementsGroup",value:function _removeFromClonedElementsGroup(t){if(t.is("element")){var _iteratorNormalCompletion49=true;var _didIteratorError49=false;var _iteratorError49=undefined;try{for(var _iterator49=t.getChildren()[Symbol.iterator](),_step49;!(_iteratorNormalCompletion49=(_step49=_iterator49.next()).done);_iteratorNormalCompletion49=true){var _e43=_step49.value;this._removeFromClonedElementsGroup(_e43);}}catch(err){_didIteratorError49=true;_iteratorError49=err;}finally{try{if(!_iteratorNormalCompletion49&&_iterator49["return"]!=null){_iterator49["return"]();}}finally{if(_didIteratorError49){throw _iteratorError49;}}}}var e=t.id;if(!e)return;var n=this._cloneGroups.get(e);n&&n["delete"](t);}}]);return To;}();function Co(t){var e=t.parent;for(;!No(e);){if(!e)return;e=e.parent;}return e;}function Po(t,e){return t.priority<e.priority||!(t.priority>e.priority)&&t.getIdentity()<e.getIdentity();}function So(t){var e=t.nodeBefore;if(e&&e.is("text"))return new Zi(e,e.data.length);var n=t.nodeAfter;return n&&n.is("text")?new Zi(n,0):t;}function Mo(t){if(t.offset==t.parent.data.length)return new Zi(t.parent.parent,t.parent.index+1);if(0===t.offset)return new Zi(t.parent.parent,t.parent.index);var e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new fi(e)),new Zi(t.parent.parent,t.parent.index+1);}function Eo(t,e){var n=t.data.length;return t._data+=e.data,e._remove(),new Zi(t,n);}var Io=[fi,ao,yi,ho,vo];function No(t){return t&&(t.is("containerElement")||t.is("documentFragment"));}function Oo(t,e){var n=Co(t.start),i=Co(t.end);if(!n||!i||n!==i)throw new Gn.b("view-writer-invalid-range-container",e);}function Ro(t,e){return null===t.id&&null===e.id;}function Do(t){return"[object Text]"==Object.prototype.toString.call(t);}var Lo=function Lo(t){var e=t.createElement("br");return e.dataset.ckeFiller=!0,e;},jo=function jo(t){return t.createTextNode("");},Vo=7;var zo="";for(var _t40=0;_t40<Vo;_t40++){zo+="";}function Bo(t){return Do(t)&&t.data.substr(0,Vo)===zo;}function Fo(t){return t.data.length==Vo&&Bo(t);}function Uo(t){return Bo(t)?t.data.slice(Vo):t.data;}var Ho=new WeakMap();function qo(t,e){var n=Ho.get(e);return n||(n=e(window.document),Ho.set(e,n)),t.isEqualNode(n);}function Wo(t,e){if(e.keyCode==bo.arrowleft){var _t41=e.domTarget.ownerDocument.defaultView.getSelection();if(1==_t41.rangeCount&&_t41.getRangeAt(0).collapsed){var _e44=_t41.getRangeAt(0).startContainer,_n41=_t41.getRangeAt(0).startOffset;Bo(_e44)&&_n41<=Vo&&_t41.collapse(_e44,0);}}}function Yo(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;n=n||function(t,e){return t===e;},Array.isArray(t)||(t=Array.from(t)),Array.isArray(e)||(e=Array.from(e));var o=function(t,e,n){var i=$o(t,e,n);if(-1===i)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var o=Go(t,i),r=Go(e,i),s=$o(o,r,n),a=t.length-s,c=e.length-s;return{firstIndex:i,lastIndexOld:a,lastIndexNew:c};}(t,e,n);return i?function(t,e){var n=t.firstIndex,i=t.lastIndexOld,o=t.lastIndexNew;if(-1===n)return Array(e).fill("equal");var r=[];n>0&&(r=r.concat(Array(n).fill("equal")));o-n>0&&(r=r.concat(Array(o-n).fill("insert")));i-n>0&&(r=r.concat(Array(i-n).fill("delete")));o<e&&(r=r.concat(Array(e-o).fill("equal")));return r;}(o,e.length):function(t,e){var n=[],i=e.firstIndex,o=e.lastIndexOld,r=e.lastIndexNew;r-i>0&&n.push({index:i,type:"insert",values:t.slice(i,r)});o-i>0&&n.push({index:i+(r-i),type:"delete",howMany:o-i});return n;}(e,o);}function $o(t,e,n){for(var _i28=0;_i28<Math.max(t.length,e.length);_i28++){if(void 0===t[_i28]||void 0===e[_i28]||!n(t[_i28],e[_i28]))return _i28;}return-1;}function Go(t,e){return t.slice(e).reverse();}function Qo(t,e,n){n=n||function(t,e){return t===e;};var i=t.length,o=e.length;if(i>200||o>200||i+o>300)return Qo.fastDiff(t,e,n,!0);var r,s;if(o<i){var _n42=t;t=e,e=_n42,r="delete",s="insert";}else r="insert",s="delete";var a=t.length,c=e.length,l=c-a,d={},h={};function u(i){var o=(void 0!==h[i-1]?h[i-1]:-1)+1,l=void 0!==h[i+1]?h[i+1]:-1,u=o>l?-1:1;d[i+u]&&(d[i]=d[i+u].slice(0)),d[i]||(d[i]=[]),d[i].push(o>l?r:s);var f=Math.max(o,l),m=f-i;for(;m<a&&f<c&&n(t[m],e[f]);){m++,f++,d[i].push("equal");}return f;}var f,m=0;do{for(f=-m;f<l;f++){h[f]=u(f);}for(f=l+m;f>l;f--){h[f]=u(f);}h[l]=u(l),m++;}while(h[l]!==c);return d[l].slice(1);}function Ko(t,e,n){t.insertBefore(n,t.childNodes[e]||null);}function Jo(t){var e=t.parentNode;e&&e.removeChild(t);}function Zo(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node;}return!1;}Qo.fastDiff=Yo;var Xo=/*#__PURE__*/function(){function Xo(t,e){_classCallCheck(this,Xo);this.domDocuments=new Set(),this.domConverter=t,this.markedAttributes=new Set(),this.markedChildren=new Set(),this.markedTexts=new Set(),this.selection=e,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null;}_createClass(Xo,[{key:"markToSync",value:function markToSync(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new Gn.b("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.",this);this.markedChildren.add(e);}}}},{key:"render",value:function render(){var t;var _iteratorNormalCompletion50=true;var _didIteratorError50=false;var _iteratorError50=undefined;try{for(var _iterator50=this.markedChildren[Symbol.iterator](),_step50;!(_iteratorNormalCompletion50=(_step50=_iterator50.next()).done);_iteratorNormalCompletion50=true){var _t42=_step50.value;this._updateChildrenMappings(_t42);}}catch(err){_didIteratorError50=true;_iteratorError50=err;}finally{try{if(!_iteratorNormalCompletion50&&_iterator50["return"]!=null){_iterator50["return"]();}}finally{if(_didIteratorError50){throw _iteratorError50;}}}this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?t=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(t=this.selection.getFirstPosition(),this.markedChildren.add(t.parent));var _iteratorNormalCompletion51=true;var _didIteratorError51=false;var _iteratorError51=undefined;try{for(var _iterator51=this.markedAttributes[Symbol.iterator](),_step51;!(_iteratorNormalCompletion51=(_step51=_iterator51.next()).done);_iteratorNormalCompletion51=true){var _t43=_step51.value;this._updateAttrs(_t43);}}catch(err){_didIteratorError51=true;_iteratorError51=err;}finally{try{if(!_iteratorNormalCompletion51&&_iterator51["return"]!=null){_iterator51["return"]();}}finally{if(_didIteratorError51){throw _iteratorError51;}}}var _iteratorNormalCompletion52=true;var _didIteratorError52=false;var _iteratorError52=undefined;try{for(var _iterator52=this.markedChildren[Symbol.iterator](),_step52;!(_iteratorNormalCompletion52=(_step52=_iterator52.next()).done);_iteratorNormalCompletion52=true){var _e46=_step52.value;this._updateChildren(_e46,{inlineFillerPosition:t});}}catch(err){_didIteratorError52=true;_iteratorError52=err;}finally{try{if(!_iteratorNormalCompletion52&&_iterator52["return"]!=null){_iterator52["return"]();}}finally{if(_didIteratorError52){throw _iteratorError52;}}}var _iteratorNormalCompletion53=true;var _didIteratorError53=false;var _iteratorError53=undefined;try{for(var _iterator53=this.markedTexts[Symbol.iterator](),_step53;!(_iteratorNormalCompletion53=(_step53=_iterator53.next()).done);_iteratorNormalCompletion53=true){var _e47=_step53.value;!this.markedChildren.has(_e47.parent)&&this.domConverter.mapViewToDom(_e47.parent)&&this._updateText(_e47,{inlineFillerPosition:t});}}catch(err){_didIteratorError53=true;_iteratorError53=err;}finally{try{if(!_iteratorNormalCompletion53&&_iterator53["return"]!=null){_iterator53["return"]();}}finally{if(_didIteratorError53){throw _iteratorError53;}}}if(t){var _e45=this.domConverter.viewPositionToDom(t),_n43=_e45.parent.ownerDocument;Bo(_e45.parent)?this._inlineFiller=_e45.parent:this._inlineFiller=tr(_n43,_e45.parent,_e45.offset);}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear();}},{key:"_updateChildrenMappings",value:function _updateChildrenMappings(t){var e=this.domConverter.mapViewToDom(t);if(!e)return;var n=this.domConverter.mapViewToDom(t).childNodes,i=Array.from(this.domConverter.viewChildrenToDom(t,e.ownerDocument,{withChildren:!1})),o=this._diffNodeLists(n,i),r=this._findReplaceActions(o,n,i);if(-1!==r.indexOf("replace")){var _e48={equal:0,insert:0,"delete":0};var _iteratorNormalCompletion54=true;var _didIteratorError54=false;var _iteratorError54=undefined;try{for(var _iterator54=r[Symbol.iterator](),_step54;!(_iteratorNormalCompletion54=(_step54=_iterator54.next()).done);_iteratorNormalCompletion54=true){var _o17=_step54.value;if("replace"===_o17){var _o18=_e48.equal+_e48.insert,_r8=_e48.equal+_e48["delete"],_s7=t.getChild(_o18);_s7&&!_s7.is("uiElement")&&this._updateElementMappings(_s7,n[_r8]),Jo(i[_o18]),_e48.equal++;}else _e48[_o17]++;}}catch(err){_didIteratorError54=true;_iteratorError54=err;}finally{try{if(!_iteratorNormalCompletion54&&_iterator54["return"]!=null){_iterator54["return"]();}}finally{if(_didIteratorError54){throw _iteratorError54;}}}}}},{key:"_updateElementMappings",value:function _updateElementMappings(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t);}},{key:"_getInlineFillerPosition",value:function _getInlineFillerPosition(){var t=this.selection.getFirstPosition();return t.parent.is("text")?Zi._createBefore(this.selection.getFirstPosition().parent):t;}},{key:"_isSelectionInInlineFiller",value:function _isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&Do(e.parent)&&Bo(e.parent));}},{key:"_removeInlineFiller",value:function _removeInlineFiller(){var t=this._inlineFiller;if(!Bo(t))throw new Gn.b("view-renderer-filler-was-lost: The inline filler node was lost.",this);Fo(t)?t.parentNode.removeChild(t):t.data=t.data.substr(Vo),this._inlineFiller=null;}},{key:"_needsInlineFillerAtSelection",value:function _needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var t=this.selection.getFirstPosition(),e=t.parent,n=t.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is("element"))return!1;if(!function(t){if("false"==t.getAttribute("contenteditable"))return!1;var e=t.findAncestor(function(t){return t.hasAttribute("contenteditable");});return!e||"true"==e.getAttribute("contenteditable");}(e))return!1;if(n===e.getFillerOffset())return!1;var i=t.nodeBefore,o=t.nodeAfter;return!(i instanceof fi||o instanceof fi);}},{key:"_updateText",value:function _updateText(t,e){var n=this.domConverter.findCorrespondingDomText(t),i=this.domConverter.viewToDom(t,n.ownerDocument),o=n.data;var r=i.data;var s=e.inlineFillerPosition;if(s&&s.parent==t.parent&&s.offset==t.index&&(r=zo+r),o!=r){var _t44=Yo(o,r);var _iteratorNormalCompletion55=true;var _didIteratorError55=false;var _iteratorError55=undefined;try{for(var _iterator55=_t44[Symbol.iterator](),_step55;!(_iteratorNormalCompletion55=(_step55=_iterator55.next()).done);_iteratorNormalCompletion55=true){var _e49=_step55.value;"insert"===_e49.type?n.insertData(_e49.index,_e49.values.join("")):n.deleteData(_e49.index,_e49.howMany);}}catch(err){_didIteratorError55=true;_iteratorError55=err;}finally{try{if(!_iteratorNormalCompletion55&&_iterator55["return"]!=null){_iterator55["return"]();}}finally{if(_didIteratorError55){throw _iteratorError55;}}}}}},{key:"_updateAttrs",value:function _updateAttrs(t){var e=this.domConverter.mapViewToDom(t);if(!e)return;var n=Array.from(e.attributes).map(function(t){return t.name;}),i=t.getAttributeKeys();var _iteratorNormalCompletion56=true;var _didIteratorError56=false;var _iteratorError56=undefined;try{for(var _iterator56=i[Symbol.iterator](),_step56;!(_iteratorNormalCompletion56=(_step56=_iterator56.next()).done);_iteratorNormalCompletion56=true){var _n44=_step56.value;e.setAttribute(_n44,t.getAttribute(_n44));}}catch(err){_didIteratorError56=true;_iteratorError56=err;}finally{try{if(!_iteratorNormalCompletion56&&_iterator56["return"]!=null){_iterator56["return"]();}}finally{if(_didIteratorError56){throw _iteratorError56;}}}var _iteratorNormalCompletion57=true;var _didIteratorError57=false;var _iteratorError57=undefined;try{for(var _iterator57=n[Symbol.iterator](),_step57;!(_iteratorNormalCompletion57=(_step57=_iterator57.next()).done);_iteratorNormalCompletion57=true){var _i29=_step57.value;t.hasAttribute(_i29)||e.removeAttribute(_i29);}}catch(err){_didIteratorError57=true;_iteratorError57=err;}finally{try{if(!_iteratorNormalCompletion57&&_iterator57["return"]!=null){_iterator57["return"]();}}finally{if(_didIteratorError57){throw _iteratorError57;}}}}},{key:"_updateChildren",value:function _updateChildren(t,e){var n=this.domConverter.mapViewToDom(t);if(!n)return;var i=e.inlineFillerPosition,o=this.domConverter.mapViewToDom(t).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(t,n.ownerDocument,{bind:!0,inlineFillerPosition:i}));i&&i.parent===t&&tr(n.ownerDocument,r,i.offset);var s=this._diffNodeLists(o,r);var a=0;var c=new Set();var _iteratorNormalCompletion58=true;var _didIteratorError58=false;var _iteratorError58=undefined;try{for(var _iterator58=s[Symbol.iterator](),_step58;!(_iteratorNormalCompletion58=(_step58=_iterator58.next()).done);_iteratorNormalCompletion58=true){var _t45=_step58.value;"insert"===_t45?(Ko(n,a,r[a]),a++):"delete"===_t45?(c.add(o[a]),Jo(o[a])):(this._markDescendantTextToSync(this.domConverter.domToView(r[a])),a++);}}catch(err){_didIteratorError58=true;_iteratorError58=err;}finally{try{if(!_iteratorNormalCompletion58&&_iterator58["return"]!=null){_iterator58["return"]();}}finally{if(_didIteratorError58){throw _iteratorError58;}}}var _iteratorNormalCompletion59=true;var _didIteratorError59=false;var _iteratorError59=undefined;try{for(var _iterator59=c[Symbol.iterator](),_step59;!(_iteratorNormalCompletion59=(_step59=_iterator59.next()).done);_iteratorNormalCompletion59=true){var _t46=_step59.value;_t46.parentNode||this.domConverter.unbindDomElement(_t46);}}catch(err){_didIteratorError59=true;_iteratorError59=err;}finally{try{if(!_iteratorNormalCompletion59&&_iterator59["return"]!=null){_iterator59["return"]();}}finally{if(_didIteratorError59){throw _iteratorError59;}}}}},{key:"_diffNodeLists",value:function _diffNodeLists(t,e){return Qo(t=function(t,e){var n=Array.from(t);if(0==n.length||!e)return n;n[n.length-1]==e&&n.pop();return n;}(t,this._fakeSelectionContainer),e,function(t,e,n){if(e===n)return!0;if(Do(e)&&Do(n))return e.data===n.data;if(qo(e,t)&&qo(n,t))return!0;return!1;}.bind(null,this.domConverter.blockFiller));}},{key:"_findReplaceActions",value:function _findReplaceActions(t,e,n){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;var i=[],o=[],r=[];var s={equal:0,insert:0,"delete":0};var _iteratorNormalCompletion60=true;var _didIteratorError60=false;var _iteratorError60=undefined;try{for(var _iterator60=t[Symbol.iterator](),_step60;!(_iteratorNormalCompletion60=(_step60=_iterator60.next()).done);_iteratorNormalCompletion60=true){var _a6=_step60.value;"insert"===_a6?r.push(n[s.equal+s.insert]):"delete"===_a6?o.push(e[s.equal+s["delete"]]):((i=i.concat(Qo(o,r,er).map(function(t){return"equal"===t?"replace":t;}))).push("equal"),o=[],r=[]),s[_a6]++;}}catch(err){_didIteratorError60=true;_iteratorError60=err;}finally{try{if(!_iteratorNormalCompletion60&&_iterator60["return"]!=null){_iterator60["return"]();}}finally{if(_didIteratorError60){throw _iteratorError60;}}}return i.concat(Qo(o,r,er).map(function(t){return"equal"===t?"replace":t;}));}},{key:"_markDescendantTextToSync",value:function _markDescendantTextToSync(t){if(t)if(t.is("text"))this.markedTexts.add(t);else if(t.is("element")){var _iteratorNormalCompletion61=true;var _didIteratorError61=false;var _iteratorError61=undefined;try{for(var _iterator61=t.getChildren()[Symbol.iterator](),_step61;!(_iteratorNormalCompletion61=(_step61=_iterator61.next()).done);_iteratorNormalCompletion61=true){var _e50=_step61.value;this._markDescendantTextToSync(_e50);}}catch(err){_didIteratorError61=true;_iteratorError61=err;}finally{try{if(!_iteratorNormalCompletion61&&_iterator61["return"]!=null){_iterator61["return"]();}}finally{if(_didIteratorError61){throw _iteratorError61;}}}}}},{key:"_updateSelection",value:function _updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):(this._removeFakeSelection(),this._updateDomSelection(t)));}},{key:"_updateFakeSelection",value:function _updateFakeSelection(t){var e=t.ownerDocument;var n=this._fakeSelectionContainer;n||(this._fakeSelectionContainer=n=e.createElement("div"),Object.assign(n.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),n.textContent=""),n.parentElement&&n.parentElement==t||t.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||"";var i=e.getSelection(),o=e.createRange();i.removeAllRanges(),o.selectNodeContents(n),i.addRange(o),this.domConverter.bindFakeSelection(n,this.selection);}},{key:"_updateDomSelection",value:function _updateDomSelection(t){var e=t.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(e))return;var n=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);t.focus(),e.collapse(n.parent,n.offset),e.extend(i.parent,i.offset),mo.isGecko&&function(t,e){var n=t.parent;if(n.nodeType!=Node.ELEMENT_NODE||t.offset!=n.childNodes.length-1)return;var i=n.childNodes[t.offset];i&&"BR"==i.tagName&&e.addRange(e.getRangeAt(0));}(i,e);}},{key:"_domSelectionNeedsUpdate",value:function _domSelectionNeedsUpdate(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;var e=t&&this.domConverter.domSelectionToView(t);return(!e||!this.selection.isEqual(e))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(e));}},{key:"_removeDomSelection",value:function _removeDomSelection(){var _iteratorNormalCompletion62=true;var _didIteratorError62=false;var _iteratorError62=undefined;try{for(var _iterator62=this.domDocuments[Symbol.iterator](),_step62;!(_iteratorNormalCompletion62=(_step62=_iterator62.next()).done);_iteratorNormalCompletion62=true){var _t47=_step62.value;if(_t47.getSelection().rangeCount){var _e51=_t47.activeElement,_n45=this.domConverter.mapDomToView(_e51);_e51&&_n45&&_t47.getSelection().removeAllRanges();}}}catch(err){_didIteratorError62=true;_iteratorError62=err;}finally{try{if(!_iteratorNormalCompletion62&&_iterator62["return"]!=null){_iterator62["return"]();}}finally{if(_didIteratorError62){throw _iteratorError62;}}}}},{key:"_removeFakeSelection",value:function _removeFakeSelection(){var t=this._fakeSelectionContainer;t&&t.remove();}},{key:"_updateFocus",value:function _updateFocus(){if(this.isFocused){var _t48=this.selection.editableElement;_t48&&this.domConverter.focus(_t48);}}}]);return Xo;}();function tr(t,e,n){var i=e instanceof Array?e:e.childNodes,o=i[n];if(Do(o))return o.data=zo+o.data,o;{var _o19=t.createTextNode(zo);return Array.isArray(e)?i.splice(n,0,_o19):Ko(e,n,_o19),_o19;}}function er(t,e){return Zo(t)&&Zo(e)&&!Do(t)&&!Do(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase();}ci(Xo,Fi);var nr={window:window,document:document};function ir(t){var e=0;for(;t.previousSibling;){t=t.previousSibling,e++;}return e;}function or(t){var e=[];for(;t&&t.nodeType!=Node.DOCUMENT_NODE;){e.unshift(t),t=t.parentNode;}return e;}var rr=/*#__PURE__*/function(){function rr(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,rr);this.blockFiller=t.blockFiller||Lo,this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6"],this._domToViewMapping=new WeakMap(),this._viewToDomMapping=new WeakMap(),this._fakeSelectionMapping=new WeakMap();}_createClass(rr,[{key:"bindFakeSelection",value:function bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new no(e));}},{key:"fakeSelectionToView",value:function fakeSelectionToView(t){return this._fakeSelectionMapping.get(t);}},{key:"bindElements",value:function bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t);}},{key:"unbindDomElement",value:function unbindDomElement(t){var e=this._domToViewMapping.get(t);if(e){this._domToViewMapping["delete"](t),this._viewToDomMapping["delete"](e);for(var _i30=0,_Array$from=Array.from(t.childNodes);_i30<_Array$from.length;_i30++){var _e52=_Array$from[_i30];this.unbindDomElement(_e52);}}}},{key:"bindDocumentFragments",value:function bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t);}},{key:"viewToDom",value:function viewToDom(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(t.is("text")){var _n46=this._processDataFromViewText(t);return e.createTextNode(_n46);}{if(this.mapViewToDom(t))return this.mapViewToDom(t);var _i31;if(t.is("documentFragment"))_i31=e.createDocumentFragment(),n.bind&&this.bindDocumentFragments(_i31,t);else{if(t.is("uiElement"))return _i31=t.render(e),n.bind&&this.bindElements(_i31,t),_i31;_i31=e.createElement(t.name),n.bind&&this.bindElements(_i31,t);var _iteratorNormalCompletion63=true;var _didIteratorError63=false;var _iteratorError63=undefined;try{for(var _iterator63=t.getAttributeKeys()[Symbol.iterator](),_step63;!(_iteratorNormalCompletion63=(_step63=_iterator63.next()).done);_iteratorNormalCompletion63=true){var _e53=_step63.value;_i31.setAttribute(_e53,t.getAttribute(_e53));}}catch(err){_didIteratorError63=true;_iteratorError63=err;}finally{try{if(!_iteratorNormalCompletion63&&_iterator63["return"]!=null){_iterator63["return"]();}}finally{if(_didIteratorError63){throw _iteratorError63;}}}}if(n.withChildren||void 0===n.withChildren){var _iteratorNormalCompletion64=true;var _didIteratorError64=false;var _iteratorError64=undefined;try{for(var _iterator64=this.viewChildrenToDom(t,e,n)[Symbol.iterator](),_step64;!(_iteratorNormalCompletion64=(_step64=_iterator64.next()).done);_iteratorNormalCompletion64=true){var _o20=_step64.value;_i31.appendChild(_o20);}}catch(err){_didIteratorError64=true;_iteratorError64=err;}finally{try{if(!_iteratorNormalCompletion64&&_iterator64["return"]!=null){_iterator64["return"]();}}finally{if(_didIteratorError64){throw _iteratorError64;}}}}return _i31;}}},{key:"viewChildrenToDom",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function viewChildrenToDom(t,e){var n,i,o,_iteratorNormalCompletion65,_didIteratorError65,_iteratorError65,_iterator65,_step65,_r9,_args9=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function viewChildrenToDom$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:n=_args9.length>2&&_args9[2]!==undefined?_args9[2]:{};i=t.getFillerOffset&&t.getFillerOffset();o=0;_iteratorNormalCompletion65=true;_didIteratorError65=false;_iteratorError65=undefined;_context9.prev=6;_iterator65=t.getChildren()[Symbol.iterator]();case 8:if(_iteratorNormalCompletion65=(_step65=_iterator65.next()).done){_context9.next=20;break;}_r9=_step65.value;_context9.t0=i===o;if(!_context9.t0){_context9.next=14;break;}_context9.next=14;return this.blockFiller(e);case 14:_context9.next=16;return this.viewToDom(_r9,e,n);case 16:o++;case 17:_iteratorNormalCompletion65=true;_context9.next=8;break;case 20:_context9.next=26;break;case 22:_context9.prev=22;_context9.t1=_context9["catch"](6);_didIteratorError65=true;_iteratorError65=_context9.t1;case 26:_context9.prev=26;_context9.prev=27;if(!_iteratorNormalCompletion65&&_iterator65["return"]!=null){_iterator65["return"]();}case 29:_context9.prev=29;if(!_didIteratorError65){_context9.next=32;break;}throw _iteratorError65;case 32:return _context9.finish(29);case 33:return _context9.finish(26);case 34:_context9.t2=i===o;if(!_context9.t2){_context9.next=38;break;}_context9.next=38;return this.blockFiller(e);case 38:case"end":return _context9.stop();}}},viewChildrenToDom,this,[[6,22,26,34],[27,,29,33]]);})},{key:"viewRangeToDom",value:function viewRangeToDom(t){var e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),i=document.createRange();return i.setStart(e.parent,e.offset),i.setEnd(n.parent,n.offset),i;}},{key:"viewPositionToDom",value:function viewPositionToDom(t){var e=t.parent;if(e.is("text")){var _n47=this.findCorrespondingDomText(e);if(!_n47)return null;var _i32=t.offset;return Bo(_n47)&&(_i32+=Vo),{parent:_n47,offset:_i32};}{var _n48,_i33,_o21;if(0===t.offset){if(!(_n48=this.mapViewToDom(e)))return null;_o21=_n48.childNodes[0];}else{var _e54=t.nodeBefore;if(!(_i33=_e54.is("text")?this.findCorrespondingDomText(_e54):this.mapViewToDom(t.nodeBefore)))return null;_n48=_i33.parentNode,_o21=_i33.nextSibling;}if(Do(_o21)&&Bo(_o21))return{parent:_o21,offset:Vo};return{parent:_n48,offset:_i33?ir(_i33)+1:0};}}},{key:"domToView",value:function domToView(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(qo(t,this.blockFiller))return null;var n=this.getParentUIElement(t,this._domToViewMapping);if(n)return n;if(Do(t)){if(Fo(t))return null;{var _e55=this._processDataFromDomText(t);return""===_e55?null:new fi(_e55);}}if(this.isComment(t))return null;{if(this.mapDomToView(t))return this.mapDomToView(t);var _n49;if(this.isDocumentFragment(t))_n49=new Ao(),e.bind&&this.bindDocumentFragments(t,_n49);else{var _i34=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();_n49=new ki(_i34),e.bind&&this.bindElements(t,_n49);var _o22=t.attributes;for(var _t49=_o22.length-1;_t49>=0;_t49--){_n49._setAttribute(_o22[_t49].name,_o22[_t49].value);}}if(e.withChildren||void 0===e.withChildren){var _iteratorNormalCompletion66=true;var _didIteratorError66=false;var _iteratorError66=undefined;try{for(var _iterator66=this.domChildrenToView(t,e)[Symbol.iterator](),_step66;!(_iteratorNormalCompletion66=(_step66=_iterator66.next()).done);_iteratorNormalCompletion66=true){var _i35=_step66.value;_n49._appendChild(_i35);}}catch(err){_didIteratorError66=true;_iteratorError66=err;}finally{try{if(!_iteratorNormalCompletion66&&_iterator66["return"]!=null){_iterator66["return"]();}}finally{if(_didIteratorError66){throw _iteratorError66;}}}}return _n49;}}},{key:"domChildrenToView",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function domChildrenToView(t){var e,_n50,_i36,_o23,_args10=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function domChildrenToView$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:e=_args10.length>1&&_args10[1]!==undefined?_args10[1]:{};_n50=0;case 2:if(!(_n50<t.childNodes.length)){_context10.next=11;break;}_i36=t.childNodes[_n50],_o23=this.domToView(_i36,e);_context10.t0=null!==_o23;if(!_context10.t0){_context10.next=8;break;}_context10.next=8;return _o23;case 8:_n50++;_context10.next=2;break;case 11:case"end":return _context10.stop();}}},domChildrenToView,this);})},{key:"domSelectionToView",value:function domSelectionToView(t){if(1===t.rangeCount){var _e56=t.getRangeAt(0).startContainer;Do(_e56)&&(_e56=_e56.parentNode);var _n51=this.fakeSelectionToView(_e56);if(_n51)return _n51;}var e=this.isDomSelectionBackward(t),n=[];for(var _e57=0;_e57<t.rangeCount;_e57++){var _i37=t.getRangeAt(_e57),_o24=this.domRangeToView(_i37);_o24&&n.push(_o24);}return new no(n,{backward:e});}},{key:"domRangeToView",value:function domRangeToView(t){var e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new Xi(e,n):null;}},{key:"domPositionToView",value:function domPositionToView(t,e){if(qo(t,this.blockFiller))return this.domPositionToView(t.parentNode,ir(t));var n=this.mapDomToView(t);if(n&&n.is("uiElement"))return Zi._createBefore(n);if(Do(t)){if(Fo(t))return this.domPositionToView(t.parentNode,ir(t));var _n52=this.findCorrespondingViewText(t);var _i38=e;return _n52?(Bo(t)&&(_i38=(_i38-=Vo)<0?0:_i38),new Zi(_n52,_i38)):null;}if(0===e){var _e58=this.mapDomToView(t);if(_e58)return new Zi(_e58,0);}else{var _n53=t.childNodes[e-1],_i39=Do(_n53)?this.findCorrespondingViewText(_n53):this.mapDomToView(_n53);if(_i39&&_i39.parent)return new Zi(_i39.parent,_i39.index+1);}return null;}},{key:"mapDomToView",value:function mapDomToView(t){return this.getParentUIElement(t)||this._domToViewMapping.get(t);}},{key:"findCorrespondingViewText",value:function findCorrespondingViewText(t){if(Fo(t))return null;var e=this.getParentUIElement(t);if(e)return e;var n=t.previousSibling;if(n){if(!this.isElement(n))return null;var _t50=this.mapDomToView(n);if(_t50){return _t50.nextSibling instanceof fi?_t50.nextSibling:null;}}else{var _e59=this.mapDomToView(t.parentNode);if(_e59){var _t51=_e59.getChild(0);return _t51 instanceof fi?_t51:null;}}return null;}},{key:"mapViewToDom",value:function mapViewToDom(t){return this._viewToDomMapping.get(t);}},{key:"findCorrespondingDomText",value:function findCorrespondingDomText(t){var e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null;}},{key:"focus",value:function focus(t){var e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){var _nr$window=nr.window,_t52=_nr$window.scrollX,_n54=_nr$window.scrollY,_i40=[];ar(e,function(t){var e=t.scrollLeft,n=t.scrollTop;_i40.push([e,n]);}),e.focus(),ar(e,function(t){var _i40$shift=_i40.shift(),_i40$shift2=_slicedToArray(_i40$shift,2),e=_i40$shift2[0],n=_i40$shift2[1];t.scrollLeft=e,t.scrollTop=n;}),nr.window.scrollTo(_t52,_n54);}}},{key:"isElement",value:function isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE;}},{key:"isDocumentFragment",value:function isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE;}},{key:"isComment",value:function isComment(t){return t&&t.nodeType==Node.COMMENT_NODE;}},{key:"isDomSelectionBackward",value:function isDomSelectionBackward(t){if(t.isCollapsed)return!1;var e=document.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);var n=e.collapsed;return e.detach(),n;}},{key:"getParentUIElement",value:function getParentUIElement(t){var e=or(t);for(e.pop();e.length;){var _t53=e.pop(),_n55=this._domToViewMapping.get(_t53);if(_n55&&_n55.is("uiElement"))return _n55;}return null;}},{key:"isDomSelectionCorrect",value:function isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset);}},{key:"_isDomSelectionPositionCorrect",value:function _isDomSelectionPositionCorrect(t,e){if(Do(t)&&Bo(t)&&e<Vo)return!1;if(this.isElement(t)&&Bo(t.childNodes[e]))return!1;var n=this.mapDomToView(t);return!n||!n.is("uiElement");}},{key:"_processDataFromViewText",value:function _processDataFromViewText(t){var _this23=this;var e=t.data;if(t.getAncestors().some(function(t){return _this23.preElements.includes(t.name);}))return e;if(" "==e.charAt(0)){var _n56=this._getTouchingViewTextNode(t,!1);!(_n56&&this._nodeEndsWithSpace(_n56))&&_n56||(e=""+e.substr(1));}if(" "==e.charAt(e.length-1)){var _n57=this._getTouchingViewTextNode(t,!0);" "!=e.charAt(e.length-2)&&_n57&&" "!=_n57.data.charAt(0)||(e=e.substr(0,e.length-1)+"");}return e.replace(/ {2}/g," ");}},{key:"_nodeEndsWithSpace",value:function _nodeEndsWithSpace(t){var _this24=this;if(t.getAncestors().some(function(t){return _this24.preElements.includes(t.name);}))return!1;var e=this._processDataFromViewText(t);return" "==e.charAt(e.length-1);}},{key:"_processDataFromDomText",value:function _processDataFromDomText(t){var e=t.data;if(sr(t,this.preElements))return Uo(t);e=e.replace(/[ \n\t\r]{1,}/g," ");var n=this._getTouchingInlineDomNode(t,!1),i=this._getTouchingInlineDomNode(t,!0),o=this._checkShouldLeftTrimDomText(n),r=this._checkShouldRightTrimDomText(t,i);return o&&(e=e.replace(/^ /,"")),r&&(e=e.replace(/ $/,"")),e=(e=Uo(new Text(e))).replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(e)||!i||i.data&&" "==i.data.charAt(0))&&(e=e.replace(/\u00A0$/," ")),o&&(e=e.replace(/^\u00A0/," ")),e;}},{key:"_checkShouldLeftTrimDomText",value:function _checkShouldLeftTrimDomText(t){return!t||!!Wn(t)||/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1));}},{key:"_checkShouldRightTrimDomText",value:function _checkShouldRightTrimDomText(t,e){return!e&&!Bo(t);}},{key:"_getTouchingViewTextNode",value:function _getTouchingViewTextNode(t,e){var n=new Ji({startPosition:e?Zi._createAfter(t):Zi._createBefore(t),direction:e?"forward":"backward"});var _iteratorNormalCompletion67=true;var _didIteratorError67=false;var _iteratorError67=undefined;try{for(var _iterator67=n[Symbol.iterator](),_step67;!(_iteratorNormalCompletion67=(_step67=_iterator67.next()).done);_iteratorNormalCompletion67=true){var _t54=_step67.value;if(_t54.item.is("containerElement"))return null;if(_t54.item.is("br"))return null;if(_t54.item.is("textProxy"))return _t54.item;}}catch(err){_didIteratorError67=true;_iteratorError67=err;}finally{try{if(!_iteratorNormalCompletion67&&_iterator67["return"]!=null){_iterator67["return"]();}}finally{if(_didIteratorError67){throw _iteratorError67;}}}return null;}},{key:"_getTouchingInlineDomNode",value:function _getTouchingInlineDomNode(t,e){if(!t.parentNode)return null;var n=e?"nextNode":"previousNode",i=t.ownerDocument,o=or(t)[0],r=i.createTreeWalker(o,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function acceptNode(t){return Do(t)?NodeFilter.FILTER_ACCEPT:"BR"==t.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP;}});r.currentNode=t;var s=r[n]();if(null!==s){var _e60=function(t,e){var n=or(t),i=or(e);var o=0;for(;n[o]==i[o]&&n[o];){o++;}return 0===o?null:n[o-1];}(t,s);if(_e60&&!sr(t,this.blockElements,_e60)&&!sr(s,this.blockElements,_e60))return s;}return null;}}]);return rr;}();function sr(t,e,n){var i=or(t);return n&&(i=i.slice(i.indexOf(n)+1)),i.some(function(t){return t.tagName&&e.includes(t.tagName.toLowerCase());});}function ar(t,e){for(;t&&t!=nr.document;){e(t),t=t.parentNode;}}function cr(t){var e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e;}var lr=Li({},ei,{listenTo:function listenTo(t){var _ei$listenTo;for(var _len15=arguments.length,e=new Array(_len15>1?_len15-1:0),_key15=1;_key15<_len15;_key15++){e[_key15-1]=arguments[_key15];}if(Zo(t)||cr(t)){var _n58=this._getProxyEmitter(t)||new dr(t);_n58.attach.apply(_n58,e),t=_n58;}(_ei$listenTo=ei.listenTo).call.apply(_ei$listenTo,[this,t].concat(e));},stopListening:function stopListening(t,e,n){if(Zo(t)||cr(t)){var _e61=this._getProxyEmitter(t);if(!_e61)return;t=_e61;}ei.stopListening.call(this,t,e,n),t instanceof dr&&t.detach(e);},_getProxyEmitter:function _getProxyEmitter(t){return function(t,e){return t[Xn]&&t[Xn][e]?t[Xn][e].emitter:null;}(this,hr(t));}});var dr=function dr(t){_classCallCheck(this,dr);ni(this,hr(t)),this._domNode=t;};function hr(t){return t["data-ck-expando"]||(t["data-ck-expando"]=Jn());}Li(dr.prototype,ei,{attach:function attach(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(this._domListeners&&this._domListeners[t])return;var i=this._createDomListener(t,!!n.useCapture);this._domNode.addEventListener(t,i,!!n.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[t]=i;},detach:function detach(t){var e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener();},_createDomListener:function _createDomListener(t,e){var _this25=this;var n=function n(e){_this25.fire(t,e);};return n.removeListener=function(){_this25._domNode.removeEventListener(t,n,e),delete _this25._domListeners[t];},n;}});var ur=/*#__PURE__*/function(){function ur(t){_classCallCheck(this,ur);this.view=t,this.document=t.document,this.isEnabled=!1;}_createClass(ur,[{key:"enable",value:function enable(){this.isEnabled=!0;}},{key:"disable",value:function disable(){this.isEnabled=!1;}},{key:"destroy",value:function destroy(){this.disable(),this.stopListening();}}]);return ur;}();ci(ur,lr);var fr="__lodash_hash_undefined__";var mr=function mr(t){return this.__data__.set(t,fr),this;};var gr=function gr(t){return this.__data__.has(t);};function pr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Pt();++e<n;){this.add(t[e]);}}pr.prototype.add=pr.prototype.push=mr,pr.prototype.has=gr;var br=pr;var wr=function wr(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;){if(e(t[n],n,t))return!0;}return!1;};var kr=function kr(t,e){return t.has(e);},_r=1,vr=2;var yr=function yr(t,e,n,i,o,r){var s=n&_r,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=r.get(t);if(l&&r.get(e))return l==e;var d=-1,h=!0,u=n&vr?new br():void 0;for(r.set(t,e),r.set(e,t);++d<a;){var f=t[d],m=e[d];if(i)var g=s?i(m,f,d,e,t,r):i(f,m,d,t,e,r);if(void 0!==g){if(g)continue;h=!1;break;}if(u){if(!wr(e,function(t,e){if(!kr(u,e)&&(f===t||o(f,t,n,i,r)))return u.push(e);})){h=!1;break;}}else if(f!==m&&!o(f,m,n,i,r)){h=!1;break;}}return r["delete"](t),r["delete"](e),h;};var xr=function xr(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t];}),n;};var Ar=function Ar(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t;}),n;},Tr=1,Cr=2,Pr="[object Boolean]",Sr="[object Date]",Mr="[object Error]",Er="[object Map]",Ir="[object Number]",Nr="[object RegExp]",Or="[object Set]",Rr="[object String]",Dr="[object Symbol]",Lr="[object ArrayBuffer]",jr="[object DataView]",Vr=o?o.prototype:void 0,zr=Vr?Vr.valueOf:void 0;var Br=function Br(t,e,n,i,o,r,s){switch(n){case jr:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Lr:return!(t.byteLength!=e.byteLength||!r(new Ye(t),new Ye(e)));case Pr:case Sr:case Ir:return P(+t,+e);case Mr:return t.name==e.name&&t.message==e.message;case Nr:case Rr:return t==e+"";case Er:var a=xr;case Or:var c=i&Tr;if(a||(a=Ar),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;i|=Cr,s.set(t,e);var d=yr(a(t),a(e),i,o,r,s);return s["delete"](t),d;case Dr:if(zr)return zr.call(t)==zr.call(e);}return!1;},Fr=1,Ur=Object.prototype.hasOwnProperty;var Hr=function Hr(t,e,n,i,o,r){var s=n&Fr,a=Ie(t),c=a.length;if(c!=Ie(e).length&&!s)return!1;for(var l=c;l--;){var d=a[l];if(!(s?d in e:Ur.call(e,d)))return!1;}var h=r.get(t);if(h&&r.get(e))return h==e;var u=!0;r.set(t,e),r.set(e,t);for(var f=s;++l<c;){var m=t[d=a[l]],g=e[d];if(i)var p=s?i(g,m,d,e,t,r):i(m,g,d,t,e,r);if(!(void 0===p?m===g||o(m,g,n,i,r):p)){u=!1;break;}f||(f="constructor"==d);}if(u&&!f){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(u=!1);}return r["delete"](t),r["delete"](e),u;},qr=1,Wr="[object Arguments]",Yr="[object Array]",$r="[object Object]",Gr=Object.prototype.hasOwnProperty;var Qr=function Qr(t,e,n,i,o,r){var s=Wt(t),a=Wt(e),c=s?Yr:He(t),l=a?Yr:He(e),d=(c=c==Wr?$r:c)==$r,h=(l=l==Wr?$r:l)==$r,u=c==l;if(u&&Object(Yt.a)(t)){if(!Object(Yt.a)(e))return!1;s=!0,d=!1;}if(u&&!d)return r||(r=new It()),s||ie(t)?yr(t,e,n,i,o,r):Br(t,e,c,n,i,o,r);if(!(n&qr)){var f=d&&Gr.call(t,"__wrapped__"),m=h&&Gr.call(e,"__wrapped__");if(f||m){var g=f?t.value():t,p=m?e.value():e;return r||(r=new It()),o(g,p,n,i,r);}}return!!u&&(r||(r=new It()),Hr(t,e,n,i,o,r));};var Kr=function t(e,n,i,o,r){return e===n||(null==e||null==n||!w(e)&&!w(n)?e!=e&&n!=n:Qr(e,n,i,o,t,r));};var Jr=function Jr(t,e,n){var i=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===i?Kr(t,e,void 0,n):!!i;};var Zr=/*#__PURE__*/function(_ur){_inherits(Zr,_ur);function Zr(t){var _this26;_classCallCheck(this,Zr);_this26=_possibleConstructorReturn(this,_getPrototypeOf(Zr).call(this,t)),_this26._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},_this26.domConverter=t.domConverter,_this26.renderer=t._renderer,_this26._domElements=[],_this26._mutationObserver=new window.MutationObserver(_this26._onMutations.bind(_assertThisInitialized(_this26)));return _this26;}_createClass(Zr,[{key:"flush",value:function flush(){this._onMutations(this._mutationObserver.takeRecords());}},{key:"observe",value:function observe(t){this._domElements.push(t),this.isEnabled&&this._mutationObserver.observe(t,this._config);}},{key:"enable",value:function enable(){_get(_getPrototypeOf(Zr.prototype),"enable",this).call(this);var _iteratorNormalCompletion68=true;var _didIteratorError68=false;var _iteratorError68=undefined;try{for(var _iterator68=this._domElements[Symbol.iterator](),_step68;!(_iteratorNormalCompletion68=(_step68=_iterator68.next()).done);_iteratorNormalCompletion68=true){var _t55=_step68.value;this._mutationObserver.observe(_t55,this._config);}}catch(err){_didIteratorError68=true;_iteratorError68=err;}finally{try{if(!_iteratorNormalCompletion68&&_iterator68["return"]!=null){_iterator68["return"]();}}finally{if(_didIteratorError68){throw _iteratorError68;}}}}},{key:"disable",value:function disable(){_get(_getPrototypeOf(Zr.prototype),"disable",this).call(this),this._mutationObserver.disconnect();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Zr.prototype),"destroy",this).call(this),this._mutationObserver.disconnect();}},{key:"_onMutations",value:function _onMutations(t){if(0===t.length)return;var e=this.domConverter,n=new Map(),i=new Set();var _iteratorNormalCompletion69=true;var _didIteratorError69=false;var _iteratorError69=undefined;try{for(var _iterator69=t[Symbol.iterator](),_step69;!(_iteratorNormalCompletion69=(_step69=_iterator69.next()).done);_iteratorNormalCompletion69=true){var _n60=_step69.value;if("childList"===_n60.type){var _t57=e.mapDomToView(_n60.target);if(_t57&&_t57.is("uiElement"))continue;_t57&&!this._isBogusBrMutation(_n60)&&i.add(_t57);}}}catch(err){_didIteratorError69=true;_iteratorError69=err;}finally{try{if(!_iteratorNormalCompletion69&&_iterator69["return"]!=null){_iterator69["return"]();}}finally{if(_didIteratorError69){throw _iteratorError69;}}}var _iteratorNormalCompletion70=true;var _didIteratorError70=false;var _iteratorError70=undefined;try{for(var _iterator70=t[Symbol.iterator](),_step70;!(_iteratorNormalCompletion70=(_step70=_iterator70.next()).done);_iteratorNormalCompletion70=true){var _o25=_step70.value;var _t58=e.mapDomToView(_o25.target);if((!_t58||!_t58.is("uiElement"))&&"characterData"===_o25.type){var _t59=e.findCorrespondingViewText(_o25.target);_t59&&!i.has(_t59.parent)?n.set(_t59,{type:"text",oldText:_t59.data,newText:Uo(_o25.target),node:_t59}):!_t59&&Bo(_o25.target)&&i.add(e.mapDomToView(_o25.target.parentNode));}}}catch(err){_didIteratorError70=true;_iteratorError70=err;}finally{try{if(!_iteratorNormalCompletion70&&_iterator70["return"]!=null){_iterator70["return"]();}}finally{if(_didIteratorError70){throw _iteratorError70;}}}var o=[];var _iteratorNormalCompletion71=true;var _didIteratorError71=false;var _iteratorError71=undefined;try{for(var _iterator71=n.values()[Symbol.iterator](),_step71;!(_iteratorNormalCompletion71=(_step71=_iterator71.next()).done);_iteratorNormalCompletion71=true){var _t60=_step71.value;this.renderer.markToSync("text",_t60.node),o.push(_t60);}}catch(err){_didIteratorError71=true;_iteratorError71=err;}finally{try{if(!_iteratorNormalCompletion71&&_iterator71["return"]!=null){_iterator71["return"]();}}finally{if(_didIteratorError71){throw _iteratorError71;}}}var _iteratorNormalCompletion72=true;var _didIteratorError72=false;var _iteratorError72=undefined;try{for(var _iterator72=i[Symbol.iterator](),_step72;!(_iteratorNormalCompletion72=(_step72=_iterator72.next()).done);_iteratorNormalCompletion72=true){var _t61=_step72.value;var _n61=e.mapViewToDom(_t61),_i41=Array.from(_t61.getChildren()),_r10=Array.from(e.domChildrenToView(_n61,{withChildren:!1}));Jr(_i41,_r10,a)||(this.renderer.markToSync("children",_t61),o.push({type:"children",oldChildren:_i41,newChildren:_r10,node:_t61}));}}catch(err){_didIteratorError72=true;_iteratorError72=err;}finally{try{if(!_iteratorNormalCompletion72&&_iterator72["return"]!=null){_iterator72["return"]();}}finally{if(_didIteratorError72){throw _iteratorError72;}}}var r=t[0].target.ownerDocument.getSelection();var s=null;if(r&&r.anchorNode){var _t56=e.domPositionToView(r.anchorNode,r.anchorOffset),_n59=e.domPositionToView(r.focusNode,r.focusOffset);_t56&&_n59&&(s=new no(_t56)).setFocus(_n59);}function a(t,e){if(!Array.isArray(t))return t===e||!(!t.is("text")||!e.is("text"))&&t.data===e.data;}this.document.fire("mutations",o,s),this.view.forceRender();}},{key:"_isBogusBrMutation",value:function _isBogusBrMutation(t){var e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br");}}]);return Zr;}(ur);var Xr=/*#__PURE__*/function(){function Xr(t,e,n){_classCallCheck(this,Xr);this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,Li(this,n);}_createClass(Xr,[{key:"preventDefault",value:function preventDefault(){this.domEvent.preventDefault();}},{key:"stopPropagation",value:function stopPropagation(){this.domEvent.stopPropagation();}},{key:"target",get:function get(){return this.view.domConverter.mapDomToView(this.domTarget);}}]);return Xr;}();var ts=/*#__PURE__*/function(_ur2){_inherits(ts,_ur2);function ts(t){var _this27;_classCallCheck(this,ts);_this27=_possibleConstructorReturn(this,_getPrototypeOf(ts).call(this,t)),_this27.useCapture=!1;return _this27;}_createClass(ts,[{key:"observe",value:function observe(t){var _this28=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach(function(e){_this28.listenTo(t,e,function(t,e){_this28.isEnabled&&_this28.onDomEvent(e);},{useCapture:_this28.useCapture});});}},{key:"fire",value:function fire(t,e,n){this.isEnabled&&this.document.fire(t,new Xr(this.view,e,n));}}]);return ts;}(ur);var es=/*#__PURE__*/function(_ts){_inherits(es,_ts);function es(t){var _this29;_classCallCheck(this,es);_this29=_possibleConstructorReturn(this,_getPrototypeOf(es).call(this,t)),_this29.domEventType=["keydown","keyup"];return _this29;}_createClass(es,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t,{keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey||t.metaKey,shiftKey:t.shiftKey,get keystroke(){return wo(this);}});}}]);return es;}(ts);var ns=function ns(){return i.a.Date.now();},is="[object Symbol]";var os=function os(t){return"symbol"==_typeof(t)||w(t)&&g(t)==is;},rs=NaN,ss=/^\s+|\s+$/g,as=/^[-+]0x[0-9a-f]+$/i,cs=/^0b[01]+$/i,ls=/^0o[0-7]+$/i,ds=parseInt;var hs=function hs(t){if("number"==typeof t)return t;if(os(t))return rs;if(B(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=B(e)?e+"":e;}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ss,"");var n=cs.test(t);return n||ls.test(t)?ds(t.slice(2),n?2:8):as.test(t)?rs:+t;},us="Expected a function",fs=Math.max,ms=Math.min;var gs=function gs(t,e,n){var i,o,r,s,a,c,l=0,d=!1,h=!1,u=!0;if("function"!=typeof t)throw new TypeError(us);function f(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n);}function m(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-l>=r;}function g(){var t=ns();if(m(t))return p(t);a=setTimeout(g,function(t){var n=e-(t-c);return h?ms(n,r-(t-l)):n;}(t));}function p(t){return a=void 0,u&&i?f(t):(i=o=void 0,s);}function b(){var t=ns(),n=m(t);if(i=arguments,o=this,c=t,n){if(void 0===a)return function(t){return l=t,a=setTimeout(g,e),d?f(t):s;}(c);if(h)return clearTimeout(a),a=setTimeout(g,e),f(c);}return void 0===a&&(a=setTimeout(g,e)),s;}return e=hs(e)||0,B(n)&&(d=!!n.leading,r=(h="maxWait"in n)?fs(hs(n.maxWait)||0,e):r,u="trailing"in n?!!n.trailing:u),b.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=c=o=a=void 0;},b.flush=function(){return void 0===a?s:p(ns());},b;};var ps=/*#__PURE__*/function(_ur3){_inherits(ps,_ur3);function ps(t){var _this30;_classCallCheck(this,ps);_this30=_possibleConstructorReturn(this,_getPrototypeOf(ps).call(this,t)),_this30._fireSelectionChangeDoneDebounced=gs(function(t){return _this30.document.fire("selectionChangeDone",t);},200);return _this30;}_createClass(ps,[{key:"observe",value:function observe(){var _this31=this;var t=this.document;t.on("keydown",function(e,n){t.selection.isFake&&function(t){return t==bo.arrowright||t==bo.arrowleft||t==bo.arrowup||t==bo.arrowdown;}(n.keyCode)&&_this31.isEnabled&&(n.preventDefault(),_this31._handleSelectionMove(n.keyCode));},{priority:"lowest"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(ps.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionMove",value:function _handleSelectionMove(t){var e=this.document.selection,n=new no(e.getRanges(),{backward:e.isBackward,fake:!1});t!=bo.arrowleft&&t!=bo.arrowup||n.setTo(n.getFirstPosition()),t!=bo.arrowright&&t!=bo.arrowdown||n.setTo(n.getLastPosition());var i={oldSelection:e,newSelection:n,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i);}}]);return ps;}(ur);var bs=/*#__PURE__*/function(_ur4){_inherits(bs,_ur4);function bs(t){var _this32;_classCallCheck(this,bs);_this32=_possibleConstructorReturn(this,_getPrototypeOf(bs).call(this,t)),_this32.mutationObserver=t.getObserver(Zr),_this32.selection=_this32.document.selection,_this32.domConverter=t.domConverter,_this32._documents=new WeakSet(),_this32._fireSelectionChangeDoneDebounced=gs(function(t){return _this32.document.fire("selectionChangeDone",t);},200),_this32._clearInfiniteLoopInterval=setInterval(function(){return _this32._clearInfiniteLoop();},1e3),_this32._loopbackCounter=0;return _this32;}_createClass(bs,[{key:"observe",value:function observe(t){var _this33=this;var e=t.ownerDocument;this._documents.has(e)||(this.listenTo(e,"selectionchange",function(){_this33._handleSelectionChange(e);}),this._documents.add(e));}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(bs.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionChange",value:function _handleSelectionChange(t){if(!this.isEnabled||!this.document.isFocused&&!this.document.isReadOnly)return;this.mutationObserver.flush();var e=t.defaultView.getSelection(),n=this.domConverter.domSelectionToView(e);if(!(this.selection.isEqual(n)&&this.domConverter.isDomSelectionCorrect(e)||++this._loopbackCounter>60))if(this.selection.isSimilar(n))this.view.forceRender();else{var _t62={oldSelection:this.selection,newSelection:n,domSelection:e};this.document.fire("selectionChange",_t62),this._fireSelectionChangeDoneDebounced(_t62);}}},{key:"_clearInfiniteLoop",value:function _clearInfiniteLoop(){this._loopbackCounter=0;}}]);return bs;}(ur);var ws=/*#__PURE__*/function(_ts2){_inherits(ws,_ts2);function ws(t){var _this34;_classCallCheck(this,ws);_this34=_possibleConstructorReturn(this,_getPrototypeOf(ws).call(this,t)),_this34.domEventType=["focus","blur"],_this34.useCapture=!0;var e=_this34.document;e.on("focus",function(){e.isFocused=!0,_this34._renderTimeoutId=setTimeout(function(){return t.forceRender();},50);}),e.on("blur",function(n,i){var o=e.selection.editableElement;null!==o&&o!==i.target||(e.isFocused=!1,t.forceRender());});return _this34;}_createClass(ws,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}},{key:"destroy",value:function destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),_get(_getPrototypeOf(ws.prototype),"destroy",this).call(this);}}]);return ws;}(ts);var ks=/*#__PURE__*/function(_ts3){_inherits(ks,_ts3);function ks(t){var _this35;_classCallCheck(this,ks);_this35=_possibleConstructorReturn(this,_getPrototypeOf(ks).call(this,t)),_this35.domEventType=["compositionstart","compositionupdate","compositionend"];var e=_this35.document;e.on("compositionstart",function(){e.isComposing=!0;}),e.on("compositionend",function(){e.isComposing=!1;});return _this35;}_createClass(ks,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return ks;}(ts);var _s=/*#__PURE__*/function(_ts4){_inherits(_s,_ts4);function _s(t){var _this36;_classCallCheck(this,_s);_this36=_possibleConstructorReturn(this,_getPrototypeOf(_s).call(this,t)),_this36.domEventType=["beforeinput"];return _this36;}_createClass(_s,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return _s;}(ts);function vs(t){return"[object Range]"==Object.prototype.toString.apply(t);}function ys(t){var e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)};}var xs=["top","right","bottom","left","width","height"];var As=/*#__PURE__*/function(){function As(t){_classCallCheck(this,As);var e=vs(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Wn(t)||e)Ts(this,e?As.getDomRangeRects(t)[0]:t.getBoundingClientRect());else if(cr(t)){var _e62=t.innerWidth,_n62=t.innerHeight;Ts(this,{top:0,right:_e62,bottom:_n62,left:0,width:_e62,height:_n62});}else Ts(this,t);}_createClass(As,[{key:"clone",value:function clone(){return new As(this);}},{key:"moveTo",value:function moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this;}},{key:"moveBy",value:function moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this;}},{key:"getIntersection",value:function getIntersection(t){var e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left)};return e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0?null:new As(e);}},{key:"getIntersectionArea",value:function getIntersectionArea(t){var e=this.getIntersection(t);return e?e.getArea():0;}},{key:"getArea",value:function getArea(){return this.width*this.height;}},{key:"getVisible",value:function getVisible(){var t=this._source;var e=this.clone();if(!Cs(t)){var _n63=t.parentNode||t.commonAncestorContainer;for(;_n63&&!Cs(_n63);){var _t63=new As(_n63),_i42=e.getIntersection(_t63);if(!_i42)return null;_i42.getArea()<e.getArea()&&(e=_i42),_n63=_n63.parentNode;}}return e;}},{key:"isEqual",value:function isEqual(t){for(var _i43=0,_xs=xs;_i43<_xs.length;_i43++){var _e63=_xs[_i43];if(this[_e63]!==t[_e63])return!1;}return!0;}},{key:"contains",value:function contains(t){var e=this.getIntersection(t);return!(!e||!e.isEqual(t));}},{key:"excludeScrollbarsAndBorders",value:function excludeScrollbarsAndBorders(){var t=this._source;var e,n;if(cr(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight;else{var _i44=ys(this._source);e=t.offsetWidth-t.clientWidth,n=t.offsetHeight-t.clientHeight,this.moveBy(_i44.left,_i44.top);}return this.width-=e,this.right-=e,this.height-=n,this.bottom-=n,this;}}],[{key:"getDomRangeRects",value:function getDomRangeRects(t){var e=[],n=Array.from(t.getClientRects());if(n.length){for(var _i45=0,_n64=n;_i45<_n64.length;_i45++){var _t64=_n64[_i45];e.push(new As(_t64));}}else{var _n65=t.startContainer;Do(_n65)&&(_n65=_n65.parentNode);var _i46=new As(_n65.getBoundingClientRect());_i46.right=_i46.left,_i46.width=0,e.push(_i46);}return e;}}]);return As;}();function Ts(t,e){for(var _i47=0,_xs2=xs;_i47<_xs2.length;_i47++){var _n66=_xs2[_i47];t[_n66]=e[_n66];}}function Cs(t){return!!Wn(t)&&t===t.ownerDocument.body;}function Ps(_ref){var t=_ref.target,_ref$viewportOffset=_ref.viewportOffset,e=_ref$viewportOffset===void 0?0:_ref$viewportOffset;var n=Rs(t);var i=n,o=null;for(;i;){var _r11=void 0;Ms(_r11=Ds(i==n?t:o),function(){return Ls(t,i);});var _s8=Ls(t,i);if(Ss(i,_s8,e),i.parent!=i){if(o=i.frameElement,i=i.parent,!o)return;}else i=null;}}function Ss(t,e,n){var i=e.clone().moveBy(0,n),o=e.clone().moveBy(0,-n),r=new As(t).excludeScrollbarsAndBorders();if(![o,i].every(function(t){return r.contains(t);})){var _s9=t.scrollX,_a7=t.scrollY;Is(o,r)?_a7-=r.top-e.top+n:Es(i,r)&&(_a7+=e.bottom-r.bottom+n),Ns(e,r)?_s9-=r.left-e.left+n:Os(e,r)&&(_s9+=e.right-r.right+n),t.scrollTo(_s9,_a7);}}function Ms(t,e){var n=Rs(t);var i,o;for(;t!=n.document.body;){o=e(),(i=new As(t).excludeScrollbarsAndBorders()).contains(o)||(Is(o,i)?t.scrollTop-=i.top-o.top:Es(o,i)&&(t.scrollTop+=o.bottom-i.bottom),Ns(o,i)?t.scrollLeft-=i.left-o.left:Os(o,i)&&(t.scrollLeft+=o.right-i.right)),t=t.parentNode;}}function Es(t,e){return t.bottom>e.bottom;}function Is(t,e){return t.top<e.top;}function Ns(t,e){return t.left<e.left;}function Os(t,e){return t.right>e.right;}function Rs(t){return vs(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView;}function Ds(t){if(vs(t)){var _e64=t.commonAncestorContainer;return Do(_e64)&&(_e64=_e64.parentNode),_e64;}return t.parentNode;}function Ls(t,e){var n=Rs(t),i=new As(t);if(n===e)return i;{var _t65=n;for(;_t65!=e;){var _e65=_t65.frameElement,_n67=new As(_e65).excludeScrollbarsAndBorders();i.moveBy(_n67.left,_n67.top),_t65=_t65.parent;}}return i;}Object.assign({},{scrollViewportToShowTarget:Ps,scrollAncestorsToShowTarget:function scrollAncestorsToShowTarget(t){Ms(Ds(t),function(){return new As(t);});}});var js=/*#__PURE__*/function(){function js(){var _this37=this;_classCallCheck(this,js);this.document=new ro(),this.domConverter=new rr(),this.domRoots=new Map(),this.set("isRenderingInProgress",!1),this._renderer=new Xo(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap(),this._observers=new Map(),this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new To(this.document),this.addObserver(Zr),this.addObserver(bs),this.addObserver(ws),this.addObserver(es),this.addObserver(ps),this.addObserver(ks),mo.isAndroid&&this.addObserver(_s),function(t){t.document.on("keydown",Wo);}(this),yo(this),this.on("render",function(){_this37._render(),_this37.document.fire("layoutChanged"),_this37._hasChangedSinceTheLastRendering=!1;}),this.listenTo(this.document.selection,"change",function(){_this37._hasChangedSinceTheLastRendering=!0;});}_createClass(js,[{key:"attachDomRoot",value:function attachDomRoot(t){var _this38=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";var n=this.document.getRoot(e);n._name=t.tagName.toLowerCase();var i={};for(var _i48=0,_Array$from2=Array.from(t.attributes);_i48<_Array$from2.length;_i48++){var _ref3=_Array$from2[_i48];var _e66=_ref3.name,_o26=_ref3.value;i[_e66]=_o26,"class"===_e66?this._writer.addClass(_o26.split(" "),n):this._writer.setAttribute(_e66,_o26,n);}this._initialDomRootAttributes.set(t,i);var o=function o(){_this38._writer.setAttribute("contenteditable",!n.isReadOnly,n),n.isReadOnly?_this38._writer.addClass("ck-read-only",n):_this38._writer.removeClass("ck-read-only",n);};o(),this.domRoots.set(e,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",function(t,e){return _this38._renderer.markToSync("children",e);}),n.on("change:attributes",function(t,e){return _this38._renderer.markToSync("attributes",e);}),n.on("change:text",function(t,e){return _this38._renderer.markToSync("text",e);}),n.on("change:isReadOnly",function(){return _this38.change(o);}),n.on("change",function(){_this38._hasChangedSinceTheLastRendering=!0;});var _iteratorNormalCompletion73=true;var _didIteratorError73=false;var _iteratorError73=undefined;try{for(var _iterator73=this._observers.values()[Symbol.iterator](),_step73;!(_iteratorNormalCompletion73=(_step73=_iterator73.next()).done);_iteratorNormalCompletion73=true){var _n68=_step73.value;_n68.observe(t,e);}}catch(err){_didIteratorError73=true;_iteratorError73=err;}finally{try{if(!_iteratorNormalCompletion73&&_iterator73["return"]!=null){_iterator73["return"]();}}finally{if(_didIteratorError73){throw _iteratorError73;}}}}},{key:"detachDomRoot",value:function detachDomRoot(t){var e=this.domRoots.get(t);Array.from(e.attributes).forEach(function(_ref4){var t=_ref4.name;return e.removeAttribute(t);});var n=this._initialDomRootAttributes.get(e);for(var _t66 in n){e.setAttribute(_t66,n[_t66]);}this.domRoots["delete"](t),this.domConverter.unbindDomElement(e);}},{key:"getDomRoot",value:function getDomRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.domRoots.get(t);}},{key:"addObserver",value:function addObserver(t){var e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);var _iteratorNormalCompletion74=true;var _didIteratorError74=false;var _iteratorError74=undefined;try{for(var _iterator74=this.domRoots[Symbol.iterator](),_step74;!(_iteratorNormalCompletion74=(_step74=_iterator74.next()).done);_iteratorNormalCompletion74=true){var _step74$value=_slicedToArray(_step74.value,2),_t67=_step74$value[0],_n69=_step74$value[1];e.observe(_n69,_t67);}}catch(err){_didIteratorError74=true;_iteratorError74=err;}finally{try{if(!_iteratorNormalCompletion74&&_iterator74["return"]!=null){_iterator74["return"]();}}finally{if(_didIteratorError74){throw _iteratorError74;}}}return e.enable(),e;}},{key:"getObserver",value:function getObserver(t){return this._observers.get(t);}},{key:"disableObservers",value:function disableObservers(){var _iteratorNormalCompletion75=true;var _didIteratorError75=false;var _iteratorError75=undefined;try{for(var _iterator75=this._observers.values()[Symbol.iterator](),_step75;!(_iteratorNormalCompletion75=(_step75=_iterator75.next()).done);_iteratorNormalCompletion75=true){var _t68=_step75.value;_t68.disable();}}catch(err){_didIteratorError75=true;_iteratorError75=err;}finally{try{if(!_iteratorNormalCompletion75&&_iterator75["return"]!=null){_iterator75["return"]();}}finally{if(_didIteratorError75){throw _iteratorError75;}}}}},{key:"enableObservers",value:function enableObservers(){var _iteratorNormalCompletion76=true;var _didIteratorError76=false;var _iteratorError76=undefined;try{for(var _iterator76=this._observers.values()[Symbol.iterator](),_step76;!(_iteratorNormalCompletion76=(_step76=_iterator76.next()).done);_iteratorNormalCompletion76=true){var _t69=_step76.value;_t69.enable();}}catch(err){_didIteratorError76=true;_iteratorError76=err;}finally{try{if(!_iteratorNormalCompletion76&&_iterator76["return"]!=null){_iterator76["return"]();}}finally{if(_didIteratorError76){throw _iteratorError76;}}}}},{key:"scrollToTheSelection",value:function scrollToTheSelection(){var t=this.document.selection.getFirstRange();t&&Ps({target:this.domConverter.viewRangeToDom(t),viewportOffset:20});}},{key:"focus",value:function focus(){if(!this.document.isFocused){var _t70=this.document.selection.editableElement;_t70&&(this.domConverter.focus(_t70),this.forceRender());}}},{key:"change",value:function change(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new Gn.b("cannot-change-view-tree: Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. This may cause some unexpected behavior and inconsistency between the DOM and the view.",this);if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;var e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e;}},{key:"forceRender",value:function forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change(function(){});}},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion77=true;var _didIteratorError77=false;var _iteratorError77=undefined;try{for(var _iterator77=this._observers.values()[Symbol.iterator](),_step77;!(_iteratorNormalCompletion77=(_step77=_iterator77.next()).done);_iteratorNormalCompletion77=true){var _t71=_step77.value;_t71.destroy();}}catch(err){_didIteratorError77=true;_iteratorError77=err;}finally{try{if(!_iteratorNormalCompletion77&&_iterator77["return"]!=null){_iterator77["return"]();}}finally{if(_didIteratorError77){throw _iteratorError77;}}}this.document.destroy(),this.stopListening();}},{key:"createPositionAt",value:function createPositionAt(t,e){return Zi._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Zi._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Zi._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new Xi(t,e);}},{key:"createRangeOn",value:function createRangeOn(t){return Xi._createOn(t);}},{key:"createRangeIn",value:function createRangeIn(t){return Xi._createIn(t);}},{key:"createSelection",value:function createSelection(t,e,n){return new no(t,e,n);}},{key:"_disableRendering",value:function _disableRendering(t){this._renderingDisabled=t,0==t&&this.change(function(){});}},{key:"_render",value:function _render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1;}}]);return js;}();function Vs(t){return T(t)?gi(t):new Map(t);}ci(js,Fi);var zs=/*#__PURE__*/function(){function zs(t){_classCallCheck(this,zs);this.parent=null,this._attrs=Vs(t);}_createClass(zs,[{key:"getPath",value:function getPath(){var t=[];var e=this;for(;e.parent;){t.unshift(e.startOffset),e=e.parent;}return t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var n=t.includeSelf?this:this.parent;for(;n;){e[t.parentFirst?"push":"unshift"](n),n=n.parent;}return e;}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this.getAncestors(e),i=t.getAncestors(e);var o=0;for(;n[o]==i[o]&&n[o];){o++;}return 0===o?null:n[o-1];}},{key:"isBefore",value:function isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),n=t.getPath(),i=li(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i];}}},{key:"isAfter",value:function isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t);}},{key:"hasAttribute",value:function hasAttribute(t){return this._attrs.has(t);}},{key:"getAttribute",value:function getAttribute(t){return this._attrs.get(t);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"toJSON",value:function toJSON(){var t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce(function(t,e){return t[e[0]]=e[1],t;},{})),t;}},{key:"is",value:function is(t){return"node"==t||"model:node"==t;}},{key:"_clone",value:function _clone(){return new zs(this._attrs);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_setAttribute",value:function _setAttribute(t,e){this._attrs.set(t,e);}},{key:"_setAttributesTo",value:function _setAttributesTo(t){this._attrs=Vs(t);}},{key:"_removeAttribute",value:function _removeAttribute(t){return this._attrs["delete"](t);}},{key:"_clearAttributes",value:function _clearAttributes(){this._attrs.clear();}},{key:"index",get:function get(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new Gn.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return t;}},{key:"startOffset",get:function get(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new Gn.b("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return t;}},{key:"offsetSize",get:function get(){return 1;}},{key:"endOffset",get:function get(){return this.parent?this.startOffset+this.offsetSize:null;}},{key:"nextSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null;}},{key:"previousSibling",get:function get(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null;}},{key:"root",get:function get(){var t=this;for(;t.parent;){t=t.parent;}return t;}},{key:"document",get:function get(){return this.root==this?null:this.root.document||null;}}]);return zs;}();var Bs=/*#__PURE__*/function(_zs){_inherits(Bs,_zs);function Bs(t,e){var _this39;_classCallCheck(this,Bs);_this39=_possibleConstructorReturn(this,_getPrototypeOf(Bs).call(this,e)),_this39._data=t||"";return _this39;}_createClass(Bs,[{key:"is",value:function is(t){return"text"==t||"model:text"==t||_get(_getPrototypeOf(Bs.prototype),"is",this).call(this,t);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(Bs.prototype),"toJSON",this).call(this);return t.data=this.data,t;}},{key:"_clone",value:function _clone(){return new Bs(this.data,this.getAttributes());}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"data",get:function get(){return this._data;}}],[{key:"fromJSON",value:function fromJSON(t){return new Bs(t.data,t.attributes);}}]);return Bs;}(zs);var Fs=/*#__PURE__*/function(){function Fs(t,e,n){_classCallCheck(this,Fs);if(this.textNode=t,e<0||e>t.offsetSize)throw new Gn.b("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(n<0||e+n>t.offsetSize)throw new Gn.b("model-textproxy-wrong-length: Given length value is incorrect.",this);this.data=t.data.substring(e,e+n),this.offsetInText=e;}_createClass(Fs,[{key:"is",value:function is(t){return"textProxy"==t||"model:textProxy"==t;}},{key:"getPath",value:function getPath(){var t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t;}},{key:"getAncestors",value:function getAncestors(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:!1,parentFirst:!1};var e=[];var n=t.includeSelf?this:this.parent;for(;n;){e[t.parentFirst?"push":"unshift"](n),n=n.parent;}return e;}},{key:"hasAttribute",value:function hasAttribute(t){return this.textNode.hasAttribute(t);}},{key:"getAttribute",value:function getAttribute(t){return this.textNode.getAttribute(t);}},{key:"getAttributes",value:function getAttributes(){return this.textNode.getAttributes();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this.textNode.getAttributeKeys();}},{key:"startOffset",get:function get(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"endOffset",get:function get(){return null!==this.startOffset?this.startOffset+this.offsetSize:null;}},{key:"isPartial",get:function get(){return this.offsetSize!==this.textNode.offsetSize;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"document",get:function get(){return this.textNode.document;}}]);return Fs;}();var Us=/*#__PURE__*/function(){function Us(t){_classCallCheck(this,Us);this._nodes=[],t&&this._insertNodes(0,t);}_createClass(Us,[{key:Symbol.iterator,value:function value(){return this._nodes[Symbol.iterator]();}},{key:"getNode",value:function getNode(t){return this._nodes[t]||null;}},{key:"getNodeIndex",value:function getNodeIndex(t){var e=this._nodes.indexOf(t);return-1==e?null:e;}},{key:"getNodeStartOffset",value:function getNodeStartOffset(t){var e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce(function(t,e){return t+e.offsetSize;},0);}},{key:"indexToOffset",value:function indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;var e=this._nodes[t];if(!e)throw new Gn.b("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this);return this.getNodeStartOffset(e);}},{key:"offsetToIndex",value:function offsetToIndex(t){var e=0;var _iteratorNormalCompletion78=true;var _didIteratorError78=false;var _iteratorError78=undefined;try{for(var _iterator78=this._nodes[Symbol.iterator](),_step78;!(_iteratorNormalCompletion78=(_step78=_iterator78.next()).done);_iteratorNormalCompletion78=true){var _n70=_step78.value;if(t>=e&&t<e+_n70.offsetSize)return this.getNodeIndex(_n70);e+=_n70.offsetSize;}}catch(err){_didIteratorError78=true;_iteratorError78=err;}finally{try{if(!_iteratorNormalCompletion78&&_iterator78["return"]!=null){_iterator78["return"]();}}finally{if(_didIteratorError78){throw _iteratorError78;}}}if(e!=t)throw new Gn.b("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:t,nodeList:this});return this.length;}},{key:"_insertNodes",value:function _insertNodes(t,e){var _this$_nodes;var _iteratorNormalCompletion79=true;var _didIteratorError79=false;var _iteratorError79=undefined;try{for(var _iterator79=e[Symbol.iterator](),_step79;!(_iteratorNormalCompletion79=(_step79=_iterator79.next()).done);_iteratorNormalCompletion79=true){var _t72=_step79.value;if(!(_t72 instanceof zs))throw new Gn.b("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this);}}catch(err){_didIteratorError79=true;_iteratorError79=err;}finally{try{if(!_iteratorNormalCompletion79&&_iterator79["return"]!=null){_iterator79["return"]();}}finally{if(_didIteratorError79){throw _iteratorError79;}}}(_this$_nodes=this._nodes).splice.apply(_this$_nodes,[t,0].concat(_toConsumableArray(e)));}},{key:"_removeNodes",value:function _removeNodes(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this._nodes.splice(t,e);}},{key:"toJSON",value:function toJSON(){return this._nodes.map(function(t){return t.toJSON();});}},{key:"length",get:function get(){return this._nodes.length;}},{key:"maxOffset",get:function get(){return this._nodes.reduce(function(t,e){return t+e.offsetSize;},0);}}]);return Us;}();var Hs=/*#__PURE__*/function(_zs2){_inherits(Hs,_zs2);function Hs(t,e,n){var _this40;_classCallCheck(this,Hs);_this40=_possibleConstructorReturn(this,_getPrototypeOf(Hs).call(this,e)),_this40.name=t,_this40._children=new Us(),n&&_this40._insertChild(0,n);return _this40;}_createClass(Hs,[{key:"is",value:function is(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=t.replace(/^model:/,"");return e?"element"==n&&e==this.name:"element"==n||n==this.name||_get(_getPrototypeOf(Hs.prototype),"is",this).call(this,t);}},{key:"getChild",value:function getChild(t){return this._children.getNode(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.getNodeIndex(t);}},{key:"getChildStartOffset",value:function getChildStartOffset(t){return this._children.getNodeStartOffset(t);}},{key:"offsetToIndex",value:function offsetToIndex(t){return this._children.offsetToIndex(t);}},{key:"getNodeByPath",value:function getNodeByPath(t){var e=this;var _iteratorNormalCompletion80=true;var _didIteratorError80=false;var _iteratorError80=undefined;try{for(var _iterator80=t[Symbol.iterator](),_step80;!(_iteratorNormalCompletion80=(_step80=_iterator80.next()).done);_iteratorNormalCompletion80=true){var _n71=_step80.value;e=e.getChild(e.offsetToIndex(_n71));}}catch(err){_didIteratorError80=true;_iteratorError80=err;}finally{try{if(!_iteratorNormalCompletion80&&_iterator80["return"]!=null){_iterator80["return"]();}}finally{if(_didIteratorError80){throw _iteratorError80;}}}return e;}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(Hs.prototype),"toJSON",this).call(this);if(t.name=this.name,this._children.length>0){t.children=[];var _iteratorNormalCompletion81=true;var _didIteratorError81=false;var _iteratorError81=undefined;try{for(var _iterator81=this._children[Symbol.iterator](),_step81;!(_iteratorNormalCompletion81=(_step81=_iterator81.next()).done);_iteratorNormalCompletion81=true){var _e67=_step81.value;t.children.push(_e67.toJSON());}}catch(err){_didIteratorError81=true;_iteratorError81=err;}finally{try{if(!_iteratorNormalCompletion81&&_iterator81["return"]!=null){_iterator81["return"]();}}finally{if(_didIteratorError81){throw _iteratorError81;}}}}return t;}},{key:"_clone",value:function _clone(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var e=t?Array.from(this._children).map(function(t){return t._clone(!0);}):null;return new Hs(this.name,this.getAttributes(),e);}},{key:"_appendChild",value:function _appendChild(t){this._insertChild(this.childCount,t);}},{key:"_insertChild",value:function _insertChild(t,e){var n=function(t){if("string"==typeof t)return[new Bs(t)];pi(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new Bs(t):t instanceof Fs?new Bs(t.data,t.getAttributes()):t;});}(e);var _iteratorNormalCompletion82=true;var _didIteratorError82=false;var _iteratorError82=undefined;try{for(var _iterator82=n[Symbol.iterator](),_step82;!(_iteratorNormalCompletion82=(_step82=_iterator82.next()).done);_iteratorNormalCompletion82=true){var _t73=_step82.value;null!==_t73.parent&&_t73._remove(),_t73.parent=this;}}catch(err){_didIteratorError82=true;_iteratorError82=err;}finally{try{if(!_iteratorNormalCompletion82&&_iterator82["return"]!=null){_iterator82["return"]();}}finally{if(_didIteratorError82){throw _iteratorError82;}}}this._children._insertNodes(t,n);}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=this._children._removeNodes(t,e);var _iteratorNormalCompletion83=true;var _didIteratorError83=false;var _iteratorError83=undefined;try{for(var _iterator83=n[Symbol.iterator](),_step83;!(_iteratorNormalCompletion83=(_step83=_iterator83.next()).done);_iteratorNormalCompletion83=true){var _t74=_step83.value;_t74.parent=null;}}catch(err){_didIteratorError83=true;_iteratorError83=err;}finally{try{if(!_iteratorNormalCompletion83&&_iterator83["return"]!=null){_iterator83["return"]();}}finally{if(_didIteratorError83){throw _iteratorError83;}}}return n;}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}}],[{key:"fromJSON",value:function fromJSON(t){var e=null;if(t.children){e=[];var _iteratorNormalCompletion84=true;var _didIteratorError84=false;var _iteratorError84=undefined;try{for(var _iterator84=t.children[Symbol.iterator](),_step84;!(_iteratorNormalCompletion84=(_step84=_iterator84.next()).done);_iteratorNormalCompletion84=true){var _n72=_step84.value;_n72.name?e.push(Hs.fromJSON(_n72)):e.push(Bs.fromJSON(_n72));}}catch(err){_didIteratorError84=true;_iteratorError84=err;}finally{try{if(!_iteratorNormalCompletion84&&_iterator84["return"]!=null){_iterator84["return"]();}}finally{if(_didIteratorError84){throw _iteratorError84;}}}}return new Hs(t.name,t.attributes,e);}}]);return Hs;}(zs);var qs=/*#__PURE__*/function(){function qs(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,qs);if(!t.boundaries&&!t.startPosition)throw new Gn.b("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);var e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new Gn.b("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this.position=t.startPosition.clone():this.position=$s._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent;}_createClass(qs,[{key:Symbol.iterator,value:function value(){return this;}},{key:"skip",value:function skip(t){var e,n,i,o;do{var _this$next2;i=this.position,o=this._visitedParent,(_this$next2=this.next(),e=_this$next2.done,n=_this$next2.value,_this$next2);}while(!e&&t(n));e||(this.position=i,this._visitedParent=o);}},{key:"next",value:function next(){return"forward"==this.direction?this._next():this._previous();}},{key:"_next",value:function _next(){var t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};var i=e.textNode?e.textNode:e.nodeAfter;if(i instanceof Hs)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=i),this.position=e,Ws("elementStart",i,t,e,1);if(i instanceof Bs){var _o27;if(this.singleCharacters)_o27=1;else{var _t75=i.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<_t75&&(_t75=this.boundaries.end.offset),_o27=_t75-e.offset;}var _r12=e.offset-i.startOffset,_s10=new Fs(i,_r12,_o27);return e.offset+=_o27,this.position=e,Ws("text",_s10,t,e,_o27);}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Ws("elementEnd",n,t,e);}},{key:"_previous",value:function _previous(){var t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};var i=e.textNode?e.textNode:e.nodeBefore;if(i instanceof Hs)return e.offset--,this.shallow?(this.position=e,Ws("elementStart",i,t,e,1)):(e.path.push(i.maxOffset),this.position=e,this._visitedParent=i,this.ignoreElementEnd?this._previous():Ws("elementEnd",i,t,e));if(i instanceof Bs){var _o28;if(this.singleCharacters)_o28=1;else{var _t76=i.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>_t76&&(_t76=this.boundaries.start.offset),_o28=e.offset-_t76;}var _r13=e.offset-i.startOffset,_s11=new Fs(i,_r13-_o28,_o28);return e.offset-=_o28,this.position=e,Ws("text",_s11,t,e,_o28);}return e.path.pop(),this.position=e,this._visitedParent=n.parent,Ws("elementStart",n,t,e,1);}}]);return qs;}();function Ws(t,e,n,i,o){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:o}};}var Ys=function Ys(t){var e=null==t?0:t.length;return e?t[e-1]:void 0;};var $s=/*#__PURE__*/function(){function $s(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,$s);if(!t.is("element")&&!t.is("documentFragment"))throw new Gn.b("model-position-root-invalid: Position root invalid.",t);if(!(e instanceof Array)||0===e.length)throw new Gn.b("model-position-path-incorrect-format: Position path must be an array with at least one item.",t,{path:e});e=t.getPath().concat(e),t=t.root,this.root=t,this.path=e,this.stickiness=n;}_createClass($s,[{key:"compareWith",value:function compareWith(t){if(this.root!=t.root)return"different";var e=li(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after";}}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e.startPosition=this;var n=new qs(e);return n.skip(t),n.position;}},{key:"getParentPath",value:function getParentPath(){return this.path.slice(0,-1);}},{key:"getAncestors",value:function getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0});}},{key:"getCommonPath",value:function getCommonPath(t){if(this.root!=t.root)return[];var e=li(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n);}},{key:"getCommonAncestor",value:function getCommonAncestor(t){var e=this.getAncestors(),n=t.getAncestors();var i=0;for(;e[i]==n[i]&&e[i];){i++;}return 0===i?null:e[i-1];}},{key:"getShiftedBy",value:function getShiftedBy(t){var e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e;}},{key:"isAfter",value:function isAfter(t){return"after"==this.compareWith(t);}},{key:"isBefore",value:function isBefore(t){return"before"==this.compareWith(t);}},{key:"isEqual",value:function isEqual(t){return"same"==this.compareWith(t);}},{key:"isTouching",value:function isTouching(t){var e=null,n=null;switch(this.compareWith(t)){case"same":return!0;case"before":e=$s._createAt(this),n=$s._createAt(t);break;case"after":e=$s._createAt(t),n=$s._createAt(this);break;default:return!1;}var i=e.parent;for(;e.path.length+n.path.length;){if(e.isEqual(n))return!0;if(e.path.length>n.path.length){if(e.offset!==i.maxOffset)return!1;e.path=e.path.slice(0,-1),i=i.parent,e.offset++;}else{if(0!==n.offset)return!1;n.path=n.path.slice(0,-1);}}}},{key:"is",value:function is(t){return"position"==t||"model:position"==t;}},{key:"hasSameParentAs",value:function hasSameParentAs(t){if(this.root!==t.root)return!1;return"same"==li(this.getParentPath(),t.getParentPath());}},{key:"getTransformedByOperation",value:function getTransformedByOperation(t){var e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=$s._createAt(this);}return e;}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(t){var e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(t){var e=t.movedRange;var n;return e.containsPosition(this)||e.start.isEqual(this)?(n=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(n=n._getTransformedByDeletion(t.deletionPosition,1))):n=this.isEqual(t.deletionPosition)?$s._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),n;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(t,e){var n=$s._createAt(this);if(this.root!=t.root)return n;if("same"==li(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e;}}else if("prefix"==li(t.getParentPath(),this.getParentPath())){var _i49=t.path.length-1;if(t.offset<=this.path[_i49]){if(t.offset+e>this.path[_i49])return null;n.path[_i49]-=e;}}return n;}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(t,e){var n=$s._createAt(this);if(this.root!=t.root)return n;if("same"==li(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=e);else if("prefix"==li(t.getParentPath(),this.getParentPath())){var _i50=t.path.length-1;t.offset<=this.path[_i50]&&(n.path[_i50]+=e);}return n;}},{key:"_getTransformedByMove",value:function _getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return $s._createAt(this);var i=this._getTransformedByDeletion(t,n);return null===i||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):i._getTransformedByInsertion(e,n);}},{key:"_getCombined",value:function _getCombined(t,e){var n=t.path.length-1,i=$s._createAt(e);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[n]-t.offset,i.path=i.path.concat(this.path.slice(n+1)),i;}},{key:"toJSON",value:function toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness};}},{key:"clone",value:function clone(){return new this.constructor(this.root,this.path,this.stickiness);}},{key:"offset",get:function get(){return Ys(this.path);},set:function set(t){this.path[this.path.length-1]=t;}},{key:"parent",get:function get(){var t=this.root;for(var _e68=0;_e68<this.path.length-1;_e68++){if(!(t=t.getChild(t.offsetToIndex(this.path[_e68]))))throw new Gn.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});}if(t.is("text"))throw new Gn.b("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});return t;}},{key:"index",get:function get(){return this.parent.offsetToIndex(this.offset);}},{key:"textNode",get:function get(){var t=this.parent.getChild(this.index);return t instanceof Bs&&t.startOffset<this.offset?t:null;}},{key:"nodeAfter",get:function get(){return null===this.textNode?this.parent.getChild(this.index):null;}},{key:"nodeBefore",get:function get(){return null===this.textNode?this.parent.getChild(this.index-1):null;}},{key:"isAtStart",get:function get(){return 0===this.offset;}},{key:"isAtEnd",get:function get(){return this.offset==this.parent.maxOffset;}}],[{key:"_createAt",value:function _createAt(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";if(t instanceof $s)return new $s(t.root,t.path,t.stickiness);{var _i51=t;if("end"==e)e=_i51.maxOffset;else{if("before"==e)return this._createBefore(_i51,n);if("after"==e)return this._createAfter(_i51,n);if(0!==e&&!e)throw new Gn.b("model-createPositionAt-offset-required: Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,t]);}if(!_i51.is("element")&&!_i51.is("documentFragment"))throw new Gn.b("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,t]);var _o29=_i51.getPath();return _o29.push(e),new this(_i51.root,_o29,n);}}},{key:"_createAfter",value:function _createAfter(t,e){if(!t.parent)throw new Gn.b("model-position-after-root: You cannot make a position after root.",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e);}},{key:"_createBefore",value:function _createBefore(t,e){if(!t.parent)throw new Gn.b("model-position-before-root: You cannot make a position before root.",t,{root:t});return this._createAt(t.parent,t.startOffset,e);}},{key:"fromJSON",value:function fromJSON(t,e){if("$graveyard"===t.root){var _n73=new $s(e.graveyard,t.path);return _n73.stickiness=t.stickiness,_n73;}if(!e.getRoot(t.root))throw new Gn.b("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",e,{rootName:t.root});return new $s(e.getRoot(t.root),t.path,t.stickiness);}}]);return $s;}();var Gs=/*#__PURE__*/function(){function Gs(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,Gs);this.start=$s._createAt(t),this.end=e?$s._createAt(e):$s._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious";}_createClass(Gs,[{key:Symbol.iterator,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function value$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:return _context11.delegateYield(new qs({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return _context11.stop();}}},value,this);})},{key:"containsPosition",value:function containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end);}},{key:"containsRange",value:function containsRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;t.isCollapsed&&(e=!1);var n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i;}},{key:"containsItem",value:function containsItem(t){var e=$s._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e);}},{key:"is",value:function is(t){return"range"==t||"model:range"==t;}},{key:"isEqual",value:function isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end);}},{key:"isIntersecting",value:function isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start);}},{key:"getDifference",value:function getDifference(t){var e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Gs(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Gs(t.end,this.end))):e.push(new Gs(this.start,this.end)),e;}},{key:"getIntersection",value:function getIntersection(t){if(this.isIntersecting(t)){var _e69=this.start,_n74=this.end;return this.containsPosition(t.start)&&(_e69=t.start),this.containsPosition(t.end)&&(_n74=t.end),new Gs(_e69,_n74);}return null;}},{key:"getMinimalFlatRanges",value:function getMinimalFlatRanges(){var t=[],e=this.start.getCommonPath(this.end).length,n=$s._createAt(this.start);var i=n.parent;for(;n.path.length>e+1;){var _e70=i.maxOffset-n.offset;0!==_e70&&t.push(new Gs(n,n.getShiftedBy(_e70))),n.path=n.path.slice(0,-1),n.offset++,i=i.parent;}for(;n.path.length<=this.end.path.length;){var _e71=this.end.path[n.path.length-1],_i52=_e71-n.offset;0!==_i52&&t.push(new Gs(n,n.getShiftedBy(_i52))),n.offset=_e71,n.path.push(0);}return t;}},{key:"getWalker",value:function getWalker(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return t.boundaries=this,new qs(t);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getItems(){var t,e,_iteratorNormalCompletion85,_didIteratorError85,_iteratorError85,_iterator85,_step85,_t77,_args12=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getItems$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:t=_args12.length>0&&_args12[0]!==undefined?_args12[0]:{};t.boundaries=this,t.ignoreElementEnd=!0;e=new qs(t);_iteratorNormalCompletion85=true;_didIteratorError85=false;_iteratorError85=undefined;_context12.prev=6;_iterator85=e[Symbol.iterator]();case 8:if(_iteratorNormalCompletion85=(_step85=_iterator85.next()).done){_context12.next=15;break;}_t77=_step85.value;_context12.next=12;return _t77.item;case 12:_iteratorNormalCompletion85=true;_context12.next=8;break;case 15:_context12.next=21;break;case 17:_context12.prev=17;_context12.t0=_context12["catch"](6);_didIteratorError85=true;_iteratorError85=_context12.t0;case 21:_context12.prev=21;_context12.prev=22;if(!_iteratorNormalCompletion85&&_iterator85["return"]!=null){_iterator85["return"]();}case 24:_context12.prev=24;if(!_didIteratorError85){_context12.next=27;break;}throw _iteratorError85;case 27:return _context12.finish(24);case 28:return _context12.finish(21);case 29:case"end":return _context12.stop();}}},getItems,this,[[6,17,21,29],[22,,24,28]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getPositions(){var t,e,_iteratorNormalCompletion86,_didIteratorError86,_iteratorError86,_iterator86,_step86,_t78,_args13=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getPositions$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:t=_args13.length>0&&_args13[0]!==undefined?_args13[0]:{};t.boundaries=this;e=new qs(t);_context13.next=5;return e.position;case 5:_iteratorNormalCompletion86=true;_didIteratorError86=false;_iteratorError86=undefined;_context13.prev=8;_iterator86=e[Symbol.iterator]();case 10:if(_iteratorNormalCompletion86=(_step86=_iterator86.next()).done){_context13.next=17;break;}_t78=_step86.value;_context13.next=14;return _t78.nextPosition;case 14:_iteratorNormalCompletion86=true;_context13.next=10;break;case 17:_context13.next=23;break;case 19:_context13.prev=19;_context13.t0=_context13["catch"](8);_didIteratorError86=true;_iteratorError86=_context13.t0;case 23:_context13.prev=23;_context13.prev=24;if(!_iteratorNormalCompletion86&&_iterator86["return"]!=null){_iterator86["return"]();}case 26:_context13.prev=26;if(!_didIteratorError86){_context13.next=29;break;}throw _iteratorError86;case 29:return _context13.finish(26);case 30:return _context13.finish(23);case 31:case"end":return _context13.stop();}}},getPositions,this,[[8,19,23,31],[24,,26,30]]);})},{key:"getTransformedByOperation",value:function getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)];}return[new Gs(this.start,this.end)];}},{key:"getTransformedByOperations",value:function getTransformedByOperations(t){var e=[new Gs(this.start,this.end)];var _iteratorNormalCompletion87=true;var _didIteratorError87=false;var _iteratorError87=undefined;try{for(var _iterator87=t[Symbol.iterator](),_step87;!(_iteratorNormalCompletion87=(_step87=_iterator87.next()).done);_iteratorNormalCompletion87=true){var _n76=_step87.value;for(var _t81=0;_t81<e.length;_t81++){var _i54=e[_t81].getTransformedByOperation(_n76);e.splice.apply(e,[_t81,1].concat(_toConsumableArray(_i54))),_t81+=_i54.length-1;}}}catch(err){_didIteratorError87=true;_iteratorError87=err;}finally{try{if(!_iteratorNormalCompletion87&&_iterator87["return"]!=null){_iterator87["return"]();}}finally{if(_didIteratorError87){throw _iteratorError87;}}}for(var _t79=0;_t79<e.length;_t79++){var _n75=e[_t79];for(var _i53=_t79+1;_i53<e.length;_i53++){var _t80=e[_i53];(_n75.containsRange(_t80)||_t80.containsRange(_n75)||_n75.isEqual(_t80))&&e.splice(_i53,1);}}return e;}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"toJSON",value:function toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()};}},{key:"clone",value:function clone(){return new this.constructor(this.start,this.end);}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return this._getTransformedByInsertion(t.position,t.howMany,e);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var n=t.sourcePosition,i=t.howMany,o=t.targetPosition;return this._getTransformedByMove(n,o,i,e);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(t){var e=this.start._getTransformedBySplitOperation(t);var n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new Gs(e,n);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Gs(this.start);var e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=$s._createAt(n)).offset=0:(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new Gs(e,n)):new Gs(e,n);}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;if(n&&this.containsPosition(t))return[new Gs(this.start,t),new Gs(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{var _n77=new Gs(this.start,this.end);return _n77.start=_n77.start._getTransformedByInsertion(t,e),_n77.end=_n77.end._getTransformedByInsertion(t,e),[_n77];}}},{key:"_getTransformedByMove",value:function _getTransformedByMove(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;if(this.isCollapsed){var _i55=this.start._getTransformedByMove(t,e,n);return[new Gs(_i55)];}var o=Gs._createFromPositionAndShift(t,n),r=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!i&&(o.containsPosition(this.start)||o.containsPosition(this.end))){var _i56=this.start._getTransformedByMove(t,e,n),_o30=this.end._getTransformedByMove(t,e,n);return[new Gs(_i56,_o30)];}var s;var a=this.getDifference(o);var c=null;var l=this.getIntersection(o);if(1==a.length?c=new Gs(a[0].start._getTransformedByDeletion(t,n),a[0].end._getTransformedByDeletion(t,n)):2==a.length&&(c=new Gs(this.start,this.end._getTransformedByDeletion(t,n))),s=c?c._getTransformedByInsertion(r,n,null!==l||i):[],l){var _t82=new Gs(l.start._getCombined(o.start,r),l.end._getCombined(o.start,r));2==s.length?s.splice(1,0,_t82):s.push(_t82);}return s;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(t,e){var n=this.start._getTransformedByDeletion(t,e),i=this.end._getTransformedByDeletion(t,e);return null==n&&null==i?null:(null==n&&(n=t),null==i&&(i=t),new Gs(n,i));}},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return"same"==li(this.start.getParentPath(),this.end.getParentPath());}},{key:"root",get:function get(){return this.start.root;}}],[{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(t,e){var n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n);}},{key:"_createIn",value:function _createIn(t){return new this($s._createAt(t,0),$s._createAt(t,t.maxOffset));}},{key:"_createOn",value:function _createOn(t){return this._createFromPositionAndShift($s._createBefore(t),t.offsetSize);}},{key:"_createFromRanges",value:function _createFromRanges(t){if(0===t.length)throw new Gn.b("range-create-from-ranges-empty-array: At least one range has to be passed.",null);if(1==t.length)return t[0].clone();var e=t[0];t.sort(function(t,e){return t.start.isAfter(e.start)?1:-1;});var n=t.indexOf(e),i=new this(e.start,e.end);if(n>0)for(var _e72=n-1;t[_e72].end.isEqual(i.start);_e72++){i.start=$s._createAt(t[_e72].start);}for(var _e73=n+1;_e73<t.length&&t[_e73].start.isEqual(i.end);_e73++){i.end=$s._createAt(t[_e73].end);}return i;}},{key:"fromJSON",value:function fromJSON(t,e){return new this($s.fromJSON(t.start,e),$s.fromJSON(t.end,e));}}]);return Gs;}();var Qs=/*#__PURE__*/function(){function Qs(){var _this41=this;_classCallCheck(this,Qs);this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._viewToModelLengthCallbacks=new Map(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set(),this.on("modelToViewPosition",function(t,e){if(e.viewPosition)return;var n=_this41._modelToViewMapping.get(e.modelPosition.parent);e.viewPosition=_this41._findPositionIn(n,e.modelPosition.offset);},{priority:"low"}),this.on("viewToModelPosition",function(t,e){if(e.modelPosition)return;var n=_this41.findMappedViewAncestor(e.viewPosition),i=_this41._viewToModelMapping.get(n),o=_this41._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=$s._createAt(i,o);},{priority:"low"});}_createClass(Qs,[{key:"bindElements",value:function bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t);}},{key:"unbindViewElement",value:function unbindViewElement(t){var e=this.toModelElement(t);if(this._viewToModelMapping["delete"](t),this._elementToMarkerNames.has(t)){var _iteratorNormalCompletion88=true;var _didIteratorError88=false;var _iteratorError88=undefined;try{for(var _iterator88=this._elementToMarkerNames.get(t)[Symbol.iterator](),_step88;!(_iteratorNormalCompletion88=(_step88=_iterator88.next()).done);_iteratorNormalCompletion88=true){var _e74=_step88.value;this._unboundMarkerNames.add(_e74);}}catch(err){_didIteratorError88=true;_iteratorError88=err;}finally{try{if(!_iteratorNormalCompletion88&&_iterator88["return"]!=null){_iterator88["return"]();}}finally{if(_didIteratorError88){throw _iteratorError88;}}}}this._modelToViewMapping.get(e)==t&&this._modelToViewMapping["delete"](e);}},{key:"unbindModelElement",value:function unbindModelElement(t){var e=this.toViewElement(t);this._modelToViewMapping["delete"](t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping["delete"](e);}},{key:"bindElementToMarker",value:function bindElementToMarker(t,e){var n=this._markerNameToElements.get(e)||new Set();n.add(t);var i=this._elementToMarkerNames.get(t)||new Set();i.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,i);}},{key:"unbindElementFromMarkerName",value:function unbindElementFromMarkerName(t,e){var n=this._markerNameToElements.get(e);n&&(n["delete"](t),0==n.size&&this._markerNameToElements["delete"](e));var i=this._elementToMarkerNames.get(t);i&&(i["delete"](e),0==i.size&&this._elementToMarkerNames["delete"](t));}},{key:"flushUnboundMarkerNames",value:function flushUnboundMarkerNames(){var t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t;}},{key:"clearBindings",value:function clearBindings(){this._modelToViewMapping=new WeakMap(),this._viewToModelMapping=new WeakMap(),this._markerNameToElements=new Map(),this._elementToMarkerNames=new Map(),this._unboundMarkerNames=new Set();}},{key:"toModelElement",value:function toModelElement(t){return this._viewToModelMapping.get(t);}},{key:"toViewElement",value:function toViewElement(t){return this._modelToViewMapping.get(t);}},{key:"toModelRange",value:function toModelRange(t){return new Gs(this.toModelPosition(t.start),this.toModelPosition(t.end));}},{key:"toViewRange",value:function toViewRange(t){return new Xi(this.toViewPosition(t.start),this.toViewPosition(t.end));}},{key:"toModelPosition",value:function toModelPosition(t){var e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition;}},{key:"toViewPosition",value:function toViewPosition(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{isPhantom:!1};var n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition;}},{key:"markerNameToElements",value:function markerNameToElements(t){var e=this._markerNameToElements.get(t);if(!e)return null;var n=new Set();var _iteratorNormalCompletion89=true;var _didIteratorError89=false;var _iteratorError89=undefined;try{for(var _iterator89=e[Symbol.iterator](),_step89;!(_iteratorNormalCompletion89=(_step89=_iterator89.next()).done);_iteratorNormalCompletion89=true){var _t83=_step89.value;if(_t83.is("attributeElement")){var _iteratorNormalCompletion90=true;var _didIteratorError90=false;var _iteratorError90=undefined;try{for(var _iterator90=_t83.getElementsWithSameId()[Symbol.iterator](),_step90;!(_iteratorNormalCompletion90=(_step90=_iterator90.next()).done);_iteratorNormalCompletion90=true){var _e75=_step90.value;n.add(_e75);}}catch(err){_didIteratorError90=true;_iteratorError90=err;}finally{try{if(!_iteratorNormalCompletion90&&_iterator90["return"]!=null){_iterator90["return"]();}}finally{if(_didIteratorError90){throw _iteratorError90;}}}}else n.add(_t83);}}catch(err){_didIteratorError89=true;_iteratorError89=err;}finally{try{if(!_iteratorNormalCompletion89&&_iterator89["return"]!=null){_iterator89["return"]();}}finally{if(_didIteratorError89){throw _iteratorError89;}}}return n;}},{key:"registerViewToModelLength",value:function registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e);}},{key:"findMappedViewAncestor",value:function findMappedViewAncestor(t){var e=t.parent;for(;!this._viewToModelMapping.has(e);){e=e.parent;}return e;}},{key:"_toModelOffset",value:function _toModelOffset(t,e,n){if(n!=t){return this._toModelOffset(t.parent,t.index,n)+this._toModelOffset(t,e,t);}if(t.is("text"))return e;var i=0;for(var _n78=0;_n78<e;_n78++){i+=this.getModelLength(t.getChild(_n78));}return i;}},{key:"getModelLength",value:function getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name)){return this._viewToModelLengthCallbacks.get(t.name)(t);}if(this._viewToModelMapping.has(t))return 1;if(t.is("text"))return t.data.length;if(t.is("uiElement"))return 0;{var _e76=0;var _iteratorNormalCompletion91=true;var _didIteratorError91=false;var _iteratorError91=undefined;try{for(var _iterator91=t.getChildren()[Symbol.iterator](),_step91;!(_iteratorNormalCompletion91=(_step91=_iterator91.next()).done);_iteratorNormalCompletion91=true){var _n79=_step91.value;_e76+=this.getModelLength(_n79);}}catch(err){_didIteratorError91=true;_iteratorError91=err;}finally{try{if(!_iteratorNormalCompletion91&&_iterator91["return"]!=null){_iterator91["return"]();}}finally{if(_didIteratorError91){throw _iteratorError91;}}}return _e76;}}},{key:"_findPositionIn",value:function _findPositionIn(t,e){var n,i=0,o=0,r=0;if(t.is("text"))return new Zi(t,e);for(;o<e;){n=t.getChild(r),o+=i=this.getModelLength(n),r++;}return o==e?this._moveViewPositionToTextNode(new Zi(t,r)):this._findPositionIn(n,e-(o-i));}},{key:"_moveViewPositionToTextNode",value:function _moveViewPositionToTextNode(t){var e=t.nodeBefore,n=t.nodeAfter;return e instanceof fi?new Zi(e,e.data.length):n instanceof fi?new Zi(n,0):t;}}]);return Qs;}();ci(Qs,ei);var Ks=/*#__PURE__*/function(){function Ks(){_classCallCheck(this,Ks);this._consumable=new Map(),this._textProxyRegistry=new Map();}_createClass(Ks,[{key:"add",value:function add(t,e){e=Js(e),t instanceof Fs&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map()),this._consumable.get(t).set(e,!0);}},{key:"consume",value:function consume(t,e){return e=Js(e),t instanceof Fs&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0);}},{key:"test",value:function test(t,e){e=Js(e),t instanceof Fs&&(t=this._getSymbolForTextProxy(t));var n=this._consumable.get(t);if(void 0===n)return null;var i=n.get(e);return void 0===i?null:i;}},{key:"revert",value:function revert(t,e){e=Js(e),t instanceof Fs&&(t=this._getSymbolForTextProxy(t));var n=this.test(t,e);return!1===n?(this._consumable.get(t).set(e,!0),!0):!0!==n&&null;}},{key:"_getSymbolForTextProxy",value:function _getSymbolForTextProxy(t){var e=null;var n=this._textProxyRegistry.get(t.startOffset);if(n){var _i57=n.get(t.endOffset);_i57&&(e=_i57.get(t.parent));}return e||(e=this._addSymbolForTextProxy(t.startOffset,t.endOffset,t.parent)),e;}},{key:"_addSymbolForTextProxy",value:function _addSymbolForTextProxy(t,e,n){var i=Symbol("textProxySymbol");var o,r;return(o=this._textProxyRegistry.get(t))||(o=new Map(),this._textProxyRegistry.set(t,o)),(r=o.get(e))||(r=new Map(),o.set(e,r)),r.set(n,i),i;}}]);return Ks;}();function Js(t){var e=t.split(":");return e.length>1?e[0]+":"+e[1]:e[0];}var Zs=/*#__PURE__*/function(){function Zs(t){_classCallCheck(this,Zs);this.conversionApi=Li({dispatcher:this},t);}_createClass(Zs,[{key:"convertChanges",value:function convertChanges(t,e,n){var _iteratorNormalCompletion92=true;var _didIteratorError92=false;var _iteratorError92=undefined;try{for(var _iterator92=t.getMarkersToRemove()[Symbol.iterator](),_step92;!(_iteratorNormalCompletion92=(_step92=_iterator92.next()).done);_iteratorNormalCompletion92=true){var _e77=_step92.value;this.convertMarkerRemove(_e77.name,_e77.range,n);}}catch(err){_didIteratorError92=true;_iteratorError92=err;}finally{try{if(!_iteratorNormalCompletion92&&_iterator92["return"]!=null){_iterator92["return"]();}}finally{if(_didIteratorError92){throw _iteratorError92;}}}var _iteratorNormalCompletion93=true;var _didIteratorError93=false;var _iteratorError93=undefined;try{for(var _iterator93=t.getChanges()[Symbol.iterator](),_step93;!(_iteratorNormalCompletion93=(_step93=_iterator93.next()).done);_iteratorNormalCompletion93=true){var _e78=_step93.value;"insert"==_e78.type?this.convertInsert(Gs._createFromPositionAndShift(_e78.position,_e78.length),n):"remove"==_e78.type?this.convertRemove(_e78.position,_e78.length,_e78.name,n):this.convertAttribute(_e78.range,_e78.attributeKey,_e78.attributeOldValue,_e78.attributeNewValue,n);}}catch(err){_didIteratorError93=true;_iteratorError93=err;}finally{try{if(!_iteratorNormalCompletion93&&_iterator93["return"]!=null){_iterator93["return"]();}}finally{if(_didIteratorError93){throw _iteratorError93;}}}var _iteratorNormalCompletion94=true;var _didIteratorError94=false;var _iteratorError94=undefined;try{for(var _iterator94=this.conversionApi.mapper.flushUnboundMarkerNames()[Symbol.iterator](),_step94;!(_iteratorNormalCompletion94=(_step94=_iterator94.next()).done);_iteratorNormalCompletion94=true){var _t84=_step94.value;var _i58=e.get(_t84).getRange();this.convertMarkerRemove(_t84,_i58,n),this.convertMarkerAdd(_t84,_i58,n);}}catch(err){_didIteratorError94=true;_iteratorError94=err;}finally{try{if(!_iteratorNormalCompletion94&&_iterator94["return"]!=null){_iterator94["return"]();}}finally{if(_didIteratorError94){throw _iteratorError94;}}}var _iteratorNormalCompletion95=true;var _didIteratorError95=false;var _iteratorError95=undefined;try{for(var _iterator95=t.getMarkersToAdd()[Symbol.iterator](),_step95;!(_iteratorNormalCompletion95=(_step95=_iterator95.next()).done);_iteratorNormalCompletion95=true){var _e79=_step95.value;this.convertMarkerAdd(_e79.name,_e79.range,n);}}catch(err){_didIteratorError95=true;_iteratorError95=err;}finally{try{if(!_iteratorNormalCompletion95&&_iterator95["return"]!=null){_iterator95["return"]();}}finally{if(_didIteratorError95){throw _iteratorError95;}}}}},{key:"convertInsert",value:function convertInsert(t,e){this.conversionApi.writer=e,this.conversionApi.consumable=this._createInsertConsumable(t);var _iteratorNormalCompletion96=true;var _didIteratorError96=false;var _iteratorError96=undefined;try{for(var _iterator96=t[Symbol.iterator](),_step96;!(_iteratorNormalCompletion96=(_step96=_iterator96.next()).done);_iteratorNormalCompletion96=true){var _e80=_step96.value;var _t85=_e80.item,_n80={item:_t85,range:Gs._createFromPositionAndShift(_e80.previousPosition,_e80.length)};this._testAndFire("insert",_n80);var _iteratorNormalCompletion97=true;var _didIteratorError97=false;var _iteratorError97=undefined;try{for(var _iterator97=_t85.getAttributeKeys()[Symbol.iterator](),_step97;!(_iteratorNormalCompletion97=(_step97=_iterator97.next()).done);_iteratorNormalCompletion97=true){var _e81=_step97.value;_n80.attributeKey=_e81,_n80.attributeOldValue=null,_n80.attributeNewValue=_t85.getAttribute(_e81),this._testAndFire("attribute:".concat(_e81),_n80);}}catch(err){_didIteratorError97=true;_iteratorError97=err;}finally{try{if(!_iteratorNormalCompletion97&&_iterator97["return"]!=null){_iterator97["return"]();}}finally{if(_didIteratorError97){throw _iteratorError97;}}}}}catch(err){_didIteratorError96=true;_iteratorError96=err;}finally{try{if(!_iteratorNormalCompletion96&&_iterator96["return"]!=null){_iterator96["return"]();}}finally{if(_didIteratorError96){throw _iteratorError96;}}}this._clearConversionApi();}},{key:"convertRemove",value:function convertRemove(t,e,n,i){this.conversionApi.writer=i,this.fire("remove:"+n,{position:t,length:e},this.conversionApi),this._clearConversionApi();}},{key:"convertAttribute",value:function convertAttribute(t,e,n,i,o){this.conversionApi.writer=o,this.conversionApi.consumable=this._createConsumableForRange(t,"attribute:".concat(e));var _iteratorNormalCompletion98=true;var _didIteratorError98=false;var _iteratorError98=undefined;try{for(var _iterator98=t[Symbol.iterator](),_step98;!(_iteratorNormalCompletion98=(_step98=_iterator98.next()).done);_iteratorNormalCompletion98=true){var _o31=_step98.value;var _t86={item:_o31.item,range:Gs._createFromPositionAndShift(_o31.previousPosition,_o31.length),attributeKey:e,attributeOldValue:n,attributeNewValue:i};this._testAndFire("attribute:".concat(e),_t86);}}catch(err){_didIteratorError98=true;_iteratorError98=err;}finally{try{if(!_iteratorNormalCompletion98&&_iterator98["return"]!=null){_iterator98["return"]();}}finally{if(_didIteratorError98){throw _iteratorError98;}}}this._clearConversionApi();}},{key:"convertSelection",value:function convertSelection(t,e,n){var i=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(t,i),this.fire("selection",{selection:t},this.conversionApi),t.isCollapsed){for(var _i60=0,_i59=i;_i60<_i59.length;_i60++){var _e82=_i59[_i60];var _n81=_e82.getRange();if(!Xs(t.getFirstPosition(),_e82,this.conversionApi.mapper))continue;var _i61={item:t,markerName:_e82.name,markerRange:_n81};this.conversionApi.consumable.test(t,"addMarker:"+_e82.name)&&this.fire("addMarker:"+_e82.name,_i61,this.conversionApi);}var _iteratorNormalCompletion99=true;var _didIteratorError99=false;var _iteratorError99=undefined;try{for(var _iterator99=t.getAttributeKeys()[Symbol.iterator](),_step99;!(_iteratorNormalCompletion99=(_step99=_iterator99.next()).done);_iteratorNormalCompletion99=true){var _e83=_step99.value;var _n82={item:t,range:t.getFirstRange(),attributeKey:_e83,attributeOldValue:null,attributeNewValue:t.getAttribute(_e83)};this.conversionApi.consumable.test(t,"attribute:"+_n82.attributeKey)&&this.fire("attribute:"+_n82.attributeKey+":$text",_n82,this.conversionApi);}}catch(err){_didIteratorError99=true;_iteratorError99=err;}finally{try{if(!_iteratorNormalCompletion99&&_iterator99["return"]!=null){_iterator99["return"]();}}finally{if(_didIteratorError99){throw _iteratorError99;}}}this._clearConversionApi();}}},{key:"convertMarkerAdd",value:function convertMarkerAdd(t,e,n){if(!e.root.document||"$graveyard"==e.root.rootName)return;this.conversionApi.writer=n;var i="addMarker:"+t,o=new Ks();if(o.add(e,i),this.conversionApi.consumable=o,this.fire(i,{markerName:t,markerRange:e},this.conversionApi),o.test(e,i)){this.conversionApi.consumable=this._createConsumableForRange(e,i);var _iteratorNormalCompletion100=true;var _didIteratorError100=false;var _iteratorError100=undefined;try{for(var _iterator100=e.getItems()[Symbol.iterator](),_step100;!(_iteratorNormalCompletion100=(_step100=_iterator100.next()).done);_iteratorNormalCompletion100=true){var _n83=_step100.value;if(!this.conversionApi.consumable.test(_n83,i))continue;var _o32={item:_n83,range:Gs._createOn(_n83),markerName:t,markerRange:e};this.fire(i,_o32,this.conversionApi);}}catch(err){_didIteratorError100=true;_iteratorError100=err;}finally{try{if(!_iteratorNormalCompletion100&&_iterator100["return"]!=null){_iterator100["return"]();}}finally{if(_didIteratorError100){throw _iteratorError100;}}}this._clearConversionApi();}}},{key:"convertMarkerRemove",value:function convertMarkerRemove(t,e,n){e.root.document&&"$graveyard"!=e.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+t,{markerName:t,markerRange:e},this.conversionApi),this._clearConversionApi());}},{key:"_createInsertConsumable",value:function _createInsertConsumable(t){var e=new Ks();var _iteratorNormalCompletion101=true;var _didIteratorError101=false;var _iteratorError101=undefined;try{for(var _iterator101=t[Symbol.iterator](),_step101;!(_iteratorNormalCompletion101=(_step101=_iterator101.next()).done);_iteratorNormalCompletion101=true){var _n84=_step101.value;var _t87=_n84.item;e.add(_t87,"insert");var _iteratorNormalCompletion102=true;var _didIteratorError102=false;var _iteratorError102=undefined;try{for(var _iterator102=_t87.getAttributeKeys()[Symbol.iterator](),_step102;!(_iteratorNormalCompletion102=(_step102=_iterator102.next()).done);_iteratorNormalCompletion102=true){var _n85=_step102.value;e.add(_t87,"attribute:"+_n85);}}catch(err){_didIteratorError102=true;_iteratorError102=err;}finally{try{if(!_iteratorNormalCompletion102&&_iterator102["return"]!=null){_iterator102["return"]();}}finally{if(_didIteratorError102){throw _iteratorError102;}}}}}catch(err){_didIteratorError101=true;_iteratorError101=err;}finally{try{if(!_iteratorNormalCompletion101&&_iterator101["return"]!=null){_iterator101["return"]();}}finally{if(_didIteratorError101){throw _iteratorError101;}}}return e;}},{key:"_createConsumableForRange",value:function _createConsumableForRange(t,e){var n=new Ks();var _iteratorNormalCompletion103=true;var _didIteratorError103=false;var _iteratorError103=undefined;try{for(var _iterator103=t.getItems()[Symbol.iterator](),_step103;!(_iteratorNormalCompletion103=(_step103=_iterator103.next()).done);_iteratorNormalCompletion103=true){var _i62=_step103.value;n.add(_i62,e);}}catch(err){_didIteratorError103=true;_iteratorError103=err;}finally{try{if(!_iteratorNormalCompletion103&&_iterator103["return"]!=null){_iterator103["return"]();}}finally{if(_didIteratorError103){throw _iteratorError103;}}}return n;}},{key:"_createSelectionConsumable",value:function _createSelectionConsumable(t,e){var n=new Ks();n.add(t,"selection");var _iteratorNormalCompletion104=true;var _didIteratorError104=false;var _iteratorError104=undefined;try{for(var _iterator104=e[Symbol.iterator](),_step104;!(_iteratorNormalCompletion104=(_step104=_iterator104.next()).done);_iteratorNormalCompletion104=true){var _i63=_step104.value;n.add(t,"addMarker:"+_i63.name);}}catch(err){_didIteratorError104=true;_iteratorError104=err;}finally{try{if(!_iteratorNormalCompletion104&&_iterator104["return"]!=null){_iterator104["return"]();}}finally{if(_didIteratorError104){throw _iteratorError104;}}}var _iteratorNormalCompletion105=true;var _didIteratorError105=false;var _iteratorError105=undefined;try{for(var _iterator105=t.getAttributeKeys()[Symbol.iterator](),_step105;!(_iteratorNormalCompletion105=(_step105=_iterator105.next()).done);_iteratorNormalCompletion105=true){var _e84=_step105.value;n.add(t,"attribute:"+_e84);}}catch(err){_didIteratorError105=true;_iteratorError105=err;}finally{try{if(!_iteratorNormalCompletion105&&_iterator105["return"]!=null){_iterator105["return"]();}}finally{if(_didIteratorError105){throw _iteratorError105;}}}return n;}},{key:"_testAndFire",value:function _testAndFire(t,e){if(!this.conversionApi.consumable.test(e.item,t))return;var n=e.item.name||"$text";this.fire(t+":"+n,e,this.conversionApi);}},{key:"_clearConversionApi",value:function _clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable;}}]);return Zs;}();function Xs(t,e,n){var i=e.getRange(),o=Array.from(t.getAncestors());return o.shift(),o.reverse(),!o.some(function(t){if(i.containsItem(t)){return!!n.toViewElement(t).getCustomProperty("addHighlight");}});}ci(Zs,ei);var ta=/*#__PURE__*/function(){function ta(t,e,n){_classCallCheck(this,ta);this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map(),t&&this.setTo(t,e,n);}_createClass(ta,[{key:"isEqual",value:function isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;var _iteratorNormalCompletion106=true;var _didIteratorError106=false;var _iteratorError106=undefined;try{for(var _iterator106=this._ranges[Symbol.iterator](),_step106;!(_iteratorNormalCompletion106=(_step106=_iterator106.next()).done);_iteratorNormalCompletion106=true){var _e85=_step106.value;var _n86=!1;var _iteratorNormalCompletion107=true;var _didIteratorError107=false;var _iteratorError107=undefined;try{for(var _iterator107=t._ranges[Symbol.iterator](),_step107;!(_iteratorNormalCompletion107=(_step107=_iterator107.next()).done);_iteratorNormalCompletion107=true){var _i64=_step107.value;if(_e85.isEqual(_i64)){_n86=!0;break;}}}catch(err){_didIteratorError107=true;_iteratorError107=err;}finally{try{if(!_iteratorNormalCompletion107&&_iterator107["return"]!=null){_iterator107["return"]();}}finally{if(_didIteratorError107){throw _iteratorError107;}}}if(!_n86)return!1;}}catch(err){_didIteratorError106=true;_iteratorError106=err;}finally{try{if(!_iteratorNormalCompletion106&&_iterator106["return"]!=null){_iterator106["return"]();}}finally{if(_didIteratorError106){throw _iteratorError106;}}}return!0;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){var _iteratorNormalCompletion108,_didIteratorError108,_iteratorError108,_iterator108,_step108,_t88;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_iteratorNormalCompletion108=true;_didIteratorError108=false;_iteratorError108=undefined;_context14.prev=3;_iterator108=this._ranges[Symbol.iterator]();case 5:if(_iteratorNormalCompletion108=(_step108=_iterator108.next()).done){_context14.next=12;break;}_t88=_step108.value;_context14.next=9;return new Gs(_t88.start,_t88.end);case 9:_iteratorNormalCompletion108=true;_context14.next=5;break;case 12:_context14.next=18;break;case 14:_context14.prev=14;_context14.t0=_context14["catch"](3);_didIteratorError108=true;_iteratorError108=_context14.t0;case 18:_context14.prev=18;_context14.prev=19;if(!_iteratorNormalCompletion108&&_iterator108["return"]!=null){_iterator108["return"]();}case 21:_context14.prev=21;if(!_didIteratorError108){_context14.next=24;break;}throw _iteratorError108;case 24:return _context14.finish(21);case 25:return _context14.finish(18);case 26:case"end":return _context14.stop();}}},getRanges,this,[[3,14,18,26],[19,,21,25]]);})},{key:"getFirstRange",value:function getFirstRange(){var t=null;var _iteratorNormalCompletion109=true;var _didIteratorError109=false;var _iteratorError109=undefined;try{for(var _iterator109=this._ranges[Symbol.iterator](),_step109;!(_iteratorNormalCompletion109=(_step109=_iterator109.next()).done);_iteratorNormalCompletion109=true){var _e86=_step109.value;t&&!_e86.start.isBefore(t.start)||(t=_e86);}}catch(err){_didIteratorError109=true;_iteratorError109=err;}finally{try{if(!_iteratorNormalCompletion109&&_iterator109["return"]!=null){_iterator109["return"]();}}finally{if(_didIteratorError109){throw _iteratorError109;}}}return t?new Gs(t.start,t.end):null;}},{key:"getLastRange",value:function getLastRange(){var t=null;var _iteratorNormalCompletion110=true;var _didIteratorError110=false;var _iteratorError110=undefined;try{for(var _iterator110=this._ranges[Symbol.iterator](),_step110;!(_iteratorNormalCompletion110=(_step110=_iterator110.next()).done);_iteratorNormalCompletion110=true){var _e87=_step110.value;t&&!_e87.end.isAfter(t.end)||(t=_e87);}}catch(err){_didIteratorError110=true;_iteratorError110=err;}finally{try{if(!_iteratorNormalCompletion110&&_iterator110["return"]!=null){_iterator110["return"]();}}finally{if(_didIteratorError110){throw _iteratorError110;}}}return t?new Gs(t.start,t.end):null;}},{key:"getFirstPosition",value:function getFirstPosition(){var t=this.getFirstRange();return t?t.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var t=this.getLastRange();return t?t.end.clone():null;}},{key:"setTo",value:function setTo(t,e,n){if(null===t)this._setRanges([]);else if(t instanceof ta)this._setRanges(t.getRanges(),t.isBackward);else if(t&&"function"==typeof t.getRanges)this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof Gs)this._setRanges([t],!!e&&!!e.backward);else if(t instanceof $s)this._setRanges([new Gs(t)]);else if(t instanceof zs){var _i65=!!n&&!!n.backward;var _o33;if("in"==e)_o33=Gs._createIn(t);else if("on"==e)_o33=Gs._createOn(t);else{if(void 0===e)throw new Gn.b("model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.",[this,t]);_o33=new Gs($s._createAt(t,e));}this._setRanges([_o33],_i65);}else{if(!pi(t))throw new Gn.b("model-selection-setTo-not-selectable: Cannot set the selection to the given place.",[this,t]);this._setRanges(t,e&&!!e.backward);}}},{key:"_setRanges",value:function _setRanges(t){var _this42=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;var n=(t=Array.from(t)).some(function(e){if(!(e instanceof Gs))throw new Gn.b("model-selection-set-ranges-not-range: Selection range set to an object that is not an instance of model.Range.",[_this42,t]);return _this42._ranges.every(function(t){return!t.isEqual(e);});});if(t.length!==this._ranges.length||n){this._removeAllRanges();var _iteratorNormalCompletion111=true;var _didIteratorError111=false;var _iteratorError111=undefined;try{for(var _iterator111=t[Symbol.iterator](),_step111;!(_iteratorNormalCompletion111=(_step111=_iterator111.next()).done);_iteratorNormalCompletion111=true){var _e88=_step111.value;this._pushRange(_e88);}}catch(err){_didIteratorError111=true;_iteratorError111=err;}finally{try{if(!_iteratorNormalCompletion111&&_iterator111["return"]!=null){_iterator111["return"]();}}finally{if(_didIteratorError111){throw _iteratorError111;}}}this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0});}}},{key:"setFocus",value:function setFocus(t,e){if(null===this.anchor)throw new Gn.b("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",[this,t]);var n=$s._createAt(t,e);if("same"==n.compareWith(this.focus))return;var i=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(i)?(this._pushRange(new Gs(n,i)),this._lastRangeBackward=!0):(this._pushRange(new Gs(i,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0});}},{key:"getAttribute",value:function getAttribute(t){return this._attrs.get(t);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"hasAttribute",value:function hasAttribute(t){return this._attrs.has(t);}},{key:"removeAttribute",value:function removeAttribute(t){this.hasAttribute(t)&&(this._attrs["delete"](t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}));}},{key:"setAttribute",value:function setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}));}},{key:"getSelectedElement",value:function getSelectedElement(){if(1!==this.rangeCount)return null;var t=this.getFirstRange(),e=t.start.nodeAfter,n=t.end.nodeBefore;return e instanceof Hs&&e==n?e:null;}},{key:"is",value:function is(t){return"selection"==t||"model:selection"==t;}},{key:"getSelectedBlocks",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getSelectedBlocks(){var t,_iteratorNormalCompletion112,_didIteratorError112,_iteratorError112,_iterator112,_step112,_e89,_n87,_iteratorNormalCompletion113,_didIteratorError113,_iteratorError113,_iterator113,_step113,_n88,_i66;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getSelectedBlocks$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:t=new WeakSet();_iteratorNormalCompletion112=true;_didIteratorError112=false;_iteratorError112=undefined;_context15.prev=4;_iterator112=this.getRanges()[Symbol.iterator]();case 6:if(_iteratorNormalCompletion112=(_step112=_iterator112.next()).done){_context15.next=49;break;}_e89=_step112.value;_n87=na(_e89.start,t);_context15.t0=_n87;if(!_context15.t0){_context15.next=13;break;}_context15.next=13;return _n87;case 13:_iteratorNormalCompletion113=true;_didIteratorError113=false;_iteratorError113=undefined;_context15.prev=16;_iterator113=_e89.getWalker()[Symbol.iterator]();case 18:if(_iteratorNormalCompletion113=(_step113=_iterator113.next()).done){_context15.next=27;break;}_n88=_step113.value;_context15.t1="elementEnd"==_n88.type&&ea(_n88.item,t);if(!_context15.t1){_context15.next=24;break;}_context15.next=24;return _n88.item;case 24:_iteratorNormalCompletion113=true;_context15.next=18;break;case 27:_context15.next=33;break;case 29:_context15.prev=29;_context15.t2=_context15["catch"](16);_didIteratorError113=true;_iteratorError113=_context15.t2;case 33:_context15.prev=33;_context15.prev=34;if(!_iteratorNormalCompletion113&&_iterator113["return"]!=null){_iterator113["return"]();}case 36:_context15.prev=36;if(!_didIteratorError113){_context15.next=39;break;}throw _iteratorError113;case 39:return _context15.finish(36);case 40:return _context15.finish(33);case 41:_i66=na(_e89.end,t);_context15.t3=_i66&&!_e89.end.isTouching($s._createAt(_i66,0));if(!_context15.t3){_context15.next=46;break;}_context15.next=46;return _i66;case 46:_iteratorNormalCompletion112=true;_context15.next=6;break;case 49:_context15.next=55;break;case 51:_context15.prev=51;_context15.t4=_context15["catch"](4);_didIteratorError112=true;_iteratorError112=_context15.t4;case 55:_context15.prev=55;_context15.prev=56;if(!_iteratorNormalCompletion112&&_iterator112["return"]!=null){_iterator112["return"]();}case 58:_context15.prev=58;if(!_didIteratorError112){_context15.next=61;break;}throw _iteratorError112;case 61:return _context15.finish(58);case 62:return _context15.finish(55);case 63:case"end":return _context15.stop();}}},getSelectedBlocks,this,[[4,51,55,63],[16,29,33,41],[34,,36,40],[56,,58,62]]);})},{key:"getTopMostBlocks",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getTopMostBlocks(){var t,_i67,_t89,_e90,_n89;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getTopMostBlocks$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:t=Array.from(this.getSelectedBlocks());_i67=0,_t89=t;case 2:if(!(_i67<_t89.length)){_context16.next=12;break;}_e90=_t89[_i67];_n89=ia(_e90);_context16.t0=_n89&&t.includes(_n89);if(_context16.t0){_context16.next=9;break;}_context16.next=9;return _e90;case 9:_i67++;_context16.next=2;break;case 12:case"end":return _context16.stop();}}},getTopMostBlocks,this);})},{key:"containsEntireContent",value:function containsEntireContent(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.anchor.root;var e=$s._createAt(t,0),n=$s._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition());}},{key:"_pushRange",value:function _pushRange(t){this._checkRange(t),this._ranges.push(new Gs(t.start,t.end));}},{key:"_checkRange",value:function _checkRange(t){for(var _e91=0;_e91<this._ranges.length;_e91++){if(t.isIntersecting(this._ranges[_e91]))throw new Gn.b("model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.",[this,t],{addedRange:t,intersectingRange:this._ranges[_e91]});}}},{key:"_removeAllRanges",value:function _removeAllRanges(){for(;this._ranges.length>0;){this._popRange();}}},{key:"_popRange",value:function _popRange(){this._ranges.pop();}},{key:"anchor",get:function get(){if(this._ranges.length>0){var _t90=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_t90.end:_t90.start;}return null;}},{key:"focus",get:function get(){if(this._ranges.length>0){var _t91=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_t91.start:_t91.end;}return null;}},{key:"isCollapsed",get:function get(){return 1===this._ranges.length&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}}]);return ta;}();function ea(t,e){return!e.has(t)&&(e.add(t),t.document.model.schema.isBlock(t)&&t.parent);}function na(t,e){var n=t.parent.document.model.schema,i=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});var o=!1;var r=i.find(function(t){return!o&&!(o=n.isLimit(t))&&ea(t,e);});return i.forEach(function(t){return e.add(t);}),r;}function ia(t){var e=t.document.model.schema;var n=t.parent;for(;n;){if(e.isBlock(n))return n;n=n.parent;}}ci(ta,ei);var oa=/*#__PURE__*/function(_Gs){_inherits(oa,_Gs);function oa(t,e){var _this43;_classCallCheck(this,oa);_this43=_possibleConstructorReturn(this,_getPrototypeOf(oa).call(this,t,e)),function(){var _this44=this;this.listenTo(this.root.document.model,"applyOperation",function(t,e){var n=e[0];n.isDocumentOperation&&function(t){var e=this.getTransformedByOperation(t),n=Gs._createFromRanges(e),i=!n.isEqual(this),o=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition);}return!1;}(this,t);var r=null;if(i){"$graveyard"==n.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);var _e92=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",_e92,{deletionPosition:r});}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r});}.call(_this44,n);},{priority:"low"});}.call(_assertThisInitialized(_this43));return _this43;}_createClass(oa,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(t){return"liveRange"==t||"model:liveRange"==t||_get(_getPrototypeOf(oa.prototype),"is",this).call(this,t);}},{key:"toRange",value:function toRange(){return new Gs(this.start,this.end);}}],[{key:"fromRange",value:function fromRange(t){return new oa(t.start,t.end);}}]);return oa;}(Gs);ci(oa,ei);var ra="selection:";var sa=/*#__PURE__*/function(){function sa(t){_classCallCheck(this,sa);this._selection=new aa(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this);}_createClass(sa,[{key:"getRanges",value:function getRanges(){return this._selection.getRanges();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getSelectedBlocks",value:function getSelectedBlocks(){return this._selection.getSelectedBlocks();}},{key:"getTopMostBlocks",value:function getTopMostBlocks(){return this._selection.getTopMostBlocks();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"containsEntireContent",value:function containsEntireContent(t){return this._selection.containsEntireContent(t);}},{key:"destroy",value:function destroy(){this._selection.destroy();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._selection.getAttributeKeys();}},{key:"getAttributes",value:function getAttributes(){return this._selection.getAttributes();}},{key:"getAttribute",value:function getAttribute(t){return this._selection.getAttribute(t);}},{key:"hasAttribute",value:function hasAttribute(t){return this._selection.hasAttribute(t);}},{key:"refresh",value:function refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1);}},{key:"is",value:function is(t){return"selection"==t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t;}},{key:"_setFocus",value:function _setFocus(t,e){this._selection.setFocus(t,e);}},{key:"_setTo",value:function _setTo(t,e,n){this._selection.setTo(t,e,n);}},{key:"_setAttribute",value:function _setAttribute(t,e){this._selection.setAttribute(t,e);}},{key:"_removeAttribute",value:function _removeAttribute(t){this._selection.removeAttribute(t);}},{key:"_getStoredAttributes",value:function _getStoredAttributes(){return this._selection._getStoredAttributes();}},{key:"_overrideGravity",value:function _overrideGravity(){return this._selection.overrideGravity();}},{key:"_restoreGravity",value:function _restoreGravity(t){this._selection.restoreGravity(t);}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"hasOwnRange",get:function get(){return this._selection.hasOwnRange;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"isGravityOverridden",get:function get(){return this._selection.isGravityOverridden;}},{key:"markers",get:function get(){return this._selection.markers;}},{key:"_ranges",get:function get(){return this._selection._ranges;}}],[{key:"_getStoreAttributeKey",value:function _getStoreAttributeKey(t){return ra+t;}},{key:"_isStoreAttributeKey",value:function _isStoreAttributeKey(t){return t.startsWith(ra);}}]);return sa;}();ci(sa,ei);var aa=/*#__PURE__*/function(_ta){_inherits(aa,_ta);function aa(t){var _this45;_classCallCheck(this,aa);_this45=_possibleConstructorReturn(this,_getPrototypeOf(aa).call(this)),_this45.markers=new oo({idProperty:"name"}),_this45._model=t.model,_this45._document=t,_this45._attributePriority=new Map(),_this45._fixGraveyardRangesData=[],_this45._hasChangedRange=!1,_this45._overriddenGravityRegister=new Set(),_this45.listenTo(_this45._model,"applyOperation",function(t,e){var n=e[0];if(n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type){for(;_this45._fixGraveyardRangesData.length;){var _this45$_fixGraveyard=_this45._fixGraveyardRangesData.shift(),_t92=_this45$_fixGraveyard.liveRange,_e93=_this45$_fixGraveyard.sourcePosition;_this45._fixGraveyardSelection(_t92,_e93);}_this45._hasChangedRange&&(_this45._hasChangedRange=!1,_this45.fire("change:range",{directChange:!1}));}},{priority:"lowest"}),_this45.on("change:range",function(){var _iteratorNormalCompletion114=true;var _didIteratorError114=false;var _iteratorError114=undefined;try{for(var _iterator114=_this45.getRanges()[Symbol.iterator](),_step114;!(_iteratorNormalCompletion114=(_step114=_iterator114.next()).done);_iteratorNormalCompletion114=true){var _t93=_step114.value;if(!_this45._document._validateSelectionRange(_t93))throw new Gn.b("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",_assertThisInitialized(_this45),{range:_t93});}}catch(err){_didIteratorError114=true;_iteratorError114=err;}finally{try{if(!_iteratorNormalCompletion114&&_iterator114["return"]!=null){_iterator114["return"]();}}finally{if(_didIteratorError114){throw _iteratorError114;}}}}),_this45.listenTo(_this45._model.markers,"update",function(){return _this45._updateMarkers();}),_this45.listenTo(_this45._document,"change",function(t,e){!function(t,e){var n=t.document.differ;var _iteratorNormalCompletion115=true;var _didIteratorError115=false;var _iteratorError115=undefined;try{var _loop2=function _loop2(){var i=_step115.value;if("insert"!=i.type)return"continue";var n=i.position.parent,o=i.length===n.maxOffset;o&&t.enqueueChange(e,function(t){var e=Array.from(n.getAttributeKeys()).filter(function(t){return t.startsWith(ra);});var _iteratorNormalCompletion116=true;var _didIteratorError116=false;var _iteratorError116=undefined;try{for(var _iterator116=e[Symbol.iterator](),_step116;!(_iteratorNormalCompletion116=(_step116=_iterator116.next()).done);_iteratorNormalCompletion116=true){var _i68=_step116.value;t.removeAttribute(_i68,n);}}catch(err){_didIteratorError116=true;_iteratorError116=err;}finally{try{if(!_iteratorNormalCompletion116&&_iterator116["return"]!=null){_iterator116["return"]();}}finally{if(_didIteratorError116){throw _iteratorError116;}}}});};for(var _iterator115=n.getChanges()[Symbol.iterator](),_step115;!(_iteratorNormalCompletion115=(_step115=_iterator115.next()).done);_iteratorNormalCompletion115=true){var _ret=_loop2();if(_ret==="continue")continue;}}catch(err){_didIteratorError115=true;_iteratorError115=err;}finally{try{if(!_iteratorNormalCompletion115&&_iterator115["return"]!=null){_iterator115["return"]();}}finally{if(_didIteratorError115){throw _iteratorError115;}}}}(_this45._model,e);});return _this45;}_createClass(aa,[{key:"destroy",value:function destroy(){for(var _t94=0;_t94<this._ranges.length;_t94++){this._ranges[_t94].detach();}this.stopListening();}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(!this._ranges.length){_context17.next=4;break;}return _context17.delegateYield(_get(_getPrototypeOf(aa.prototype),"getRanges",this).call(this),"t0",2);case 2:_context17.next=6;break;case 4:_context17.next=6;return this._document._getDefaultRange();case 6:case"end":return _context17.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return _get(_getPrototypeOf(aa.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange();}},{key:"getLastRange",value:function getLastRange(){return _get(_getPrototypeOf(aa.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange();}},{key:"setTo",value:function setTo(t,e,n){_get(_getPrototypeOf(aa.prototype),"setTo",this).call(this,t,e,n),this._updateAttributes(!0);}},{key:"setFocus",value:function setFocus(t,e){_get(_getPrototypeOf(aa.prototype),"setFocus",this).call(this,t,e),this._updateAttributes(!0);}},{key:"setAttribute",value:function setAttribute(t,e){if(this._setAttribute(t,e)){var _e94=[t];this.fire("change:attribute",{attributeKeys:_e94,directChange:!0});}}},{key:"removeAttribute",value:function removeAttribute(t){if(this._removeAttribute(t)){var _e95=[t];this.fire("change:attribute",{attributeKeys:_e95,directChange:!0});}}},{key:"overrideGravity",value:function overrideGravity(){var t=Jn();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t;}},{key:"restoreGravity",value:function restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new Gn.b("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",this,{uid:t});this._overriddenGravityRegister["delete"](t),this.isGravityOverridden||this._updateAttributes(!0);}},{key:"_popRange",value:function _popRange(){this._ranges.pop().detach();}},{key:"_pushRange",value:function _pushRange(t){var e=this._prepareRange(t);e&&this._ranges.push(e);}},{key:"_prepareRange",value:function _prepareRange(t){var _this46=this;if(this._checkRange(t),t.root==this._document.graveyard)return;var e=oa.fromRange(t);return e.on("change:range",function(t,n,i){_this46._hasChangedRange=!0,e.root==_this46._document.graveyard&&_this46._fixGraveyardRangesData.push({liveRange:e,sourcePosition:i.deletionPosition});}),e;}},{key:"_updateMarkers",value:function _updateMarkers(){var t=[];var _iteratorNormalCompletion117=true;var _didIteratorError117=false;var _iteratorError117=undefined;try{for(var _iterator117=this._model.markers[Symbol.iterator](),_step117;!(_iteratorNormalCompletion117=(_step117=_iterator117.next()).done);_iteratorNormalCompletion117=true){var _e96=_step117.value;var _n90=_e96.getRange();var _iteratorNormalCompletion118=true;var _didIteratorError118=false;var _iteratorError118=undefined;try{for(var _iterator118=this.getRanges()[Symbol.iterator](),_step118;!(_iteratorNormalCompletion118=(_step118=_iterator118.next()).done);_iteratorNormalCompletion118=true){var _i71=_step118.value;_n90.containsRange(_i71,!_i71.isCollapsed)&&t.push(_e96);}}catch(err){_didIteratorError118=true;_iteratorError118=err;}finally{try{if(!_iteratorNormalCompletion118&&_iterator118["return"]!=null){_iterator118["return"]();}}finally{if(_didIteratorError118){throw _iteratorError118;}}}}}catch(err){_didIteratorError117=true;_iteratorError117=err;}finally{try{if(!_iteratorNormalCompletion117&&_iterator117["return"]!=null){_iterator117["return"]();}}finally{if(_didIteratorError117){throw _iteratorError117;}}}for(var _i69=0,_t95=t;_i69<_t95.length;_i69++){var _e97=_t95[_i69];this.markers.has(_e97)||this.markers.add(_e97);}for(var _i70=0,_Array$from3=Array.from(this.markers);_i70<_Array$from3.length;_i70++){var _e98=_Array$from3[_i70];t.includes(_e98)||this.markers.remove(_e98);}}},{key:"_updateAttributes",value:function _updateAttributes(t){var e=Vs(this._getSurroundingAttributes()),n=Vs(this.getAttributes());if(t)this._attributePriority=new Map(),this._attrs=new Map();else{var _iteratorNormalCompletion119=true;var _didIteratorError119=false;var _iteratorError119=undefined;try{for(var _iterator119=this._attributePriority[Symbol.iterator](),_step119;!(_iteratorNormalCompletion119=(_step119=_iterator119.next()).done);_iteratorNormalCompletion119=true){var _step119$value=_slicedToArray(_step119.value,2),_t96=_step119$value[0],_e99=_step119$value[1];"low"==_e99&&(this._attrs["delete"](_t96),this._attributePriority["delete"](_t96));}}catch(err){_didIteratorError119=true;_iteratorError119=err;}finally{try{if(!_iteratorNormalCompletion119&&_iterator119["return"]!=null){_iterator119["return"]();}}finally{if(_didIteratorError119){throw _iteratorError119;}}}}this._setAttributesTo(e);var i=[];var _iteratorNormalCompletion120=true;var _didIteratorError120=false;var _iteratorError120=undefined;try{for(var _iterator120=this.getAttributes()[Symbol.iterator](),_step120;!(_iteratorNormalCompletion120=(_step120=_iterator120.next()).done);_iteratorNormalCompletion120=true){var _step120$value=_slicedToArray(_step120.value,2),_t97=_step120$value[0],_e100=_step120$value[1];n.has(_t97)&&n.get(_t97)===_e100||i.push(_t97);}}catch(err){_didIteratorError120=true;_iteratorError120=err;}finally{try{if(!_iteratorNormalCompletion120&&_iterator120["return"]!=null){_iterator120["return"]();}}finally{if(_didIteratorError120){throw _iteratorError120;}}}var _iteratorNormalCompletion121=true;var _didIteratorError121=false;var _iteratorError121=undefined;try{for(var _iterator121=n[Symbol.iterator](),_step121;!(_iteratorNormalCompletion121=(_step121=_iterator121.next()).done);_iteratorNormalCompletion121=true){var _step121$value=_slicedToArray(_step121.value,1),_t98=_step121$value[0];this.hasAttribute(_t98)||i.push(_t98);}}catch(err){_didIteratorError121=true;_iteratorError121=err;}finally{try{if(!_iteratorNormalCompletion121&&_iterator121["return"]!=null){_iterator121["return"]();}}finally{if(_didIteratorError121){throw _iteratorError121;}}}i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1});}},{key:"_setAttribute",value:function _setAttribute(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;var i=n?"normal":"low";return("low"!=i||"normal"!=this._attributePriority.get(t))&&_get(_getPrototypeOf(aa.prototype),"getAttribute",this).call(this,t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,i),!0);}},{key:"_removeAttribute",value:function _removeAttribute(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;var n=e?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(this._attributePriority.set(t,n),!!_get(_getPrototypeOf(aa.prototype),"hasAttribute",this).call(this,t)&&(this._attrs["delete"](t),!0));}},{key:"_setAttributesTo",value:function _setAttributesTo(t){var e=new Set();var _iteratorNormalCompletion122=true;var _didIteratorError122=false;var _iteratorError122=undefined;try{for(var _iterator122=this.getAttributes()[Symbol.iterator](),_step122;!(_iteratorNormalCompletion122=(_step122=_iterator122.next()).done);_iteratorNormalCompletion122=true){var _step122$value=_slicedToArray(_step122.value,2),_e101=_step122$value[0],_n91=_step122$value[1];t.get(_e101)!==_n91&&this._removeAttribute(_e101,!1);}}catch(err){_didIteratorError122=true;_iteratorError122=err;}finally{try{if(!_iteratorNormalCompletion122&&_iterator122["return"]!=null){_iterator122["return"]();}}finally{if(_didIteratorError122){throw _iteratorError122;}}}var _iteratorNormalCompletion123=true;var _didIteratorError123=false;var _iteratorError123=undefined;try{for(var _iterator123=t[Symbol.iterator](),_step123;!(_iteratorNormalCompletion123=(_step123=_iterator123.next()).done);_iteratorNormalCompletion123=true){var _step123$value=_slicedToArray(_step123.value,2),_n92=_step123$value[0],_i72=_step123$value[1];this._setAttribute(_n92,_i72,!1)&&e.add(_n92);}}catch(err){_didIteratorError123=true;_iteratorError123=err;}finally{try{if(!_iteratorNormalCompletion123&&_iterator123["return"]!=null){_iterator123["return"]();}}finally{if(_didIteratorError123){throw _iteratorError123;}}}return e;}},{key:"_getStoredAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _getStoredAttributes(){var t,_iteratorNormalCompletion124,_didIteratorError124,_iteratorError124,_iterator124,_step124,_e102;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _getStoredAttributes$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:t=this.getFirstPosition().parent;if(!(this.isCollapsed&&t.isEmpty)){_context18.next=29;break;}_iteratorNormalCompletion124=true;_didIteratorError124=false;_iteratorError124=undefined;_context18.prev=5;_iterator124=t.getAttributeKeys()[Symbol.iterator]();case 7:if(_iteratorNormalCompletion124=(_step124=_iterator124.next()).done){_context18.next=15;break;}_e102=_step124.value;if(!_e102.startsWith(ra)){_context18.next=12;break;}_context18.next=12;return[_e102.substr(ra.length),t.getAttribute(_e102)];case 12:_iteratorNormalCompletion124=true;_context18.next=7;break;case 15:_context18.next=21;break;case 17:_context18.prev=17;_context18.t0=_context18["catch"](5);_didIteratorError124=true;_iteratorError124=_context18.t0;case 21:_context18.prev=21;_context18.prev=22;if(!_iteratorNormalCompletion124&&_iterator124["return"]!=null){_iterator124["return"]();}case 24:_context18.prev=24;if(!_didIteratorError124){_context18.next=27;break;}throw _iteratorError124;case 27:return _context18.finish(24);case 28:return _context18.finish(21);case 29:case"end":return _context18.stop();}}},_getStoredAttributes,this,[[5,17,21,29],[22,,24,28]]);})},{key:"_getSurroundingAttributes",value:function _getSurroundingAttributes(){var t=this.getFirstPosition(),e=this._model.schema;var n=null;if(this.isCollapsed){var _e103=t.textNode?t.textNode:t.nodeBefore,_i73=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=ca(_e103)),n||(n=ca(_i73)),!this.isGravityOverridden&&!n){var _t99=_e103;for(;_t99&&!n;){n=ca(_t99=_t99.previousSibling);}}if(!n){var _t100=_i73;for(;_t100&&!n;){n=ca(_t100=_t100.nextSibling);}}n||(n=this._getStoredAttributes());}else{var _t101=this.getFirstRange();var _iteratorNormalCompletion125=true;var _didIteratorError125=false;var _iteratorError125=undefined;try{for(var _iterator125=_t101[Symbol.iterator](),_step125;!(_iteratorNormalCompletion125=(_step125=_iterator125.next()).done);_iteratorNormalCompletion125=true){var _i74=_step125.value;if(_i74.item.is("element")&&e.isObject(_i74.item))break;if("text"==_i74.type){n=_i74.item.getAttributes();break;}}}catch(err){_didIteratorError125=true;_iteratorError125=err;}finally{try{if(!_iteratorNormalCompletion125&&_iterator125["return"]!=null){_iterator125["return"]();}}finally{if(_didIteratorError125){throw _iteratorError125;}}}}return n;}},{key:"_fixGraveyardSelection",value:function _fixGraveyardSelection(t,e){var n=e.clone(),i=this._model.schema.getNearestSelectionRange(n),o=this._ranges.indexOf(t);if(this._ranges.splice(o,1),t.detach(),i){var _t102=this._prepareRange(i);this._ranges.splice(o,0,_t102);}}},{key:"isCollapsed",get:function get(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:_get(_getPrototypeOf(aa.prototype),"isCollapsed",this);}},{key:"anchor",get:function get(){return _get(_getPrototypeOf(aa.prototype),"anchor",this)||this._document._getDefaultRange().start;}},{key:"focus",get:function get(){return _get(_getPrototypeOf(aa.prototype),"focus",this)||this._document._getDefaultRange().end;}},{key:"rangeCount",get:function get(){return this._ranges.length?this._ranges.length:1;}},{key:"hasOwnRange",get:function get(){return this._ranges.length>0;}},{key:"isGravityOverridden",get:function get(){return!!this._overriddenGravityRegister.size;}}]);return aa;}(ta);function ca(t){return t instanceof Fs||t instanceof Bs?t.getAttributes():null;}var la=/*#__PURE__*/function(){function la(t){_classCallCheck(this,la);this._dispatchers=t;}_createClass(la,[{key:"add",value:function add(t){var _iteratorNormalCompletion126=true;var _didIteratorError126=false;var _iteratorError126=undefined;try{for(var _iterator126=this._dispatchers[Symbol.iterator](),_step126;!(_iteratorNormalCompletion126=(_step126=_iterator126.next()).done);_iteratorNormalCompletion126=true){var _e104=_step126.value;t(_e104);}}catch(err){_didIteratorError126=true;_iteratorError126=err;}finally{try{if(!_iteratorNormalCompletion126&&_iterator126["return"]!=null){_iterator126["return"]();}}finally{if(_didIteratorError126){throw _iteratorError126;}}}return this;}}]);return la;}();var da=1,ha=4;var ua=function ua(t){return Fn(t,da|ha);};var fa=/*#__PURE__*/function(_la){_inherits(fa,_la);function fa(){_classCallCheck(this,fa);return _possibleConstructorReturn(this,_getPrototypeOf(fa).apply(this,arguments));}_createClass(fa,[{key:"elementToElement",value:function elementToElement(t){return this.add(function(t){return(t=ua(t)).view=ga(t.view,"container"),function(e){e.on("insert:"+t.model,function(t){return function(e,n,i){var o=t(n.item,i.writer);if(!o)return;if(!i.consumable.consume(n.item,"insert"))return;var r=i.mapper.toViewPosition(n.range.start);i.mapper.bindElements(n.item,o),i.writer.insert(r,o);};}(t.view),{priority:t.converterPriority||"normal"});};}(t));}},{key:"attributeToElement",value:function attributeToElement(t){return this.add(function(t){var e="attribute:"+((t=ua(t)).model.key?t.model.key:t.model);t.model.name&&(e+=":"+t.model.name);if(t.model.values){var _iteratorNormalCompletion127=true;var _didIteratorError127=false;var _iteratorError127=undefined;try{for(var _iterator127=t.model.values[Symbol.iterator](),_step127;!(_iteratorNormalCompletion127=(_step127=_iterator127.next()).done);_iteratorNormalCompletion127=true){var _e105=_step127.value;t.view[_e105]=ga(t.view[_e105],"attribute");}}catch(err){_didIteratorError127=true;_iteratorError127=err;}finally{try{if(!_iteratorNormalCompletion127&&_iterator127["return"]!=null){_iterator127["return"]();}}finally{if(_didIteratorError127){throw _iteratorError127;}}}}else t.view=ga(t.view,"attribute");var n=pa(t);return function(i){i.on(e,function(t){return function(e,n,i){var o=t(n.attributeOldValue,i.writer),r=t(n.attributeNewValue,i.writer);if(!o&&!r)return;if(!i.consumable.consume(n.item,e.name))return;var s=i.writer,a=s.document.selection;if(n.item instanceof ta||n.item instanceof sa)s.wrap(a.getFirstRange(),r);else{var _t103=i.mapper.toViewRange(n.range);null!==n.attributeOldValue&&o&&(_t103=s.unwrap(_t103,o)),null!==n.attributeNewValue&&r&&s.wrap(_t103,r);}};}(n),{priority:t.converterPriority||"normal"});};}(t));}},{key:"attributeToAttribute",value:function attributeToAttribute(t){return this.add(function(t){var e="attribute:"+((t=ua(t)).model.key?t.model.key:t.model);t.model.name&&(e+=":"+t.model.name);if(t.model.values){var _iteratorNormalCompletion128=true;var _didIteratorError128=false;var _iteratorError128=undefined;try{for(var _iterator128=t.model.values[Symbol.iterator](),_step128;!(_iteratorNormalCompletion128=(_step128=_iterator128.next()).done);_iteratorNormalCompletion128=true){var _e106=_step128.value;t.view[_e106]=ba(t.view[_e106]);}}catch(err){_didIteratorError128=true;_iteratorError128=err;}finally{try{if(!_iteratorNormalCompletion128&&_iterator128["return"]!=null){_iterator128["return"]();}}finally{if(_didIteratorError128){throw _iteratorError128;}}}}else t.view=ba(t.view);var n=pa(t);return function(i){i.on(e,function(t){return function(e,n,i){var o=t(n.attributeOldValue,n),r=t(n.attributeNewValue,n);if(!o&&!r)return;if(!i.consumable.consume(n.item,e.name))return;var s=i.mapper.toViewElement(n.item),a=i.writer;if(!s)throw new Gn.b("conversion-attribute-to-attribute-on-text: Trying to convert text node's attribute with attribute-to-attribute converter.",[n,i]);if(null!==n.attributeOldValue&&o)if("class"==o.key){var _t104=Array.isArray(o.value)?o.value:[o.value];var _iteratorNormalCompletion129=true;var _didIteratorError129=false;var _iteratorError129=undefined;try{for(var _iterator129=_t104[Symbol.iterator](),_step129;!(_iteratorNormalCompletion129=(_step129=_iterator129.next()).done);_iteratorNormalCompletion129=true){var _e107=_step129.value;a.removeClass(_e107,s);}}catch(err){_didIteratorError129=true;_iteratorError129=err;}finally{try{if(!_iteratorNormalCompletion129&&_iterator129["return"]!=null){_iterator129["return"]();}}finally{if(_didIteratorError129){throw _iteratorError129;}}}}else if("style"==o.key){var _t105=Object.keys(o.value);for(var _i75=0,_t106=_t105;_i75<_t106.length;_i75++){var _e108=_t106[_i75];a.removeStyle(_e108,s);}}else a.removeAttribute(o.key,s);if(null!==n.attributeNewValue&&r)if("class"==r.key){var _t107=Array.isArray(r.value)?r.value:[r.value];var _iteratorNormalCompletion130=true;var _didIteratorError130=false;var _iteratorError130=undefined;try{for(var _iterator130=_t107[Symbol.iterator](),_step130;!(_iteratorNormalCompletion130=(_step130=_iterator130.next()).done);_iteratorNormalCompletion130=true){var _e109=_step130.value;a.addClass(_e109,s);}}catch(err){_didIteratorError130=true;_iteratorError130=err;}finally{try{if(!_iteratorNormalCompletion130&&_iterator130["return"]!=null){_iterator130["return"]();}}finally{if(_didIteratorError130){throw _iteratorError130;}}}}else if("style"==r.key){var _t108=Object.keys(r.value);for(var _i76=0,_t109=_t108;_i76<_t109.length;_i76++){var _e110=_t109[_i76];a.setStyle(_e110,r.value[_e110],s);}}else a.setAttribute(r.key,r.value,s);};}(n),{priority:t.converterPriority||"normal"});};}(t));}},{key:"markerToElement",value:function markerToElement(t){return this.add(function(t){return(t=ua(t)).view=ga(t.view,"ui"),function(e){e.on("addMarker:"+t.model,function(t){return function(e,n,i){n.isOpening=!0;var o=t(n,i.writer);n.isOpening=!1;var r=t(n,i.writer);if(!o||!r)return;var s=n.markerRange;if(s.isCollapsed&&!i.consumable.consume(s,e.name))return;var _iteratorNormalCompletion131=true;var _didIteratorError131=false;var _iteratorError131=undefined;try{for(var _iterator131=s[Symbol.iterator](),_step131;!(_iteratorNormalCompletion131=(_step131=_iterator131.next()).done);_iteratorNormalCompletion131=true){var _t110=_step131.value;if(!i.consumable.consume(_t110.item,e.name))return;}}catch(err){_didIteratorError131=true;_iteratorError131=err;}finally{try{if(!_iteratorNormalCompletion131&&_iterator131["return"]!=null){_iterator131["return"]();}}finally{if(_didIteratorError131){throw _iteratorError131;}}}var a=i.mapper,c=i.writer;c.insert(a.toViewPosition(s.start),o),i.mapper.bindElementToMarker(o,n.markerName),s.isCollapsed||(c.insert(a.toViewPosition(s.end),r),i.mapper.bindElementToMarker(r,n.markerName)),e.stop();};}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,(t.view,function(t,e,n){var i=n.mapper.markerNameToElements(e.markerName);if(i){var _iteratorNormalCompletion132=true;var _didIteratorError132=false;var _iteratorError132=undefined;try{for(var _iterator132=i[Symbol.iterator](),_step132;!(_iteratorNormalCompletion132=(_step132=_iterator132.next()).done);_iteratorNormalCompletion132=true){var _t111=_step132.value;n.mapper.unbindElementFromMarkerName(_t111,e.markerName),n.writer.clear(n.writer.createRangeOn(_t111),_t111);}}catch(err){_didIteratorError132=true;_iteratorError132=err;}finally{try{if(!_iteratorNormalCompletion132&&_iterator132["return"]!=null){_iterator132["return"]();}}finally{if(_didIteratorError132){throw _iteratorError132;}}}n.writer.clearClonedElementsGroup(e.markerName),t.stop();}}),{priority:t.converterPriority||"normal"});};}(t));}},{key:"markerToHighlight",value:function markerToHighlight(t){return this.add(function(t){return function(e){e.on("addMarker:"+t.model,function(t){return function(e,n,i){if(!n.item)return;if(!(n.item instanceof ta||n.item instanceof sa||n.item.is("textProxy")))return;var o=wa(t,n,i);if(!o)return;if(!i.consumable.consume(n.item,e.name))return;var r=ma(o),s=i.writer,a=s.document.selection;if(n.item instanceof ta||n.item instanceof sa)s.wrap(a.getFirstRange(),r,a);else{var _t112=i.mapper.toViewRange(n.range),_e111=s.wrap(_t112,r);var _iteratorNormalCompletion133=true;var _didIteratorError133=false;var _iteratorError133=undefined;try{for(var _iterator133=_e111.getItems()[Symbol.iterator](),_step133;!(_iteratorNormalCompletion133=(_step133=_iterator133.next()).done);_iteratorNormalCompletion133=true){var _t113=_step133.value;if(_t113.is("attributeElement")&&_t113.isSimilar(r)){i.mapper.bindElementToMarker(_t113,n.markerName);break;}}}catch(err){_didIteratorError133=true;_iteratorError133=err;}finally{try{if(!_iteratorNormalCompletion133&&_iterator133["return"]!=null){_iterator133["return"]();}}finally{if(_didIteratorError133){throw _iteratorError133;}}}}};}(t.view),{priority:t.converterPriority||"normal"}),e.on("addMarker:"+t.model,function(t){return function(e,n,i){if(!n.item)return;if(!(n.item instanceof Hs))return;var o=wa(t,n,i);if(!o)return;if(!i.consumable.test(n.item,e.name))return;var r=i.mapper.toViewElement(n.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(n.item,e.name);var _iteratorNormalCompletion134=true;var _didIteratorError134=false;var _iteratorError134=undefined;try{for(var _iterator134=Gs._createIn(n.item)[Symbol.iterator](),_step134;!(_iteratorNormalCompletion134=(_step134=_iterator134.next()).done);_iteratorNormalCompletion134=true){var _t114=_step134.value;i.consumable.consume(_t114.item,e.name);}}catch(err){_didIteratorError134=true;_iteratorError134=err;}finally{try{if(!_iteratorNormalCompletion134&&_iterator134["return"]!=null){_iterator134["return"]();}}finally{if(_didIteratorError134){throw _iteratorError134;}}}r.getCustomProperty("addHighlight")(r,o,i.writer),i.mapper.bindElementToMarker(r,n.markerName);}};}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:"+t.model,function(t){return function(e,n,i){if(n.markerRange.isCollapsed)return;var o=wa(t,n,i);if(!o)return;var r=ma(o),s=i.mapper.markerNameToElements(n.markerName);if(s){var _iteratorNormalCompletion135=true;var _didIteratorError135=false;var _iteratorError135=undefined;try{for(var _iterator135=s[Symbol.iterator](),_step135;!(_iteratorNormalCompletion135=(_step135=_iterator135.next()).done);_iteratorNormalCompletion135=true){var _t115=_step135.value;i.mapper.unbindElementFromMarkerName(_t115,n.markerName),_t115.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(_t115),r):_t115.getCustomProperty("removeHighlight")(_t115,o.id,i.writer);}}catch(err){_didIteratorError135=true;_iteratorError135=err;}finally{try{if(!_iteratorNormalCompletion135&&_iterator135["return"]!=null){_iterator135["return"]();}}finally{if(_didIteratorError135){throw _iteratorError135;}}}i.writer.clearClonedElementsGroup(n.markerName),e.stop();}};}(t.view),{priority:t.converterPriority||"normal"});};}(t));}}]);return fa;}(la);function ma(t){var e=new ao("span",t.attributes);return t.classes&&e._addClass(t.classes),t.priority&&(e._priority=t.priority),e._id=t.id,e;}function ga(t,e){return"function"==typeof t?t:function(n,i){return function(t,e,n){"string"==typeof t&&(t={name:t});var i;var o=Object.assign({},t.attributes);if("container"==n)i=e.createContainerElement(t.name,o);else if("attribute"==n){var _n93={priority:t.priority||ao.DEFAULT_PRIORITY};i=e.createAttributeElement(t.name,o,_n93);}else i=e.createUIElement(t.name,o);if(t.styles){var _n94=Object.keys(t.styles);for(var _i77=0,_n95=_n94;_i77<_n95.length;_i77++){var _o34=_n95[_i77];e.setStyle(_o34,t.styles[_o34],i);}}if(t.classes){var _n96=t.classes;if("string"==typeof _n96)e.addClass(_n96,i);else{var _iteratorNormalCompletion136=true;var _didIteratorError136=false;var _iteratorError136=undefined;try{for(var _iterator136=_n96[Symbol.iterator](),_step136;!(_iteratorNormalCompletion136=(_step136=_iterator136.next()).done);_iteratorNormalCompletion136=true){var _t116=_step136.value;e.addClass(_t116,i);}}catch(err){_didIteratorError136=true;_iteratorError136=err;}finally{try{if(!_iteratorNormalCompletion136&&_iterator136["return"]!=null){_iterator136["return"]();}}finally{if(_didIteratorError136){throw _iteratorError136;}}}}}return i;}(t,i,e);};}function pa(t){return t.model.values?function(e,n){var i=t.view[e];return i?i(e,n):null;}:t.view;}function ba(t){return"string"==typeof t?function(e){return{key:t,value:e};}:"object"==_typeof(t)?t.value?function(){return t;}:function(e){return{key:t.key,value:e};}:t;}function wa(t,e,n){var i="function"==typeof t?t(e,n):t;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null;}var ka=/*#__PURE__*/function(_la2){_inherits(ka,_la2);function ka(){_classCallCheck(this,ka);return _possibleConstructorReturn(this,_getPrototypeOf(ka).apply(this,arguments));}_createClass(ka,[{key:"elementToElement",value:function elementToElement(t){return this.add(_a(t));}},{key:"elementToAttribute",value:function elementToAttribute(t){return this.add(function(t){ya(t=ua(t));var e=xa(t,!1),n=va(t),i=n?"element:"+n:"element";return function(n){n.on(i,e,{priority:t.converterPriority||"low"});};}(t));}},{key:"attributeToAttribute",value:function attributeToAttribute(t){return this.add(function(t){var e=null;("string"==typeof(t=ua(t)).view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});var e=t.view.key;var n;if("class"==e||"style"==e){var _i78="class"==e?"classes":"styles";n=_defineProperty({},_i78,t.view.value);}else{var _i79=void 0===t.view.value?/[\s\S]*/:t.view.value;n={attributes:_defineProperty({},e,_i79)};}t.view.name&&(n.name=t.view.name);return t.view=n,e;}(t));ya(t,e);var n=xa(t,!0);return function(e){e.on("element",n,{priority:t.converterPriority||"low"});};}(t));}},{key:"elementToMarker",value:function elementToMarker(t){return this.add(function(t){return function(t){var e=t.model;t.model=function(t,n){var i="string"==typeof e?e:e(t);return n.createElement("$marker",{"data-name":i});};}(t=ua(t)),_a(t);}(t));}}]);return ka;}(la);function _a(t){var e=function(t){var e=t.view?new bi(t.view):null;return function(n,i,o){var r={};if(e){var _t117=e.match(i.viewItem);if(!_t117)return;r=_t117.match;}r.name=!0;var s=function(t,e,n){return t instanceof Function?t(e,n):n.createElement(t);}(t.model,i.viewItem,o.writer);if(!s)return;if(!o.consumable.test(i.viewItem,r))return;var a=o.splitToAllowedParent(s,i.modelCursor);if(!a)return;o.writer.insert(s,a.position),o.convertChildren(i.viewItem,o.writer.createPositionAt(s,0)),o.consumable.consume(i.viewItem,r);var c=o.getSplitParts(s);i.modelRange=new Gs(o.writer.createPositionBefore(s),o.writer.createPositionAfter(c[c.length-1])),a.cursorParent?i.modelCursor=o.writer.createPositionAt(a.cursorParent,0):i.modelCursor=i.modelRange.end;};}(t=ua(t)),n=va(t),i=n?"element:"+n:"element";return function(n){n.on(i,e,{priority:t.converterPriority||"normal"});};}function va(t){return"string"==typeof t.view?t.view:"object"==_typeof(t.view)&&"string"==typeof t.view.name?t.view.name:null;}function ya(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=null===e||function(t){return t.getAttribute(e);},i="object"!=_typeof(t.model)?t.model:t.model.key,o="object"!=_typeof(t.model)||void 0===t.model.value?n:t.model.value;t.model={key:i,value:o};}function xa(t,e){var n=new bi(t.view);return function(i,o,r){var s=n.match(o.viewItem);if(!s)return;var a=t.model.key,c="function"==typeof t.model.value?t.model.value(o.viewItem):t.model.value;null!==c&&(!function(t){if("object"==_typeof(t.view)&&!va(t))return!1;return!t.view.classes&&!t.view.attributes&&!t.view.styles;}(t)?delete s.match.name:s.match.name=!0,r.consumable.test(o.viewItem,s.match)&&(o.modelRange||(o=Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor))),function(t,e,n,i){var o=!1;for(var _i80=0,_Array$from4=Array.from(t.getItems({shallow:n}));_i80<_Array$from4.length;_i80++){var _r14=_Array$from4[_i80];i.schema.checkAttribute(_r14,e.key)&&(i.writer.setAttribute(e.key,e.value,_r14),o=!0);}return o;}(o.modelRange,{key:a,value:c},e,r)&&r.consumable.consume(o.viewItem,s.match)));};}var Aa=/*#__PURE__*/function(){function Aa(t){var _this47=this;_classCallCheck(this,Aa);this.model=t,this.view=new js(),this.mapper=new Qs(),this.downcastDispatcher=new Zs({mapper:this.mapper});var e=this.model.document,n=e.selection,i=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){_this47.view._disableRendering(!0);},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",function(){_this47.view._disableRendering(!1);},{priority:"lowest"}),this.listenTo(e,"change",function(){_this47.view.change(function(t){_this47.downcastDispatcher.convertChanges(e.differ,i,t),_this47.downcastDispatcher.convertSelection(n,i,t);});},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(t,e){return function(n,i){var o=i.newSelection,r=new ta(),s=[];var _iteratorNormalCompletion137=true;var _didIteratorError137=false;var _iteratorError137=undefined;try{for(var _iterator137=o.getRanges()[Symbol.iterator](),_step137;!(_iteratorNormalCompletion137=(_step137=_iterator137.next()).done);_iteratorNormalCompletion137=true){var _t118=_step137.value;s.push(e.toModelRange(_t118));}}catch(err){_didIteratorError137=true;_iteratorError137=err;}finally{try{if(!_iteratorNormalCompletion137&&_iterator137["return"]!=null){_iterator137["return"]();}}finally{if(_didIteratorError137){throw _iteratorError137;}}}r.setTo(s,{backward:o.isBackward}),r.isEqual(t.document.selection)||t.change(function(t){t.setSelection(r);});};}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",function(t,e,n){if(!n.consumable.consume(e.item,"insert"))return;var i=n.writer,o=n.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(o,r);},{priority:"lowest"}),this.downcastDispatcher.on("remove",function(t,e,n){var i=n.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),r=n.mapper.toViewPosition(o,{isPhantom:!0}),s=n.writer.createRange(i,r),a=n.writer.remove(s.getTrimmed());var _iteratorNormalCompletion138=true;var _didIteratorError138=false;var _iteratorError138=undefined;try{for(var _iterator138=n.writer.createRangeIn(a).getItems()[Symbol.iterator](),_step138;!(_iteratorNormalCompletion138=(_step138=_iterator138.next()).done);_iteratorNormalCompletion138=true){var _t119=_step138.value;n.mapper.unbindViewElement(_t119);}}catch(err){_didIteratorError138=true;_iteratorError138=err;}finally{try{if(!_iteratorNormalCompletion138&&_iterator138["return"]!=null){_iterator138["return"]();}}finally{if(_didIteratorError138){throw _iteratorError138;}}}},{priority:"low"}),this.downcastDispatcher.on("selection",function(t,e,n){var i=n.writer,o=i.document.selection;var _iteratorNormalCompletion139=true;var _didIteratorError139=false;var _iteratorError139=undefined;try{for(var _iterator139=o.getRanges()[Symbol.iterator](),_step139;!(_iteratorNormalCompletion139=(_step139=_iterator139.next()).done);_iteratorNormalCompletion139=true){var _t120=_step139.value;_t120.isCollapsed&&_t120.end.parent.document&&n.writer.mergeAttributes(_t120.start);}}catch(err){_didIteratorError139=true;_iteratorError139=err;}finally{try{if(!_iteratorNormalCompletion139&&_iterator139["return"]!=null){_iterator139["return"]();}}finally{if(_didIteratorError139){throw _iteratorError139;}}}i.setSelection(null);},{priority:"low"}),this.downcastDispatcher.on("selection",function(t,e,n){var i=e.selection;if(i.isCollapsed)return;if(!n.consumable.consume(i,"selection"))return;var o=[];var _iteratorNormalCompletion140=true;var _didIteratorError140=false;var _iteratorError140=undefined;try{for(var _iterator140=i.getRanges()[Symbol.iterator](),_step140;!(_iteratorNormalCompletion140=(_step140=_iterator140.next()).done);_iteratorNormalCompletion140=true){var _t121=_step140.value;var _e112=n.mapper.toViewRange(_t121);o.push(_e112);}}catch(err){_didIteratorError140=true;_iteratorError140=err;}finally{try{if(!_iteratorNormalCompletion140&&_iterator140["return"]!=null){_iterator140["return"]();}}finally{if(_didIteratorError140){throw _iteratorError140;}}}n.writer.setSelection(o,{backward:i.isBackward});},{priority:"low"}),this.downcastDispatcher.on("selection",function(t,e,n){var i=e.selection;if(!i.isCollapsed)return;if(!n.consumable.consume(i,"selection"))return;var o=n.writer,r=i.getFirstPosition(),s=n.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a);},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(function(t){if("$graveyard"==t.rootName)return null;var e=new Ki(t.name);return e.rootName=t.rootName,e._document=_this47.view.document,_this47.mapper.bindElements(t,e),e;});}_createClass(Aa,[{key:"destroy",value:function destroy(){this.view.destroy(),this.stopListening();}}]);return Aa;}();ci(Aa,Fi);var Ta=/*#__PURE__*/function(){function Ta(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,Ta);this._editor=t,this._availablePlugins=new Map(),this._plugins=new Map();var _iteratorNormalCompletion141=true;var _didIteratorError141=false;var _iteratorError141=undefined;try{for(var _iterator141=e[Symbol.iterator](),_step141;!(_iteratorNormalCompletion141=(_step141=_iterator141.next()).done);_iteratorNormalCompletion141=true){var _t122=_step141.value;this._availablePlugins.set(_t122,_t122),_t122.pluginName&&this._availablePlugins.set(_t122.pluginName,_t122);}}catch(err){_didIteratorError141=true;_iteratorError141=err;}finally{try{if(!_iteratorNormalCompletion141&&_iterator141["return"]!=null){_iterator141["return"]();}}finally{if(_didIteratorError141){throw _iteratorError141;}}}}_createClass(Ta,[{key:Symbol.iterator,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function value(){var _iteratorNormalCompletion142,_didIteratorError142,_iteratorError142,_iterator142,_step142,_t123;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function value$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_iteratorNormalCompletion142=true;_didIteratorError142=false;_iteratorError142=undefined;_context19.prev=3;_iterator142=this._plugins[Symbol.iterator]();case 5:if(_iteratorNormalCompletion142=(_step142=_iterator142.next()).done){_context19.next=14;break;}_t123=_step142.value;_context19.t0="function"==typeof _t123[0];if(!_context19.t0){_context19.next=11;break;}_context19.next=11;return _t123;case 11:_iteratorNormalCompletion142=true;_context19.next=5;break;case 14:_context19.next=20;break;case 16:_context19.prev=16;_context19.t1=_context19["catch"](3);_didIteratorError142=true;_iteratorError142=_context19.t1;case 20:_context19.prev=20;_context19.prev=21;if(!_iteratorNormalCompletion142&&_iterator142["return"]!=null){_iterator142["return"]();}case 23:_context19.prev=23;if(!_didIteratorError142){_context19.next=26;break;}throw _iteratorError142;case 26:return _context19.finish(23);case 27:return _context19.finish(20);case 28:case"end":return _context19.stop();}}},value,this,[[3,16,20,28],[21,,23,27]]);})},{key:"get",value:function get(t){var e=this._plugins.get(t);if(!e){var _e113="plugincollection-plugin-not-loaded: The requested plugin is not loaded.";var _n98=t;throw"function"==typeof t&&(_n98=t.pluginName||t.name),new Gn.b(_e113,this._editor,{plugin:_n98});}return e;}},{key:"has",value:function has(t){return this._plugins.has(t);}},{key:"init",value:function init(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=this,i=this._editor,o=new Set(),r=[],s=u(t),a=u(e),c=function(t){var e=[];var _iteratorNormalCompletion143=true;var _didIteratorError143=false;var _iteratorError143=undefined;try{for(var _iterator143=t[Symbol.iterator](),_step143;!(_iteratorNormalCompletion143=(_step143=_iterator143.next()).done);_iteratorNormalCompletion143=true){var _n99=_step143.value;h(_n99)||e.push(_n99);}}catch(err){_didIteratorError143=true;_iteratorError143=err;}finally{try{if(!_iteratorNormalCompletion143&&_iterator143["return"]!=null){_iterator143["return"]();}}finally{if(_didIteratorError143){throw _iteratorError143;}}}return e.length?e:null;}(t);if(c){var _t124="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";return console.error(Object(Gn.a)(_t124),{plugins:c}),Promise.reject(new Gn.b(_t124,this._editor,{plugins:c}));}return Promise.all(s.map(l)).then(function(){return d(r,"init");}).then(function(){return d(r,"afterInit");}).then(function(){return r;});function l(t){if(!a.includes(t)&&!n._plugins.has(t)&&!o.has(t))return function(t){return new Promise(function(s){o.add(t),t.requires&&t.requires.forEach(function(n){var o=h(n);if(e.includes(o))throw new Gn.b("plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.",i,{plugin:o,requiredBy:t});l(o);});var a=new t(i);n._add(t,a),r.push(a),s();});}(t)["catch"](function(e){throw console.error(Object(Gn.a)("plugincollection-load: It was not possible to load the plugin."),{plugin:t}),e;});}function d(t,e){return t.reduce(function(t,n){return n[e]?t.then(n[e].bind(n)):t;},Promise.resolve());}function h(t){return"function"==typeof t?t:n._availablePlugins.get(t);}function u(t){return t.map(function(t){return h(t);}).filter(function(t){return!!t;});}}},{key:"destroy",value:function destroy(){var t=Array.from(this).map(function(_ref5){var _ref6=_slicedToArray(_ref5,2),t=_ref6[1];return t;}).filter(function(t){return"function"==typeof t.destroy;}).map(function(t){return t.destroy();});return Promise.all(t);}},{key:"_add",value:function _add(t,e){this._plugins.set(t,e);var n=t.pluginName;if(n){if(this._plugins.has(n))throw new Gn.b("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e);}}}]);return Ta;}();ci(Ta,ei);var Ca=/*#__PURE__*/function(){function Ca(){_classCallCheck(this,Ca);this._commands=new Map();}_createClass(Ca,[{key:"add",value:function add(t,e){this._commands.set(t,e);}},{key:"get",value:function get(t){return this._commands.get(t);}},{key:"execute",value:function execute(t){var n=this.get(t);if(!n)throw new Gn.b("commandcollection-command-not-found: Command does not exist.",this,{commandName:t});for(var _len16=arguments.length,e=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){e[_key16-1]=arguments[_key16];}n.execute.apply(n,e);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function names(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function names$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:return _context20.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return _context20.stop();}}},names,this);})},{key:"commands",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function commands(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function commands$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:return _context21.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return _context21.stop();}}},commands,this);})},{key:Symbol.iterator,value:function value(){return this._commands[Symbol.iterator]();}},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion144=true;var _didIteratorError144=false;var _iteratorError144=undefined;try{for(var _iterator144=this.commands()[Symbol.iterator](),_step144;!(_iteratorNormalCompletion144=(_step144=_iterator144.next()).done);_iteratorNormalCompletion144=true){var _t125=_step144.value;_t125.destroy();}}catch(err){_didIteratorError144=true;_iteratorError144=err;}finally{try{if(!_iteratorNormalCompletion144&&_iterator144["return"]!=null){_iterator144["return"]();}}finally{if(_didIteratorError144){throw _iteratorError144;}}}}}]);return Ca;}();function Pa(t,e){var n=Object.keys(window.CKEDITOR_TRANSLATIONS).length;return 1===n&&(t=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]),0!==n&&function(t,e){return t in window.CKEDITOR_TRANSLATIONS&&e in window.CKEDITOR_TRANSLATIONS[t];}(t,e)?window.CKEDITOR_TRANSLATIONS[t][e].replace(/ \[context: [^\]]+\]$/,""):e.replace(/ \[context: [^\]]+\]$/,"");}window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});var Sa=["ar","fa","he","ku","ug"];var Ma=/*#__PURE__*/function(){function Ma(){var _this48=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Ma);this.uiLanguage=t.uiLanguage||"en",this.contentLanguage=t.contentLanguage||this.uiLanguage,this.uiLanguageDirection=Ea(this.uiLanguage),this.contentLanguageDirection=Ea(this.contentLanguage),this.t=function(){return _this48._t.apply(_this48,arguments);};}_createClass(Ma,[{key:"_t",value:function _t(t,e){var n=Pa(this.uiLanguage,t);return e&&(n=n.replace(/%(\d+)/g,function(t,n){return n<e.length?e[n]:t;})),n;}},{key:"language",get:function get(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage;}}]);return Ma;}();function Ea(t){return Sa.includes(t)?"rtl":"ltr";}var Ia=/*#__PURE__*/function(){function Ia(){_classCallCheck(this,Ia);this._consumables=new Map();}_createClass(Ia,[{key:"add",value:function add(t,e){var n;t.is("text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?n=this._consumables.get(t):(n=new Na(),this._consumables.set(t,n)),n.add(e));}},{key:"test",value:function test(t,e){var n=this._consumables.get(t);return void 0===n?null:t.is("text")||t.is("documentFragment")?n:n.test(e);}},{key:"consume",value:function consume(t,e){return!!this.test(t,e)&&(t.is("text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0);}},{key:"revert",value:function revert(t,e){var n=this._consumables.get(t);void 0!==n&&(t.is("text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(e));}}],[{key:"consumablesFromElement",value:function consumablesFromElement(t){var e={name:!0,attributes:[],classes:[],styles:[]},n=t.getAttributeKeys();var _iteratorNormalCompletion145=true;var _didIteratorError145=false;var _iteratorError145=undefined;try{for(var _iterator145=n[Symbol.iterator](),_step145;!(_iteratorNormalCompletion145=(_step145=_iterator145.next()).done);_iteratorNormalCompletion145=true){var _t126=_step145.value;"style"!=_t126&&"class"!=_t126&&e.attributes.push(_t126);}}catch(err){_didIteratorError145=true;_iteratorError145=err;}finally{try{if(!_iteratorNormalCompletion145&&_iterator145["return"]!=null){_iterator145["return"]();}}finally{if(_didIteratorError145){throw _iteratorError145;}}}var i=t.getClassNames();var _iteratorNormalCompletion146=true;var _didIteratorError146=false;var _iteratorError146=undefined;try{for(var _iterator146=i[Symbol.iterator](),_step146;!(_iteratorNormalCompletion146=(_step146=_iterator146.next()).done);_iteratorNormalCompletion146=true){var _t127=_step146.value;e.classes.push(_t127);}}catch(err){_didIteratorError146=true;_iteratorError146=err;}finally{try{if(!_iteratorNormalCompletion146&&_iterator146["return"]!=null){_iterator146["return"]();}}finally{if(_didIteratorError146){throw _iteratorError146;}}}var o=t.getStyleNames();var _iteratorNormalCompletion147=true;var _didIteratorError147=false;var _iteratorError147=undefined;try{for(var _iterator147=o[Symbol.iterator](),_step147;!(_iteratorNormalCompletion147=(_step147=_iterator147.next()).done);_iteratorNormalCompletion147=true){var _t128=_step147.value;e.styles.push(_t128);}}catch(err){_didIteratorError147=true;_iteratorError147=err;}finally{try{if(!_iteratorNormalCompletion147&&_iterator147["return"]!=null){_iterator147["return"]();}}finally{if(_didIteratorError147){throw _iteratorError147;}}}return e;}},{key:"createFrom",value:function createFrom(t,e){if(e||(e=new Ia()),t.is("text"))return e.add(t),e;t.is("element")&&e.add(t,Ia.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);var _iteratorNormalCompletion148=true;var _didIteratorError148=false;var _iteratorError148=undefined;try{for(var _iterator148=t.getChildren()[Symbol.iterator](),_step148;!(_iteratorNormalCompletion148=(_step148=_iterator148.next()).done);_iteratorNormalCompletion148=true){var _n100=_step148.value;e=Ia.createFrom(_n100,e);}}catch(err){_didIteratorError148=true;_iteratorError148=err;}finally{try{if(!_iteratorNormalCompletion148&&_iterator148["return"]!=null){_iterator148["return"]();}}finally{if(_didIteratorError148){throw _iteratorError148;}}}return e;}}]);return Ia;}();var Na=/*#__PURE__*/function(){function Na(){_classCallCheck(this,Na);this._canConsumeName=null,this._consumables={attributes:new Map(),styles:new Map(),classes:new Map()};}_createClass(Na,[{key:"add",value:function add(t){t.name&&(this._canConsumeName=!0);for(var _e114 in this._consumables){_e114 in t&&this._add(_e114,t[_e114]);}}},{key:"test",value:function test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(var _e115 in this._consumables){if(_e115 in t){var _n101=this._test(_e115,t[_e115]);if(!0!==_n101)return _n101;}}return!0;}},{key:"consume",value:function consume(t){t.name&&(this._canConsumeName=!1);for(var _e116 in this._consumables){_e116 in t&&this._consume(_e116,t[_e116]);}}},{key:"revert",value:function revert(t){t.name&&(this._canConsumeName=!0);for(var _e117 in this._consumables){_e117 in t&&this._revert(_e117,t[_e117]);}}},{key:"_add",value:function _add(t,e){var n=Wt(e)?e:[e],i=this._consumables[t];var _iteratorNormalCompletion149=true;var _didIteratorError149=false;var _iteratorError149=undefined;try{for(var _iterator149=n[Symbol.iterator](),_step149;!(_iteratorNormalCompletion149=(_step149=_iterator149.next()).done);_iteratorNormalCompletion149=true){var _e118=_step149.value;if("attributes"===t&&("class"===_e118||"style"===_e118))throw new Gn.b("viewconsumable-invalid-attribute: Classes and styles should be handled separately.",this);i.set(_e118,!0);}}catch(err){_didIteratorError149=true;_iteratorError149=err;}finally{try{if(!_iteratorNormalCompletion149&&_iterator149["return"]!=null){_iterator149["return"]();}}finally{if(_didIteratorError149){throw _iteratorError149;}}}}},{key:"_test",value:function _test(t,e){var n=Wt(e)?e:[e],i=this._consumables[t];var _iteratorNormalCompletion150=true;var _didIteratorError150=false;var _iteratorError150=undefined;try{for(var _iterator150=n[Symbol.iterator](),_step150;!(_iteratorNormalCompletion150=(_step150=_iterator150.next()).done);_iteratorNormalCompletion150=true){var _e119=_step150.value;if("attributes"!==t||"class"!==_e119&&"style"!==_e119){var _t129=i.get(_e119);if(void 0===_t129)return null;if(!_t129)return!1;}else{var _t130="class"==_e119?"classes":"styles",_n102=this._test(_t130,_toConsumableArray(this._consumables[_t130].keys()));if(!0!==_n102)return _n102;}}}catch(err){_didIteratorError150=true;_iteratorError150=err;}finally{try{if(!_iteratorNormalCompletion150&&_iterator150["return"]!=null){_iterator150["return"]();}}finally{if(_didIteratorError150){throw _iteratorError150;}}}return!0;}},{key:"_consume",value:function _consume(t,e){var n=Wt(e)?e:[e],i=this._consumables[t];var _iteratorNormalCompletion151=true;var _didIteratorError151=false;var _iteratorError151=undefined;try{for(var _iterator151=n[Symbol.iterator](),_step151;!(_iteratorNormalCompletion151=(_step151=_iterator151.next()).done);_iteratorNormalCompletion151=true){var _e120=_step151.value;if("attributes"!==t||"class"!==_e120&&"style"!==_e120)i.set(_e120,!1);else{var _t131="class"==_e120?"classes":"styles";this._consume(_t131,_toConsumableArray(this._consumables[_t131].keys()));}}}catch(err){_didIteratorError151=true;_iteratorError151=err;}finally{try{if(!_iteratorNormalCompletion151&&_iterator151["return"]!=null){_iterator151["return"]();}}finally{if(_didIteratorError151){throw _iteratorError151;}}}}},{key:"_revert",value:function _revert(t,e){var n=Wt(e)?e:[e],i=this._consumables[t];var _iteratorNormalCompletion152=true;var _didIteratorError152=false;var _iteratorError152=undefined;try{for(var _iterator152=n[Symbol.iterator](),_step152;!(_iteratorNormalCompletion152=(_step152=_iterator152.next()).done);_iteratorNormalCompletion152=true){var _e121=_step152.value;if("attributes"!==t||"class"!==_e121&&"style"!==_e121){!1===i.get(_e121)&&i.set(_e121,!0);}else{var _t132="class"==_e121?"classes":"styles";this._revert(_t132,_toConsumableArray(this._consumables[_t132].keys()));}}}catch(err){_didIteratorError152=true;_iteratorError152=err;}finally{try{if(!_iteratorNormalCompletion152&&_iterator152["return"]!=null){_iterator152["return"]();}}finally{if(_didIteratorError152){throw _iteratorError152;}}}}}]);return Na;}();var Oa=/*#__PURE__*/function(){function Oa(){var _this49=this;_classCallCheck(this,Oa);this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",function(t,e){e[0]=new Ra(e[0]);},{priority:"highest"}),this.on("checkChild",function(t,e){e[0]=new Ra(e[0]),e[1]=_this49.getDefinition(e[1]);},{priority:"highest"});}_createClass(Oa,[{key:"register",value:function register(t,e){if(this._sourceDefinitions[t])throw new Gn.b("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache();}},{key:"extend",value:function extend(t,e){if(!this._sourceDefinitions[t])throw new Gn.b("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache();}},{key:"getDefinitions",value:function getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions;}},{key:"getDefinition",value:function getDefinition(t){var e;return e="string"==typeof t?t:t.is&&(t.is("text")||t.is("textProxy"))?"$text":t.name,this.getDefinitions()[e];}},{key:"isRegistered",value:function isRegistered(t){return!!this.getDefinition(t);}},{key:"isBlock",value:function isBlock(t){var e=this.getDefinition(t);return!(!e||!e.isBlock);}},{key:"isLimit",value:function isLimit(t){var e=this.getDefinition(t);return!!e&&!(!e.isLimit&&!e.isObject);}},{key:"isObject",value:function isObject(t){var e=this.getDefinition(t);return!(!e||!e.isObject);}},{key:"isInline",value:function isInline(t){var e=this.getDefinition(t);return!(!e||!e.isInline);}},{key:"checkChild",value:function checkChild(t,e){return!!e&&this._checkContextMatch(e,t);}},{key:"checkAttribute",value:function checkAttribute(t,e){var n=this.getDefinition(t.last);return!!n&&n.allowAttributes.includes(e);}},{key:"checkMerge",value:function checkMerge(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(t instanceof $s){var _e122=t.nodeBefore,_n103=t.nodeAfter;if(!(_e122 instanceof Hs))throw new Gn.b("schema-check-merge-no-element-before: The node before the merge position must be an element.",this);if(!(_n103 instanceof Hs))throw new Gn.b("schema-check-merge-no-element-after: The node after the merge position must be an element.",this);return this.checkMerge(_e122,_n103);}var _iteratorNormalCompletion153=true;var _didIteratorError153=false;var _iteratorError153=undefined;try{for(var _iterator153=e.getChildren()[Symbol.iterator](),_step153;!(_iteratorNormalCompletion153=(_step153=_iterator153.next()).done);_iteratorNormalCompletion153=true){var _n104=_step153.value;if(!this.checkChild(t,_n104))return!1;}}catch(err){_didIteratorError153=true;_iteratorError153=err;}finally{try{if(!_iteratorNormalCompletion153&&_iterator153["return"]!=null){_iterator153["return"]();}}finally{if(_didIteratorError153){throw _iteratorError153;}}}return!0;}},{key:"addChildCheck",value:function addChildCheck(t){this.on("checkChild",function(e,_ref7){var _ref8=_slicedToArray(_ref7,2),n=_ref8[0],i=_ref8[1];if(!i)return;var o=t(n,i);"boolean"==typeof o&&(e.stop(),e["return"]=o);},{priority:"high"});}},{key:"addAttributeCheck",value:function addAttributeCheck(t){this.on("checkAttribute",function(e,_ref9){var _ref10=_slicedToArray(_ref9,2),n=_ref10[0],i=_ref10[1];var o=t(n,i);"boolean"==typeof o&&(e.stop(),e["return"]=o);},{priority:"high"});}},{key:"setAttributeProperties",value:function setAttributeProperties(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e);}},{key:"getAttributeProperties",value:function getAttributeProperties(t){return this._attributeProperties[t]||{};}},{key:"getLimitElement",value:function getLimitElement(t){var e;if(t instanceof $s)e=t.parent;else{e=(t instanceof Gs?[t]:Array.from(t.getRanges())).reduce(function(t,e){var n=e.getCommonAncestor();return t?t.getCommonAncestor(n,{includeSelf:!0}):n;},null);}for(;!this.isLimit(e)&&e.parent;){e=e.parent;}return e;}},{key:"checkAttributeInSelection",value:function checkAttributeInSelection(t,e){if(t.isCollapsed){var _n105=[].concat(_toConsumableArray(t.getFirstPosition().getAncestors()),[new Bs("",t.getAttributes())]);return this.checkAttribute(_n105,e);}{var _n106=t.getRanges();var _iteratorNormalCompletion154=true;var _didIteratorError154=false;var _iteratorError154=undefined;try{for(var _iterator154=_n106[Symbol.iterator](),_step154;!(_iteratorNormalCompletion154=(_step154=_iterator154.next()).done);_iteratorNormalCompletion154=true){var _t133=_step154.value;var _iteratorNormalCompletion155=true;var _didIteratorError155=false;var _iteratorError155=undefined;try{for(var _iterator155=_t133[Symbol.iterator](),_step155;!(_iteratorNormalCompletion155=(_step155=_iterator155.next()).done);_iteratorNormalCompletion155=true){var _n107=_step155.value;if(this.checkAttribute(_n107.item,e))return!0;}}catch(err){_didIteratorError155=true;_iteratorError155=err;}finally{try{if(!_iteratorNormalCompletion155&&_iterator155["return"]!=null){_iterator155["return"]();}}finally{if(_didIteratorError155){throw _iteratorError155;}}}}}catch(err){_didIteratorError154=true;_iteratorError154=err;}finally{try{if(!_iteratorNormalCompletion154&&_iterator154["return"]!=null){_iterator154["return"]();}}finally{if(_didIteratorError154){throw _iteratorError154;}}}}return!1;}},{key:"getValidRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getValidRanges(t,e){var _iteratorNormalCompletion157,_didIteratorError157,_iteratorError157,_iterator157,_step157,_n108;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getValidRanges$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:t=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(t){var _iteratorNormalCompletion156,_didIteratorError156,_iteratorError156,_iterator156,_step156,_e123;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_iteratorNormalCompletion156=true;_didIteratorError156=false;_iteratorError156=undefined;_context22.prev=3;_iterator156=t[Symbol.iterator]();case 5:if(_iteratorNormalCompletion156=(_step156=_iterator156.next()).done){_context22.next=11;break;}_e123=_step156.value;return _context22.delegateYield(_e123.getMinimalFlatRanges(),"t0",8);case 8:_iteratorNormalCompletion156=true;_context22.next=5;break;case 11:_context22.next=17;break;case 13:_context22.prev=13;_context22.t1=_context22["catch"](3);_didIteratorError156=true;_iteratorError156=_context22.t1;case 17:_context22.prev=17;_context22.prev=18;if(!_iteratorNormalCompletion156&&_iterator156["return"]!=null){_iterator156["return"]();}case 20:_context22.prev=20;if(!_didIteratorError156){_context22.next=23;break;}throw _iteratorError156;case 23:return _context22.finish(20);case 24:return _context22.finish(17);case 25:case"end":return _context22.stop();}}},_callee,null,[[3,13,17,25],[18,,20,24]]);})(t);_iteratorNormalCompletion157=true;_didIteratorError157=false;_iteratorError157=undefined;_context23.prev=4;_iterator157=t[Symbol.iterator]();case 6:if(_iteratorNormalCompletion157=(_step157=_iterator157.next()).done){_context23.next=12;break;}_n108=_step157.value;return _context23.delegateYield(this._getValidRangesForRange(_n108,e),"t0",9);case 9:_iteratorNormalCompletion157=true;_context23.next=6;break;case 12:_context23.next=18;break;case 14:_context23.prev=14;_context23.t1=_context23["catch"](4);_didIteratorError157=true;_iteratorError157=_context23.t1;case 18:_context23.prev=18;_context23.prev=19;if(!_iteratorNormalCompletion157&&_iterator157["return"]!=null){_iterator157["return"]();}case 21:_context23.prev=21;if(!_didIteratorError157){_context23.next=24;break;}throw _iteratorError157;case 24:return _context23.finish(21);case 25:return _context23.finish(18);case 26:case"end":return _context23.stop();}}},getValidRanges,this,[[4,14,18,26],[19,,21,25]]);})},{key:"getNearestSelectionRange",value:function getNearestSelectionRange(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"both";if(this.checkChild(t,"$text"))return new Gs(t);var n,i;"both"!=e&&"backward"!=e||(n=new qs({startPosition:t,direction:"backward"})),"both"!=e&&"forward"!=e||(i=new qs({startPosition:t}));var _iteratorNormalCompletion158=true;var _didIteratorError158=false;var _iteratorError158=undefined;try{for(var _iterator158=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(t,e){var n,_e125,_t135;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:n=!1;case 1:if(n){_context24.next=18;break;}if(!(n=!0,t)){_context24.next=9;break;}_e125=t.next();_context24.t0=_e125.done;if(_context24.t0){_context24.next=9;break;}n=!1;_context24.next=9;return{walker:t,value:_e125.value};case 9:if(!e){_context24.next=16;break;}_t135=e.next();_context24.t1=_t135.done;if(_context24.t1){_context24.next=16;break;}n=!1;_context24.next=16;return{walker:e,value:_t135.value};case 16:_context24.next=1;break;case 18:case"end":return _context24.stop();}}},_callee2);})(n,i)[Symbol.iterator](),_step158;!(_iteratorNormalCompletion158=(_step158=_iterator158.next()).done);_iteratorNormalCompletion158=true){var _t134=_step158.value;var _e124=_t134.walker==n?"elementEnd":"elementStart",_i81=_t134.value;if(_i81.type==_e124&&this.isObject(_i81.item))return Gs._createOn(_i81.item);if(this.checkChild(_i81.nextPosition,"$text"))return new Gs(_i81.nextPosition);}}catch(err){_didIteratorError158=true;_iteratorError158=err;}finally{try{if(!_iteratorNormalCompletion158&&_iterator158["return"]!=null){_iterator158["return"]();}}finally{if(_didIteratorError158){throw _iteratorError158;}}}return null;}},{key:"findAllowedParent",value:function findAllowedParent(t,e){var n=t.parent;for(;n;){if(this.checkChild(n,e))return n;if(this.isLimit(n))return null;n=n.parent;}return null;}},{key:"removeDisallowedAttributes",value:function removeDisallowedAttributes(t,e){var _iteratorNormalCompletion159=true;var _didIteratorError159=false;var _iteratorError159=undefined;try{for(var _iterator159=t[Symbol.iterator](),_step159;!(_iteratorNormalCompletion159=(_step159=_iterator159.next()).done);_iteratorNormalCompletion159=true){var _n109=_step159.value;var _iteratorNormalCompletion160=true;var _didIteratorError160=false;var _iteratorError160=undefined;try{for(var _iterator160=_n109.getAttributeKeys()[Symbol.iterator](),_step160;!(_iteratorNormalCompletion160=(_step160=_iterator160.next()).done);_iteratorNormalCompletion160=true){var _t136=_step160.value;this.checkAttribute(_n109,_t136)||e.removeAttribute(_t136,_n109);}}catch(err){_didIteratorError160=true;_iteratorError160=err;}finally{try{if(!_iteratorNormalCompletion160&&_iterator160["return"]!=null){_iterator160["return"]();}}finally{if(_didIteratorError160){throw _iteratorError160;}}}_n109.is("element")&&this.removeDisallowedAttributes(_n109.getChildren(),e);}}catch(err){_didIteratorError159=true;_iteratorError159=err;}finally{try{if(!_iteratorNormalCompletion159&&_iterator159["return"]!=null){_iterator159["return"]();}}finally{if(_didIteratorError159){throw _iteratorError159;}}}}},{key:"createContext",value:function createContext(t){return new Ra(t);}},{key:"_clearCache",value:function _clearCache(){this._compiledDefinitions=null;}},{key:"_compile",value:function _compile(){var t={},e=this._sourceDefinitions,n=Object.keys(e);for(var _i82=0,_n110=n;_i82<_n110.length;_i82++){var _i87=_n110[_i82];t[_i87]=Da(e[_i87],_i87);}for(var _i83=0,_n111=n;_i83<_n111.length;_i83++){var _e126=_n111[_i83];La(t,_e126);}for(var _i84=0,_n112=n;_i84<_n112.length;_i84++){var _e127=_n112[_i84];ja(t,_e127);}for(var _i85=0,_n113=n;_i85<_n113.length;_i85++){var _e128=_n113[_i85];Va(t,_e128),za(t,_e128);}for(var _i86=0,_n114=n;_i86<_n114.length;_i86++){var _e129=_n114[_i86];Ba(t,_e129),Fa(t,_e129);}this._compiledDefinitions=t;}},{key:"_checkContextMatch",value:function _checkContextMatch(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:e.length-1;var i=e.getItem(n);if(t.allowIn.includes(i.name)){if(0==n)return!0;{var _t137=this.getDefinition(i);return this._checkContextMatch(_t137,e,n-1);}}return!1;}},{key:"_getValidRangesForRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _getValidRangesForRange(t,e){var n,i,_iteratorNormalCompletion161,_didIteratorError161,_iteratorError161,_iterator161,_step161,_o35;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _getValidRangesForRange$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:n=t.start,i=t.start;_iteratorNormalCompletion161=true;_didIteratorError161=false;_iteratorError161=undefined;_context25.prev=4;_iterator161=t.getItems({shallow:!0})[Symbol.iterator]();case 6:if(_iteratorNormalCompletion161=(_step161=_iterator161.next()).done){_context25.next=22;break;}_o35=_step161.value;_context25.t0=_o35.is("element");if(!_context25.t0){_context25.next=11;break;}return _context25.delegateYield(this._getValidRangesForRange(Gs._createIn(_o35),e),"t1",11);case 11:_context25.t2=this.checkAttribute(_o35,e);if(_context25.t2){_context25.next=18;break;}_context25.t3=n.isEqual(i);if(_context25.t3){_context25.next=17;break;}_context25.next=17;return new Gs(n,i);case 17:n=$s._createAfter(_o35);case 18:i=$s._createAfter(_o35);case 19:_iteratorNormalCompletion161=true;_context25.next=6;break;case 22:_context25.next=28;break;case 24:_context25.prev=24;_context25.t4=_context25["catch"](4);_didIteratorError161=true;_iteratorError161=_context25.t4;case 28:_context25.prev=28;_context25.prev=29;if(!_iteratorNormalCompletion161&&_iterator161["return"]!=null){_iterator161["return"]();}case 31:_context25.prev=31;if(!_didIteratorError161){_context25.next=34;break;}throw _iteratorError161;case 34:return _context25.finish(31);case 35:return _context25.finish(28);case 36:_context25.t5=n.isEqual(i);if(_context25.t5){_context25.next=40;break;}_context25.next=40;return new Gs(n,i);case 40:case"end":return _context25.stop();}}},_getValidRangesForRange,this,[[4,24,28,36],[29,,31,35]]);})}]);return Oa;}();ci(Oa,Fi);var Ra=/*#__PURE__*/function(){function Ra(t){_classCallCheck(this,Ra);if(t instanceof Ra)return t;"string"==typeof t?t=[t]:Array.isArray(t)||(t=t.getAncestors({includeSelf:!0})),t[0]&&"string"!=typeof t[0]&&t[0].is("documentFragment")&&t.shift(),this._items=t.map(qa);}_createClass(Ra,[{key:Symbol.iterator,value:function value(){return this._items[Symbol.iterator]();}},{key:"push",value:function push(t){var e=new Ra([t]);return e._items=[].concat(_toConsumableArray(this._items),_toConsumableArray(e._items)),e;}},{key:"getItem",value:function getItem(t){return this._items[t];}},{key:"getNames",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getNames(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getNames$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:return _context26.delegateYield(this._items.map(function(t){return t.name;}),"t0",1);case 1:case"end":return _context26.stop();}}},getNames,this);})},{key:"endsWith",value:function endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t);}},{key:"length",get:function get(){return this._items.length;}},{key:"last",get:function get(){return this._items[this._items.length-1];}}]);return Ra;}();function Da(t,e){var n={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(t,e){var _iteratorNormalCompletion162=true;var _didIteratorError162=false;var _iteratorError162=undefined;try{for(var _iterator162=t[Symbol.iterator](),_step162;!(_iteratorNormalCompletion162=(_step162=_iterator162.next()).done);_iteratorNormalCompletion162=true){var _n115=_step162.value;var _t138=Object.keys(_n115).filter(function(t){return t.startsWith("is");});var _iteratorNormalCompletion163=true;var _didIteratorError163=false;var _iteratorError163=undefined;try{for(var _iterator163=_t138[Symbol.iterator](),_step163;!(_iteratorNormalCompletion163=(_step163=_iterator163.next()).done);_iteratorNormalCompletion163=true){var _i88=_step163.value;e[_i88]=_n115[_i88];}}catch(err){_didIteratorError163=true;_iteratorError163=err;}finally{try{if(!_iteratorNormalCompletion163&&_iterator163["return"]!=null){_iterator163["return"]();}}finally{if(_didIteratorError163){throw _iteratorError163;}}}}}catch(err){_didIteratorError162=true;_iteratorError162=err;}finally{try{if(!_iteratorNormalCompletion162&&_iterator162["return"]!=null){_iterator162["return"]();}}finally{if(_didIteratorError162){throw _iteratorError162;}}}}(t,n),Ua(t,n,"allowIn"),Ua(t,n,"allowContentOf"),Ua(t,n,"allowWhere"),Ua(t,n,"allowAttributes"),Ua(t,n,"allowAttributesOf"),Ua(t,n,"inheritTypesFrom"),function(t,e){var _iteratorNormalCompletion164=true;var _didIteratorError164=false;var _iteratorError164=undefined;try{for(var _iterator164=t[Symbol.iterator](),_step164;!(_iteratorNormalCompletion164=(_step164=_iterator164.next()).done);_iteratorNormalCompletion164=true){var _n116=_step164.value;var _t139=_n116.inheritAllFrom;_t139&&(e.allowContentOf.push(_t139),e.allowWhere.push(_t139),e.allowAttributesOf.push(_t139),e.inheritTypesFrom.push(_t139));}}catch(err){_didIteratorError164=true;_iteratorError164=err;}finally{try{if(!_iteratorNormalCompletion164&&_iterator164["return"]!=null){_iterator164["return"]();}}finally{if(_didIteratorError164){throw _iteratorError164;}}}}(t,n),n;}function La(t,e){var _iteratorNormalCompletion165=true;var _didIteratorError165=false;var _iteratorError165=undefined;try{for(var _iterator165=t[e].allowContentOf[Symbol.iterator](),_step165;!(_iteratorNormalCompletion165=(_step165=_iterator165.next()).done);_iteratorNormalCompletion165=true){var _n117=_step165.value;if(t[_n117]){Ha(t,_n117).forEach(function(t){t.allowIn.push(e);});}}}catch(err){_didIteratorError165=true;_iteratorError165=err;}finally{try{if(!_iteratorNormalCompletion165&&_iterator165["return"]!=null){_iterator165["return"]();}}finally{if(_didIteratorError165){throw _iteratorError165;}}}delete t[e].allowContentOf;}function ja(t,e){var _iteratorNormalCompletion166=true;var _didIteratorError166=false;var _iteratorError166=undefined;try{for(var _iterator166=t[e].allowWhere[Symbol.iterator](),_step166;!(_iteratorNormalCompletion166=(_step166=_iterator166.next()).done);_iteratorNormalCompletion166=true){var _n118=_step166.value;var _i89=t[_n118];if(_i89){var _t$e$allowIn;var _n119=_i89.allowIn;(_t$e$allowIn=t[e].allowIn).push.apply(_t$e$allowIn,_toConsumableArray(_n119));}}}catch(err){_didIteratorError166=true;_iteratorError166=err;}finally{try{if(!_iteratorNormalCompletion166&&_iterator166["return"]!=null){_iterator166["return"]();}}finally{if(_didIteratorError166){throw _iteratorError166;}}}delete t[e].allowWhere;}function Va(t,e){var _iteratorNormalCompletion167=true;var _didIteratorError167=false;var _iteratorError167=undefined;try{for(var _iterator167=t[e].allowAttributesOf[Symbol.iterator](),_step167;!(_iteratorNormalCompletion167=(_step167=_iterator167.next()).done);_iteratorNormalCompletion167=true){var _n120=_step167.value;var _i90=t[_n120];if(_i90){var _t$e$allowAttributes;var _n121=_i90.allowAttributes;(_t$e$allowAttributes=t[e].allowAttributes).push.apply(_t$e$allowAttributes,_toConsumableArray(_n121));}}}catch(err){_didIteratorError167=true;_iteratorError167=err;}finally{try{if(!_iteratorNormalCompletion167&&_iterator167["return"]!=null){_iterator167["return"]();}}finally{if(_didIteratorError167){throw _iteratorError167;}}}delete t[e].allowAttributesOf;}function za(t,e){var n=t[e];var _iteratorNormalCompletion168=true;var _didIteratorError168=false;var _iteratorError168=undefined;try{for(var _iterator168=n.inheritTypesFrom[Symbol.iterator](),_step168;!(_iteratorNormalCompletion168=(_step168=_iterator168.next()).done);_iteratorNormalCompletion168=true){var _e130=_step168.value;var _i91=t[_e130];if(_i91){var _t140=Object.keys(_i91).filter(function(t){return t.startsWith("is");});var _iteratorNormalCompletion169=true;var _didIteratorError169=false;var _iteratorError169=undefined;try{for(var _iterator169=_t140[Symbol.iterator](),_step169;!(_iteratorNormalCompletion169=(_step169=_iterator169.next()).done);_iteratorNormalCompletion169=true){var _e131=_step169.value;_e131 in n||(n[_e131]=_i91[_e131]);}}catch(err){_didIteratorError169=true;_iteratorError169=err;}finally{try{if(!_iteratorNormalCompletion169&&_iterator169["return"]!=null){_iterator169["return"]();}}finally{if(_didIteratorError169){throw _iteratorError169;}}}}}}catch(err){_didIteratorError168=true;_iteratorError168=err;}finally{try{if(!_iteratorNormalCompletion168&&_iterator168["return"]!=null){_iterator168["return"]();}}finally{if(_didIteratorError168){throw _iteratorError168;}}}delete n.inheritTypesFrom;}function Ba(t,e){var n=t[e],i=n.allowIn.filter(function(e){return t[e];});n.allowIn=Array.from(new Set(i));}function Fa(t,e){var n=t[e];n.allowAttributes=Array.from(new Set(n.allowAttributes));}function Ua(t,e,n){var _iteratorNormalCompletion170=true;var _didIteratorError170=false;var _iteratorError170=undefined;try{for(var _iterator170=t[Symbol.iterator](),_step170;!(_iteratorNormalCompletion170=(_step170=_iterator170.next()).done);_iteratorNormalCompletion170=true){var _e$n;var _i92=_step170.value;"string"==typeof _i92[n]?e[n].push(_i92[n]):Array.isArray(_i92[n])&&(_e$n=e[n]).push.apply(_e$n,_toConsumableArray(_i92[n]));}}catch(err){_didIteratorError170=true;_iteratorError170=err;}finally{try{if(!_iteratorNormalCompletion170&&_iterator170["return"]!=null){_iterator170["return"]();}}finally{if(_didIteratorError170){throw _iteratorError170;}}}}function Ha(t,e){var n=t[e];return function(t){return Object.keys(t).map(function(e){return t[e];});}(t).filter(function(t){return t.allowIn.includes(n.name);});}function qa(t){return"string"==typeof t?{name:t,getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributeKeys$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:case"end":return _context27.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(){}}:{name:t.is("element")?t.name:"$text",getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributeKeys$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:return _context28.delegateYield(t.getAttributeKeys(),"t0",1);case 1:case"end":return _context28.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(e){return t.getAttribute(e);}};}var Wa=/*#__PURE__*/function(){function Wa(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Wa);this._splitParts=new Map(),this._modelCursor=null,this.conversionApi=Object.assign({},t),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this);}_createClass(Wa,[{key:"convert",value:function convert(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["$root"];this.fire("viewCleanup",t),this._modelCursor=function(t,e){var n;var _iteratorNormalCompletion171=true;var _didIteratorError171=false;var _iteratorError171=undefined;try{for(var _iterator171=new Ra(t)[Symbol.iterator](),_step171;!(_iteratorNormalCompletion171=(_step171=_iterator171.next()).done);_iteratorNormalCompletion171=true){var _i93=_step171.value;var _t141={};var _iteratorNormalCompletion172=true;var _didIteratorError172=false;var _iteratorError172=undefined;try{for(var _iterator172=_i93.getAttributeKeys()[Symbol.iterator](),_step172;!(_iteratorNormalCompletion172=(_step172=_iterator172.next()).done);_iteratorNormalCompletion172=true){var _e132=_step172.value;_t141[_e132]=_i93.getAttribute(_e132);}}catch(err){_didIteratorError172=true;_iteratorError172=err;}finally{try{if(!_iteratorNormalCompletion172&&_iterator172["return"]!=null){_iterator172["return"]();}}finally{if(_didIteratorError172){throw _iteratorError172;}}}var _o36=e.createElement(_i93.name,_t141);n&&e.append(_o36,n),n=$s._createAt(_o36,0);}}catch(err){_didIteratorError171=true;_iteratorError171=err;}finally{try{if(!_iteratorNormalCompletion171&&_iterator171["return"]!=null){_iterator171["return"]();}}finally{if(_didIteratorError171){throw _iteratorError171;}}}return n;}(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=Ia.createFrom(t),this.conversionApi.store={};var _this$_convertItem=this._convertItem(t,this._modelCursor),i=_this$_convertItem.modelRange,o=e.createDocumentFragment();if(i){this._removeEmptyElements();for(var _i94=0,_Array$from5=Array.from(this._modelCursor.parent.getChildren());_i94<_Array$from5.length;_i94++){var _t144=_Array$from5[_i94];e.append(_t144,o);}o.markers=function(t,e){var n=new Set(),i=new Map(),o=Gs._createIn(t).getItems();var _iteratorNormalCompletion173=true;var _didIteratorError173=false;var _iteratorError173=undefined;try{for(var _iterator173=o[Symbol.iterator](),_step173;!(_iteratorNormalCompletion173=(_step173=_iterator173.next()).done);_iteratorNormalCompletion173=true){var _t142=_step173.value;"$marker"==_t142.name&&n.add(_t142);}}catch(err){_didIteratorError173=true;_iteratorError173=err;}finally{try{if(!_iteratorNormalCompletion173&&_iterator173["return"]!=null){_iterator173["return"]();}}finally{if(_didIteratorError173){throw _iteratorError173;}}}var _iteratorNormalCompletion174=true;var _didIteratorError174=false;var _iteratorError174=undefined;try{for(var _iterator174=n[Symbol.iterator](),_step174;!(_iteratorNormalCompletion174=(_step174=_iterator174.next()).done);_iteratorNormalCompletion174=true){var _t143=_step174.value;var _n122=_t143.getAttribute("data-name"),_o37=e.createPositionBefore(_t143);i.has(_n122)?i.get(_n122).end=_o37.clone():i.set(_n122,new Gs(_o37.clone())),e.remove(_t143);}}catch(err){_didIteratorError174=true;_iteratorError174=err;}finally{try{if(!_iteratorNormalCompletion174&&_iterator174["return"]!=null){_iterator174["return"]();}}finally{if(_didIteratorError174){throw _iteratorError174;}}}return i;}(o,e);}return this._modelCursor=null,this._splitParts.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o;}},{key:"_convertItem",value:function _convertItem(t,e){var n=Object.assign({viewItem:t,modelCursor:e,modelRange:null});if(t.is("element")?this.fire("element:"+t.name,n,this.conversionApi):t.is("text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof Gs))throw new Gn.b("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor};}},{key:"_convertChildren",value:function _convertChildren(t,e){var n=new Gs(e);var i=e;for(var _i95=0,_Array$from6=Array.from(t.getChildren());_i95<_Array$from6.length;_i95++){var _e133=_Array$from6[_i95];var _t145=this._convertItem(_e133,i);_t145.modelRange instanceof Gs&&(n.end=_t145.modelRange.end,i=_t145.modelCursor);}return{modelRange:n,modelCursor:i};}},{key:"_splitToAllowedParent",value:function _splitToAllowedParent(t,e){var n=this.conversionApi.schema.findAllowedParent(e,t);if(!n)return null;if(n===e.parent)return{position:e};if(this._modelCursor.parent.getAncestors().includes(n))return null;var i=this.conversionApi.writer.split(e,n),o=[];var _iteratorNormalCompletion175=true;var _didIteratorError175=false;var _iteratorError175=undefined;try{for(var _iterator175=i.range.getWalker()[Symbol.iterator](),_step175;!(_iteratorNormalCompletion175=(_step175=_iterator175.next()).done);_iteratorNormalCompletion175=true){var _t146=_step175.value;if("elementEnd"==_t146.type)o.push(_t146.item);else{var _e134=o.pop(),_n123=_t146.item;this._registerSplitPair(_e134,_n123);}}}catch(err){_didIteratorError175=true;_iteratorError175=err;}finally{try{if(!_iteratorNormalCompletion175&&_iterator175["return"]!=null){_iterator175["return"]();}}finally{if(_didIteratorError175){throw _iteratorError175;}}}return{position:i.position,cursorParent:i.range.end.parent};}},{key:"_registerSplitPair",value:function _registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);var n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e);}},{key:"_getSplitParts",value:function _getSplitParts(t){var e;return e=this._splitParts.has(t)?this._splitParts.get(t):[t];}},{key:"_removeEmptyElements",value:function _removeEmptyElements(){var t=!1;var _iteratorNormalCompletion176=true;var _didIteratorError176=false;var _iteratorError176=undefined;try{for(var _iterator176=this._splitParts.keys()[Symbol.iterator](),_step176;!(_iteratorNormalCompletion176=(_step176=_iterator176.next()).done);_iteratorNormalCompletion176=true){var _e135=_step176.value;_e135.isEmpty&&(this.conversionApi.writer.remove(_e135),this._splitParts["delete"](_e135),t=!0);}}catch(err){_didIteratorError176=true;_iteratorError176=err;}finally{try{if(!_iteratorNormalCompletion176&&_iterator176["return"]!=null){_iterator176["return"]();}}finally{if(_didIteratorError176){throw _iteratorError176;}}}t&&this._removeEmptyElements();}}]);return Wa;}();ci(Wa,ei);var Ya=/*#__PURE__*/function(){function Ya(t,e){var _this50=this;_classCallCheck(this,Ya);this.model=t,this.processor=e,this.mapper=new Qs(),this.downcastDispatcher=new Zs({mapper:this.mapper}),this.downcastDispatcher.on("insert:$text",function(t,e,n){if(!n.consumable.consume(e.item,"insert"))return;var i=n.writer,o=n.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(o,r);},{priority:"lowest"}),this.upcastDispatcher=new Wa({schema:t.schema}),this.upcastDispatcher.on("text",function(t,e,n){if(n.schema.checkChild(e.modelCursor,"$text")&&n.consumable.consume(e.viewItem)){var _t147=n.writer.createText(e.viewItem.data);n.writer.insert(_t147,e.modelCursor),e.modelRange=Gs._createFromPositionAndShift(e.modelCursor,_t147.offsetSize),e.modelCursor=e.modelRange.end;}},{priority:"lowest"}),this.upcastDispatcher.on("element",function(t,e,n){if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){var _n$convertChildren=n.convertChildren(e.viewItem,e.modelCursor),_t148=_n$convertChildren.modelRange,_i96=_n$convertChildren.modelCursor;e.modelRange=_t148,e.modelCursor=_i96;}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",function(t,e,n){if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){var _n$convertChildren2=n.convertChildren(e.viewItem,e.modelCursor),_t149=_n$convertChildren2.modelRange,_i97=_n$convertChildren2.modelCursor;e.modelRange=_t149,e.modelCursor=_i97;}},{priority:"lowest"}),this.decorate("init"),this.on("init",function(){_this50.fire("ready");},{priority:"lowest"});}_createClass(Ya,[{key:"get",value:function get(t){var _ref11=t||{},_ref11$rootName=_ref11.rootName,e=_ref11$rootName===void 0?"main":_ref11$rootName,_ref11$trim=_ref11.trim,n=_ref11$trim===void 0?"empty":_ref11$trim;if(!this._checkIfRootsExists([e]))throw new Gn.b("datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.",this);var i=this.model.document.getRoot(e);return"empty"!==n||this.model.hasContent(i,{ignoreWhitespaces:!0})?this.stringify(i):"";}},{key:"stringify",value:function stringify(t){var e=this.toView(t);return this.processor.toData(e);}},{key:"toView",value:function toView(t){this.mapper.clearBindings();var e=Gs._createIn(t),n=new Ao(),i=new To(new ro());if(this.mapper.bindElements(t,n),this.downcastDispatcher.convertInsert(e,i),!t.is("documentFragment")){var _e136=function(t){var e=[],n=t.root.document;if(!n)return[];var i=Gs._createIn(t);var _iteratorNormalCompletion177=true;var _didIteratorError177=false;var _iteratorError177=undefined;try{for(var _iterator177=n.model.markers[Symbol.iterator](),_step177;!(_iteratorNormalCompletion177=(_step177=_iterator177.next()).done);_iteratorNormalCompletion177=true){var _t150=_step177.value;var _n124=i.getIntersection(_t150.getRange());_n124&&e.push([_t150.name,_n124]);}}catch(err){_didIteratorError177=true;_iteratorError177=err;}finally{try{if(!_iteratorNormalCompletion177&&_iterator177["return"]!=null){_iterator177["return"]();}}finally{if(_didIteratorError177){throw _iteratorError177;}}}return e;}(t);var _iteratorNormalCompletion178=true;var _didIteratorError178=false;var _iteratorError178=undefined;try{for(var _iterator178=_e136[Symbol.iterator](),_step178;!(_iteratorNormalCompletion178=(_step178=_iterator178.next()).done);_iteratorNormalCompletion178=true){var _step178$value=_slicedToArray(_step178.value,2),_t151=_step178$value[0],_n125=_step178$value[1];this.downcastDispatcher.convertMarkerAdd(_t151,_n125,i);}}catch(err){_didIteratorError178=true;_iteratorError178=err;}finally{try{if(!_iteratorNormalCompletion178&&_iterator178["return"]!=null){_iterator178["return"]();}}finally{if(_didIteratorError178){throw _iteratorError178;}}}}return n;}},{key:"init",value:function init(t){var _this51=this;if(this.model.document.version)throw new Gn.b("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.",this);var e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new Gn.b("datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.",this);return this.model.enqueueChange("transparent",function(t){for(var _i98=0,_Object$keys=Object.keys(e);_i98<_Object$keys.length;_i98++){var _n126=_Object$keys[_i98];var _i99=_this51.model.document.getRoot(_n126);t.insert(_this51.parse(e[_n126],_i99),_i99,0);}}),Promise.resolve();}},{key:"set",value:function set(t){var _this52=this;var e={};if("string"==typeof t?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new Gn.b("datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.",this);this.model.enqueueChange("transparent",function(t){t.setSelection(null),t.removeSelectionAttribute(_this52.model.document.selection.getAttributeKeys());for(var _i100=0,_Object$keys2=Object.keys(e);_i100<_Object$keys2.length;_i100++){var _n127=_Object$keys2[_i100];var _i101=_this52.model.document.getRoot(_n127);t.remove(t.createRangeIn(_i101)),t.insert(_this52.parse(e[_n127],_i101),_i101,0);}});}},{key:"parse",value:function parse(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";var n=this.processor.toView(t);return this.toModel(n,e);}},{key:"toModel",value:function toModel(t){var _this53=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";return this.model.change(function(n){return _this53.upcastDispatcher.convert(t,n,e);});}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_checkIfRootsExists",value:function _checkIfRootsExists(t){var _iteratorNormalCompletion179=true;var _didIteratorError179=false;var _iteratorError179=undefined;try{for(var _iterator179=t[Symbol.iterator](),_step179;!(_iteratorNormalCompletion179=(_step179=_iterator179.next()).done);_iteratorNormalCompletion179=true){var _e137=_step179.value;if(!this.model.document.getRootNames().includes(_e137))return!1;}}catch(err){_didIteratorError179=true;_iteratorError179=err;}finally{try{if(!_iteratorNormalCompletion179&&_iterator179["return"]!=null){_iterator179["return"]();}}finally{if(_didIteratorError179){throw _iteratorError179;}}}return!0;}}]);return Ya;}();ci(Ya,Fi);var $a=/*#__PURE__*/function(){function $a(t,e){_classCallCheck(this,$a);this._helpers=new Map(),this._downcast=Array.isArray(t)?t:[t],this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Array.isArray(e)?e:[e],this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1});}_createClass($a,[{key:"addAlias",value:function addAlias(t,e){var n=this._downcast.includes(e);if(!this._upcast.includes(e)&&!n)throw new Gn.b("conversion-add-alias-dispatcher-not-registered: Trying to register and alias for a dispatcher that nas not been registered.",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:n});}},{key:"for",value:function _for(t){if(!this._helpers.has(t))throw new Gn.b("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.",this);return this._helpers.get(t);}},{key:"elementToElement",value:function elementToElement(t){this["for"]("downcast").elementToElement(t);var _iteratorNormalCompletion180=true;var _didIteratorError180=false;var _iteratorError180=undefined;try{for(var _iterator180=Ga(t)[Symbol.iterator](),_step180;!(_iteratorNormalCompletion180=(_step180=_iterator180.next()).done);_iteratorNormalCompletion180=true){var _ref13=_step180.value;var _e138=_ref13.model,_n128=_ref13.view;this["for"]("upcast").elementToElement({model:_e138,view:_n128,converterPriority:t.converterPriority});}}catch(err){_didIteratorError180=true;_iteratorError180=err;}finally{try{if(!_iteratorNormalCompletion180&&_iterator180["return"]!=null){_iterator180["return"]();}}finally{if(_didIteratorError180){throw _iteratorError180;}}}}},{key:"attributeToElement",value:function attributeToElement(t){this["for"]("downcast").attributeToElement(t);var _iteratorNormalCompletion181=true;var _didIteratorError181=false;var _iteratorError181=undefined;try{for(var _iterator181=Ga(t)[Symbol.iterator](),_step181;!(_iteratorNormalCompletion181=(_step181=_iterator181.next()).done);_iteratorNormalCompletion181=true){var _ref15=_step181.value;var _e139=_ref15.model,_n129=_ref15.view;this["for"]("upcast").elementToAttribute({view:_n129,model:_e139,converterPriority:t.converterPriority});}}catch(err){_didIteratorError181=true;_iteratorError181=err;}finally{try{if(!_iteratorNormalCompletion181&&_iterator181["return"]!=null){_iterator181["return"]();}}finally{if(_didIteratorError181){throw _iteratorError181;}}}}},{key:"attributeToAttribute",value:function attributeToAttribute(t){this["for"]("downcast").attributeToAttribute(t);var _iteratorNormalCompletion182=true;var _didIteratorError182=false;var _iteratorError182=undefined;try{for(var _iterator182=Ga(t)[Symbol.iterator](),_step182;!(_iteratorNormalCompletion182=(_step182=_iterator182.next()).done);_iteratorNormalCompletion182=true){var _ref17=_step182.value;var _e140=_ref17.model,_n130=_ref17.view;this["for"]("upcast").attributeToAttribute({view:_n130,model:_e140});}}catch(err){_didIteratorError182=true;_iteratorError182=err;}finally{try{if(!_iteratorNormalCompletion182&&_iterator182["return"]!=null){_iterator182["return"]();}}finally{if(_didIteratorError182){throw _iteratorError182;}}}}},{key:"_createConversionHelpers",value:function _createConversionHelpers(_ref18){var t=_ref18.name,e=_ref18.dispatchers,n=_ref18.isDowncast;if(this._helpers.has(t))throw new Gn.b("conversion-group-exists: Trying to register a group name that has already been registered.",this);var i=n?new fa(e):new ka(e);this._helpers.set(t,i);}}]);return $a;}();function Ga(t){var _iteratorNormalCompletion183,_didIteratorError183,_iteratorError183,_iterator183,_step183,_e141;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function Ga$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(!t.model.values){_context29.next=28;break;}_iteratorNormalCompletion183=true;_didIteratorError183=false;_iteratorError183=undefined;_context29.prev=4;_iterator183=t.model.values[Symbol.iterator]();case 6:if(_iteratorNormalCompletion183=(_step183=_iterator183.next()).done){_context29.next=12;break;}_e141=_step183.value;return _context29.delegateYield(Qa({key:t.model.key,value:_e141},t.view[_e141],t.upcastAlso?t.upcastAlso[_e141]:void 0),"t0",9);case 9:_iteratorNormalCompletion183=true;_context29.next=6;break;case 12:_context29.next=18;break;case 14:_context29.prev=14;_context29.t1=_context29["catch"](4);_didIteratorError183=true;_iteratorError183=_context29.t1;case 18:_context29.prev=18;_context29.prev=19;if(!_iteratorNormalCompletion183&&_iterator183["return"]!=null){_iterator183["return"]();}case 21:_context29.prev=21;if(!_didIteratorError183){_context29.next=24;break;}throw _iteratorError183;case 24:return _context29.finish(21);case 25:return _context29.finish(18);case 26:_context29.next=29;break;case 28:return _context29.delegateYield(Qa(t.model,t.view,t.upcastAlso),"t2",29);case 29:case"end":return _context29.stop();}}},_marked,null,[[4,14,18,26],[19,,21,25]]);}function Qa(t,e,n){var _iteratorNormalCompletion184,_didIteratorError184,_iteratorError184,_iterator184,_step184,_e142;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function Qa$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return{model:t,view:e};case 2:if(!n){_context30.next=30;break;}n=Array.isArray(n)?n:[n];_iteratorNormalCompletion184=true;_didIteratorError184=false;_iteratorError184=undefined;_context30.prev=7;_iterator184=n[Symbol.iterator]();case 9:if(_iteratorNormalCompletion184=(_step184=_iterator184.next()).done){_context30.next=16;break;}_e142=_step184.value;_context30.next=13;return{model:t,view:_e142};case 13:_iteratorNormalCompletion184=true;_context30.next=9;break;case 16:_context30.next=22;break;case 18:_context30.prev=18;_context30.t0=_context30["catch"](7);_didIteratorError184=true;_iteratorError184=_context30.t0;case 22:_context30.prev=22;_context30.prev=23;if(!_iteratorNormalCompletion184&&_iterator184["return"]!=null){_iterator184["return"]();}case 25:_context30.prev=25;if(!_didIteratorError184){_context30.next=28;break;}throw _iteratorError184;case 28:return _context30.finish(25);case 29:return _context30.finish(22);case 30:case"end":return _context30.stop();}}},_marked2,null,[[7,18,22,30],[23,,25,29]]);}var Ka=/*#__PURE__*/function(){function Ka(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";_classCallCheck(this,Ka);this.operations=[],this.type=t;}_createClass(Ka,[{key:"addOperation",value:function addOperation(t){return t.batch=this,this.operations.push(t),t;}},{key:"baseVersion",get:function get(){var _iteratorNormalCompletion185=true;var _didIteratorError185=false;var _iteratorError185=undefined;try{for(var _iterator185=this.operations[Symbol.iterator](),_step185;!(_iteratorNormalCompletion185=(_step185=_iterator185.next()).done);_iteratorNormalCompletion185=true){var _t152=_step185.value;if(null!==_t152.baseVersion)return _t152.baseVersion;}}catch(err){_didIteratorError185=true;_iteratorError185=err;}finally{try{if(!_iteratorNormalCompletion185&&_iterator185["return"]!=null){_iterator185["return"]();}}finally{if(_didIteratorError185){throw _iteratorError185;}}}return null;}}]);return Ka;}();var Ja=/*#__PURE__*/function(){function Ja(t){_classCallCheck(this,Ja);this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null;}_createClass(Ja,[{key:"_validate",value:function _validate(){}},{key:"toJSON",value:function toJSON(){var t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t;}}],[{key:"fromJSON",value:function fromJSON(t){return new this(t.baseVersion);}},{key:"className",get:function get(){return"Operation";}}]);return Ja;}();var Za=/*#__PURE__*/function(){function Za(t){_classCallCheck(this,Za);this.markers=new Map(),this._children=new Us(),t&&this._insertChild(0,t);}_createClass(Za,[{key:Symbol.iterator,value:function value(){return this.getChildren();}},{key:"is",value:function is(t){return"documentFragment"==t||"model:documentFragment"==t;}},{key:"getChild",value:function getChild(t){return this._children.getNode(t);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(t){return this._children.getNodeIndex(t);}},{key:"getChildStartOffset",value:function getChildStartOffset(t){return this._children.getNodeStartOffset(t);}},{key:"getPath",value:function getPath(){return[];}},{key:"getNodeByPath",value:function getNodeByPath(t){var e=this;var _iteratorNormalCompletion186=true;var _didIteratorError186=false;var _iteratorError186=undefined;try{for(var _iterator186=t[Symbol.iterator](),_step186;!(_iteratorNormalCompletion186=(_step186=_iterator186.next()).done);_iteratorNormalCompletion186=true){var _n131=_step186.value;e=e.getChild(e.offsetToIndex(_n131));}}catch(err){_didIteratorError186=true;_iteratorError186=err;}finally{try{if(!_iteratorNormalCompletion186&&_iterator186["return"]!=null){_iterator186["return"]();}}finally{if(_didIteratorError186){throw _iteratorError186;}}}return e;}},{key:"offsetToIndex",value:function offsetToIndex(t){return this._children.offsetToIndex(t);}},{key:"toJSON",value:function toJSON(){var t=[];var _iteratorNormalCompletion187=true;var _didIteratorError187=false;var _iteratorError187=undefined;try{for(var _iterator187=this._children[Symbol.iterator](),_step187;!(_iteratorNormalCompletion187=(_step187=_iterator187.next()).done);_iteratorNormalCompletion187=true){var _e143=_step187.value;t.push(_e143.toJSON());}}catch(err){_didIteratorError187=true;_iteratorError187=err;}finally{try{if(!_iteratorNormalCompletion187&&_iterator187["return"]!=null){_iterator187["return"]();}}finally{if(_didIteratorError187){throw _iteratorError187;}}}return t;}},{key:"_appendChild",value:function _appendChild(t){this._insertChild(this.childCount,t);}},{key:"_insertChild",value:function _insertChild(t,e){var n=function(t){if("string"==typeof t)return[new Bs(t)];pi(t)||(t=[t]);return Array.from(t).map(function(t){return"string"==typeof t?new Bs(t):t instanceof Fs?new Bs(t.data,t.getAttributes()):t;});}(e);var _iteratorNormalCompletion188=true;var _didIteratorError188=false;var _iteratorError188=undefined;try{for(var _iterator188=n[Symbol.iterator](),_step188;!(_iteratorNormalCompletion188=(_step188=_iterator188.next()).done);_iteratorNormalCompletion188=true){var _t153=_step188.value;null!==_t153.parent&&_t153._remove(),_t153.parent=this;}}catch(err){_didIteratorError188=true;_iteratorError188=err;}finally{try{if(!_iteratorNormalCompletion188&&_iterator188["return"]!=null){_iterator188["return"]();}}finally{if(_didIteratorError188){throw _iteratorError188;}}}this._children._insertNodes(t,n);}},{key:"_removeChildren",value:function _removeChildren(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var n=this._children._removeNodes(t,e);var _iteratorNormalCompletion189=true;var _didIteratorError189=false;var _iteratorError189=undefined;try{for(var _iterator189=n[Symbol.iterator](),_step189;!(_iteratorNormalCompletion189=(_step189=_iterator189.next()).done);_iteratorNormalCompletion189=true){var _t154=_step189.value;_t154.parent=null;}}catch(err){_didIteratorError189=true;_iteratorError189=err;}finally{try{if(!_iteratorNormalCompletion189&&_iterator189["return"]!=null){_iterator189["return"]();}}finally{if(_didIteratorError189){throw _iteratorError189;}}}return n;}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return 0===this.childCount;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}}],[{key:"fromJSON",value:function fromJSON(t){var e=[];var _iteratorNormalCompletion190=true;var _didIteratorError190=false;var _iteratorError190=undefined;try{for(var _iterator190=t[Symbol.iterator](),_step190;!(_iteratorNormalCompletion190=(_step190=_iterator190.next()).done);_iteratorNormalCompletion190=true){var _n132=_step190.value;_n132.name?e.push(Hs.fromJSON(_n132)):e.push(Bs.fromJSON(_n132));}}catch(err){_didIteratorError190=true;_iteratorError190=err;}finally{try{if(!_iteratorNormalCompletion190&&_iterator190["return"]!=null){_iterator190["return"]();}}finally{if(_didIteratorError190){throw _iteratorError190;}}}return new Za(e);}}]);return Za;}();function Xa(t,e){var n=(e=nc(e)).reduce(function(t,e){return t+e.offsetSize;},0),i=t.parent;oc(t);var o=t.index;return i._insertChild(o,e),ic(i,o+e.length),ic(i,o),new Gs(t,t.getShiftedBy(n));}function tc(t){if(!t.isFlat)throw new Gn.b("operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.",this);var e=t.start.parent;oc(t.start),oc(t.end);var n=e._removeChildren(t.start.index,t.end.index-t.start.index);return ic(e,t.start.index),n;}function ec(t,e){if(!t.isFlat)throw new Gn.b("operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.",this);var n=tc(t);return Xa(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),n);}function nc(t){var e=[];t instanceof Array||(t=[t]);for(var _n133=0;_n133<t.length;_n133++){if("string"==typeof t[_n133])e.push(new Bs(t[_n133]));else if(t[_n133]instanceof Fs)e.push(new Bs(t[_n133].data,t[_n133].getAttributes()));else if(t[_n133]instanceof Za||t[_n133]instanceof Us){var _iteratorNormalCompletion191=true;var _didIteratorError191=false;var _iteratorError191=undefined;try{for(var _iterator191=t[_n133][Symbol.iterator](),_step191;!(_iteratorNormalCompletion191=(_step191=_iterator191.next()).done);_iteratorNormalCompletion191=true){var _i102=_step191.value;e.push(_i102);}}catch(err){_didIteratorError191=true;_iteratorError191=err;}finally{try{if(!_iteratorNormalCompletion191&&_iterator191["return"]!=null){_iterator191["return"]();}}finally{if(_didIteratorError191){throw _iteratorError191;}}}}else t[_n133]instanceof zs&&e.push(t[_n133]);}for(var _t155=1;_t155<e.length;_t155++){var _n134=e[_t155],_i103=e[_t155-1];_n134 instanceof Bs&&_i103 instanceof Bs&&rc(_n134,_i103)&&(e.splice(_t155-1,2,new Bs(_i103.data+_n134.data,_i103.getAttributes())),_t155--);}return e;}function ic(t,e){var n=t.getChild(e-1),i=t.getChild(e);if(n&&i&&n.is("text")&&i.is("text")&&rc(n,i)){var _o38=new Bs(n.data+i.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,_o38);}}function oc(t){var e=t.textNode,n=t.parent;if(e){var _i104=t.offset-e.startOffset,_o39=e.index;n._removeChildren(_o39,1);var _r15=new Bs(e.data.substr(0,_i104),e.getAttributes()),_s12=new Bs(e.data.substr(_i104),e.getAttributes());n._insertChild(_o39,[_r15,_s12]);}}function rc(t,e){var n=t.getAttributes(),i=e.getAttributes();var _iteratorNormalCompletion192=true;var _didIteratorError192=false;var _iteratorError192=undefined;try{for(var _iterator192=n[Symbol.iterator](),_step192;!(_iteratorNormalCompletion192=(_step192=_iterator192.next()).done);_iteratorNormalCompletion192=true){var _t156=_step192.value;if(_t156[1]!==e.getAttribute(_t156[0]))return!1;i.next();}}catch(err){_didIteratorError192=true;_iteratorError192=err;}finally{try{if(!_iteratorNormalCompletion192&&_iterator192["return"]!=null){_iterator192["return"]();}}finally{if(_didIteratorError192){throw _iteratorError192;}}}return i.next().done;}var sc=function sc(t,e){return Kr(t,e);};var ac=/*#__PURE__*/function(_Ja){_inherits(ac,_Ja);function ac(t,e,n,i,o){var _this54;_classCallCheck(this,ac);_this54=_possibleConstructorReturn(this,_getPrototypeOf(ac).call(this,o)),_this54.range=t.clone(),_this54.key=e,_this54.oldValue=void 0===n?null:n,_this54.newValue=void 0===i?null:i;return _this54;}_createClass(ac,[{key:"clone",value:function clone(){return new ac(this.range,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new ac(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(ac.prototype),"toJSON",this).call(this);return t.range=this.range.toJSON(),t;}},{key:"_validate",value:function _validate(){if(!this.range.isFlat)throw new Gn.b("attribute-operation-range-not-flat: The range to change is not flat.",this);var _iteratorNormalCompletion193=true;var _didIteratorError193=false;var _iteratorError193=undefined;try{for(var _iterator193=this.range.getItems({shallow:!0})[Symbol.iterator](),_step193;!(_iteratorNormalCompletion193=(_step193=_iterator193.next()).done);_iteratorNormalCompletion193=true){var _t157=_step193.value;if(null!==this.oldValue&&!sc(_t157.getAttribute(this.key),this.oldValue))throw new Gn.b("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{item:_t157,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&_t157.hasAttribute(this.key))throw new Gn.b("attribute-operation-attribute-exists: The attribute with given key already exists.",this,{node:_t157,key:this.key});}}catch(err){_didIteratorError193=true;_iteratorError193=err;}finally{try{if(!_iteratorNormalCompletion193&&_iterator193["return"]!=null){_iterator193["return"]();}}finally{if(_didIteratorError193){throw _iteratorError193;}}}}},{key:"_execute",value:function _execute(){sc(this.oldValue,this.newValue)||function(t,e,n){oc(t.start),oc(t.end);var _iteratorNormalCompletion194=true;var _didIteratorError194=false;var _iteratorError194=undefined;try{for(var _iterator194=t.getItems({shallow:!0})[Symbol.iterator](),_step194;!(_iteratorNormalCompletion194=(_step194=_iterator194.next()).done);_iteratorNormalCompletion194=true){var _i105=_step194.value;var _t158=_i105.is("textProxy")?_i105.textNode:_i105;null!==n?_t158._setAttribute(e,n):_t158._removeAttribute(e),ic(_t158.parent,_t158.index);}}catch(err){_didIteratorError194=true;_iteratorError194=err;}finally{try{if(!_iteratorNormalCompletion194&&_iterator194["return"]!=null){_iterator194["return"]();}}finally{if(_didIteratorError194){throw _iteratorError194;}}}ic(t.end.parent,t.end.index);}(this.range,this.key,this.newValue);}},{key:"type",get:function get(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute";}}],[{key:"fromJSON",value:function fromJSON(t,e){return new ac(Gs.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion);}},{key:"className",get:function get(){return"AttributeOperation";}}]);return ac;}(Ja);var cc=/*#__PURE__*/function(_Ja2){_inherits(cc,_Ja2);function cc(t,e){var _this55;_classCallCheck(this,cc);_this55=_possibleConstructorReturn(this,_getPrototypeOf(cc).call(this,null)),_this55.sourcePosition=t.clone(),_this55.howMany=e;return _this55;}_createClass(cc,[{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(cc.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t;}},{key:"_validate",value:function _validate(){if(this.sourcePosition.root.document)throw new Gn.b("detach-operation-on-document-node: Cannot detach document node.",this);}},{key:"_execute",value:function _execute(){tc(Gs._createFromPositionAndShift(this.sourcePosition,this.howMany));}},{key:"type",get:function get(){return"detach";}}],[{key:"className",get:function get(){return"DetachOperation";}}]);return cc;}(Ja);var lc=/*#__PURE__*/function(_Ja3){_inherits(lc,_Ja3);function lc(t,e,n,i){var _this56;_classCallCheck(this,lc);_this56=_possibleConstructorReturn(this,_getPrototypeOf(lc).call(this,i)),_this56.sourcePosition=t.clone(),_this56.sourcePosition.stickiness="toNext",_this56.howMany=e,_this56.targetPosition=n.clone(),_this56.targetPosition.stickiness="toNone";return _this56;}_createClass(lc,[{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);}},{key:"getMovedRangeStart",value:function getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany);}},{key:"getReversed",value:function getReversed(){var t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,i=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new Gn.b("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.",this);if(t===e&&n<i&&i<n+this.howMany)throw new Gn.b("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==li(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var _t159=this.sourcePosition.path.length-1;if(this.targetPosition.path[_t159]>=n&&this.targetPosition.path[_t159]<n+this.howMany)throw new Gn.b("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.",this);}}},{key:"_execute",value:function _execute(){ec(Gs._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(lc.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t;}},{key:"type",get:function get(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move";}}],[{key:"fromJSON",value:function fromJSON(t,e){var n=$s.fromJSON(t.sourcePosition,e),i=$s.fromJSON(t.targetPosition,e);return new this(n,t.howMany,i,t.baseVersion);}},{key:"className",get:function get(){return"MoveOperation";}}]);return lc;}(Ja);var dc=/*#__PURE__*/function(_Ja4){_inherits(dc,_Ja4);function dc(t,e,n){var _this57;_classCallCheck(this,dc);_this57=_possibleConstructorReturn(this,_getPrototypeOf(dc).call(this,n)),_this57.position=t.clone(),_this57.position.stickiness="toNone",_this57.nodes=new Us(nc(e)),_this57.shouldReceiveAttributes=!1;return _this57;}_createClass(dc,[{key:"clone",value:function clone(){var t=new Us(_toConsumableArray(this.nodes).map(function(t){return t._clone(!0);})),e=new dc(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e;}},{key:"getReversed",value:function getReversed(){var t=this.position.root.document.graveyard,e=new $s(t,[0]);return new lc(this.position,this.nodes.maxOffset,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new Gn.b("insert-operation-position-invalid: Insertion position is invalid.",this);}},{key:"_execute",value:function _execute(){var t=this.nodes;this.nodes=new Us(_toConsumableArray(t).map(function(t){return t._clone(!0);})),Xa(this.position,t);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(dc.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t;}},{key:"type",get:function get(){return"insert";}},{key:"howMany",get:function get(){return this.nodes.maxOffset;}}],[{key:"fromJSON",value:function fromJSON(t,e){var n=[];var _iteratorNormalCompletion195=true;var _didIteratorError195=false;var _iteratorError195=undefined;try{for(var _iterator195=t.nodes[Symbol.iterator](),_step195;!(_iteratorNormalCompletion195=(_step195=_iterator195.next()).done);_iteratorNormalCompletion195=true){var _e144=_step195.value;_e144.name?n.push(Hs.fromJSON(_e144)):n.push(Bs.fromJSON(_e144));}}catch(err){_didIteratorError195=true;_iteratorError195=err;}finally{try{if(!_iteratorNormalCompletion195&&_iterator195["return"]!=null){_iterator195["return"]();}}finally{if(_didIteratorError195){throw _iteratorError195;}}}var i=new dc($s.fromJSON(t.position,e),n,t.baseVersion);return i.shouldReceiveAttributes=t.shouldReceiveAttributes,i;}},{key:"className",get:function get(){return"InsertOperation";}}]);return dc;}(Ja);var hc=/*#__PURE__*/function(_Ja5){_inherits(hc,_Ja5);function hc(t,e,n,i,o,r){var _this58;_classCallCheck(this,hc);_this58=_possibleConstructorReturn(this,_getPrototypeOf(hc).call(this,r)),_this58.name=t,_this58.oldRange=e?e.clone():null,_this58.newRange=n?n.clone():null,_this58.affectsData=o,_this58._markers=i;return _this58;}_createClass(hc,[{key:"clone",value:function clone(){return new hc(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new hc(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1);}},{key:"_execute",value:function _execute(){var t=this.newRange?"_set":"_remove";this._markers[t](this.name,this.newRange,!0,this.affectsData);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(hc.prototype),"toJSON",this).call(this);return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t;}},{key:"type",get:function get(){return"marker";}}],[{key:"fromJSON",value:function fromJSON(t,e){return new hc(t.name,t.oldRange?Gs.fromJSON(t.oldRange,e):null,t.newRange?Gs.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion);}},{key:"className",get:function get(){return"MarkerOperation";}}]);return hc;}(Ja);var uc=/*#__PURE__*/function(_Ja6){_inherits(uc,_Ja6);function uc(t,e,n,i){var _this59;_classCallCheck(this,uc);_this59=_possibleConstructorReturn(this,_getPrototypeOf(uc).call(this,i)),_this59.position=t,_this59.position.stickiness="toNext",_this59.oldName=e,_this59.newName=n;return _this59;}_createClass(uc,[{key:"clone",value:function clone(){return new uc(this.position.clone(),this.oldName,this.newName,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new uc(this.position.clone(),this.newName,this.oldName,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.position.nodeAfter;if(!(t instanceof Hs))throw new Gn.b("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.",this);if(t.name!==this.oldName)throw new Gn.b("rename-operation-wrong-name: Element to change has different name than operation's old name.",this);}},{key:"_execute",value:function _execute(){this.position.nodeAfter.name=this.newName;}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(uc.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t;}},{key:"type",get:function get(){return"rename";}}],[{key:"fromJSON",value:function fromJSON(t,e){return new uc($s.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion);}},{key:"className",get:function get(){return"RenameOperation";}}]);return uc;}(Ja);var fc=/*#__PURE__*/function(_Ja7){_inherits(fc,_Ja7);function fc(t,e,n,i,o){var _this60;_classCallCheck(this,fc);_this60=_possibleConstructorReturn(this,_getPrototypeOf(fc).call(this,o)),_this60.root=t,_this60.key=e,_this60.oldValue=n,_this60.newValue=i;return _this60;}_createClass(fc,[{key:"clone",value:function clone(){return new fc(this.root,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new fc(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"_validate",value:function _validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new Gn.b("rootattribute-operation-not-a-root: The element to change is not a root element.",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Gn.b("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Gn.b("rootattribute-operation-attribute-exists: The attribute with given key already exists.",this,{root:this.root,key:this.key});}},{key:"_execute",value:function _execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(fc.prototype),"toJSON",this).call(this);return t.root=this.root.toJSON(),t;}},{key:"type",get:function get(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute";}}],[{key:"fromJSON",value:function fromJSON(t,e){if(!e.getRoot(t.root))throw new Gn.b("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",this,{rootName:t.root});return new fc(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion);}},{key:"className",get:function get(){return"RootAttributeOperation";}}]);return fc;}(Ja);var mc=/*#__PURE__*/function(_Ja8){_inherits(mc,_Ja8);function mc(t,e,n,i,o){var _this61;_classCallCheck(this,mc);_this61=_possibleConstructorReturn(this,_getPrototypeOf(mc).call(this,o)),_this61.sourcePosition=t.clone(),_this61.sourcePosition.stickiness="toPrevious",_this61.howMany=e,_this61.targetPosition=n.clone(),_this61.targetPosition.stickiness="toNext",_this61.graveyardPosition=i.clone();return _this61;}_createClass(mc,[{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new $s(this.sourcePosition.root,e)._getTransformedByMergeOperation(this),i=new gc(t,this.howMany,this.graveyardPosition,this.baseVersion+1);return i.insertionPosition=n,i;}},{key:"_validate",value:function _validate(){var t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new Gn.b("merge-operation-source-position-invalid: Merge source position is invalid.",this);if(!e.parent)throw new Gn.b("merge-operation-target-position-invalid: Merge target position is invalid.",this);if(this.howMany!=t.maxOffset)throw new Gn.b("merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.",this);}},{key:"_execute",value:function _execute(){var t=this.sourcePosition.parent;ec(Gs._createIn(t),this.targetPosition),ec(Gs._createOn(t),this.graveyardPosition);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(mc.prototype),"toJSON",this).call(this);return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t;}},{key:"type",get:function get(){return"merge";}},{key:"deletionPosition",get:function get(){return new $s(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1));}},{key:"movedRange",get:function get(){var t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Gs(this.sourcePosition,t);}}],[{key:"fromJSON",value:function fromJSON(t,e){var n=$s.fromJSON(t.sourcePosition,e),i=$s.fromJSON(t.targetPosition,e),o=$s.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,i,o,t.baseVersion);}},{key:"className",get:function get(){return"MergeOperation";}}]);return mc;}(Ja);var gc=/*#__PURE__*/function(_Ja9){_inherits(gc,_Ja9);function gc(t,e,n,i){var _this62;_classCallCheck(this,gc);_this62=_possibleConstructorReturn(this,_getPrototypeOf(gc).call(this,i)),_this62.splitPosition=t.clone(),_this62.splitPosition.stickiness="toNext",_this62.howMany=e,_this62.insertionPosition=gc.getInsertionPosition(t),_this62.insertionPosition.stickiness="toNone",_this62.graveyardPosition=n?n.clone():null,_this62.graveyardPosition&&(_this62.graveyardPosition.stickiness="toNext");return _this62;}_createClass(gc,[{key:"clone",value:function clone(){var t=new this.constructor(this.splitPosition,this.howMany,this.graveyardPosition,this.baseVersion);return t.insertionPosition=this.insertionPosition,t;}},{key:"getReversed",value:function getReversed(){var t=this.splitPosition.root.document.graveyard,e=new $s(t,[0]);return new mc(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new Gn.b("split-operation-position-invalid: Split position is invalid.",this);if(!t.parent)throw new Gn.b("split-operation-split-in-root: Cannot split root element.",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new Gn.b("split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new Gn.b("split-operation-graveyard-position-invalid: Graveyard position invalid.",this);}},{key:"_execute",value:function _execute(){var t=this.splitPosition.parent;if(this.graveyardPosition)ec(Gs._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var _e145=t._clone();Xa(this.insertionPosition,_e145);}ec(new Gs($s._createAt(t,this.splitPosition.offset),$s._createAt(t,t.maxOffset)),this.moveTargetPosition);}},{key:"toJSON",value:function toJSON(){var t=_get(_getPrototypeOf(gc.prototype),"toJSON",this).call(this);return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t;}},{key:"type",get:function get(){return"split";}},{key:"moveTargetPosition",get:function get(){var t=this.insertionPosition.path.slice();return t.push(0),new $s(this.insertionPosition.root,t);}},{key:"movedRange",get:function get(){var t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Gs(this.splitPosition,t);}}],[{key:"getInsertionPosition",value:function getInsertionPosition(t){var e=t.path.slice(0,-1);return e[e.length-1]++,new $s(t.root,e);}},{key:"fromJSON",value:function fromJSON(t,e){var n=$s.fromJSON(t.splitPosition,e),i=$s.fromJSON(t.insertionPosition,e),o=t.graveyardPosition?$s.fromJSON(t.graveyardPosition,e):null,r=new this(n,t.howMany,o,t.baseVersion);return r.insertionPosition=i,r;}},{key:"className",get:function get(){return"SplitOperation";}}]);return gc;}(Ja);var pc=/*#__PURE__*/function(_Hs){_inherits(pc,_Hs);function pc(t,e){var _this63;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"main";_classCallCheck(this,pc);_this63=_possibleConstructorReturn(this,_getPrototypeOf(pc).call(this,e)),_this63._doc=t,_this63.rootName=n;return _this63;}_createClass(pc,[{key:"is",value:function is(t,e){var n=t.replace("model:","");return e?"rootElement"==n&&e==this.name||_get(_getPrototypeOf(pc.prototype),"is",this).call(this,t,e):"rootElement"==n||_get(_getPrototypeOf(pc.prototype),"is",this).call(this,t);}},{key:"toJSON",value:function toJSON(){return this.rootName;}},{key:"document",get:function get(){return this._doc;}}]);return pc;}(Hs);var bc=/*#__PURE__*/function(){function bc(t,e){_classCallCheck(this,bc);this.model=t,this.batch=e;}_createClass(bc,[{key:"createText",value:function createText(t,e){return new Bs(t,e);}},{key:"createElement",value:function createElement(t,e){return new Hs(t,e);}},{key:"createDocumentFragment",value:function createDocumentFragment(){return new Za();}},{key:"insert",value:function insert(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this._assertWriterUsedCorrectly(),t instanceof Bs&&""==t.data)return;var i=$s._createAt(e,n);if(t.parent){if(yc(t.root,i.root))return void this.move(Gs._createOn(t),i);if(t.root.document)throw new Gn.b("model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree. It is forbidden to move a node that was already in a document outside of it.",this);this.remove(t);}var o=i.root.document?i.root.document.version:null,r=new dc(i,t,o);if(t instanceof Bs&&(r.shouldReceiveAttributes=!0),this.batch.addOperation(r),this.model.applyOperation(r),t instanceof Za){var _iteratorNormalCompletion196=true;var _didIteratorError196=false;var _iteratorError196=undefined;try{for(var _iterator196=t.markers[Symbol.iterator](),_step196;!(_iteratorNormalCompletion196=(_step196=_iterator196.next()).done);_iteratorNormalCompletion196=true){var _step196$value=_slicedToArray(_step196.value,2),_e146=_step196$value[0],_n135=_step196$value[1];var _t160=$s._createAt(_n135.root,0),_o40={range:new Gs(_n135.start._getCombined(_t160,i),_n135.end._getCombined(_t160,i)),usingOperation:!0,affectsData:!0};this.model.markers.has(_e146)?this.updateMarker(_e146,_o40):this.addMarker(_e146,_o40);}}catch(err){_didIteratorError196=true;_iteratorError196=err;}finally{try{if(!_iteratorNormalCompletion196&&_iterator196["return"]!=null){_iterator196["return"]();}}finally{if(_didIteratorError196){throw _iteratorError196;}}}}}},{key:"insertText",value:function insertText(t,e,n,i){e instanceof Za||e instanceof Hs||e instanceof $s?this.insert(this.createText(t),e,n):this.insert(this.createText(t,e),n,i);}},{key:"insertElement",value:function insertElement(t,e,n,i){e instanceof Za||e instanceof Hs||e instanceof $s?this.insert(this.createElement(t),e,n):this.insert(this.createElement(t,e),n,i);}},{key:"append",value:function append(t,e){this.insert(t,e,"end");}},{key:"appendText",value:function appendText(t,e,n){e instanceof Za||e instanceof Hs?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),n,"end");}},{key:"appendElement",value:function appendElement(t,e,n){e instanceof Za||e instanceof Hs?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),n,"end");}},{key:"setAttribute",value:function setAttribute(t,e,n){if(this._assertWriterUsedCorrectly(),n instanceof Gs){var _i106=n.getMinimalFlatRanges();var _iteratorNormalCompletion197=true;var _didIteratorError197=false;var _iteratorError197=undefined;try{for(var _iterator197=_i106[Symbol.iterator](),_step197;!(_iteratorNormalCompletion197=(_step197=_iterator197.next()).done);_iteratorNormalCompletion197=true){var _n136=_step197.value;wc(this,t,e,_n136);}}catch(err){_didIteratorError197=true;_iteratorError197=err;}finally{try{if(!_iteratorNormalCompletion197&&_iterator197["return"]!=null){_iterator197["return"]();}}finally{if(_didIteratorError197){throw _iteratorError197;}}}}else kc(this,t,e,n);}},{key:"setAttributes",value:function setAttributes(t,e){var _iteratorNormalCompletion198=true;var _didIteratorError198=false;var _iteratorError198=undefined;try{for(var _iterator198=Vs(t)[Symbol.iterator](),_step198;!(_iteratorNormalCompletion198=(_step198=_iterator198.next()).done);_iteratorNormalCompletion198=true){var _step198$value=_slicedToArray(_step198.value,2),_n137=_step198$value[0],_i107=_step198$value[1];this.setAttribute(_n137,_i107,e);}}catch(err){_didIteratorError198=true;_iteratorError198=err;}finally{try{if(!_iteratorNormalCompletion198&&_iterator198["return"]!=null){_iterator198["return"]();}}finally{if(_didIteratorError198){throw _iteratorError198;}}}}},{key:"removeAttribute",value:function removeAttribute(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Gs){var _n138=e.getMinimalFlatRanges();var _iteratorNormalCompletion199=true;var _didIteratorError199=false;var _iteratorError199=undefined;try{for(var _iterator199=_n138[Symbol.iterator](),_step199;!(_iteratorNormalCompletion199=(_step199=_iterator199.next()).done);_iteratorNormalCompletion199=true){var _e147=_step199.value;wc(this,t,null,_e147);}}catch(err){_didIteratorError199=true;_iteratorError199=err;}finally{try{if(!_iteratorNormalCompletion199&&_iterator199["return"]!=null){_iterator199["return"]();}}finally{if(_didIteratorError199){throw _iteratorError199;}}}}else kc(this,t,null,e);}},{key:"clearAttributes",value:function clearAttributes(t){var _this64=this;this._assertWriterUsedCorrectly();var e=function e(t){var _iteratorNormalCompletion200=true;var _didIteratorError200=false;var _iteratorError200=undefined;try{for(var _iterator200=t.getAttributeKeys()[Symbol.iterator](),_step200;!(_iteratorNormalCompletion200=(_step200=_iterator200.next()).done);_iteratorNormalCompletion200=true){var _e148=_step200.value;_this64.removeAttribute(_e148,t);}}catch(err){_didIteratorError200=true;_iteratorError200=err;}finally{try{if(!_iteratorNormalCompletion200&&_iterator200["return"]!=null){_iterator200["return"]();}}finally{if(_didIteratorError200){throw _iteratorError200;}}}};if(t instanceof Gs){var _iteratorNormalCompletion201=true;var _didIteratorError201=false;var _iteratorError201=undefined;try{for(var _iterator201=t.getItems()[Symbol.iterator](),_step201;!(_iteratorNormalCompletion201=(_step201=_iterator201.next()).done);_iteratorNormalCompletion201=true){var _n139=_step201.value;e(_n139);}}catch(err){_didIteratorError201=true;_iteratorError201=err;}finally{try{if(!_iteratorNormalCompletion201&&_iterator201["return"]!=null){_iterator201["return"]();}}finally{if(_didIteratorError201){throw _iteratorError201;}}}}else e(t);}},{key:"move",value:function move(t,e,n){if(this._assertWriterUsedCorrectly(),!(t instanceof Gs))throw new Gn.b("writer-move-invalid-range: Invalid range to move.",this);if(!t.isFlat)throw new Gn.b("writer-move-range-not-flat: Range to move is not flat.",this);var i=$s._createAt(e,n);if(i.isEqual(t.start))return;if(this._addOperationForAffectedMarkers("move",t),!yc(t.root,i.root))throw new Gn.b("writer-move-different-document: Range is going to be moved between different documents.",this);var o=t.root.document?t.root.document.version:null,r=new lc(t.start,t.end.offset-t.start.offset,i,o);this.batch.addOperation(r),this.model.applyOperation(r);}},{key:"remove",value:function remove(t){this._assertWriterUsedCorrectly();var e=(t instanceof Gs?t:Gs._createOn(t)).getMinimalFlatRanges().reverse();var _iteratorNormalCompletion202=true;var _didIteratorError202=false;var _iteratorError202=undefined;try{for(var _iterator202=e[Symbol.iterator](),_step202;!(_iteratorNormalCompletion202=(_step202=_iterator202.next()).done);_iteratorNormalCompletion202=true){var _t161=_step202.value;this._addOperationForAffectedMarkers("move",_t161),vc(_t161.start,_t161.end.offset-_t161.start.offset,this.batch,this.model);}}catch(err){_didIteratorError202=true;_iteratorError202=err;}finally{try{if(!_iteratorNormalCompletion202&&_iterator202["return"]!=null){_iterator202["return"]();}}finally{if(_didIteratorError202){throw _iteratorError202;}}}}},{key:"merge",value:function merge(t){this._assertWriterUsedCorrectly();var e=t.nodeBefore,n=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Hs))throw new Gn.b("writer-merge-no-element-before: Node before merge position must be an element.",this);if(!(n instanceof Hs))throw new Gn.b("writer-merge-no-element-after: Node after merge position must be an element.",this);t.root.document?this._merge(t):this._mergeDetached(t);}},{key:"createPositionFromPath",value:function createPositionFromPath(t,e,n){return this.model.createPositionFromPath(t,e,n);}},{key:"createPositionAt",value:function createPositionAt(t,e){return this.model.createPositionAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return this.model.createPositionAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return this.model.createPositionBefore(t);}},{key:"createRange",value:function createRange(t,e){return this.model.createRange(t,e);}},{key:"createRangeIn",value:function createRangeIn(t){return this.model.createRangeIn(t);}},{key:"createRangeOn",value:function createRangeOn(t){return this.model.createRangeOn(t);}},{key:"createSelection",value:function createSelection(t,e,n){return this.model.createSelection(t,e,n);}},{key:"_mergeDetached",value:function _mergeDetached(t){var e=t.nodeBefore,n=t.nodeAfter;this.move(Gs._createIn(n),$s._createAt(e,"end")),this.remove(n);}},{key:"_merge",value:function _merge(t){var e=$s._createAt(t.nodeBefore,"end"),n=$s._createAt(t.nodeAfter,0),i=t.root.document.graveyard,o=new $s(i,[0]),r=t.root.document.version,s=new mc(n,t.nodeAfter.maxOffset,e,o,r);this.batch.addOperation(s),this.model.applyOperation(s);}},{key:"rename",value:function rename(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Hs))throw new Gn.b("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.",this);var n=t.root.document?t.root.document.version:null,i=new uc($s._createBefore(t),t.name,e,n);this.batch.addOperation(i),this.model.applyOperation(i);}},{key:"split",value:function split(t,e){this._assertWriterUsedCorrectly();var n,i,o=t.parent;if(!o.parent)throw new Gn.b("writer-split-element-no-parent: Element with no parent can not be split.",this);if(e||(e=o.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new Gn.b("writer-split-invalid-limit-element: Limit element is not a position ancestor.",this);do{var _e149=o.root.document?o.root.document.version:null,_r16=o.maxOffset-t.offset,_s13=new gc(t,_r16,null,_e149);this.batch.addOperation(_s13),this.model.applyOperation(_s13),n||i||(n=o,i=t.parent.nextSibling),o=(t=this.createPositionAfter(t.parent)).parent;}while(o!==e);return{position:t,range:new Gs($s._createAt(n,"end"),$s._createAt(i,0))};}},{key:"wrap",value:function wrap(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new Gn.b("writer-wrap-range-not-flat: Range to wrap is not flat.",this);var n=e instanceof Hs?e:new Hs(e);if(n.childCount>0)throw new Gn.b("writer-wrap-element-not-empty: Element to wrap with is not empty.",this);if(null!==n.parent)throw new Gn.b("writer-wrap-element-attached: Element to wrap with is already attached to tree model.",this);this.insert(n,t.start);var i=new Gs(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(i,$s._createAt(n,0));}},{key:"unwrap",value:function unwrap(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new Gn.b("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.",this);this.move(Gs._createIn(t),this.createPositionAfter(t)),this.remove(t);}},{key:"addMarker",value:function addMarker(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new Gn.b("writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.",this);var n=e.usingOperation,i=e.range,o=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new Gn.b("writer-addMarker-marker-exists: Marker with provided name already exists.",this);if(!i)throw new Gn.b("writer-addMarker-no-range: Range parameter is required when adding a new marker.",this);return n?(_c(this,t,null,i,o),this.model.markers.get(t)):this.model.markers._set(t,i,n,o);}},{key:"updateMarker",value:function updateMarker(t,e){this._assertWriterUsedCorrectly();var n="string"==typeof t?t:t.name,i=this.model.markers.get(n);if(!i)throw new Gn.b("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.",this);if(!e)return void this.model.markers._refresh(i);var o="boolean"==typeof e.usingOperation,r="boolean"==typeof e.affectsData,s=r?e.affectsData:i.affectsData;if(!o&&!e.range&&!r)throw new Gn.b("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.",this);var a=i.getRange(),c=e.range?e.range:a;o&&e.usingOperation!==i.managedUsingOperations?e.usingOperation?_c(this,n,null,c,s):(_c(this,n,a,null,s),this.model.markers._set(n,c,void 0,s)):i.managedUsingOperations?_c(this,n,a,c,s):this.model.markers._set(n,c,void 0,s);}},{key:"removeMarker",value:function removeMarker(t){this._assertWriterUsedCorrectly();var e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new Gn.b("writer-removeMarker-no-marker: Trying to remove marker which does not exist.",this);var n=this.model.markers.get(e);n.managedUsingOperations?_c(this,e,n.getRange(),null,n.affectsData):this.model.markers._remove(e);}},{key:"setSelection",value:function setSelection(t,e,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(t,e,n);}},{key:"setSelectionFocus",value:function setSelectionFocus(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e);}},{key:"setSelectionAttribute",value:function setSelectionAttribute(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else{var _iteratorNormalCompletion203=true;var _didIteratorError203=false;var _iteratorError203=undefined;try{for(var _iterator203=Vs(t)[Symbol.iterator](),_step203;!(_iteratorNormalCompletion203=(_step203=_iterator203.next()).done);_iteratorNormalCompletion203=true){var _step203$value=_slicedToArray(_step203.value,2),_e150=_step203$value[0],_n140=_step203$value[1];this._setSelectionAttribute(_e150,_n140);}}catch(err){_didIteratorError203=true;_iteratorError203=err;}finally{try{if(!_iteratorNormalCompletion203&&_iterator203["return"]!=null){_iterator203["return"]();}}finally{if(_didIteratorError203){throw _iteratorError203;}}}}}},{key:"removeSelectionAttribute",value:function removeSelectionAttribute(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else{var _iteratorNormalCompletion204=true;var _didIteratorError204=false;var _iteratorError204=undefined;try{for(var _iterator204=t[Symbol.iterator](),_step204;!(_iteratorNormalCompletion204=(_step204=_iterator204.next()).done);_iteratorNormalCompletion204=true){var _e151=_step204.value;this._removeSelectionAttribute(_e151);}}catch(err){_didIteratorError204=true;_iteratorError204=err;}finally{try{if(!_iteratorNormalCompletion204&&_iterator204["return"]!=null){_iterator204["return"]();}}finally{if(_didIteratorError204){throw _iteratorError204;}}}}}},{key:"overrideSelectionGravity",value:function overrideSelectionGravity(){return this.model.document.selection._overrideGravity();}},{key:"restoreSelectionGravity",value:function restoreSelectionGravity(t){this.model.document.selection._restoreGravity(t);}},{key:"_setSelectionAttribute",value:function _setSelectionAttribute(t,e){var n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){var _i108=sa._getStoreAttributeKey(t);this.setAttribute(_i108,e,n.anchor.parent);}n._setAttribute(t,e);}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(t){var e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){var _n141=sa._getStoreAttributeKey(t);this.removeAttribute(_n141,e.anchor.parent);}e._removeAttribute(t);}},{key:"_assertWriterUsedCorrectly",value:function _assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new Gn.b("writer-incorrect-use: Trying to use a writer outside the change() block.",this);}},{key:"_addOperationForAffectedMarkers",value:function _addOperationForAffectedMarkers(t,e){var _iteratorNormalCompletion205=true;var _didIteratorError205=false;var _iteratorError205=undefined;try{for(var _iterator205=this.model.markers[Symbol.iterator](),_step205;!(_iteratorNormalCompletion205=(_step205=_iterator205.next()).done);_iteratorNormalCompletion205=true){var _n142=_step205.value;if(!_n142.managedUsingOperations)continue;var _i109=_n142.getRange();var _o41=!1;if("move"==t)_o41=e.containsPosition(_i109.start)||e.start.isEqual(_i109.start)||e.containsPosition(_i109.end)||e.end.isEqual(_i109.end);else{var _t162=e.nodeBefore,_n143=e.nodeAfter,_r17=_i109.start.parent==_t162&&_i109.start.isAtEnd,_s14=_i109.end.parent==_n143&&0==_i109.end.offset,_a8=_i109.end.nodeAfter==_n143,_c3=_i109.start.nodeAfter==_n143;_o41=_r17||_s14||_a8||_c3;}_o41&&this.updateMarker(_n142.name,{range:_i109});}}catch(err){_didIteratorError205=true;_iteratorError205=err;}finally{try{if(!_iteratorNormalCompletion205&&_iterator205["return"]!=null){_iterator205["return"]();}}finally{if(_didIteratorError205){throw _iteratorError205;}}}}}]);return bc;}();function wc(t,e,n,i){var o=t.model,r=o.document;var s,a,c,l=i.start;var _iteratorNormalCompletion206=true;var _didIteratorError206=false;var _iteratorError206=undefined;try{for(var _iterator206=i.getWalker({shallow:!0})[Symbol.iterator](),_step206;!(_iteratorNormalCompletion206=(_step206=_iterator206.next()).done);_iteratorNormalCompletion206=true){var _t163=_step206.value;c=_t163.item.getAttribute(e),s&&a!=c&&(a!=n&&d(),l=s),s=_t163.nextPosition,a=c;}}catch(err){_didIteratorError206=true;_iteratorError206=err;}finally{try{if(!_iteratorNormalCompletion206&&_iterator206["return"]!=null){_iterator206["return"]();}}finally{if(_didIteratorError206){throw _iteratorError206;}}}function d(){var i=new Gs(l,s),c=i.root.document?r.version:null,d=new ac(i,e,a,n,c);t.batch.addOperation(d),o.applyOperation(d);}s instanceof $s&&s!=l&&a!=n&&d();}function kc(t,e,n,i){var o=t.model,r=o.document,s=i.getAttribute(e);var a,c;if(s!=n){if(i.root===i){var _t164=i.document?r.version:null;c=new fc(i,e,s,n,_t164);}else{var _o42=(a=new Gs($s._createBefore(i),t.createPositionAfter(i))).root.document?r.version:null;c=new ac(a,e,s,n,_o42);}t.batch.addOperation(c),o.applyOperation(c);}}function _c(t,e,n,i,o){var r=t.model,s=r.document,a=new hc(e,n,i,r.markers,o,s.version);t.batch.addOperation(a),r.applyOperation(a);}function vc(t,e,n,i){var o;if(t.root.document){var _n144=i.document,_r18=new $s(_n144.graveyard,[0]);o=new lc(t,e,_r18,_n144.version);}else o=new cc(t,e);n.addOperation(o),i.applyOperation(o);}function yc(t,e){return t===e||t instanceof pc&&e instanceof pc;}var xc=/*#__PURE__*/function(){function xc(t){_classCallCheck(this,xc);this._markerCollection=t,this._changesInElement=new Map(),this._elementSnapshots=new Map(),this._changedMarkers=new Map(),this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null;}_createClass(xc,[{key:"refreshItem",value:function refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize);var e=Gs._createOn(t);var _iteratorNormalCompletion207=true;var _didIteratorError207=false;var _iteratorError207=undefined;try{for(var _iterator207=this._markerCollection.getMarkersIntersectingRange(e)[Symbol.iterator](),_step207;!(_iteratorNormalCompletion207=(_step207=_iterator207.next()).done);_iteratorNormalCompletion207=true){var _t165=_step207.value;var _e152=_t165.getRange();this.bufferMarkerChange(_t165.name,_e152,_e152,_t165.affectsData);}}catch(err){_didIteratorError207=true;_iteratorError207=err;}finally{try{if(!_iteratorNormalCompletion207&&_iterator207["return"]!=null){_iterator207["return"]();}}finally{if(_didIteratorError207){throw _iteratorError207;}}}this._cachedChanges=null;}},{key:"bufferOperation",value:function bufferOperation(t){switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var _iteratorNormalCompletion208=true;var _didIteratorError208=false;var _iteratorError208=undefined;try{for(var _iterator208=t.range.getItems({shallow:!0})[Symbol.iterator](),_step208;!(_iteratorNormalCompletion208=(_step208=_iterator208.next()).done);_iteratorNormalCompletion208=true){var _e153=_step208.value;this._isInInsertedElement(_e153.parent)||this._markAttribute(_e153);}}catch(err){_didIteratorError208=true;_iteratorError208=err;}finally{try{if(!_iteratorNormalCompletion208&&_iterator208["return"]!=null){_iterator208["return"]();}}finally{if(_didIteratorError208){throw _iteratorError208;}}}break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;var _e154=this._isInInsertedElement(t.sourcePosition.parent),_n145=this._isInInsertedElement(t.targetPosition.parent);_e154||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),_n145||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);break;}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);var _e155=Gs._createFromPositionAndShift(t.position,1);var _iteratorNormalCompletion209=true;var _didIteratorError209=false;var _iteratorError209=undefined;try{for(var _iterator209=this._markerCollection.getMarkersIntersectingRange(_e155)[Symbol.iterator](),_step209;!(_iteratorNormalCompletion209=(_step209=_iterator209.next()).done);_iteratorNormalCompletion209=true){var _t166=_step209.value;var _e156=_t166.getRange();this.bufferMarkerChange(_t166.name,_e156,_e156,_t166.affectsData);}}catch(err){_didIteratorError209=true;_iteratorError209=err;}finally{try{if(!_iteratorNormalCompletion209&&_iterator209["return"]!=null){_iterator209["return"]();}}finally{if(_didIteratorError209){throw _iteratorError209;}}}break;}case"split":{var _e157=t.splitPosition.parent;this._isInInsertedElement(_e157)||this._markRemove(_e157,t.splitPosition.offset,t.howMany),this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1);break;}case"merge":{var _e158=t.sourcePosition.parent;this._isInInsertedElement(_e158.parent)||this._markRemove(_e158.parent,_e158.startOffset,1);var _n146=t.graveyardPosition.parent;this._markInsert(_n146,t.graveyardPosition.offset,1);var _i110=t.targetPosition.parent;this._isInInsertedElement(_i110)||this._markInsert(_i110,t.targetPosition.offset,_e158.maxOffset);break;}}this._cachedChanges=null;}},{key:"bufferMarkerChange",value:function bufferMarkerChange(t,e,n,i){var o=this._changedMarkers.get(t);o?(o.newRange=n,o.affectsData=i,null==o.oldRange&&null==o.newRange&&this._changedMarkers["delete"](t)):this._changedMarkers.set(t,{oldRange:e,newRange:n,affectsData:i});}},{key:"getMarkersToRemove",value:function getMarkersToRemove(){var t=[];var _iteratorNormalCompletion210=true;var _didIteratorError210=false;var _iteratorError210=undefined;try{for(var _iterator210=this._changedMarkers[Symbol.iterator](),_step210;!(_iteratorNormalCompletion210=(_step210=_iterator210.next()).done);_iteratorNormalCompletion210=true){var _step210$value=_slicedToArray(_step210.value,2),_e159=_step210$value[0],_n147=_step210$value[1];null!=_n147.oldRange&&t.push({name:_e159,range:_n147.oldRange});}}catch(err){_didIteratorError210=true;_iteratorError210=err;}finally{try{if(!_iteratorNormalCompletion210&&_iterator210["return"]!=null){_iterator210["return"]();}}finally{if(_didIteratorError210){throw _iteratorError210;}}}return t;}},{key:"getMarkersToAdd",value:function getMarkersToAdd(){var t=[];var _iteratorNormalCompletion211=true;var _didIteratorError211=false;var _iteratorError211=undefined;try{for(var _iterator211=this._changedMarkers[Symbol.iterator](),_step211;!(_iteratorNormalCompletion211=(_step211=_iterator211.next()).done);_iteratorNormalCompletion211=true){var _step211$value=_slicedToArray(_step211.value,2),_e160=_step211$value[0],_n148=_step211$value[1];null!=_n148.newRange&&t.push({name:_e160,range:_n148.newRange});}}catch(err){_didIteratorError211=true;_iteratorError211=err;}finally{try{if(!_iteratorNormalCompletion211&&_iterator211["return"]!=null){_iterator211["return"]();}}finally{if(_didIteratorError211){throw _iteratorError211;}}}return t;}},{key:"getChangedMarkers",value:function getChangedMarkers(){return Array.from(this._changedMarkers).map(function(t){return{name:t[0],data:{oldRange:t[1].oldRange,newRange:t[1].newRange}};});}},{key:"hasDataChanges",value:function hasDataChanges(){var _iteratorNormalCompletion212=true;var _didIteratorError212=false;var _iteratorError212=undefined;try{for(var _iterator212=this._changedMarkers[Symbol.iterator](),_step212;!(_iteratorNormalCompletion212=(_step212=_iterator212.next()).done);_iteratorNormalCompletion212=true){var _step212$value=_slicedToArray(_step212.value,2),_t167=_step212$value[1];if(_t167.affectsData)return!0;}}catch(err){_didIteratorError212=true;_iteratorError212=err;}finally{try{if(!_iteratorNormalCompletion212&&_iterator212["return"]!=null){_iterator212["return"]();}}finally{if(_didIteratorError212){throw _iteratorError212;}}}return this._changesInElement.size>0;}},{key:"getChanges",value:function getChanges(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeChangesInGraveyard:!1};if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var e=[];var _iteratorNormalCompletion213=true;var _didIteratorError213=false;var _iteratorError213=undefined;try{for(var _iterator213=this._changesInElement.keys()[Symbol.iterator](),_step213;!(_iteratorNormalCompletion213=(_step213=_iterator213.next()).done);_iteratorNormalCompletion213=true){var _t169=_step213.value;var _n150=this._changesInElement.get(_t169).sort(function(t,e){return t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1;}),_i113=this._elementSnapshots.get(_t169),_o44=Ac(_t169.getChildren()),_r20=Tc(_i113.length,_n150);var _s16=0,_a9=0;var _iteratorNormalCompletion214=true;var _didIteratorError214=false;var _iteratorError214=undefined;try{for(var _iterator214=_r20[Symbol.iterator](),_step214;!(_iteratorNormalCompletion214=(_step214=_iterator214.next()).done);_iteratorNormalCompletion214=true){var _n151=_step214.value;if("i"===_n151)e.push(this._getInsertDiff(_t169,_s16,_o44[_s16].name)),_s16++;else if("r"===_n151)e.push(this._getRemoveDiff(_t169,_s16,_i113[_a9].name)),_a9++;else if("a"===_n151){var _n152=_o44[_s16].attributes,_r21=_i113[_a9].attributes;var _c4=void 0;if("$text"==_o44[_s16].name)_c4=new Gs($s._createAt(_t169,_s16),$s._createAt(_t169,_s16+1));else{var _e162=_t169.offsetToIndex(_s16);_c4=new Gs($s._createAt(_t169,_s16),$s._createAt(_t169.getChild(_e162),0));}e.push.apply(e,_toConsumableArray(this._getAttributesDiff(_c4,_r21,_n152))),_s16++,_a9++;}else _s16++,_a9++;}}catch(err){_didIteratorError214=true;_iteratorError214=err;}finally{try{if(!_iteratorNormalCompletion214&&_iterator214["return"]!=null){_iterator214["return"]();}}finally{if(_didIteratorError214){throw _iteratorError214;}}}}}catch(err){_didIteratorError213=true;_iteratorError213=err;}finally{try{if(!_iteratorNormalCompletion213&&_iterator213["return"]!=null){_iterator213["return"]();}}finally{if(_didIteratorError213){throw _iteratorError213;}}}e.sort(function(t,e){return t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1;});for(var _t168=1;_t168<e.length;_t168++){var _n149=e[_t168-1],_i111=e[_t168],_o43="remove"==_n149.type&&"remove"==_i111.type&&"$text"==_n149.name&&"$text"==_i111.name&&_n149.position.isEqual(_i111.position),_r19="insert"==_n149.type&&"insert"==_i111.type&&"$text"==_n149.name&&"$text"==_i111.name&&_n149.position.parent==_i111.position.parent&&_n149.position.offset+_n149.length==_i111.position.offset,_s15="attribute"==_n149.type&&"attribute"==_i111.type&&_n149.position.parent==_i111.position.parent&&_n149.range.isFlat&&_i111.range.isFlat&&_n149.position.offset+_n149.length==_i111.position.offset&&_n149.attributeKey==_i111.attributeKey&&_n149.attributeOldValue==_i111.attributeOldValue&&_n149.attributeNewValue==_i111.attributeNewValue;(_o43||_r19||_s15)&&(e[_t168-1].length++,_s15&&(e[_t168-1].range.end=e[_t168-1].range.end.getShiftedBy(1)),e.splice(_t168,1),_t168--);}for(var _i112=0,_e161=e;_i112<_e161.length;_i112++){var _t170=_e161[_i112];delete _t170.changeCount,"attribute"==_t170.type&&(delete _t170.position,delete _t170.length);}return this._changeCount=0,this._cachedChangesWithGraveyard=e.slice(),this._cachedChanges=e.slice().filter(Cc),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges;}},{key:"reset",value:function reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null;}},{key:"_markInsert",value:function _markInsert(t,e,n){var i={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i);}},{key:"_markRemove",value:function _markRemove(t,e,n){var i={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i),this._removeAllNestedChanges(t,e,n);}},{key:"_markAttribute",value:function _markAttribute(t){var e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e);}},{key:"_markChange",value:function _markChange(t,e){this._makeSnapshot(t);var n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(var _t171=0;_t171<n.length;_t171++){n[_t171].howMany<1&&(n.splice(_t171,1),_t171--);}}},{key:"_getChangesForElement",value:function _getChangesForElement(t){var e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e;}},{key:"_makeSnapshot",value:function _makeSnapshot(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,Ac(t.getChildren()));}},{key:"_handleChange",value:function _handleChange(t,e){t.nodesToHandle=t.howMany;var _iteratorNormalCompletion215=true;var _didIteratorError215=false;var _iteratorError215=undefined;try{for(var _iterator215=e[Symbol.iterator](),_step215;!(_iteratorNormalCompletion215=(_step215=_iterator215.next()).done);_iteratorNormalCompletion215=true){var _n153=_step215.value;var _i114=t.offset+t.howMany,_o45=_n153.offset+_n153.howMany;if("insert"==t.type&&("insert"==_n153.type&&(t.offset<=_n153.offset?_n153.offset+=t.howMany:t.offset<_o45&&(_n153.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==_n153.type&&t.offset<_n153.offset&&(_n153.offset+=t.howMany),"attribute"==_n153.type))if(t.offset<=_n153.offset)_n153.offset+=t.howMany;else if(t.offset<_o45){var _o46=_n153.howMany;_n153.howMany=t.offset-_n153.offset,e.unshift({type:"attribute",offset:_i114,howMany:_o46-_n153.howMany,count:this._changeCount++});}if("remove"==t.type){if("insert"==_n153.type)if(_i114<=_n153.offset)_n153.offset-=t.howMany;else if(_i114<=_o45){if(t.offset<_n153.offset){var _e163=_i114-_n153.offset;_n153.offset=t.offset,_n153.howMany-=_e163,t.nodesToHandle-=_e163;}else _n153.howMany-=t.nodesToHandle,t.nodesToHandle=0;}else if(t.offset<=_n153.offset)t.nodesToHandle-=_n153.howMany,_n153.howMany=0;else if(t.offset<_o45){var _e164=_o45-t.offset;_n153.howMany-=_e164,t.nodesToHandle-=_e164;}if("remove"==_n153.type&&(_i114<=_n153.offset?_n153.offset-=t.howMany:t.offset<_n153.offset&&(t.nodesToHandle+=_n153.howMany,_n153.howMany=0)),"attribute"==_n153.type)if(_i114<=_n153.offset)_n153.offset-=t.howMany;else if(t.offset<_n153.offset){var _e165=_i114-_n153.offset;_n153.offset=t.offset,_n153.howMany-=_e165;}else if(t.offset<_o45)if(_i114<=_o45){var _i115=_n153.howMany;_n153.howMany=t.offset-_n153.offset;var _o47=_i115-_n153.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:_o47,count:this._changeCount++});}else _n153.howMany-=_o45-t.offset;}if("attribute"==t.type){if("insert"==_n153.type)if(t.offset<_n153.offset&&_i114>_n153.offset){if(_i114>_o45){var _t172={type:"attribute",offset:_o45,howMany:_i114-_o45,count:this._changeCount++};this._handleChange(_t172,e),e.push(_t172);}t.nodesToHandle=_n153.offset-t.offset,t.howMany=t.nodesToHandle;}else t.offset>=_n153.offset&&t.offset<_o45&&(_i114>_o45?(t.nodesToHandle=_i114-_o45,t.offset=_o45):t.nodesToHandle=0);if("remove"==_n153.type&&t.offset<_n153.offset&&_i114>_n153.offset){var _o48={type:"attribute",offset:_n153.offset,howMany:_i114-_n153.offset,count:this._changeCount++};this._handleChange(_o48,e),e.push(_o48),t.nodesToHandle=_n153.offset-t.offset,t.howMany=t.nodesToHandle;}"attribute"==_n153.type&&(t.offset>=_n153.offset&&_i114<=_o45?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=_n153.offset&&_i114>=_o45&&(_n153.howMany=0));}}}catch(err){_didIteratorError215=true;_iteratorError215=err;}finally{try{if(!_iteratorNormalCompletion215&&_iterator215["return"]!=null){_iterator215["return"]();}}finally{if(_didIteratorError215){throw _iteratorError215;}}}t.howMany=t.nodesToHandle,delete t.nodesToHandle;}},{key:"_getInsertDiff",value:function _getInsertDiff(t,e,n){return{type:"insert",position:$s._createAt(t,e),name:n,length:1,changeCount:this._changeCount++};}},{key:"_getRemoveDiff",value:function _getRemoveDiff(t,e,n){return{type:"remove",position:$s._createAt(t,e),name:n,length:1,changeCount:this._changeCount++};}},{key:"_getAttributesDiff",value:function _getAttributesDiff(t,e,n){var i=[];n=new Map(n);var _iteratorNormalCompletion216=true;var _didIteratorError216=false;var _iteratorError216=undefined;try{for(var _iterator216=e[Symbol.iterator](),_step216;!(_iteratorNormalCompletion216=(_step216=_iterator216.next()).done);_iteratorNormalCompletion216=true){var _step216$value=_slicedToArray(_step216.value,2),_o49=_step216$value[0],_r22=_step216$value[1];var _e166=n.has(_o49)?n.get(_o49):null;_e166!==_r22&&i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:_o49,attributeOldValue:_r22,attributeNewValue:_e166,changeCount:this._changeCount++}),n["delete"](_o49);}}catch(err){_didIteratorError216=true;_iteratorError216=err;}finally{try{if(!_iteratorNormalCompletion216&&_iterator216["return"]!=null){_iterator216["return"]();}}finally{if(_didIteratorError216){throw _iteratorError216;}}}var _iteratorNormalCompletion217=true;var _didIteratorError217=false;var _iteratorError217=undefined;try{for(var _iterator217=n[Symbol.iterator](),_step217;!(_iteratorNormalCompletion217=(_step217=_iterator217.next()).done);_iteratorNormalCompletion217=true){var _step217$value=_slicedToArray(_step217.value,2),_e167=_step217$value[0],_o50=_step217$value[1];i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:_e167,attributeOldValue:null,attributeNewValue:_o50,changeCount:this._changeCount++});}}catch(err){_didIteratorError217=true;_iteratorError217=err;}finally{try{if(!_iteratorNormalCompletion217&&_iterator217["return"]!=null){_iterator217["return"]();}}finally{if(_didIteratorError217){throw _iteratorError217;}}}return i;}},{key:"_isInInsertedElement",value:function _isInInsertedElement(t){var e=t.parent;if(!e)return!1;var n=this._changesInElement.get(e),i=t.startOffset;if(n){var _iteratorNormalCompletion218=true;var _didIteratorError218=false;var _iteratorError218=undefined;try{for(var _iterator218=n[Symbol.iterator](),_step218;!(_iteratorNormalCompletion218=(_step218=_iterator218.next()).done);_iteratorNormalCompletion218=true){var _t173=_step218.value;if("insert"==_t173.type&&i>=_t173.offset&&i<_t173.offset+_t173.howMany)return!0;}}catch(err){_didIteratorError218=true;_iteratorError218=err;}finally{try{if(!_iteratorNormalCompletion218&&_iterator218["return"]!=null){_iterator218["return"]();}}finally{if(_didIteratorError218){throw _iteratorError218;}}}}return this._isInInsertedElement(e);}},{key:"_removeAllNestedChanges",value:function _removeAllNestedChanges(t,e,n){var i=new Gs($s._createAt(t,e),$s._createAt(t,e+n));var _iteratorNormalCompletion219=true;var _didIteratorError219=false;var _iteratorError219=undefined;try{for(var _iterator219=i.getItems({shallow:!0})[Symbol.iterator](),_step219;!(_iteratorNormalCompletion219=(_step219=_iterator219.next()).done);_iteratorNormalCompletion219=true){var _t174=_step219.value;_t174.is("element")&&(this._elementSnapshots["delete"](_t174),this._changesInElement["delete"](_t174),this._removeAllNestedChanges(_t174,0,_t174.maxOffset));}}catch(err){_didIteratorError219=true;_iteratorError219=err;}finally{try{if(!_iteratorNormalCompletion219&&_iterator219["return"]!=null){_iterator219["return"]();}}finally{if(_didIteratorError219){throw _iteratorError219;}}}}},{key:"isEmpty",get:function get(){return 0==this._changesInElement.size&&0==this._changedMarkers.size;}}]);return xc;}();function Ac(t){var e=[];var _iteratorNormalCompletion220=true;var _didIteratorError220=false;var _iteratorError220=undefined;try{for(var _iterator220=t[Symbol.iterator](),_step220;!(_iteratorNormalCompletion220=(_step220=_iterator220.next()).done);_iteratorNormalCompletion220=true){var _n154=_step220.value;if(_n154.is("text"))for(var _t175=0;_t175<_n154.data.length;_t175++){e.push({name:"$text",attributes:new Map(_n154.getAttributes())});}else e.push({name:_n154.name,attributes:new Map(_n154.getAttributes())});}}catch(err){_didIteratorError220=true;_iteratorError220=err;}finally{try{if(!_iteratorNormalCompletion220&&_iterator220["return"]!=null){_iterator220["return"]();}}finally{if(_didIteratorError220){throw _iteratorError220;}}}return e;}function Tc(t,e){var n=[];var i=0,o=0;var _iteratorNormalCompletion221=true;var _didIteratorError221=false;var _iteratorError221=undefined;try{for(var _iterator221=e[Symbol.iterator](),_step221;!(_iteratorNormalCompletion221=(_step221=_iterator221.next()).done);_iteratorNormalCompletion221=true){var _t176=_step221.value;if(_t176.offset>i){for(var _e169=0;_e169<_t176.offset-i;_e169++){n.push("e");}o+=_t176.offset-i;}if("insert"==_t176.type){for(var _e170=0;_e170<_t176.howMany;_e170++){n.push("i");}i=_t176.offset+_t176.howMany;}else if("remove"==_t176.type){for(var _e171=0;_e171<_t176.howMany;_e171++){n.push("r");}i=_t176.offset,o+=_t176.howMany;}else n.push.apply(n,_toConsumableArray("a".repeat(_t176.howMany).split(""))),i=_t176.offset+_t176.howMany,o+=_t176.howMany;}}catch(err){_didIteratorError221=true;_iteratorError221=err;}finally{try{if(!_iteratorNormalCompletion221&&_iterator221["return"]!=null){_iterator221["return"]();}}finally{if(_didIteratorError221){throw _iteratorError221;}}}if(o<t)for(var _e168=0;_e168<t-o-i;_e168++){n.push("e");}return n;}function Cc(t){var e=t.position&&"$graveyard"==t.position.root.rootName,n=t.range&&"$graveyard"==t.range.root.rootName;return!e&&!n;}var Pc=/*#__PURE__*/function(){function Pc(){_classCallCheck(this,Pc);this._operations=[],this._undoPairs=new Map(),this._undoneOperations=new Set();}_createClass(Pc,[{key:"addOperation",value:function addOperation(t){this._operations.includes(t)||this._operations.push(t);}},{key:"getOperations",value:function getOperations(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY;return t<0?[]:this._operations.slice(t,e);}},{key:"getOperation",value:function getOperation(t){return this._operations[t];}},{key:"setOperationAsUndone",value:function setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t);}},{key:"isUndoingOperation",value:function isUndoingOperation(t){return this._undoPairs.has(t);}},{key:"isUndoneOperation",value:function isUndoneOperation(t){return this._undoneOperations.has(t);}},{key:"getUndoneOperation",value:function getUndoneOperation(t){return this._undoPairs.get(t);}}]);return Pc;}();function Sc(t,e){return function(t){return!!t&&1==t.length&&/[\ud800-\udbff]/.test(t);}(t.charAt(e-1))&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t);}(t.charAt(e));}function Mc(t,e){return function(t){return!!t&&1==t.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t);}(t.charAt(e));}var Ec="$graveyard";var Ic=/*#__PURE__*/function(){function Ic(t){var _this65=this;_classCallCheck(this,Ic);this.model=t,this.version=0,this.history=new Pc(this),this.selection=new sa(this),this.roots=new oo({idProperty:"rootName"}),this.differ=new xc(t.markers),this._postFixers=new Set(),this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Ec),this.listenTo(t,"applyOperation",function(t,e){var n=e[0];if(n.isDocumentOperation&&n.baseVersion!==_this65.version)throw new Gn.b("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",_this65,{operation:n});},{priority:"highest"}),this.listenTo(t,"applyOperation",function(t,e){var n=e[0];n.isDocumentOperation&&_this65.differ.bufferOperation(n);},{priority:"high"}),this.listenTo(t,"applyOperation",function(t,e){var n=e[0];n.isDocumentOperation&&(_this65.version++,_this65.history.addOperation(n));},{priority:"low"}),this.listenTo(this.selection,"change",function(){_this65._hasSelectionChangedFromTheLastChangeBlock=!0;}),this.listenTo(t.markers,"update",function(t,e,n,i){_this65.differ.bufferMarkerChange(e.name,n,i,e.affectsData),null===n&&e.on("change",function(t,n){_this65.differ.bufferMarkerChange(e.name,n,e.getRange(),e.affectsData);});});}_createClass(Ic,[{key:"createRoot",value:function createRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"$root";var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";if(this.roots.get(e))throw new Gn.b("model-document-createRoot-name-exists: Root with specified name already exists.",this,{name:e});var n=new pc(this,t,e);return this.roots.add(n),n;}},{key:"destroy",value:function destroy(){this.selection.destroy(),this.stopListening();}},{key:"getRoot",value:function getRoot(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(t);}},{key:"getRootNames",value:function getRootNames(){return Array.from(this.roots,function(t){return t.rootName;}).filter(function(t){return t!=Ec;});}},{key:"registerPostFixer",value:function registerPostFixer(t){this._postFixers.add(t);}},{key:"toJSON",value:function toJSON(){var t=hi(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t;}},{key:"_handleChangeBlock",value:function _handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1;}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function _hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock;}},{key:"_getDefaultRoot",value:function _getDefaultRoot(){var _iteratorNormalCompletion222=true;var _didIteratorError222=false;var _iteratorError222=undefined;try{for(var _iterator222=this.roots[Symbol.iterator](),_step222;!(_iteratorNormalCompletion222=(_step222=_iterator222.next()).done);_iteratorNormalCompletion222=true){var _t177=_step222.value;if(_t177!==this.graveyard)return _t177;}}catch(err){_didIteratorError222=true;_iteratorError222=err;}finally{try{if(!_iteratorNormalCompletion222&&_iterator222["return"]!=null){_iterator222["return"]();}}finally{if(_didIteratorError222){throw _iteratorError222;}}}return this.graveyard;}},{key:"_getDefaultRange",value:function _getDefaultRange(){var t=this._getDefaultRoot(),e=this.model,n=e.schema,i=e.createPositionFromPath(t,[0]);return n.getNearestSelectionRange(i)||e.createRange(i);}},{key:"_validateSelectionRange",value:function _validateSelectionRange(t){return Nc(t.start)&&Nc(t.end);}},{key:"_callPostFixers",value:function _callPostFixers(t){var e=!1;do{var _iteratorNormalCompletion223=true;var _didIteratorError223=false;var _iteratorError223=undefined;try{for(var _iterator223=this._postFixers[Symbol.iterator](),_step223;!(_iteratorNormalCompletion223=(_step223=_iterator223.next()).done);_iteratorNormalCompletion223=true){var _n155=_step223.value;if(this.selection.refresh(),e=_n155(t))break;}}catch(err){_didIteratorError223=true;_iteratorError223=err;}finally{try{if(!_iteratorNormalCompletion223&&_iterator223["return"]!=null){_iterator223["return"]();}}finally{if(_didIteratorError223){throw _iteratorError223;}}}}while(e);}},{key:"graveyard",get:function get(){return this.getRoot(Ec);}}]);return Ic;}();function Nc(t){var e=t.textNode;if(e){var _n156=e.data,_i116=t.offset-e.startOffset;return!Sc(_n156,_i116)&&!Mc(_n156,_i116);}return!0;}ci(Ic,ei);var Oc=/*#__PURE__*/function(){function Oc(){_classCallCheck(this,Oc);this._markers=new Map();}_createClass(Oc,[{key:Symbol.iterator,value:function value(){return this._markers.values();}},{key:"has",value:function has(t){return this._markers.has(t);}},{key:"get",value:function get(t){return this._markers.get(t)||null;}},{key:"_set",value:function _set(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!1;var o=t instanceof Rc?t.name:t,r=this._markers.get(o);if(r){var _t178=r.getRange();var _s17=!1;return _t178.isEqual(e)||(r._attachLiveRange(oa.fromRange(e)),_s17=!0),n!=r.managedUsingOperations&&(r._managedUsingOperations=n,_s17=!0),"boolean"==typeof i&&i!=r.affectsData&&(r._affectsData=i,_s17=!0),_s17&&this.fire("update:"+o,r,_t178,e),r;}var s=oa.fromRange(e),a=new Rc(o,s,n,i);return this._markers.set(o,a),this.fire("update:"+o,a,null,e),a;}},{key:"_remove",value:function _remove(t){var e=t instanceof Rc?t.name:t,n=this._markers.get(e);return!!n&&(this._markers["delete"](e),this.fire("update:"+e,n,n.getRange(),null),this._destroyMarker(n),!0);}},{key:"_refresh",value:function _refresh(t){var e=t instanceof Rc?t.name:t,n=this._markers.get(e);if(!n)throw new Gn.b("markercollection-refresh-marker-not-exists: Marker with provided name does not exists.",this);var i=n.getRange();this.fire("update:"+e,n,i,i,n.managedUsingOperations,n.affectsData);}},{key:"getMarkersAtPosition",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getMarkersAtPosition(t){var _iteratorNormalCompletion224,_didIteratorError224,_iteratorError224,_iterator224,_step224,_e172;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getMarkersAtPosition$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_iteratorNormalCompletion224=true;_didIteratorError224=false;_iteratorError224=undefined;_context31.prev=3;_iterator224=this[Symbol.iterator]();case 5:if(_iteratorNormalCompletion224=(_step224=_iterator224.next()).done){_context31.next=14;break;}_e172=_step224.value;_context31.t0=_e172.getRange().containsPosition(t);if(!_context31.t0){_context31.next=11;break;}_context31.next=11;return _e172;case 11:_iteratorNormalCompletion224=true;_context31.next=5;break;case 14:_context31.next=20;break;case 16:_context31.prev=16;_context31.t1=_context31["catch"](3);_didIteratorError224=true;_iteratorError224=_context31.t1;case 20:_context31.prev=20;_context31.prev=21;if(!_iteratorNormalCompletion224&&_iterator224["return"]!=null){_iterator224["return"]();}case 23:_context31.prev=23;if(!_didIteratorError224){_context31.next=26;break;}throw _iteratorError224;case 26:return _context31.finish(23);case 27:return _context31.finish(20);case 28:case"end":return _context31.stop();}}},getMarkersAtPosition,this,[[3,16,20,28],[21,,23,27]]);})},{key:"getMarkersIntersectingRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getMarkersIntersectingRange(t){var _iteratorNormalCompletion225,_didIteratorError225,_iteratorError225,_iterator225,_step225,_e173;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getMarkersIntersectingRange$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_iteratorNormalCompletion225=true;_didIteratorError225=false;_iteratorError225=undefined;_context32.prev=3;_iterator225=this[Symbol.iterator]();case 5:if(_iteratorNormalCompletion225=(_step225=_iterator225.next()).done){_context32.next=14;break;}_e173=_step225.value;_context32.t0=null!==_e173.getRange().getIntersection(t);if(!_context32.t0){_context32.next=11;break;}_context32.next=11;return _e173;case 11:_iteratorNormalCompletion225=true;_context32.next=5;break;case 14:_context32.next=20;break;case 16:_context32.prev=16;_context32.t1=_context32["catch"](3);_didIteratorError225=true;_iteratorError225=_context32.t1;case 20:_context32.prev=20;_context32.prev=21;if(!_iteratorNormalCompletion225&&_iterator225["return"]!=null){_iterator225["return"]();}case 23:_context32.prev=23;if(!_didIteratorError225){_context32.next=26;break;}throw _iteratorError225;case 26:return _context32.finish(23);case 27:return _context32.finish(20);case 28:case"end":return _context32.stop();}}},getMarkersIntersectingRange,this,[[3,16,20,28],[21,,23,27]]);})},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion226=true;var _didIteratorError226=false;var _iteratorError226=undefined;try{for(var _iterator226=this._markers.values()[Symbol.iterator](),_step226;!(_iteratorNormalCompletion226=(_step226=_iterator226.next()).done);_iteratorNormalCompletion226=true){var _t179=_step226.value;this._destroyMarker(_t179);}}catch(err){_didIteratorError226=true;_iteratorError226=err;}finally{try{if(!_iteratorNormalCompletion226&&_iterator226["return"]!=null){_iterator226["return"]();}}finally{if(_didIteratorError226){throw _iteratorError226;}}}this._markers=null,this.stopListening();}},{key:"getMarkersGroup",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getMarkersGroup(t){var _iteratorNormalCompletion227,_didIteratorError227,_iteratorError227,_iterator227,_step227,_e174;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getMarkersGroup$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_iteratorNormalCompletion227=true;_didIteratorError227=false;_iteratorError227=undefined;_context33.prev=3;_iterator227=this._markers.values()[Symbol.iterator]();case 5:if(_iteratorNormalCompletion227=(_step227=_iterator227.next()).done){_context33.next=14;break;}_e174=_step227.value;_context33.t0=_e174.name.startsWith(t+":");if(!_context33.t0){_context33.next=11;break;}_context33.next=11;return _e174;case 11:_iteratorNormalCompletion227=true;_context33.next=5;break;case 14:_context33.next=20;break;case 16:_context33.prev=16;_context33.t1=_context33["catch"](3);_didIteratorError227=true;_iteratorError227=_context33.t1;case 20:_context33.prev=20;_context33.prev=21;if(!_iteratorNormalCompletion227&&_iterator227["return"]!=null){_iterator227["return"]();}case 23:_context33.prev=23;if(!_didIteratorError227){_context33.next=26;break;}throw _iteratorError227;case 26:return _context33.finish(23);case 27:return _context33.finish(20);case 28:case"end":return _context33.stop();}}},getMarkersGroup,this,[[3,16,20,28],[21,,23,27]]);})},{key:"_destroyMarker",value:function _destroyMarker(t){t.stopListening(),t._detachLiveRange();}}]);return Oc;}();ci(Oc,ei);var Rc=/*#__PURE__*/function(){function Rc(t,e,n,i){_classCallCheck(this,Rc);this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=i;}_createClass(Rc,[{key:"getStart",value:function getStart(){if(!this._liveRange)throw new Gn.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.start.clone();}},{key:"getEnd",value:function getEnd(){if(!this._liveRange)throw new Gn.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.end.clone();}},{key:"getRange",value:function getRange(){if(!this._liveRange)throw new Gn.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._liveRange.toRange();}},{key:"is",value:function is(t){return"marker"==t||"model:marker"==t;}},{key:"_attachLiveRange",value:function _attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t;}},{key:"_detachLiveRange",value:function _detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null;}},{key:"managedUsingOperations",get:function get(){if(!this._liveRange)throw new Gn.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._managedUsingOperations;}},{key:"affectsData",get:function get(){if(!this._liveRange)throw new Gn.b("marker-destroyed: Cannot use a destroyed marker instance.",this);return this._affectsData;}}]);return Rc;}();ci(Rc,ei);var Dc=/*#__PURE__*/function(_$s){_inherits(Dc,_$s);function Dc(t,e){var _this66;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,Dc);if(_this66=_possibleConstructorReturn(this,_getPrototypeOf(Dc).call(this,t,e,n)),!_this66.root.is("rootElement"))throw new Gn.b("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",t);(function(){var _this67=this;this.listenTo(this.root.document.model,"applyOperation",function(t,e){var n=e[0];n.isDocumentOperation&&function(t){var e=this.getTransformedByOperation(t);if(!this.isEqual(e)){var _t180=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",_t180);}}.call(_this67,n);},{priority:"low"});}).call(_assertThisInitialized(_this66));return _possibleConstructorReturn(_this66);}_createClass(Dc,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(t){return"livePosition"==t||"model:livePosition"==t||_get(_getPrototypeOf(Dc.prototype),"is",this).call(this,t);}},{key:"toPosition",value:function toPosition(){return new $s(this.root,this.path.slice(),this.stickiness);}}],[{key:"fromPosition",value:function fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness);}}]);return Dc;}($s);ci(Dc,ei);var Lc=/*#__PURE__*/function(){function Lc(t,e,n){_classCallCheck(this,Lc);this.model=t,this.writer=e,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=t.schema,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null;}_createClass(Lc,[{key:"handleNodes",value:function handleNodes(t,e){t=Array.from(t);for(var _n157=0;_n157<t.length;_n157++){var _i117=t[_n157];this._handleNode(_i117,{isFirst:0===_n157&&e.isFirst,isLast:_n157===t.length-1&&e.isLast});}this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[];}},{key:"getSelectionRange",value:function getSelectionRange(){return this.nodeToSelect?Gs._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position);}},{key:"getAffectedRange",value:function getAffectedRange(){return this._affectedStart?new Gs(this._affectedStart,this._affectedEnd):null;}},{key:"destroy",value:function destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach();}},{key:"_handleNode",value:function _handleNode(t,e){if(this.schema.isObject(t))return void this._handleObject(t,e);this._checkAndSplitToAllowedPosition(t,e)?(this._insert(t),this._mergeSiblingsOf(t,e)):this._handleDisallowedNode(t,e);}},{key:"_handleObject",value:function _handleObject(t,e){this._checkAndSplitToAllowedPosition(t)?this._insert(t):this._tryAutoparagraphing(t,e);}},{key:"_handleDisallowedNode",value:function _handleDisallowedNode(t,e){t.is("element")?this.handleNodes(t.getChildren(),e):this._tryAutoparagraphing(t,e);}},{key:"_insert",value:function _insert(t){if(!this.schema.checkChild(this.position,t))throw new Gn.b("insertcontent-wrong-position: Given node cannot be inserted on the given position.",this,{node:t,position:this.position});var e=Dc.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this.writer.insert(t,this.position),this.position=e.toPosition(),e.detach(),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=t:this.nodeToSelect=null,this._filterAttributesOf.push(t);}},{key:"_setAffectedBoundaries",value:function _setAffectedBoundaries(t){this._affectedStart||(this._affectedStart=Dc.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Dc.fromPosition(t,"toNext"));}},{key:"_mergeSiblingsOf",value:function _mergeSiblingsOf(t,e){if(!(t instanceof Hs))return;var n=this._canMergeLeft(t,e),i=this._canMergeRight(t,e),o=Dc._createBefore(t);o.stickiness="toNext";var r=Dc._createAfter(t);if(r.stickiness="toNext",n){var _t181=Dc.fromPosition(this.position);_t181.stickiness="toNext",this._affectedStart.isEqual(o)&&(this._affectedStart.detach(),this._affectedStart=Dc._createAt(o.nodeBefore,"end","toPrevious")),this.writer.merge(o),o.isEqual(this._affectedEnd)&&e.isLast&&(this._affectedEnd.detach(),this._affectedEnd=Dc._createAt(o.nodeBefore,"end","toNext")),this.position=_t181.toPosition(),_t181.detach();}if(i){if(!this.position.isEqual(r))throw new Gn.b("insertcontent-invalid-insertion-position",this);this.position=$s._createAt(r.nodeBefore,"end");var _t182=Dc.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(r)&&(this._affectedEnd.detach(),this._affectedEnd=Dc._createAt(r.nodeBefore,"end","toNext")),this.writer.merge(r),r.getShiftedBy(-1).isEqual(this._affectedStart)&&e.isFirst&&(this._affectedStart.detach(),this._affectedStart=Dc._createAt(r.nodeBefore,0,"toPrevious")),this.position=_t182.toPosition(),_t182.detach();}(n||i)&&this._filterAttributesOf.push(this.position.parent),o.detach(),r.detach();}},{key:"_canMergeLeft",value:function _canMergeLeft(t,e){var n=t.previousSibling;return e.isFirst&&n instanceof Hs&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(n,t);}},{key:"_canMergeRight",value:function _canMergeRight(t,e){var n=t.nextSibling;return e.isLast&&n instanceof Hs&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(t,n);}},{key:"_tryAutoparagraphing",value:function _tryAutoparagraphing(t,e){var n=this.writer.createElement("paragraph");this._getAllowedIn(n,this.position.parent)&&this.schema.checkChild(n,t)&&(n._appendChild(t),this._handleNode(n,e));}},{key:"_checkAndSplitToAllowedPosition",value:function _checkAndSplitToAllowedPosition(t){var e=this._getAllowedIn(t,this.position.parent);if(!e)return!1;for(;e!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){var _t183=this.position.parent;this.position=this.writer.createPositionBefore(_t183),_t183.isEmpty&&_t183.parent===e&&this.writer.remove(_t183);}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var _t184=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=_t184,this.canMergeWith.add(this.position.nodeAfter);}}return!0;}},{key:"_getAllowedIn",value:function _getAllowedIn(t,e){return this.schema.checkChild(e,t)?e:e.parent?this._getAllowedIn(t,e.parent):null;}}]);return Lc;}();function jc(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(e.isCollapsed)return;var i=e.getFirstRange();if("$graveyard"==i.root.rootName)return;var o=t.schema;t.change(function(t){if(!n.doNotResetEntireContent&&function(t,e){var n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;var i=e.getFirstRange();if(i.start.parent==i.end.parent)return!1;return t.checkChild(n,"paragraph");}(o,e))return void function(t,e){var n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),Vc(t,t.createPositionAt(n,0),e);}(t,e);var r=i.start,s=Dc.fromPosition(i.end,"toNext");if(i.start.isTouching(i.end)||t.remove(i),n.leaveUnmerged||(!function t(e,n,i){var o=n.parent;var r=i.parent;if(o==r)return;if(e.model.schema.isLimit(o)||e.model.schema.isLimit(r))return;if(!function(t,e,n){var i=new Gs(t,e);var _iteratorNormalCompletion228=true;var _didIteratorError228=false;var _iteratorError228=undefined;try{for(var _iterator228=i.getWalker()[Symbol.iterator](),_step228;!(_iteratorNormalCompletion228=(_step228=_iterator228.next()).done);_iteratorNormalCompletion228=true){var _t185=_step228.value;if(n.isLimit(_t185.item))return!1;}}catch(err){_didIteratorError228=true;_iteratorError228=err;}finally{try{if(!_iteratorNormalCompletion228&&_iterator228["return"]!=null){_iterator228["return"]();}}finally{if(_didIteratorError228){throw _iteratorError228;}}}return!0;}(n,i,e.model.schema))return;n=e.createPositionAfter(o);i=e.createPositionBefore(r);i.isEqual(n)||e.insert(r,n);e.merge(n);for(;i.parent.isEmpty;){var _t186=i.parent;i=e.createPositionBefore(_t186),e.remove(_t186);}t(e,n,i);}(t,r,s),o.removeDisallowedAttributes(r.parent.getChildren(),t)),zc(t,e,r),function(t,e){var n=t.checkChild(e,"$text"),i=t.checkChild(e,"paragraph");return!n&&i;}(o,r)){var _i118=o.getNearestSelectionRange(r);n.doNotAutoparagraph&&_i118?zc(t,e,_i118):Vc(t,r,e);}s.detach();});}function Vc(t,e,n){var i=t.createElement("paragraph");t.insert(i,e),zc(t,n,t.createPositionAt(i,0));}function zc(t,e,n){e instanceof sa?t.setSelection(n):e.setTo(n);}var Bc=' ,.?!:;"-()';function Fc(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.schema,o="backward"!=n.direction,r=n.unit?n.unit:"character",s=e.focus,a=new qs({boundaries:function(t,e){var n=t.root,i=$s._createAt(n,e?"end":0);return e?new Gs(t,i):new Gs(i,t);}(s,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:a,schema:i,isForward:o,unit:r};var l;var _loop3=function _loop3(){if(l.done)return{v:void 0};var n=Uc(c,l.value);if(n)return{v:void(e instanceof sa?t.change(function(t){t.setSelectionFocus(n);}):e.setFocus(n))};};for(;l=a.next();){var _ret2=_loop3();if(_typeof(_ret2)==="object")return _ret2.v;}}function Uc(t,e){if("text"==e.type)return"word"===t.unit?function(t,e){var n=t.position.textNode;if(n){var _i119=t.position.offset-n.startOffset;for(;!Hc(n.data,_i119,e)&&!qc(n,_i119,e);){t.next();var _o51=e?t.position.nodeAfter:t.position.nodeBefore;if(_o51&&_o51.is("text")){var _i120=_o51.data.charAt(e?0:_o51.data.length-1);Bc.includes(_i120)||(t.next(),n=t.position.textNode);}_i119=t.position.offset-n.startOffset;}}return t.position;}(t.walker,t.isForward):function(t,e){var n=t.position.textNode;if(n){var _i121=n.data;var _o52=t.position.offset-n.startOffset;for(;Sc(_i121,_o52)||"character"==e&&Mc(_i121,_o52);){t.next(),_o52=t.position.offset-n.startOffset;}}return t.position;}(t.walker,t.unit,t.isForward);if(e.type==(t.isForward?"elementStart":"elementEnd")){if(t.schema.isObject(e.item))return $s._createAt(e.item,t.isForward?"after":"before");if(t.schema.checkChild(e.nextPosition,"$text"))return e.nextPosition;}else{if(t.schema.isLimit(e.item))return void t.walker.skip(function(){return!0;});if(t.schema.checkChild(e.nextPosition,"$text"))return e.nextPosition;}}function Hc(t,e,n){var i=e+(n?0:-1);return Bc.includes(t.charAt(i));}function qc(t,e,n){return e===(n?t.endOffset:0);}function Wc(t,e){var n=[];Array.from(t.getItems({direction:"backward"})).map(function(t){return e.createRangeOn(t);}).filter(function(e){return(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end));}).forEach(function(t){n.push(t.start.parent),e.remove(t);}),n.forEach(function(t){var n=t;for(;n.parent&&n.isEmpty;){var _t187=e.createRangeOn(n);n=n.parent,e.remove(_t187);}});}function Yc(t){t.document.registerPostFixer(function(e){return function(t,e){var n=e.document.selection,i=e.schema,o=[];var r=!1;var _iteratorNormalCompletion229=true;var _didIteratorError229=false;var _iteratorError229=undefined;try{for(var _iterator229=n.getRanges()[Symbol.iterator](),_step229;!(_iteratorNormalCompletion229=(_step229=_iterator229.next()).done);_iteratorNormalCompletion229=true){var _t189=_step229.value;var _e176=$c(_t189,i);_e176?(o.push(_e176),r=!0):o.push(_t189);}}catch(err){_didIteratorError229=true;_iteratorError229=err;}finally{try{if(!_iteratorNormalCompletion229&&_iterator229["return"]!=null){_iterator229["return"]();}}finally{if(_didIteratorError229){throw _iteratorError229;}}}if(r){var _e175=o;if(o.length>1){var _t188=o[0].start,_n158=o[o.length-1].end;_e175=[new Gs(_t188,_n158)];}t.setSelection(_e175,{backward:n.isBackward});}}(e,t);});}function $c(t,e){return t.isCollapsed?function(t,e){var n=t.start,i=e.getNearestSelectionRange(n);if(!i)return null;var o=i.start;if(n.isEqual(o))return null;if(o.nodeAfter&&e.isLimit(o.nodeAfter))return new Gs(o,$s._createAfter(o.nodeAfter));return new Gs(o);}(t,e):function(t,e){var n=t.start,i=t.end,o=e.checkChild(n,"$text"),r=e.checkChild(i,"$text"),s=e.getLimitElement(n),a=e.getLimitElement(i);if(s===a){if(o&&r)return null;if(function(t,e,n){var i=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),o=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return i||o;}(n,i,e)){var _t190=n.nodeAfter&&e.isObject(n.nodeAfter),_o53=_t190?null:e.getNearestSelectionRange(n,"forward"),_r23=i.nodeBefore&&e.isObject(i.nodeBefore),_s18=_r23?null:e.getNearestSelectionRange(i,"backward"),_a10=_o53?_o53.start:n,_c5=_s18?_s18.start:i;return new Gs(_a10,_c5);}}var c=s&&!s.is("rootElement"),l=a&&!a.is("rootElement");if(c||l){var _t191=n.nodeAfter&&i.nodeBefore&&n.nodeAfter.parent===i.nodeBefore.parent,_o54=c&&(!_t191||!Qc(n.nodeAfter,e)),_r24=l&&(!_t191||!Qc(i.nodeBefore,e));var _d2=n,_h2=i;return _o54&&(_d2=$s._createBefore(Gc(s,e))),_r24&&(_h2=$s._createAfter(Gc(a,e))),new Gs(_d2,_h2);}return null;}(t,e);}function Gc(t,e){var n=t,i=n;for(;e.isLimit(i)&&i.parent;){n=i,i=i.parent;}return n;}function Qc(t,e){return t&&e.isObject(t);}var Kc=/*#__PURE__*/function(){function Kc(){var _this68=this;_classCallCheck(this,Kc);this.markers=new Oc(),this.document=new Ic(this),this.schema=new Oa(),this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(t){return _this68.decorate(t);}),this.on("applyOperation",function(t,e){e[0]._validate();},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$marker"),this.schema.addChildCheck(function(t,e){if("$marker"===e.name)return!0;}),Yc(this);}_createClass(Kc,[{key:"change",value:function change(t){return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Ka(),callback:t}),this._runPendingChanges()[0]):t(this._currentWriter);}},{key:"enqueueChange",value:function enqueueChange(t,e){"string"==typeof t?t=new Ka(t):"function"==typeof t&&(e=t,t=new Ka()),this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges();}},{key:"applyOperation",value:function applyOperation(t){t._execute();}},{key:"insertContent",value:function insertContent(t,e,n){return function(t,e,n,i){return t.change(function(o){var r;var s=(r=n?n instanceof ta||n instanceof sa?n:o.createSelection(n,i):t.document.selection).getFirstPosition();r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0});var a=new Lc(t,o,s);var c;c=e.is("documentFragment")?e.getChildren():[e],a.handleNodes(c,{isFirst:!0,isLast:!0});var l=a.getSelectionRange();l&&(r instanceof sa?o.setSelection(l):r.setTo(l));var d=a.getAffectedRange()||t.createRange(s);return a.destroy(),d;});}(this,t,e,n);}},{key:"deleteContent",value:function deleteContent(t,e){jc(this,t,e);}},{key:"modifySelection",value:function modifySelection(t,e){Fc(this,t,e);}},{key:"getSelectedContent",value:function getSelectedContent(t){return function(t,e){return t.change(function(t){var n=t.createDocumentFragment(),i=e.getFirstRange();if(!i||i.isCollapsed)return n;var o=i.start.root,r=i.start.getCommonPath(i.end),s=o.getNodeByPath(r);var a;var c=(a=i.start.parent==i.end.parent?i:t.createRange(t.createPositionAt(s,i.start.path[r.length]),t.createPositionAt(s,i.end.path[r.length]+1))).end.offset-a.start.offset;var _iteratorNormalCompletion230=true;var _didIteratorError230=false;var _iteratorError230=undefined;try{for(var _iterator230=a.getItems({shallow:!0})[Symbol.iterator](),_step230;!(_iteratorNormalCompletion230=(_step230=_iterator230.next()).done);_iteratorNormalCompletion230=true){var _e178=_step230.value;_e178.is("textProxy")?t.appendText(_e178.data,_e178.getAttributes(),n):t.append(_e178._clone(!0),n);}}catch(err){_didIteratorError230=true;_iteratorError230=err;}finally{try{if(!_iteratorNormalCompletion230&&_iterator230["return"]!=null){_iterator230["return"]();}}finally{if(_didIteratorError230){throw _iteratorError230;}}}if(a!=i){var _e177=i._getTransformedByMove(a.start,t.createPositionAt(n,0),c)[0],_o55=t.createRange(t.createPositionAt(n,0),_e177.start);Wc(t.createRange(_e177.end,t.createPositionAt(n,"end")),t),Wc(_o55,t);}return n;});}(this,t);}},{key:"hasContent",value:function hasContent(t,e){var n=t instanceof Hs?Gs._createIn(t):t;if(n.isCollapsed)return!1;var _iteratorNormalCompletion231=true;var _didIteratorError231=false;var _iteratorError231=undefined;try{for(var _iterator231=this.markers.getMarkersIntersectingRange(n)[Symbol.iterator](),_step231;!(_iteratorNormalCompletion231=(_step231=_iterator231.next()).done);_iteratorNormalCompletion231=true){var _t192=_step231.value;if(_t192.affectsData)return!0;}}catch(err){_didIteratorError231=true;_iteratorError231=err;}finally{try{if(!_iteratorNormalCompletion231&&_iterator231["return"]!=null){_iterator231["return"]();}}finally{if(_didIteratorError231){throw _iteratorError231;}}}var _ref19=e||{},_ref19$ignoreWhitespa=_ref19.ignoreWhitespaces,i=_ref19$ignoreWhitespa===void 0?!1:_ref19$ignoreWhitespa;var _iteratorNormalCompletion232=true;var _didIteratorError232=false;var _iteratorError232=undefined;try{for(var _iterator232=n.getItems()[Symbol.iterator](),_step232;!(_iteratorNormalCompletion232=(_step232=_iterator232.next()).done);_iteratorNormalCompletion232=true){var _t193=_step232.value;if(_t193.is("textProxy")){if(!i)return!0;if(-1!==_t193.data.search(/\S/))return!0;}else if(this.schema.isObject(_t193))return!0;}}catch(err){_didIteratorError232=true;_iteratorError232=err;}finally{try{if(!_iteratorNormalCompletion232&&_iterator232["return"]!=null){_iterator232["return"]();}}finally{if(_didIteratorError232){throw _iteratorError232;}}}return!1;}},{key:"createPositionFromPath",value:function createPositionFromPath(t,e,n){return new $s(t,e,n);}},{key:"createPositionAt",value:function createPositionAt(t,e){return $s._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return $s._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return $s._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new Gs(t,e);}},{key:"createRangeIn",value:function createRangeIn(t){return Gs._createIn(t);}},{key:"createRangeOn",value:function createRangeOn(t){return Gs._createOn(t);}},{key:"createSelection",value:function createSelection(t,e,n){return new ta(t,e,n);}},{key:"createBatch",value:function createBatch(t){return new Ka(t);}},{key:"destroy",value:function destroy(){this.document.destroy(),this.stopListening();}},{key:"_runPendingChanges",value:function _runPendingChanges(){var t=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){var _e179=this._pendingChanges[0].batch;this._currentWriter=new bc(this,_e179);var _n159=this._pendingChanges[0].callback(this._currentWriter);t.push(_n159),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null;}return this.fire("_afterChanges"),t;}}]);return Kc;}();ci(Kc,Fi);var Jc=/*#__PURE__*/function(){function Jc(){_classCallCheck(this,Jc);this._listener=Object.create(lr);}_createClass(Jc,[{key:"listenTo",value:function listenTo(t){var _this69=this;this._listener.listenTo(t,"keydown",function(t,e){_this69._listener.fire("_keydown:"+wo(e),e);});}},{key:"set",value:function set(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=ko(t),o=n.priority;this._listener.listenTo(this._listener,"_keydown:"+i,function(t,n){e(n,function(){n.preventDefault(),n.stopPropagation(),t.stop();}),t["return"]=!0;},{priority:o});}},{key:"press",value:function press(t){return!!this._listener.fire("_keydown:"+wo(t),t);}},{key:"destroy",value:function destroy(){this._listener.stopListening();}}]);return Jc;}();var Zc=/*#__PURE__*/function(_Jc){_inherits(Zc,_Jc);function Zc(t){var _this70;_classCallCheck(this,Zc);_this70=_possibleConstructorReturn(this,_getPrototypeOf(Zc).call(this)),_this70.editor=t;return _this70;}_createClass(Zc,[{key:"set",value:function set(t,e){var _this71=this;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if("string"==typeof e){var _t194=e;e=function e(_e180,n){_this71.editor.execute(_t194),n();};}_get(_getPrototypeOf(Zc.prototype),"set",this).call(this,t,e,n);}}]);return Zc;}(Jc);var Xc=/*#__PURE__*/function(){function Xc(t){var _this72=this;_classCallCheck(this,Xc);var e=this.constructor.builtinPlugins;this.config=new Yn(t,this.constructor.defaultConfig),this.config.define("plugins",e),this.plugins=new Ta(this,e),this.commands=new Ca();var n=this.config.get("language")||{};this.locale=new Ma({uiLanguage:"string"==typeof n?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.set("state","initializing"),this.once("ready",function(){return _this72.state="ready";},{priority:"high"}),this.once("destroy",function(){return _this72.state="destroyed";},{priority:"high"}),this.set("isReadOnly",!1),this.model=new Kc(),this.data=new Ya(this.model),this.editing=new Aa(this.model),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new $a([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Zc(this),this.keystrokes.listenTo(this.editing.view.document);}_createClass(Xc,[{key:"initPlugins",value:function initPlugins(){var t=this.config,e=t.get("plugins")||[],n=t.get("removePlugins")||[],i=t.get("extraPlugins")||[];return this.plugins.init(e.concat(i),n);}},{key:"destroy",value:function destroy(){var _this73=this;var t=Promise.resolve();return"initializing"==this.state&&(t=new Promise(function(t){return _this73.once("ready",t);})),t.then(function(){_this73.fire("destroy"),_this73.stopListening(),_this73.commands.destroy();}).then(function(){return _this73.plugins.destroy();}).then(function(){_this73.model.destroy(),_this73.data.destroy(),_this73.editing.destroy(),_this73.keystrokes.destroy();});}},{key:"execute",value:function execute(){var _this$commands;(_this$commands=this.commands).execute.apply(_this$commands,arguments);}}]);return Xc;}();ci(Xc,Fi);var tl={setData:function setData(t){this.data.set(t);},getData:function getData(t){return this.data.get(t);}};var el={updateSourceElement:function updateSourceElement(){if(!this.sourceElement)throw new Gn.b("editor-missing-sourceelement: Cannot update the source element of a detached editor.",this);!function(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e;}(this.sourceElement,this.data.get());}};var nl=/*#__PURE__*/function(){function nl(){_classCallCheck(this,nl);}_createClass(nl,[{key:"getHtml",value:function getHtml(t){var e=document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML;}}]);return nl;}();var il=/*#__PURE__*/function(){function il(){_classCallCheck(this,il);this._domParser=new DOMParser(),this._domConverter=new rr({blockFiller:jo}),this._htmlWriter=new nl();}_createClass(il,[{key:"toData",value:function toData(t){var e=this._domConverter.viewToDom(t,document);return this._htmlWriter.getHtml(e);}},{key:"toView",value:function toView(t){var e=this._toDom(t);return this._domConverter.domToView(e);}},{key:"_toDom",value:function _toDom(t){var e=this._domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),i=e.body.childNodes;for(;i.length>0;){n.appendChild(i[0]);}return n;}}]);return il;}();var ol=/*#__PURE__*/function(){function ol(t){_classCallCheck(this,ol);this.editor=t,this._components=new Map();}_createClass(ol,[{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function names(){var _iteratorNormalCompletion233,_didIteratorError233,_iteratorError233,_iterator233,_step233,_t195;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function names$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_iteratorNormalCompletion233=true;_didIteratorError233=false;_iteratorError233=undefined;_context34.prev=3;_iterator233=this._components.values()[Symbol.iterator]();case 5:if(_iteratorNormalCompletion233=(_step233=_iterator233.next()).done){_context34.next=12;break;}_t195=_step233.value;_context34.next=9;return _t195.originalName;case 9:_iteratorNormalCompletion233=true;_context34.next=5;break;case 12:_context34.next=18;break;case 14:_context34.prev=14;_context34.t0=_context34["catch"](3);_didIteratorError233=true;_iteratorError233=_context34.t0;case 18:_context34.prev=18;_context34.prev=19;if(!_iteratorNormalCompletion233&&_iterator233["return"]!=null){_iterator233["return"]();}case 21:_context34.prev=21;if(!_didIteratorError233){_context34.next=24;break;}throw _iteratorError233;case 24:return _context34.finish(21);case 25:return _context34.finish(18);case 26:case"end":return _context34.stop();}}},names,this,[[3,14,18,26],[19,,21,25]]);})},{key:"add",value:function add(t,e){if(this.has(t))throw new Gn.b("componentfactory-item-exists: The item already exists in the component factory.",this,{name:t});this._components.set(rl(t),{callback:e,originalName:t});}},{key:"create",value:function create(t){if(!this.has(t))throw new Gn.b("componentfactory-item-missing: The required component is not registered in the factory.",this,{name:t});return this._components.get(rl(t)).callback(this.editor.locale);}},{key:"has",value:function has(t){return this._components.has(rl(t));}}]);return ol;}();function rl(t){return String(t).toLowerCase();}var sl=/*#__PURE__*/function(){function sl(){_classCallCheck(this,sl);this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set(),this._nextEventLoopTimeout=null;}_createClass(sl,[{key:"add",value:function add(t){var _this74=this;if(this._elements.has(t))throw new Gn.b("focusTracker-add-element-already-exist",this);this.listenTo(t,"focus",function(){return _this74._focus(t);},{useCapture:!0}),this.listenTo(t,"blur",function(){return _this74._blur();},{useCapture:!0}),this._elements.add(t);}},{key:"remove",value:function remove(t){t===this.focusedElement&&this._blur(t),this._elements.has(t)&&(this.stopListening(t),this._elements["delete"](t));}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_focus",value:function _focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0;}},{key:"_blur",value:function _blur(){var _this75=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(function(){_this75.focusedElement=null,_this75.isFocused=!1;},0);}}]);return sl;}();ci(sl,lr),ci(sl,Fi);var al=/*#__PURE__*/function(){function al(t){var _this76=this;_classCallCheck(this,al);this.editor=t,this.componentFactory=new ol(t),this.focusTracker=new sl(),this._editableElementsMap=new Map(),this.listenTo(t.editing.view.document,"layoutChanged",function(){return _this76.update();});}_createClass(al,[{key:"update",value:function update(){this.fire("update");}},{key:"destroy",value:function destroy(){this.stopListening(),this.focusTracker.destroy();var _iteratorNormalCompletion234=true;var _didIteratorError234=false;var _iteratorError234=undefined;try{for(var _iterator234=this._editableElementsMap.values()[Symbol.iterator](),_step234;!(_iteratorNormalCompletion234=(_step234=_iterator234.next()).done);_iteratorNormalCompletion234=true){var _t196=_step234.value;_t196.ckeditorInstance=null;}}catch(err){_didIteratorError234=true;_iteratorError234=err;}finally{try{if(!_iteratorNormalCompletion234&&_iterator234["return"]!=null){_iterator234["return"]();}}finally{if(_didIteratorError234){throw _iteratorError234;}}}this._editableElementsMap=new Map();}},{key:"setEditableElement",value:function setEditableElement(t,e){this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor);}},{key:"getEditableElement",value:function getEditableElement(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this._editableElementsMap.get(t);}},{key:"getEditableElementsNames",value:function getEditableElementsNames(){return this._editableElementsMap.keys();}},{key:"element",get:function get(){return null;}},{key:"_editableElements",get:function get(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap;}}]);return al;}();ci(al,ei);n(14);var cl=new WeakMap();function ll(t){var e=t.view,n=t.element,i=t.text,_t$isDirectHost=t.isDirectHost,o=_t$isDirectHost===void 0?!0:_t$isDirectHost,r=e.document;cl.has(r)||(cl.set(r,new Map()),r.registerPostFixer(function(t){return hl(r,t);})),cl.get(r).set(n,{text:i,isDirectHost:o}),e.change(function(t){return hl(r,t);});}function dl(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0);}function hl(t,e){var n=cl.get(t);var i=!1;var _iteratorNormalCompletion235=true;var _didIteratorError235=false;var _iteratorError235=undefined;try{for(var _iterator235=n[Symbol.iterator](),_step235;!(_iteratorNormalCompletion235=(_step235=_iterator235.next()).done);_iteratorNormalCompletion235=true){var _step235$value=_slicedToArray(_step235.value,2),_t197=_step235$value[0],_o56=_step235$value[1];ul(e,_t197,_o56)&&(i=!0);}}catch(err){_didIteratorError235=true;_iteratorError235=err;}finally{try{if(!_iteratorNormalCompletion235&&_iterator235["return"]!=null){_iterator235["return"]();}}finally{if(_didIteratorError235){throw _iteratorError235;}}}return i;}function ul(t,e,n){var i=n.text,o=n.isDirectHost,r=o?e:function(t){if(1===t.childCount){var _e181=t.getChild(0);if(_e181.is("element")&&!_e181.is("uiElement"))return _e181;}return null;}(e);var s=!1;return!!r&&(n.hostElement=r,r.getAttribute("data-placeholder")!==i&&(t.setAttribute("data-placeholder",i,r),s=!0),!function(t){var e=t.document;if(!e)return!1;var n=!Array.from(t.getChildren()).some(function(t){return!t.is("uiElement");});if(!e.isFocused&&n)return!0;var i=e.selection.anchor;return!(!n||!i||i.parent===t);}(r)?dl(t,r)&&(s=!0):function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0);}(t,r)&&(s=!0),s);}var fl=/*#__PURE__*/function(){function fl(){_classCallCheck(this,fl);this._replacedElements=[];}_createClass(fl,[{key:"replace",value:function replace(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling);}},{key:"restore",value:function restore(){this._replacedElements.forEach(function(_ref20){var t=_ref20.element,e=_ref20.newElement;t.style.display="",e&&e.remove();}),this._replacedElements=[];}}]);return fl;}();var ml=/*#__PURE__*/function(_al){_inherits(ml,_al);function ml(t,e){var _this77;_classCallCheck(this,ml);_this77=_possibleConstructorReturn(this,_getPrototypeOf(ml).call(this,t)),_this77.view=e,_this77._toolbarConfig=function(t){return Array.isArray(t)?{items:t}:t?Object.assign({items:[]},t):{items:[]};}(t.config.get("toolbar")),_this77._elementReplacer=new fl();return _this77;}_createClass(ml,[{key:"init",value:function init(t){var e=this.editor,n=this.view,i=e.editing.view,o=n.editable,r=i.document.getRoot();o.name=r.rootName,n.render();var s=o.element;this.setEditableElement(o.name,s),this.focusTracker.add(s),n.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(s),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready");}},{key:"destroy",value:function destroy(){var t=this.view,e=this.editor.editing.view;this._elementReplacer.restore(),e.detachDomRoot(t.editable.name),t.destroy(),_get(_getPrototypeOf(ml.prototype),"destroy",this).call(this);}},{key:"_initToolbar",value:function _initToolbar(){var t=this.editor,e=this.view,n=t.editing.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,this._toolbarConfig.viewportTopOffset&&(e.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),e.toolbar.fillFromConfig(this._toolbarConfig.items,this.componentFactory),function(_ref21){var t=_ref21.origin,e=_ref21.originKeystrokeHandler,n=_ref21.originFocusTracker,i=_ref21.toolbar,o=_ref21.beforeFocus,r=_ref21.afterBlur;n.add(i.element),e.set("Alt+F10",function(t,e){n.isFocused&&!i.focusTracker.isFocused&&(o&&o(),i.focus(),e());}),i.keystrokes.set("Esc",function(e,n){i.focusTracker.isFocused&&(t.focus(),r&&r(),n());});}({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:t.keystrokes,toolbar:e.toolbar});}},{key:"_initPlaceholder",value:function _initPlaceholder(){var t=this.editor,e=t.editing.view,n=e.document.getRoot(),i=t.sourceElement,o=t.config.get("placeholder")||i&&"textarea"===i.tagName.toLowerCase()&&i.getAttribute("placeholder");o&&ll({view:e,element:n,text:o,isDirectHost:!1});}},{key:"element",get:function get(){return this.view.element;}}]);return ml;}(al);var gl=/*#__PURE__*/function(_oo){_inherits(gl,_oo);function gl(t){var _this78;_classCallCheck(this,gl);_this78=_possibleConstructorReturn(this,_getPrototypeOf(gl).call(this,{idProperty:"viewUid"})),_this78.on("add",function(t,e,n){e.isRendered||e.render(),e.element&&_this78._parentElement&&_this78._parentElement.insertBefore(e.element,_this78._parentElement.children[n]);}),_this78.on("remove",function(t,e){e.element&&_this78._parentElement&&e.element.remove();}),_this78.locale=t,_this78._parentElement=null;return _this78;}_createClass(gl,[{key:"destroy",value:function destroy(){this.map(function(t){return t.destroy();});}},{key:"setParent",value:function setParent(t){this._parentElement=t;}},{key:"delegate",value:function delegate(){var _this79=this;for(var _len17=arguments.length,t=new Array(_len17),_key17=0;_key17<_len17;_key17++){t[_key17]=arguments[_key17];}if(!t.length||!function(t){return t.every(function(t){return"string"==typeof t;});}(t))throw new Gn.b("ui-viewcollection-delegate-wrong-events: All event names must be strings.",this);return{to:function to(e){var _iteratorNormalCompletion236=true;var _didIteratorError236=false;var _iteratorError236=undefined;try{for(var _iterator236=_this79[Symbol.iterator](),_step236;!(_iteratorNormalCompletion236=(_step236=_iterator236.next()).done);_iteratorNormalCompletion236=true){var _n162=_step236.value;for(var _i124=0,_t200=t;_i124<_t200.length;_i124++){var _i125=_t200[_i124];_n162.delegate(_i125).to(e);}}}catch(err){_didIteratorError236=true;_iteratorError236=err;}finally{try{if(!_iteratorNormalCompletion236&&_iterator236["return"]!=null){_iterator236["return"]();}}finally{if(_didIteratorError236){throw _iteratorError236;}}}_this79.on("add",function(n,i){for(var _i122=0,_t198=t;_i122<_t198.length;_i122++){var _n160=_t198[_i122];i.delegate(_n160).to(e);}}),_this79.on("remove",function(n,i){for(var _i123=0,_t199=t;_i123<_t199.length;_i123++){var _n161=_t199[_i123];i.stopDelegating(_n161,e);}});}};}}]);return gl;}(oo);var pl="http://www.w3.org/1999/xhtml";var bl=/*#__PURE__*/function(){function bl(t){_classCallCheck(this,bl);Object.assign(this,Cl(Tl(t))),this._isRendered=!1,this._revertData=null;}_createClass(bl,[{key:"render",value:function render(){var t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t;}},{key:"apply",value:function apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,isApplying:!0,revertData:this._revertData}),t;}},{key:"revert",value:function revert(t){if(!this._revertData)throw new Gn.b("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.",[this,t]);this._revertTemplateFromNode(t,this._revertData);}},{key:"getViews",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getViews(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getViews$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:return _context36.delegateYield(/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function t(e){var _iteratorNormalCompletion237,_didIteratorError237,_iteratorError237,_iterator237,_step237,_n163;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function t$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:if(!e.children){_context35.next=33;break;}_iteratorNormalCompletion237=true;_didIteratorError237=false;_iteratorError237=undefined;_context35.prev=4;_iterator237=e.children[Symbol.iterator]();case 6:if(_iteratorNormalCompletion237=(_step237=_iterator237.next()).done){_context35.next=19;break;}_n163=_step237.value;if(!Il(_n163)){_context35.next=13;break;}_context35.next=11;return _n163;case 11:_context35.next=16;break;case 13:_context35.t0=Nl(_n163);if(!_context35.t0){_context35.next=16;break;}return _context35.delegateYield(t(_n163),"t1",16);case 16:_iteratorNormalCompletion237=true;_context35.next=6;break;case 19:_context35.next=25;break;case 21:_context35.prev=21;_context35.t2=_context35["catch"](4);_didIteratorError237=true;_iteratorError237=_context35.t2;case 25:_context35.prev=25;_context35.prev=26;if(!_iteratorNormalCompletion237&&_iterator237["return"]!=null){_iterator237["return"]();}case 28:_context35.prev=28;if(!_didIteratorError237){_context35.next=31;break;}throw _iteratorError237;case 31:return _context35.finish(28);case 32:return _context35.finish(25);case 33:case"end":return _context35.stop();}}},t,null,[[4,21,25,33],[26,,28,32]]);})(this),"t0",1);case 1:case"end":return _context36.stop();}}},getViews,this);})},{key:"_renderNode",value:function _renderNode(t){var e;if(e=t.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new Gn.b('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.',this);return this.text?this._renderText(t):this._renderElement(t);}},{key:"_renderElement",value:function _renderElement(t){var e=t.node;return e||(e=t.node=document.createElementNS(this.ns||pl,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e;}},{key:"_renderText",value:function _renderText(t){var e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),vl(this.text)?this._bindToObservable({schema:this.text,updater:function(t){return{set:function set(e){t.textContent=e;},remove:function remove(){t.textContent="";}};}(e),data:t}):e.textContent=this.text.join(""),e;}},{key:"_renderAttributes",value:function _renderAttributes(t){var e,n,i,o;if(!this.attributes)return;var r=t.node,s=t.revertData;for(e in this.attributes){if(i=r.getAttribute(e),n=this.attributes[e],s&&(s.attributes[e]=i),o=B(n[0])&&n[0].ns?n[0].ns:null,vl(n)){var _a11=o?n[0].value:n;s&&Rl(e)&&_a11.unshift(i),this._bindToObservable({schema:_a11,updater:xl(r,e,o),data:t});}else"style"==e&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],t):(s&&i&&Rl(e)&&n.unshift(i),El(n=n.map(function(t){return t&&t.value||t;}).reduce(function(t,e){return t.concat(e);},[]).reduce(Sl,""))||r.setAttributeNS(o,e,n));}}},{key:"_renderStyleAttribute",value:function _renderStyleAttribute(t,e){var n=e.node;for(var _i126 in t){var _o57=t[_i126];vl(_o57)?this._bindToObservable({schema:[_o57],updater:Al(n,_i126),data:e}):n.style[_i126]=_o57;}}},{key:"_renderElementChildren",value:function _renderElementChildren(t){var e=t.node,n=t.intoFragment?document.createDocumentFragment():e,i=t.isApplying;var o=0;var _iteratorNormalCompletion238=true;var _didIteratorError238=false;var _iteratorError238=undefined;try{for(var _iterator238=this.children[Symbol.iterator](),_step238;!(_iteratorNormalCompletion238=(_step238=_iterator238.next()).done);_iteratorNormalCompletion238=true){var _r25=_step238.value;if(Ol(_r25)){if(!i){_r25.setParent(e);var _iteratorNormalCompletion239=true;var _didIteratorError239=false;var _iteratorError239=undefined;try{for(var _iterator239=_r25[Symbol.iterator](),_step239;!(_iteratorNormalCompletion239=(_step239=_iterator239.next()).done);_iteratorNormalCompletion239=true){var _t201=_step239.value;n.appendChild(_t201.element);}}catch(err){_didIteratorError239=true;_iteratorError239=err;}finally{try{if(!_iteratorNormalCompletion239&&_iterator239["return"]!=null){_iterator239["return"]();}}finally{if(_didIteratorError239){throw _iteratorError239;}}}}}else if(Il(_r25))i||(_r25.isRendered||_r25.render(),n.appendChild(_r25.element));else if(Zo(_r25))n.appendChild(_r25);else if(i){var _e182={children:[],bindings:[],attributes:{}};t.revertData.children.push(_e182),_r25._renderNode({node:n.childNodes[o++],isApplying:!0,revertData:_e182});}else n.appendChild(_r25.render());}}catch(err){_didIteratorError238=true;_iteratorError238=err;}finally{try{if(!_iteratorNormalCompletion238&&_iterator238["return"]!=null){_iterator238["return"]();}}finally{if(_didIteratorError238){throw _iteratorError238;}}}t.intoFragment&&e.appendChild(n);}},{key:"_setUpListeners",value:function _setUpListeners(t){var _this80=this;if(this.eventListeners){var _loop4=function _loop4(_e183){var n=_this80.eventListeners[_e183].map(function(n){var _e183$split=_e183.split("@"),_e183$split2=_slicedToArray(_e183$split,2),i=_e183$split2[0],o=_e183$split2[1];return n.activateDomEventListener(i,o,t);});t.revertData&&t.revertData.bindings.push(n);};for(var _e183 in this.eventListeners){_loop4(_e183);}}}},{key:"_bindToObservable",value:function _bindToObservable(_ref22){var t=_ref22.schema,e=_ref22.updater,n=_ref22.data;var i=n.revertData;yl(t,e,n);var o=t.filter(function(t){return!El(t);}).filter(function(t){return t.observable;}).map(function(i){return i.activateAttributeListener(t,e,n);});i&&i.bindings.push(o);}},{key:"_revertTemplateFromNode",value:function _revertTemplateFromNode(t,e){var _iteratorNormalCompletion240=true;var _didIteratorError240=false;var _iteratorError240=undefined;try{for(var _iterator240=e.bindings[Symbol.iterator](),_step240;!(_iteratorNormalCompletion240=(_step240=_iterator240.next()).done);_iteratorNormalCompletion240=true){var _t202=_step240.value;var _iteratorNormalCompletion241=true;var _didIteratorError241=false;var _iteratorError241=undefined;try{for(var _iterator241=_t202[Symbol.iterator](),_step241;!(_iteratorNormalCompletion241=(_step241=_iterator241.next()).done);_iteratorNormalCompletion241=true){var _e184=_step241.value;_e184();}}catch(err){_didIteratorError241=true;_iteratorError241=err;}finally{try{if(!_iteratorNormalCompletion241&&_iterator241["return"]!=null){_iterator241["return"]();}}finally{if(_didIteratorError241){throw _iteratorError241;}}}}}catch(err){_didIteratorError240=true;_iteratorError240=err;}finally{try{if(!_iteratorNormalCompletion240&&_iterator240["return"]!=null){_iterator240["return"]();}}finally{if(_didIteratorError240){throw _iteratorError240;}}}if(e.text)t.textContent=e.text;else{for(var _n164 in e.attributes){var _i127=e.attributes[_n164];null===_i127?t.removeAttribute(_n164):t.setAttribute(_n164,_i127);}for(var _n165=0;_n165<e.children.length;++_n165){this._revertTemplateFromNode(t.childNodes[_n165],e.children[_n165]);}}}}],[{key:"bind",value:function bind(t,e){return{to:function to(n,i){return new kl({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:i});},"if":function _if(n,i,o){return new _l({observable:t,emitter:e,attribute:n,valueIfTrue:i,callback:o});}};}},{key:"extend",value:function extend(t,e){if(t._isRendered)throw new Gn.b("template-extend-render: Attempting to extend a template which has already been rendered.",[this,t]);!function t(e,n){var _e$text;n.attributes&&(e.attributes||(e.attributes={}),Ml(e.attributes,n.attributes));n.eventListeners&&(e.eventListeners||(e.eventListeners={}),Ml(e.eventListeners,n.eventListeners));n.text&&(_e$text=e.text).push.apply(_e$text,_toConsumableArray(n.text));if(n.children&&n.children.length){if(e.children.length!=n.children.length)throw new Gn.b("ui-template-extend-children-mismatch: The number of children in extended definition does not match.",e);var _i128=0;var _iteratorNormalCompletion242=true;var _didIteratorError242=false;var _iteratorError242=undefined;try{for(var _iterator242=n.children[Symbol.iterator](),_step242;!(_iteratorNormalCompletion242=(_step242=_iterator242.next()).done);_iteratorNormalCompletion242=true){var _o58=_step242.value;t(e.children[_i128++],_o58);}}catch(err){_didIteratorError242=true;_iteratorError242=err;}finally{try{if(!_iteratorNormalCompletion242&&_iterator242["return"]!=null){_iterator242["return"]();}}finally{if(_didIteratorError242){throw _iteratorError242;}}}}}(t,Cl(Tl(e)));}}]);return bl;}();ci(bl,ei);var wl=/*#__PURE__*/function(){function wl(t){_classCallCheck(this,wl);Object.assign(this,t);}_createClass(wl,[{key:"getValue",value:function getValue(t){var e=this.observable[this.attribute];return this.callback?this.callback(e,t):e;}},{key:"activateAttributeListener",value:function activateAttributeListener(t,e,n){var _this81=this;var i=function i(){return yl(t,e,n);};return this.emitter.listenTo(this.observable,"change:"+this.attribute,i),function(){_this81.emitter.stopListening(_this81.observable,"change:"+_this81.attribute,i);};}}]);return wl;}();var kl=/*#__PURE__*/function(_wl){_inherits(kl,_wl);function kl(){_classCallCheck(this,kl);return _possibleConstructorReturn(this,_getPrototypeOf(kl).apply(this,arguments));}_createClass(kl,[{key:"activateDomEventListener",value:function activateDomEventListener(t,e,n){var _this82=this;var i=function i(t,n){e&&!n.target.matches(e)||("function"==typeof _this82.eventNameOrFunction?_this82.eventNameOrFunction(n):_this82.observable.fire(_this82.eventNameOrFunction,n));};return this.emitter.listenTo(n.node,t,i),function(){_this82.emitter.stopListening(n.node,t,i);};}}]);return kl;}(wl);var _l=/*#__PURE__*/function(_wl2){_inherits(_l,_wl2);function _l(){_classCallCheck(this,_l);return _possibleConstructorReturn(this,_getPrototypeOf(_l).apply(this,arguments));}_createClass(_l,[{key:"getValue",value:function getValue(t){return!El(_get(_getPrototypeOf(_l.prototype),"getValue",this).call(this,t))&&(this.valueIfTrue||!0);}}]);return _l;}(wl);function vl(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(vl):t instanceof wl);}function yl(t,e,_ref23){var n=_ref23.node;var i=function(t,e){return t.map(function(t){return t instanceof wl?t.getValue(e):t;});}(t,n);El(i=1==t.length&&t[0]instanceof _l?i[0]:i.reduce(Sl,""))?e.remove():e.set(i);}function xl(t,e,n){return{set:function set(i){t.setAttributeNS(n,e,i);},remove:function remove(){t.removeAttributeNS(n,e);}};}function Al(t,e){return{set:function set(n){t.style[e]=n;},remove:function remove(){t.style[e]=null;}};}function Tl(t){return qn(t,function(t){if(t&&(t instanceof wl||Nl(t)||Il(t)||Ol(t)))return t;});}function Cl(t){if("string"==typeof t?t=function(t){return{text:[t]};}(t):t.text&&function(t){Array.isArray(t.text)||(t.text=[t.text]);}(t),t.on&&(t.eventListeners=function(t){for(var _e185 in t){Pl(t,_e185);}return t;}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(var _e187 in t){t[_e187].value&&(t[_e187].value=[].concat(t[_e187].value)),Pl(t,_e187);}}(t.attributes);var _e186=[];if(t.children)if(Ol(t.children))_e186.push(t.children);else{var _iteratorNormalCompletion243=true;var _didIteratorError243=false;var _iteratorError243=undefined;try{for(var _iterator243=t.children[Symbol.iterator](),_step243;!(_iteratorNormalCompletion243=(_step243=_iterator243.next()).done);_iteratorNormalCompletion243=true){var _n166=_step243.value;Nl(_n166)||Il(_n166)||Zo(_n166)?_e186.push(_n166):_e186.push(new bl(_n166));}}catch(err){_didIteratorError243=true;_iteratorError243=err;}finally{try{if(!_iteratorNormalCompletion243&&_iterator243["return"]!=null){_iterator243["return"]();}}finally{if(_didIteratorError243){throw _iteratorError243;}}}}t.children=_e186;}return t;}function Pl(t,e){Array.isArray(t[e])||(t[e]=[t[e]]);}function Sl(t,e){return El(e)?t:El(t)?e:"".concat(t," ").concat(e);}function Ml(t,e){for(var _n167 in e){var _t$_n;t[_n167]?(_t$_n=t[_n167]).push.apply(_t$_n,_toConsumableArray(e[_n167])):t[_n167]=e[_n167];}}function El(t){return!t&&0!==t;}function Il(t){return t instanceof Dl;}function Nl(t){return t instanceof bl;}function Ol(t){return t instanceof gl;}function Rl(t){return"class"==t||"style"==t;}n(16);var Dl=/*#__PURE__*/function(){function Dl(t){_classCallCheck(this,Dl);this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new oo(),this._unboundChildren=this.createCollection(),this._viewCollections.on("add",function(e,n){n.locale=t;}),this.decorate("render");}_createClass(Dl,[{key:"createCollection",value:function createCollection(){var t=new gl();return this._viewCollections.add(t),t;}},{key:"registerChild",value:function registerChild(t){pi(t)||(t=[t]);var _iteratorNormalCompletion244=true;var _didIteratorError244=false;var _iteratorError244=undefined;try{for(var _iterator244=t[Symbol.iterator](),_step244;!(_iteratorNormalCompletion244=(_step244=_iterator244.next()).done);_iteratorNormalCompletion244=true){var _e188=_step244.value;this._unboundChildren.add(_e188);}}catch(err){_didIteratorError244=true;_iteratorError244=err;}finally{try{if(!_iteratorNormalCompletion244&&_iterator244["return"]!=null){_iterator244["return"]();}}finally{if(_didIteratorError244){throw _iteratorError244;}}}}},{key:"deregisterChild",value:function deregisterChild(t){pi(t)||(t=[t]);var _iteratorNormalCompletion245=true;var _didIteratorError245=false;var _iteratorError245=undefined;try{for(var _iterator245=t[Symbol.iterator](),_step245;!(_iteratorNormalCompletion245=(_step245=_iterator245.next()).done);_iteratorNormalCompletion245=true){var _e189=_step245.value;this._unboundChildren.remove(_e189);}}catch(err){_didIteratorError245=true;_iteratorError245=err;}finally{try{if(!_iteratorNormalCompletion245&&_iterator245["return"]!=null){_iterator245["return"]();}}finally{if(_didIteratorError245){throw _iteratorError245;}}}}},{key:"setTemplate",value:function setTemplate(t){this.template=new bl(t);}},{key:"extendTemplate",value:function extendTemplate(t){bl.extend(this.template,t);}},{key:"render",value:function render(){if(this.isRendered)throw new Gn.b("ui-view-render-already-rendered: This View has already been rendered.",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0;}},{key:"destroy",value:function destroy(){this.stopListening(),this._viewCollections.map(function(t){return t.destroy();}),this.template&&this.template._revertData&&this.template.revert(this.element);}},{key:"bindTemplate",get:function get(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=bl.bind(this,this);}}]);return Dl;}();ci(Dl,lr),ci(Dl,Fi);n(18);var Ll=/*#__PURE__*/function(_Dl){_inherits(Ll,_Dl);function Ll(t){var _this83;_classCallCheck(this,Ll);_this83=_possibleConstructorReturn(this,_getPrototypeOf(Ll).call(this,t)),_this83.body=_this83.createCollection();return _this83;}_createClass(Ll,[{key:"render",value:function render(){_get(_getPrototypeOf(Ll.prototype),"render",this).call(this),this._renderBodyCollection();}},{key:"destroy",value:function destroy(){return this._bodyCollectionContainer.remove(),_get(_getPrototypeOf(Ll.prototype),"destroy",this).call(this);}},{key:"_renderBodyCollection",value:function _renderBodyCollection(){var t=this.locale,e=this._bodyCollectionContainer=new bl({tag:"div",attributes:{"class":["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:t.uiLanguageDirection},children:this.body}).render();document.body.appendChild(e);}}]);return Ll;}(Dl);n(20);var jl=/*#__PURE__*/function(_Dl2){_inherits(jl,_Dl2);function jl(t){var _this84;_classCallCheck(this,jl);_this84=_possibleConstructorReturn(this,_getPrototypeOf(jl).call(this,t)),_this84.set("text"),_this84.set("for");var e=_this84.bindTemplate;_this84.setTemplate({tag:"label",attributes:{"class":["ck","ck-label"],"for":e.to("for")},children:[{text:e.to("text")}]});return _this84;}return jl;}(Dl);var Vl=/*#__PURE__*/function(_Ll){_inherits(Vl,_Ll);function Vl(t){var _this85;_classCallCheck(this,Vl);_this85=_possibleConstructorReturn(this,_getPrototypeOf(Vl).call(this,t));var e=Jn();_this85.top=_this85.createCollection(),_this85.main=_this85.createCollection(),_this85._voiceLabelView=_this85._createVoiceLabel(e),_this85.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":"ck-editor__aria-label_".concat(e)},children:[_this85._voiceLabelView,{tag:"div",attributes:{"class":["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:_this85.top},{tag:"div",attributes:{"class":["ck","ck-editor__main"],role:"presentation"},children:_this85.main}]});return _this85;}_createClass(Vl,[{key:"_createVoiceLabel",value:function _createVoiceLabel(t){var e=this.t,n=new jl();return n.text=e("bn"),n.extendTemplate({attributes:{id:"ck-editor__aria-label_".concat(t),"class":"ck-voice-label"}}),n;}}]);return Vl;}(Ll);var zl=/*#__PURE__*/function(_Dl3){_inherits(zl,_Dl3);function zl(t,e,n){var _this86;_classCallCheck(this,zl);_this86=_possibleConstructorReturn(this,_getPrototypeOf(zl).call(this,t)),_this86.setTemplate({tag:"div",attributes:{"class":["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),_this86.name=null,_this86.set("isFocused",!1),_this86._editableElement=n,_this86._hasExternalElement=!!_this86._editableElement,_this86._editingView=e;return _this86;}_createClass(zl,[{key:"render",value:function render(){var _this87=this;_get(_getPrototypeOf(zl.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",function(){return _this87._updateIsFocusedClasses();}),this._updateIsFocusedClasses();}},{key:"destroy",value:function destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),_get(_getPrototypeOf(zl.prototype),"destroy",this).call(this);}},{key:"_updateIsFocusedClasses",value:function _updateIsFocusedClasses(){var t=this._editingView;function e(e){t.change(function(n){var i=t.document.getRoot(e.name);n.addClass(e.isFocused?"ck-focused":"ck-blurred",i),n.removeClass(e.isFocused?"ck-blurred":"ck-focused",i);});}t.isRenderingInProgress?function n(i){t.once("change:isRenderingInProgress",function(t,o,r){r?n(i):e(i);});}(this):e(this);}}]);return zl;}(Dl);var Bl=/*#__PURE__*/function(_zl){_inherits(Bl,_zl);function Bl(t,e,n){var _this88;_classCallCheck(this,Bl);_this88=_possibleConstructorReturn(this,_getPrototypeOf(Bl).call(this,t,e,n)),_this88.extendTemplate({attributes:{role:"textbox","class":"ck-editor__editable_inline"}});return _this88;}_createClass(Bl,[{key:"render",value:function render(){var _this89=this;_get(_getPrototypeOf(Bl.prototype),"render",this).call(this);var t=this._editingView,e=this.t;t.change(function(n){var i=t.document.getRoot(_this89.name);n.setAttribute("aria-label",e("bm",[_this89.name]),i);});}}]);return Bl;}(zl);function Fl(t){return function(e){return e+t;};}n(22);var Ul=Fl("px");var Hl=/*#__PURE__*/function(_Dl4){_inherits(Hl,_Dl4);function Hl(t){var _this90;_classCallCheck(this,Hl);_this90=_possibleConstructorReturn(this,_getPrototypeOf(Hl).call(this,t));var e=_this90.bindTemplate;_this90.set("isActive",!1),_this90.set("isSticky",!1),_this90.set("limiterElement",null),_this90.set("limiterBottomOffset",50),_this90.set("viewportTopOffset",0),_this90.set("_marginLeft",null),_this90.set("_isStickyToTheLimiter",!1),_this90.set("_hasViewportTopOffset",!1),_this90.content=_this90.createCollection(),_this90._contentPanelPlaceholder=new bl({tag:"div",attributes:{"class":["ck","ck-sticky-panel__placeholder"],style:{display:e.to("isSticky",function(t){return t?"block":"none";}),height:e.to("isSticky",function(t){return t?Ul(_this90._panelRect.height):null;})}}}).render(),_this90._contentPanel=new bl({tag:"div",attributes:{"class":["ck","ck-sticky-panel__content",e["if"]("isSticky","ck-sticky-panel__content_sticky"),e["if"]("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:e.to("isSticky",function(t){return t?Ul(_this90._contentPanelPlaceholder.getBoundingClientRect().width):null;}),top:e.to("_hasViewportTopOffset",function(t){return t?Ul(_this90.viewportTopOffset):null;}),bottom:e.to("_isStickyToTheLimiter",function(t){return t?Ul(_this90.limiterBottomOffset):null;}),marginLeft:e.to("_marginLeft")}},children:_this90.content}).render(),_this90.setTemplate({tag:"div",attributes:{"class":["ck","ck-sticky-panel"]},children:[_this90._contentPanelPlaceholder,_this90._contentPanel]});return _this90;}_createClass(Hl,[{key:"render",value:function render(){var _this91=this;_get(_getPrototypeOf(Hl.prototype),"render",this).call(this),this._checkIfShouldBeSticky(),this.listenTo(nr.window,"scroll",function(){_this91._checkIfShouldBeSticky();}),this.listenTo(this,"change:isActive",function(){_this91._checkIfShouldBeSticky();});}},{key:"_checkIfShouldBeSticky",value:function _checkIfShouldBeSticky(){var t=this._panelRect=this._contentPanel.getBoundingClientRect();var e;this.limiterElement?(e=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&e.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<e.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=e.bottom<t.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Ul(-nr.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null);}}]);return Hl;}(Dl);var ql=/*#__PURE__*/function(){function ql(t){var _this92=this;_classCallCheck(this,ql);if(Object.assign(this,t),t.actions&&t.keystrokeHandler){var _loop5=function _loop5(_e190){var n=t.actions[_e190];"string"==typeof n&&(n=[n]);var _iteratorNormalCompletion246=true;var _didIteratorError246=false;var _iteratorError246=undefined;try{for(var _iterator246=n[Symbol.iterator](),_step246;!(_iteratorNormalCompletion246=(_step246=_iterator246.next()).done);_iteratorNormalCompletion246=true){var _i129=_step246.value;t.keystrokeHandler.set(_i129,function(t,n){_this92[_e190](),n();});}}catch(err){_didIteratorError246=true;_iteratorError246=err;}finally{try{if(!_iteratorNormalCompletion246&&_iterator246["return"]!=null){_iterator246["return"]();}}finally{if(_didIteratorError246){throw _iteratorError246;}}}};for(var _e190 in t.actions){_loop5(_e190);}}}_createClass(ql,[{key:"focusFirst",value:function focusFirst(){this._focus(this.first);}},{key:"focusLast",value:function focusLast(){this._focus(this.last);}},{key:"focusNext",value:function focusNext(){this._focus(this.next);}},{key:"focusPrevious",value:function focusPrevious(){this._focus(this.previous);}},{key:"_focus",value:function _focus(t){t&&t.focus();}},{key:"_getFocusableItem",value:function _getFocusableItem(t){var e=this.current,n=this.focusables.length;if(!n)return null;if(null===e)return this[1===t?"first":"last"];var i=(e+n+t)%n;do{var _e191=this.focusables.get(i);if(Wl(_e191))return _e191;i=(i+n+t)%n;}while(i!==e);return null;}},{key:"first",get:function get(){return this.focusables.find(Wl)||null;}},{key:"last",get:function get(){return this.focusables.filter(Wl).slice(-1)[0]||null;}},{key:"next",get:function get(){return this._getFocusableItem(1);}},{key:"previous",get:function get(){return this._getFocusableItem(-1);}},{key:"current",get:function get(){var _this93=this;var t=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(function(e,n){var i=e.element===_this93.focusTracker.focusedElement;return i&&(t=n),i;}),t);}}]);return ql;}();function Wl(t){return!(!t.focus||"none"==nr.window.getComputedStyle(t.element).display);}var Yl=/*#__PURE__*/function(_Dl5){_inherits(Yl,_Dl5);function Yl(t){var _this94;_classCallCheck(this,Yl);_this94=_possibleConstructorReturn(this,_getPrototypeOf(Yl).call(this,t)),_this94.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__separator"]}});return _this94;}return Yl;}(Dl);n(24);var $l=/*#__PURE__*/function(_Dl6){_inherits($l,_Dl6);function $l(t){var _this95;_classCallCheck(this,$l);_this95=_possibleConstructorReturn(this,_getPrototypeOf($l).call(this,t));var e=_this95.bindTemplate,n=_this95.t;_this95.set("ariaLabel",n("bl")),_this95.items=_this95.createCollection(),_this95.focusTracker=new sl(),_this95.keystrokes=new Jc(),_this95.set("isVertical",!1),_this95.set("class"),_this95._focusCycler=new ql({focusables:_this95.items,focusTracker:_this95.focusTracker,keystrokeHandler:_this95.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}}),_this95.setTemplate({tag:"div",attributes:{"class":["ck","ck-toolbar",e["if"]("isVertical","ck-toolbar_vertical"),e.to("class")],role:"toolbar","aria-label":e.to("ariaLabel")},children:_this95.items,on:{mousedown:function(t){return t.bindTemplate.to(function(e){e.target===t.element&&e.preventDefault();});}(_assertThisInitialized(_this95))}});return _this95;}_createClass($l,[{key:"render",value:function render(){var _this96=this;_get(_getPrototypeOf($l.prototype),"render",this).call(this);var _iteratorNormalCompletion247=true;var _didIteratorError247=false;var _iteratorError247=undefined;try{for(var _iterator247=this.items[Symbol.iterator](),_step247;!(_iteratorNormalCompletion247=(_step247=_iterator247.next()).done);_iteratorNormalCompletion247=true){var _t203=_step247.value;this.focusTracker.add(_t203.element);}}catch(err){_didIteratorError247=true;_iteratorError247=err;}finally{try{if(!_iteratorNormalCompletion247&&_iterator247["return"]!=null){_iterator247["return"]();}}finally{if(_didIteratorError247){throw _iteratorError247;}}}this.items.on("add",function(t,e){_this96.focusTracker.add(e.element);}),this.items.on("remove",function(t,e){_this96.focusTracker.remove(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"fillFromConfig",value:function fillFromConfig(t,e){var _this97=this;t.map(function(t){"|"==t?_this97.items.add(new Yl()):e.has(t)?_this97.items.add(e.create(t)):console.warn(Object(Gn.a)("toolbarview-item-unavailable: The requested toolbar item is unavailable."),{name:t});});}}]);return $l;}(Dl);n(26);var Gl=/*#__PURE__*/function(_Vl){_inherits(Gl,_Vl);function Gl(t,e){var _this98;_classCallCheck(this,Gl);_this98=_possibleConstructorReturn(this,_getPrototypeOf(Gl).call(this,t)),_this98.stickyPanel=new Hl(t),_this98.toolbar=new $l(t),_this98.editable=new Bl(t,e);return _this98;}_createClass(Gl,[{key:"render",value:function render(){_get(_getPrototypeOf(Gl.prototype),"render",this).call(this),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable);}}]);return Gl;}(Vl);var Ql=/*#__PURE__*/function(_Xc){_inherits(Ql,_Xc);function Ql(t,e){var _this99;_classCallCheck(this,Ql);_this99=_possibleConstructorReturn(this,_getPrototypeOf(Ql).call(this,e)),Wn(t)&&(_this99.sourceElement=t),_this99.data.processor=new il(),_this99.model.document.createRoot(),_this99.ui=new ml(_assertThisInitialized(_this99),new Gl(_this99.locale,_this99.editing.view)),function(t){if(!W(t.updateSourceElement))throw new Gn.b("attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.",t);var e=t.sourceElement;if(e&&"textarea"===e.tagName.toLowerCase()&&e.form){var _n168;var _i130=e.form,_o59=function _o59(){return t.updateSourceElement();};W(_i130.submit)&&(_n168=_i130.submit,_i130.submit=function(){_o59(),_n168.apply(_i130);}),_i130.addEventListener("submit",_o59),t.on("destroy",function(){_i130.removeEventListener("submit",_o59),_n168&&(_i130.submit=_n168);});}}(_assertThisInitialized(_this99));return _this99;}_createClass(Ql,[{key:"destroy",value:function destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),_get(_getPrototypeOf(Ql.prototype),"destroy",this).call(this);}}],[{key:"create",value:function create(t){var _this100=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise(function(n){var i=new _this100(t,e);n(i.initPlugins().then(function(){return i.ui.init(Wn(t)?t:null);}).then(function(){if(!Wn(t)&&e.initialData)throw new Gn.b("editor-create-initial-data: The config.initialData option cannot be used together with initial data passed in Editor.create().",null);var n=e.initialData||function(t){return Wn(t)?function(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML;}(t):t;}(t);return i.data.init(n);}).then(function(){return i.fire("ready");}).then(function(){return i;}));});}}]);return Ql;}(Xc);ci(Ql,tl),ci(Ql,el);var Kl=/*#__PURE__*/function(){function Kl(t){_classCallCheck(this,Kl);this.editor=t;}_createClass(Kl,[{key:"destroy",value:function destroy(){this.stopListening();}}]);return Kl;}();ci(Kl,Fi);var Jl=/*#__PURE__*/function(){function Jl(t){_classCallCheck(this,Jl);this.files=function(t){var e=t.files?Array.from(t.files):[],n=t.items?Array.from(t.items):[];if(e.length)return e;return n.filter(function(t){return"file"===t.kind;}).map(function(t){return t.getAsFile();});}(t),this._native=t;}_createClass(Jl,[{key:"getData",value:function getData(t){return this._native.getData(t);}},{key:"setData",value:function setData(t,e){this._native.setData(t,e);}},{key:"types",get:function get(){return this._native.types;}}]);return Jl;}();var Zl=/*#__PURE__*/function(_ts5){_inherits(Zl,_ts5);function Zl(t){var _this101;_classCallCheck(this,Zl);_this101=_possibleConstructorReturn(this,_getPrototypeOf(Zl).call(this,t));var e=_this101.document;function n(t,n){n.preventDefault();var i=n.dropRange?[n.dropRange]:Array.from(e.selection.getRanges()),o=new Kn(e,"clipboardInput");e.fire(o,{dataTransfer:n.dataTransfer,targetRanges:i}),o.stop.called&&n.stopPropagation();}_this101.domEventType=["paste","copy","cut","drop","dragover"],_this101.listenTo(e,"paste",n,{priority:"low"}),_this101.listenTo(e,"drop",n,{priority:"low"});return _this101;}_createClass(Zl,[{key:"onDomEvent",value:function onDomEvent(t){var e={dataTransfer:new Jl(t.clipboardData?t.clipboardData:t.dataTransfer)};"drop"==t.type&&(e.dropRange=function(t,e){var n=e.target.ownerDocument,i=e.clientX,o=e.clientY;var r;n.caretRangeFromPoint&&n.caretRangeFromPoint(i,o)?r=n.caretRangeFromPoint(i,o):e.rangeParent&&((r=n.createRange()).setStart(e.rangeParent,e.rangeOffset),r.collapse(!0));return r?t.domConverter.domRangeToView(r):t.document.selection.getFirstRange();}(this.view,t)),this.fire(t.type,t,e);}}]);return Zl;}(ts);var Xl=["figcaption","li"];var td=/*#__PURE__*/function(_Kl){_inherits(td,_Kl);function td(){_classCallCheck(this,td);return _possibleConstructorReturn(this,_getPrototypeOf(td).apply(this,arguments));}_createClass(td,[{key:"init",value:function init(){var _this102=this;var t=this.editor,e=t.model.document,n=t.editing.view,i=n.document;function o(n,o){var r=o.dataTransfer;o.preventDefault();var s=t.data.toView(t.model.getSelectedContent(e.selection));i.fire("clipboardOutput",{dataTransfer:r,content:s,method:n.name});}this._htmlDataProcessor=new il(),n.addObserver(Zl),this.listenTo(i,"clipboardInput",function(e){t.isReadOnly&&e.stop();},{priority:"highest"}),this.listenTo(i,"clipboardInput",function(t,e){var i=e.dataTransfer;var o="";i.getData("text/html")?o=function(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(t,e){return 1==e.length?" ":e;});}(i.getData("text/html")):i.getData("text/plain")&&(o=function(t){return(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).indexOf("</p><p>")>-1&&(t="<p>".concat(t,"</p>")),t;}(i.getData("text/plain"))),o=_this102._htmlDataProcessor.toView(o),_this102.fire("inputTransformation",{content:o,dataTransfer:i}),n.scrollToTheSelection();},{priority:"low"}),this.listenTo(this,"inputTransformation",function(t,e){if(!e.content.isEmpty){var _t204=_this102.editor.data,_n169=_this102.editor.model,_i131=_t204.toModel(e.content,"$clipboardHolder");if(0==_i131.childCount)return;_n169.insertContent(_i131);}},{priority:"low"}),this.listenTo(i,"copy",o,{priority:"low"}),this.listenTo(i,"cut",function(e,n){t.isReadOnly?n.preventDefault():o(e,n);},{priority:"low"}),this.listenTo(i,"clipboardOutput",function(n,i){i.content.isEmpty||(i.dataTransfer.setData("text/html",_this102._htmlDataProcessor.toData(i.content)),i.dataTransfer.setData("text/plain",function t(e){var n="";if(e.is("text")||e.is("textProxy"))n=e.data;else if(e.is("img")&&e.hasAttribute("alt"))n=e.getAttribute("alt");else{var _i132=null;var _iteratorNormalCompletion248=true;var _didIteratorError248=false;var _iteratorError248=undefined;try{for(var _iterator248=e.getChildren()[Symbol.iterator](),_step248;!(_iteratorNormalCompletion248=(_step248=_iterator248.next()).done);_iteratorNormalCompletion248=true){var _o60=_step248.value;var _e192=t(_o60);_i132&&(_i132.is("containerElement")||_o60.is("containerElement"))&&(Xl.includes(_i132.name)||Xl.includes(_o60.name)?n+="\n":n+="\n\n"),n+=_e192,_i132=_o60;}}catch(err){_didIteratorError248=true;_iteratorError248=err;}finally{try{if(!_iteratorNormalCompletion248&&_iterator248["return"]!=null){_iterator248["return"]();}}finally{if(_didIteratorError248){throw _iteratorError248;}}}}return n;}(i.content))),"cut"==i.method&&t.model.deleteContent(e.selection);},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Clipboard";}}]);return td;}(Kl);var ed=/*#__PURE__*/function(){function ed(t){var _this103=this;_classCallCheck(this,ed);this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set(),this.decorate("execute"),this.listenTo(this.editor.model.document,"change",function(){_this103.refresh();}),this.on("execute",function(t){_this103.isEnabled||t.stop();},{priority:"high"}),this.listenTo(t,"change:isReadOnly",function(t,e,n){n?_this103.forceDisabled("readOnlyMode"):_this103.clearForceDisabled("readOnlyMode");});}_createClass(ed,[{key:"refresh",value:function refresh(){this.isEnabled=!0;}},{key:"forceDisabled",value:function forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",nd,{priority:"highest"}),this.isEnabled=!1);}},{key:"clearForceDisabled",value:function clearForceDisabled(t){this._disableStack["delete"](t),0==this._disableStack.size&&(this.off("set:isEnabled",nd),this.refresh());}},{key:"execute",value:function execute(){}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return ed;}();function nd(t){t["return"]=!1,t.stop();}function id(t,e){var _iteratorNormalCompletion249,_didIteratorError249,_iteratorError249,_iterator249,_step249,_n170;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function id$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_iteratorNormalCompletion249=true;_didIteratorError249=false;_iteratorError249=undefined;_context37.prev=3;_iterator249=e[Symbol.iterator]();case 5:if(_iteratorNormalCompletion249=(_step249=_iterator249.next()).done){_context37.next=14;break;}_n170=_step249.value;_context37.t0=_n170&&t.getAttributeProperties(_n170[0]).copyOnEnter;if(!_context37.t0){_context37.next=11;break;}_context37.next=11;return _n170;case 11:_iteratorNormalCompletion249=true;_context37.next=5;break;case 14:_context37.next=20;break;case 16:_context37.prev=16;_context37.t1=_context37["catch"](3);_didIteratorError249=true;_iteratorError249=_context37.t1;case 20:_context37.prev=20;_context37.prev=21;if(!_iteratorNormalCompletion249&&_iterator249["return"]!=null){_iterator249["return"]();}case 23:_context37.prev=23;if(!_didIteratorError249){_context37.next=26;break;}throw _iteratorError249;case 26:return _context37.finish(23);case 27:return _context37.finish(20);case 28:case"end":return _context37.stop();}}},_marked3,null,[[3,16,20,28],[21,,23,27]]);}ci(ed,Fi);var od=/*#__PURE__*/function(_ed){_inherits(od,_ed);function od(){_classCallCheck(this,od);return _possibleConstructorReturn(this,_getPrototypeOf(od).apply(this,arguments));}_createClass(od,[{key:"execute",value:function execute(){var _this104=this;var t=this.editor.model,e=t.document;t.change(function(n){!function(t,e,n,i){var o=n.isCollapsed,r=n.getFirstRange(),s=r.start.parent,a=r.end.parent;if(i.isLimit(s)||i.isLimit(a))return void(o||s!=a||t.deleteContent(n));if(o){var _t205=id(e.model.schema,n.getAttributes());rd(e,r.start),e.setSelectionAttribute(_t205);}else{var _i133=!(r.start.isAtStart&&r.end.isAtEnd),_o61=s==a;t.deleteContent(n,{leaveUnmerged:_i133}),_i133&&(_o61?rd(e,n.focus):e.setSelection(a,0));}}(_this104.editor.model,n,e.selection,t.schema),_this104.fire("afterExecute",{writer:n});});}}]);return od;}(ed);function rd(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0);}var sd=/*#__PURE__*/function(_ur5){_inherits(sd,_ur5);function sd(t){var _this105;_classCallCheck(this,sd);_this105=_possibleConstructorReturn(this,_getPrototypeOf(sd).call(this,t));var e=_this105.document;e.on("keydown",function(t,n){if(_this105.isEnabled&&n.keyCode==bo.enter){var _i134;e.once("enter",function(t){return _i134=t;},{priority:"highest"}),e.fire("enter",new Xr(e,n.domEvent,{isSoft:n.shiftKey})),_i134&&_i134.stop.called&&t.stop();}});return _this105;}_createClass(sd,[{key:"observe",value:function observe(){}}]);return sd;}(ur);var ad=/*#__PURE__*/function(_Kl2){_inherits(ad,_Kl2);function ad(){_classCallCheck(this,ad);return _possibleConstructorReturn(this,_getPrototypeOf(ad).apply(this,arguments));}_createClass(ad,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view,n=e.document;e.addObserver(sd),t.commands.add("enter",new od(t)),this.listenTo(n,"enter",function(n,i){i.preventDefault(),i.isSoft||(t.execute("enter"),e.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Enter";}}]);return ad;}(Kl);var cd=/*#__PURE__*/function(_ed2){_inherits(cd,_ed2);function cd(){_classCallCheck(this,cd);return _possibleConstructorReturn(this,_getPrototypeOf(cd).apply(this,arguments));}_createClass(cd,[{key:"execute",value:function execute(){var _this106=this;var t=this.editor.model,e=t.document;t.change(function(n){!function(t,e,n){var i=n.isCollapsed,o=n.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(i){var _i135=id(t.schema,n.getAttributes());ld(e,o.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(_i135);}else{var _i136=!(o.start.isAtStart&&o.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:_i136}),a?ld(e,n.focus):_i136&&e.setSelection(s,0);}}(t,n,e.selection),_this106.fire("afterExecute",{writer:n});});}},{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;var n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;var i=e.getFirstRange(),o=i.start.parent,r=i.end.parent;if((dd(o,t)||dd(r,t))&&o!==r)return!1;return!0;}(t.schema,e.selection);}}]);return cd;}(ed);function ld(t,e){var n=t.createElement("softBreak");t.insert(n,e),t.setSelection(n,"after");}function dd(t,e){return!t.is("rootElement")&&(e.isLimit(t)||dd(t.parent,e));}var hd=/*#__PURE__*/function(_Kl3){_inherits(hd,_Kl3);function hd(){_classCallCheck(this,hd);return _possibleConstructorReturn(this,_getPrototypeOf(hd).apply(this,arguments));}_createClass(hd,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,n=t.conversion,i=t.editing.view,o=i.document;e.register("softBreak",{allowWhere:"$text",isInline:!0}),n["for"]("upcast").elementToElement({model:"softBreak",view:"br"}),n["for"]("downcast").elementToElement({model:"softBreak",view:function view(t,e){return e.createEmptyElement("br");}}),i.addObserver(sd),t.commands.add("shiftEnter",new cd(t)),this.listenTo(o,"enter",function(e,n){n.preventDefault(),n.isSoft&&(t.execute("shiftEnter"),i.scrollToTheSelection());},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ShiftEnter";}}]);return hd;}(Kl);var ud=/*#__PURE__*/function(){function ud(t){var _this107=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;_classCallCheck(this,ud);this.model=t,this.size=0,this.limit=e,this.isLocked=!1,this._changeCallback=function(t,e){"transparent"!=e.type&&e!==_this107._batch&&_this107._reset(!0);},this._selectionChangeCallback=function(){_this107._reset();},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback);}_createClass(ud,[{key:"input",value:function input(t){this.size+=t,this.size>=this.limit&&this._reset(!0);}},{key:"lock",value:function lock(){this.isLocked=!0;}},{key:"unlock",value:function unlock(){this.isLocked=!1;}},{key:"destroy",value:function destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback);}},{key:"_reset",value:function _reset(t){this.isLocked&&!t||(this._batch=null,this.size=0);}},{key:"batch",get:function get(){return this._batch||(this._batch=this.model.createBatch()),this._batch;}}]);return ud;}();var fd=/*#__PURE__*/function(_ed3){_inherits(fd,_ed3);function fd(t,e){var _this108;_classCallCheck(this,fd);_this108=_possibleConstructorReturn(this,_getPrototypeOf(fd).call(this,t)),_this108._buffer=new ud(t.model,e),_this108._batches=new WeakSet();return _this108;}_createClass(fd,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(fd.prototype),"destroy",this).call(this),this._buffer.destroy();}},{key:"execute",value:function execute(){var _this109=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.document,i=t.text||"",o=i.length,r=t.range||n.selection.getFirstRange(),s=t.resultRange;e.enqueueChange(this._buffer.batch,function(t){var a=r.isCollapsed;_this109._buffer.lock(),e.deleteContent(e.createSelection(r)),i&&e.insertContent(t.createText(i,n.selection.getAttributes()),r.start),s?t.setSelection(s):a&&t.setSelection(r.start.getShiftedBy(o)),_this109._buffer.unlock(),_this109._buffer.input(o),_this109._batches.add(_this109._buffer.batch);});}},{key:"buffer",get:function get(){return this._buffer;}}]);return fd;}(ed);function md(t){var e=null;var n=t.model,i=t.editing.view,o=t.commands.get("input");function r(t){var r=n.document,a=i.document.isComposing,c=e&&e.isEqual(r.selection);e=null,o.isEnabled&&(function(t){if(t.ctrlKey)return!0;return gd.includes(t.keyCode);}(t)||r.selection.isCollapsed||a&&229===t.keyCode||!a&&229===t.keyCode&&c||s());}function s(){var t=o.buffer;t.lock(),n.enqueueChange(t.batch,function(){n.deleteContent(n.document.selection);}),t.unlock();}mo.isAndroid?i.document.on("beforeinput",function(t,e){return r(e);},{priority:"lowest"}):i.document.on("keydown",function(t,e){return r(e);},{priority:"lowest"}),i.document.on("compositionstart",function(){var t=n.document,e=1!==t.selection.rangeCount||t.selection.getFirstRange().isFlat;if(t.selection.isCollapsed||e)return;s();},{priority:"lowest"}),i.document.on("compositionend",function(){e=n.createSelection(n.document.selection);},{priority:"lowest"});}var gd=[wo("arrowUp"),wo("arrowRight"),wo("arrowDown"),wo("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(var _t206=112;_t206<=135;_t206++){gd.push(_t206);}function pd(t){if(t.newChildren.length-t.oldChildren.length!=1)return;var e=function(t,e){var n=[];var i,o=0;return t.forEach(function(t){"equal"==t?(r(),o++):"insert"==t?(s("insert")?i.values.push(e[o]):(r(),i={type:"insert",index:o,values:[e[o]]}),o++):s("delete")?i.howMany++:(r(),i={type:"delete",index:o,howMany:1});}),r(),n;function r(){i&&(n.push(i),i=null);}function s(t){return i&&i.type==t;}}(Qo(t.oldChildren,t.newChildren,bd),t.newChildren);if(e.length>1)return;var n=e[0];return n.values[0]&&n.values[0].is("text")?n:void 0;}function bd(t,e){return t&&t.is("text")&&e&&e.is("text")?t.data===e.data:t===e;}var wd=/*#__PURE__*/function(){function wd(t){_classCallCheck(this,wd);this.editor=t,this.editing=this.editor.editing;}_createClass(wd,[{key:"handle",value:function handle(t,e){if(function(t){if(0==t.length)return!1;var _iteratorNormalCompletion250=true;var _didIteratorError250=false;var _iteratorError250=undefined;try{for(var _iterator250=t[Symbol.iterator](),_step250;!(_iteratorNormalCompletion250=(_step250=_iterator250.next()).done);_iteratorNormalCompletion250=true){var _e193=_step250.value;if("children"===_e193.type&&!pd(_e193))return!0;}}catch(err){_didIteratorError250=true;_iteratorError250=err;}finally{try{if(!_iteratorNormalCompletion250&&_iterator250["return"]!=null){_iterator250["return"]();}}finally{if(_didIteratorError250){throw _iteratorError250;}}}return!1;}(t))this._handleContainerChildrenMutations(t,e);else{var _iteratorNormalCompletion251=true;var _didIteratorError251=false;var _iteratorError251=undefined;try{for(var _iterator251=t[Symbol.iterator](),_step251;!(_iteratorNormalCompletion251=(_step251=_iterator251.next()).done);_iteratorNormalCompletion251=true){var _n171=_step251.value;this._handleTextMutation(_n171,e),this._handleTextNodeInsertion(_n171);}}catch(err){_didIteratorError251=true;_iteratorError251=err;}finally{try{if(!_iteratorNormalCompletion251&&_iterator251["return"]!=null){_iterator251["return"]();}}finally{if(_didIteratorError251){throw _iteratorError251;}}}}}},{key:"_handleContainerChildrenMutations",value:function _handleContainerChildrenMutations(t,e){var n=function(t){var e=t.map(function(t){return t.node;}).reduce(function(t,e){return t.getCommonAncestor(e,{includeSelf:!0});});if(!e)return;return e.getAncestors({includeSelf:!0,parentFirst:!0}).find(function(t){return t.is("containerElement")||t.is("rootElement");});}(t);if(!n)return;var i=this.editor.editing.view.domConverter.mapViewToDom(n),o=new rr(),r=this.editor.data.toModel(o.domToView(i)).getChild(0),s=this.editor.editing.mapper.toModelElement(n);if(!s)return;var a=Array.from(r.getChildren()),c=Array.from(s.getChildren()),l=a[a.length-1],d=c[c.length-1];l&&l.is("softBreak")&&d&&!d.is("softBreak")&&a.pop();var h=this.editor.model.schema;if(!kd(a,h)||!kd(c,h))return;var u=a.map(function(t){return t.is("text")?t.data:"@";}).join("").replace(/\u00A0/g," "),f=c.map(function(t){return t.is("text")?t.data:"@";}).join("").replace(/\u00A0/g," ");if(f===u)return;var m=Qo(f,u),_d3=_d(m),g=_d3.firstChangeAt,p=_d3.insertions,b=_d3.deletions;var w=null;e&&(w=this.editing.mapper.toModelRange(e.getFirstRange()));var k=u.substr(g,p),_=this.editor.model.createRange(this.editor.model.createPositionAt(s,g),this.editor.model.createPositionAt(s,g+b));this.editor.execute("input",{text:k,range:_,resultRange:w});}},{key:"_handleTextMutation",value:function _handleTextMutation(t,e){if("text"!=t.type)return;var n=t.newText.replace(/\u00A0/g," "),i=t.oldText.replace(/\u00A0/g," ");if(i===n)return;var o=Qo(i,n),_d4=_d(o),r=_d4.firstChangeAt,s=_d4.insertions,a=_d4.deletions;var c=null;e&&(c=this.editing.mapper.toModelRange(e.getFirstRange()));var l=this.editing.view.createPositionAt(t.node,r),d=this.editing.mapper.toModelPosition(l),h=this.editor.model.createRange(d,d.getShiftedBy(a)),u=n.substr(r,s);this.editor.execute("input",{text:u,range:h,resultRange:c});}},{key:"_handleTextNodeInsertion",value:function _handleTextNodeInsertion(t){if("children"!=t.type)return;var e=pd(t),n=this.editing.view.createPositionAt(t.node,e.index),i=this.editing.mapper.toModelPosition(n),o=e.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(i)});}}]);return wd;}();function kd(t,e){return t.every(function(t){return e.isInline(t);});}function _d(t){var e=null,n=null;for(var _i137=0;_i137<t.length;_i137++){"equal"!=t[_i137]&&(e=null===e?_i137:e,n=_i137);}var i=0,o=0;for(var _r26=e;_r26<=n;_r26++){"insert"!=t[_r26]&&i++,"delete"!=t[_r26]&&o++;}return{insertions:o,deletions:i,firstChangeAt:e};}var vd=/*#__PURE__*/function(_Kl4){_inherits(vd,_Kl4);function vd(){_classCallCheck(this,vd);return _possibleConstructorReturn(this,_getPrototypeOf(vd).apply(this,arguments));}_createClass(vd,[{key:"init",value:function init(){var t=this.editor,e=new fd(t,t.config.get("typing.undoStep")||20);t.commands.add("input",e),md(t),function(t){t.editing.view.document.on("mutations",function(e,n,i){new wd(t).handle(n,i);});}(t);}},{key:"isInput",value:function isInput(t){return this.editor.commands.get("input")._batches.has(t);}}],[{key:"pluginName",get:function get(){return"Input";}}]);return vd;}(Kl);var yd=/*#__PURE__*/function(_ed4){_inherits(yd,_ed4);function yd(t,e){var _this110;_classCallCheck(this,yd);_this110=_possibleConstructorReturn(this,_getPrototypeOf(yd).call(this,t)),_this110.direction=e,_this110._buffer=new ud(t.model,t.config.get("typing.undoStep"));return _this110;}_createClass(yd,[{key:"execute",value:function execute(){var _this111=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.document;e.enqueueChange(this._buffer.batch,function(i){_this111._buffer.lock();var o=i.createSelection(t.selection||n.selection),r=o.isCollapsed;if(o.isCollapsed&&e.modifySelection(o,{direction:_this111.direction,unit:t.unit}),_this111._shouldEntireContentBeReplacedWithParagraph(t.sequence||1))return void _this111._replaceEntireContentWithParagraph(i);if(o.isCollapsed)return;var s=0;o.getFirstRange().getMinimalFlatRanges().forEach(function(t){s+=eo(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}));}),e.deleteContent(o,{doNotResetEntireContent:r}),_this111._buffer.input(s),i.setSelection(o),_this111._buffer.unlock();});}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function _shouldEntireContentBeReplacedWithParagraph(t){if(t>1)return!1;var e=this.editor.model,n=e.document.selection,i=e.schema.getLimitElement(n);if(!(n.isCollapsed&&n.containsEntireContent(i)))return!1;if(!e.schema.checkChild(i,"paragraph"))return!1;var o=i.getChild(0);return!o||"paragraph"!==o.name;}},{key:"_replaceEntireContentWithParagraph",value:function _replaceEntireContentWithParagraph(t){var e=this.editor.model,n=e.document.selection,i=e.schema.getLimitElement(n),o=t.createElement("paragraph");t.remove(t.createRangeIn(i)),t.insert(o,i),t.setSelection(o,0);}},{key:"buffer",get:function get(){return this._buffer;}}]);return yd;}(ed);var xd=/*#__PURE__*/function(_ur6){_inherits(xd,_ur6);function xd(t){var _this112;_classCallCheck(this,xd);_this112=_possibleConstructorReturn(this,_getPrototypeOf(xd).call(this,t));var e=t.document;var n=0;function i(t,n,i){var o;e.once("delete",function(t){return o=t;},{priority:Number.POSITIVE_INFINITY}),e.fire("delete",new Xr(e,n,i)),o&&o.stop.called&&t.stop();}e.on("keyup",function(t,e){e.keyCode!=bo["delete"]&&e.keyCode!=bo.backspace||(n=0);}),e.on("keydown",function(t,e){var o={};if(e.keyCode==bo["delete"])o.direction="forward",o.unit="character";else{if(e.keyCode!=bo.backspace)return;o.direction="backward",o.unit="codePoint";}var r=mo.isMac?e.altKey:e.ctrlKey;o.unit=r?"word":o.unit,o.sequence=++n,i(t,e.domEvent,o);}),mo.isAndroid&&e.on("beforeinput",function(e,n){if("deleteContentBackward"!=n.domEvent.inputType)return;var o={unit:"codepoint",direction:"backward",sequence:1},r=n.domTarget.ownerDocument.defaultView.getSelection();r.anchorNode==r.focusNode&&r.anchorOffset+1!=r.focusOffset&&(o.selectionToRemove=t.domConverter.domSelectionToView(r)),i(e,n.domEvent,o);});return _this112;}_createClass(xd,[{key:"observe",value:function observe(){}}]);return xd;}(ur);var Ad=/*#__PURE__*/function(_Kl5){_inherits(Ad,_Kl5);function Ad(){_classCallCheck(this,Ad);return _possibleConstructorReturn(this,_getPrototypeOf(Ad).apply(this,arguments));}_createClass(Ad,[{key:"init",value:function init(){var t=this.editor,e=t.editing.view,n=e.document;if(e.addObserver(xd),t.commands.add("forwardDelete",new yd(t,"forward")),t.commands.add("delete",new yd(t,"backward")),this.listenTo(n,"delete",function(n,i){var o={unit:i.unit,sequence:i.sequence};if(i.selectionToRemove){var _e194=t.model.createSelection(),_n172=[];var _iteratorNormalCompletion252=true;var _didIteratorError252=false;var _iteratorError252=undefined;try{for(var _iterator252=i.selectionToRemove.getRanges()[Symbol.iterator](),_step252;!(_iteratorNormalCompletion252=(_step252=_iterator252.next()).done);_iteratorNormalCompletion252=true){var _e195=_step252.value;_n172.push(t.editing.mapper.toModelRange(_e195));}}catch(err){_didIteratorError252=true;_iteratorError252=err;}finally{try{if(!_iteratorNormalCompletion252&&_iterator252["return"]!=null){_iterator252["return"]();}}finally{if(_didIteratorError252){throw _iteratorError252;}}}_e194.setTo(_n172),o.selection=_e194;}t.execute("forward"==i.direction?"forwardDelete":"delete",o),i.preventDefault(),e.scrollToTheSelection();}),mo.isAndroid){var _t207=null;this.listenTo(n,"delete",function(e,n){var i=n.domTarget.ownerDocument.defaultView.getSelection();_t207={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset};},{priority:"lowest"}),this.listenTo(n,"keyup",function(e,n){if(_t207){var _e196=n.domTarget.ownerDocument.defaultView.getSelection();_e196.collapse(_t207.anchorNode,_t207.anchorOffset),_e196.extend(_t207.focusNode,_t207.focusOffset),_t207=null;}});}}}],[{key:"pluginName",get:function get(){return"Delete";}}]);return Ad;}(Kl);var Td=/*#__PURE__*/function(_Kl6){_inherits(Td,_Kl6);function Td(){_classCallCheck(this,Td);return _possibleConstructorReturn(this,_getPrototypeOf(Td).apply(this,arguments));}_createClass(Td,null,[{key:"requires",get:function get(){return[vd,Ad];}},{key:"pluginName",get:function get(){return"Typing";}}]);return Td;}(Kl);var Cd=/*#__PURE__*/function(_Ja10){_inherits(Cd,_Ja10);function Cd(){_classCallCheck(this,Cd);return _possibleConstructorReturn(this,_getPrototypeOf(Cd).apply(this,arguments));}_createClass(Cd,[{key:"clone",value:function clone(){return new Cd(this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Cd(this.baseVersion+1);}},{key:"_execute",value:function _execute(){}},{key:"type",get:function get(){return"noop";}}],[{key:"className",get:function get(){return"NoOperation";}}]);return Cd;}(Ja);var Pd=new Map();function Sd(t,e,n){var i=Pd.get(t);i||(i=new Map(),Pd.set(t,i)),i.set(e,n);}function Md(t){return[t];}function Ed(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=function(t,e){var n=Pd.get(t);return n&&n.has(e)?n.get(e):Md;}(t.constructor,e.constructor);try{return i(t=t.clone(),e,n);}catch(t){throw t;}}function Id(t,e,n){t=t.slice(),e=e.slice();var i=new Nd(n.document,n.useRelations,n.forceWeakRemove);i.setOriginalOperations(t),i.setOriginalOperations(e);var o=i.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:o};var r=new WeakMap();var _iteratorNormalCompletion253=true;var _didIteratorError253=false;var _iteratorError253=undefined;try{for(var _iterator253=t[Symbol.iterator](),_step253;!(_iteratorNormalCompletion253=(_step253=_iterator253.next()).done);_iteratorNormalCompletion253=true){var _e198=_step253.value;r.set(_e198,0);}}catch(err){_didIteratorError253=true;_iteratorError253=err;}finally{try{if(!_iteratorNormalCompletion253&&_iterator253["return"]!=null){_iterator253["return"]();}}finally{if(_didIteratorError253){throw _iteratorError253;}}}var s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};var a=0;for(;a<t.length;){var _t208,_e197;var _n173=t[a],_o62=r.get(_n173);if(_o62==e.length){a++;continue;}var _s19=e[_o62],_c6=Ed(_n173,_s19,i.getContext(_n173,_s19,!0)),_l2=Ed(_s19,_n173,i.getContext(_s19,_n173,!1));i.updateRelation(_n173,_s19),i.setOriginalOperations(_c6,_n173),i.setOriginalOperations(_l2,_s19);var _iteratorNormalCompletion254=true;var _didIteratorError254=false;var _iteratorError254=undefined;try{for(var _iterator254=_c6[Symbol.iterator](),_step254;!(_iteratorNormalCompletion254=(_step254=_iterator254.next()).done);_iteratorNormalCompletion254=true){var _t209=_step254.value;r.set(_t209,_o62+_l2.length);}}catch(err){_didIteratorError254=true;_iteratorError254=err;}finally{try{if(!_iteratorNormalCompletion254&&_iterator254["return"]!=null){_iterator254["return"]();}}finally{if(_didIteratorError254){throw _iteratorError254;}}}(_t208=t).splice.apply(_t208,[a,1].concat(_toConsumableArray(_c6))),(_e197=e).splice.apply(_e197,[_o62,1].concat(_toConsumableArray(_l2)));}if(n.padWithNoOps){var _n174=t.length-s.originalOperationsACount,_i138=e.length-s.originalOperationsBCount;Rd(t,_i138-_n174),Rd(e,_n174-_i138);}return Od(t,s.nextBaseVersionB),Od(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:o};}var Nd=/*#__PURE__*/function(){function Nd(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1;_classCallCheck(this,Nd);this.originalOperations=new Map(),this._history=t.history,this._useRelations=e,this._forceWeakRemove=!!n,this._relations=new Map();}_createClass(Nd,[{key:"setOriginalOperations",value:function setOriginalOperations(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var n=e?this.originalOperations.get(e):null;var _iteratorNormalCompletion255=true;var _didIteratorError255=false;var _iteratorError255=undefined;try{for(var _iterator255=t[Symbol.iterator](),_step255;!(_iteratorNormalCompletion255=(_step255=_iterator255.next()).done);_iteratorNormalCompletion255=true){var _e199=_step255.value;this.originalOperations.set(_e199,n||_e199);}}catch(err){_didIteratorError255=true;_iteratorError255=err;}finally{try{if(!_iteratorNormalCompletion255&&_iterator255["return"]!=null){_iterator255["return"]();}}finally{if(_didIteratorError255){throw _iteratorError255;}}}}},{key:"updateRelation",value:function updateRelation(t,e){switch(t.constructor){case lc:switch(e.constructor){case mc:t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter");break;case lc:t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter");}break;case gc:switch(e.constructor){case mc:t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");break;case lc:(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))&&this._setRelation(t,e,"splitBefore");}break;case mc:switch(e.constructor){case mc:t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement");break;case gc:t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource");}break;case hc:{var _n175=t.newRange;if(!_n175)return;switch(e.constructor){case lc:{var _i139=Gs._createFromPositionAndShift(e.sourcePosition,e.howMany),_o63=_i139.containsPosition(_n175.start)||_i139.start.isEqual(_n175.start),_r27=_i139.containsPosition(_n175.end)||_i139.end.isEqual(_n175.end);!_o63&&!_r27||_i139.containsRange(_n175)||this._setRelation(t,e,{side:_o63?"left":"right",path:_o63?_n175.start.path.slice():_n175.end.path.slice()});break;}case mc:{var _i140=_n175.start.isEqual(e.targetPosition),_o64=_n175.start.isEqual(e.deletionPosition),_r28=_n175.end.isEqual(e.deletionPosition),_s20=_n175.end.isEqual(e.sourcePosition);(_i140||_o64||_r28||_s20)&&this._setRelation(t,e,{wasInLeftElement:_i140,wasStartBeforeMergedElement:_o64,wasEndBeforeMergedElement:_r28,wasInRightElement:_s20});break;}}break;}}}},{key:"getContext",value:function getContext(t,e,n){return{aIsStrong:n,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove};}},{key:"_wasUndone",value:function _wasUndone(t){var e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e);}},{key:"_getRelation",value:function _getRelation(t,e){var n=this.originalOperations.get(e),i=this._history.getUndoneOperation(n);if(!i)return null;var o=this.originalOperations.get(t),r=this._relations.get(o);return r&&r.get(i)||null;}},{key:"_setRelation",value:function _setRelation(t,e,n){var i=this.originalOperations.get(t),o=this.originalOperations.get(e);var r=this._relations.get(i);r||(r=new Map(),this._relations.set(i,r)),r.set(o,n);}}]);return Nd;}();function Od(t,e){var _iteratorNormalCompletion256=true;var _didIteratorError256=false;var _iteratorError256=undefined;try{for(var _iterator256=t[Symbol.iterator](),_step256;!(_iteratorNormalCompletion256=(_step256=_iterator256.next()).done);_iteratorNormalCompletion256=true){var _n176=_step256.value;_n176.baseVersion=e++;}}catch(err){_didIteratorError256=true;_iteratorError256=err;}finally{try{if(!_iteratorNormalCompletion256&&_iterator256["return"]!=null){_iterator256["return"]();}}finally{if(_didIteratorError256){throw _iteratorError256;}}}}function Rd(t,e){for(var _n177=0;_n177<e;_n177++){t.push(new Cd(0));}}function Dd(t,e,n){var i=t.nodes.getNode(0).getAttribute(e);if(i==n)return null;var o=new Gs(t.position,t.position.getShiftedBy(t.howMany));return new ac(o,e,i,n,0);}function Ld(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany);}function jd(t,e){var n=[];for(var _i141=0;_i141<t.length;_i141++){var _o65=t[_i141],_r29=new lc(_o65.start,_o65.end.offset-_o65.start.offset,e,0);n.push(_r29);for(var _e200=_i141+1;_e200<t.length;_e200++){t[_e200]=t[_e200]._getTransformedByMove(_r29.sourcePosition,_r29.targetPosition,_r29.howMany)[0];}e=e._getTransformedByMove(_r29.sourcePosition,_r29.targetPosition,_r29.howMany);}return n;}Sd(ac,ac,function(t,e,n){if(t.key===e.key){var _i142=t.range.getDifference(e.range).map(function(e){return new ac(e,t.key,t.oldValue,t.newValue,0);}),_o66=t.range.getIntersection(e.range);return _o66&&n.aIsStrong&&_i142.push(new ac(_o66,e.key,e.newValue,t.newValue,0)),0==_i142.length?[new Cd(0)]:_i142;}return[t];}),Sd(ac,dc,function(t,e){if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){var _n178=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(function(e){return new ac(e,t.key,t.oldValue,t.newValue,t.baseVersion);});if(e.shouldReceiveAttributes){var _i143=Dd(e,t.key,t.oldValue);_i143&&_n178.unshift(_i143);}return _n178;}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t];}),Sd(ac,mc,function(t,e){var n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(Gs._createFromPositionAndShift(e.graveyardPosition,1));var i=t.range._getTransformedByMergeOperation(e);return i.isCollapsed||n.push(i),n.map(function(e){return new ac(e,t.key,t.oldValue,t.newValue,t.baseVersion);});}),Sd(ac,lc,function(t,e){return function(t,e){var n=Gs._createFromPositionAndShift(e.sourcePosition,e.howMany);var i=null,o=[];n.containsRange(t,!0)?i=t:t.start.hasSameParentAs(n.start)?(o=t.getDifference(n),i=t.getIntersection(n)):o=[t];var r=[];var _iteratorNormalCompletion257=true;var _didIteratorError257=false;var _iteratorError257=undefined;try{for(var _iterator257=o[Symbol.iterator](),_step257;!(_iteratorNormalCompletion257=(_step257=_iterator257.next()).done);_iteratorNormalCompletion257=true){var _t210=_step257.value;_t210=_t210._getTransformedByDeletion(e.sourcePosition,e.howMany);var _n179=e.getMovedRangeStart(),_i144=_t210.start.hasSameParentAs(_n179);_t210=_t210._getTransformedByInsertion(_n179,e.howMany,_i144),r.push.apply(r,_toConsumableArray(_t210));}}catch(err){_didIteratorError257=true;_iteratorError257=err;}finally{try{if(!_iteratorNormalCompletion257&&_iterator257["return"]!=null){_iterator257["return"]();}}finally{if(_didIteratorError257){throw _iteratorError257;}}}i&&r.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]);return r;}(t.range,e).map(function(e){return new ac(e,t.key,t.oldValue,t.newValue,t.baseVersion);});}),Sd(ac,gc,function(t,e){if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){var _n180=t.clone();return _n180.range=new Gs(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,_n180];}return t.range=t.range._getTransformedBySplitOperation(e),[t];}),Sd(dc,ac,function(t,e){var n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){var _i145=Dd(t,e.key,e.newValue);_i145&&n.push(_i145);}return n;}),Sd(dc,dc,function(t,e,n){return t.position.isEqual(e.position)&&n.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(e),[t]);}),Sd(dc,lc,function(t,e){return t.position=t.position._getTransformedByMoveOperation(e),[t];}),Sd(dc,gc,function(t,e){return t.position=t.position._getTransformedBySplitOperation(e),[t];}),Sd(dc,mc,function(t,e){return t.position=t.position._getTransformedByMergeOperation(e),[t];}),Sd(hc,dc,function(t,e){return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t];}),Sd(hc,hc,function(t,e,n){if(t.name==e.name){if(!n.aIsStrong)return[new Cd(0)];t.oldRange=e.newRange?e.newRange.clone():null;}return[t];}),Sd(hc,mc,function(t,e){return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t];}),Sd(hc,lc,function(t,e,n){if(t.oldRange&&(t.oldRange=Gs._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(n.abRelation){var _i146=Gs._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if("left"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.start.path=n.abRelation.path,t.newRange.end=_i146.end,[t];if("right"==n.abRelation.side&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=_i146.start,t.newRange.end.path=n.abRelation.path,[t];}t.newRange=Gs._createFromRanges(t.newRange._getTransformedByMoveOperation(e));}return[t];}),Sd(hc,gc,function(t,e,n){if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){var _i147=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?t.newRange.start=$s._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!n.abRelation.wasInLeftElement&&(t.newRange.start=$s._createAt(e.moveTargetPosition)),t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasInRightElement?t.newRange.end=$s._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?t.newRange.end=$s._createAt(e.insertionPosition):t.newRange.end=_i147.end,[t];}t.newRange=t.newRange._getTransformedBySplitOperation(e);}return[t];}),Sd(mc,dc,function(t,e){return t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t];}),Sd(mc,mc,function(t,e,n){if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(n.bWasUndone){var _n181=e.graveyardPosition.path.slice();return _n181.push(0),t.sourcePosition=new $s(e.graveyardPosition.root,_n181),t.howMany=0,[t];}return[new Cd(0)];}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){var _i148="$graveyard"==t.targetPosition.root.rootName,_o67="$graveyard"==e.targetPosition.root.rootName;if(_o67&&!_i148||!(_i148&&!_o67)&&n.aIsStrong){var _n182=e.targetPosition._getTransformedByMergeOperation(e),_i149=t.targetPosition._getTransformedByMergeOperation(e);return[new lc(_n182,t.howMany,_i149,0)];}return[new Cd(0)];}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&n.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t];}),Sd(mc,lc,function(t,e,n){var i=Gs._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!n.bWasUndone&&!n.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.sourcePosition)?[new Cd(0)]:(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t]);}),Sd(mc,gc,function(t,e,n){if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){var _i150=0!=e.howMany,_o68=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(_i150||_o68||"mergeTargetNotMoved"==n.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==n.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];}),Sd(lc,dc,function(t,e){var n=Gs._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=n.start,t.howMany=n.end.offset-n.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t];}),Sd(lc,lc,function(t,e,n){var i=Gs._createFromPositionAndShift(t.sourcePosition,t.howMany),o=Gs._createFromPositionAndShift(e.sourcePosition,e.howMany);var r,s=n.aIsStrong,a=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?a=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ld(t,e)&&Ld(e,t))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),jd([i],r);if(o.containsPosition(t.targetPosition)&&o.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),jd([i],r);var c=li(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==c||"extension"==c)return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),jd([i],r);"remove"!=t.type||"remove"==e.type||n.aWasUndone||n.forceWeakRemove?"remove"==t.type||"remove"!=e.type||n.bWasUndone||n.forceWeakRemove||(s=!1):s=!0;var l=[],d=i.getDifference(o);var _iteratorNormalCompletion258=true;var _didIteratorError258=false;var _iteratorError258=undefined;try{for(var _iterator258=d[Symbol.iterator](),_step258;!(_iteratorNormalCompletion258=(_step258=_iterator258.next()).done);_iteratorNormalCompletion258=true){var _t211=_step258.value;_t211.start=_t211.start._getTransformedByDeletion(e.sourcePosition,e.howMany),_t211.end=_t211.end._getTransformedByDeletion(e.sourcePosition,e.howMany);var _n183="same"==li(_t211.start.getParentPath(),e.getMovedRangeStart().getParentPath()),_i151=_t211._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,_n183);l.push.apply(l,_toConsumableArray(_i151));}}catch(err){_didIteratorError258=true;_iteratorError258=err;}finally{try{if(!_iteratorNormalCompletion258&&_iterator258["return"]!=null){_iterator258["return"]();}}finally{if(_didIteratorError258){throw _iteratorError258;}}}var h=i.getIntersection(o);return null!==h&&s&&(h.start=h.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.end=h.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(h):1==l.length?o.start.isBefore(i.start)||o.start.isEqual(i.start)?l.unshift(h):l.push(h):l.splice(1,0,h)),0===l.length?[new Cd(t.baseVersion)]:jd(l,r);}),Sd(lc,gc,function(t,e,n){var i=t.targetPosition.clone();t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(i=t.targetPosition._getTransformedBySplitOperation(e));var o=Gs._createFromPositionAndShift(t.sourcePosition,t.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=i,[t];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){var _t212=new Gs(e.splitPosition,o.end);return _t212=_t212._getTransformedBySplitOperation(e),jd([new Gs(o.start,e.splitPosition),_t212],i);}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==n.abRelation&&(i=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==n.abRelation&&(i=t.targetPosition);var r=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){var _i152=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);t.howMany>1&&_i152&&!n.aWasUndone&&r.push(Gs._createFromPositionAndShift(e.insertionPosition,1));}return jd(r,i);}),Sd(lc,mc,function(t,e,n){var i=Gs._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.sourcePosition))if("remove"!=t.type||n.forceWeakRemove){if(1==t.howMany)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Cd(0)];}else if(!n.aWasUndone){var _n184=[];var _i153=e.graveyardPosition.clone(),_o69=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(_n184.push(new lc(t.sourcePosition,t.howMany-1,t.targetPosition,0)),_i153=_i153._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),_o69=_o69._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));var _r30=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),_s21=new lc(_i153,1,_r30,0),_a12=_s21.getMovedRangeStart().path.slice();_a12.push(0);var _c7=new $s(_s21.targetPosition.root,_a12);_o69=_o69._getTransformedByMove(_i153,_r30,1);var _l3=new lc(_o69,e.howMany,_c7,0);return _n184.push(_s21),_n184.push(_l3),_n184;}var o=Gs._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=o.start,t.howMany=o.end.offset-o.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t];}),Sd(uc,dc,function(t,e){return t.position=t.position._getTransformedByInsertOperation(e),[t];}),Sd(uc,mc,function(t,e){return t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t]);}),Sd(uc,lc,function(t,e){return t.position=t.position._getTransformedByMoveOperation(e),[t];}),Sd(uc,uc,function(t,e,n){if(t.position.isEqual(e.position)){if(!n.aIsStrong)return[new Cd(0)];t.oldName=e.newName;}return[t];}),Sd(uc,gc,function(t,e){if("same"==li(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){return[t,new uc(t.position.getShiftedBy(1),t.oldName,t.newName,0)];}return t.position=t.position._getTransformedBySplitOperation(e),[t];}),Sd(fc,fc,function(t,e,n){if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new Cd(0)];t.oldValue=e.newValue;}return[t];}),Sd(gc,dc,function(t,e){return t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=gc.getInsertionPosition(t.splitPosition),[t];}),Sd(gc,mc,function(t,e,n){if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){var _n185=e.graveyardPosition.path.slice();_n185.push(0);var _i154=new $s(e.graveyardPosition.root,_n185),_o70=gc.getInsertionPosition(new $s(e.graveyardPosition.root,_n185)),_r31=new gc(_i154,0,null,0);return _r31.insertionPosition=_o70,t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=gc.getInsertionPosition(t.splitPosition),t.graveyardPosition=_r31.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[_r31,t];}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=gc.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t];}),Sd(gc,lc,function(t,e,n){var i=Gs._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){var _o71=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&_o71){var _n186=t.splitPosition._getTransformedByMoveOperation(e),_i155=t.graveyardPosition._getTransformedByMoveOperation(e),_o72=_i155.path.slice();_o72.push(0);var _r32=new $s(_i155.root,_o72);return[new lc(_n186,t.howMany,_r32,0)];}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e);}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(t.splitPosition)){var _n187=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=_n187,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=gc.getInsertionPosition(t.splitPosition),[t];}return!t.splitPosition.isEqual(e.targetPosition)||"insertAtSource"!=n.baRelation&&"splitBefore"!=n.abRelation?(e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=gc.getInsertionPosition(t.splitPosition),[t]):(t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=gc.getInsertionPosition(t.splitPosition),[t]);}),Sd(gc,gc,function(t,e,n){if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Cd(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Cd(0)];if("splitBefore"==n.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t];}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){var _i156="$graveyard"==t.splitPosition.root.rootName,_o73="$graveyard"==e.splitPosition.root.rootName;if(_o73&&!_i156||!(_i156&&!_o73)&&n.aIsStrong){var _n188=[];return e.howMany&&_n188.push(new lc(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&_n188.push(new lc(t.splitPosition,t.howMany,t.moveTargetPosition,0)),_n188;}return[new Cd(0)];}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.baRelation){var _n189=e.insertionPosition.path.slice();_n189.push(0);var _i157=new $s(e.insertionPosition.root,_n189);return[t,new lc(t.insertionPosition,1,_i157,0)];}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=gc.getInsertionPosition(t.splitPosition),[t];});var Vd=/*#__PURE__*/function(_ed5){_inherits(Vd,_ed5);function Vd(t){var _this113;_classCallCheck(this,Vd);_this113=_possibleConstructorReturn(this,_getPrototypeOf(Vd).call(this,t)),_this113._stack=[],_this113._createdBatches=new WeakSet(),_this113.refresh();return _this113;}_createClass(Vd,[{key:"refresh",value:function refresh(){this.isEnabled=this._stack.length>0;}},{key:"addBatch",value:function addBatch(t){var e=this.editor.model.document.selection,n={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:n}),this.refresh();}},{key:"clearStack",value:function clearStack(){this._stack=[],this.refresh();}},{key:"_restoreSelection",value:function _restoreSelection(t,e,n){var i=this.editor.model,o=i.document,r=[];var _iteratorNormalCompletion259=true;var _didIteratorError259=false;var _iteratorError259=undefined;try{for(var _iterator259=t[Symbol.iterator](),_step259;!(_iteratorNormalCompletion259=(_step259=_iterator259.next()).done);_iteratorNormalCompletion259=true){var _e201=_step259.value;var _t213=zd(_e201,n).find(function(t){return t.start.root!=o.graveyard;});_t213&&r.push(_t213);}}catch(err){_didIteratorError259=true;_iteratorError259=err;}finally{try{if(!_iteratorNormalCompletion259&&_iterator259["return"]!=null){_iterator259["return"]();}}finally{if(_didIteratorError259){throw _iteratorError259;}}}r.length&&i.change(function(t){t.setSelection(r,{backward:e});});}},{key:"_undo",value:function _undo(t,e){var n=this.editor.model,i=n.document;this._createdBatches.add(e);var o=t.operations.slice().filter(function(t){return t.isDocumentOperation;});o.reverse();var _iteratorNormalCompletion260=true;var _didIteratorError260=false;var _iteratorError260=undefined;try{for(var _iterator260=o[Symbol.iterator](),_step260;!(_iteratorNormalCompletion260=(_step260=_iterator260.next()).done);_iteratorNormalCompletion260=true){var _t214=_step260.value;var _o74=_t214.baseVersion+1,_r33=Array.from(i.history.getOperations(_o74)),_s22=Id([_t214.getReversed()],_r33,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;var _iteratorNormalCompletion261=true;var _didIteratorError261=false;var _iteratorError261=undefined;try{for(var _iterator261=_s22[Symbol.iterator](),_step261;!(_iteratorNormalCompletion261=(_step261=_iterator261.next()).done);_iteratorNormalCompletion261=true){var _o75=_step261.value;e.addOperation(_o75),n.applyOperation(_o75),i.history.setOperationAsUndone(_t214,_o75);}}catch(err){_didIteratorError261=true;_iteratorError261=err;}finally{try{if(!_iteratorNormalCompletion261&&_iterator261["return"]!=null){_iterator261["return"]();}}finally{if(_didIteratorError261){throw _iteratorError261;}}}}}catch(err){_didIteratorError260=true;_iteratorError260=err;}finally{try{if(!_iteratorNormalCompletion260&&_iterator260["return"]!=null){_iterator260["return"]();}}finally{if(_didIteratorError260){throw _iteratorError260;}}}}}]);return Vd;}(ed);function zd(t,e){var n=t.getTransformedByOperations(e);n.sort(function(t,e){return t.start.isBefore(e.start)?-1:1;});for(var _t215=1;_t215<n.length;_t215++){var _e202=n[_t215-1],_i158=n[_t215];_e202.end.isTouching(_i158.start)&&(_e202.end=_i158.end,n.splice(_t215,1),_t215--);}return n;}var Bd=/*#__PURE__*/function(_Vd){_inherits(Bd,_Vd);function Bd(){_classCallCheck(this,Bd);return _possibleConstructorReturn(this,_getPrototypeOf(Bd).apply(this,arguments));}_createClass(Bd,[{key:"execute",value:function execute(){var _this114=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var e=t?this._stack.findIndex(function(e){return e.batch==t;}):this._stack.length-1,n=this._stack.splice(e,1)[0],i=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(i,function(){_this114._undo(n.batch,i);var t=_this114.editor.model.document.history.getOperations(n.batch.baseVersion);_this114._restoreSelection(n.selection.ranges,n.selection.isBackward,t),_this114.fire("revert",n.batch,i);}),this.refresh();}}]);return Bd;}(Vd);var Fd=/*#__PURE__*/function(_Vd2){_inherits(Fd,_Vd2);function Fd(){_classCallCheck(this,Fd);return _possibleConstructorReturn(this,_getPrototypeOf(Fd).apply(this,arguments));}_createClass(Fd,[{key:"execute",value:function execute(){var _this115=this;var t=this._stack.pop(),e=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(e,function(){var n=t.batch.operations[t.batch.operations.length-1].baseVersion+1,i=_this115.editor.model.document.history.getOperations(n);_this115._restoreSelection(t.selection.ranges,t.selection.isBackward,i),_this115._undo(t.batch,e);}),this.refresh();}}]);return Fd;}(Vd);var Ud=/*#__PURE__*/function(_Kl7){_inherits(Ud,_Kl7);function Ud(t){var _this116;_classCallCheck(this,Ud);_this116=_possibleConstructorReturn(this,_getPrototypeOf(Ud).call(this,t)),_this116._batchRegistry=new WeakSet();return _this116;}_createClass(Ud,[{key:"init",value:function init(){var _this117=this;var t=this.editor;this._undoCommand=new Bd(t),this._redoCommand=new Fd(t),t.commands.add("undo",this._undoCommand),t.commands.add("redo",this._redoCommand),this.listenTo(t.model,"applyOperation",function(t,e){var n=e[0];if(!n.isDocumentOperation)return;var i=n.batch,o=_this117._redoCommand._createdBatches.has(i),r=_this117._undoCommand._createdBatches.has(i);_this117._batchRegistry.has(i)||"transparent"==i.type&&!o&&!r||(o?_this117._undoCommand.addBatch(i):r||(_this117._undoCommand.addBatch(i),_this117._redoCommand.clearStack()),_this117._batchRegistry.add(i));},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",function(t,e,n){_this117._redoCommand.addBatch(n);}),t.keystrokes.set("CTRL+Z","undo"),t.keystrokes.set("CTRL+Y","redo"),t.keystrokes.set("CTRL+SHIFT+Z","redo");}}]);return Ud;}(Kl);n(28);var Hd=/*#__PURE__*/function(_Dl7){_inherits(Hd,_Dl7);function Hd(){var _this118;_classCallCheck(this,Hd);_this118=_possibleConstructorReturn(this,_getPrototypeOf(Hd).call(this));var t=_this118.bindTemplate;_this118.set("content",""),_this118.set("viewBox","0 0 20 20"),_this118.set("fillColor",""),_this118.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{"class":["ck","ck-icon"],viewBox:t.to("viewBox")}});return _this118;}_createClass(Hd,[{key:"render",value:function render(){var _this119=this;_get(_getPrototypeOf(Hd.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",function(){_this119._updateXMLContent(),_this119._colorFillPaths();}),this.on("change:fillColor",function(){_this119._colorFillPaths();});}},{key:"_updateXMLContent",value:function _updateXMLContent(){if(this.content){var _t216=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),_e203=_t216.getAttribute("viewBox");for(_e203&&(this.viewBox=_e203),this.element.innerHTML="";_t216.childNodes.length>0;){this.element.appendChild(_t216.childNodes[0]);}}}},{key:"_colorFillPaths",value:function _colorFillPaths(){var _this120=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(function(t){t.style.fill=_this120.fillColor;});}}]);return Hd;}(Dl);n(30);var qd=/*#__PURE__*/function(_Dl8){_inherits(qd,_Dl8);function qd(t){var _this121;_classCallCheck(this,qd);_this121=_possibleConstructorReturn(this,_getPrototypeOf(qd).call(this,t)),_this121.set("text",""),_this121.set("position","s");var e=_this121.bindTemplate;_this121.setTemplate({tag:"span",attributes:{"class":["ck","ck-tooltip",e.to("position",function(t){return"ck-tooltip_"+t;}),e["if"]("text","ck-hidden",function(t){return!t.trim();})]},children:[{tag:"span",attributes:{"class":["ck","ck-tooltip__text"]},children:[{text:e.to("text")}]}]});return _this121;}return qd;}(Dl);n(32);var Wd=/*#__PURE__*/function(_Dl9){_inherits(Wd,_Dl9);function Wd(t){var _this122;_classCallCheck(this,Wd);_this122=_possibleConstructorReturn(this,_getPrototypeOf(Wd).call(this,t));var e=_this122.bindTemplate,n=Jn();_this122.set("class"),_this122.set("labelStyle"),_this122.set("icon"),_this122.set("isEnabled",!0),_this122.set("isOn",!1),_this122.set("isVisible",!0),_this122.set("isToggleable",!1),_this122.set("keystroke"),_this122.set("label"),_this122.set("tabindex",-1),_this122.set("tooltip"),_this122.set("tooltipPosition","s"),_this122.set("type","button"),_this122.set("withText",!1),_this122.children=_this122.createCollection(),_this122.tooltipView=_this122._createTooltipView(),_this122.labelView=_this122._createLabelView(n),_this122.iconView=new Hd(),_this122.iconView.extendTemplate({attributes:{"class":"ck-button__icon"}}),_this122.bind("_tooltipString").to(_assertThisInitialized(_this122),"tooltip",_assertThisInitialized(_this122),"label",_assertThisInitialized(_this122),"keystroke",_this122._getTooltipString.bind(_assertThisInitialized(_this122))),_this122.setTemplate({tag:"button",attributes:{"class":["ck","ck-button",e.to("class"),e["if"]("isEnabled","ck-disabled",function(t){return!t;}),e["if"]("isVisible","ck-hidden",function(t){return!t;}),e.to("isOn",function(t){return t?"ck-on":"ck-off";}),e["if"]("withText","ck-button_with-text")],type:e.to("type",function(t){return t||"button";}),tabindex:e.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_".concat(n),"aria-disabled":e["if"]("isEnabled",!0,function(t){return!t;}),"aria-pressed":e.to("isOn",function(t){return!!_this122.isToggleable&&String(t);})},children:_this122.children,on:{mousedown:e.to(function(t){t.preventDefault();}),click:e.to(function(t){_this122.isEnabled?_this122.fire("execute"):t.preventDefault();})}});return _this122;}_createClass(Wd,[{key:"render",value:function render(){_get(_getPrototypeOf(Wd.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView);}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_createTooltipView",value:function _createTooltipView(){var t=new qd();return t.bind("text").to(this,"_tooltipString"),t.bind("position").to(this,"tooltipPosition"),t;}},{key:"_createLabelView",value:function _createLabelView(t){var e=new Dl(),n=this.bindTemplate;return e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__label"],style:n.to("labelStyle"),id:"ck-editor__aria-label_".concat(t)},children:[{text:this.bindTemplate.to("label")}]}),e;}},{key:"_getTooltipString",value:function _getTooltipString(t,e,n){return t?"string"==typeof t?t:(n&&(n=function(t){return mo.isMac?_o(t).map(function(t){return po[t.toLowerCase()]||t;}).reduce(function(t,e){return t.slice(-1)in go?t+e:t+"+"+e;}):t;}(n)),t instanceof Function?t(e,n):"".concat(e).concat(n?" (".concat(n,")"):"")):"";}}]);return Wd;}(Dl);var Yd='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',$d='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';var Gd=/*#__PURE__*/function(_Kl8){_inherits(Gd,_Kl8);function Gd(){_classCallCheck(this,Gd);return _possibleConstructorReturn(this,_getPrototypeOf(Gd).apply(this,arguments));}_createClass(Gd,[{key:"init",value:function init(){var t=this.editor,e=t.locale,n=t.t,i="ltr"==e.uiLanguageDirection?Yd:$d,o="ltr"==e.uiLanguageDirection?$d:Yd;this._addButton("undo",n("bj"),"CTRL+Z",i),this._addButton("redo",n("bk"),"CTRL+Y",o);}},{key:"_addButton",value:function _addButton(t,e,n,i){var _this123=this;var o=this.editor;o.ui.componentFactory.add(t,function(r){var s=o.commands.get(t),a=new Wd(r);return a.set({label:e,icon:i,keystroke:n,tooltip:!0}),a.bind("isEnabled").to(s,"isEnabled"),_this123.listenTo(a,"execute",function(){return o.execute(t);}),a;});}}]);return Gd;}(Kl);var Qd=/*#__PURE__*/function(_Kl9){_inherits(Qd,_Kl9);function Qd(){_classCallCheck(this,Qd);return _possibleConstructorReturn(this,_getPrototypeOf(Qd).apply(this,arguments));}_createClass(Qd,null,[{key:"requires",get:function get(){return[Ud,Gd];}},{key:"pluginName",get:function get(){return"Undo";}}]);return Qd;}(Kl);var Kd=/*#__PURE__*/function(_Kl10){_inherits(Kd,_Kl10);function Kd(){_classCallCheck(this,Kd);return _possibleConstructorReturn(this,_getPrototypeOf(Kd).apply(this,arguments));}_createClass(Kd,[{key:"init",value:function init(){this.set("hasAny",!1),this._actions=new oo({idProperty:"_id"}),this._actions.delegate("add","remove").to(this);}},{key:"add",value:function add(t){if("string"!=typeof t)throw new Gn.b("pendingactions-add-invalid-message: The message must be a string.",this);var e=Object.create(Fi);return e.set("message",t),this._actions.add(e),this.hasAny=!0,e;}},{key:"remove",value:function remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length;}},{key:Symbol.iterator,value:function value(){return this._actions[Symbol.iterator]();}},{key:"first",get:function get(){return this._actions.get(0);}}],[{key:"pluginName",get:function get(){return"PendingActions";}}]);return Kd;}(Kl);var Jd=/*#__PURE__*/function(){function Jd(){var _this124=this;_classCallCheck(this,Jd);var t=new window.FileReader();this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=function(t){_this124.loaded=t.loaded;};}_createClass(Jd,[{key:"read",value:function read(t){var _this125=this;var e=this._reader;return this.total=t.size,new Promise(function(n,i){e.onload=function(){var t=e.result;_this125._data=t,n(t);},e.onerror=function(){i("error");},e.onabort=function(){i("aborted");},_this125._reader.readAsDataURL(t);});}},{key:"abort",value:function abort(){this._reader.abort();}},{key:"error",get:function get(){return this._reader.error;}},{key:"data",get:function get(){return this._data;}}]);return Jd;}();ci(Jd,Fi);var Zd=/*#__PURE__*/function(_Kl11){_inherits(Zd,_Kl11);function Zd(){_classCallCheck(this,Zd);return _possibleConstructorReturn(this,_getPrototypeOf(Zd).apply(this,arguments));}_createClass(Zd,[{key:"init",value:function init(){var _this126=this;this.loaders=new oo(),this.loaders.on("add",function(){return _this126._updatePendingAction();}),this.loaders.on("remove",function(){return _this126._updatePendingAction();}),this._loadersMap=new Map(),this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(t,e){return e?t/e*100:0;});}},{key:"getLoader",value:function getLoader(t){return this._loadersMap.get(t)||null;}},{key:"createLoader",value:function createLoader(t){var _this127=this;if(!this.createUploadAdapter)return console.warn(Object(Gn.a)("filerepository-no-upload-adapter: Upload adapter is not defined.")),null;var e=new Xd(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then(function(t){_this127._loadersMap.set(t,e);}),e.file["catch"](function(){}),e.on("change:uploaded",function(){var t=0;var _iteratorNormalCompletion262=true;var _didIteratorError262=false;var _iteratorError262=undefined;try{for(var _iterator262=_this127.loaders[Symbol.iterator](),_step262;!(_iteratorNormalCompletion262=(_step262=_iterator262.next()).done);_iteratorNormalCompletion262=true){var _e204=_step262.value;t+=_e204.uploaded;}}catch(err){_didIteratorError262=true;_iteratorError262=err;}finally{try{if(!_iteratorNormalCompletion262&&_iterator262["return"]!=null){_iterator262["return"]();}}finally{if(_didIteratorError262){throw _iteratorError262;}}}_this127.uploaded=t;}),e.on("change:uploadTotal",function(){var t=0;var _iteratorNormalCompletion263=true;var _didIteratorError263=false;var _iteratorError263=undefined;try{for(var _iterator263=_this127.loaders[Symbol.iterator](),_step263;!(_iteratorNormalCompletion263=(_step263=_iterator263.next()).done);_iteratorNormalCompletion263=true){var _e205=_step263.value;_e205.uploadTotal&&(t+=_e205.uploadTotal);}}catch(err){_didIteratorError263=true;_iteratorError263=err;}finally{try{if(!_iteratorNormalCompletion263&&_iterator263["return"]!=null){_iterator263["return"]();}}finally{if(_didIteratorError263){throw _iteratorError263;}}}_this127.uploadTotal=t;}),e;}},{key:"destroyLoader",value:function destroyLoader(t){var _this128=this;var e=t instanceof Xd?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach(function(t,n){t===e&&_this128._loadersMap["delete"](n);});}},{key:"_updatePendingAction",value:function _updatePendingAction(){var t=this.editor.plugins.get(Kd);if(this.loaders.length){if(!this._pendingAction){var _e206=this.editor.t,_n190=function _n190(t){return"".concat(_e206("aw")," ").concat(parseInt(t),"%.");};this._pendingAction=t.add(_n190(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",_n190);}}else t.remove(this._pendingAction),this._pendingAction=null;}}],[{key:"pluginName",get:function get(){return"FileRepository";}},{key:"requires",get:function get(){return[Kd];}}]);return Zd;}(Kl);ci(Zd,Fi);var Xd=/*#__PURE__*/function(){function Xd(t,e){_classCallCheck(this,Xd);this.id=Jn(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new Jd(),this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(t,e){return e?t/e*100:0;}),this.set("uploadResponse",null);}_createClass(Xd,[{key:"read",value:function read(){var _this129=this;if("idle"!=this.status)throw new Gn.b("filerepository-read-wrong-status: You cannot call read if the status is different than idle.",this);return this.status="reading",this._filePromiseWrapper.promise.then(function(t){return _this129._reader.read(t);}).then(function(t){return _this129.status="idle",t;})["catch"](function(t){if("aborted"===t)throw _this129.status="aborted","aborted";throw _this129.status="error",_this129._reader.error?_this129._reader.error:t;});}},{key:"upload",value:function upload(){var _this130=this;if("idle"!=this.status)throw new Gn.b("filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.",this);return this.status="uploading",this._filePromiseWrapper.promise.then(function(){return _this130._adapter.upload();}).then(function(t){return _this130.uploadResponse=t,_this130.status="idle",t;})["catch"](function(t){if("aborted"===_this130.status)throw"aborted";throw _this130.status="error",t;});}},{key:"abort",value:function abort(){var t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==t?this._reader.abort():"uploading"==t&&this._adapter.abort&&this._adapter.abort():this._filePromiseWrapper.rejecter("aborted"),this._destroy();}},{key:"_destroy",value:function _destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0;}},{key:"_createFilePromiseWrapper",value:function _createFilePromiseWrapper(t){var e={};return e.promise=new Promise(function(n,i){e.resolver=n,e.rejecter=i,e.isFulfilled=!1,t.then(function(t){e.isFulfilled=!0,n(t);})["catch"](function(t){e.isFulfilled=!0,i(t);});}),e;}},{key:"file",get:function get(){var _this131=this;return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(function(t){return _this131._filePromiseWrapper?t:null;}):Promise.resolve(null);}},{key:"data",get:function get(){return this._reader.data;}}]);return Xd;}();ci(Xd,Fi);var th="ckCsrfToken",eh=40,nh="abcdefghijklmnopqrstuvwxyz0123456789";function ih(){var t=function(t){t=t.toLowerCase();var e=document.cookie.split(";");var _iteratorNormalCompletion264=true;var _didIteratorError264=false;var _iteratorError264=undefined;try{for(var _iterator264=e[Symbol.iterator](),_step264;!(_iteratorNormalCompletion264=(_step264=_iterator264.next()).done);_iteratorNormalCompletion264=true){var _n191=_step264.value;var _e207=_n191.split("="),_i159=decodeURIComponent(_e207[0].trim().toLowerCase());if(_i159===t)return decodeURIComponent(_e207[1]);}}catch(err){_didIteratorError264=true;_iteratorError264=err;}finally{try{if(!_iteratorNormalCompletion264&&_iterator264["return"]!=null){_iterator264["return"]();}}finally{if(_didIteratorError264){throw _iteratorError264;}}}return null;}(th);return t&&t.length==eh||(t=function(t){var e="";var n=new Uint8Array(t);window.crypto.getRandomValues(n);for(var _t217=0;_t217<n.length;_t217++){var _i160=nh.charAt(n[_t217]%nh.length);e+=Math.random()>.5?_i160.toUpperCase():_i160;}return e;}(eh),function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path=/";}(th,t)),t;}var oh=/*#__PURE__*/function(_Kl12){_inherits(oh,_Kl12);function oh(){_classCallCheck(this,oh);return _possibleConstructorReturn(this,_getPrototypeOf(oh).apply(this,arguments));}_createClass(oh,[{key:"init",value:function init(){var _this132=this;var t=this.editor.config.get("ckfinder.uploadUrl");t&&(this.editor.plugins.get(Zd).createUploadAdapter=function(e){return new rh(e,t,_this132.editor.t);});}}],[{key:"requires",get:function get(){return[Zd];}},{key:"pluginName",get:function get(){return"CKFinderUploadAdapter";}}]);return oh;}(Kl);var rh=/*#__PURE__*/function(){function rh(t,e,n){_classCallCheck(this,rh);this.loader=t,this.url=e,this.t=n;}_createClass(rh,[{key:"upload",value:function upload(){var _this133=this;return this.loader.file.then(function(t){return new Promise(function(e,n){_this133._initRequest(),_this133._initListeners(e,n,t),_this133._sendRequest(t);});});}},{key:"abort",value:function abort(){this.xhr&&this.xhr.abort();}},{key:"_initRequest",value:function _initRequest(){var t=this.xhr=new XMLHttpRequest();t.open("POST",this.url,!0),t.responseType="json";}},{key:"_initListeners",value:function _initListeners(t,e,n){var i=this.xhr,o=this.loader,r=(0,this.t)("a")+" ".concat(n.name,".");i.addEventListener("error",function(){return e(r);}),i.addEventListener("abort",function(){return e();}),i.addEventListener("load",function(){var n=i.response;if(!n||!n.uploaded)return e(n&&n.error&&n.error.message?n.error.message:r);t({"default":n.url});}),i.upload&&i.upload.addEventListener("progress",function(t){t.lengthComputable&&(o.uploadTotal=t.total,o.uploaded=t.loaded);});}},{key:"_sendRequest",value:function _sendRequest(t){var e=new FormData();e.append("upload",t),e.append("ckCsrfToken",ih()),this.xhr.send(e);}}]);return rh;}();var sh=function sh(t,e,n){_classCallCheck(this,sh);var i,o=null;"function"==typeof n?i=n:(o=t.commands.get(n),i=function i(){t.execute(n);}),t.model.document.on("change",function(n,r){if(o&&!o.isEnabled)return;if("transparent"==r.type)return;var s=Array.from(t.model.document.differ.getChanges()),a=s[0];if(1!=s.length||"insert"!==a.type||"$text"!=a.name||1!=a.length)return;var c=a.position.textNode||a.position.nodeAfter;if(!c.parent.is("paragraph"))return;var l=e.exec(c.data);l&&t.model.enqueueChange(function(t){var e=t.createPositionAt(c.parent,0),n=t.createPositionAt(c.parent,l[0].length),o=new oa(e,n);!1!==i({match:l})&&t.remove(o),o.detach();});});};var ah=function ah(t,e,n){_classCallCheck(this,ah);var i,o,r,s;e instanceof RegExp?i=e:r=e,"string"==typeof n?o=n:s=n,r=r||function(t){var e;var n=[],o=[];for(;null!==(e=i.exec(t))&&!(e&&e.length<4);){var _e208=e,_t218=_e208.index,_i161=_e208[1],_r34=_e208[2],_s23=_e208[3];var _a13=_i161+_r34+_s23,_c8=[_t218+=e[0].length-_a13.length,_t218+_i161.length],_l4=[_t218+_i161.length+_r34.length,_t218+_i161.length+_r34.length+_s23.length];n.push(_c8),n.push(_l4),o.push([_t218+_i161.length,_t218+_i161.length+_r34.length]);}return{remove:n,format:o};},s=s||function(e,n){var i=t.model.schema.getValidRanges(n,o);var _iteratorNormalCompletion265=true;var _didIteratorError265=false;var _iteratorError265=undefined;try{for(var _iterator265=i[Symbol.iterator](),_step265;!(_iteratorNormalCompletion265=(_step265=_iterator265.next()).done);_iteratorNormalCompletion265=true){var _t219=_step265.value;e.setAttribute(o,!0,_t219);}}catch(err){_didIteratorError265=true;_iteratorError265=err;}finally{try{if(!_iteratorNormalCompletion265&&_iterator265["return"]!=null){_iterator265["return"]();}}finally{if(_didIteratorError265){throw _iteratorError265;}}}e.removeSelectionAttribute(o);},t.model.document.on("change",function(e,n){if("transparent"==n.type)return;var i=t.model.document.selection;if(!i.isCollapsed)return;var o=Array.from(t.model.document.differ.getChanges()),a=o[0];if(1!=o.length||"insert"!==a.type||"$text"!=a.name||1!=a.length)return;var c=i.focus.parent,l=function(t){return Array.from(t.getChildren()).reduce(function(t,e){return t+e.data;},"");}(c).slice(0,i.focus.offset),d=r(l),h=ch(c,d.format,t.model),u=ch(c,d.remove,t.model);h.length&&u.length&&t.model.enqueueChange(function(t){if(!1!==s(t,h)){var _iteratorNormalCompletion266=true;var _didIteratorError266=false;var _iteratorError266=undefined;try{for(var _iterator266=u.reverse()[Symbol.iterator](),_step266;!(_iteratorNormalCompletion266=(_step266=_iterator266.next()).done);_iteratorNormalCompletion266=true){var _e209=_step266.value;t.remove(_e209);}}catch(err){_didIteratorError266=true;_iteratorError266=err;}finally{try{if(!_iteratorNormalCompletion266&&_iterator266["return"]!=null){_iterator266["return"]();}}finally{if(_didIteratorError266){throw _iteratorError266;}}}}});});};function ch(t,e,n){return e.filter(function(t){return void 0!==t[0]&&void 0!==t[1];}).map(function(e){return n.createRange(n.createPositionAt(t,e[0]),n.createPositionAt(t,e[1]));});}function lh(t,e){return function(n,i){if(!t.commands.get(e).isEnabled)return!1;var o=t.model.schema.getValidRanges(i,e);var _iteratorNormalCompletion267=true;var _didIteratorError267=false;var _iteratorError267=undefined;try{for(var _iterator267=o[Symbol.iterator](),_step267;!(_iteratorNormalCompletion267=(_step267=_iterator267.next()).done);_iteratorNormalCompletion267=true){var _t220=_step267.value;n.setAttribute(e,!0,_t220);}}catch(err){_didIteratorError267=true;_iteratorError267=err;}finally{try{if(!_iteratorNormalCompletion267&&_iterator267["return"]!=null){_iterator267["return"]();}}finally{if(_didIteratorError267){throw _iteratorError267;}}}n.removeSelectionAttribute(e);};}var dh=/*#__PURE__*/function(_ed6){_inherits(dh,_ed6);function dh(t,e){var _this134;_classCallCheck(this,dh);_this134=_possibleConstructorReturn(this,_getPrototypeOf(dh).call(this,t)),_this134.attributeKey=e;return _this134;}_createClass(dh,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this135=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.document.selection,i=void 0===t.forceValue?!this.value:t.forceValue;e.change(function(t){if(n.isCollapsed)i?t.setSelectionAttribute(_this135.attributeKey,!0):t.removeSelectionAttribute(_this135.attributeKey);else{var _o76=e.schema.getValidRanges(n.getRanges(),_this135.attributeKey);var _iteratorNormalCompletion268=true;var _didIteratorError268=false;var _iteratorError268=undefined;try{for(var _iterator268=_o76[Symbol.iterator](),_step268;!(_iteratorNormalCompletion268=(_step268=_iterator268.next()).done);_iteratorNormalCompletion268=true){var _e210=_step268.value;i?t.setAttribute(_this135.attributeKey,i,_e210):t.removeAttribute(_this135.attributeKey,_e210);}}catch(err){_didIteratorError268=true;_iteratorError268=err;}finally{try{if(!_iteratorNormalCompletion268&&_iterator268["return"]!=null){_iterator268["return"]();}}finally{if(_didIteratorError268){throw _iteratorError268;}}}}});}},{key:"_getValueFromFirstAllowedNode",value:function _getValueFromFirstAllowedNode(){var t=this.editor.model,e=t.schema,n=t.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);var _iteratorNormalCompletion269=true;var _didIteratorError269=false;var _iteratorError269=undefined;try{for(var _iterator269=n.getRanges()[Symbol.iterator](),_step269;!(_iteratorNormalCompletion269=(_step269=_iterator269.next()).done);_iteratorNormalCompletion269=true){var _t221=_step269.value;var _iteratorNormalCompletion270=true;var _didIteratorError270=false;var _iteratorError270=undefined;try{for(var _iterator270=_t221.getItems()[Symbol.iterator](),_step270;!(_iteratorNormalCompletion270=(_step270=_iterator270.next()).done);_iteratorNormalCompletion270=true){var _n192=_step270.value;if(e.checkAttribute(_n192,this.attributeKey))return _n192.hasAttribute(this.attributeKey);}}catch(err){_didIteratorError270=true;_iteratorError270=err;}finally{try{if(!_iteratorNormalCompletion270&&_iterator270["return"]!=null){_iterator270["return"]();}}finally{if(_didIteratorError270){throw _iteratorError270;}}}}}catch(err){_didIteratorError269=true;_iteratorError269=err;}finally{try{if(!_iteratorNormalCompletion269&&_iterator269["return"]!=null){_iterator269["return"]();}}finally{if(_didIteratorError269){throw _iteratorError269;}}}return!1;}}]);return dh;}(ed);var hh="bold";var uh=/*#__PURE__*/function(_Kl13){_inherits(uh,_Kl13);function uh(){_classCallCheck(this,uh);return _possibleConstructorReturn(this,_getPrototypeOf(uh).apply(this,arguments));}_createClass(uh,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:hh}),t.model.schema.setAttributeProperties(hh,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:hh,view:"strong",upcastAlso:["b",{styles:{"font-weight":"bold"}}]}),t.commands.add(hh,new dh(t,hh)),t.keystrokes.set("CTRL+B",hh);}}]);return uh;}(Kl);var fh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>';var mh="bold";var gh=/*#__PURE__*/function(_Kl14){_inherits(gh,_Kl14);function gh(){_classCallCheck(this,gh);return _possibleConstructorReturn(this,_getPrototypeOf(gh).apply(this,arguments));}_createClass(gh,[{key:"init",value:function init(){var _this136=this;var t=this.editor,e=t.t;t.ui.componentFactory.add(mh,function(n){var i=t.commands.get(mh),o=new Wd(n);return o.set({label:e("d"),icon:fh,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),_this136.listenTo(o,"execute",function(){return t.execute(mh);}),o;});}}]);return gh;}(Kl);var ph="italic";var bh=/*#__PURE__*/function(_Kl15){_inherits(bh,_Kl15);function bh(){_classCallCheck(this,bh);return _possibleConstructorReturn(this,_getPrototypeOf(bh).apply(this,arguments));}_createClass(bh,[{key:"init",value:function init(){var t=this.editor;t.model.schema.extend("$text",{allowAttributes:ph}),t.model.schema.setAttributeProperties(ph,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:ph,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),t.commands.add(ph,new dh(t,ph)),t.keystrokes.set("CTRL+I",ph);}}]);return bh;}(Kl);var wh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';var kh="italic";var _h=/*#__PURE__*/function(_Kl16){_inherits(_h,_Kl16);function _h(){_classCallCheck(this,_h);return _possibleConstructorReturn(this,_getPrototypeOf(_h).apply(this,arguments));}_createClass(_h,[{key:"init",value:function init(){var _this137=this;var t=this.editor,e=t.t;t.ui.componentFactory.add(kh,function(n){var i=t.commands.get(kh),o=new Wd(n);return o.set({label:e("e"),icon:wh,keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),_this137.listenTo(o,"execute",function(){return t.execute(kh);}),o;});}}]);return _h;}(Kl);function vh(t){var e=t.next();return e.done?null:e.value;}var yh=/*#__PURE__*/function(_ed7){_inherits(yh,_ed7);function yh(){_classCallCheck(this,yh);return _possibleConstructorReturn(this,_getPrototypeOf(yh).apply(this,arguments));}_createClass(yh,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this138=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.schema,i=e.document.selection,o=Array.from(i.getTopMostBlocks()),r=void 0===t.forceValue?!this.value:t.forceValue;e.change(function(t){if(r){var _e211=o.filter(function(t){return xh(t)||Th(n,t);});_this138._applyQuote(t,_e211);}else _this138._removeQuote(t,o.filter(xh));});}},{key:"_getValue",value:function _getValue(){var t=vh(this.editor.model.document.selection.getTopMostBlocks());return!(!t||!xh(t));}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var t=this.editor.model.document.selection,e=this.editor.model.schema,n=vh(t.getSelectedBlocks());return!!n&&Th(e,n);}},{key:"_removeQuote",value:function _removeQuote(t,e){Ah(t,e).reverse().forEach(function(e){if(e.start.isAtStart&&e.end.isAtEnd)return void t.unwrap(e.start.parent);if(e.start.isAtStart){var _n193=t.createPositionBefore(e.start.parent);return void t.move(e,_n193);}e.end.isAtEnd||t.split(e.end);var n=t.createPositionAfter(e.end.parent);t.move(e,n);});}},{key:"_applyQuote",value:function _applyQuote(t,e){var n=[];Ah(t,e).reverse().forEach(function(e){var i=xh(e.start);i||(i=t.createElement("blockQuote"),t.wrap(e,i)),n.push(i);}),n.reverse().reduce(function(e,n){return e.nextSibling==n?(t.merge(t.createPositionAfter(e)),e):n;});}}]);return yh;}(ed);function xh(t){return"blockQuote"==t.parent.name?t.parent:null;}function Ah(t,e){var n,i=0;var o=[];for(;i<e.length;){var _r35=e[i],_s24=e[i+1];n||(n=t.createPositionBefore(_r35)),_s24&&_r35.nextSibling==_s24||(o.push(t.createRange(n,t.createPositionAfter(_r35))),n=null),i++;}return o;}function Th(t,e){var n=t.checkChild(e.parent,"blockQuote"),i=t.checkChild(["$root","blockQuote"],e);return n&&i;}var Ch=/*#__PURE__*/function(_Kl17){_inherits(Ch,_Kl17);function Ch(){_classCallCheck(this,Ch);return _possibleConstructorReturn(this,_getPrototypeOf(Ch).apply(this,arguments));}_createClass(Ch,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema;t.commands.add("blockQuote",new yh(t)),e.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"}),e.addChildCheck(function(t,e){if(t.endsWith("blockQuote")&&"blockQuote"==e.name)return!1;}),t.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),t.model.document.registerPostFixer(function(n){var i=t.model.document.differ.getChanges();var _iteratorNormalCompletion271=true;var _didIteratorError271=false;var _iteratorError271=undefined;try{for(var _iterator271=i[Symbol.iterator](),_step271;!(_iteratorNormalCompletion271=(_step271=_iterator271.next()).done);_iteratorNormalCompletion271=true){var _t222=_step271.value;if("insert"==_t222.type){var _i162=_t222.position.nodeAfter;if(!_i162)continue;if(_i162.is("blockQuote")&&_i162.isEmpty)return n.remove(_i162),!0;if(_i162.is("blockQuote")&&!e.checkChild(_t222.position,_i162))return n.unwrap(_i162),!0;if(_i162.is("element")){var _t223=n.createRangeIn(_i162);var _iteratorNormalCompletion272=true;var _didIteratorError272=false;var _iteratorError272=undefined;try{for(var _iterator272=_t223.getItems()[Symbol.iterator](),_step272;!(_iteratorNormalCompletion272=(_step272=_iterator272.next()).done);_iteratorNormalCompletion272=true){var _i163=_step272.value;if(_i163.is("blockQuote")&&!e.checkChild(n.createPositionBefore(_i163),_i163))return n.unwrap(_i163),!0;}}catch(err){_didIteratorError272=true;_iteratorError272=err;}finally{try{if(!_iteratorNormalCompletion272&&_iterator272["return"]!=null){_iterator272["return"]();}}finally{if(_didIteratorError272){throw _iteratorError272;}}}}}else if("remove"==_t222.type){var _e212=_t222.position.parent;if(_e212.is("blockQuote")&&_e212.isEmpty)return n.remove(_e212),!0;}}}catch(err){_didIteratorError271=true;_iteratorError271=err;}finally{try{if(!_iteratorNormalCompletion271&&_iterator271["return"]!=null){_iterator271["return"]();}}finally{if(_didIteratorError271){throw _iteratorError271;}}}return!1;});}},{key:"afterInit",value:function afterInit(){var _this139=this;var t=this.editor.commands.get("blockQuote");this.listenTo(this.editor.editing.view.document,"enter",function(e,n){var i=_this139.editor.model.document,o=i.selection.getLastPosition().parent;i.selection.isCollapsed&&o.isEmpty&&t.value&&(_this139.editor.execute("blockQuote"),_this139.editor.editing.view.scrollToTheSelection(),n.preventDefault(),e.stop());});}}]);return Ch;}(Kl);var Ph='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>';n(34);var Sh=/*#__PURE__*/function(_Kl18){_inherits(Sh,_Kl18);function Sh(){_classCallCheck(this,Sh);return _possibleConstructorReturn(this,_getPrototypeOf(Sh).apply(this,arguments));}_createClass(Sh,[{key:"init",value:function init(){var _this140=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("blockQuote",function(n){var i=t.commands.get("blockQuote"),o=new Wd(n);return o.set({label:e("f"),icon:Ph,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(i,"value","isEnabled"),_this140.listenTo(o,"execute",function(){return t.execute("blockQuote");}),o;});}}]);return Sh;}(Kl);var Mh='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>';var Eh=/*#__PURE__*/function(_Kl19){_inherits(Eh,_Kl19);function Eh(){_classCallCheck(this,Eh);return _possibleConstructorReturn(this,_getPrototypeOf(Eh).apply(this,arguments));}_createClass(Eh,[{key:"init",value:function init(){var t=this.editor,e=t.ui.componentFactory,n=t.t;e.add("ckfinder",function(e){var i=t.commands.get("ckfinder"),o=new Wd(e);return o.set({label:n("g"),icon:Mh,tooltip:!0}),o.bind("isEnabled").to(i),o.on("execute",function(){t.execute("ckfinder"),t.editing.view.focus();}),o;});}}],[{key:"pluginName",get:function get(){return"CKFinderUI";}}]);return Eh;}(Kl);var Ih=/*#__PURE__*/function(_Kl20){_inherits(Ih,_Kl20);function Ih(){_classCallCheck(this,Ih);return _possibleConstructorReturn(this,_getPrototypeOf(Ih).apply(this,arguments));}_createClass(Ih,[{key:"init",value:function init(){this.on("show:warning",function(t,e){window.alert(e.message);},{priority:"lowest"});}},{key:"showSuccess",value:function showSuccess(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title});}},{key:"showInfo",value:function showInfo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title});}},{key:"showWarning",value:function showWarning(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title});}},{key:"_showNotification",value:function _showNotification(t){var e="show:".concat(t.type)+(t.namespace?":".concat(t.namespace):"");this.fire(e,{message:t.message,type:t.type,title:t.title||""});}}],[{key:"pluginName",get:function get(){return"Notification";}}]);return Ih;}(Kl);var Nh=/*#__PURE__*/function(_ed8){_inherits(Nh,_ed8);function Nh(t){var _this141;_classCallCheck(this,Nh);_this141=_possibleConstructorReturn(this,_getPrototypeOf(Nh).call(this,t)),_this141.stopListening(_this141.editor.model.document,"change"),_this141.listenTo(_this141.editor.model.document,"change",function(){return _this141.refresh();},{priority:"low"});return _this141;}_createClass(Nh,[{key:"refresh",value:function refresh(){var t=this.editor.commands.get("imageUpload"),e=this.editor.commands.get("link");this.isEnabled=t&&e&&(t.isEnabled||e.isEnabled);}},{key:"execute",value:function execute(){var t=this.editor,e=this.editor.config.get("ckfinder.openerMethod")||"modal";if("popup"!=e&&"modal"!=e)throw new Gn.b('ckfinder-unknown-openerMethod: The openerMethod config option must by "popup" or "modal".',t);var n=this.editor.config.get("ckfinder.options")||{};n.chooseFiles=!0;var i=n.onInit;n.language||(n.language=t.locale.uiLanguage),n.onInit=function(e){i&&i(e),e.on("files:choose",function(n){var i=n.data.files.toArray(),o=i.filter(function(t){return!t.isImage();}),r=i.filter(function(t){return t.isImage();});var _iteratorNormalCompletion273=true;var _didIteratorError273=false;var _iteratorError273=undefined;try{for(var _iterator273=o[Symbol.iterator](),_step273;!(_iteratorNormalCompletion273=(_step273=_iterator273.next()).done);_iteratorNormalCompletion273=true){var _e213=_step273.value;t.execute("link",_e213.getUrl());}}catch(err){_didIteratorError273=true;_iteratorError273=err;}finally{try{if(!_iteratorNormalCompletion273&&_iterator273["return"]!=null){_iterator273["return"]();}}finally{if(_didIteratorError273){throw _iteratorError273;}}}var s=[];var _iteratorNormalCompletion274=true;var _didIteratorError274=false;var _iteratorError274=undefined;try{for(var _iterator274=r[Symbol.iterator](),_step274;!(_iteratorNormalCompletion274=(_step274=_iterator274.next()).done);_iteratorNormalCompletion274=true){var _t224=_step274.value;var _n194=_t224.getUrl();s.push(_n194||e.request("file:getProxyUrl",{file:_t224}));}}catch(err){_didIteratorError274=true;_iteratorError274=err;}finally{try{if(!_iteratorNormalCompletion274&&_iterator274["return"]!=null){_iterator274["return"]();}}finally{if(_didIteratorError274){throw _iteratorError274;}}}s.length&&Oh(t,s);}),e.on("file:choose:resizedImage",function(e){var n=e.data.resizedUrl;if(n)Oh(t,[n]);else{var _e214=t.plugins.get("Notification"),_n195=t.locale.t;_e214.showWarning(_n195("ar"),{title:_n195("as"),namespace:"ckfinder"});}});},window.CKFinder[e](n);}}]);return Nh;}(ed);function Oh(t,e){if(t.commands.get("imageUpload").isEnabled)t.execute("imageInsert",{source:e});else{var _e215=t.plugins.get("Notification"),_n196=t.locale.t;_e215.showWarning(_n196("at"),{title:_n196("au"),namespace:"ckfinder"});}}var Rh=/*#__PURE__*/function(_Kl21){_inherits(Rh,_Kl21);function Rh(){_classCallCheck(this,Rh);return _possibleConstructorReturn(this,_getPrototypeOf(Rh).apply(this,arguments));}_createClass(Rh,[{key:"init",value:function init(){var t=this.editor;t.commands.add("ckfinder",new Nh(t));}}],[{key:"pluginName",get:function get(){return"CKFinderEditing";}},{key:"requires",get:function get(){return[Ih];}}]);return Rh;}(Kl);var Dh=/^data:(\S*?);base64,/;var Lh=/*#__PURE__*/function(){function Lh(t,e,n){_classCallCheck(this,Lh);if(!t)throw new Gn.b("fileuploader-missing-file: File must be provided as the first argument",null);if(!e)throw new Gn.b("fileuploader-missing-token: Token must be provided as the second argument.",null);if(!n)throw new Gn.b("fileuploader-missing-api-address: Api address must be provided as the third argument.",null);this.file=function(t){if("string"!=typeof t)return!1;var e=t.match(Dh);return!(!e||!e.length);}(t)?function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:512;try{var _n197=t.match(Dh)[1],_i164=atob(t.replace(Dh,"")),_o77=[];for(var _t225=0;_t225<_i164.length;_t225+=e){var _n198=_i164.slice(_t225,_t225+e),_r36=new Array(_n198.length);for(var _t226=0;_t226<_n198.length;_t226++){_r36[_t226]=_n198.charCodeAt(_t226);}_o77.push(new Uint8Array(_r36));}return new Blob(_o77,{type:_n197});}catch(t){throw new Gn.b("fileuploader-decoding-image-data-error: Problem with decoding Base64 image data.",null);}}(t):t,this._token=e,this._apiAddress=n;}_createClass(Lh,[{key:"onProgress",value:function onProgress(t){return this.on("progress",function(e,n){return t(n);}),this;}},{key:"onError",value:function onError(t){return this.once("error",function(e,n){return t(n);}),this;}},{key:"abort",value:function abort(){this.xhr.abort();}},{key:"send",value:function send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest();}},{key:"_prepareRequest",value:function _prepareRequest(){var t=new XMLHttpRequest();t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t;}},{key:"_attachXHRListeners",value:function _attachXHRListeners(){var _this142=this;var t=this,e=this.xhr;function n(e){return function(){return t.fire("error",e);};}e.addEventListener("error",n("Network Error")),e.addEventListener("abort",n("Abort")),e.upload&&e.upload.addEventListener("progress",function(t){t.lengthComputable&&_this142.fire("progress",{total:t.total,uploaded:t.loaded});}),e.addEventListener("load",function(){var t=e.status,n=e.response;if(t<200||t>299)return _this142.fire("error",n.message||n.error);});}},{key:"_sendRequest",value:function _sendRequest(){var _this143=this;var t=new FormData(),e=this.xhr;return t.append("file",this.file),new Promise(function(n,i){e.addEventListener("load",function(){var t=e.status,o=e.response;return t<200||t>299?o.message?i(new Gn.b("fileuploader-uploading-data-failed: Uploading file failed.",_this143,{message:o.message})):i(o.error):n(o);}),e.addEventListener("error",function(){return i(new Error("Network Error"));}),e.addEventListener("abort",function(){return i(new Error("Abort"));}),e.send(t);});}}]);return Lh;}();ci(Lh,ei);var jh={refreshInterval:36e5,autoRefresh:!0};var Vh=/*#__PURE__*/function(){function Vh(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:jh;_classCallCheck(this,Vh);if(!t)throw new Gn.b("token-missing-token-url: A `tokenUrl` must be provided as the first constructor argument.",this);this.set("value",e.initValue),this._refresh="function"==typeof t?t:function(){return function(t){return new Promise(function(e,n){var i=new XMLHttpRequest();i.open("GET",t),i.addEventListener("load",function(){var t=i.status,o=i.response;return t<200||t>299?n(new Gn.b("token-cannot-download-new-token: Cannot download new token from the provided url.",null)):e(o);}),i.addEventListener("error",function(){return n(new Error("Network Error"));}),i.addEventListener("abort",function(){return n(new Error("Abort"));}),i.send();});}(t);},this._options=Object.assign({},jh,e);}_createClass(Vh,[{key:"init",value:function init(){var _this144=this;return new Promise(function(t,e){_this144._options.autoRefresh&&_this144._startRefreshing(),_this144.value?t(_this144):_this144._refreshToken().then(t)["catch"](e);});}},{key:"_refreshToken",value:function _refreshToken(){var _this145=this;return this._refresh().then(function(t){return _this145.set("value",t);}).then(function(){return _this145;});}},{key:"destroy",value:function destroy(){this._stopRefreshing();}},{key:"_startRefreshing",value:function _startRefreshing(){var _this146=this;this._refreshInterval=setInterval(function(){return _this146._refreshToken();},this._options.refreshInterval);}},{key:"_stopRefreshing",value:function _stopRefreshing(){clearInterval(this._refreshInterval);}}],[{key:"create",value:function create(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:jh;return new Vh(t,e).init();}}]);return Vh;}();ci(Vh,Fi);var zh=Vh;var Bh=/*#__PURE__*/function(_Kl22){_inherits(Bh,_Kl22);function Bh(){_classCallCheck(this,Bh);return _possibleConstructorReturn(this,_getPrototypeOf(Bh).apply(this,arguments));}_createClass(Bh,[{key:"init",value:function init(){var t=this.editor.config.get("cloudServices")||{};for(var _e216 in t){this[_e216]=t[_e216];}if(this.tokenUrl)return this.token=new Bh.Token(this.tokenUrl),this.token.init();this.token=null;}}],[{key:"pluginName",get:function get(){return"CloudServices";}}]);return Bh;}(Kl);Bh.Token=zh;var Fh=/*#__PURE__*/function(_Kl23){_inherits(Fh,_Kl23);function Fh(){_classCallCheck(this,Fh);return _possibleConstructorReturn(this,_getPrototypeOf(Fh).apply(this,arguments));}_createClass(Fh,[{key:"init",value:function init(){var _this147=this;var t=this.editor,e=t.plugins.get(Bh),n=e.token,i=e.uploadUrl;n&&(this._uploadGateway=new Fh._UploadGateway(n,i),t.plugins.get(Zd).createUploadAdapter=function(t){return new Uh(_this147._uploadGateway,t);});}}],[{key:"requires",get:function get(){return[Zd,Bh];}}]);return Fh;}(Kl);var Uh=/*#__PURE__*/function(){function Uh(t,e){_classCallCheck(this,Uh);this.uploadGateway=t,this.loader=e;}_createClass(Uh,[{key:"upload",value:function upload(){var _this148=this;return this.loader.file.then(function(t){return _this148.fileUploader=_this148.uploadGateway.upload(t),_this148.fileUploader.on("progress",function(t,e){_this148.loader.uploadTotal=e.total,_this148.loader.uploaded=e.uploaded;}),_this148.fileUploader.send();});}},{key:"abort",value:function abort(){this.fileUploader.abort();}}]);return Uh;}();Fh._UploadGateway=/*#__PURE__*/function(){function _class(t,e){_classCallCheck(this,_class);if(!t)throw new Gn.b("uploadgateway-missing-token: Token must be provided.",null);if(!e)throw new Gn.b("uploadgateway-missing-api-address: Api address must be provided.",null);this._token=t,this._apiAddress=e;}_createClass(_class,[{key:"upload",value:function upload(t){return new Lh(t,this._token,this._apiAddress);}}]);return _class;}();var Hh=/*#__PURE__*/function(_ur7){_inherits(Hh,_ur7);function Hh(t){var _this149;_classCallCheck(this,Hh);_this149=_possibleConstructorReturn(this,_getPrototypeOf(Hh).call(this,t)),_this149._observedElements=new Set();return _this149;}_createClass(Hh,[{key:"observe",value:function observe(t,e){var _this150=this;this.document.getRoot(e).on("change:children",function(e,n){_this150.view.once("render",function(){return _this150._updateObservedElements(t,n);});});}},{key:"_updateObservedElements",value:function _updateObservedElements(t,e){var _this151=this;if(!e.is("element")||e.is("attributeElement"))return;var n=this.view.domConverter.mapViewToDom(e);if(n){var _iteratorNormalCompletion275=true;var _didIteratorError275=false;var _iteratorError275=undefined;try{for(var _iterator275=n.querySelectorAll("img")[Symbol.iterator](),_step275;!(_iteratorNormalCompletion275=(_step275=_iterator275.next()).done);_iteratorNormalCompletion275=true){var _t227=_step275.value;this._observedElements.has(_t227)||(this.listenTo(_t227,"load",function(t,e){return _this151._fireEvents(e);}),this._observedElements.add(_t227));}}catch(err){_didIteratorError275=true;_iteratorError275=err;}finally{try{if(!_iteratorNormalCompletion275&&_iterator275["return"]!=null){_iterator275["return"]();}}finally{if(_didIteratorError275){throw _iteratorError275;}}}var _iteratorNormalCompletion276=true;var _didIteratorError276=false;var _iteratorError276=undefined;try{for(var _iterator276=this._observedElements[Symbol.iterator](),_step276;!(_iteratorNormalCompletion276=(_step276=_iterator276.next()).done);_iteratorNormalCompletion276=true){var _e217=_step276.value;t.contains(_e217)||(this.stopListening(_e217),this._observedElements["delete"](_e217));}}catch(err){_didIteratorError276=true;_iteratorError276=err;}finally{try{if(!_iteratorNormalCompletion276&&_iterator276["return"]!=null){_iterator276["return"]();}}finally{if(_didIteratorError276){throw _iteratorError276;}}}}}},{key:"_fireEvents",value:function _fireEvents(t){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",t));}},{key:"destroy",value:function destroy(){this._observedElements.clear(),_get(_getPrototypeOf(Hh.prototype),"destroy",this).call(this);}}]);return Hh;}(ur);function qh(t){return function(n){n.on("attribute:".concat(t,":image"),e);};function e(t,e,n){if(!n.consumable.consume(e.item,t.name))return;var i=n.writer,o=n.mapper.toViewElement(e.item).getChild(0);null!==e.attributeNewValue?i.setAttribute(e.attributeKey,e.attributeNewValue,o):i.removeAttribute(e.attributeKey,o);}}var Wh=/*#__PURE__*/function(){function Wh(){_classCallCheck(this,Wh);this._stack=[];}_createClass(Wh,[{key:"add",value:function add(t,e){var n=this._stack,i=n[0];this._insertDescriptor(t);var o=n[0];i===o||Yh(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:e});}},{key:"remove",value:function remove(t,e){var n=this._stack,i=n[0];this._removeDescriptor(t);var o=n[0];i===o||Yh(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:e});}},{key:"_insertDescriptor",value:function _insertDescriptor(t){var e=this._stack,n=e.findIndex(function(e){return e.id===t.id;});if(Yh(t,e[n]))return;n>-1&&e.splice(n,1);var i=0;for(;e[i]&&$h(e[i],t);){i++;}e.splice(i,0,t);}},{key:"_removeDescriptor",value:function _removeDescriptor(t){var e=this._stack,n=e.findIndex(function(e){return e.id===t;});n>-1&&e.splice(n,1);}}]);return Wh;}();function Yh(t,e){return t&&e&&t.priority==e.priority&&Gh(t.classes)==Gh(e.classes);}function $h(t,e){return t.priority>e.priority||!(t.priority<e.priority)&&Gh(t.classes)>Gh(e.classes);}function Gh(t){return Array.isArray(t)?t.sort().join(","):t;}ci(Wh,ei);var Qh='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';var Kh="ck-widget",Jh="ck-widget_selected";function Zh(t){return!!t.is("element")&&!!t.getCustomProperty("widget");}function Xh(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return mo.isEdge||e.setAttribute("contenteditable","false",t),e.addClass(Kh,t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=iu,n.label&&function(t,e,n){n.setCustomProperty("widgetLabel",e,t);}(t,n.label,e),n.hasSelectionHandler&&function(t,e){var n=e.createUIElement("div",{"class":"ck ck-widget__selection-handler"},function(t){var e=this.toDomElement(t),n=new Hd();return n.set("content",Qh),n.render(),e.appendChild(n.element),e;});e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handler"],t);}(t,e),function(t,e,n,i){var o=new Wh();o.on("change:top",function(e,o){o.oldDescriptor&&i(t,o.oldDescriptor,o.writer),o.newDescriptor&&n(t,o.newDescriptor,o.writer);}),e.setCustomProperty("addHighlight",function(t,e,n){return o.add(e,n);},t),e.setCustomProperty("removeHighlight",function(t,e,n){return o.remove(e,n);},t);}(t,e,function(t,e,n){return n.addClass(i(e.classes),t);},function(t,e,n){return n.removeClass(i(e.classes),t);}),t;function i(t){return Array.isArray(t)?t:[t];}}function tu(t){var e=t.getCustomProperty("widgetLabel");return e?"function"==typeof e?e():e:"";}function eu(t,e){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),mo.isEdge||(e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",function(n,i,o){e.setAttribute("contenteditable",o?"false":"true",t);})),t.on("change:isFocused",function(n,i,o){o?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t);}),t;}function nu(t,e){var n=t.getSelectedElement();if(n&&e.schema.isBlock(n))return e.createPositionAfter(n);var i=t.getSelectedBlocks().next().value;if(i){if(i.isEmpty)return e.createPositionAt(i,0);var _n199=e.createPositionAfter(i);return t.focus.isTouching(_n199)?_n199:e.createPositionBefore(i);}return t.focus;}function iu(){return null;}function ou(t){var e=t.getSelectedElement();return e&&function(t){return!!t.getCustomProperty("image")&&Zh(t);}(e)?e:null;}function ru(t){return!!t&&t.is("image");}function su(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.createElement("image",n),o=nu(e.document.selection,e);e.insertContent(i,o),i.parent&&t.setSelection(i,"on");}function au(t){var e=t.schema,n=t.document.selection;return function(t,e,n){var i=function(t,e){var n=nu(t,e).parent;if(n.isEmpty&&!n.is("$root"))return n.parent;return n;}(t,n);return e.checkChild(i,"image");}(n,e,t)&&!function(t,e){var n=t.getSelectedElement();return n&&e.isObject(n);}(n,e)&&function(t){return _toConsumableArray(t.focus.getAncestors()).every(function(t){return!t.is("image");});}(n);}var cu=/*#__PURE__*/function(_ed9){_inherits(cu,_ed9);function cu(){_classCallCheck(this,cu);return _possibleConstructorReturn(this,_getPrototypeOf(cu).apply(this,arguments));}_createClass(cu,[{key:"refresh",value:function refresh(){this.isEnabled=au(this.editor.model);}},{key:"execute",value:function execute(t){var e=this.editor.model;e.change(function(n){var i=Array.isArray(t.source)?t.source:[t.source];var _iteratorNormalCompletion277=true;var _didIteratorError277=false;var _iteratorError277=undefined;try{for(var _iterator277=i[Symbol.iterator](),_step277;!(_iteratorNormalCompletion277=(_step277=_iterator277.next()).done);_iteratorNormalCompletion277=true){var _t228=_step277.value;su(n,e,{src:_t228});}}catch(err){_didIteratorError277=true;_iteratorError277=err;}finally{try{if(!_iteratorNormalCompletion277&&_iterator277["return"]!=null){_iterator277["return"]();}}finally{if(_didIteratorError277){throw _iteratorError277;}}}});}}]);return cu;}(ed);var lu=/*#__PURE__*/function(_Kl24){_inherits(lu,_Kl24);function lu(){_classCallCheck(this,lu);return _possibleConstructorReturn(this,_getPrototypeOf(lu).apply(this,arguments));}_createClass(lu,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,n=t.t,i=t.conversion;t.editing.view.addObserver(Hh),e.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),i["for"]("dataDowncast").elementToElement({model:"image",view:function view(t,e){return du(e);}}),i["for"]("editingDowncast").elementToElement({model:"image",view:function view(t,e){return function(t,e,n){return e.setCustomProperty("image",!0,t),Xh(t,e,{label:function label(){var e=t.getChild(0).getAttribute("alt");return e?"".concat(e," ").concat(n):n;}});}(du(e),e,n("j"));}}),i["for"]("downcast").add(qh("src")).add(qh("alt")).add(function(){return function(e){e.on("attribute:srcset:image",t);};function t(t,e,n){if(!n.consumable.consume(e.item,t.name))return;var i=n.writer,o=n.mapper.toViewElement(e.item).getChild(0);if(null===e.attributeNewValue){var _t229=e.attributeOldValue;_t229.data&&(i.removeAttribute("srcset",o),i.removeAttribute("sizes",o),_t229.width&&i.removeAttribute("width",o));}else{var _t230=e.attributeNewValue;_t230.data&&(i.setAttribute("srcset",_t230.data,o),i.setAttribute("sizes","100vw",o),_t230.width&&i.setAttribute("width",_t230.width,o));}}}()),i["for"]("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:function model(t,e){return e.createElement("image",{src:t.getAttribute("src")});}}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function value(t){var e={data:t.getAttribute("srcset")};return t.hasAttribute("width")&&(e.width=t.getAttribute("width")),e;}}}).add(function(){return function(e){e.on("element:figure",t);};function t(t,e,n){if(!n.consumable.test(e.viewItem,{name:!0,classes:"image"}))return;var i=Array.from(e.viewItem.getChildren()).find(function(t){return t.is("img");});if(!i||!i.hasAttribute("src")||!n.consumable.test(i,{name:!0}))return;var o=n.convertItem(i,e.modelCursor),r=vh(o.modelRange.getItems());r&&(n.convertChildren(e.viewItem,n.writer.createPositionAt(r,0)),e.modelRange=o.modelRange,e.modelCursor=o.modelCursor);}}()),t.commands.add("imageInsert",new cu(t));}}]);return lu;}(Kl);function du(t){var e=t.createEmptyElement("img"),n=t.createContainerElement("figure",{"class":"image"});return t.insert(t.createPositionAt(n,0),e),n;}var hu=/*#__PURE__*/function(_ts6){_inherits(hu,_ts6);function hu(t){var _this152;_classCallCheck(this,hu);_this152=_possibleConstructorReturn(this,_getPrototypeOf(hu).call(this,t)),_this152.domEventType="mousedown";return _this152;}_createClass(hu,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return hu;}(ts);n(36);var uu=ko("Ctrl+A");var fu=/*#__PURE__*/function(_Kl25){_inherits(fu,_Kl25);function fu(){_classCallCheck(this,fu);return _possibleConstructorReturn(this,_getPrototypeOf(fu).apply(this,arguments));}_createClass(fu,[{key:"init",value:function init(){var _this153=this;var t=this.editor.editing.view,e=t.document;this._previouslySelected=new Set(),this.editor.editing.downcastDispatcher.on("selection",function(t,e,n){_this153._clearPreviouslySelectedWidgets(n.writer);var i=n.writer,o=i.document.selection,r=o.getSelectedElement();var s=null;var _iteratorNormalCompletion278=true;var _didIteratorError278=false;var _iteratorError278=undefined;try{for(var _iterator278=o.getRanges()[Symbol.iterator](),_step278;!(_iteratorNormalCompletion278=(_step278=_iterator278.next()).done);_iteratorNormalCompletion278=true){var _t231=_step278.value;var _iteratorNormalCompletion279=true;var _didIteratorError279=false;var _iteratorError279=undefined;try{for(var _iterator279=_t231[Symbol.iterator](),_step279;!(_iteratorNormalCompletion279=(_step279=_iterator279.next()).done);_iteratorNormalCompletion279=true){var _e218=_step279.value;var _t232=_e218.item;Zh(_t232)&&!mu(_t232,s)&&(i.addClass(Jh,_t232),_this153._previouslySelected.add(_t232),s=_t232,_t232==r&&i.setSelection(o.getRanges(),{fake:!0,label:tu(r)}));}}catch(err){_didIteratorError279=true;_iteratorError279=err;}finally{try{if(!_iteratorNormalCompletion279&&_iterator279["return"]!=null){_iterator279["return"]();}}finally{if(_didIteratorError279){throw _iteratorError279;}}}}}catch(err){_didIteratorError278=true;_iteratorError278=err;}finally{try{if(!_iteratorNormalCompletion278&&_iterator278["return"]!=null){_iterator278["return"]();}}finally{if(_didIteratorError278){throw _iteratorError278;}}}},{priority:"low"}),t.addObserver(hu),this.listenTo(e,"mousedown",function(){return _this153._onMousedown.apply(_this153,arguments);}),this.listenTo(e,"keydown",function(){return _this153._onKeydown.apply(_this153,arguments);},{priority:"high"}),this.listenTo(e,"delete",function(t,e){_this153._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop());},{priority:"high"});}},{key:"_onMousedown",value:function _onMousedown(t,e){var n=this.editor,i=n.editing.view,o=i.document;var r=e.target;if(function(t){for(;t;){if(t.is("editableElement")&&!t.is("rootElement"))return!0;if(Zh(t))return!1;t=t.parent;}return!1;}(r)){if(mo.isSafari&&e.domEvent.detail>=3){var _t233=n.editing.mapper.toModelElement(r);this.editor.model.change(function(n){e.preventDefault(),n.setSelection(_t233,"in");});}return;}if(!Zh(r)&&!(r=r.findAncestor(Zh)))return;e.preventDefault(),o.isFocused||i.focus();var s=n.editing.mapper.toModelElement(r);this._setSelectionOverElement(s);}},{key:"_onKeydown",value:function _onKeydown(t,e){var n=e.keyCode,i=n==bo.arrowdown||n==bo.arrowright;var o=!1;!function(t){return t==bo.arrowright||t==bo.arrowleft||t==bo.arrowup||t==bo.arrowdown;}(n)?!function(t){return wo(t)==uu;}(e)?n===bo.enter&&(o=this._handleEnterKey(e.shiftKey)):o=this._selectAllNestedEditableContent()||this._selectAllContent():o=this._handleArrowKeys(i),o&&(e.preventDefault(),t.stop());}},{key:"_handleDelete",value:function _handleDelete(t){var _this154=this;if(this.editor.isReadOnly)return;var e=this.editor.model.document.selection;if(!e.isCollapsed)return;var n=this._getObjectElementNextToSelection(t);return n?(this.editor.model.change(function(t){var i=e.anchor.parent;for(;i.isEmpty;){var _e219=i;i=_e219.parent,t.remove(_e219);}_this154._setSelectionOverElement(n);}),!0):void 0;}},{key:"_handleArrowKeys",value:function _handleArrowKeys(t){var e=this.editor.model,n=e.schema,i=e.document.selection,o=i.getSelectedElement();if(o&&n.isObject(o)){var _o78=t?i.getLastPosition():i.getFirstPosition(),_r37=n.getNearestSelectionRange(_o78,t?"forward":"backward");return _r37&&e.change(function(t){t.setSelection(_r37);}),!0;}if(!i.isCollapsed)return;var r=this._getObjectElementNextToSelection(t);return r&&n.isObject(r)?(this._setSelectionOverElement(r),!0):void 0;}},{key:"_handleEnterKey",value:function _handleEnterKey(t){var e=this.editor.model,n=e.document.selection.getSelectedElement();if(function(t,e){return t&&e.isObject(t)&&!e.isInline(t);}(n,e.schema))return e.change(function(i){var o=i.createPositionAt(n,t?"before":"after");var r=i.createElement("paragraph");if(e.schema.isBlock(n.parent)){var _t234=e.schema.findAllowedParent(o,r);o=i.split(o,_t234).position;}i.insert(r,o),i.setSelection(r,"in");}),!0;}},{key:"_selectAllNestedEditableContent",value:function _selectAllNestedEditableContent(){var t=this.editor.model,e=t.document.selection,n=t.schema.getLimitElement(e);return e.getFirstRange().root!=n&&(t.change(function(t){t.setSelection(t.createRangeIn(n));}),!0);}},{key:"_selectAllContent",value:function _selectAllContent(){var t=this.editor.model,e=this.editor.editing,n=e.view.document.selection.getSelectedElement();if(n&&Zh(n)){var _i165=e.mapper.toModelElement(n.parent);return t.change(function(t){t.setSelection(t.createRangeIn(_i165));}),!0;}return!1;}},{key:"_setSelectionOverElement",value:function _setSelectionOverElement(t){this.editor.model.change(function(e){e.setSelection(e.createRangeOn(t));});}},{key:"_getObjectElementNextToSelection",value:function _getObjectElementNextToSelection(t){var e=this.editor.model,n=e.schema,i=e.document.selection,o=e.createSelection(i);e.modifySelection(o,{direction:t?"forward":"backward"});var r=t?o.focus.nodeBefore:o.focus.nodeAfter;return r&&n.isObject(r)?r:null;}},{key:"_clearPreviouslySelectedWidgets",value:function _clearPreviouslySelectedWidgets(t){var _iteratorNormalCompletion280=true;var _didIteratorError280=false;var _iteratorError280=undefined;try{for(var _iterator280=this._previouslySelected[Symbol.iterator](),_step280;!(_iteratorNormalCompletion280=(_step280=_iterator280.next()).done);_iteratorNormalCompletion280=true){var _e220=_step280.value;t.removeClass(Jh,_e220);}}catch(err){_didIteratorError280=true;_iteratorError280=err;}finally{try{if(!_iteratorNormalCompletion280&&_iterator280["return"]!=null){_iterator280["return"]();}}finally{if(_didIteratorError280){throw _iteratorError280;}}}this._previouslySelected.clear();}}],[{key:"pluginName",get:function get(){return"Widget";}}]);return fu;}(Kl);function mu(t,e){return!!e&&Array.from(t.getAncestors()).includes(e);}var gu=/*#__PURE__*/function(_ed10){_inherits(gu,_ed10);function gu(){_classCallCheck(this,gu);return _possibleConstructorReturn(this,_getPrototypeOf(gu).apply(this,arguments));}_createClass(gu,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getSelectedElement();this.isEnabled=ru(t),ru(t)&&t.hasAttribute("alt")?this.value=t.getAttribute("alt"):this.value=!1;}},{key:"execute",value:function execute(t){var e=this.editor.model,n=e.document.selection.getSelectedElement();e.change(function(e){e.setAttribute("alt",t.newValue,n);});}}]);return gu;}(ed);var pu=/*#__PURE__*/function(_Kl26){_inherits(pu,_Kl26);function pu(){_classCallCheck(this,pu);return _possibleConstructorReturn(this,_getPrototypeOf(pu).apply(this,arguments));}_createClass(pu,[{key:"init",value:function init(){this.editor.commands.add("imageTextAlternative",new gu(this.editor));}}]);return pu;}(Kl);function bu(_ref24){var t=_ref24.emitter,e=_ref24.activator,n=_ref24.callback,i=_ref24.contextElements;t.listenTo(document,"mousedown",function(t,_ref25){var o=_ref25.target;if(e()){var _iteratorNormalCompletion281=true;var _didIteratorError281=false;var _iteratorError281=undefined;try{for(var _iterator281=i[Symbol.iterator](),_step281;!(_iteratorNormalCompletion281=(_step281=_iterator281.next()).done);_iteratorNormalCompletion281=true){var _t235=_step281.value;if(_t235.contains(o))return;}}catch(err){_didIteratorError281=true;_iteratorError281=err;}finally{try{if(!_iteratorNormalCompletion281&&_iterator281["return"]!=null){_iterator281["return"]();}}finally{if(_didIteratorError281){throw _iteratorError281;}}}n();}});}n(38);var wu=/*#__PURE__*/function(_Dl10){_inherits(wu,_Dl10);function wu(t,e){var _this155;_classCallCheck(this,wu);_this155=_possibleConstructorReturn(this,_getPrototypeOf(wu).call(this,t));var n="ck-input-".concat(Jn()),i="ck-status-".concat(Jn());_this155.set("label"),_this155.set("value"),_this155.set("isReadOnly",!1),_this155.set("errorText",null),_this155.set("infoText",null),_this155.labelView=_this155._createLabelView(n),_this155.inputView=_this155._createInputView(e,n,i),_this155.statusView=_this155._createStatusView(i),_this155.bind("_statusText").to(_assertThisInitialized(_this155),"errorText",_assertThisInitialized(_this155),"infoText",function(t,e){return t||e;});var o=_this155.bindTemplate;_this155.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-input",o["if"]("isReadOnly","ck-disabled")]},children:[_this155.labelView,_this155.inputView,_this155.statusView]});return _this155;}_createClass(wu,[{key:"_createLabelView",value:function _createLabelView(t){var e=new jl(this.locale);return e["for"]=t,e.bind("text").to(this,"label"),e;}},{key:"_createInputView",value:function _createInputView(t,e,n){var _this156=this;var i=new t(this.locale,n);return i.id=e,i.ariaDescribedById=n,i.bind("value").to(this),i.bind("isReadOnly").to(this),i.bind("hasError").to(this,"errorText",function(t){return!!t;}),i.on("input",function(){_this156.errorText=null;}),i;}},{key:"_createStatusView",value:function _createStatusView(t){var e=new Dl(this.locale),n=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-input__status",n["if"]("errorText","ck-labeled-input__status_error"),n["if"]("_statusText","ck-hidden",function(t){return!t;})],id:t,role:n["if"]("errorText","alert")},children:[{text:n.to("_statusText")}]}),e;}},{key:"select",value:function select(){this.inputView.select();}},{key:"focus",value:function focus(){this.inputView.focus();}}]);return wu;}(Dl);n(40);var ku=/*#__PURE__*/function(_Dl11){_inherits(ku,_Dl11);function ku(t){var _this157;_classCallCheck(this,ku);_this157=_possibleConstructorReturn(this,_getPrototypeOf(ku).call(this,t)),_this157.set("value"),_this157.set("id"),_this157.set("placeholder"),_this157.set("isReadOnly",!1),_this157.set("hasError",!1),_this157.set("ariaDescribedById");var e=_this157.bindTemplate;_this157.setTemplate({tag:"input",attributes:{type:"text","class":["ck","ck-input","ck-input-text",e["if"]("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),"aria-invalid":e["if"]("hasError",!0),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to("input")}});return _this157;}_createClass(ku,[{key:"render",value:function render(){var _this158=this;_get(_getPrototypeOf(ku.prototype),"render",this).call(this);var t=function t(_t236){_this158.element.value=_t236||0===_t236?_t236:"";};t(this.value),this.on("change:value",function(e,n,i){t(i);});}},{key:"select",value:function select(){this.element.select();}},{key:"focus",value:function focus(){this.element.focus();}}]);return ku;}(Dl);function _u(_ref26){var t=_ref26.view;t.listenTo(t.element,"submit",function(e,n){n.preventDefault(),t.fire("submit");},{useCapture:!0});}var vu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',yu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';n(42);var xu=/*#__PURE__*/function(_Dl12){_inherits(xu,_Dl12);function xu(t){var _this159;_classCallCheck(this,xu);_this159=_possibleConstructorReturn(this,_getPrototypeOf(xu).call(this,t));var e=_this159.locale.t;_this159.focusTracker=new sl(),_this159.keystrokes=new Jc(),_this159.labeledInput=_this159._createLabeledInputView(),_this159.saveButtonView=_this159._createButton(e("bd"),vu,"ck-button-save"),_this159.saveButtonView.type="submit",_this159.cancelButtonView=_this159._createButton(e("be"),yu,"ck-button-cancel","cancel"),_this159._focusables=new gl(),_this159._focusCycler=new ql({focusables:_this159._focusables,focusTracker:_this159.focusTracker,keystrokeHandler:_this159.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this159.setTemplate({tag:"form",attributes:{"class":["ck","ck-text-alternative-form"],tabindex:"-1"},children:[_this159.labeledInput,_this159.saveButtonView,_this159.cancelButtonView]});return _this159;}_createClass(xu,[{key:"render",value:function render(){var _this160=this;_get(_getPrototypeOf(xu.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element),_u({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(t){_this160._focusables.add(t),_this160.focusTracker.add(t.element);});}},{key:"_createButton",value:function _createButton(t,e,n,i){var o=new Wd(this.locale);return o.set({label:t,icon:e,tooltip:!0}),o.extendTemplate({attributes:{"class":n}}),i&&o.delegate("execute").to(this,i),o;}},{key:"_createLabeledInputView",value:function _createLabeledInputView(){var t=this.locale.t,e=new wu(this.locale,ku);return e.label=t("ca"),e.inputView.placeholder=t("ca"),e;}}]);return xu;}(Dl);function Au(_ref27){var t=_ref27.element,e=_ref27.target,n=_ref27.positions,i=_ref27.limiter,o=_ref27.fitInViewport;W(e)&&(e=e()),W(i)&&(i=i());var r=function(t){for(;t&&"html"!=t.tagName.toLowerCase();){if("static"!=nr.window.getComputedStyle(t).position)return t;t=t.parentElement;}return null;}(t.parentElement),s=new As(t),a=new As(e);var c,l;if(i||o){var _t237=i&&new As(i).getVisible(),_e221=o&&new As(nr.window);var _ref28=function(t,e,n,i,o){var r,s,a=0,c=0;var l=n.getArea();return t.some(function(t){var _Tu=Tu(t,e,n),_Tu2=_slicedToArray(_Tu,2),d=_Tu2[0],h=_Tu2[1];var u,f;if(i)if(o){var _t238=i.getIntersection(o);u=_t238?_t238.getIntersectionArea(h):0;}else u=i.getIntersectionArea(h);function m(){c=f,a=u,r=h,s=d;}return o&&(f=o.getIntersectionArea(h)),o&&!i?f>c&&m():!o&&i?u>a&&m():f>c&&u>=a?m():f>=c&&u>a&&m(),u===l;}),r?[s,r]:null;}(n,a,s,_t237,_e221)||Tu(n[0],a,s);var _ref29=_slicedToArray(_ref28,2);l=_ref29[0];c=_ref29[1];}else{var _Tu3=Tu(n[0],a,s);var _Tu4=_slicedToArray(_Tu3,2);l=_Tu4[0];c=_Tu4[1];}var _Cu=Cu(c),d=_Cu.left,h=_Cu.top;if(r){var _t239=Cu(new As(r)),_e222=ys(r);d-=_t239.left,h-=_t239.top,d+=r.scrollLeft,h+=r.scrollTop,d-=_e222.left,h-=_e222.top;}return{left:d,top:h,name:l};}function Tu(t,e,n){var _t240=t(e,n),i=_t240.left,o=_t240.top,r=_t240.name;return[r,n.clone().moveTo(i,o)];}function Cu(_ref30){var t=_ref30.left,e=_ref30.top;var _nr$window2=nr.window,n=_nr$window2.scrollX,i=_nr$window2.scrollY;return{left:t+n,top:e+i};}n(44);var Pu=Fl("px"),Su=nr.document.body;var Mu=/*#__PURE__*/function(_Dl13){_inherits(Mu,_Dl13);function Mu(t){var _this161;_classCallCheck(this,Mu);_this161=_possibleConstructorReturn(this,_getPrototypeOf(Mu).call(this,t));var e=_this161.bindTemplate;_this161.set("top",0),_this161.set("left",0),_this161.set("position","arrow_nw"),_this161.set("isVisible",!1),_this161.set("withArrow",!0),_this161.set("class"),_this161.content=_this161.createCollection(),_this161.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-panel",e.to("position",function(t){return"ck-balloon-panel_".concat(t);}),e["if"]("isVisible","ck-balloon-panel_visible"),e["if"]("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",Pu),left:e.to("left",Pu)}},children:_this161.content});return _this161;}_createClass(Mu,[{key:"show",value:function show(){this.isVisible=!0;}},{key:"hide",value:function hide(){this.isVisible=!1;}},{key:"attachTo",value:function attachTo(t){this.show();var e=Mu.defaultPositions,n=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthWest,e.northArrowSouthEast],limiter:Su,fitInViewport:!0},t),i=Mu._getOptimalPosition(n),o=parseInt(i.left),r=parseInt(i.top),s=i.name;Object.assign(this,{top:r,left:o,position:s});}},{key:"pin",value:function pin(t){var _this162=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){_this162.isVisible?_this162._startPinning(t):_this162._stopPinning();},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback);}},{key:"unpin",value:function unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide());}},{key:"_startPinning",value:function _startPinning(t){var _this163=this;this.attachTo(t);var e=Eu(t.target),n=t.limiter?Eu(t.limiter):Su;this.listenTo(nr.document,"scroll",function(i,o){var r=o.target,s=e&&r.contains(e),a=n&&r.contains(n);!s&&!a&&e&&n||_this163.attachTo(t);},{useCapture:!0}),this.listenTo(nr.window,"resize",function(){_this163.attachTo(t);});}},{key:"_stopPinning",value:function _stopPinning(){this.stopListening(nr.document,"scroll"),this.stopListening(nr.window,"resize");}}]);return Mu;}(Dl);function Eu(t){return Wn(t)?t:vs(t)?t.commonAncestorContainer:"function"==typeof t?Eu(t()):null;}function Iu(t,e){return t.top-e.height-Mu.arrowVerticalOffset;}function Nu(t){return t.bottom+Mu.arrowVerticalOffset;}Mu.arrowHorizontalOffset=25,Mu.arrowVerticalOffset=10,Mu._getOptimalPosition=Au,Mu.defaultPositions={northArrowSouth:function northArrowSouth(t,e){return{top:Iu(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"};},northArrowSouthEast:function northArrowSouthEast(t,e){return{top:Iu(t,e),left:t.left+t.width/2-e.width+Mu.arrowHorizontalOffset,name:"arrow_se"};},northArrowSouthWest:function northArrowSouthWest(t,e){return{top:Iu(t,e),left:t.left+t.width/2-Mu.arrowHorizontalOffset,name:"arrow_sw"};},northWestArrowSouth:function northWestArrowSouth(t,e){return{top:Iu(t,e),left:t.left-e.width/2,name:"arrow_s"};},northWestArrowSouthWest:function northWestArrowSouthWest(t,e){return{top:Iu(t,e),left:t.left-Mu.arrowHorizontalOffset,name:"arrow_sw"};},northWestArrowSouthEast:function northWestArrowSouthEast(t,e){return{top:Iu(t,e),left:t.left-e.width+Mu.arrowHorizontalOffset,name:"arrow_se"};},northEastArrowSouth:function northEastArrowSouth(t,e){return{top:Iu(t,e),left:t.right-e.width/2,name:"arrow_s"};},northEastArrowSouthEast:function northEastArrowSouthEast(t,e){return{top:Iu(t,e),left:t.right-e.width+Mu.arrowHorizontalOffset,name:"arrow_se"};},northEastArrowSouthWest:function northEastArrowSouthWest(t,e){return{top:Iu(t,e),left:t.right-Mu.arrowHorizontalOffset,name:"arrow_sw"};},southArrowNorth:function southArrowNorth(t,e){return{top:Nu(t),left:t.left+t.width/2-e.width/2,name:"arrow_n"};},southArrowNorthEast:function southArrowNorthEast(t,e){return{top:Nu(t),left:t.left+t.width/2-e.width+Mu.arrowHorizontalOffset,name:"arrow_ne"};},southArrowNorthWest:function southArrowNorthWest(t,e){return{top:Nu(t),left:t.left+t.width/2-Mu.arrowHorizontalOffset,name:"arrow_nw"};},southWestArrowNorth:function southWestArrowNorth(t,e){return{top:Nu(t),left:t.left-e.width/2,name:"arrow_n"};},southWestArrowNorthWest:function southWestArrowNorthWest(t,e){return{top:Nu(t),left:t.left-Mu.arrowHorizontalOffset,name:"arrow_nw"};},southWestArrowNorthEast:function southWestArrowNorthEast(t,e){return{top:Nu(t),left:t.left-e.width+Mu.arrowHorizontalOffset,name:"arrow_ne"};},southEastArrowNorth:function southEastArrowNorth(t,e){return{top:Nu(t),left:t.right-e.width/2,name:"arrow_n"};},southEastArrowNorthEast:function southEastArrowNorthEast(t,e){return{top:Nu(t),left:t.right-e.width+Mu.arrowHorizontalOffset,name:"arrow_ne"};},southEastArrowNorthWest:function southEastArrowNorthWest(t,e){return{top:Nu(t),left:t.right-Mu.arrowHorizontalOffset,name:"arrow_nw"};}};var Ou='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z" /></svg>\n',Ru='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>\n';n(46),n(48);var Du=Fl("px");var Lu=/*#__PURE__*/function(_Kl27){_inherits(Lu,_Kl27);_createClass(Lu,null,[{key:"pluginName",get:function get(){return"ContextualBalloon";}}]);function Lu(t){var _this164;_classCallCheck(this,Lu);_this164=_possibleConstructorReturn(this,_getPrototypeOf(Lu).call(this,t)),_this164.positionLimiter=function(){var t=_this164.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null;},_this164.set("visibleView",null),_this164.view=new Mu(t.locale),t.ui.view.body.add(_this164.view),t.ui.focusTracker.add(_this164.view.element),_this164._viewToStack=new Map(),_this164._idToStack=new Map(),_this164.set("_numberOfStacks",0),_this164.set("_singleViewMode",!1),_this164._rotatorView=_this164._createRotatorView(),_this164._fakePanelsView=_this164._createFakePanelsView();return _this164;}_createClass(Lu,[{key:"hasView",value:function hasView(t){return Array.from(this._viewToStack.keys()).includes(t);}},{key:"add",value:function add(t){if(this.hasView(t.view))throw new Gn.b("contextualballoon-add-view-exist: Cannot add configuration of the same view twice.",[this,t]);var e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));var n=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),n.set(t.view,t),this._viewToStack.set(t.view,n),n===this._visibleStack&&this._showView(t);}},{key:"remove",value:function remove(t){if(!this.hasView(t))throw new Gn.b("contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.",[this,t]);var e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack["delete"](this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e["delete"](t),this._viewToStack["delete"](t);}},{key:"updatePosition",value:function updatePosition(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition();}},{key:"showStack",value:function showStack(t){this.visibleStack=t;var e=this._idToStack.get(t);if(!e)throw new Gn.b("contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop());}},{key:"_getStackId",value:function _getStackId(t){return Array.from(this._idToStack.entries()).find(function(e){return e[1]===t;})[0];}},{key:"_showNextStack",value:function _showNextStack(){var t=Array.from(this._idToStack.values());var e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]));}},{key:"_showPrevStack",value:function _showPrevStack(){var t=Array.from(this._idToStack.values());var e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]));}},{key:"_createRotatorView",value:function _createRotatorView(){var _this165=this;var t=new ju(this.editor.locale),e=this.editor.locale.t;return this.view.content.add(t),t.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(t,e){return!e&&t>1;}),t.on("change:isNavigationVisible",function(){return _this165.updatePosition();},{priority:"low"}),t.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(t,n){if(n<2)return"";var i=Array.from(_this165._idToStack.values()).indexOf(_this165._visibleStack)+1;return e("bp",[i,n]);}),t.buttonNextView.on("execute",function(){t.focusTracker.isFocused&&_this165.editor.editing.view.focus(),_this165._showNextStack();}),t.buttonPrevView.on("execute",function(){t.focusTracker.isFocused&&_this165.editor.editing.view.focus(),_this165._showPrevStack();}),t;}},{key:"_createFakePanelsView",value:function _createFakePanelsView(){var t=new Vu(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(t,e){return!e&&t>=2?Math.min(t-1,2):0;}),t.listenTo(this.view,"change:top",function(){return t.updatePosition();}),t.listenTo(this.view,"change:left",function(){return t.updatePosition();}),this.editor.ui.view.body.add(t),t;}},{key:"_showView",value:function _showView(_ref31){var t=_ref31.view,_ref31$balloonClassNa=_ref31.balloonClassName,e=_ref31$balloonClassNa===void 0?"":_ref31$balloonClassNa,_ref31$withArrow=_ref31.withArrow,n=_ref31$withArrow===void 0?!0:_ref31$withArrow,_ref31$singleViewMode=_ref31.singleViewMode,i=_ref31$singleViewMode===void 0?!1:_ref31$singleViewMode;this.view["class"]=e,this.view.withArrow=n,this._rotatorView.showView(t),this.visibleView=t,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),i&&(this._singleViewMode=!0);}},{key:"_getBalloonPosition",value:function _getBalloonPosition(){var t=Array.from(this._visibleStack.values()).pop().position;return t&&!t.limiter&&(t=Object.assign({},t,{limiter:this.positionLimiter})),t;}},{key:"_visibleStack",get:function get(){return this._viewToStack.get(this.visibleView);}}]);return Lu;}(Kl);var ju=/*#__PURE__*/function(_Dl14){_inherits(ju,_Dl14);function ju(t){var _this166;_classCallCheck(this,ju);_this166=_possibleConstructorReturn(this,_getPrototypeOf(ju).call(this,t));var e=t.t,n=_this166.bindTemplate;_this166.set("isNavigationVisible",!0),_this166.focusTracker=new sl(),_this166.buttonPrevView=_this166._createButtonView(e("bq"),Ou),_this166.buttonNextView=_this166._createButtonView(e("br"),Ru),_this166.content=_this166.createCollection(),_this166.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{"class":["ck-balloon-rotator__navigation",n.to("isNavigationVisible",function(t){return t?"":"ck-hidden";})]},children:[_this166.buttonPrevView,{tag:"span",attributes:{"class":["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},_this166.buttonNextView]},{tag:"div",attributes:{"class":"ck-balloon-rotator__content"},children:_this166.content}]});return _this166;}_createClass(ju,[{key:"render",value:function render(){_get(_getPrototypeOf(ju.prototype),"render",this).call(this),this.focusTracker.add(this.element);}},{key:"showView",value:function showView(t){this.hideView(),this.content.add(t);}},{key:"hideView",value:function hideView(){this.content.clear();}},{key:"_createButtonView",value:function _createButtonView(t,e){var n=new Wd(this.locale);return n.set({label:t,icon:e,tooltip:!0}),n;}}]);return ju;}(Dl);var Vu=/*#__PURE__*/function(_Dl15){_inherits(Vu,_Dl15);function Vu(t,e){var _this167;_classCallCheck(this,Vu);_this167=_possibleConstructorReturn(this,_getPrototypeOf(Vu).call(this,t));var n=_this167.bindTemplate;_this167.set("top",0),_this167.set("left",0),_this167.set("height",0),_this167.set("width",0),_this167.set("numberOfPanels",0),_this167.content=_this167.createCollection(),_this167._balloonPanelView=e,_this167.setTemplate({tag:"div",attributes:{"class":["ck-fake-panel",n.to("numberOfPanels",function(t){return t?"":"ck-hidden";})],style:{top:n.to("top",Du),left:n.to("left",Du),width:n.to("width",Du),height:n.to("height",Du)}},children:_this167.content}),_this167.on("change:numberOfPanels",function(t,e,n,i){n>i?_this167._addPanels(n-i):_this167._removePanels(i-n),_this167.updatePosition();});return _this167;}_createClass(Vu,[{key:"_addPanels",value:function _addPanels(t){for(;t--;){var _t241=new Dl();_t241.setTemplate({tag:"div"}),this.content.add(_t241),this.registerChild(_t241);}}},{key:"_removePanels",value:function _removePanels(t){for(;t--;){var _t242=this.content.last;this.content.remove(_t242),this.deregisterChild(_t242),_t242.destroy();}}},{key:"updatePosition",value:function updatePosition(){if(this.numberOfPanels){var _this$_balloonPanelVi=this._balloonPanelView,_t243=_this$_balloonPanelVi.top,_e223=_this$_balloonPanelVi.left,_ref32=new As(this._balloonPanelView.element),_n200=_ref32.width,_i166=_ref32.height;Object.assign(this,{top:_t243,left:_e223,width:_n200,height:_i166});}}}]);return Vu;}(Dl);var zu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>';function Bu(t){var e=t.editing.view,n=Mu.defaultPositions;return{target:e.domConverter.viewToDom(e.document.selection.getSelectedElement()),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]};}var Fu=/*#__PURE__*/function(_Kl28){_inherits(Fu,_Kl28);function Fu(){_classCallCheck(this,Fu);return _possibleConstructorReturn(this,_getPrototypeOf(Fu).apply(this,arguments));}_createClass(Fu,[{key:"init",value:function init(){this._createButton(),this._createForm();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Fu.prototype),"destroy",this).call(this),this._form.destroy();}},{key:"_createButton",value:function _createButton(){var _this168=this;var t=this.editor,e=t.t;t.ui.componentFactory.add("imageTextAlternative",function(n){var i=t.commands.get("imageTextAlternative"),o=new Wd(n);return o.set({label:e("bs"),icon:zu,tooltip:!0}),o.bind("isEnabled").to(i,"isEnabled"),_this168.listenTo(o,"execute",function(){return _this168._showForm();}),o;});}},{key:"_createForm",value:function _createForm(){var _this169=this;var t=this.editor,e=t.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new xu(t.locale),this._form.render(),this.listenTo(this._form,"submit",function(){t.execute("imageTextAlternative",{newValue:_this169._form.labeledInput.inputView.element.value}),_this169._hideForm(!0);}),this.listenTo(this._form,"cancel",function(){_this169._hideForm(!0);}),this._form.keystrokes.set("Esc",function(t,e){_this169._hideForm(!0),e();}),this.listenTo(t.ui,"update",function(){ou(e.selection)?_this169._isVisible&&function(t){var e=t.plugins.get("ContextualBalloon");if(ou(t.editing.view.document.selection)){var _n201=Bu(t);e.updatePosition(_n201);}}(t):_this169._hideForm(!0);}),bu({emitter:this._form,activator:function activator(){return _this169._isVisible;},contextElements:[this._balloon.view.element],callback:function callback(){return _this169._hideForm();}});}},{key:"_showForm",value:function _showForm(){if(this._isVisible)return;var t=this.editor,e=t.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._isInBalloon||this._balloon.add({view:this._form,position:Bu(t)}),n.value=n.inputView.element.value=e.value||"",this._form.labeledInput.select();}},{key:"_hideForm",value:function _hideForm(t){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),t&&this.editor.editing.view.focus());}},{key:"_isVisible",get:function get(){return this._balloon.visibleView===this._form;}},{key:"_isInBalloon",get:function get(){return this._balloon.hasView(this._form);}}],[{key:"requires",get:function get(){return[Lu];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeUI";}}]);return Fu;}(Kl);var Uu=/*#__PURE__*/function(_Kl29){_inherits(Uu,_Kl29);function Uu(){_classCallCheck(this,Uu);return _possibleConstructorReturn(this,_getPrototypeOf(Uu).apply(this,arguments));}_createClass(Uu,null,[{key:"requires",get:function get(){return[pu,Fu];}},{key:"pluginName",get:function get(){return"ImageTextAlternative";}}]);return Uu;}(Kl);n(50);var Hu=/*#__PURE__*/function(_Kl30){_inherits(Hu,_Kl30);function Hu(){_classCallCheck(this,Hu);return _possibleConstructorReturn(this,_getPrototypeOf(Hu).apply(this,arguments));}_createClass(Hu,null,[{key:"requires",get:function get(){return[lu,fu,Uu];}},{key:"pluginName",get:function get(){return"Image";}}]);return Hu;}(Kl);var qu=/*#__PURE__*/function(_Dl16){_inherits(qu,_Dl16);function qu(t){var _this170;_classCallCheck(this,qu);_this170=_possibleConstructorReturn(this,_getPrototypeOf(qu).call(this,t)),_this170.buttonView=new Wd(t),_this170._fileInputView=new Wu(t),_this170._fileInputView.bind("acceptedType").to(_assertThisInitialized(_this170)),_this170._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(_this170)),_this170._fileInputView.delegate("done").to(_assertThisInitialized(_this170)),_this170.setTemplate({tag:"span",attributes:{"class":"ck-file-dialog-button"},children:[_this170.buttonView,_this170._fileInputView]}),_this170.buttonView.on("execute",function(){_this170._fileInputView.open();});return _this170;}_createClass(qu,[{key:"focus",value:function focus(){this.buttonView.focus();}}]);return qu;}(Dl);var Wu=/*#__PURE__*/function(_Dl17){_inherits(Wu,_Dl17);function Wu(t){var _this171;_classCallCheck(this,Wu);_this171=_possibleConstructorReturn(this,_getPrototypeOf(Wu).call(this,t)),_this171.set("acceptedType"),_this171.set("allowMultipleFiles",!1);var e=_this171.bindTemplate;_this171.setTemplate({tag:"input",attributes:{"class":["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(function(){_this171.element&&_this171.element.files&&_this171.element.files.length&&_this171.fire("done",_this171.element.files),_this171.element.value="";})}});return _this171;}_createClass(Wu,[{key:"open",value:function open(){this.element.click();}}]);return Wu;}(Dl);var Yu='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';function $u(t){return /^image\/(jpeg|png|gif|bmp)$/.test(t.type);}function Gu(t){return new Promise(function(e,n){var i=t.getAttribute("src");fetch(i).then(function(t){return t.blob();}).then(function(t){var o=function(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg";}(t,i),r=function(t,e,n){try{return new File([t],e,{type:n});}catch(t){return null;}}(t,"image.".concat(o.replace("image/","")),o);r?e(r):n();})["catch"](n);});}var Qu=/*#__PURE__*/function(_Kl31){_inherits(Qu,_Kl31);function Qu(){_classCallCheck(this,Qu);return _possibleConstructorReturn(this,_getPrototypeOf(Qu).apply(this,arguments));}_createClass(Qu,[{key:"init",value:function init(){var t=this.editor,e=t.t;t.ui.componentFactory.add("imageUpload",function(n){var i=new qu(n),o=t.commands.get("imageUpload");return i.set({acceptedType:"image/*",allowMultipleFiles:!0}),i.buttonView.set({label:e("p"),icon:Yu,tooltip:!0}),i.buttonView.bind("isEnabled").to(o),i.on("done",function(e,n){var i=Array.from(n).filter($u);i.length&&t.execute("imageUpload",{file:i});}),i;});}}]);return Qu;}(Kl);var Ku='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>';n(52),n(54),n(56);var Ju=/*#__PURE__*/function(_Kl32){_inherits(Ju,_Kl32);function Ju(t){var _this172;_classCallCheck(this,Ju);_this172=_possibleConstructorReturn(this,_getPrototypeOf(Ju).call(this,t)),_this172.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent(Ku);return _this172;}_createClass(Ju,[{key:"init",value:function init(){var _this173=this;this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",function(){return _this173.uploadStatusChange.apply(_this173,arguments);});}},{key:"uploadStatusChange",value:function uploadStatusChange(t,e,n){var i=this.editor,o=e.item,r=o.getAttribute("uploadId");if(!n.consumable.consume(e.item,t.name))return;var s=i.plugins.get(Zd),a=r?e.attributeNewValue:null,c=this.placeholder,l=i.editing.mapper.toViewElement(o),d=n.writer;if("reading"==a)return Zu(l,d),void Xu(c,l,d);if("uploading"==a){var _t244=s.loaders.get(r);return Zu(l,d),void(_t244?(tf(l,d),function(t,e,n,i){var o=function(t){var e=t.createUIElement("div",{"class":"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e;}(e);e.insert(e.createPositionAt(t,"end"),o),n.on("change:uploadedPercent",function(t,e,n){i.change(function(t){t.setStyle("width",n+"%",o);});});}(l,d,_t244,i.editing.view),function(t,e,n){if(n.data){var _i167=t.getChild(0);e.setAttribute("src",n.data,_i167);}}(l,d,_t244)):Xu(c,l,d));}"complete"==a&&s.loaders.get(r)&&!mo.isEdge&&function(t,e,n){var i=e.createUIElement("div",{"class":"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),i),setTimeout(function(){n.change(function(t){return t.remove(t.createRangeOn(i));});},3e3);}(l,d,i.editing.view),function(t,e){nf(t,e,"progressBar");}(l,d),tf(l,d),function(t,e){e.removeClass("ck-appear",t);}(l,d);}}]);return Ju;}(Kl);function Zu(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t);}function Xu(t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);var i=e.getChild(0);i.getAttribute("src")!==t&&n.setAttribute("src",t,i),ef(e,"placeholder")||n.insert(n.createPositionAfter(i),function(t){var e=t.createUIElement("div",{"class":"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e;}(n));}function tf(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),nf(t,e,"placeholder");}function ef(t,e){var _iteratorNormalCompletion282=true;var _didIteratorError282=false;var _iteratorError282=undefined;try{for(var _iterator282=t.getChildren()[Symbol.iterator](),_step282;!(_iteratorNormalCompletion282=(_step282=_iterator282.next()).done);_iteratorNormalCompletion282=true){var _n202=_step282.value;if(_n202.getCustomProperty(e))return _n202;}}catch(err){_didIteratorError282=true;_iteratorError282=err;}finally{try{if(!_iteratorNormalCompletion282&&_iterator282["return"]!=null){_iterator282["return"]();}}finally{if(_didIteratorError282){throw _iteratorError282;}}}}function nf(t,e,n){var i=ef(t,n);i&&e.remove(e.createRangeOn(i));}var of=/*#__PURE__*/function(){function of(){_classCallCheck(this,of);}_createClass(of,[{key:"createDocumentFragment",value:function createDocumentFragment(t){return new Ao(t);}},{key:"createElement",value:function createElement(t,e,n){return new ki(t,e,n);}},{key:"createText",value:function createText(t){return new fi(t);}},{key:"clone",value:function clone(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return t._clone(e);}},{key:"appendChild",value:function appendChild(t,e){return e._appendChild(t);}},{key:"insertChild",value:function insertChild(t,e,n){return n._insertChild(t,e);}},{key:"removeChildren",value:function removeChildren(t,e,n){return n._removeChildren(t,e);}},{key:"remove",value:function remove(t){var e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[];}},{key:"replace",value:function replace(t,e){var n=t.parent;if(n){var _i168=n.getChildIndex(t);return this.removeChildren(_i168,1,n),this.insertChild(_i168,e,n),!0;}return!1;}},{key:"unwrapElement",value:function unwrapElement(t){var e=t.parent;if(e){var _n203=e.getChildIndex(t);this.remove(t),this.insertChild(_n203,t.getChildren(),e);}}},{key:"rename",value:function rename(t,e){var n=new ki(t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null;}},{key:"setAttribute",value:function setAttribute(t,e,n){n._setAttribute(t,e);}},{key:"removeAttribute",value:function removeAttribute(t,e){e._removeAttribute(t);}},{key:"addClass",value:function addClass(t,e){e._addClass(t);}},{key:"removeClass",value:function removeClass(t,e){e._removeClass(t);}},{key:"setStyle",value:function setStyle(t,e,n){T(t)&&void 0===n&&(n=e),n._setStyle(t,e);}},{key:"removeStyle",value:function removeStyle(t,e){e._removeStyle(t);}},{key:"setCustomProperty",value:function setCustomProperty(t,e,n){n._setCustomProperty(t,e);}},{key:"removeCustomProperty",value:function removeCustomProperty(t,e){return e._removeCustomProperty(t);}},{key:"createPositionAt",value:function createPositionAt(t,e){return Zi._createAt(t,e);}},{key:"createPositionAfter",value:function createPositionAfter(t){return Zi._createAfter(t);}},{key:"createPositionBefore",value:function createPositionBefore(t){return Zi._createBefore(t);}},{key:"createRange",value:function createRange(t,e){return new Xi(t,e);}},{key:"createRangeOn",value:function createRangeOn(t){return Xi._createOn(t);}},{key:"createRangeIn",value:function createRangeIn(t){return Xi._createIn(t);}},{key:"createSelection",value:function createSelection(t,e,n){return new no(t,e,n);}}]);return of;}();var rf=/*#__PURE__*/function(_ed11){_inherits(rf,_ed11);function rf(){_classCallCheck(this,rf);return _possibleConstructorReturn(this,_getPrototypeOf(rf).apply(this,arguments));}_createClass(rf,[{key:"refresh",value:function refresh(){this.isEnabled=au(this.editor.model);}},{key:"execute",value:function execute(t){var e=this.editor,n=e.model,i=e.plugins.get(Zd);n.change(function(e){var o=Array.isArray(t.file)?t.file:[t.file];var _iteratorNormalCompletion283=true;var _didIteratorError283=false;var _iteratorError283=undefined;try{for(var _iterator283=o[Symbol.iterator](),_step283;!(_iteratorNormalCompletion283=(_step283=_iterator283.next()).done);_iteratorNormalCompletion283=true){var _t245=_step283.value;sf(e,n,i,_t245);}}catch(err){_didIteratorError283=true;_iteratorError283=err;}finally{try{if(!_iteratorNormalCompletion283&&_iterator283["return"]!=null){_iterator283["return"]();}}finally{if(_didIteratorError283){throw _iteratorError283;}}}});}}]);return rf;}(ed);function sf(t,e,n,i){var o=n.createLoader(i);o&&su(t,e,{uploadId:o.id});}var af=/*#__PURE__*/function(_Kl33){_inherits(af,_Kl33);function af(){_classCallCheck(this,af);return _possibleConstructorReturn(this,_getPrototypeOf(af).apply(this,arguments));}_createClass(af,[{key:"init",value:function init(){var _this174=this;var t=this.editor,e=t.model.document,n=t.model.schema,i=t.conversion,o=t.plugins.get(Zd);n.extend("image",{allowAttributes:["uploadId","uploadStatus"]}),t.commands.add("imageUpload",new rf(t)),i["for"]("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",function(e,n){if(function(t){return Array.from(t.types).includes("text/html")&&""!==t.getData("text/html");}(n.dataTransfer))return;var i=Array.from(n.dataTransfer.files).filter(function(t){return!!t&&$u(t);}),o=n.targetRanges.map(function(e){return t.editing.mapper.toModelRange(e);});t.model.change(function(n){n.setSelection(o),i.length&&(e.stop(),t.model.enqueueChange("default",function(){t.execute("imageUpload",{file:i});}));});}),t.plugins.has("Clipboard")&&this.listenTo(t.plugins.get("Clipboard"),"inputTransformation",function(e,n){var i=Array.from(t.editing.view.createRangeIn(n.content)).filter(function(t){return function(t){return!(!t.is("element","img")||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g));}(t.item)&&!t.item.getAttribute("uploadProcessed");}).map(function(t){return{promise:Gu(t.item),imageElement:t.item};});if(!i.length)return;var r=new of();var _iteratorNormalCompletion284=true;var _didIteratorError284=false;var _iteratorError284=undefined;try{for(var _iterator284=i[Symbol.iterator](),_step284;!(_iteratorNormalCompletion284=(_step284=_iterator284.next()).done);_iteratorNormalCompletion284=true){var _t246=_step284.value;r.setAttribute("uploadProcessed",!0,_t246.imageElement);var _e224=o.createLoader(_t246.promise);_e224&&(r.setAttribute("src","",_t246.imageElement),r.setAttribute("uploadId",_e224.id,_t246.imageElement));}}catch(err){_didIteratorError284=true;_iteratorError284=err;}finally{try{if(!_iteratorNormalCompletion284&&_iterator284["return"]!=null){_iterator284["return"]();}}finally{if(_didIteratorError284){throw _iteratorError284;}}}}),t.editing.view.document.on("dragover",function(t,e){e.preventDefault();}),e.on("change",function(){var n=e.differ.getChanges({includeChangesInGraveyard:!0});var _iteratorNormalCompletion285=true;var _didIteratorError285=false;var _iteratorError285=undefined;try{for(var _iterator285=n[Symbol.iterator](),_step285;!(_iteratorNormalCompletion285=(_step285=_iterator285.next()).done);_iteratorNormalCompletion285=true){var _e225=_step285.value;if("insert"==_e225.type&&"$text"!=_e225.name){var _n204=_e225.position.nodeAfter,_i169="$graveyard"==_e225.position.root.rootName;var _iteratorNormalCompletion286=true;var _didIteratorError286=false;var _iteratorError286=undefined;try{for(var _iterator286=cf(t,_n204)[Symbol.iterator](),_step286;!(_iteratorNormalCompletion286=(_step286=_iterator286.next()).done);_iteratorNormalCompletion286=true){var _e226=_step286.value;var _t247=_e226.getAttribute("uploadId");if(!_t247)continue;var _n205=o.loaders.get(_t247);_n205&&(_i169?_n205.abort():"idle"==_n205.status&&_this174._readAndUpload(_n205,_e226));}}catch(err){_didIteratorError286=true;_iteratorError286=err;}finally{try{if(!_iteratorNormalCompletion286&&_iterator286["return"]!=null){_iterator286["return"]();}}finally{if(_didIteratorError286){throw _iteratorError286;}}}}}}catch(err){_didIteratorError285=true;_iteratorError285=err;}finally{try{if(!_iteratorNormalCompletion285&&_iterator285["return"]!=null){_iterator285["return"]();}}finally{if(_didIteratorError285){throw _iteratorError285;}}}});}},{key:"_readAndUpload",value:function _readAndUpload(t,e){var _this175=this;var n=this.editor,i=n.model,o=n.locale.t,r=n.plugins.get(Zd),s=n.plugins.get(Ih);return i.enqueueChange("transparent",function(t){t.setAttribute("uploadStatus","reading",e);}),t.read().then(function(){var o=t.upload();if(mo.isSafari){var _t248=n.editing.mapper.toViewElement(e).getChild(0);n.editing.view.once("render",function(){if(!_t248.parent)return;var e=n.editing.view.domConverter.mapViewToDom(_t248.parent);if(!e)return;var i=e.style.display;e.style.display="none",e._ckHack=e.offsetHeight,e.style.display=i;});}return i.enqueueChange("transparent",function(t){t.setAttribute("uploadStatus","uploading",e);}),o;}).then(function(t){i.enqueueChange("transparent",function(n){n.setAttributes({uploadStatus:"complete",src:t["default"]},e),_this175._parseAndSetSrcsetAttributeOnImage(t,e,n);}),a();})["catch"](function(n){if("error"!==t.status&&"aborted"!==t.status)throw n;"error"==t.status&&n&&s.showWarning(n,{title:o("al"),namespace:"upload"}),a(),i.enqueueChange("transparent",function(t){t.remove(e);});});function a(){i.enqueueChange("transparent",function(t){t.removeAttribute("uploadId",e),t.removeAttribute("uploadStatus",e);}),r.destroyLoader(t);}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function _parseAndSetSrcsetAttributeOnImage(t,e,n){var i=0;var o=Object.keys(t).filter(function(t){var e=parseInt(t,10);if(!isNaN(e))return i=Math.max(i,e),!0;}).map(function(e){return"".concat(t[e]," ").concat(e,"w");}).join(", ");""!=o&&n.setAttribute("srcset",{data:o,width:i},e);}}],[{key:"requires",get:function get(){return[Zd,Ih];}}]);return af;}(Kl);function cf(t,e){return Array.from(t.model.createRangeOn(e)).filter(function(t){return t.item.is("image");}).map(function(t){return t.item;});}var lf=/*#__PURE__*/function(_Kl34){_inherits(lf,_Kl34);function lf(){_classCallCheck(this,lf);return _possibleConstructorReturn(this,_getPrototypeOf(lf).apply(this,arguments));}_createClass(lf,null,[{key:"pluginName",get:function get(){return"ImageUpload";}},{key:"requires",get:function get(){return[af,Qu,Ju];}}]);return lf;}(Kl);var df=/*#__PURE__*/function(_ed12){_inherits(df,_ed12);function df(){_classCallCheck(this,df);return _possibleConstructorReturn(this,_getPrototypeOf(df).apply(this,arguments));}_createClass(df,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=vh(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("paragraph"),this.isEnabled=!!e&&hf(e,t.schema);}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.document;e.change(function(i){var o=(t.selection||n.selection).getSelectedBlocks();var _iteratorNormalCompletion287=true;var _didIteratorError287=false;var _iteratorError287=undefined;try{for(var _iterator287=o[Symbol.iterator](),_step287;!(_iteratorNormalCompletion287=(_step287=_iterator287.next()).done);_iteratorNormalCompletion287=true){var _t249=_step287.value;!_t249.is("paragraph")&&hf(_t249,e.schema)&&i.rename(_t249,"paragraph");}}catch(err){_didIteratorError287=true;_iteratorError287=err;}finally{try{if(!_iteratorNormalCompletion287&&_iterator287["return"]!=null){_iterator287["return"]();}}finally{if(_didIteratorError287){throw _iteratorError287;}}}});}}]);return df;}(ed);function hf(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t);}var uf=/*#__PURE__*/function(_Kl35){_inherits(uf,_Kl35);function uf(){_classCallCheck(this,uf);return _possibleConstructorReturn(this,_getPrototypeOf(uf).apply(this,arguments));}_createClass(uf,[{key:"init",value:function init(){var _this176=this;var t=this.editor,e=t.model,n=t.data;t.commands.add("paragraph",new df(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion["for"]("upcast").elementToElement({model:function model(t,e){return uf.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null;},converterPriority:"low"}),n.upcastDispatcher.on("element",function(t,e,n){n.consumable.test(e.viewItem,{name:e.viewItem.name})&&mf(e.viewItem,e.modelCursor,n.schema)&&Object.assign(e,ff(e.viewItem,e.modelCursor,n));},{priority:"low"}),n.upcastDispatcher.on("text",function(t,e,n){e.modelRange||mf(e.viewItem,e.modelCursor,n.schema)&&Object.assign(e,ff(e.viewItem,e.modelCursor,n));},{priority:"lowest"}),e.document.registerPostFixer(function(t){return _this176._autoparagraphEmptyRoots(t);}),t.data.on("ready",function(){e.enqueueChange("transparent",function(t){return _this176._autoparagraphEmptyRoots(t);});},{priority:"lowest"});}},{key:"_autoparagraphEmptyRoots",value:function _autoparagraphEmptyRoots(t){var e=this.editor.model;var _iteratorNormalCompletion288=true;var _didIteratorError288=false;var _iteratorError288=undefined;try{for(var _iterator288=e.document.getRootNames()[Symbol.iterator](),_step288;!(_iteratorNormalCompletion288=(_step288=_iterator288.next()).done);_iteratorNormalCompletion288=true){var _n206=_step288.value;var _i170=e.document.getRoot(_n206);if(_i170.isEmpty&&"$graveyard"!=_i170.rootName&&e.schema.checkChild(_i170,"paragraph"))return t.insertElement("paragraph",_i170),!0;}}catch(err){_didIteratorError288=true;_iteratorError288=err;}finally{try{if(!_iteratorNormalCompletion288&&_iterator288["return"]!=null){_iterator288["return"]();}}finally{if(_didIteratorError288){throw _iteratorError288;}}}}}],[{key:"pluginName",get:function get(){return"Paragraph";}}]);return uf;}(Kl);function ff(t,e,n){var i=n.writer.createElement("paragraph");return n.writer.insert(i,e),n.convertItem(t,n.writer.createPositionAt(i,0));}function mf(t,e,n){var i=n.createContext(e);return!!n.checkChild(i,"paragraph")&&!!n.checkChild(i.push("paragraph"),t);}uf.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);var gf=/*#__PURE__*/function(_ed13){_inherits(gf,_ed13);function gf(t,e){var _this177;_classCallCheck(this,gf);_this177=_possibleConstructorReturn(this,_getPrototypeOf(gf).call(this,t)),_this177.modelElements=e;return _this177;}_createClass(gf,[{key:"refresh",value:function refresh(){var _this178=this;var t=vh(this.editor.model.document.selection.getSelectedBlocks());this.value=!!t&&this.modelElements.includes(t.name)&&t.name,this.isEnabled=!!t&&this.modelElements.some(function(e){return pf(t,e,_this178.editor.model.schema);});}},{key:"execute",value:function execute(t){var e=this.editor.model,n=e.document,i=t.value;e.change(function(t){var o=Array.from(n.selection.getSelectedBlocks()).filter(function(t){return pf(t,i,e.schema);});var _iteratorNormalCompletion289=true;var _didIteratorError289=false;var _iteratorError289=undefined;try{for(var _iterator289=o[Symbol.iterator](),_step289;!(_iteratorNormalCompletion289=(_step289=_iterator289.next()).done);_iteratorNormalCompletion289=true){var _e227=_step289.value;_e227.is(i)||t.rename(_e227,i);}}catch(err){_didIteratorError289=true;_iteratorError289=err;}finally{try{if(!_iteratorNormalCompletion289&&_iterator289["return"]!=null){_iterator289["return"]();}}finally{if(_didIteratorError289){throw _iteratorError289;}}}});}}]);return gf;}(ed);function pf(t,e,n){return n.checkChild(t.parent,e)&&!n.isObject(t);}var bf="paragraph";var wf=/*#__PURE__*/function(_Kl36){_inherits(wf,_Kl36);function wf(t){var _this179;_classCallCheck(this,wf);_this179=_possibleConstructorReturn(this,_getPrototypeOf(wf).call(this,t)),t.config.define("heading",{options:[{model:"paragraph",title:"Paragraph","class":"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1","class":"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2","class":"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3","class":"ck-heading_heading3"}]});return _this179;}_createClass(wf,[{key:"init",value:function init(){var t=this.editor,e=t.config.get("heading.options"),n=[];var _iteratorNormalCompletion290=true;var _didIteratorError290=false;var _iteratorError290=undefined;try{for(var _iterator290=e[Symbol.iterator](),_step290;!(_iteratorNormalCompletion290=(_step290=_iterator290.next()).done);_iteratorNormalCompletion290=true){var _i171=_step290.value;_i171.model!==bf&&(t.model.schema.register(_i171.model,{inheritAllFrom:"$block"}),t.conversion.elementToElement(_i171),n.push(_i171.model));}}catch(err){_didIteratorError290=true;_iteratorError290=err;}finally{try{if(!_iteratorNormalCompletion290&&_iterator290["return"]!=null){_iterator290["return"]();}}finally{if(_didIteratorError290){throw _iteratorError290;}}}this._addDefaultH1Conversion(t),t.commands.add("heading",new gf(t,n));}},{key:"afterInit",value:function afterInit(){var t=this.editor,e=t.commands.get("enter"),n=t.config.get("heading.options");e&&this.listenTo(e,"afterExecute",function(e,i){var o=t.model.document.selection.getFirstPosition().parent;n.some(function(t){return o.is(t.model);})&&!o.is(bf)&&0===o.childCount&&i.writer.rename(o,bf);});}},{key:"_addDefaultH1Conversion",value:function _addDefaultH1Conversion(t){t.conversion["for"]("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Zn.get("low")+1});}}],[{key:"requires",get:function get(){return[uf];}}]);return wf;}(Kl);var kf=function kf(t,e){_classCallCheck(this,kf);e&&Li(this,e),t&&this.set(t);};ci(kf,Fi);var _f=/*#__PURE__*/function(_Dl18){_inherits(_f,_Dl18);function _f(t){var _this180;_classCallCheck(this,_f);_this180=_possibleConstructorReturn(this,_getPrototypeOf(_f).call(this,t));var e=_this180.bindTemplate;_this180.set("isVisible",!1),_this180.set("position","se"),_this180.children=_this180.createCollection(),_this180.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-dropdown__panel",e.to("position",function(t){return"ck-dropdown__panel_".concat(t);}),e["if"]("isVisible","ck-dropdown__panel-visible")]},children:_this180.children,on:{selectstart:e.to(function(t){return t.preventDefault();})}});return _this180;}_createClass(_f,[{key:"focus",value:function focus(){this.children.length&&this.children.first.focus();}},{key:"focusLast",value:function focusLast(){if(this.children.length){var _t250=this.children.last;"function"==typeof _t250.focusLast?_t250.focusLast():_t250.focus();}}}]);return _f;}(Dl);n(58);var vf=/*#__PURE__*/function(_Dl19){_inherits(vf,_Dl19);function vf(t,e,n){var _this181;_classCallCheck(this,vf);_this181=_possibleConstructorReturn(this,_getPrototypeOf(vf).call(this,t));var i=_this181.bindTemplate;_this181.buttonView=e,_this181.panelView=n,_this181.set("isOpen",!1),_this181.set("isEnabled",!0),_this181.set("class"),_this181.set("panelPosition","auto"),_this181.focusTracker=new sl(),_this181.keystrokes=new Jc(),_this181.setTemplate({tag:"div",attributes:{"class":["ck","ck-dropdown",i.to("class"),i["if"]("isEnabled","ck-disabled",function(t){return!t;})]},children:[e,n]}),e.extendTemplate({attributes:{"class":["ck-dropdown__button"]}});return _this181;}_createClass(vf,[{key:"render",value:function render(){var _this182=this;_get(_getPrototypeOf(vf.prototype),"render",this).call(this),this.listenTo(this.buttonView,"open",function(){_this182.isOpen=!_this182.isOpen;}),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",function(){_this182.isOpen&&("auto"===_this182.panelPosition?_this182.panelView.position=vf._getOptimalPosition({element:_this182.panelView.element,target:_this182.buttonView.element,fitInViewport:!0,positions:_this182._panelPositions}).name:_this182.panelView.position=_this182.panelPosition);}),this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);var t=function t(_t251,e){_this182.isOpen&&(_this182.buttonView.focus(),_this182.isOpen=!1,e());};this.keystrokes.set("arrowdown",function(t,e){_this182.buttonView.isEnabled&&!_this182.isOpen&&(_this182.isOpen=!0,e());}),this.keystrokes.set("arrowright",function(t,e){_this182.isOpen&&e();}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t);}},{key:"focus",value:function focus(){this.buttonView.focus();}},{key:"_panelPositions",get:function get(){var _vf$defaultPanelPosit=vf.defaultPanelPositions,t=_vf$defaultPanelPosit.southEast,e=_vf$defaultPanelPosit.southWest,n=_vf$defaultPanelPosit.northEast,i=_vf$defaultPanelPosit.northWest;return"ltr"===this.locale.uiLanguageDirection?[t,e,n,i]:[e,t,i,n];}}]);return vf;}(Dl);vf.defaultPanelPositions={southEast:function southEast(t){return{top:t.bottom,left:t.left,name:"se"};},southWest:function southWest(t,e){return{top:t.bottom,left:t.left-e.width+t.width,name:"sw"};},northEast:function northEast(t,e){return{top:t.top-e.height,left:t.left,name:"ne"};},northWest:function northWest(t,e){return{top:t.bottom-e.height,left:t.left-e.width+t.width,name:"nw"};}},vf._getOptimalPosition=Au;var yf='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var xf=/*#__PURE__*/function(_Wd){_inherits(xf,_Wd);function xf(t){var _this183;_classCallCheck(this,xf);_this183=_possibleConstructorReturn(this,_getPrototypeOf(xf).call(this,t)),_this183.arrowView=_this183._createArrowView(),_this183.extendTemplate({attributes:{"aria-haspopup":!0}}),_this183.delegate("execute").to(_assertThisInitialized(_this183),"open");return _this183;}_createClass(xf,[{key:"render",value:function render(){_get(_getPrototypeOf(xf.prototype),"render",this).call(this),this.children.add(this.arrowView);}},{key:"_createArrowView",value:function _createArrowView(){var t=new Hd();return t.content=yf,t.extendTemplate({attributes:{"class":"ck-dropdown__arrow"}}),t;}}]);return xf;}(Wd);n(60);var Af=/*#__PURE__*/function(_Dl20){_inherits(Af,_Dl20);function Af(){var _this184;_classCallCheck(this,Af);_this184=_possibleConstructorReturn(this,_getPrototypeOf(Af).call(this)),_this184.items=_this184.createCollection(),_this184.focusTracker=new sl(),_this184.keystrokes=new Jc(),_this184._focusCycler=new ql({focusables:_this184.items,focusTracker:_this184.focusTracker,keystrokeHandler:_this184.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),_this184.setTemplate({tag:"ul",attributes:{"class":["ck","ck-reset","ck-list"]},children:_this184.items});return _this184;}_createClass(Af,[{key:"render",value:function render(){var _this185=this;_get(_getPrototypeOf(Af.prototype),"render",this).call(this);var _iteratorNormalCompletion291=true;var _didIteratorError291=false;var _iteratorError291=undefined;try{for(var _iterator291=this.items[Symbol.iterator](),_step291;!(_iteratorNormalCompletion291=(_step291=_iterator291.next()).done);_iteratorNormalCompletion291=true){var _t252=_step291.value;this.focusTracker.add(_t252.element);}}catch(err){_didIteratorError291=true;_iteratorError291=err;}finally{try{if(!_iteratorNormalCompletion291&&_iterator291["return"]!=null){_iterator291["return"]();}}finally{if(_didIteratorError291){throw _iteratorError291;}}}this.items.on("add",function(t,e){_this185.focusTracker.add(e.element);}),this.items.on("remove",function(t,e){_this185.focusTracker.remove(e.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}}]);return Af;}(Dl);var Tf=/*#__PURE__*/function(_Dl21){_inherits(Tf,_Dl21);function Tf(t){var _this186;_classCallCheck(this,Tf);_this186=_possibleConstructorReturn(this,_getPrototypeOf(Tf).call(this,t)),_this186.children=_this186.createCollection(),_this186.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__item"]},children:_this186.children});return _this186;}_createClass(Tf,[{key:"focus",value:function focus(){this.children.first.focus();}}]);return Tf;}(Dl);var Cf=/*#__PURE__*/function(_Dl22){_inherits(Cf,_Dl22);function Cf(t){var _this187;_classCallCheck(this,Cf);_this187=_possibleConstructorReturn(this,_getPrototypeOf(Cf).call(this,t)),_this187.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__separator"]}});return _this187;}return Cf;}(Dl);n(62);var Pf=/*#__PURE__*/function(_Wd2){_inherits(Pf,_Wd2);function Pf(t){var _this188;_classCallCheck(this,Pf);_this188=_possibleConstructorReturn(this,_getPrototypeOf(Pf).call(this,t)),_this188.isToggleable=!0,_this188.toggleSwitchView=_this188._createToggleView(),_this188.extendTemplate({attributes:{"class":"ck-switchbutton"}});return _this188;}_createClass(Pf,[{key:"render",value:function render(){_get(_getPrototypeOf(Pf.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView);}},{key:"_createToggleView",value:function _createToggleView(){var t=new Dl();return t.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{"class":["ck","ck-button__toggle__inner"]}}]}),t;}}]);return Pf;}(Wd);n(64),n(66);function Sf(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:xf;var n=new e(t),i=new _f(t),o=new vf(t,n,i);return n.bind("isEnabled").to(o),n instanceof xf?n.bind("isOn").to(o,"isOpen"):n.arrowView.bind("isOn").to(o,"isOpen"),function(t){(function(t){t.on("render",function(){bu({emitter:t,activator:function activator(){return t.isOpen;},callback:function callback(){t.isOpen=!1;},contextElements:[t.element]});});})(t),function(t){t.on("execute",function(e){e.source instanceof Pf||(t.isOpen=!1);});}(t),function(t){t.keystrokes.set("arrowdown",function(e,n){t.isOpen&&(t.panelView.focus(),n());}),t.keystrokes.set("arrowup",function(e,n){t.isOpen&&(t.panelView.focusLast(),n());});}(t);}(o),o;}function Mf(t,e){var n=t.locale,i=t.listView=new Af(n);i.items.bindTo(e).using(function(_ref33){var t=_ref33.type,e=_ref33.model;if("separator"===t)return new Cf(n);if("button"===t||"switchbutton"===t){var _o80;var _i172=new Tf(n);var _o79;return(_o80=_o79="button"===t?new Wd(n):new Pf(n)).bind.apply(_o80,_toConsumableArray(Object.keys(e))).to(e),_o79.delegate("execute").to(_i172),_i172.children.add(_o79),_i172;}}),t.panelView.children.add(i),i.items.delegate("execute").to(t);}n(10);var Ef=/*#__PURE__*/function(_Kl37){_inherits(Ef,_Kl37);function Ef(){_classCallCheck(this,Ef);return _possibleConstructorReturn(this,_getPrototypeOf(Ef).apply(this,arguments));}_createClass(Ef,[{key:"init",value:function init(){var _this189=this;var t=this.editor,e=t.t,n=function(t){var e=t.t,n={Paragraph:e("bt"),"Heading 1":e("bu"),"Heading 2":e("bv"),"Heading 3":e("bw"),"Heading 4":e("bx"),"Heading 5":e("by"),"Heading 6":e("bz")};return t.config.get("heading.options").map(function(t){var e=n[t.title];return e&&e!=t.title&&(t.title=e),t;});}(t),i=e("h"),o=e("i");t.ui.componentFactory.add("heading",function(e){var r={},s=new oo(),a=t.commands.get("heading"),c=t.commands.get("paragraph"),l=[a];var _iteratorNormalCompletion292=true;var _didIteratorError292=false;var _iteratorError292=undefined;try{var _loop6=function _loop6(){var t=_step292.value;var e={type:"button",model:new kf({label:t.title,"class":t["class"],withText:!0})};"paragraph"===t.model?(e.model.bind("isOn").to(c,"value"),e.model.set("commandName","paragraph"),l.push(c)):(e.model.bind("isOn").to(a,"value",function(e){return e===t.model;}),e.model.set({commandName:"heading",commandValue:t.model})),s.add(e),r[t.model]=t.title;};for(var _iterator292=n[Symbol.iterator](),_step292;!(_iteratorNormalCompletion292=(_step292=_iterator292.next()).done);_iteratorNormalCompletion292=true){_loop6();}}catch(err){_didIteratorError292=true;_iteratorError292=err;}finally{try{if(!_iteratorNormalCompletion292&&_iterator292["return"]!=null){_iterator292["return"]();}}finally{if(_didIteratorError292){throw _iteratorError292;}}}var d=Sf(e);return Mf(d,s),d.buttonView.set({isOn:!1,withText:!0,tooltip:o}),d.extendTemplate({attributes:{"class":["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(l,"isEnabled",function(){for(var _len18=arguments.length,t=new Array(_len18),_key18=0;_key18<_len18;_key18++){t[_key18]=arguments[_key18];}return t.some(function(t){return t;});}),d.buttonView.bind("label").to(a,"value",c,"value",function(t,e){var n=t||e&&"paragraph";return r[n]?r[n]:i;}),_this189.listenTo(d,"execute",function(e){t.execute(e.source.commandName,e.source.commandValue?{value:e.source.commandValue}:void 0),t.editing.view.focus();}),d;});}}]);return Ef;}(Kl);function If(t){var _iteratorNormalCompletion293=true;var _didIteratorError293=false;var _iteratorError293=undefined;try{for(var _iterator293=t.getChildren()[Symbol.iterator](),_step293;!(_iteratorNormalCompletion293=(_step293=_iterator293.next()).done);_iteratorNormalCompletion293=true){var _e228=_step293.value;if(_e228&&_e228.is("caption"))return _e228;}}catch(err){_didIteratorError293=true;_iteratorError293=err;}finally{try{if(!_iteratorNormalCompletion293&&_iterator293["return"]!=null){_iterator293["return"]();}}finally{if(_didIteratorError293){throw _iteratorError293;}}}return null;}function Nf(t){var e=t.parent;return"figcaption"==t.name&&e&&"figure"==e.name&&e.hasClass("image")?{name:!0}:null;}var Of=/*#__PURE__*/function(_Kl38){_inherits(Of,_Kl38);function Of(){_classCallCheck(this,Of);return _possibleConstructorReturn(this,_getPrototypeOf(Of).apply(this,arguments));}_createClass(Of,[{key:"init",value:function init(){var _this190=this;var t=this.editor,e=t.editing.view,n=t.model.schema,i=t.data,o=t.editing,r=t.t;n.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:!0}),t.model.document.registerPostFixer(function(t){return _this190._insertMissingModelCaptionElement(t);}),t.conversion["for"]("upcast").elementToElement({view:Nf,model:"caption"});i.downcastDispatcher.on("insert:caption",Rf(function(t){return t.createContainerElement("figcaption");},!1));var s=function(t,e){return function(n){var i=n.createEditableElement("figcaption");return n.setCustomProperty("imageCaption",!0,i),ll({view:t,element:i,text:e}),eu(i,n);};}(e,r("ak"));o.downcastDispatcher.on("insert:caption",Rf(s)),o.downcastDispatcher.on("insert",this._fixCaptionVisibility(function(t){return t.item;}),{priority:"high"}),o.downcastDispatcher.on("remove",this._fixCaptionVisibility(function(t){return t.position.parent;}),{priority:"high"}),e.document.registerPostFixer(function(t){return _this190._updateCaptionVisibility(t);});}},{key:"_updateCaptionVisibility",value:function _updateCaptionVisibility(t){var e=this.editor.editing.mapper,n=this._lastSelectedCaption;var i;var o=this.editor.model.document.selection,r=o.getSelectedElement();if(r&&r.is("image")){var _t253=If(r);i=e.toViewElement(_t253);}var s=Df(o.getFirstPosition().parent);if(s&&(i=e.toViewElement(s)),i)return n?n===i?jf(i,t):(Lf(n,t),this._lastSelectedCaption=i,jf(i,t)):(this._lastSelectedCaption=i,jf(i,t));if(n){var _e229=Lf(n,t);return this._lastSelectedCaption=null,_e229;}return!1;}},{key:"_fixCaptionVisibility",value:function _fixCaptionVisibility(t){var _this191=this;return function(e,n,i){var o=Df(t(n)),r=_this191.editor.editing.mapper,s=i.writer;if(o){var _t254=r.toViewElement(o);_t254&&(o.childCount?s.removeClass("ck-hidden",_t254):s.addClass("ck-hidden",_t254));}};}},{key:"_insertMissingModelCaptionElement",value:function _insertMissingModelCaptionElement(t){var e=this.editor.model,n=e.document.differ.getChanges(),i=[];var _iteratorNormalCompletion294=true;var _didIteratorError294=false;var _iteratorError294=undefined;try{for(var _iterator294=n[Symbol.iterator](),_step294;!(_iteratorNormalCompletion294=(_step294=_iterator294.next()).done);_iteratorNormalCompletion294=true){var _t255=_step294.value;if("insert"==_t255.type&&"$text"!=_t255.name){var _n207=_t255.position.nodeAfter;if(_n207.is("image")&&!If(_n207)&&i.push(_n207),!_n207.is("image")&&_n207.childCount){var _iteratorNormalCompletion295=true;var _didIteratorError295=false;var _iteratorError295=undefined;try{for(var _iterator295=e.createRangeIn(_n207).getItems()[Symbol.iterator](),_step295;!(_iteratorNormalCompletion295=(_step295=_iterator295.next()).done);_iteratorNormalCompletion295=true){var _t256=_step295.value;_t256.is("image")&&!If(_t256)&&i.push(_t256);}}catch(err){_didIteratorError295=true;_iteratorError295=err;}finally{try{if(!_iteratorNormalCompletion295&&_iterator295["return"]!=null){_iterator295["return"]();}}finally{if(_didIteratorError295){throw _iteratorError295;}}}}}}}catch(err){_didIteratorError294=true;_iteratorError294=err;}finally{try{if(!_iteratorNormalCompletion294&&_iterator294["return"]!=null){_iterator294["return"]();}}finally{if(_didIteratorError294){throw _iteratorError294;}}}for(var _i174=0,_i173=i;_i174<_i173.length;_i174++){var _e230=_i173[_i174];t.appendElement("caption",_e230);}return!!i.length;}}]);return Of;}(Kl);function Rf(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;return function(n,i,o){var r=i.item;if((r.childCount||e)&&ru(r.parent)){if(!o.consumable.consume(i.item,"insert"))return;var _e231=o.mapper.toViewElement(i.range.start.parent),_n208=t(o.writer),_s25=o.writer;r.childCount||_s25.addClass("ck-hidden",_n208),function(t,e,n,i){var o=i.writer.createPositionAt(n,"end");i.writer.insert(o,t),i.mapper.bindElements(e,t);}(_n208,i.item,_e231,o);}};}function Df(t){var e=t.getAncestors({includeSelf:!0}).find(function(t){return"caption"==t.name;});return e&&e.parent&&"image"==e.parent.name?e:null;}function Lf(t,e){return!t.childCount&&!t.hasClass("ck-hidden")&&(e.addClass("ck-hidden",t),!0);}function jf(t,e){return!!t.hasClass("ck-hidden")&&(e.removeClass("ck-hidden",t),!0);}n(69);var Vf=/*#__PURE__*/function(_ed14){_inherits(Vf,_ed14);function Vf(t,e){var _this192;_classCallCheck(this,Vf);_this192=_possibleConstructorReturn(this,_getPrototypeOf(Vf).call(this,t)),_this192.defaultStyle=!1,_this192.styles=e.reduce(function(t,e){return t[e.name]=e,e.isDefault&&(_this192.defaultStyle=e.name),t;},{});return _this192;}_createClass(Vf,[{key:"refresh",value:function refresh(){var t=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=ru(t),t){if(t.hasAttribute("imageStyle")){var _e232=t.getAttribute("imageStyle");this.value=!!this.styles[_e232]&&_e232;}else this.value=this.defaultStyle;}else this.value=!1;}},{key:"execute",value:function execute(t){var _this193=this;var e=t.value,n=this.editor.model,i=n.document.selection.getSelectedElement();n.change(function(t){_this193.styles[e].isDefault?t.removeAttribute("imageStyle",i):t.setAttribute("imageStyle",e,i);});}}]);return Vf;}(ed);function zf(t,e){var _iteratorNormalCompletion296=true;var _didIteratorError296=false;var _iteratorError296=undefined;try{for(var _iterator296=e[Symbol.iterator](),_step296;!(_iteratorNormalCompletion296=(_step296=_iterator296.next()).done);_iteratorNormalCompletion296=true){var _n209=_step296.value;if(_n209.name===t)return _n209;}}catch(err){_didIteratorError296=true;_iteratorError296=err;}finally{try{if(!_iteratorNormalCompletion296&&_iterator296["return"]!=null){_iterator296["return"]();}}finally{if(_didIteratorError296){throw _iteratorError296;}}}}var Bf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>',Ff='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>',Uf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>',Hf='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>';var qf={full:{name:"full",title:"Full size image",icon:Bf,isDefault:!0},side:{name:"side",title:"Side image",icon:Hf,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:Ff,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:Uf,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:Hf,className:"image-style-align-right"}},Wf={full:Bf,left:Ff,right:Hf,center:Uf};function Yf(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return t.map($f);}function $f(t){if("string"==typeof t){var _e233=t;qf[_e233]?t=Object.assign({},qf[_e233]):(console.warn(Object(Gn.a)("image-style-not-found: There is no such image style of given name."),{name:_e233}),t={name:_e233});}else if(qf[t.name]){var _e234=qf[t.name],_n210=Object.assign({},t);for(var _i175 in _e234){t.hasOwnProperty(_i175)||(_n210[_i175]=_e234[_i175]);}t=_n210;}return"string"==typeof t.icon&&Wf[t.icon]&&(t.icon=Wf[t.icon]),t;}var Gf=/*#__PURE__*/function(_Kl39){_inherits(Gf,_Kl39);function Gf(){_classCallCheck(this,Gf);return _possibleConstructorReturn(this,_getPrototypeOf(Gf).apply(this,arguments));}_createClass(Gf,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,n=t.data,i=t.editing;t.config.define("image.styles",["full","side"]);var o=Yf(t.config.get("image.styles"));e.extend("image",{allowAttributes:"imageStyle"});var r=function(t){return function(e,n,i){if(!i.consumable.consume(n.item,e.name))return;var o=zf(n.attributeNewValue,t),r=zf(n.attributeOldValue,t),s=i.mapper.toViewElement(n.item),a=i.writer;r&&a.removeClass(r.className,s),o&&a.addClass(o.className,s);};}(o);i.downcastDispatcher.on("attribute:imageStyle:image",r),n.downcastDispatcher.on("attribute:imageStyle:image",r),n.upcastDispatcher.on("element:figure",function(t){var e=t.filter(function(t){return!t.isDefault;});return function(t,n,i){if(!n.modelRange)return;var o=n.viewItem,r=vh(n.modelRange.getItems());if(i.schema.checkAttribute(r,"imageStyle")){var _iteratorNormalCompletion297=true;var _didIteratorError297=false;var _iteratorError297=undefined;try{for(var _iterator297=e[Symbol.iterator](),_step297;!(_iteratorNormalCompletion297=(_step297=_iterator297.next()).done);_iteratorNormalCompletion297=true){var _t257=_step297.value;i.consumable.consume(o,{classes:_t257.className})&&i.writer.setAttribute("imageStyle",_t257.name,r);}}catch(err){_didIteratorError297=true;_iteratorError297=err;}finally{try{if(!_iteratorNormalCompletion297&&_iterator297["return"]!=null){_iterator297["return"]();}}finally{if(_didIteratorError297){throw _iteratorError297;}}}}};}(o),{priority:"low"}),t.commands.add("imageStyle",new Vf(t,o));}}],[{key:"pluginName",get:function get(){return"ImageStyleEditing";}}]);return Gf;}(Kl);n(71);var Qf=/*#__PURE__*/function(_Kl40){_inherits(Qf,_Kl40);function Qf(){_classCallCheck(this,Qf);return _possibleConstructorReturn(this,_getPrototypeOf(Qf).apply(this,arguments));}_createClass(Qf,[{key:"init",value:function init(){var t=function(t,e){var _iteratorNormalCompletion298=true;var _didIteratorError298=false;var _iteratorError298=undefined;try{for(var _iterator298=t[Symbol.iterator](),_step298;!(_iteratorNormalCompletion298=(_step298=_iterator298.next()).done);_iteratorNormalCompletion298=true){var _n211=_step298.value;e[_n211.title]&&(_n211.title=e[_n211.title]);}}catch(err){_didIteratorError298=true;_iteratorError298=err;}finally{try{if(!_iteratorNormalCompletion298&&_iterator298["return"]!=null){_iterator298["return"]();}}finally{if(_didIteratorError298){throw _iteratorError298;}}}return t;}(Yf(this.editor.config.get("image.styles")),this.localizedDefaultStylesTitles);var _iteratorNormalCompletion299=true;var _didIteratorError299=false;var _iteratorError299=undefined;try{for(var _iterator299=t[Symbol.iterator](),_step299;!(_iteratorNormalCompletion299=(_step299=_iterator299.next()).done);_iteratorNormalCompletion299=true){var _e235=_step299.value;this._createButton(_e235);}}catch(err){_didIteratorError299=true;_iteratorError299=err;}finally{try{if(!_iteratorNormalCompletion299&&_iterator299["return"]!=null){_iterator299["return"]();}}finally{if(_didIteratorError299){throw _iteratorError299;}}}}},{key:"_createButton",value:function _createButton(t){var _this194=this;var e=this.editor,n="imageStyle:".concat(t.name);e.ui.componentFactory.add(n,function(n){var i=e.commands.get("imageStyle"),o=new Wd(n);return o.set({label:t.title,icon:t.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",function(e){return e===t.name;}),_this194.listenTo(o,"execute",function(){return e.execute("imageStyle",{value:t.name});}),o;});}},{key:"localizedDefaultStylesTitles",get:function get(){var t=this.editor.t;return{"Full size image":t("k"),"Side image":t("l"),"Left aligned image":t("m"),"Centered image":t("n"),"Right aligned image":t("o")};}}],[{key:"pluginName",get:function get(){return"ImageStyleUI";}}]);return Qf;}(Kl);var Kf=/*#__PURE__*/function(_Kl41){_inherits(Kf,_Kl41);function Kf(){_classCallCheck(this,Kf);return _possibleConstructorReturn(this,_getPrototypeOf(Kf).apply(this,arguments));}_createClass(Kf,[{key:"init",value:function init(){var _this195=this;var t=this.editor;if(t.plugins.has("BalloonToolbar")){var _e236=t.plugins.get("BalloonToolbar");this.listenTo(_e236,"show",function(e){(function(t){var e=t.getSelectedElement();return!(!e||!Zh(e));})(t.editing.view.document.selection)&&e.stop();},{priority:"high"});}this._toolbarDefinitions=new Map(),this._balloon=this.editor.plugins.get("ContextualBalloon"),this.listenTo(t.ui,"update",function(){_this195._updateToolbarsVisibility();}),this.listenTo(t.ui.focusTracker,"change:isFocused",function(){_this195._updateToolbarsVisibility();},{priority:"low"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Kf.prototype),"destroy",this).call(this);var _iteratorNormalCompletion300=true;var _didIteratorError300=false;var _iteratorError300=undefined;try{for(var _iterator300=this._toolbarDefinitions.values()[Symbol.iterator](),_step300;!(_iteratorNormalCompletion300=(_step300=_iterator300.next()).done);_iteratorNormalCompletion300=true){var _t258=_step300.value;_t258.view.destroy();}}catch(err){_didIteratorError300=true;_iteratorError300=err;}finally{try{if(!_iteratorNormalCompletion300&&_iterator300["return"]!=null){_iterator300["return"]();}}finally{if(_didIteratorError300){throw _iteratorError300;}}}}},{key:"register",value:function register(t,_ref34){var e=_ref34.ariaLabel,n=_ref34.items,i=_ref34.getRelatedElement,_ref34$balloonClassNa=_ref34.balloonClassName,o=_ref34$balloonClassNa===void 0?"ck-toolbar-container":_ref34$balloonClassNa;var r=this.editor,s=r.t,a=new $l(r.locale);if(a.ariaLabel=e||s("av"),this._toolbarDefinitions.has(t))throw new Gn.b("widget-toolbar-duplicated: Toolbar with the given id was already added.",this,{toolbarId:t});a.fillFromConfig(n,r.ui.componentFactory),this._toolbarDefinitions.set(t,{view:a,getRelatedElement:i,balloonClassName:o});}},{key:"_updateToolbarsVisibility",value:function _updateToolbarsVisibility(){var t=0,e=null,n=null;var _iteratorNormalCompletion301=true;var _didIteratorError301=false;var _iteratorError301=undefined;try{for(var _iterator301=this._toolbarDefinitions.values()[Symbol.iterator](),_step301;!(_iteratorNormalCompletion301=(_step301=_iterator301.next()).done);_iteratorNormalCompletion301=true){var _i176=_step301.value;var _o81=_i176.getRelatedElement(this.editor.editing.view.document.selection);if(this.editor.ui.focusTracker.isFocused){if(_o81){var _r38=_o81.getAncestors().length;_r38>t&&(t=_r38,e=_o81,n=_i176);}else this._isToolbarInBalloon(_i176)&&this._hideToolbar(_i176);}else this._isToolbarVisible(_i176)&&this._hideToolbar(_i176);}}catch(err){_didIteratorError301=true;_iteratorError301=err;}finally{try{if(!_iteratorNormalCompletion301&&_iterator301["return"]!=null){_iterator301["return"]();}}finally{if(_didIteratorError301){throw _iteratorError301;}}}n&&this._showToolbar(n,e);}},{key:"_hideToolbar",value:function _hideToolbar(t){this._balloon.remove(t.view),this.stopListening(this._balloon,"change:visibleView");}},{key:"_showToolbar",value:function _showToolbar(t,e){var _this196=this;this._isToolbarVisible(t)?Jf(this.editor,e):this._isToolbarInBalloon(t)||(this._balloon.add({view:t.view,position:Zf(this.editor,e),balloonClassName:t.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",function(){var _iteratorNormalCompletion302=true;var _didIteratorError302=false;var _iteratorError302=undefined;try{for(var _iterator302=_this196._toolbarDefinitions.values()[Symbol.iterator](),_step302;!(_iteratorNormalCompletion302=(_step302=_iterator302.next()).done);_iteratorNormalCompletion302=true){var _t259=_step302.value;if(_this196._isToolbarVisible(_t259)){var _e237=_t259.getRelatedElement(_this196.editor.editing.view.document.selection);Jf(_this196.editor,_e237);}}}catch(err){_didIteratorError302=true;_iteratorError302=err;}finally{try{if(!_iteratorNormalCompletion302&&_iterator302["return"]!=null){_iterator302["return"]();}}finally{if(_didIteratorError302){throw _iteratorError302;}}}}));}},{key:"_isToolbarVisible",value:function _isToolbarVisible(t){return this._balloon.visibleView===t.view;}},{key:"_isToolbarInBalloon",value:function _isToolbarInBalloon(t){return this._balloon.hasView(t.view);}}],[{key:"requires",get:function get(){return[Lu];}},{key:"pluginName",get:function get(){return"WidgetToolbarRepository";}}]);return Kf;}(Kl);function Jf(t,e){var n=t.plugins.get("ContextualBalloon"),i=Zf(t,e);n.updatePosition(i);}function Zf(t,e){var n=t.editing.view,i=Mu.defaultPositions;return{target:n.domConverter.mapViewToDom(e),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]};}function Xf(t,e,n){return n.createRange(tm(t,e,!0,n),tm(t,e,!1,n));}function tm(t,e,n,i){var o=t.textNode||(n?t.nodeBefore:t.nodeAfter),r=null;for(;o&&o.getAttribute("linkHref")==e;){r=o,o=n?o.previousSibling:o.nextSibling;}return r?i.createPositionAt(r,n?"before":"after"):t;}var em=/*#__PURE__*/function(_ed15){_inherits(em,_ed15);function em(t){var _this197;_classCallCheck(this,em);_this197=_possibleConstructorReturn(this,_getPrototypeOf(em).call(this,t)),_this197.manualDecorators=new oo();return _this197;}_createClass(em,[{key:"restoreManualDecoratorStates",value:function restoreManualDecoratorStates(){var _iteratorNormalCompletion303=true;var _didIteratorError303=false;var _iteratorError303=undefined;try{for(var _iterator303=this.manualDecorators[Symbol.iterator](),_step303;!(_iteratorNormalCompletion303=(_step303=_iterator303.next()).done);_iteratorNormalCompletion303=true){var _t260=_step303.value;_t260.value=this._getDecoratorStateFromModel(_t260.id);}}catch(err){_didIteratorError303=true;_iteratorError303=err;}finally{try{if(!_iteratorNormalCompletion303&&_iterator303["return"]!=null){_iterator303["return"]();}}finally{if(_didIteratorError303){throw _iteratorError303;}}}}},{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document;this.value=e.selection.getAttribute("linkHref");var _iteratorNormalCompletion304=true;var _didIteratorError304=false;var _iteratorError304=undefined;try{for(var _iterator304=this.manualDecorators[Symbol.iterator](),_step304;!(_iteratorNormalCompletion304=(_step304=_iterator304.next()).done);_iteratorNormalCompletion304=true){var _t261=_step304.value;_t261.value=this._getDecoratorStateFromModel(_t261.id);}}catch(err){_didIteratorError304=true;_iteratorError304=err;}finally{try{if(!_iteratorNormalCompletion304&&_iterator304["return"]!=null){_iterator304["return"]();}}finally{if(_didIteratorError304){throw _iteratorError304;}}}this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"linkHref");}},{key:"execute",value:function execute(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this.editor.model,i=n.document.selection,o=[],r=[];for(var _t262 in e){e[_t262]?o.push(_t262):r.push(_t262);}n.change(function(e){if(i.isCollapsed){var _s26=i.getFirstPosition();if(i.hasAttribute("linkHref")){var _a14=Xf(_s26,i.getAttribute("linkHref"),n);e.setAttribute("linkHref",t,_a14),o.forEach(function(t){e.setAttribute(t,!0,_a14);}),r.forEach(function(t){e.removeAttribute(t,_a14);}),e.setSelection(_a14);}else if(""!==t){var _r39=Vs(i.getAttributes());_r39.set("linkHref",t),o.forEach(function(t){_r39.set(t,!0);});var _a15=e.createText(t,_r39);n.insertContent(_a15,_s26),e.setSelection(e.createRangeOn(_a15));}}else{var _s27=n.schema.getValidRanges(i.getRanges(),"linkHref");var _iteratorNormalCompletion305=true;var _didIteratorError305=false;var _iteratorError305=undefined;try{var _loop7=function _loop7(){var n=_step305.value;e.setAttribute("linkHref",t,n),o.forEach(function(t){e.setAttribute(t,!0,n);}),r.forEach(function(t){e.removeAttribute(t,n);});};for(var _iterator305=_s27[Symbol.iterator](),_step305;!(_iteratorNormalCompletion305=(_step305=_iterator305.next()).done);_iteratorNormalCompletion305=true){_loop7();}}catch(err){_didIteratorError305=true;_iteratorError305=err;}finally{try{if(!_iteratorNormalCompletion305&&_iterator305["return"]!=null){_iterator305["return"]();}}finally{if(_didIteratorError305){throw _iteratorError305;}}}}});}},{key:"_getDecoratorStateFromModel",value:function _getDecoratorStateFromModel(t){return this.editor.model.document.selection.getAttribute(t)||!1;}}]);return em;}(ed);var nm=/*#__PURE__*/function(_ed16){_inherits(nm,_ed16);function nm(){_classCallCheck(this,nm);return _possibleConstructorReturn(this,_getPrototypeOf(nm).apply(this,arguments));}_createClass(nm,[{key:"refresh",value:function refresh(){this.isEnabled=this.editor.model.document.selection.hasAttribute("linkHref");}},{key:"execute",value:function execute(){var t=this.editor,e=this.editor.model,n=e.document.selection,i=t.commands.get("link");e.change(function(t){var o=n.isCollapsed?[Xf(n.getFirstPosition(),n.getAttribute("linkHref"),e)]:n.getRanges();var _iteratorNormalCompletion306=true;var _didIteratorError306=false;var _iteratorError306=undefined;try{for(var _iterator306=o[Symbol.iterator](),_step306;!(_iteratorNormalCompletion306=(_step306=_iterator306.next()).done);_iteratorNormalCompletion306=true){var _e238=_step306.value;if(t.removeAttribute("linkHref",_e238),i){var _iteratorNormalCompletion307=true;var _didIteratorError307=false;var _iteratorError307=undefined;try{for(var _iterator307=i.manualDecorators[Symbol.iterator](),_step307;!(_iteratorNormalCompletion307=(_step307=_iterator307.next()).done);_iteratorNormalCompletion307=true){var _n212=_step307.value;t.removeAttribute(_n212.id,_e238);}}catch(err){_didIteratorError307=true;_iteratorError307=err;}finally{try{if(!_iteratorNormalCompletion307&&_iterator307["return"]!=null){_iterator307["return"]();}}finally{if(_didIteratorError307){throw _iteratorError307;}}}}}}catch(err){_didIteratorError306=true;_iteratorError306=err;}finally{try{if(!_iteratorNormalCompletion306&&_iterator306["return"]!=null){_iterator306["return"]();}}finally{if(_didIteratorError306){throw _iteratorError306;}}}});}}]);return nm;}(ed);var im=function im(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;){r[i]=t[i+e];}return r;};var om=function om(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:im(t,e,n);},rm=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var sm=function sm(t){return rm.test(t);};var am=function am(t){return t.split("");},cm="[\\ud800-\\udfff]",lm="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",dm="\\ud83c[\\udffb-\\udfff]",hm="[^\\ud800-\\udfff]",um="(?:\\ud83c[\\udde6-\\uddff]){2}",fm="[\\ud800-\\udbff][\\udc00-\\udfff]",mm="(?:"+lm+"|"+dm+")"+"?",gm="[\\ufe0e\\ufe0f]?"+mm+("(?:\\u200d(?:"+[hm,um,fm].join("|")+")[\\ufe0e\\ufe0f]?"+mm+")*"),pm="(?:"+[hm+lm+"?",lm,um,fm,cm].join("|")+")",bm=RegExp(dm+"(?="+dm+")|"+pm+gm,"g");var wm=function wm(t){return t.match(bm)||[];};var km=function km(t){return sm(t)?wm(t):am(t);};var _m=function _m(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;){o[n]=e(t[n],n,t);}return o;},vm=1/0,ym=o?o.prototype:void 0,xm=ym?ym.toString:void 0;var Am=function t(e){if("string"==typeof e)return e;if(Wt(e))return _m(e,t)+"";if(os(e))return xm?xm.call(e):"";var n=e+"";return"0"==n&&1/e==-vm?"-0":n;};var Tm=function Tm(t){return null==t?"":Am(t);};var Cm=function(t){return function(e){e=Tm(e);var n=sm(e)?km(e):void 0,i=n?n[0]:e.charAt(0),o=n?om(n,1).join(""):e.slice(1);return i[t]()+o;};}("toUpperCase");var Pm=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Sm=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;function Mm(t,e){var n=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,n),n;}function Em(t){return function(t){return t.replace(Pm,"").match(Sm);}(t=String(t))?t:"#";}var Im=/*#__PURE__*/function(){function Im(){_classCallCheck(this,Im);this._definitions=new Set();}_createClass(Im,[{key:"add",value:function add(t){var _this198=this;Array.isArray(t)?t.forEach(function(t){return _this198._definitions.add(t);}):this._definitions.add(t);}},{key:"getDispatcher",value:function getDispatcher(){var _this199=this;return function(t){t.on("attribute:linkHref",function(t,e,n){if(!n.consumable.test(e.item,"attribute:linkHref"))return;var i=n.writer,o=i.document.selection;var _iteratorNormalCompletion308=true;var _didIteratorError308=false;var _iteratorError308=undefined;try{for(var _iterator308=_this199._definitions[Symbol.iterator](),_step308;!(_iteratorNormalCompletion308=(_step308=_iterator308.next()).done);_iteratorNormalCompletion308=true){var _t263=_step308.value;var _r40=i.createAttributeElement("a",_t263.attributes,{priority:5});i.setCustomProperty("link",!0,_r40),_t263.callback(e.attributeNewValue)?e.item.is("selection")?i.wrap(o.getFirstRange(),_r40):i.wrap(n.mapper.toViewRange(e.range),_r40):i.unwrap(n.mapper.toViewRange(e.range),_r40);}}catch(err){_didIteratorError308=true;_iteratorError308=err;}finally{try{if(!_iteratorNormalCompletion308&&_iterator308["return"]!=null){_iterator308["return"]();}}finally{if(_didIteratorError308){throw _iteratorError308;}}}},{priority:"high"});};}},{key:"length",get:function get(){return this._definitions.size;}}]);return Im;}();var Nm=function Nm(_ref35){var t=_ref35.id,e=_ref35.label,n=_ref35.attributes;_classCallCheck(this,Nm);this.id=t,this.set("value"),this.label=e,this.attributes=n;};ci(Nm,Fi);var Om=/*#__PURE__*/function(){function Om(t,e,n){var _this200=this;_classCallCheck(this,Om);this.model=t,this.attribute=n,this._modelSelection=t.document.selection,this._overrideUid=null,this._isNextGravityRestorationSkipped=!1,e.listenTo(this._modelSelection,"change:range",function(t,e){_this200._isNextGravityRestorationSkipped?_this200._isNextGravityRestorationSkipped=!1:_this200._isGravityOverridden&&(!e.directChange&&Rm(_this200._modelSelection.getFirstPosition(),n)||_this200._restoreGravity());});}_createClass(Om,[{key:"handleForwardMovement",value:function handleForwardMovement(t,e){var n=this.attribute;if(!(this._isGravityOverridden||t.isAtStart&&this._hasSelectionAttribute))return jm(t,n)&&this._hasSelectionAttribute?(this._preventCaretMovement(e),this._removeSelectionAttribute(),!0):Dm(t,n)?(this._preventCaretMovement(e),this._overrideGravity(),!0):Lm(t,n)&&this._hasSelectionAttribute?(this._preventCaretMovement(e),this._overrideGravity(),!0):void 0;}},{key:"handleBackwardMovement",value:function handleBackwardMovement(t,e){var n=this.attribute;return this._isGravityOverridden?jm(t,n)&&this._hasSelectionAttribute?(this._preventCaretMovement(e),this._restoreGravity(),this._removeSelectionAttribute(),!0):(this._preventCaretMovement(e),this._restoreGravity(),t.isAtStart&&this._removeSelectionAttribute(),!0):jm(t,n)&&!this._hasSelectionAttribute?(this._preventCaretMovement(e),this._setSelectionAttributeFromTheNodeBefore(t),!0):t.isAtEnd&&Lm(t,n)?this._hasSelectionAttribute?void(Vm(t,n)&&(this._skipNextAutomaticGravityRestoration(),this._overrideGravity())):(this._preventCaretMovement(e),this._setSelectionAttributeFromTheNodeBefore(t),!0):t.isAtStart?this._hasSelectionAttribute?(this._removeSelectionAttribute(),this._preventCaretMovement(e),!0):void 0:void(Vm(t,n)&&(this._skipNextAutomaticGravityRestoration(),this._overrideGravity()));}},{key:"_overrideGravity",value:function _overrideGravity(){this._overrideUid=this.model.change(function(t){return t.overrideSelectionGravity();});}},{key:"_restoreGravity",value:function _restoreGravity(){var _this201=this;this.model.change(function(t){t.restoreSelectionGravity(_this201._overrideUid),_this201._overrideUid=null;});}},{key:"_preventCaretMovement",value:function _preventCaretMovement(t){t.preventDefault();}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(){var _this202=this;this.model.change(function(t){t.removeSelectionAttribute(_this202.attribute);});}},{key:"_setSelectionAttributeFromTheNodeBefore",value:function _setSelectionAttributeFromTheNodeBefore(t){var _this203=this;var e=this.attribute;this.model.change(function(n){n.setSelectionAttribute(_this203.attribute,t.nodeBefore.getAttribute(e));});}},{key:"_skipNextAutomaticGravityRestoration",value:function _skipNextAutomaticGravityRestoration(){this._isNextGravityRestorationSkipped=!0;}},{key:"_isGravityOverridden",get:function get(){return!!this._overrideUid;}},{key:"_hasSelectionAttribute",get:function get(){return this._modelSelection.hasAttribute(this.attribute);}}]);return Om;}();function Rm(t,e){return Dm(t,e)||Lm(t,e);}function Dm(t,e){var n=t.nodeBefore,i=t.nodeAfter,o=!!n&&n.hasAttribute(e);return!!i&&i.hasAttribute(e)&&(!o||n.getAttribute(e)!==i.getAttribute(e));}function Lm(t,e){var n=t.nodeBefore,i=t.nodeAfter,o=!!n&&n.hasAttribute(e),r=!!i&&i.hasAttribute(e);return o&&(!r||n.getAttribute(e)!==i.getAttribute(e));}function jm(t,e){var n=t.nodeBefore,i=t.nodeAfter,o=!!n&&n.hasAttribute(e);if(!!i&&i.hasAttribute(e)&&o)return i.getAttribute(e)!==n.getAttribute(e);}function Vm(t,e){return Rm(t.getShiftedBy(-1),e);}n(73);var zm="ck-link_selected",Bm="automatic",Fm="manual",Um=/^(https?:)?\/\//;var Hm=/*#__PURE__*/function(_Kl42){_inherits(Hm,_Kl42);function Hm(t){var _this204;_classCallCheck(this,Hm);_this204=_possibleConstructorReturn(this,_getPrototypeOf(Hm).call(this,t)),t.config.define("link",{addTargetToExternalLinks:!1});return _this204;}_createClass(Hm,[{key:"init",value:function init(){var t=this.editor,e=t.locale;t.model.schema.extend("$text",{allowAttributes:"linkHref"}),t.conversion["for"]("dataDowncast").attributeToElement({model:"linkHref",view:Mm}),t.conversion["for"]("editingDowncast").attributeToElement({model:"linkHref",view:function view(t,e){return Mm(Em(t),e);}}),t.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:function value(t){return t.getAttribute("href");}}}),t.commands.add("link",new em(t)),t.commands.add("unlink",new nm(t));var n=function(t,e){var n={"Open in a new tab":t("ax"),Downloadable:t("ay")};return e.forEach(function(t){return t.label&&n[t.label]&&(t.label=n[t.label]),t;}),e;}(t.t,function(t){var e=[];if(t){for(var _i177=0,_Object$entries=Object.entries(t);_i177<_Object$entries.length;_i177++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i177],2),_n213=_Object$entries$_i[0],_i178=_Object$entries$_i[1];var _t264=Object.assign({},_i178,{id:"link".concat(Cm(_n213))});e.push(_t264);}}return e;}(t.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(function(t){return t.mode===Bm;})),this._enableManualDecorators(n.filter(function(t){return t.mode===Fm;})),function(_ref36){var t=_ref36.view,e=_ref36.model,n=_ref36.emitter,i=_ref36.attribute,o=_ref36.locale;var r=new Om(e,n,i),s=e.document.selection;n.listenTo(t.document,"keydown",function(t,e){if(!s.isCollapsed)return;if(e.shiftKey||e.altKey||e.ctrlKey)return;var n=e.keyCode==bo.arrowright,i=e.keyCode==bo.arrowleft;if(!n&&!i)return;var a=s.getFirstPosition(),c=o.contentLanguageDirection;var l;(l="ltr"===c&&n||"rtl"===c&&i?r.handleForwardMovement(a,e):r.handleBackwardMovement(a,e))&&t.stop();},{priority:Zn.get("high")+1});}({view:t.editing.view,model:t.model,emitter:this,attribute:"linkHref",locale:e}),this._setupLinkHighlight();}},{key:"_enableAutomaticDecorators",value:function _enableAutomaticDecorators(t){var e=this.editor,n=new Im();e.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:Bm,callback:function callback(t){return Um.test(t);},attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(t),n.length&&e.conversion["for"]("downcast").add(n.getDispatcher());}},{key:"_enableManualDecorators",value:function _enableManualDecorators(t){if(!t.length)return;var e=this.editor,n=e.commands.get("link").manualDecorators;t.forEach(function(t){e.model.schema.extend("$text",{allowAttributes:t.id}),n.add(new Nm(t)),e.conversion["for"]("downcast").attributeToElement({model:t.id,view:function view(e,i){if(e){var _e239=n.get(t.id).attributes,_o82=i.createAttributeElement("a",_e239,{priority:5});return i.setCustomProperty("link",!0,_o82),_o82;}}}),e.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:n.get(t.id).attributes},model:{key:t.id}});});}},{key:"_setupLinkHighlight",value:function _setupLinkHighlight(){var t=this.editor,e=t.editing.view,n=new Set();e.document.registerPostFixer(function(e){var i=t.model.document.selection;var o=!1;if(i.hasAttribute("linkHref")){var _r41=Xf(i.getFirstPosition(),i.getAttribute("linkHref"),t.model),_s28=t.editing.mapper.toViewRange(_r41);var _iteratorNormalCompletion309=true;var _didIteratorError309=false;var _iteratorError309=undefined;try{for(var _iterator309=_s28.getItems()[Symbol.iterator](),_step309;!(_iteratorNormalCompletion309=(_step309=_iterator309.next()).done);_iteratorNormalCompletion309=true){var _t265=_step309.value;_t265.is("a")&&!_t265.hasClass(zm)&&(e.addClass(zm,_t265),n.add(_t265),o=!0);}}catch(err){_didIteratorError309=true;_iteratorError309=err;}finally{try{if(!_iteratorNormalCompletion309&&_iterator309["return"]!=null){_iterator309["return"]();}}finally{if(_didIteratorError309){throw _iteratorError309;}}}}return o;}),t.conversion["for"]("editingDowncast").add(function(t){function i(){e.change(function(t){var _iteratorNormalCompletion310=true;var _didIteratorError310=false;var _iteratorError310=undefined;try{for(var _iterator310=n.values()[Symbol.iterator](),_step310;!(_iteratorNormalCompletion310=(_step310=_iterator310.next()).done);_iteratorNormalCompletion310=true){var _e240=_step310.value;t.removeClass(zm,_e240),n["delete"](_e240);}}catch(err){_didIteratorError310=true;_iteratorError310=err;}finally{try{if(!_iteratorNormalCompletion310&&_iterator310["return"]!=null){_iterator310["return"]();}}finally{if(_didIteratorError310){throw _iteratorError310;}}}});}t.on("insert",i,{priority:"highest"}),t.on("remove",i,{priority:"highest"}),t.on("attribute",i,{priority:"highest"}),t.on("selection",i,{priority:"highest"});});}}]);return Hm;}(Kl);var qm=/*#__PURE__*/function(_ts7){_inherits(qm,_ts7);function qm(t){var _this205;_classCallCheck(this,qm);_this205=_possibleConstructorReturn(this,_getPrototypeOf(qm).call(this,t)),_this205.domEventType="click";return _this205;}_createClass(qm,[{key:"onDomEvent",value:function onDomEvent(t){this.fire(t.type,t);}}]);return qm;}(ts);n(75);var Wm=/*#__PURE__*/function(_Dl23){_inherits(Wm,_Dl23);function Wm(t){var _this206;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,Wm);_this206=_possibleConstructorReturn(this,_getPrototypeOf(Wm).call(this,t));var n=t.t;_this206.focusTracker=new sl(),_this206.keystrokes=new Jc(),_this206.urlInputView=_this206._createUrlInput(),_this206.saveButtonView=_this206._createButton(n("bd"),vu,"ck-button-save"),_this206.saveButtonView.type="submit",_this206.cancelButtonView=_this206._createButton(n("be"),yu,"ck-button-cancel","cancel"),_this206._manualDecoratorSwitches=_this206._createManualDecoratorSwitches(e),_this206.children=_this206._createFormChildren(e),_this206._focusables=new gl(),_this206._focusCycler=new ql({focusables:_this206._focusables,focusTracker:_this206.focusTracker,keystrokeHandler:_this206.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var i=["ck","ck-link-form"];e.length&&i.push("ck-link-form_layout-vertical"),_this206.setTemplate({tag:"form",attributes:{"class":i,tabindex:"-1"},children:_this206.children});return _this206;}_createClass(Wm,[{key:"getDecoratorSwitchesState",value:function getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(function(t,e){return t[e.name]=e.isOn,t;},{});}},{key:"render",value:function render(){var _this207=this;_get(_getPrototypeOf(Wm.prototype),"render",this).call(this),_u({view:this}),[this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]).forEach(function(t){_this207._focusables.add(t),_this207.focusTracker.add(t.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createUrlInput",value:function _createUrlInput(){var t=this.locale.t,e=new wu(this.locale,ku);return e.label=t("bf"),e.inputView.placeholder="https://example.com",e;}},{key:"_createButton",value:function _createButton(t,e,n,i){var o=new Wd(this.locale);return o.set({label:t,icon:e,tooltip:!0}),o.extendTemplate({attributes:{"class":n}}),i&&o.delegate("execute").to(this,i),o;}},{key:"_createManualDecoratorSwitches",value:function _createManualDecoratorSwitches(t){var _this208=this;var e=this.createCollection();var _iteratorNormalCompletion311=true;var _didIteratorError311=false;var _iteratorError311=undefined;try{var _loop8=function _loop8(){var n=_step311.value;var t=new Pf(_this208.locale);t.set({name:n.id,label:n.label,withText:!0}),t.bind("isOn").to(n,"value"),t.on("execute",function(){n.set("value",!t.isOn);}),e.add(t);};for(var _iterator311=t[Symbol.iterator](),_step311;!(_iteratorNormalCompletion311=(_step311=_iterator311.next()).done);_iteratorNormalCompletion311=true){_loop8();}}catch(err){_didIteratorError311=true;_iteratorError311=err;}finally{try{if(!_iteratorNormalCompletion311&&_iterator311["return"]!=null){_iterator311["return"]();}}finally{if(_didIteratorError311){throw _iteratorError311;}}}return e;}},{key:"_createFormChildren",value:function _createFormChildren(t){var e=this.createCollection();if(e.add(this.urlInputView),t.length){var _t266=new Dl();_t266.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(t){return{tag:"li",children:[t],attributes:{"class":["ck","ck-list__item"]}};}),attributes:{"class":["ck","ck-reset","ck-list"]}}),e.add(_t266);}return e.add(this.saveButtonView),e.add(this.cancelButtonView),e;}}]);return Wm;}(Dl);var Ym='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',$m='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>';n(77);var Gm=/*#__PURE__*/function(_Dl24){_inherits(Gm,_Dl24);function Gm(t){var _this209;_classCallCheck(this,Gm);_this209=_possibleConstructorReturn(this,_getPrototypeOf(Gm).call(this,t));var e=t.t;_this209.focusTracker=new sl(),_this209.keystrokes=new Jc(),_this209.previewButtonView=_this209._createPreviewButton(),_this209.unlinkButtonView=_this209._createButton(e("az"),Ym,"unlink"),_this209.editButtonView=_this209._createButton(e("ba"),$m,"edit"),_this209.set("href"),_this209._focusables=new gl(),_this209._focusCycler=new ql({focusables:_this209._focusables,focusTracker:_this209.focusTracker,keystrokeHandler:_this209.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this209.setTemplate({tag:"div",attributes:{"class":["ck","ck-link-actions"],tabindex:"-1"},children:[_this209.previewButtonView,_this209.editButtonView,_this209.unlinkButtonView]});return _this209;}_createClass(Gm,[{key:"render",value:function render(){var _this210=this;_get(_getPrototypeOf(Gm.prototype),"render",this).call(this),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(function(t){_this210._focusables.add(t),_this210.focusTracker.add(t.element);}),this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createButton",value:function _createButton(t,e,n){var i=new Wd(this.locale);return i.set({label:t,icon:e,tooltip:!0}),i.delegate("execute").to(this,n),i;}},{key:"_createPreviewButton",value:function _createPreviewButton(){var t=new Wd(this.locale),e=this.bindTemplate,n=this.t;return t.set({withText:!0,tooltip:n("bb")}),t.extendTemplate({attributes:{"class":["ck","ck-link-actions__preview"],href:e.to("href",function(t){return t&&Em(t);}),target:"_blank"}}),t.bind("label").to(this,"href",function(t){return t||n("bc");}),t.bind("isEnabled").to(this,"href",function(t){return!!t;}),t.template.tag="a",t.template.eventListeners={},t;}}]);return Gm;}(Dl);var Qm='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';var Km="Ctrl+K";var Jm=/*#__PURE__*/function(_Kl43){_inherits(Jm,_Kl43);function Jm(){_classCallCheck(this,Jm);return _possibleConstructorReturn(this,_getPrototypeOf(Jm).apply(this,arguments));}_createClass(Jm,[{key:"init",value:function init(){var t=this.editor;t.editing.view.addObserver(qm),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=t.plugins.get(Lu),this._createToolbarLinkButton(),this._enableUserBalloonInteractions();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Jm.prototype),"destroy",this).call(this),this.formView.destroy();}},{key:"_createActionsView",value:function _createActionsView(){var _this211=this;var t=this.editor,e=new Gm(t.locale),n=t.commands.get("link"),i=t.commands.get("unlink");return e.bind("href").to(n,"value"),e.editButtonView.bind("isEnabled").to(n),e.unlinkButtonView.bind("isEnabled").to(i),this.listenTo(e,"edit",function(){_this211._addFormView();}),this.listenTo(e,"unlink",function(){t.execute("unlink"),_this211._hideUI();}),e.keystrokes.set("Esc",function(t,e){_this211._hideUI(),e();}),e.keystrokes.set(Km,function(t,e){_this211._addFormView(),e();}),e;}},{key:"_createFormView",value:function _createFormView(){var _this212=this;var t=this.editor,e=t.commands.get("link"),n=new Wm(t.locale,e.manualDecorators);return n.urlInputView.bind("value").to(e,"value"),n.urlInputView.bind("isReadOnly").to(e,"isEnabled",function(t){return!t;}),n.saveButtonView.bind("isEnabled").to(e),this.listenTo(n,"submit",function(){t.execute("link",n.urlInputView.inputView.element.value,n.getDecoratorSwitchesState()),_this212._closeFormView();}),this.listenTo(n,"cancel",function(){_this212._closeFormView();}),n.keystrokes.set("Esc",function(t,e){_this212._closeFormView(),e();}),n;}},{key:"_createToolbarLinkButton",value:function _createToolbarLinkButton(){var _this213=this;var t=this.editor,e=t.commands.get("link"),n=t.t;t.keystrokes.set(Km,function(t,n){n(),e.isEnabled&&_this213._showUI(!0);}),t.ui.componentFactory.add("link",function(t){var i=new Wd(t);return i.isEnabled=!0,i.label=n("aq"),i.icon=Qm,i.keystroke=Km,i.tooltip=!0,i.isToggleable=!0,i.bind("isEnabled").to(e,"isEnabled"),i.bind("isOn").to(e,"value",function(t){return!!t;}),_this213.listenTo(i,"execute",function(){return _this213._showUI(!0);}),i;});}},{key:"_enableUserBalloonInteractions",value:function _enableUserBalloonInteractions(){var _this214=this;var t=this.editor.editing.view.document;this.listenTo(t,"click",function(){_this214._getSelectedLinkElement()&&_this214._showUI();}),this.editor.keystrokes.set("Tab",function(t,e){_this214._areActionsVisible&&!_this214.actionsView.focusTracker.isFocused&&(_this214.actionsView.focus(),e());},{priority:"high"}),this.editor.keystrokes.set("Esc",function(t,e){_this214._isUIVisible&&(_this214._hideUI(),e());}),bu({emitter:this.formView,activator:function activator(){return _this214._isUIInPanel;},contextElements:[this._balloon.view.element],callback:function callback(){return _this214._hideUI();}});}},{key:"_addActionsView",value:function _addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()});}},{key:"_addFormView",value:function _addFormView(){if(this._isFormInPanel)return;var t=this.editor.commands.get("link");this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.select(),this.formView.urlInputView.inputView.element.value=t.value||"";}},{key:"_closeFormView",value:function _closeFormView(){var t=this.editor.commands.get("link");t.restoreManualDecoratorStates(),void 0!==t.value?this._removeFormView():this._hideUI();}},{key:"_removeFormView",value:function _removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus());}},{key:"_showUI",value:function _showUI(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;this.editor.commands.get("link").isEnabled&&(this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),t&&this._balloon.showStack("main")):(this._addActionsView(),t&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI());}},{key:"_hideUI",value:function _hideUI(){if(!this._isUIInPanel)return;var t=this.editor;this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),t.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView);}},{key:"_startUpdatingUI",value:function _startUpdatingUI(){var _this215=this;var t=this.editor,e=t.editing.view.document;var n=this._getSelectedLinkElement(),i=r();var o=function o(){var t=_this215._getSelectedLinkElement(),e=r();n&&!t||!n&&e!==i?_this215._hideUI():_this215._isUIVisible&&_this215._balloon.updatePosition(_this215._getBalloonPositionData()),n=t,i=e;};function r(){return e.selection.focus.getAncestors().reverse().find(function(t){return t.is("element");});}this.listenTo(t.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o);}},{key:"_getBalloonPositionData",value:function _getBalloonPositionData(){var t=this.editor.editing.view,e=t.document,n=this._getSelectedLinkElement();return{target:n?t.domConverter.mapViewToDom(n):t.domConverter.viewRangeToDom(e.selection.getFirstRange())};}},{key:"_getSelectedLinkElement",value:function _getSelectedLinkElement(){var t=this.editor.editing.view,e=t.document.selection;if(e.isCollapsed)return Zm(e.getFirstPosition());{var _n214=e.getFirstRange().getTrimmed(),_i179=Zm(_n214.start),_o83=Zm(_n214.end);return _i179&&_i179==_o83&&t.createRangeIn(_i179).getTrimmed().isEqual(_n214)?_i179:null;}}},{key:"_isFormInPanel",get:function get(){return this._balloon.hasView(this.formView);}},{key:"_areActionsInPanel",get:function get(){return this._balloon.hasView(this.actionsView);}},{key:"_areActionsVisible",get:function get(){return this._balloon.visibleView===this.actionsView;}},{key:"_isUIInPanel",get:function get(){return this._isFormInPanel||this._areActionsInPanel;}},{key:"_isUIVisible",get:function get(){return this._balloon.visibleView==this.formView||this._areActionsVisible;}}],[{key:"requires",get:function get(){return[Lu];}},{key:"pluginName",get:function get(){return"LinkUI";}}]);return Jm;}(Kl);function Zm(t){return t.getAncestors().find(function(t){return function(t){return t.is("attributeElement")&&!!t.getCustomProperty("link");}(t);});}var Xm=/*#__PURE__*/function(_ed17){_inherits(Xm,_ed17);function Xm(t,e){var _this216;_classCallCheck(this,Xm);_this216=_possibleConstructorReturn(this,_getPrototypeOf(Xm).call(this,t)),_this216.type=e;return _this216;}_createClass(Xm,[{key:"refresh",value:function refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this217=this;var t=this.editor.model,e=t.document,n=Array.from(e.selection.getSelectedBlocks()).filter(function(e){return eg(e,t.schema);}),i=!0===this.value;t.change(function(t){if(i){var _e241=n[n.length-1].nextSibling,_i180=Number.POSITIVE_INFINITY,_o84=[];for(;_e241&&"listItem"==_e241.name&&0!==_e241.getAttribute("listIndent");){var _t267=_e241.getAttribute("listIndent");_t267<_i180&&(_i180=_t267);var _n215=_t267-_i180;_o84.push({element:_e241,listIndent:_n215}),_e241=_e241.nextSibling;}_o84=_o84.reverse();var _iteratorNormalCompletion312=true;var _didIteratorError312=false;var _iteratorError312=undefined;try{for(var _iterator312=_o84[Symbol.iterator](),_step312;!(_iteratorNormalCompletion312=(_step312=_iterator312.next()).done);_iteratorNormalCompletion312=true){var _e242=_step312.value;t.setAttribute("listIndent",_e242.listIndent,_e242.element);}}catch(err){_didIteratorError312=true;_iteratorError312=err;}finally{try{if(!_iteratorNormalCompletion312&&_iterator312["return"]!=null){_iterator312["return"]();}}finally{if(_didIteratorError312){throw _iteratorError312;}}}}if(!i){var _t268=Number.POSITIVE_INFINITY;var _iteratorNormalCompletion313=true;var _didIteratorError313=false;var _iteratorError313=undefined;try{for(var _iterator313=n[Symbol.iterator](),_step313;!(_iteratorNormalCompletion313=(_step313=_iterator313.next()).done);_iteratorNormalCompletion313=true){var _e243=_step313.value;_e243.is("listItem")&&_e243.getAttribute("listIndent")<_t268&&(_t268=_e243.getAttribute("listIndent"));}}catch(err){_didIteratorError313=true;_iteratorError313=err;}finally{try{if(!_iteratorNormalCompletion313&&_iterator313["return"]!=null){_iterator313["return"]();}}finally{if(_didIteratorError313){throw _iteratorError313;}}}tg(n,!0,_t268=0===_t268?1:_t268),tg(n,!1,_t268);}var _iteratorNormalCompletion314=true;var _didIteratorError314=false;var _iteratorError314=undefined;try{for(var _iterator314=n.reverse()[Symbol.iterator](),_step314;!(_iteratorNormalCompletion314=(_step314=_iterator314.next()).done);_iteratorNormalCompletion314=true){var _e244=_step314.value;i&&"listItem"==_e244.name?t.rename(_e244,"paragraph"):i||"listItem"==_e244.name?i||"listItem"!=_e244.name||_e244.getAttribute("listType")==_this217.type||t.setAttribute("listType",_this217.type,_e244):(t.setAttributes({listType:_this217.type,listIndent:0},_e244),t.rename(_e244,"listItem"));}}catch(err){_didIteratorError314=true;_iteratorError314=err;}finally{try{if(!_iteratorNormalCompletion314&&_iterator314["return"]!=null){_iterator314["return"]();}}finally{if(_didIteratorError314){throw _iteratorError314;}}}});}},{key:"_getValue",value:function _getValue(){var t=vh(this.editor.model.document.selection.getSelectedBlocks());return!!t&&t.is("listItem")&&t.getAttribute("listType")==this.type;}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value)return!0;var t=this.editor.model.document.selection,e=this.editor.model.schema,n=vh(t.getSelectedBlocks());return!!n&&eg(n,e);}}]);return Xm;}(ed);function tg(t,e,n){var i=e?t[0]:t[t.length-1];if(i.is("listItem")){var _o85=i[e?"previousSibling":"nextSibling"],_r42=i.getAttribute("listIndent");for(;_o85&&_o85.is("listItem")&&_o85.getAttribute("listIndent")>=n;){_r42>_o85.getAttribute("listIndent")&&(_r42=_o85.getAttribute("listIndent")),_o85.getAttribute("listIndent")==_r42&&t[e?"unshift":"push"](_o85),_o85=_o85[e?"previousSibling":"nextSibling"];}}}function eg(t,e){return e.checkChild(t.parent,"listItem")&&!e.isObject(t);}var ng=/*#__PURE__*/function(_ed18){_inherits(ng,_ed18);function ng(t,e){var _this218;_classCallCheck(this,ng);_this218=_possibleConstructorReturn(this,_getPrototypeOf(ng).call(this,t)),_this218._indentBy="forward"==e?1:-1;return _this218;}_createClass(ng,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this219=this;var t=this.editor.model,e=t.document;var n=Array.from(e.selection.getSelectedBlocks());t.change(function(t){var e=n[n.length-1];var i=e.nextSibling;for(;i&&"listItem"==i.name&&i.getAttribute("listIndent")>e.getAttribute("listIndent");){n.push(i),i=i.nextSibling;}_this219._indentBy<0&&(n=n.reverse());var _iteratorNormalCompletion315=true;var _didIteratorError315=false;var _iteratorError315=undefined;try{for(var _iterator315=n[Symbol.iterator](),_step315;!(_iteratorNormalCompletion315=(_step315=_iterator315.next()).done);_iteratorNormalCompletion315=true){var _e245=_step315.value;var _n216=_e245.getAttribute("listIndent")+_this219._indentBy;_n216<0?t.rename(_e245,"paragraph"):t.setAttribute("listIndent",_n216,_e245);}}catch(err){_didIteratorError315=true;_iteratorError315=err;}finally{try{if(!_iteratorNormalCompletion315&&_iterator315["return"]!=null){_iterator315["return"]();}}finally{if(_didIteratorError315){throw _iteratorError315;}}}});}},{key:"_checkEnabled",value:function _checkEnabled(){var t=vh(this.editor.model.document.selection.getSelectedBlocks());if(!t||!t.is("listItem"))return!1;if(this._indentBy>0){var _e246=t.getAttribute("listIndent"),_n217=t.getAttribute("listType");var _i181=t.previousSibling;for(;_i181&&_i181.is("listItem")&&_i181.getAttribute("listIndent")>=_e246;){if(_i181.getAttribute("listIndent")==_e246)return _i181.getAttribute("listType")==_n217;_i181=_i181.previousSibling;}return!1;}return!0;}}]);return ng;}(ed);function ig(t,e){var n=e.mapper,i=e.writer,o="numbered"==t.getAttribute("listType")?"ol":"ul",r=function(t){var e=t.createContainerElement("li");return e.getFillerOffset=lg,e;}(i),s=i.createContainerElement(o,null);return i.insert(i.createPositionAt(s,0),r),n.bindElements(t,r),r;}function og(t,e,n,i){var o=e.parent,r=n.mapper,s=n.writer;var a=r.toViewPosition(i.createPositionBefore(t));var c=ag(t.previousSibling,{sameIndent:!0,smallerIndent:!0,listIndent:t.getAttribute("listIndent")}),l=t.previousSibling;if(c&&c.getAttribute("listIndent")==t.getAttribute("listIndent")){var _t269=r.toViewElement(c);a=s.breakContainer(s.createPositionAfter(_t269));}else a=l&&"listItem"==l.name?r.toViewPosition(i.createPositionAt(l,"end")):r.toViewPosition(i.createPositionBefore(t));if(a=sg(a),s.insert(a,o),l&&"listItem"==l.name){var _t270=r.toViewElement(l),_n218=s.createRange(s.createPositionAt(_t270,0),a).getWalker({ignoreElementEnd:!0});var _iteratorNormalCompletion316=true;var _didIteratorError316=false;var _iteratorError316=undefined;try{for(var _iterator316=_n218[Symbol.iterator](),_step316;!(_iteratorNormalCompletion316=(_step316=_iterator316.next()).done);_iteratorNormalCompletion316=true){var _t271=_step316.value;if(_t271.item.is("li")){var _i182=s.breakContainer(s.createPositionBefore(_t271.item)),_o86=_t271.item.parent,_r43=s.createPositionAt(e,"end");rg(s,_r43.nodeBefore,_r43.nodeAfter),s.move(s.createRangeOn(_o86),_r43),_n218.position=_i182;}}}catch(err){_didIteratorError316=true;_iteratorError316=err;}finally{try{if(!_iteratorNormalCompletion316&&_iterator316["return"]!=null){_iterator316["return"]();}}finally{if(_didIteratorError316){throw _iteratorError316;}}}}else{var _n219=o.nextSibling;if(_n219&&(_n219.is("ul")||_n219.is("ol"))){var _i183=null;var _iteratorNormalCompletion317=true;var _didIteratorError317=false;var _iteratorError317=undefined;try{for(var _iterator317=_n219.getChildren()[Symbol.iterator](),_step317;!(_iteratorNormalCompletion317=(_step317=_iterator317.next()).done);_iteratorNormalCompletion317=true){var _e247=_step317.value;var _n220=r.toModelElement(_e247);if(!(_n220&&_n220.getAttribute("listIndent")>t.getAttribute("listIndent")))break;_i183=_e247;}}catch(err){_didIteratorError317=true;_iteratorError317=err;}finally{try{if(!_iteratorNormalCompletion317&&_iterator317["return"]!=null){_iterator317["return"]();}}finally{if(_didIteratorError317){throw _iteratorError317;}}}_i183&&(s.breakContainer(s.createPositionAfter(_i183)),s.move(s.createRangeOn(_i183.parent),s.createPositionAt(e,"end")));}}rg(s,o,o.nextSibling),rg(s,o.previousSibling,o);}function rg(t,e,n){return!e||!n||"ul"!=e.name&&"ol"!=e.name?null:e.name!=n.name||e.getAttribute("class")!==n.getAttribute("class")?null:t.mergeContainers(t.createPositionAfter(e));}function sg(t){return t.getLastMatchingPosition(function(t){return t.item.is("uiElement");});}function ag(t,e){var n=!!e.sameIndent,i=!!e.smallerIndent,o=e.listIndent;var r=t;for(;r&&"listItem"==r.name;){var _t272=r.getAttribute("listIndent");if(n&&o==_t272||i&&o>_t272)return r;r=r.previousSibling;}return null;}function cg(t,e,n,i){t.ui.componentFactory.add(e,function(o){var r=t.commands.get(e),s=new Wd(o);return s.set({label:n,icon:i,tooltip:!0,isToggleable:!0}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.on("execute",function(){return t.execute(e);}),s;});}function lg(){var t=!this.isEmpty&&("ul"==this.getChild(0).name||"ol"==this.getChild(0).name);return this.isEmpty||t?0:xi.call(this);}function dg(t){return function(e,n,i){var o=i.consumable;if(!o.test(n.item,"insert")||!o.test(n.item,"attribute:listType")||!o.test(n.item,"attribute:listIndent"))return;o.consume(n.item,"insert"),o.consume(n.item,"attribute:listType"),o.consume(n.item,"attribute:listIndent");var r=n.item;og(r,ig(r,i),i,t);};}function hg(t,e,n){if(!n.consumable.consume(e.item,"attribute:listType"))return;var i=n.mapper.toViewElement(e.item),o=n.writer;o.breakContainer(o.createPositionBefore(i)),o.breakContainer(o.createPositionAfter(i));var r=i.parent,s="numbered"==e.attributeNewValue?"ol":"ul";o.rename(s,r);}function ug(t,e,n){var i=n.mapper.toViewElement(e.item).parent,o=n.writer;rg(o,i,i.nextSibling),rg(o,i.previousSibling,i);var _iteratorNormalCompletion318=true;var _didIteratorError318=false;var _iteratorError318=undefined;try{for(var _iterator318=e.item.getChildren()[Symbol.iterator](),_step318;!(_iteratorNormalCompletion318=(_step318=_iterator318.next()).done);_iteratorNormalCompletion318=true){var _t273=_step318.value;n.consumable.consume(_t273,"insert");}}catch(err){_didIteratorError318=true;_iteratorError318=err;}finally{try{if(!_iteratorNormalCompletion318&&_iterator318["return"]!=null){_iterator318["return"]();}}finally{if(_didIteratorError318){throw _iteratorError318;}}}}function fg(t,e,n){if("listItem"!=e.item.name){var _t274=n.mapper.toViewPosition(e.range.start);var _i184=n.writer,_o87=[];for(;("ul"==_t274.parent.name||"ol"==_t274.parent.name)&&"li"==(_t274=_i184.breakContainer(_t274)).parent.name;){var _e248=_t274,_n221=_i184.createPositionAt(_t274.parent,"end");if(!_e248.isEqual(_n221)){var _t275=_i184.remove(_i184.createRange(_e248,_n221));_o87.push(_t275);}_t274=_i184.createPositionAfter(_t274.parent);}if(_o87.length>0){for(var _e249=0;_e249<_o87.length;_e249++){var _n222=_t274.nodeBefore;if(_t274=_i184.insert(_t274,_o87[_e249]).end,_e249>0){var _e250=rg(_i184,_n222,_n222.nextSibling);_e250&&_e250.parent==_n222&&_t274.offset--;}}rg(_i184,_t274.nodeBefore,_t274.nodeAfter);}}}function mg(t,e,n){var i=n.mapper.toViewPosition(e.position),o=i.nodeBefore,r=i.nodeAfter;rg(n.writer,o,r);}function gg(t,e,n){if(n.consumable.consume(e.viewItem,{name:!0})){var _t276=n.writer,_i185=this.conversionApi.store,_o88=_t276.createElement("listItem");_i185.indent=_i185.indent||0,_t276.setAttribute("listIndent",_i185.indent,_o88);var _r44=e.viewItem.parent&&"ol"==e.viewItem.parent.name?"numbered":"bulleted";_t276.setAttribute("listType",_r44,_o88),_i185.indent++;var _s29=n.splitToAllowedParent(_o88,e.modelCursor);if(!_s29)return;_t276.insert(_o88,_s29.position);var _a16=function(t,e,n){var i=n.writer,o=n.schema;var r=i.createPositionAfter(t);var _iteratorNormalCompletion319=true;var _didIteratorError319=false;var _iteratorError319=undefined;try{for(var _iterator319=e[Symbol.iterator](),_step319;!(_iteratorNormalCompletion319=(_step319=_iterator319.next()).done);_iteratorNormalCompletion319=true){var _s30=_step319.value;if("ul"==_s30.name||"ol"==_s30.name)r=n.convertItem(_s30,r).modelCursor;else{var _e251=n.convertItem(_s30,i.createPositionAt(t,"end")),_a17=_e251.modelRange.start.nodeAfter,_c9=_a17&&_a17.is("element")&&!o.checkChild(t,_a17.name);_c9&&(t=_e251.modelCursor.parent.is("listItem")?_e251.modelCursor.parent:_g(_e251.modelCursor),r=i.createPositionAfter(t));}}}catch(err){_didIteratorError319=true;_iteratorError319=err;}finally{try{if(!_iteratorNormalCompletion319&&_iterator319["return"]!=null){_iterator319["return"]();}}finally{if(_didIteratorError319){throw _iteratorError319;}}}return r;}(_o88,e.viewItem.getChildren(),n);_i185.indent--,e.modelRange=_t276.createRange(e.modelCursor,_a16),_s29.cursorParent?e.modelCursor=_t276.createPositionAt(_s29.cursorParent,0):e.modelCursor=e.modelRange.end;}}function pg(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){var _t277=Array.from(e.viewItem.getChildren());for(var _i186=0,_t278=_t277;_i186<_t278.length;_i186++){var _e252=_t278[_i186];_e252.is("li")||_e252._remove();}}}function bg(t,e,n){if(n.consumable.test(e.viewItem,{name:!0})){if(0===e.viewItem.childCount)return;var _t279=_toConsumableArray(e.viewItem.getChildren());var _n223=!1,_i187=!0;var _iteratorNormalCompletion320=true;var _didIteratorError320=false;var _iteratorError320=undefined;try{for(var _iterator320=_t279[Symbol.iterator](),_step320;!(_iteratorNormalCompletion320=(_step320=_iterator320.next()).done);_iteratorNormalCompletion320=true){var _e253=_step320.value;!_n223||_e253.is("ul")||_e253.is("ol")||_e253._remove(),_e253.is("text")?(_i187&&(_e253._data=_e253.data.replace(/^\s+/,"")),(!_e253.nextSibling||_e253.nextSibling.is("ul")||_e253.nextSibling.is("ol"))&&(_e253._data=_e253.data.replace(/\s+$/,""))):(_e253.is("ul")||_e253.is("ol"))&&(_n223=!0),_i187=!1;}}catch(err){_didIteratorError320=true;_iteratorError320=err;}finally{try{if(!_iteratorNormalCompletion320&&_iterator320["return"]!=null){_iterator320["return"]();}}finally{if(_didIteratorError320){throw _iteratorError320;}}}}}function wg(t){return function(e,n){if(n.isPhantom)return;var i=n.modelPosition.nodeBefore;if(i&&i.is("listItem")){var _e254=n.mapper.toViewElement(i),_o89=_e254.getAncestors().find(function(t){return t.is("ul")||t.is("ol");}),_r45=t.createPositionAt(_e254,0).getWalker();var _iteratorNormalCompletion321=true;var _didIteratorError321=false;var _iteratorError321=undefined;try{for(var _iterator321=_r45[Symbol.iterator](),_step321;!(_iteratorNormalCompletion321=(_step321=_iterator321.next()).done);_iteratorNormalCompletion321=true){var _t280=_step321.value;if("elementStart"==_t280.type&&_t280.item.is("li")){n.viewPosition=_t280.previousPosition;break;}if("elementEnd"==_t280.type&&_t280.item==_o89){n.viewPosition=_t280.nextPosition;break;}}}catch(err){_didIteratorError321=true;_iteratorError321=err;}finally{try{if(!_iteratorNormalCompletion321&&_iterator321["return"]!=null){_iterator321["return"]();}}finally{if(_didIteratorError321){throw _iteratorError321;}}}}};}function kg(t,_ref37){var _ref38=_slicedToArray(_ref37,2),e=_ref38[0],n=_ref38[1];var i,o=e.is("documentFragment")?e.getChild(0):e;if(i=n?this.createSelection(n):this.document.selection,o&&o.is("listItem")){var _t281=i.getFirstPosition();var _e255=null;if(_t281.parent.is("listItem")?_e255=_t281.parent:_t281.nodeBefore&&_t281.nodeBefore.is("listItem")&&(_e255=_t281.nodeBefore),_e255){var _t282=_e255.getAttribute("listIndent");if(_t282>0)for(;o&&o.is("listItem");){o._setAttribute("listIndent",o.getAttribute("listIndent")+_t282),o=o.nextSibling;}}}}function _g(t){var e=new qs({startPosition:t});var n;do{n=e.next();}while(!n.value.item.is("listItem"));return n.value.item;}function vg(t,e,n,i,o,r){var s=ag(e.nodeBefore,{sameIndent:!0,smallerIndent:!0,listIndent:t,foo:"b"}),a=o.mapper,c=o.writer,l=s?s.getAttribute("listIndent"):null;var d;if(s){if(l==t){var _t283=a.toViewElement(s).parent;d=c.createPositionAfter(_t283);}else{var _t284=r.createPositionAt(s,"end");d=a.toViewPosition(_t284);}}else d=n;d=sg(d);for(var _i188=0,_arr2=_toConsumableArray(i.getChildren());_i188<_arr2.length;_i188++){var _t285=_arr2[_i188];(_t285.is("ul")||_t285.is("ol"))&&(d=c.move(c.createRangeOn(_t285),d).end,rg(c,_t285,_t285.nextSibling),rg(c,_t285.previousSibling,_t285));}}var yg=/*#__PURE__*/function(_Kl44){_inherits(yg,_Kl44);function yg(){_classCallCheck(this,yg);return _possibleConstructorReturn(this,_getPrototypeOf(yg).apply(this,arguments));}_createClass(yg,[{key:"init",value:function init(){var _this220=this;var t=this.editor;t.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var e=t.data,n=t.editing;t.model.document.registerPostFixer(function(e){return function(t,e){var n=t.document.differ.getChanges(),i=new Map();var o=!1;var _iteratorNormalCompletion322=true;var _didIteratorError322=false;var _iteratorError322=undefined;try{for(var _iterator322=n[Symbol.iterator](),_step322;!(_iteratorNormalCompletion322=(_step322=_iterator322.next()).done);_iteratorNormalCompletion322=true){var _t286=_step322.value;if("insert"==_t286.type&&"listItem"==_t286.name)r(_t286.position);else if("insert"==_t286.type&&"listItem"!=_t286.name){if("$text"!=_t286.name){var _n225=_t286.position.nodeAfter;_n225.hasAttribute("listIndent")&&(e.removeAttribute("listIndent",_n225),o=!0),_n225.hasAttribute("listType")&&(e.removeAttribute("listType",_n225),o=!0);}r(_t286.position.getShiftedBy(_t286.length));}else"remove"==_t286.type&&"listItem"==_t286.name?r(_t286.position):"attribute"==_t286.type&&"listIndent"==_t286.attributeKey?r(_t286.range.start):"attribute"==_t286.type&&"listType"==_t286.attributeKey&&r(_t286.range.start);}}catch(err){_didIteratorError322=true;_iteratorError322=err;}finally{try{if(!_iteratorNormalCompletion322&&_iterator322["return"]!=null){_iterator322["return"]();}}finally{if(_didIteratorError322){throw _iteratorError322;}}}var _iteratorNormalCompletion323=true;var _didIteratorError323=false;var _iteratorError323=undefined;try{for(var _iterator323=i.values()[Symbol.iterator](),_step323;!(_iteratorNormalCompletion323=(_step323=_iterator323.next()).done);_iteratorNormalCompletion323=true){var _t287=_step323.value;s(_t287),a(_t287);}}catch(err){_didIteratorError323=true;_iteratorError323=err;}finally{try{if(!_iteratorNormalCompletion323&&_iterator323["return"]!=null){_iterator323["return"]();}}finally{if(_didIteratorError323){throw _iteratorError323;}}}return o;function r(t){var e=t.nodeBefore;if(e&&e.is("listItem")){var _n224=e;if(i.has(_n224))return;for(;_n224.previousSibling&&_n224.previousSibling.is("listItem");){if(_n224=_n224.previousSibling,i.has(_n224))return;}i.set(t.nodeBefore,_n224);}else{var _e256=t.nodeAfter;_e256&&_e256.is("listItem")&&i.set(_e256,_e256);}}function s(t){var n=0,i=null;for(;t&&t.is("listItem");){var _r46=t.getAttribute("listIndent");if(_r46>n){var _s31=void 0;null===i?(i=_r46-n,_s31=n):(i>_r46&&(i=_r46),_s31=_r46-i),e.setAttribute("listIndent",_s31,t),o=!0;}else i=null,n=t.getAttribute("listIndent")+1;t=t.nextSibling;}}function a(t){var n=[],i=null;for(;t&&t.is("listItem");){var _r47=t.getAttribute("listIndent");if(i&&i.getAttribute("listIndent")>_r47&&(n=n.slice(0,_r47+1)),0!=_r47)if(n[_r47]){var _i189=n[_r47];t.getAttribute("listType")!=_i189&&(e.setAttribute("listType",_i189,t),o=!0);}else n[_r47]=t.getAttribute("listType");i=t,t=t.nextSibling;}}}(t.model,e);}),n.mapper.registerViewToModelLength("li",xg),e.mapper.registerViewToModelLength("li",xg),n.mapper.on("modelToViewPosition",wg(n.view)),n.mapper.on("viewToModelPosition",function(t){return function(e,n){var i=n.viewPosition,o=i.parent,r=n.mapper;if("ul"==o.name||"ol"==o.name){if(i.isAtEnd){var _e257=r.toModelElement(i.nodeBefore),_o90=r.getModelLength(i.nodeBefore);n.modelPosition=t.createPositionBefore(_e257).getShiftedBy(_o90);}else{var _e258=r.toModelElement(i.nodeAfter);n.modelPosition=t.createPositionBefore(_e258);}e.stop();}else if("li"==o.name&&i.nodeBefore&&("ul"==i.nodeBefore.name||"ol"==i.nodeBefore.name)){var _s32=r.toModelElement(o);var _a18=1,_c10=i.nodeBefore;for(;_c10&&(_c10.is("ul")||_c10.is("ol"));){_a18+=r.getModelLength(_c10),_c10=_c10.previousSibling;}n.modelPosition=t.createPositionBefore(_s32).getShiftedBy(_a18),e.stop();}};}(t.model)),e.mapper.on("modelToViewPosition",wg(n.view)),n.downcastDispatcher.on("insert",fg,{priority:"high"}),n.downcastDispatcher.on("insert:listItem",dg(t.model)),e.downcastDispatcher.on("insert",fg,{priority:"high"}),e.downcastDispatcher.on("insert:listItem",dg(t.model)),n.downcastDispatcher.on("attribute:listType:listItem",hg,{priority:"high"}),n.downcastDispatcher.on("attribute:listType:listItem",ug,{priority:"low"}),n.downcastDispatcher.on("attribute:listIndent:listItem",function(t){return function(e,n,i){if(!i.consumable.consume(n.item,"attribute:listIndent"))return;var o=i.mapper.toViewElement(n.item),r=i.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,c=r.createRangeOn(s);r.remove(c),a&&a.nextSibling&&rg(r,a,a.nextSibling),vg(n.attributeOldValue+1,n.range.start,c.start,o,i,t),og(n.item,o,i,t);var _iteratorNormalCompletion324=true;var _didIteratorError324=false;var _iteratorError324=undefined;try{for(var _iterator324=n.item.getChildren()[Symbol.iterator](),_step324;!(_iteratorNormalCompletion324=(_step324=_iterator324.next()).done);_iteratorNormalCompletion324=true){var _t288=_step324.value;i.consumable.consume(_t288,"insert");}}catch(err){_didIteratorError324=true;_iteratorError324=err;}finally{try{if(!_iteratorNormalCompletion324&&_iterator324["return"]!=null){_iterator324["return"]();}}finally{if(_didIteratorError324){throw _iteratorError324;}}}};}(t.model)),n.downcastDispatcher.on("remove:listItem",function(t){return function(e,n,i){var o=i.mapper.toViewPosition(n.position).getLastMatchingPosition(function(t){return!t.item.is("li");}).nodeAfter,r=i.writer;r.breakContainer(r.createPositionBefore(o)),r.breakContainer(r.createPositionAfter(o));var s=o.parent,a=s.previousSibling,c=r.createRangeOn(s),l=r.remove(c);a&&a.nextSibling&&rg(r,a,a.nextSibling),vg(i.mapper.toModelElement(o).getAttribute("listIndent")+1,n.position,c.start,o,i,t);var _iteratorNormalCompletion325=true;var _didIteratorError325=false;var _iteratorError325=undefined;try{for(var _iterator325=r.createRangeIn(l).getItems()[Symbol.iterator](),_step325;!(_iteratorNormalCompletion325=(_step325=_iterator325.next()).done);_iteratorNormalCompletion325=true){var _t289=_step325.value;i.mapper.unbindViewElement(_t289);}}catch(err){_didIteratorError325=true;_iteratorError325=err;}finally{try{if(!_iteratorNormalCompletion325&&_iterator325["return"]!=null){_iterator325["return"]();}}finally{if(_didIteratorError325){throw _iteratorError325;}}}e.stop();};}(t.model)),n.downcastDispatcher.on("remove",mg,{priority:"low"}),e.upcastDispatcher.on("element:ul",pg,{priority:"high"}),e.upcastDispatcher.on("element:ol",pg,{priority:"high"}),e.upcastDispatcher.on("element:li",bg,{priority:"high"}),e.upcastDispatcher.on("element:li",gg),t.model.on("insertContent",kg,{priority:"high"}),t.commands.add("numberedList",new Xm(t,"numbered")),t.commands.add("bulletedList",new Xm(t,"bulleted")),t.commands.add("indentList",new ng(t,"forward")),t.commands.add("outdentList",new ng(t,"backward"));var i=n.view.document;this.listenTo(i,"enter",function(t,e){var n=_this220.editor.model.document,i=n.selection.getLastPosition().parent;n.selection.isCollapsed&&"listItem"==i.name&&i.isEmpty&&(_this220.editor.execute("outdentList"),e.preventDefault(),t.stop());}),this.listenTo(i,"delete",function(t,e){if("backward"!==e.direction)return;var n=_this220.editor.model.document.selection;if(!n.isCollapsed)return;var i=n.getFirstPosition();if(!i.isAtStart)return;var o=i.parent;"listItem"===o.name&&(o.previousSibling&&"listItem"===o.previousSibling.name||(_this220.editor.execute("outdentList"),e.preventDefault(),t.stop()));},{priority:"high"});var o=function o(t){return function(e,n){_this220.editor.commands.get(t).isEnabled&&(_this220.editor.execute(t),n());};};t.keystrokes.set("Tab",o("indentList")),t.keystrokes.set("Shift+Tab",o("outdentList"));}},{key:"afterInit",value:function afterInit(){var t=this.editor.commands,e=t.get("indent"),n=t.get("outdent");e&&e.registerChildCommand(t.get("indentList")),n&&n.registerChildCommand(t.get("outdentList"));}}],[{key:"requires",get:function get(){return[uf];}}]);return yg;}(Kl);function xg(t){var e=1;var _iteratorNormalCompletion326=true;var _didIteratorError326=false;var _iteratorError326=undefined;try{for(var _iterator326=t.getChildren()[Symbol.iterator](),_step326;!(_iteratorNormalCompletion326=(_step326=_iterator326.next()).done);_iteratorNormalCompletion326=true){var _n226=_step326.value;if("ul"==_n226.name||"ol"==_n226.name){var _iteratorNormalCompletion327=true;var _didIteratorError327=false;var _iteratorError327=undefined;try{for(var _iterator327=_n226.getChildren()[Symbol.iterator](),_step327;!(_iteratorNormalCompletion327=(_step327=_iterator327.next()).done);_iteratorNormalCompletion327=true){var _t290=_step327.value;e+=xg(_t290);}}catch(err){_didIteratorError327=true;_iteratorError327=err;}finally{try{if(!_iteratorNormalCompletion327&&_iterator327["return"]!=null){_iterator327["return"]();}}finally{if(_didIteratorError327){throw _iteratorError327;}}}}}}catch(err){_didIteratorError326=true;_iteratorError326=err;}finally{try{if(!_iteratorNormalCompletion326&&_iterator326["return"]!=null){_iterator326["return"]();}}finally{if(_didIteratorError326){throw _iteratorError326;}}}return e;}var Ag='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Tg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';var Cg=/*#__PURE__*/function(_Kl45){_inherits(Cg,_Kl45);function Cg(){_classCallCheck(this,Cg);return _possibleConstructorReturn(this,_getPrototypeOf(Cg).apply(this,arguments));}_createClass(Cg,[{key:"init",value:function init(){var t=this.editor.t;cg(this.editor,"numberedList",t("q"),Ag),cg(this.editor,"bulletedList",t("r"),Tg);}}]);return Cg;}(Kl);function Pg(t,e){return function(t){t.on("attribute:url:media",n);};function n(n,i,o){if(!o.consumable.consume(i.item,n.name))return;var r=i.attributeNewValue,s=o.writer,a=o.mapper.toViewElement(i.item);s.remove(s.createRangeIn(a));var c=t.getMediaViewElement(s,r,e);s.insert(s.createPositionAt(a,0),c);}}function Sg(t,e,n,i){var o=t.createContainerElement("figure",{"class":"media"});return o.getFillerOffset=Ig,t.insert(t.createPositionAt(o,0),e.getMediaViewElement(t,n,i)),o;}function Mg(t){var e=t.getSelectedElement();return e&&e.is("media")?e:null;}function Eg(t,e,n){t.change(function(i){var o=i.createElement("media",{url:e});t.insertContent(o,n),i.setSelection(o,"on");});}function Ig(){return null;}var Ng=/*#__PURE__*/function(_ed19){_inherits(Ng,_ed19);function Ng(){_classCallCheck(this,Ng);return _possibleConstructorReturn(this,_getPrototypeOf(Ng).apply(this,arguments));}_createClass(Ng,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document.selection,n=t.schema,i=e.getFirstPosition(),o=Mg(e);var r=i.parent;r!=r.root&&(r=r.parent),this.value=o?o.getAttribute("url"):null,this.isEnabled=n.checkChild(r,"media");}},{key:"execute",value:function execute(t){var e=this.editor.model,n=e.document.selection,i=Mg(n);if(i)e.change(function(e){e.setAttribute("url",t,i);});else{var _i190=nu(n,e);Eg(e,t,_i190);}}}]);return Ng;}(ed);var Og='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';var Rg="0 0 64 42";var Dg=/*#__PURE__*/function(){function Dg(t,e){_classCallCheck(this,Dg);var n=e.providers,i=e.extraProviders||[],o=new Set(e.removeProviders),r=n.concat(i).filter(function(t){var e=t.name;return e?!o.has(e):(console.warn(Object(Gn.a)("media-embed-no-provider-name: The configured media provider has no name and cannot be used."),{provider:t}),!1);});this.locale=t,this.providerDefinitions=r;}_createClass(Dg,[{key:"hasMedia",value:function hasMedia(t){return!!this._getMedia(t);}},{key:"getMediaViewElement",value:function getMediaViewElement(t,e,n){return this._getMedia(e).getViewElement(t,n);}},{key:"_getMedia",value:function _getMedia(t){if(!t)return new Lg(this.locale);t=t.trim();var _iteratorNormalCompletion328=true;var _didIteratorError328=false;var _iteratorError328=undefined;try{for(var _iterator328=this.providerDefinitions[Symbol.iterator](),_step328;!(_iteratorNormalCompletion328=(_step328=_iterator328.next()).done);_iteratorNormalCompletion328=true){var _e259=_step328.value;var _n227=_e259.html;var _i191=_e259.url;Array.isArray(_i191)||(_i191=[_i191]);var _iteratorNormalCompletion329=true;var _didIteratorError329=false;var _iteratorError329=undefined;try{for(var _iterator329=_i191[Symbol.iterator](),_step329;!(_iteratorNormalCompletion329=(_step329=_iterator329.next()).done);_iteratorNormalCompletion329=true){var _e260=_step329.value;var _i192=this._getUrlMatches(t,_e260);if(_i192)return new Lg(this.locale,t,_i192,_n227);}}catch(err){_didIteratorError329=true;_iteratorError329=err;}finally{try{if(!_iteratorNormalCompletion329&&_iterator329["return"]!=null){_iterator329["return"]();}}finally{if(_didIteratorError329){throw _iteratorError329;}}}}}catch(err){_didIteratorError328=true;_iteratorError328=err;}finally{try{if(!_iteratorNormalCompletion328&&_iterator328["return"]!=null){_iterator328["return"]();}}finally{if(_didIteratorError328){throw _iteratorError328;}}}return null;}},{key:"_getUrlMatches",value:function _getUrlMatches(t,e){var n=t.match(e);if(n)return n;var i=t.replace(/^https?:\/\//,"");return(n=i.match(e))?n:(n=(i=i.replace(/^www\./,"")).match(e))||null;}}]);return Dg;}();var Lg=/*#__PURE__*/function(){function Lg(t,e,n,i){_classCallCheck(this,Lg);this.url=this._getValidUrl(e),this._t=t.t,this._match=n,this._previewRenderer=i;}_createClass(Lg,[{key:"getViewElement",value:function getViewElement(t,e){var n={};if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n["class"]="ck-media__wrapper");var _i193=this._getPreviewHtml(e);return t.createUIElement("div",n,function(t){var e=this.toDomElement(t);return e.innerHTML=_i193,e;});}return this.url&&(n.url=this.url),t.createEmptyElement("oembed",n);}},{key:"_getPreviewHtml",value:function _getPreviewHtml(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():"";}},{key:"_getPlaceholderHtml",value:function _getPlaceholderHtml(){var t=new qd(),e=new Hd();return t.text=this._t("Open media in new tab"),e.content=Og,e.viewBox=Rg,new bl({tag:"div",attributes:{"class":"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{"class":"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{"class":"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{"class":"ck-media__placeholder__url__text"},children:[this.url]},t]}]}).render().outerHTML;}},{key:"_getValidUrl",value:function _getValidUrl(t){return t?t.match(/^https?/)?t:"https://"+t:null;}}]);return Lg;}();n(79);var jg=/*#__PURE__*/function(_Kl46){_inherits(jg,_Kl46);_createClass(jg,null,[{key:"pluginName",get:function get(){return"MediaEmbedEditing";}}]);function jg(t){var _this221;_classCallCheck(this,jg);_this221=_possibleConstructorReturn(this,_getPrototypeOf(jg).call(this,t)),t.config.define("mediaEmbed",{providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function html(t){return'<div style="position: relative; padding-bottom: 100%; height: 0; ">'+"<iframe src=\"https://www.dailymotion.com/embed/video/".concat(t[1],"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>';}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function html(t){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;">'+"<iframe src=\"https://open.spotify.com/embed/".concat(t[1],"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>';}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function html(t){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">'+"<iframe src=\"https://www.youtube.com/embed/".concat(t[1],"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>';}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function html(t){return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">'+"<iframe src=\"https://player.vimeo.com/video/".concat(t[1],"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>';}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),_this221.registry=new Dg(t.locale,t.config.get("mediaEmbed"));return _this221;}_createClass(jg,[{key:"init",value:function init(){var t=this.editor,e=t.model.schema,n=t.t,i=t.conversion,o=t.config.get("mediaEmbed.previewsInData"),r=this.registry;t.commands.add("mediaEmbed",new Ng(t)),e.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),i["for"]("dataDowncast").elementToElement({model:"media",view:function view(t,e){var n=t.getAttribute("url");return Sg(e,r,n,{renderMediaPreview:n&&o});}}),i["for"]("dataDowncast").add(Pg(r,{renderMediaPreview:o})),i["for"]("editingDowncast").elementToElement({model:"media",view:function view(t,e){var i=t.getAttribute("url");return function(t,e,n){return e.setCustomProperty("media",!0,t),Xh(t,e,{label:n});}(Sg(e,r,i,{renderForEditingView:!0}),e,n("am"));}}),i["for"]("editingDowncast").add(Pg(r,{renderForEditingView:!0})),i["for"]("upcast").elementToElement({view:{name:"oembed",attributes:{url:!0}},model:function model(t,e){var n=t.getAttribute("url");if(r.hasMedia(n))return e.createElement("media",{url:n});}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function model(t,e){var n=t.getAttribute("data-oembed-url");if(r.hasMedia(n))return e.createElement("media",{url:n});}});}}]);return jg;}(Kl);var Vg=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=]+$/;var zg=/*#__PURE__*/function(_Kl47){_inherits(zg,_Kl47);_createClass(zg,null,[{key:"requires",get:function get(){return[td,Qd];}},{key:"pluginName",get:function get(){return"AutoMediaEmbed";}}]);function zg(t){var _this222;_classCallCheck(this,zg);_this222=_possibleConstructorReturn(this,_getPrototypeOf(zg).call(this,t)),_this222._timeoutId=null,_this222._positionToInsert=null;return _this222;}_createClass(zg,[{key:"init",value:function init(){var _this223=this;var t=this.editor,e=t.model.document;this.listenTo(t.plugins.get(td),"inputTransformation",function(){var t=e.selection.getFirstRange(),n=Dc.fromPosition(t.start);n.stickiness="toPrevious";var i=Dc.fromPosition(t.end);i.stickiness="toNext",e.once("change:data",function(){_this223._embedMediaBetweenPositions(n,i),n.detach(),i.detach();},{priority:"high"});}),t.commands.get("undo").on("execute",function(){_this223._timeoutId&&(nr.window.clearTimeout(_this223._timeoutId),_this223._positionToInsert.detach(),_this223._timeoutId=null,_this223._positionToInsert=null);},{priority:"high"});}},{key:"_embedMediaBetweenPositions",value:function _embedMediaBetweenPositions(t,e){var _this224=this;var n=this.editor,i=n.plugins.get(jg).registry,o=new oa(t,e),r=o.getWalker({ignoreElementEnd:!0});var s="";var _iteratorNormalCompletion330=true;var _didIteratorError330=false;var _iteratorError330=undefined;try{for(var _iterator330=r[Symbol.iterator](),_step330;!(_iteratorNormalCompletion330=(_step330=_iterator330.next()).done);_iteratorNormalCompletion330=true){var _t291=_step330.value;_t291.item.is("textProxy")&&(s+=_t291.item.data);}}catch(err){_didIteratorError330=true;_iteratorError330=err;}finally{try{if(!_iteratorNormalCompletion330&&_iterator330["return"]!=null){_iterator330["return"]();}}finally{if(_didIteratorError330){throw _iteratorError330;}}}if(!(s=s.trim()).match(Vg))return;if(!i.hasMedia(s))return;n.commands.get("mediaEmbed").isEnabled&&(this._positionToInsert=Dc.fromPosition(t),this._timeoutId=nr.window.setTimeout(function(){n.model.change(function(t){var e;_this224._timeoutId=null,t.remove(o),"$graveyard"!==_this224._positionToInsert.root.rootName&&(e=_this224._positionToInsert),Eg(n.model,s,e),_this224._positionToInsert.detach(),_this224._positionToInsert=null;});},100));}}]);return zg;}(Kl);n(81);var Bg=/*#__PURE__*/function(_Dl25){_inherits(Bg,_Dl25);function Bg(t,e){var _this225;_classCallCheck(this,Bg);_this225=_possibleConstructorReturn(this,_getPrototypeOf(Bg).call(this,e));var n=e.t;_this225.focusTracker=new sl(),_this225.keystrokes=new Jc(),_this225.urlInputView=_this225._createUrlInput(),_this225.saveButtonView=_this225._createButton(n("bd"),vu,"ck-button-save"),_this225.saveButtonView.type="submit",_this225.cancelButtonView=_this225._createButton(n("be"),yu,"ck-button-cancel","cancel"),_this225._focusables=new gl(),_this225._focusCycler=new ql({focusables:_this225._focusables,focusTracker:_this225.focusTracker,keystrokeHandler:_this225.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),_this225._validators=t,_this225.setTemplate({tag:"form",attributes:{"class":["ck","ck-media-form"],tabindex:"-1"},children:[_this225.urlInputView,_this225.saveButtonView,_this225.cancelButtonView]});return _this225;}_createClass(Bg,[{key:"render",value:function render(){var _this226=this;_get(_getPrototypeOf(Bg.prototype),"render",this).call(this),_u({view:this}),[this.urlInputView,this.saveButtonView,this.cancelButtonView].forEach(function(t){_this226._focusables.add(t),_this226.focusTracker.add(t.element);}),this.keystrokes.listenTo(this.element);var t=function t(_t292){return _t292.stopPropagation();};this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t),this.listenTo(this.urlInputView.element,"selectstart",function(t,e){e.stopPropagation();},{priority:"high"});}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"isValid",value:function isValid(){this.resetFormStatus();var _iteratorNormalCompletion331=true;var _didIteratorError331=false;var _iteratorError331=undefined;try{for(var _iterator331=this._validators[Symbol.iterator](),_step331;!(_iteratorNormalCompletion331=(_step331=_iterator331.next()).done);_iteratorNormalCompletion331=true){var _t293=_step331.value;var _e261=_t293(this);if(_e261)return this.urlInputView.errorText=_e261,!1;}}catch(err){_didIteratorError331=true;_iteratorError331=err;}finally{try{if(!_iteratorNormalCompletion331&&_iterator331["return"]!=null){_iterator331["return"]();}}finally{if(_didIteratorError331){throw _iteratorError331;}}}return!0;}},{key:"resetFormStatus",value:function resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault;}},{key:"_createUrlInput",value:function _createUrlInput(){var _this227=this;var t=this.locale.t,e=new wu(this.locale,ku),n=e.inputView;return this._urlInputViewInfoDefault=t("bg"),this._urlInputViewInfoTip=t("bh"),e.label=t("bi"),e.infoText=this._urlInputViewInfoDefault,n.placeholder="https://example.com",n.on("input",function(){e.infoText=n.element.value?_this227._urlInputViewInfoTip:_this227._urlInputViewInfoDefault;}),e;}},{key:"_createButton",value:function _createButton(t,e,n,i){var o=new Wd(this.locale);return o.set({label:t,icon:e,tooltip:!0}),o.extendTemplate({attributes:{"class":n}}),i&&o.delegate("execute").to(this,i),o;}},{key:"url",get:function get(){return this.urlInputView.inputView.element.value.trim();},set:function set(t){this.urlInputView.inputView.element.value=t.trim();}}]);return Bg;}(Dl);var Fg='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18.68 2.53c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.08c0-.58-.01-.55.6-.55h17.38zM15.77 14.5v-10H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 6.677a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V6.676z"/></svg>';var Ug=/*#__PURE__*/function(_Kl48){_inherits(Ug,_Kl48);function Ug(){_classCallCheck(this,Ug);return _possibleConstructorReturn(this,_getPrototypeOf(Ug).apply(this,arguments));}_createClass(Ug,[{key:"init",value:function init(){var _this228=this;var t=this.editor,e=t.commands.get("mediaEmbed"),n=t.plugins.get(jg).registry;this.form=new Bg(function(t,e){return[function(e){if(!e.url.length)return t("ao");},function(n){if(!e.hasMedia(n.url))return t("ap");}];}(t.t,n),t.locale),t.ui.componentFactory.add("mediaEmbed",function(n){var i=Sf(n);return _this228._setUpDropdown(i,_this228.form,e,t),_this228._setUpForm(_this228.form,i,e),i;});}},{key:"_setUpDropdown",value:function _setUpDropdown(t,e,n){var i=this.editor,o=i.t,r=t.buttonView;function s(){i.editing.view.focus(),t.isOpen=!1;}t.bind("isEnabled").to(n),t.panelView.children.add(e),r.set({label:o("an"),icon:Fg,tooltip:!0}),r.on("open",function(){e.url=n.value||"",e.urlInputView.select(),e.focus();},{priority:"low"}),t.on("submit",function(){e.isValid()&&(i.execute("mediaEmbed",e.url),s());}),t.on("change:isOpen",function(){return e.resetFormStatus();}),t.on("cancel",function(){return s();});}},{key:"_setUpForm",value:function _setUpForm(t,e,n){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(n,"value"),t.urlInputView.bind("isReadOnly").to(n,"isEnabled",function(t){return!t;}),t.saveButtonView.bind("isEnabled").to(n);}}],[{key:"requires",get:function get(){return[jg];}},{key:"pluginName",get:function get(){return"MediaEmbedUI";}}]);return Ug;}(Kl);n(83);function Hg(t,e){if(!t.childCount)return;var n=new of(),i=function(t,e){var n=e.createRangeIn(t),i=new bi({name:/^p|h\d+$/,styles:{"mso-list":/.*/}}),o=[];var _iteratorNormalCompletion332=true;var _didIteratorError332=false;var _iteratorError332=undefined;try{for(var _iterator332=n[Symbol.iterator](),_step332;!(_iteratorNormalCompletion332=(_step332=_iterator332.next()).done);_iteratorNormalCompletion332=true){var _t294=_step332.value;if("elementStart"===_t294.type&&i.match(_t294.item)){var _e262=qg(_t294.item);o.push({element:_t294.item,id:_e262.id,order:_e262.order,indent:_e262.indent});}}}catch(err){_didIteratorError332=true;_iteratorError332=err;}finally{try{if(!_iteratorNormalCompletion332&&_iterator332["return"]!=null){_iterator332["return"]();}}finally{if(_didIteratorError332){throw _iteratorError332;}}}return o;}(t,n);if(!i.length)return;var o=null;i.forEach(function(t,r){if(!o||function(t,e){if(t.id!==e.id)return!0;var n=e.element.previousSibling;if(!n)return!0;return!Wg(n);}(i[r-1],t)){var _i194=function(t,e){var n=/mso-level-number-format:([^;]*);/gi,i=new RegExp("@list l".concat(t.id,":level").concat(t.indent,"\\s*({[^}]*)"),"gi").exec(e);var o="decimal";if(i&&i[1]){var _t295=n.exec(i[1]);_t295&&_t295[1]&&(o=_t295[1].trim());}return{type:"bullet"!==o&&"image"!==o?"ol":"ul",style:o};}(t,e);o=function(t,e,n){var i=new ki(t.type),o=e.parent.getChildIndex(e);return n.insertChild(o,i,e.parent),i;}(_i194,t.element,n);}var s=function(t,e){return function(t,e){var n=new bi({name:"span",styles:{"mso-list":"Ignore"}}),i=e.createRangeIn(t);var _iteratorNormalCompletion333=true;var _didIteratorError333=false;var _iteratorError333=undefined;try{for(var _iterator333=i[Symbol.iterator](),_step333;!(_iteratorNormalCompletion333=(_step333=_iterator333.next()).done);_iteratorNormalCompletion333=true){var _t296=_step333.value;"elementStart"===_t296.type&&n.match(_t296.item)&&e.remove(_t296.item);}}catch(err){_didIteratorError333=true;_iteratorError333=err;}finally{try{if(!_iteratorNormalCompletion333&&_iterator333["return"]!=null){_iterator333["return"]();}}finally{if(_didIteratorError333){throw _iteratorError333;}}}}(t,e),e.rename("li",t);}(t.element,n);n.appendChild(s,o);});}function qg(t){var e={},n=t.getStyle("mso-list");return n&&(e.id=parseInt(n.match(/(^|\s+)l(\d+)/i)[2]),e.order=parseInt(n.match(/\s*lfo(\d+)/i)[1]),e.indent=parseInt(n.match(/\s*level(\d+)/i)[1])),e;}function Wg(t){return t.is("ol")||t.is("ul");}var Yg=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;var $g=/*#__PURE__*/function(){function $g(){_classCallCheck(this,$g);}_createClass($g,[{key:"isActive",value:function isActive(t){return Yg.test(t);}},{key:"execute",value:function execute(t){var e=new of();!function(t,e){var _iteratorNormalCompletion334=true;var _didIteratorError334=false;var _iteratorError334=undefined;try{for(var _iterator334=t.getChildren()[Symbol.iterator](),_step334;!(_iteratorNormalCompletion334=(_step334=_iterator334.next()).done);_iteratorNormalCompletion334=true){var _n228=_step334.value;if(_n228.is("b")&&"normal"===_n228.getStyle("font-weight")){var _i195=t.getChildIndex(_n228);e.remove(_n228),e.insertChild(_i195,_n228.getChildren(),t);}}}catch(err){_didIteratorError334=true;_iteratorError334=err;}finally{try{if(!_iteratorNormalCompletion334&&_iterator334["return"]!=null){_iterator334["return"]();}}finally{if(_didIteratorError334){throw _iteratorError334;}}}}(t.content,e),function(t,e){var _iteratorNormalCompletion335=true;var _didIteratorError335=false;var _iteratorError335=undefined;try{for(var _iterator335=e.createRangeIn(t)[Symbol.iterator](),_step335;!(_iteratorNormalCompletion335=(_step335=_iterator335.next()).done);_iteratorNormalCompletion335=true){var _n229=_step335.value;var _t297=_n229.item;if(_t297.is("li")){var _n230=_t297.nextSibling;_n230&&Wg(_n230)&&(e.remove(_n230),e.insertChild(_t297.childCount,_n230,_t297));}if(Wg(_t297)){var _n231=_t297.getChild(0);for(;Wg(_n231);){e.unwrapElement(_n231),_n231=_t297.getChild(0);}}}}catch(err){_didIteratorError335=true;_iteratorError335=err;}finally{try{if(!_iteratorNormalCompletion335&&_iterator335["return"]!=null){_iterator335["return"]();}}finally{if(_didIteratorError335){throw _iteratorError335;}}}}(t.content,e),function(t,e){var _iteratorNormalCompletion336=true;var _didIteratorError336=false;var _iteratorError336=undefined;try{for(var _iterator336=e.createRangeIn(t)[Symbol.iterator](),_step336;!(_iteratorNormalCompletion336=(_step336=_iterator336.next()).done);_iteratorNormalCompletion336=true){var _n232=_step336.value;var _t298=_n232.item;if(_t298.is("li")){var _n233=_t298.getChild(0);_n233.is("p")&&e.unwrapElement(_n233);}}}catch(err){_didIteratorError336=true;_iteratorError336=err;}finally{try{if(!_iteratorNormalCompletion336&&_iterator336["return"]!=null){_iterator336["return"]();}}finally{if(_didIteratorError336){throw _iteratorError336;}}}}(t.content,e);}}]);return $g;}();function Gg(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(t,e){return 1===e.length?" ":Array(e.length+1).join(" ").substr(0,e.length);});}function Qg(t){var e=new DOMParser(),n=function(t){return Gg(Gg(t)).replace(/(<span style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g,"$1$2").replace(/<span style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g,"</").replace(/ <o:p><\/o:p>/g,"<o:p></o:p>").replace(/>(\s*[\r\n]\s*)</g,"><");}(function(t){var e=t.match(/<\/body>(.*?)(<\/html>|$)/);e&&e[1]&&(t=t.slice(0,e.index)+t.slice(e.index).replace(e[1],""));return t;}(t=t.replace(/<!--\[if gte vml 1]>/g,""))),i=e.parseFromString(n,"text/html");!function(t){t.querySelectorAll("span[style*=spacerun]").forEach(function(t){var e=t.childNodes[0].data.length;t.innerHTML=Array(e+1).join(" ").substr(0,e);});}(i);var o=i.body.innerHTML,r=function(t){var e=new rr({blockFiller:jo}),n=t.createDocumentFragment(),i=t.body.childNodes;for(;i.length>0;){n.appendChild(i[0]);}return e.domToView(n);}(i),s=function(t){var e=[],n=[],i=Array.from(t.getElementsByTagName("style"));for(var _i197=0,_i196=i;_i197<_i196.length;_i197++){var _t299=_i196[_i197];_t299.sheet&&_t299.sheet.cssRules&&_t299.sheet.cssRules.length&&(e.push(_t299.sheet),n.push(_t299.innerHTML));}return{styles:e,stylesString:n.join(" ")};}(i);return{body:r,bodyString:o,styles:s.styles,stylesString:s.stylesString};}function Kg(t,e){if(!t.childCount)return;var n=new of();!function(t,e,n){var i=n.createRangeIn(e),o=new bi({name:"img"}),r=[];var _iteratorNormalCompletion337=true;var _didIteratorError337=false;var _iteratorError337=undefined;try{for(var _iterator337=i[Symbol.iterator](),_step337;!(_iteratorNormalCompletion337=(_step337=_iterator337.next()).done);_iteratorNormalCompletion337=true){var _e263=_step337.value;if(o.match(_e263.item)){var _n234=_e263.item,_i199=_n234.getAttribute("v:shapes")?_n234.getAttribute("v:shapes").split(" "):[];_i199.length&&_i199.every(function(e){return t.indexOf(e)>-1;})?r.push(_n234):_n234.getAttribute("src")||r.push(_n234);}}}catch(err){_didIteratorError337=true;_iteratorError337=err;}finally{try{if(!_iteratorNormalCompletion337&&_iterator337["return"]!=null){_iterator337["return"]();}}finally{if(_didIteratorError337){throw _iteratorError337;}}}for(var _i198=0,_r48=r;_i198<_r48.length;_i198++){var _t300=_r48[_i198];n.remove(_t300);}}(function(t,e){var n=e.createRangeIn(t),i=new bi({name:/v:(.+)/}),o=[];var _iteratorNormalCompletion338=true;var _didIteratorError338=false;var _iteratorError338=undefined;try{for(var _iterator338=n[Symbol.iterator](),_step338;!(_iteratorNormalCompletion338=(_step338=_iterator338.next()).done);_iteratorNormalCompletion338=true){var _t301=_step338.value;var _e264=_t301.item,_n235=_e264.previousSibling&&_e264.previousSibling.name||null;i.match(_e264)&&_e264.getAttribute("o:gfxdata")&&"v:shapetype"!==_n235&&o.push(_t301.item.getAttribute("id"));}}catch(err){_didIteratorError338=true;_iteratorError338=err;}finally{try{if(!_iteratorNormalCompletion338&&_iterator338["return"]!=null){_iterator338["return"]();}}finally{if(_didIteratorError338){throw _iteratorError338;}}}return o;}(t,n),t,n),function(t,e){var n=e.createRangeIn(t),i=new bi({name:/v:(.+)/}),o=[];var _iteratorNormalCompletion339=true;var _didIteratorError339=false;var _iteratorError339=undefined;try{for(var _iterator339=n[Symbol.iterator](),_step339;!(_iteratorNormalCompletion339=(_step339=_iterator339.next()).done);_iteratorNormalCompletion339=true){var _t302=_step339.value;i.match(_t302.item)&&o.push(_t302.item);}}catch(err){_didIteratorError339=true;_iteratorError339=err;}finally{try{if(!_iteratorNormalCompletion339&&_iterator339["return"]!=null){_iterator339["return"]();}}finally{if(_didIteratorError339){throw _iteratorError339;}}}for(var _i200=0,_o91=o;_i200<_o91.length;_i200++){var _t303=_o91[_i200];e.remove(_t303);}}(t,n);var i=function(t,e){var n=e.createRangeIn(t),i=new bi({name:"img"}),o=[];var _iteratorNormalCompletion340=true;var _didIteratorError340=false;var _iteratorError340=undefined;try{for(var _iterator340=n[Symbol.iterator](),_step340;!(_iteratorNormalCompletion340=(_step340=_iterator340.next()).done);_iteratorNormalCompletion340=true){var _t304=_step340.value;i.match(_t304.item)&&_t304.item.getAttribute("src").startsWith("file://")&&o.push(_t304.item);}}catch(err){_didIteratorError340=true;_iteratorError340=err;}finally{try{if(!_iteratorNormalCompletion340&&_iterator340["return"]!=null){_iterator340["return"]();}}finally{if(_didIteratorError340){throw _iteratorError340;}}}return o;}(t,n);i.length&&function(t,e,n){if(t.length===e.length)for(var _i201=0;_i201<t.length;_i201++){var _o92="data:".concat(e[_i201].type,";base64,").concat(Jg(e[_i201].hex));n.setAttribute("src",_o92,t[_i201]);}}(i,function(t){if(!t)return[];var e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),i=t.match(n),o=[];if(i){var _iteratorNormalCompletion341=true;var _didIteratorError341=false;var _iteratorError341=undefined;try{for(var _iterator341=i[Symbol.iterator](),_step341;!(_iteratorNormalCompletion341=(_step341=_iterator341.next()).done);_iteratorNormalCompletion341=true){var _t305=_step341.value;var _n236=!1;_t305.includes("\\pngblip")?_n236="image/png":_t305.includes("\\jpegblip")&&(_n236="image/jpeg"),_n236&&o.push({hex:_t305.replace(e,"").replace(/[^\da-fA-F]/g,""),type:_n236});}}catch(err){_didIteratorError341=true;_iteratorError341=err;}finally{try{if(!_iteratorNormalCompletion341&&_iterator341["return"]!=null){_iterator341["return"]();}}finally{if(_didIteratorError341){throw _iteratorError341;}}}}return o;}(e),n);}function Jg(t){return btoa(t.match(/\w{2}/g).map(function(t){return String.fromCharCode(parseInt(t,16));}).join(""));}var Zg=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,Xg=/xmlns:o="urn:schemas-microsoft-com/i;var tp=/*#__PURE__*/function(){function tp(){_classCallCheck(this,tp);}_createClass(tp,[{key:"isActive",value:function isActive(t){return Zg.test(t)||Xg.test(t);}},{key:"execute",value:function execute(t){var _Qg=Qg(t.dataTransfer.getData("text/html")),e=_Qg.body,n=_Qg.stylesString;Hg(e,n),Kg(e,t.dataTransfer.getData("text/rtf")),t.content=e;}}]);return tp;}();function ep(t,e){var n=e.parent;for(;n;){if(n.name===t)return n;n=n.parent;}}function np(t,e,n,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;e>o?i.setAttribute(t,e,n):i.removeAttribute(t,n);}function ip(t,e){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=t.createElement("tableCell",n);t.insertElement("paragraph",i),t.insert(i,e);}function op(){return function(t){t.on("element:table",function(t,e,n){var i=e.viewItem;if(!n.consumable.test(i,{name:!0}))return;var _ref39=function(t){var e={headingRows:0,headingColumns:0},n=[],i=[];var o;for(var _i202=0,_Array$from7=Array.from(t.getChildren());_i202<_Array$from7.length;_i202++){var _r49=_Array$from7[_i202];if("tbody"===_r49.name||"thead"===_r49.name||"tfoot"===_r49.name){"thead"!==_r49.name||o||(o=_r49);var _t306=Array.from(_r49.getChildren()).filter(function(t){return t.is("element","tr");});var _iteratorNormalCompletion342=true;var _didIteratorError342=false;var _iteratorError342=undefined;try{for(var _iterator342=_t306[Symbol.iterator](),_step342;!(_iteratorNormalCompletion342=(_step342=_iterator342.next()).done);_iteratorNormalCompletion342=true){var _r50=_step342.value;if("thead"===_r50.parent.name&&_r50.parent===o)e.headingRows++,n.push(_r50);else{i.push(_r50);var _t307=sp(_r50);_t307>e.headingColumns&&(e.headingColumns=_t307);}}}catch(err){_didIteratorError342=true;_iteratorError342=err;}finally{try{if(!_iteratorNormalCompletion342&&_iterator342["return"]!=null){_iterator342["return"]();}}finally{if(_didIteratorError342){throw _iteratorError342;}}}}}return e.rows=[].concat(n,i),e;}(i),o=_ref39.rows,r=_ref39.headingRows,s=_ref39.headingColumns,a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);var c=n.writer.createElement("table",a),l=n.splitToAllowedParent(c,e.modelCursor);if(l){if(n.writer.insert(c,l.position),n.consumable.consume(i,{name:!0}),o.length)o.forEach(function(t){return n.convertItem(t,n.writer.createPositionAt(c,"end"));});else{var _t308=n.writer.createElement("tableRow");n.writer.insert(_t308,n.writer.createPositionAt(c,"end")),ip(n.writer,n.writer.createPositionAt(_t308,"end"));}e.modelRange=n.writer.createRange(n.writer.createPositionBefore(c),n.writer.createPositionAfter(c)),l.cursorParent?e.modelCursor=n.writer.createPositionAt(l.cursorParent,0):e.modelCursor=e.modelRange.end;}});};}function rp(t){return function(e){e.on("element:".concat(t),function(t,e,n){var i=e.viewItem;if(!n.consumable.test(i,{name:!0}))return;var o=n.writer.createElement("tableCell"),r=n.splitToAllowedParent(o,e.modelCursor);if(!r)return;n.writer.insert(o,r.position),n.consumable.consume(i,{name:!0});var s=n.writer.createPositionAt(o,0);n.convertChildren(i,s),o.childCount||n.writer.insertElement("paragraph",s),e.modelRange=n.writer.createRange(n.writer.createPositionBefore(o),n.writer.createPositionAfter(o)),e.modelCursor=e.modelRange.end;});};}function sp(t){var e=0,n=0;var i=Array.from(t.getChildren()).filter(function(t){return"th"===t.name||"td"===t.name;});for(;n<i.length&&"th"===i[n].name;){var _t309=i[n];e+=parseInt(_t309.getAttribute("colspan")||1),n++;}return e;}var ap=/*#__PURE__*/function(){function ap(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,ap);this.table=t,this.startRow=e.startRow||0,this.endRow="number"==typeof e.endRow?e.endRow:void 0,this.includeSpanned=!!e.includeSpanned,this.column="number"==typeof e.column?e.column:void 0,this._skipRows=new Set(),this._row=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map(),this._nextCellAtColumn=-1;}_createClass(ap,[{key:Symbol.iterator,value:function value(){return this;}},{key:"next",value:function next(){var t=this.table.getChild(this._row);if(!t||this._isOverEndRow())return{done:!0};var e,n,i;if(this._isSpanned(this._row,this._column))e=this._getSpanned(this._row,this._column),n=!this.includeSpanned||this._shouldSkipRow()||this._shouldSkipColumn(),i=this._formatOutValue(e,this._column,!0);else{if(!(e=t.getChild(this._cellIndex)))return this._row++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next();var _o93=parseInt(e.getAttribute("colspan")||1),_r51=parseInt(e.getAttribute("rowspan")||1);(_o93>1||_r51>1)&&this._recordSpans(this._row,this._column,_r51,_o93,e),this._nextCellAtColumn=this._column+_o93,n=this._shouldSkipRow()||this._shouldSkipColumn(),i=this._formatOutValue(e,this._column,!1,_r51,_o93);}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,n?this.next():i;}},{key:"skipRow",value:function skipRow(t){this._skipRows.add(t);}},{key:"_isOverEndRow",value:function _isOverEndRow(){return void 0!==this.endRow&&this._row>this.endRow;}},{key:"_formatOutValue",value:function _formatOutValue(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;return{done:!1,value:{cell:t,row:this._row,column:e,isSpanned:n,rowspan:i,colspan:o,cellIndex:this._cellIndex}};}},{key:"_shouldSkipRow",value:function _shouldSkipRow(){var t=this._row<this.startRow,e=this._skipRows.has(this._row);return t||e;}},{key:"_shouldSkipColumn",value:function _shouldSkipColumn(){return void 0!==this.column&&this.column!=this._column;}},{key:"_isSpanned",value:function _isSpanned(t,e){if(!this._spannedCells.has(t))return!1;return this._spannedCells.get(t).has(e);}},{key:"_getSpanned",value:function _getSpanned(t,e){return this._spannedCells.get(t).get(e);}},{key:"_recordSpans",value:function _recordSpans(t,e,n,i,o){for(var _n237=e+1;_n237<=e+i-1;_n237++){this._markSpannedCell(t,_n237,o);}for(var _r52=t+1;_r52<t+n;_r52++){for(var _t310=e;_t310<=e+i-1;_t310++){this._markSpannedCell(_r52,_t310,o);}}}},{key:"_markSpannedCell",value:function _markSpannedCell(t,e,n){this._spannedCells.has(t)||this._spannedCells.set(t,new Map()),this._spannedCells.get(t).set(e,n);}}]);return ap;}();function cp(t){return!!t.getCustomProperty("table")&&Zh(t);}function lp(t){var e=t.getSelectedElement();return e&&cp(e)?e:null;}function dp(t){var e=ep("table",t.getFirstPosition());return e&&cp(e.parent)?e.parent:null;}function hp(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(e){return e.on("insert:table",function(e,n,i){var o=n.item;if(!i.consumable.consume(o,"insert"))return;i.consumable.consume(o,"attribute:headingRows:table"),i.consumable.consume(o,"attribute:headingColumns:table");var r=t&&t.asWidget,s=i.writer.createContainerElement("figure",{"class":"table"}),a=i.writer.createContainerElement("table");var c;i.writer.insert(i.writer.createPositionAt(s,0),a),r&&(c=function(t,e){return e.setCustomProperty("table",!0,t),Xh(t,e,{hasSelectionHandler:!0});}(s,i.writer));var l=new ap(o),d={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},h=new Map();var _iteratorNormalCompletion343=true;var _didIteratorError343=false;var _iteratorError343=undefined;try{for(var _iterator343=l[Symbol.iterator](),_step343;!(_iteratorNormalCompletion343=(_step343=_iterator343.next()).done);_iteratorNormalCompletion343=true){var _e265=_step343.value;var _n238=_e265.row,_r53=_e265.cell,_s33=yp(vp(_n238,d),a,i),_c11=o.getChild(_n238),_l5=h.get(_n238)||kp(_c11,_n238,_s33,i);h.set(_n238,_l5),i.consumable.consume(_r53,"insert"),wp(_e265,d,i.writer.createPositionAt(_l5,"end"),i,t);}}catch(err){_didIteratorError343=true;_iteratorError343=err;}finally{try{if(!_iteratorNormalCompletion343&&_iterator343["return"]!=null){_iterator343["return"]();}}finally{if(_didIteratorError343){throw _iteratorError343;}}}var u=i.mapper.toViewPosition(n.range.start);i.mapper.bindElements(o,r?c:s),i.writer.insert(u,r?c:s);});};}function up(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(e){return e.on("insert:tableRow",function(e,n,i){var o=n.item;if(!i.consumable.consume(o,"insert"))return;var r=o.parent,s=Cp(i.mapper.toViewElement(r)),a=r.getChildIndex(o),c=new ap(r,{startRow:a,endRow:a}),l={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0},d=new Map();var _iteratorNormalCompletion344=true;var _didIteratorError344=false;var _iteratorError344=undefined;try{for(var _iterator344=c[Symbol.iterator](),_step344;!(_iteratorNormalCompletion344=(_step344=_iterator344.next()).done);_iteratorNormalCompletion344=true){var _e266=_step344.value;var _n239=yp(vp(a,l),s,i),_r54=d.get(a)||kp(o,a,_n239,i);d.set(a,_r54),i.consumable.consume(_e266.cell,"insert"),wp(_e266,l,i.writer.createPositionAt(_r54,"end"),i,t);}}catch(err){_didIteratorError344=true;_iteratorError344=err;}finally{try{if(!_iteratorNormalCompletion344&&_iterator344["return"]!=null){_iterator344["return"]();}}finally{if(_didIteratorError344){throw _iteratorError344;}}}});};}function fp(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(e){return e.on("insert:tableCell",function(e,n,i){var o=n.item;if(!i.consumable.consume(o,"insert"))return;var r=o.parent,s=r.parent,a=s.getChildIndex(r),c=new ap(s,{startRow:a,endRow:a}),l={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0};var _iteratorNormalCompletion345=true;var _didIteratorError345=false;var _iteratorError345=undefined;try{for(var _iterator345=c[Symbol.iterator](),_step345;!(_iteratorNormalCompletion345=(_step345=_iterator345.next()).done);_iteratorNormalCompletion345=true){var _e267=_step345.value;if(_e267.cell===o){var _n240=i.mapper.toViewElement(r);return void wp(_e267,l,i.writer.createPositionAt(_n240,r.getChildIndex(o)),i,t);}}}catch(err){_didIteratorError345=true;_iteratorError345=err;}finally{try{if(!_iteratorNormalCompletion345&&_iterator345["return"]!=null){_iterator345["return"]();}}finally{if(_didIteratorError345){throw _iteratorError345;}}}});};}function mp(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=!!t.asWidget;return function(t){return t.on("attribute:headingRows:table",function(t,n,i){var o=n.item;if(!i.consumable.consume(n.item,t.name))return;var r=Cp(i.mapper.toViewElement(o)),s=n.attributeOldValue,a=n.attributeNewValue;if(a>s){var _t311=Array.from(o.getChildren()).filter(function(_ref40){var t=_ref40.index;return c(t,s-1,a);});Tp(_t311,yp("thead",r,i),i,"end");var _iteratorNormalCompletion346=true;var _didIteratorError346=false;var _iteratorError346=undefined;try{for(var _iterator346=_t311[Symbol.iterator](),_step346;!(_iteratorNormalCompletion346=(_step346=_iterator346.next()).done);_iteratorNormalCompletion346=true){var _n241=_step346.value;var _iteratorNormalCompletion347=true;var _didIteratorError347=false;var _iteratorError347=undefined;try{for(var _iterator347=_n241.getChildren()[Symbol.iterator](),_step347;!(_iteratorNormalCompletion347=(_step347=_iterator347.next()).done);_iteratorNormalCompletion347=true){var _t312=_step347.value;pp(_t312,"th",i,e);}}catch(err){_didIteratorError347=true;_iteratorError347=err;}finally{try{if(!_iteratorNormalCompletion347&&_iterator347["return"]!=null){_iterator347["return"]();}}finally{if(_didIteratorError347){throw _iteratorError347;}}}}}catch(err){_didIteratorError346=true;_iteratorError346=err;}finally{try{if(!_iteratorNormalCompletion346&&_iterator346["return"]!=null){_iterator346["return"]();}}finally{if(_didIteratorError346){throw _iteratorError346;}}}Ap("tbody",r,i);}else{Tp(Array.from(o.getChildren()).filter(function(_ref41){var t=_ref41.index;return c(t,a-1,s);}).reverse(),yp("tbody",r,i),i,0);var _t313=new ap(o,{startRow:a?a-1:a,endRow:s-1}),_n242={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};var _iteratorNormalCompletion348=true;var _didIteratorError348=false;var _iteratorError348=undefined;try{for(var _iterator348=_t313[Symbol.iterator](),_step348;!(_iteratorNormalCompletion348=(_step348=_iterator348.next()).done);_iteratorNormalCompletion348=true){var _o94=_step348.value;bp(_o94,_n242,i,e);}}catch(err){_didIteratorError348=true;_iteratorError348=err;}finally{try{if(!_iteratorNormalCompletion348&&_iterator348["return"]!=null){_iterator348["return"]();}}finally{if(_didIteratorError348){throw _iteratorError348;}}}Ap("thead",r,i);}function c(t,e,n){return t>e&&t<n;}});};}function gp(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=!!t.asWidget;return function(t){return t.on("attribute:headingColumns:table",function(t,n,i){var o=n.item;if(!i.consumable.consume(n.item,t.name))return;var r={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0},s=n.attributeOldValue,a=n.attributeNewValue,c=(s>a?s:a)-1;var _iteratorNormalCompletion349=true;var _didIteratorError349=false;var _iteratorError349=undefined;try{for(var _iterator349=new ap(o)[Symbol.iterator](),_step349;!(_iteratorNormalCompletion349=(_step349=_iterator349.next()).done);_iteratorNormalCompletion349=true){var _t314=_step349.value;_t314.column>c||bp(_t314,r,i,e);}}catch(err){_didIteratorError349=true;_iteratorError349=err;}finally{try{if(!_iteratorNormalCompletion349&&_iterator349["return"]!=null){_iterator349["return"]();}}finally{if(_didIteratorError349){throw _iteratorError349;}}}});};}function pp(t,e,n,i){var o=n.writer,r=n.mapper.toViewElement(t);if(!r)return;var s;if(i){s=eu(o.createEditableElement(e,r.getAttributes()),o),o.insert(o.createPositionAfter(r),s),o.move(o.createRangeIn(r),o.createPositionAt(s,0)),o.remove(o.createRangeOn(r));}else s=o.rename(e,r);n.mapper.unbindViewElement(r),n.mapper.bindElements(t,s);}function bp(t,e,n,i){var o=t.cell,r=_p(t,e),s=n.mapper.toViewElement(o);s&&s.name!==r&&pp(o,r,n,i);}function wp(t,e,n,i,o){var r=o&&o.asWidget,s=_p(t,e),a=r?eu(i.writer.createEditableElement(s),i.writer):i.writer.createContainerElement(s),c=t.cell,l=c.getChild(0),d=1===c.childCount&&"paragraph"===l.name;if(i.writer.insert(n,a),d&&!function(t){return!!_toConsumableArray(t.getAttributeKeys()).length;}(l)){var _t315=c.getChild(0),_e268=i.writer.createPositionAt(a,"end");if(i.consumable.consume(_t315,"insert"),o.asWidget){var _n243=i.writer.createContainerElement("span");i.mapper.bindElements(_t315,_n243),i.writer.insert(_e268,_n243),i.mapper.bindElements(c,a);}else i.mapper.bindElements(c,a),i.mapper.bindElements(_t315,a);}else i.mapper.bindElements(c,a);}function kp(t,e,n,i){i.consumable.consume(t,"insert");var o=i.writer.createContainerElement("tr");i.mapper.bindElements(t,o);var r=t.parent.getAttribute("headingRows")||0,s=r>0&&e>=r?e-r:e,a=i.writer.createPositionAt(n,s);return i.writer.insert(a,o),o;}function _p(t,e){var n=t.row,i=t.column,o=e.headingColumns,r=e.headingRows;return r&&r>n?"th":o&&o>i?"th":"td";}function vp(t,e){return t<e.headingRows?"thead":"tbody";}function yp(t,e,n){var i=xp(t,e);return i||function(t,e,n){var i=n.writer.createContainerElement(t),o=n.writer.createPositionAt(e,"tbody"==t?"end":0);return n.writer.insert(o,i),i;}(t,e,n);}function xp(t,e){var _iteratorNormalCompletion350=true;var _didIteratorError350=false;var _iteratorError350=undefined;try{for(var _iterator350=e.getChildren()[Symbol.iterator](),_step350;!(_iteratorNormalCompletion350=(_step350=_iterator350.next()).done);_iteratorNormalCompletion350=true){var _n244=_step350.value;if(_n244.name==t)return _n244;}}catch(err){_didIteratorError350=true;_iteratorError350=err;}finally{try{if(!_iteratorNormalCompletion350&&_iterator350["return"]!=null){_iterator350["return"]();}}finally{if(_didIteratorError350){throw _iteratorError350;}}}}function Ap(t,e,n){var i=xp(t,e);i&&0===i.childCount&&n.writer.remove(n.writer.createRangeOn(i));}function Tp(t,e,n,i){var _iteratorNormalCompletion351=true;var _didIteratorError351=false;var _iteratorError351=undefined;try{for(var _iterator351=t[Symbol.iterator](),_step351;!(_iteratorNormalCompletion351=(_step351=_iterator351.next()).done);_iteratorNormalCompletion351=true){var _o95=_step351.value;var _t316=n.mapper.toViewElement(_o95);_t316&&n.writer.move(n.writer.createRangeOn(_t316),n.writer.createPositionAt(e,i));}}catch(err){_didIteratorError351=true;_iteratorError351=err;}finally{try{if(!_iteratorNormalCompletion351&&_iterator351["return"]!=null){_iterator351["return"]();}}finally{if(_didIteratorError351){throw _iteratorError351;}}}}function Cp(t){var _iteratorNormalCompletion352=true;var _didIteratorError352=false;var _iteratorError352=undefined;try{for(var _iterator352=t.getChildren()[Symbol.iterator](),_step352;!(_iteratorNormalCompletion352=(_step352=_iterator352.next()).done);_iteratorNormalCompletion352=true){var _e269=_step352.value;if("table"===_e269.name)return _e269;}}catch(err){_didIteratorError352=true;_iteratorError352=err;}finally{try{if(!_iteratorNormalCompletion352&&_iterator352["return"]!=null){_iterator352["return"]();}}finally{if(_didIteratorError352){throw _iteratorError352;}}}}var Pp=/*#__PURE__*/function(_ed20){_inherits(Pp,_ed20);function Pp(){_classCallCheck(this,Pp);return _possibleConstructorReturn(this,_getPrototypeOf(Pp).apply(this,arguments));}_createClass(Pp,[{key:"refresh",value:function refresh(){var t=this.editor.model,e=t.document.selection,n=t.schema,i=function(t){var e=t.parent;return e===e.root?e:e.parent;}(e.getFirstPosition());this.isEnabled=n.checkChild(i,"table");}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.document.selection,i=this.editor.plugins.get("TableUtils"),o=parseInt(t.rows)||2,r=parseInt(t.columns)||2,s=nu(n,e);e.change(function(t){var n=i.createTable(t,o,r);e.insertContent(n,s),t.setSelection(t.createPositionAt(n.getNodeByPath([0,0,0]),0));});}}]);return Pp;}(ed);var Sp=/*#__PURE__*/function(_ed21){_inherits(Sp,_ed21);function Sp(t){var _this229;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Sp);_this229=_possibleConstructorReturn(this,_getPrototypeOf(Sp).call(this,t)),_this229.order=e.order||"below";return _this229;}_createClass(Sp,[{key:"refresh",value:function refresh(){var t=ep("table",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t;}},{key:"execute",value:function execute(){var t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i=ep("tableCell",e.getFirstPosition()).parent,o=i.parent,r=o.getChildIndex(i),s="below"===this.order?r+1:r;n.insertRows(o,{rows:1,at:s});}}]);return Sp;}(ed);var Mp=/*#__PURE__*/function(_ed22){_inherits(Mp,_ed22);function Mp(t){var _this230;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Mp);_this230=_possibleConstructorReturn(this,_getPrototypeOf(Mp).call(this,t)),_this230.order=e.order||"right";return _this230;}_createClass(Mp,[{key:"refresh",value:function refresh(){var t=ep("table",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t;}},{key:"execute",value:function execute(){var t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i=ep("tableCell",e.getFirstPosition()),o=i.parent.parent,_n$getCellLocation=n.getCellLocation(i),r=_n$getCellLocation.column,s="right"===this.order?r+1:r;n.insertColumns(o,{columns:1,at:s});}}]);return Mp;}(ed);var Ep=/*#__PURE__*/function(_ed23){_inherits(Ep,_ed23);function Ep(t){var _this231;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Ep);_this231=_possibleConstructorReturn(this,_getPrototypeOf(Ep).call(this,t)),_this231.direction=e.direction||"horizontally";return _this231;}_createClass(Ep,[{key:"refresh",value:function refresh(){var t=ep("tableCell",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t;}},{key:"execute",value:function execute(){var t=ep("tableCell",this.editor.model.document.selection.getFirstPosition()),e="horizontally"===this.direction,n=this.editor.plugins.get("TableUtils");e?n.splitCellHorizontally(t,2):n.splitCellVertically(t,2);}}]);return Ep;}(ed);var Ip=/*#__PURE__*/function(_ed24){_inherits(Ip,_ed24);function Ip(t,e){var _this232;_classCallCheck(this,Ip);_this232=_possibleConstructorReturn(this,_getPrototypeOf(Ip).call(this,t)),_this232.direction=e.direction,_this232.isHorizontal="right"==_this232.direction||"left"==_this232.direction;return _this232;}_createClass(Ip,[{key:"refresh",value:function refresh(){var t=this._getMergeableCell();this.isEnabled=!!t,this.value=t;}},{key:"execute",value:function execute(){var _this233=this;var t=this.editor.model,e=ep("tableCell",t.document.selection.getFirstPosition()),n=this.value,i=this.direction;t.change(function(t){var o="right"==i||"down"==i,r=o?e:n,s=o?n:e,a=s.parent;!function(t,e,n){Np(t)||(Np(e)&&n.remove(n.createRangeIn(e)),n.move(n.createRangeIn(t),n.createPositionAt(e,"end")));n.remove(t);}(s,r,t);var c=_this233.isHorizontal?"colspan":"rowspan",l=parseInt(e.getAttribute(c)||1),d=parseInt(n.getAttribute(c)||1);t.setAttribute(c,l+d,r),t.setSelection(t.createRangeIn(r)),a.childCount||function(t,e){var n=t.parent,i=n.getChildIndex(t);var _iteratorNormalCompletion353=true;var _didIteratorError353=false;var _iteratorError353=undefined;try{for(var _iterator353=new ap(n,{endRow:i})[Symbol.iterator](),_step353;!(_iteratorNormalCompletion353=(_step353=_iterator353.next()).done);_iteratorNormalCompletion353=true){var _ref43=_step353.value;var _t317=_ref43.cell,_o96=_ref43.row,_r55=_ref43.rowspan;var _n245=_o96+_r55-1>=i;_n245&&np("rowspan",_r55-1,_t317,e);}}catch(err){_didIteratorError353=true;_iteratorError353=err;}finally{try{if(!_iteratorNormalCompletion353&&_iterator353["return"]!=null){_iterator353["return"]();}}finally{if(_didIteratorError353){throw _iteratorError353;}}}e.remove(t);}(a,t);});}},{key:"_getMergeableCell",value:function _getMergeableCell(){var t=ep("tableCell",this.editor.model.document.selection.getFirstPosition());if(!t)return;var e=this.editor.plugins.get("TableUtils"),n=this.isHorizontal?function(t,e,n){var i="right"==e?t.nextSibling:t.previousSibling;if(!i)return;var o="right"==e?t:i,r="right"==e?i:t,_n$getCellLocation2=n.getCellLocation(o),s=_n$getCellLocation2.column,_n$getCellLocation3=n.getCellLocation(r),a=_n$getCellLocation3.column,c=parseInt(o.getAttribute("colspan")||1);return s+c===a?i:void 0;}(t,this.direction,e):function(t,e){var n=t.parent,i=n.parent,o=i.getChildIndex(n);if("down"==e&&o===i.childCount-1||"up"==e&&0===o)return;var r=parseInt(t.getAttribute("rowspan")||1),s=i.getAttribute("headingRows")||0;if(s&&("down"==e&&o+r===s||"up"==e&&o===s))return;var a=parseInt(t.getAttribute("rowspan")||1),c="down"==e?o+a:o,l=_toConsumableArray(new ap(i,{endRow:c})),d=l.find(function(e){return e.cell===t;}).column,h=l.find(function(_ref44){var t=_ref44.row,n=_ref44.rowspan,i=_ref44.column;return i===d&&("down"==e?t===c:c===t+n);});return h&&h.cell;}(t,this.direction);if(!n)return;var i=this.isHorizontal?"rowspan":"colspan",o=parseInt(t.getAttribute(i)||1);return parseInt(n.getAttribute(i)||1)===o?n:void 0;}}]);return Ip;}(ed);function Np(t){return 1==t.childCount&&t.getChild(0).is("paragraph")&&t.getChild(0).isEmpty;}var Op=/*#__PURE__*/function(_ed25){_inherits(Op,_ed25);function Op(){_classCallCheck(this,Op);return _possibleConstructorReturn(this,_getPrototypeOf(Op).apply(this,arguments));}_createClass(Op,[{key:"refresh",value:function refresh(){var t=ep("tableCell",this.editor.model.document.selection.getFirstPosition());this.isEnabled=!!t&&t.parent.parent.childCount>1;}},{key:"execute",value:function execute(){var t=this.editor.model,e=ep("tableCell",t.document.selection.getFirstPosition()).parent,n=e.parent,i=n.getChildIndex(e),o=n.getAttribute("headingRows")||0;t.change(function(t){o&&i<=o&&np("headingRows",o-1,n,t,0);var r=_toConsumableArray(new ap(n,{endRow:i})),s=new Map();r.filter(function(_ref45){var t=_ref45.row,e=_ref45.rowspan;return t===i&&e>1;}).forEach(function(_ref46){var t=_ref46.column,e=_ref46.cell,n=_ref46.rowspan;return s.set(t,{cell:e,rowspanToSet:n-1});}),r.filter(function(_ref47){var t=_ref47.row,e=_ref47.rowspan;return t<=i-1&&t+e>i;}).forEach(function(_ref48){var e=_ref48.cell,n=_ref48.rowspan;return np("rowspan",n-1,e,t);});var a=i+1,c=new ap(n,{includeSpanned:!0,startRow:a,endRow:a});var l;for(var _i203=0,_arr3=_toConsumableArray(c);_i203<_arr3.length;_i203++){var _ref50=_arr3[_i203];var _e270=_ref50.row,_i204=_ref50.column,_o97=_ref50.cell;if(s.has(_i204)){var _s$get=s.get(_i204),_o98=_s$get.cell,_r56=_s$get.rowspanToSet,_a19=l?t.createPositionAfter(l):t.createPositionAt(n.getChild(_e270),0);t.move(t.createRangeOn(_o98),_a19),np("rowspan",_r56,_o98,t),l=_o98;}else l=_o97;}t.remove(e);});}}]);return Op;}(ed);var Rp=/*#__PURE__*/function(_ed26){_inherits(Rp,_ed26);function Rp(){_classCallCheck(this,Rp);return _possibleConstructorReturn(this,_getPrototypeOf(Rp).apply(this,arguments));}_createClass(Rp,[{key:"refresh",value:function refresh(){var t=this.editor,e=t.model.document.selection,n=t.plugins.get("TableUtils"),i=ep("tableCell",e.getFirstPosition());this.isEnabled=!!i&&n.getColumns(i.parent.parent)>1;}},{key:"execute",value:function execute(){var t=this.editor.model,e=ep("tableCell",t.document.selection.getFirstPosition()),n=e.parent,i=n.parent,o=i.getAttribute("headingColumns")||0,r=i.getChildIndex(n),s=_toConsumableArray(new ap(i)),a=s.find(function(t){return t.cell===e;}).column;t.change(function(t){o&&r<=o&&t.setAttribute("headingColumns",o-1,i);var _iteratorNormalCompletion354=true;var _didIteratorError354=false;var _iteratorError354=undefined;try{for(var _iterator354=s[Symbol.iterator](),_step354;!(_iteratorNormalCompletion354=(_step354=_iterator354.next()).done);_iteratorNormalCompletion354=true){var _ref52=_step354.value;var _e271=_ref52.cell,_n246=_ref52.column,_i205=_ref52.colspan;_n246<=a&&_i205>1&&_n246+_i205>a?np("colspan",_i205-1,_e271,t):_n246===a&&t.remove(_e271);}}catch(err){_didIteratorError354=true;_iteratorError354=err;}finally{try{if(!_iteratorNormalCompletion354&&_iterator354["return"]!=null){_iterator354["return"]();}}finally{if(_didIteratorError354){throw _iteratorError354;}}}});}}]);return Rp;}(ed);var Dp=/*#__PURE__*/function(_ed27){_inherits(Dp,_ed27);function Dp(){_classCallCheck(this,Dp);return _possibleConstructorReturn(this,_getPrototypeOf(Dp).apply(this,arguments));}_createClass(Dp,[{key:"refresh",value:function refresh(){var t=ep("tableCell",this.editor.model.document.selection.getFirstPosition()),e=!!t;this.isEnabled=e,this.value=e&&this._isInHeading(t,t.parent.parent);}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=ep("tableCell",e.document.selection.getFirstPosition()).parent,i=n.parent,o=i.getAttribute("headingRows")||0,r=n.index;if(t.forceValue===this.value)return;var s=this.value?r:r+1;e.change(function(t){if(s){var _e272=function(t,e,n){var i=[],o=new ap(t,{startRow:e>n?n:0,endRow:e-1});var _iteratorNormalCompletion355=true;var _didIteratorError355=false;var _iteratorError355=undefined;try{for(var _iterator355=o[Symbol.iterator](),_step355;!(_iteratorNormalCompletion355=(_step355=_iterator355.next()).done);_iteratorNormalCompletion355=true){var _ref54=_step355.value;var _t318=_ref54.row,_n247=_ref54.rowspan,_r57=_ref54.cell;_n247>1&&_t318+_n247>e&&i.push(_r57);}}catch(err){_didIteratorError355=true;_iteratorError355=err;}finally{try{if(!_iteratorNormalCompletion355&&_iterator355["return"]!=null){_iterator355["return"]();}}finally{if(_didIteratorError355){throw _iteratorError355;}}}return i;}(i,s,o);var _iteratorNormalCompletion356=true;var _didIteratorError356=false;var _iteratorError356=undefined;try{for(var _iterator356=_e272[Symbol.iterator](),_step356;!(_iteratorNormalCompletion356=(_step356=_iterator356.next()).done);_iteratorNormalCompletion356=true){var _n248=_step356.value;Lp(_n248,s,t);}}catch(err){_didIteratorError356=true;_iteratorError356=err;}finally{try{if(!_iteratorNormalCompletion356&&_iterator356["return"]!=null){_iterator356["return"]();}}finally{if(_didIteratorError356){throw _iteratorError356;}}}}np("headingRows",s,i,t,0);});}},{key:"_isInHeading",value:function _isInHeading(t,e){var n=parseInt(e.getAttribute("headingRows")||0);return!!n&&t.parent.index<n;}}]);return Dp;}(ed);function Lp(t,e,n){var i=t.parent,o=i.parent,r=e-i.index,s={},a=parseInt(t.getAttribute("rowspan"))-r;a>1&&(s.rowspan=a);var c=parseInt(t.getAttribute("colspan")||1);c>1&&(s.colspan=c);var l=o.getChildIndex(i),d=l+r,h=_toConsumableArray(new ap(o,{startRow:l,endRow:d,includeSpanned:!0}));var u;var _iteratorNormalCompletion357=true;var _didIteratorError357=false;var _iteratorError357=undefined;try{for(var _iterator357=h[Symbol.iterator](),_step357;!(_iteratorNormalCompletion357=(_step357=_iterator357.next()).done);_iteratorNormalCompletion357=true){var _ref56=_step357.value;var _e273=_ref56.row,_i206=_ref56.column,_r58=_ref56.cell,_a20=_ref56.cellIndex;if(_r58===t&&void 0===u&&(u=_i206),void 0!==u&&u===_i206&&_e273===d){var _t319=o.getChild(_e273);ip(n,n.createPositionAt(_t319,_a20),s);}}}catch(err){_didIteratorError357=true;_iteratorError357=err;}finally{try{if(!_iteratorNormalCompletion357&&_iterator357["return"]!=null){_iterator357["return"]();}}finally{if(_didIteratorError357){throw _iteratorError357;}}}np("rowspan",r,t,n);}var jp=/*#__PURE__*/function(_ed28){_inherits(jp,_ed28);function jp(){_classCallCheck(this,jp);return _possibleConstructorReturn(this,_getPrototypeOf(jp).apply(this,arguments));}_createClass(jp,[{key:"refresh",value:function refresh(){var t=ep("tableCell",this.editor.model.document.selection.getFirstPosition()),e=!!t;this.isEnabled=e,this.value=e&&this._isInHeading(t,t.parent.parent);}},{key:"execute",value:function execute(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=this.editor.model,n=e.document.selection,i=this.editor.plugins.get("TableUtils"),o=ep("tableCell",n.getFirstPosition()),r=o.parent.parent,_i$getCellLocation=i.getCellLocation(o),s=_i$getCellLocation.column;if(t.forceValue===this.value)return;var a=this.value?s:s+1;e.change(function(t){np("headingColumns",a,r,t,0);});}},{key:"_isInHeading",value:function _isInHeading(t,e){var n=parseInt(e.getAttribute("headingColumns")||0),i=this.editor.plugins.get("TableUtils"),_i$getCellLocation2=i.getCellLocation(t),o=_i$getCellLocation2.column;return!!n&&o<n;}}]);return jp;}(ed);var Vp=/*#__PURE__*/function(_Kl49){_inherits(Vp,_Kl49);function Vp(){_classCallCheck(this,Vp);return _possibleConstructorReturn(this,_getPrototypeOf(Vp).apply(this,arguments));}_createClass(Vp,[{key:"getCellLocation",value:function getCellLocation(t){var e=t.parent,n=e.parent,i=n.getChildIndex(e),o=new ap(n,{startRow:i,endRow:i});var _iteratorNormalCompletion358=true;var _didIteratorError358=false;var _iteratorError358=undefined;try{for(var _iterator358=o[Symbol.iterator](),_step358;!(_iteratorNormalCompletion358=(_step358=_iterator358.next()).done);_iteratorNormalCompletion358=true){var _ref58=_step358.value;var _e274=_ref58.cell,_n249=_ref58.row,_i207=_ref58.column;if(_e274===t)return{row:_n249,column:_i207};}}catch(err){_didIteratorError358=true;_iteratorError358=err;}finally{try{if(!_iteratorNormalCompletion358&&_iterator358["return"]!=null){_iterator358["return"]();}}finally{if(_didIteratorError358){throw _iteratorError358;}}}}},{key:"createTable",value:function createTable(t,e,n){var i=t.createElement("table");return zp(t,i,0,e,n),i;}},{key:"insertRows",value:function insertRows(t){var _this234=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this.editor.model,i=e.at||0,o=e.rows||1;n.change(function(e){var n=t.getAttribute("headingRows")||0;if(n>i&&e.setAttribute("headingRows",n+o,t),0===i||i===t.childCount)return void zp(e,t,i,o,_this234.getColumns(t));var r=new ap(t,{endRow:i});var s=0;var _iteratorNormalCompletion359=true;var _didIteratorError359=false;var _iteratorError359=undefined;try{for(var _iterator359=r[Symbol.iterator](),_step359;!(_iteratorNormalCompletion359=(_step359=_iterator359.next()).done);_iteratorNormalCompletion359=true){var _ref60=_step359.value;var _t320=_ref60.row,_n250=_ref60.rowspan,_a21=_ref60.colspan,_c12=_ref60.cell;_t320<i&&_t320+_n250>i&&e.setAttribute("rowspan",_n250+o,_c12),_t320===i&&(s+=_a21);}}catch(err){_didIteratorError359=true;_iteratorError359=err;}finally{try{if(!_iteratorNormalCompletion359&&_iterator359["return"]!=null){_iterator359["return"]();}}finally{if(_didIteratorError359){throw _iteratorError359;}}}zp(e,t,i,o,s);});}},{key:"insertColumns",value:function insertColumns(t){var _this235=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=this.editor.model,i=e.at||0,o=e.columns||1;n.change(function(e){var n=t.getAttribute("headingColumns");i<n&&e.setAttribute("headingColumns",n+o,t);var r=_this235.getColumns(t);if(0===i||r===i){var _iteratorNormalCompletion360=true;var _didIteratorError360=false;var _iteratorError360=undefined;try{for(var _iterator360=t.getChildren()[Symbol.iterator](),_step360;!(_iteratorNormalCompletion360=(_step360=_iterator360.next()).done);_iteratorNormalCompletion360=true){var _n251=_step360.value;Bp(o,e,e.createPositionAt(_n251,i?"end":0));}}catch(err){_didIteratorError360=true;_iteratorError360=err;}finally{try{if(!_iteratorNormalCompletion360&&_iterator360["return"]!=null){_iterator360["return"]();}}finally{if(_didIteratorError360){throw _iteratorError360;}}}return;}var s=new ap(t,{column:i,includeSpanned:!0});var _iteratorNormalCompletion361=true;var _didIteratorError361=false;var _iteratorError361=undefined;try{for(var _iterator361=s[Symbol.iterator](),_step361;!(_iteratorNormalCompletion361=(_step361=_iterator361.next()).done);_iteratorNormalCompletion361=true){var _ref62=_step361.value;var _n252=_ref62.row,_r59=_ref62.cell,_a22=_ref62.cellIndex;var _c13=parseInt(_r59.getAttribute("rowspan")||1),_l6=parseInt(_r59.getAttribute("colspan")||1);if(_r59.index!==i&&_l6>1){if(e.setAttribute("colspan",_l6+o,_r59),s.skipRow(_n252),_c13>1)for(var _t321=_n252+1;_t321<_n252+_c13;_t321++){s.skipRow(_t321);}}else{var _i208=e.createPositionAt(t.getChild(_n252),_a22);Bp(o,e,_i208);}}}catch(err){_didIteratorError361=true;_iteratorError361=err;}finally{try{if(!_iteratorNormalCompletion361&&_iterator361["return"]!=null){_iterator361["return"]();}}finally{if(_didIteratorError361){throw _iteratorError361;}}}});}},{key:"splitCellVertically",value:function splitCellVertically(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var n=this.editor.model,i=t.parent.parent,o=parseInt(t.getAttribute("rowspan")||1),r=parseInt(t.getAttribute("colspan")||1);n.change(function(n){if(r>1){var _Fp=Fp(r,e),_i209=_Fp.newCellsSpan,_s34=_Fp.updatedSpan;np("colspan",_s34,t,n);var _a23={};_i209>1&&(_a23.colspan=_i209),o>1&&(_a23.rowspan=o),Bp(r>e?e-1:r-1,n,n.createPositionAfter(t),_a23);}if(r<e){var _s35=e-r,_a24=_toConsumableArray(new ap(i)),_a24$find=_a24.find(function(_ref63){var e=_ref63.cell;return e===t;}),_c14=_a24$find.column,_l7=_a24.filter(function(_ref64){var e=_ref64.cell,n=_ref64.colspan,i=_ref64.column;return e!==t&&i===_c14||i<_c14&&i+n>_c14;});var _iteratorNormalCompletion362=true;var _didIteratorError362=false;var _iteratorError362=undefined;try{for(var _iterator362=_l7[Symbol.iterator](),_step362;!(_iteratorNormalCompletion362=(_step362=_iterator362.next()).done);_iteratorNormalCompletion362=true){var _ref66=_step362.value;var _t322=_ref66.cell,_e275=_ref66.colspan;n.setAttribute("colspan",_e275+_s35,_t322);}}catch(err){_didIteratorError362=true;_iteratorError362=err;}finally{try{if(!_iteratorNormalCompletion362&&_iterator362["return"]!=null){_iterator362["return"]();}}finally{if(_didIteratorError362){throw _iteratorError362;}}}var _d5={};o>1&&(_d5.rowspan=o),Bp(_s35,n,n.createPositionAfter(t),_d5);var _h3=i.getAttribute("headingColumns")||0;_h3>_c14&&np("headingColumns",_h3+_s35,i,n);}});}},{key:"splitCellHorizontally",value:function splitCellHorizontally(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var n=this.editor.model,i=t.parent,o=i.parent,r=o.getChildIndex(i),s=parseInt(t.getAttribute("rowspan")||1),a=parseInt(t.getAttribute("colspan")||1);n.change(function(n){if(s>1){var _i210=_toConsumableArray(new ap(o,{startRow:r,endRow:r+s-1,includeSpanned:!0})),_Fp2=Fp(s,e),_c15=_Fp2.newCellsSpan,_l8=_Fp2.updatedSpan;np("rowspan",_l8,t,n);var _i210$find=_i210.find(function(_ref67){var e=_ref67.cell;return e===t;}),_d6=_i210$find.column,_h4={};_c15>1&&(_h4.rowspan=_c15),a>1&&(_h4.colspan=a);for(var _i212=0,_i211=_i210;_i212<_i211.length;_i212++){var _ref69=_i211[_i212];var _t323=_ref69.column,_e276=_ref69.row,_s36=_ref69.cellIndex;if(_e276>=r+_l8&&_t323===_d6&&(_e276+r+_l8)%_c15==0){Bp(1,n,n.createPositionAt(o.getChild(_e276),_s36),_h4);}}}if(s<e){var _i213=e-s,_c16=_toConsumableArray(new ap(o,{startRow:0,endRow:r}));var _iteratorNormalCompletion363=true;var _didIteratorError363=false;var _iteratorError363=undefined;try{for(var _iterator363=_c16[Symbol.iterator](),_step363;!(_iteratorNormalCompletion363=(_step363=_iterator363.next()).done);_iteratorNormalCompletion363=true){var _ref71=_step363.value;var _e277=_ref71.cell,_o99=_ref71.rowspan,_s37=_ref71.row;if(_e277!==t&&_s37+_o99>r){var _t324=_o99+_i213;n.setAttribute("rowspan",_t324,_e277);}}}catch(err){_didIteratorError363=true;_iteratorError363=err;}finally{try{if(!_iteratorNormalCompletion363&&_iterator363["return"]!=null){_iterator363["return"]();}}finally{if(_didIteratorError363){throw _iteratorError363;}}}var _l9={};a>1&&(_l9.colspan=a),zp(n,o,r+1,_i213,1,_l9);var _d7=o.getAttribute("headingRows")||0;_d7>r&&np("headingRows",_d7+_i213,o,n);}});}},{key:"getColumns",value:function getColumns(t){return _toConsumableArray(t.getChild(0).getChildren()).reduce(function(t,e){return t+parseInt(e.getAttribute("colspan")||1);},0);}}],[{key:"pluginName",get:function get(){return"TableUtils";}}]);return Vp;}(Kl);function zp(t,e,n,i,o){var r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};for(var _s38=0;_s38<i;_s38++){var _i214=t.createElement("tableRow");t.insert(_i214,e,n),Bp(o,t,t.createPositionAt(_i214,"end"),r);}}function Bp(t,e,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};for(var _o100=0;_o100<t;_o100++){ip(e,n,i);}}function Fp(t,e){if(t<e)return{newCellsSpan:1,updatedSpan:1};var n=Math.floor(t/e);return{newCellsSpan:n,updatedSpan:t-n*e+n};}function Up(t){t.document.registerPostFixer(function(e){return function(t,e){var n=e.document.differ.getChanges();var i=!1;var o=new Set();var _iteratorNormalCompletion364=true;var _didIteratorError364=false;var _iteratorError364=undefined;try{for(var _iterator364=n[Symbol.iterator](),_step364;!(_iteratorNormalCompletion364=(_step364=_iterator364.next()).done);_iteratorNormalCompletion364=true){var _e278=_step364.value;var _n253=void 0;"table"==_e278.name&&"insert"==_e278.type&&(_n253=_e278.position.nodeAfter),"tableRow"!=_e278.name&&"tableCell"!=_e278.name||(_n253=ep("table",_e278.position)),Wp(_e278)&&(_n253=ep("table",_e278.range.start)),_n253&&!o.has(_n253)&&(i=Hp(_n253,t)||i,i=qp(_n253,t)||i,o.add(_n253));}}catch(err){_didIteratorError364=true;_iteratorError364=err;}finally{try{if(!_iteratorNormalCompletion364&&_iterator364["return"]!=null){_iterator364["return"]();}}finally{if(_didIteratorError364){throw _iteratorError364;}}}return i;}(e,t);});}function Hp(t,e){var n=!1;var i=function(t){var e=parseInt(t.getAttribute("headingRows")||0),n=t.childCount,i=[];var _iteratorNormalCompletion365=true;var _didIteratorError365=false;var _iteratorError365=undefined;try{for(var _iterator365=new ap(t)[Symbol.iterator](),_step365;!(_iteratorNormalCompletion365=(_step365=_iterator365.next()).done);_iteratorNormalCompletion365=true){var _ref73=_step365.value;var _o101=_ref73.row,_r60=_ref73.rowspan,_s39=_ref73.cell;if(_r60<2)continue;var _t325=_o101<e,_a25=_t325?e:n;if(_o101+_r60>_a25){var _t326=_a25-_o101;i.push({cell:_s39,rowspan:_t326});}}}catch(err){_didIteratorError365=true;_iteratorError365=err;}finally{try{if(!_iteratorNormalCompletion365&&_iterator365["return"]!=null){_iterator365["return"]();}}finally{if(_didIteratorError365){throw _iteratorError365;}}}return i;}(t);if(i.length){n=!0;var _iteratorNormalCompletion366=true;var _didIteratorError366=false;var _iteratorError366=undefined;try{for(var _iterator366=i[Symbol.iterator](),_step366;!(_iteratorNormalCompletion366=(_step366=_iterator366.next()).done);_iteratorNormalCompletion366=true){var _t327=_step366.value;np("rowspan",_t327.rowspan,_t327.cell,e,1);}}catch(err){_didIteratorError366=true;_iteratorError366=err;}finally{try{if(!_iteratorNormalCompletion366&&_iterator366["return"]!=null){_iterator366["return"]();}}finally{if(_didIteratorError366){throw _iteratorError366;}}}}return n;}function qp(t,e){var n=!1;var i=function(t){var e={};var _iteratorNormalCompletion367=true;var _didIteratorError367=false;var _iteratorError367=undefined;try{for(var _iterator367=new ap(t,{includeSpanned:!0})[Symbol.iterator](),_step367;!(_iteratorNormalCompletion367=(_step367=_iterator367.next()).done);_iteratorNormalCompletion367=true){var _ref75=_step367.value;var _n254=_ref75.row;e[_n254]||(e[_n254]=0),e[_n254]+=1;}}catch(err){_didIteratorError367=true;_iteratorError367=err;}finally{try{if(!_iteratorNormalCompletion367&&_iterator367["return"]!=null){_iterator367["return"]();}}finally{if(_didIteratorError367){throw _iteratorError367;}}}return e;}(t),o=i[0];if(!Object.values(i).every(function(t){return t===o;})){var _o102=Object.values(i).reduce(function(t,e){return e>t?e:t;},0);for(var _i215=0,_Object$entries2=Object.entries(i);_i215<_Object$entries2.length;_i215++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i215],2),_r61=_Object$entries2$_i[0],_s40=_Object$entries2$_i[1];var _i216=_o102-_s40;if(_i216){for(var _n255=0;_n255<_i216;_n255++){ip(e,e.createPositionAt(t.getChild(_r61),"end"));}n=!0;}}}return n;}function Wp(t){var e="attribute"===t.type,n=t.attributeKey;return e&&("headingRows"===n||"colspan"===n||"rowspan"===n);}function Yp(t){t.document.registerPostFixer(function(e){return function(t,e){var n=e.document.differ.getChanges();var i=!1;var _iteratorNormalCompletion368=true;var _didIteratorError368=false;var _iteratorError368=undefined;try{for(var _iterator368=n[Symbol.iterator](),_step368;!(_iteratorNormalCompletion368=(_step368=_iterator368.next()).done);_iteratorNormalCompletion368=true){var _e279=_step368.value;"insert"==_e279.type&&"table"==_e279.name&&(i=$p(_e279.position.nodeAfter,t)||i),"insert"==_e279.type&&"tableRow"==_e279.name&&(i=Gp(_e279.position.nodeAfter,t)||i),"insert"==_e279.type&&"tableCell"==_e279.name&&(i=Qp(_e279.position.nodeAfter,t)||i),Kp(_e279)&&(i=Qp(_e279.position.parent,t)||i);}}catch(err){_didIteratorError368=true;_iteratorError368=err;}finally{try{if(!_iteratorNormalCompletion368&&_iterator368["return"]!=null){_iterator368["return"]();}}finally{if(_didIteratorError368){throw _iteratorError368;}}}return i;}(e,t);});}function $p(t,e){var n=!1;var _iteratorNormalCompletion369=true;var _didIteratorError369=false;var _iteratorError369=undefined;try{for(var _iterator369=t.getChildren()[Symbol.iterator](),_step369;!(_iteratorNormalCompletion369=(_step369=_iterator369.next()).done);_iteratorNormalCompletion369=true){var _i217=_step369.value;n=Gp(_i217,e)||n;}}catch(err){_didIteratorError369=true;_iteratorError369=err;}finally{try{if(!_iteratorNormalCompletion369&&_iterator369["return"]!=null){_iterator369["return"]();}}finally{if(_didIteratorError369){throw _iteratorError369;}}}return n;}function Gp(t,e){var n=!1;var _iteratorNormalCompletion370=true;var _didIteratorError370=false;var _iteratorError370=undefined;try{for(var _iterator370=t.getChildren()[Symbol.iterator](),_step370;!(_iteratorNormalCompletion370=(_step370=_iterator370.next()).done);_iteratorNormalCompletion370=true){var _i218=_step370.value;n=Qp(_i218,e)||n;}}catch(err){_didIteratorError370=true;_iteratorError370=err;}finally{try{if(!_iteratorNormalCompletion370&&_iterator370["return"]!=null){_iterator370["return"]();}}finally{if(_didIteratorError370){throw _iteratorError370;}}}return n;}function Qp(t,e){if(0==t.childCount)return e.insertElement("paragraph",t),!0;var n=Array.from(t.getChildren()).filter(function(t){return t.is("text");});var _iteratorNormalCompletion371=true;var _didIteratorError371=false;var _iteratorError371=undefined;try{for(var _iterator371=n[Symbol.iterator](),_step371;!(_iteratorNormalCompletion371=(_step371=_iterator371.next()).done);_iteratorNormalCompletion371=true){var _t328=_step371.value;e.wrap(e.createRangeOn(_t328),"paragraph");}}catch(err){_didIteratorError371=true;_iteratorError371=err;}finally{try{if(!_iteratorNormalCompletion371&&_iterator371["return"]!=null){_iterator371["return"]();}}finally{if(_didIteratorError371){throw _iteratorError371;}}}return!!n.length;}function Kp(t){return!(!t.position||!t.position.parent.is("tableCell"))&&("insert"==t.type&&"$text"==t.name||"remove"==t.type);}function Jp(t){t.document.registerPostFixer(function(){return function(t){var e=t.document.differ,n=new Set();var _iteratorNormalCompletion372=true;var _didIteratorError372=false;var _iteratorError372=undefined;try{for(var _iterator372=e.getChanges()[Symbol.iterator](),_step372;!(_iteratorNormalCompletion372=(_step372=_iterator372.next()).done);_iteratorNormalCompletion372=true){var _t330=_step372.value;var _e280="insert"==_t330.type||"remove"==_t330.type?_t330.position.parent:_t330.range.start.parent;_e280.is("tableCell")&&Zp(_e280,_t330.type)&&n.add(_e280);}}catch(err){_didIteratorError372=true;_iteratorError372=err;}finally{try{if(!_iteratorNormalCompletion372&&_iterator372["return"]!=null){_iterator372["return"]();}}finally{if(_didIteratorError372){throw _iteratorError372;}}}if(n.size){var _iteratorNormalCompletion373=true;var _didIteratorError373=false;var _iteratorError373=undefined;try{for(var _iterator373=n.values()[Symbol.iterator](),_step373;!(_iteratorNormalCompletion373=(_step373=_iterator373.next()).done);_iteratorNormalCompletion373=true){var _t329=_step373.value;e.refreshItem(_t329);}}catch(err){_didIteratorError373=true;_iteratorError373=err;}finally{try{if(!_iteratorNormalCompletion373&&_iterator373["return"]!=null){_iterator373["return"]();}}finally{if(_didIteratorError373){throw _iteratorError373;}}}return!0;}return!1;}(t);});}function Zp(t,e){if(!Array.from(t.getChildren()).some(function(t){return t.is("paragraph");}))return!1;if("attribute"==e){var _e281=Array.from(t.getChild(0).getAttributeKeys()).length;return 1===t.childCount&&_e281<2;}return t.childCount<=("insert"==e?2:1);}n(85);var Xp=/*#__PURE__*/function(_Kl50){_inherits(Xp,_Kl50);function Xp(){_classCallCheck(this,Xp);return _possibleConstructorReturn(this,_getPrototypeOf(Xp).apply(this,arguments));}_createClass(Xp,[{key:"init",value:function init(){var _this236=this;var t=this.editor,e=t.model,n=e.schema,i=t.conversion;n.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isLimit:!0,isObject:!0,isBlock:!0}),n.register("tableRow",{allowIn:"table",isLimit:!0}),n.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0}),n.extend("$block",{allowIn:"tableCell"}),n.addChildCheck(function(t,e){if("table"==e.name&&Array.from(t.getNames()).includes("table"))return!1;}),i["for"]("upcast").add(op()),i["for"]("editingDowncast").add(hp({asWidget:!0})),i["for"]("dataDowncast").add(hp()),i["for"]("upcast").elementToElement({model:"tableRow",view:"tr"}),i["for"]("editingDowncast").add(up({asWidget:!0})),i["for"]("dataDowncast").add(up()),i["for"]("downcast").add(function(t){return t.on("remove:tableRow",function(t,e,n){t.stop();var i=n.writer,o=n.mapper,r=o.toViewPosition(e.position).getLastMatchingPosition(function(t){return!t.item.is("tr");}).nodeAfter,s=r.parent,a=i.createRangeOn(r),c=i.remove(a);var _iteratorNormalCompletion374=true;var _didIteratorError374=false;var _iteratorError374=undefined;try{for(var _iterator374=i.createRangeIn(c).getItems()[Symbol.iterator](),_step374;!(_iteratorNormalCompletion374=(_step374=_iterator374.next()).done);_iteratorNormalCompletion374=true){var _t331=_step374.value;o.unbindViewElement(_t331);}}catch(err){_didIteratorError374=true;_iteratorError374=err;}finally{try{if(!_iteratorNormalCompletion374&&_iterator374["return"]!=null){_iterator374["return"]();}}finally{if(_didIteratorError374){throw _iteratorError374;}}}s.childCount||i.remove(i.createRangeOn(s));},{priority:"higher"});}),i["for"]("upcast").add(rp("td")),i["for"]("upcast").add(rp("th")),i["for"]("editingDowncast").add(fp({asWidget:!0})),i["for"]("dataDowncast").add(fp()),i.attributeToAttribute({model:"colspan",view:"colspan"}),i.attributeToAttribute({model:"rowspan",view:"rowspan"}),i["for"]("editingDowncast").add(gp({asWidget:!0})),i["for"]("dataDowncast").add(gp()),i["for"]("editingDowncast").add(mp({asWidget:!0})),i["for"]("dataDowncast").add(mp()),t.commands.add("insertTable",new Pp(t)),t.commands.add("insertTableRowAbove",new Sp(t,{order:"above"})),t.commands.add("insertTableRowBelow",new Sp(t,{order:"below"})),t.commands.add("insertTableColumnLeft",new Mp(t,{order:"left"})),t.commands.add("insertTableColumnRight",new Mp(t,{order:"right"})),t.commands.add("removeTableRow",new Op(t)),t.commands.add("removeTableColumn",new Rp(t)),t.commands.add("splitTableCellVertically",new Ep(t,{direction:"vertically"})),t.commands.add("splitTableCellHorizontally",new Ep(t,{direction:"horizontally"})),t.commands.add("mergeTableCellRight",new Ip(t,{direction:"right"})),t.commands.add("mergeTableCellLeft",new Ip(t,{direction:"left"})),t.commands.add("mergeTableCellDown",new Ip(t,{direction:"down"})),t.commands.add("mergeTableCellUp",new Ip(t,{direction:"up"})),t.commands.add("setTableColumnHeader",new jp(t)),t.commands.add("setTableRowHeader",new Dp(t)),Up(e),Jp(e),Yp(e),this.editor.keystrokes.set("Tab",function(){return _this236._handleTabOnSelectedTable.apply(_this236,arguments);},{priority:"low"}),this.editor.keystrokes.set("Tab",this._getTabHandler(!0),{priority:"low"}),this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(!1),{priority:"low"});}},{key:"_handleTabOnSelectedTable",value:function _handleTabOnSelectedTable(t,e){var n=this.editor,i=n.model.document.selection;if(!i.isCollapsed&&1===i.rangeCount&&i.getFirstRange().isFlat){var _t332=i.getSelectedElement();if(!_t332||!_t332.is("table"))return;e(),n.model.change(function(e){e.setSelection(e.createRangeIn(_t332.getChild(0).getChild(0)));});}}},{key:"_getTabHandler",value:function _getTabHandler(t){var e=this.editor;return function(n,i){var o=ep("tableCell",e.model.document.selection.getFirstPosition());if(!o)return;i();var r=o.parent,s=r.parent,a=s.getChildIndex(r),c=r.getChildIndex(o),l=0===c;if(!t&&l&&0===a)return;var d=c===r.childCount-1,h=a===s.childCount-1;if(t&&h&&d&&(e.execute("insertTableRowBelow"),a===s.childCount-1))return;var u;if(t&&d){var _t333=s.getChild(a+1);u=_t333.getChild(0);}else if(!t&&l){var _t334=s.getChild(a-1);u=_t334.getChild(_t334.childCount-1);}else u=r.getChild(c+(t?1:-1));e.model.change(function(t){t.setSelection(t.createRangeIn(u));});};}}],[{key:"requires",get:function get(){return[Vp];}}]);return Xp;}(Kl);n(87);var tb=/*#__PURE__*/function(_Dl26){_inherits(tb,_Dl26);function tb(t){var _this237;_classCallCheck(this,tb);_this237=_possibleConstructorReturn(this,_getPrototypeOf(tb).call(this,t));var e=_this237.bindTemplate;_this237.items=_this237.createCollection(),_this237.set("rows",0),_this237.set("columns",0),_this237.bind("label").to(_assertThisInitialized(_this237),"columns",_assertThisInitialized(_this237),"rows",function(t,e){return"".concat(e," \xD7 ").concat(t);}),_this237.setTemplate({tag:"div",attributes:{"class":["ck"]},children:[{tag:"div",attributes:{"class":["ck-insert-table-dropdown__grid"]},children:_this237.items},{tag:"div",attributes:{"class":["ck-insert-table-dropdown__label"]},children:[{text:e.to("label")}]}],on:{mousedown:e.to(function(t){t.preventDefault();}),click:e.to(function(){_this237.fire("execute");})}});var _loop9=function _loop9(_t335){var e=new eb();e.on("over",function(){var e=Math.floor(_t335/10),n=_t335%10;_this237.set("rows",e+1),_this237.set("columns",n+1);}),_this237.items.add(e);};for(var _t335=0;_t335<100;_t335++){_loop9(_t335);}_this237.on("change:columns",function(){_this237._highlightGridBoxes();}),_this237.on("change:rows",function(){_this237._highlightGridBoxes();});return _this237;}_createClass(tb,[{key:"focus",value:function focus(){}},{key:"focusLast",value:function focusLast(){}},{key:"_highlightGridBoxes",value:function _highlightGridBoxes(){var t=this.rows,e=this.columns;this.items.map(function(n,i){var o=Math.floor(i/10)<t&&i%10<e;n.set("isOn",o);});}}]);return tb;}(Dl);var eb=/*#__PURE__*/function(_Dl27){_inherits(eb,_Dl27);function eb(t){var _this238;_classCallCheck(this,eb);_this238=_possibleConstructorReturn(this,_getPrototypeOf(eb).call(this,t));var e=_this238.bindTemplate;_this238.set("isOn",!1),_this238.setTemplate({tag:"div",attributes:{"class":["ck-insert-table-dropdown-grid-box",e["if"]("isOn","ck-on")]},on:{mouseover:e.to("over")}});return _this238;}return eb;}(Dl);var nb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>',ib='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',ob='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',rb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';var sb=/*#__PURE__*/function(_Kl51){_inherits(sb,_Kl51);function sb(){_classCallCheck(this,sb);return _possibleConstructorReturn(this,_getPrototypeOf(sb).apply(this,arguments));}_createClass(sb,[{key:"init",value:function init(){var _this239=this;var t=this.editor,e=this.editor.t;t.ui.componentFactory.add("insertTable",function(n){var i=t.commands.get("insertTable"),o=Sf(n);o.bind("isEnabled").to(i),o.buttonView.set({icon:nb,label:e("s"),tooltip:!0});var r=new tb(n);return o.panelView.children.add(r),r.delegate("execute").to(o),o.buttonView.on("open",function(){r.rows=0,r.columns=0;}),o.on("execute",function(){t.execute("insertTable",{rows:r.rows,columns:r.columns}),t.editing.view.focus();}),o;}),t.ui.componentFactory.add("tableColumn",function(t){var n=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:e("t"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableColumnLeft",label:e("u")}},{type:"button",model:{commandName:"insertTableColumnRight",label:e("v")}},{type:"button",model:{commandName:"removeTableColumn",label:e("w")}}];return _this239._prepareDropdown(e("x"),ib,n,t);}),t.ui.componentFactory.add("tableRow",function(t){var n=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:e("y"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowBelow",label:e("z")}},{type:"button",model:{commandName:"insertTableRowAbove",label:e("aa")}},{type:"button",model:{commandName:"removeTableRow",label:e("ab")}}];return _this239._prepareDropdown(e("ac"),ob,n,t);}),t.ui.componentFactory.add("mergeTableCells",function(t){var n=[{type:"button",model:{commandName:"mergeTableCellUp",label:e("ad")}},{type:"button",model:{commandName:"mergeTableCellRight",label:e("ae")}},{type:"button",model:{commandName:"mergeTableCellDown",label:e("af")}},{type:"button",model:{commandName:"mergeTableCellLeft",label:e("ag")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:e("ah")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:e("ai")}}];return _this239._prepareDropdown(e("aj"),rb,n,t);});}},{key:"_prepareDropdown",value:function _prepareDropdown(t,e,n,i){var o=this.editor,r=Sf(i),s=[],a=new oo();var _iteratorNormalCompletion375=true;var _didIteratorError375=false;var _iteratorError375=undefined;try{for(var _iterator375=n[Symbol.iterator](),_step375;!(_iteratorNormalCompletion375=(_step375=_iterator375.next()).done);_iteratorNormalCompletion375=true){var _t336=_step375.value;ab(_t336,o,s,a);}}catch(err){_didIteratorError375=true;_iteratorError375=err;}finally{try{if(!_iteratorNormalCompletion375&&_iterator375["return"]!=null){_iterator375["return"]();}}finally{if(_didIteratorError375){throw _iteratorError375;}}}return Mf(r,a),r.buttonView.set({label:t,icon:e,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",function(){for(var _len19=arguments.length,t=new Array(_len19),_key19=0;_key19<_len19;_key19++){t[_key19]=arguments[_key19];}return t.some(function(t){return t;});}),this.listenTo(r,"execute",function(t){o.execute(t.source.commandName),o.editing.view.focus();}),r;}}]);return sb;}(Kl);function ab(t,e,n,i){var o=t.model=new kf(t.model),_t$model=t.model,r=_t$model.commandName,s=_t$model.bindIsOn;if("separator"!==t.type){var _t337=e.commands.get(r);n.push(_t337),o.set({commandName:r}),o.bind("isEnabled").to(_t337),s&&o.bind("isOn").to(_t337,"value");}o.set({withText:!0}),i.add(t);}n(89);n.d(e,"default",function(){return cb;});var cb=/*#__PURE__*/function(_Ql){_inherits(cb,_Ql);function cb(){_classCallCheck(this,cb);return _possibleConstructorReturn(this,_getPrototypeOf(cb).apply(this,arguments));}return cb;}(Ql);cb.builtinPlugins=[/*#__PURE__*/function(_Kl52){_inherits(_class2,_Kl52);function _class2(){_classCallCheck(this,_class2);return _possibleConstructorReturn(this,_getPrototypeOf(_class2).apply(this,arguments));}_createClass(_class2,null,[{key:"requires",get:function get(){return[td,ad,hd,Td,Qd];}},{key:"pluginName",get:function get(){return"Essentials";}}]);return _class2;}(Kl),oh,/*#__PURE__*/function(_Kl53){_inherits(_class3,_Kl53);function _class3(){_classCallCheck(this,_class3);return _possibleConstructorReturn(this,_getPrototypeOf(_class3).apply(this,arguments));}_createClass(_class3,[{key:"afterInit",value:function afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats();}},{key:"_addListAutoformats",value:function _addListAutoformats(){var t=this.editor.commands;t.get("bulletedList")&&new sh(this.editor,/^[*-]\s$/,"bulletedList"),t.get("numberedList")&&new sh(this.editor,/^1[.|)]\s$/,"numberedList");}},{key:"_addBasicStylesAutoformats",value:function _addBasicStylesAutoformats(){var t=this.editor.commands;if(t.get("bold")){var _t338=lh(this.editor,"bold");new ah(this.editor,/(\*\*)([^*]+)(\*\*)$/g,_t338),new ah(this.editor,/(__)([^_]+)(__)$/g,_t338);}if(t.get("italic")){var _t339=lh(this.editor,"italic");new ah(this.editor,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,_t339),new ah(this.editor,/(?:^|[^_])(_)([^_]+)(_)$/g,_t339);}if(t.get("code")){var _t340=lh(this.editor,"code");new ah(this.editor,/(`)([^`]+)(`)$/g,_t340);}}},{key:"_addHeadingAutoformats",value:function _addHeadingAutoformats(){var _this240=this;var t=this.editor.commands.get("heading");t&&t.modelElements.filter(function(t){return t.match(/^heading[1-6]$/);}).forEach(function(e){var n=e[7],i=new RegExp("^(#{".concat(n,"})\\s$"));new sh(_this240.editor,i,function(){if(!t.isEnabled)return!1;_this240.editor.execute("heading",{value:e});});});}},{key:"_addBlockQuoteAutoformats",value:function _addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&new sh(this.editor,/^>\s$/,"blockQuote");}}],[{key:"pluginName",get:function get(){return"Autoformat";}}]);return _class3;}(Kl),/*#__PURE__*/function(_Kl54){_inherits(_class4,_Kl54);function _class4(){_classCallCheck(this,_class4);return _possibleConstructorReturn(this,_getPrototypeOf(_class4).apply(this,arguments));}_createClass(_class4,null,[{key:"requires",get:function get(){return[uh,gh];}},{key:"pluginName",get:function get(){return"Bold";}}]);return _class4;}(Kl),/*#__PURE__*/function(_Kl55){_inherits(_class5,_Kl55);function _class5(){_classCallCheck(this,_class5);return _possibleConstructorReturn(this,_getPrototypeOf(_class5).apply(this,arguments));}_createClass(_class5,null,[{key:"requires",get:function get(){return[bh,_h];}},{key:"pluginName",get:function get(){return"Italic";}}]);return _class5;}(Kl),/*#__PURE__*/function(_Kl56){_inherits(_class6,_Kl56);function _class6(){_classCallCheck(this,_class6);return _possibleConstructorReturn(this,_getPrototypeOf(_class6).apply(this,arguments));}_createClass(_class6,null,[{key:"requires",get:function get(){return[Ch,Sh];}},{key:"pluginName",get:function get(){return"BlockQuote";}}]);return _class6;}(Kl),/*#__PURE__*/function(_Kl57){_inherits(_class7,_Kl57);function _class7(){_classCallCheck(this,_class7);return _possibleConstructorReturn(this,_getPrototypeOf(_class7).apply(this,arguments));}_createClass(_class7,null,[{key:"pluginName",get:function get(){return"CKFinder";}},{key:"requires",get:function get(){return[Rh,Eh,oh];}}]);return _class7;}(Kl),/*#__PURE__*/function(_Kl58){_inherits(_class8,_Kl58);function _class8(){_classCallCheck(this,_class8);return _possibleConstructorReturn(this,_getPrototypeOf(_class8).apply(this,arguments));}_createClass(_class8,null,[{key:"requires",get:function get(){return[Fh,Hu,lf];}},{key:"pluginName",get:function get(){return"EasyImage";}}]);return _class8;}(Kl),/*#__PURE__*/function(_Kl59){_inherits(_class9,_Kl59);function _class9(){_classCallCheck(this,_class9);return _possibleConstructorReturn(this,_getPrototypeOf(_class9).apply(this,arguments));}_createClass(_class9,null,[{key:"requires",get:function get(){return[wf,Ef];}},{key:"pluginName",get:function get(){return"Heading";}}]);return _class9;}(Kl),Hu,/*#__PURE__*/function(_Kl60){_inherits(_class10,_Kl60);function _class10(){_classCallCheck(this,_class10);return _possibleConstructorReturn(this,_getPrototypeOf(_class10).apply(this,arguments));}_createClass(_class10,null,[{key:"requires",get:function get(){return[Of];}},{key:"pluginName",get:function get(){return"ImageCaption";}}]);return _class10;}(Kl),/*#__PURE__*/function(_Kl61){_inherits(_class11,_Kl61);function _class11(){_classCallCheck(this,_class11);return _possibleConstructorReturn(this,_getPrototypeOf(_class11).apply(this,arguments));}_createClass(_class11,null,[{key:"requires",get:function get(){return[Gf,Qf];}},{key:"pluginName",get:function get(){return"ImageStyle";}}]);return _class11;}(Kl),/*#__PURE__*/function(_Kl62){_inherits(_class12,_Kl62);function _class12(){_classCallCheck(this,_class12);return _possibleConstructorReturn(this,_getPrototypeOf(_class12).apply(this,arguments));}_createClass(_class12,[{key:"afterInit",value:function afterInit(){var t=this.editor,e=t.t;t.plugins.get(Kf).register("image",{ariaLabel:e("b"),items:t.config.get("image.toolbar")||[],getRelatedElement:ou});}}],[{key:"requires",get:function get(){return[Kf];}},{key:"pluginName",get:function get(){return"ImageToolbar";}}]);return _class12;}(Kl),lf,/*#__PURE__*/function(_Kl63){_inherits(_class13,_Kl63);function _class13(){_classCallCheck(this,_class13);return _possibleConstructorReturn(this,_getPrototypeOf(_class13).apply(this,arguments));}_createClass(_class13,null,[{key:"requires",get:function get(){return[Hm,Jm];}},{key:"pluginName",get:function get(){return"Link";}}]);return _class13;}(Kl),/*#__PURE__*/function(_Kl64){_inherits(_class14,_Kl64);function _class14(){_classCallCheck(this,_class14);return _possibleConstructorReturn(this,_getPrototypeOf(_class14).apply(this,arguments));}_createClass(_class14,null,[{key:"requires",get:function get(){return[yg,Cg];}},{key:"pluginName",get:function get(){return"List";}}]);return _class14;}(Kl),/*#__PURE__*/function(_Kl65){_inherits(_class15,_Kl65);function _class15(){_classCallCheck(this,_class15);return _possibleConstructorReturn(this,_getPrototypeOf(_class15).apply(this,arguments));}_createClass(_class15,null,[{key:"requires",get:function get(){return[jg,Ug,zg,fu];}},{key:"pluginName",get:function get(){return"MediaEmbed";}}]);return _class15;}(Kl),uf,/*#__PURE__*/function(_Kl66){_inherits(_class16,_Kl66);function _class16(){_classCallCheck(this,_class16);return _possibleConstructorReturn(this,_getPrototypeOf(_class16).apply(this,arguments));}_createClass(_class16,[{key:"init",value:function init(){var t=this.editor,e=[];e.push(new tp()),e.push(new $g()),t.plugins.get("Clipboard").on("inputTransformation",function(t,n){if(n.isTransformedWithPasteFromOffice)return;var i=n.dataTransfer.getData("text/html"),o=e.find(function(t){return t.isActive(i);});o&&(o.execute(n),n.isTransformedWithPasteFromOffice=!0);},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"PasteFromOffice";}},{key:"requires",get:function get(){return[td];}}]);return _class16;}(Kl),/*#__PURE__*/function(_Kl67){_inherits(_class17,_Kl67);function _class17(){_classCallCheck(this,_class17);return _possibleConstructorReturn(this,_getPrototypeOf(_class17).apply(this,arguments));}_createClass(_class17,null,[{key:"requires",get:function get(){return[Xp,sb,fu];}},{key:"pluginName",get:function get(){return"Table";}}]);return _class17;}(Kl),/*#__PURE__*/function(_Kl68){_inherits(_class18,_Kl68);function _class18(){_classCallCheck(this,_class18);return _possibleConstructorReturn(this,_getPrototypeOf(_class18).apply(this,arguments));}_createClass(_class18,[{key:"afterInit",value:function afterInit(){var t=this.editor,e=t.t,n=t.plugins.get(Kf),i=t.config.get("table.contentToolbar"),o=t.config.get("table.tableToolbar");i&&n.register("tableContent",{ariaLabel:e("c"),items:i,getRelatedElement:dp}),o&&n.register("table",{ariaLabel:e("c"),items:o,getRelatedElement:lp});}}],[{key:"requires",get:function get(){return[Kf];}},{key:"pluginName",get:function get(){return"TableToolbar";}}]);return _class18;}(Kl)],cb.defaultConfig={toolbar:{items:["heading","|","bold","italic","link","bulletedList","numberedList","imageUpload","blockQuote","insertTable","mediaEmbed","undo","redo"]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"en"};}])["default"];});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../../node_modules/webpack/buildin/harmony-module.js */ "./node_modules/webpack/buildin/harmony-module.js")(module)))

/***/ }),

/***/ "./resources/js/app.js":
/*!*****************************!*\
  !*** ./resources/js/app.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

/**
 * First we will load all of this project's JavaScript dependencies which
 * includes Vue and other libraries. It is a great starting point when
 * building robust, powerful web applications using Vue and Laravel.
 */
// window.Vue = require('vue');

/**
 * The following block of code may be used to automatically register your
 * Vue components. It will recursively scan this directory for the Vue
 * components and automatically register them with their "basename".
 *
 * Eg. ./components/ExampleComponent.vue -> <example-component></example-component>
 */
// const files = require.context('./', true, /\.vue$/i);
// files.keys().map(key => Vue.component(key.split('/').pop().split('.')[0], files(key).default));
// Vue.component('art-section', require('./components/Section.vue').default);

/**
 * Next, we will create a fresh Vue application instance and attach it to
 * the page. Then, you may begin adding components to this application
 * or customize the JavaScript scaffolding to fit your unique needs.
 */
//
// const app = new Vue({
//     el: '#app',
// });
// Start of TranslationServiceProvider
function trans(key) {
  var replace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var translation = key.split('.').reduce(function (t, i) {
    return t[i] || null;
  }, window.translations);

  for (var placeholder in replace) {
    translation = translation.replace(":".concat(placeholder), replace[placeholder]);
  }

  return translation;
}

function trans_choice(key) {
  var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
  var replace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var translation = key.split('.').reduce(function (t, i) {
    return t[i] || null;
  }, window.translations).split('|');
  translation = count > 1 ? translation[1] : translation[0];

  for (var placeholder in replace) {
    translation = translation.replace(":".concat(placeholder), replace[placeholder]);
  }

  return translation;
} //end of TranslationServiceProvider


__webpack_require__(/*! ./bootstrap */ "./resources/js/bootstrap.js");

__webpack_require__(/*! ./@ckeditor/ckeditor5-build-classic/build/ckeditor.js */ "./resources/js/@ckeditor/ckeditor5-build-classic/build/ckeditor.js");

__webpack_require__(/*! ./gijgo.js */ "./resources/js/gijgo.js");

var MyUploadAdapter =
/*#__PURE__*/
function () {
  function MyUploadAdapter(loader) {
    _classCallCheck(this, MyUploadAdapter);

    this.loader = loader;
  }

  _createClass(MyUploadAdapter, [{
    key: "upload",
    value: function upload() {
      var _this = this;

      return this.loader.file.then(function (file) {
        return new Promise(function (resolve, reject) {
          _this._initRequest();

          _this._initListeners(resolve, reject, file);

          _this._sendRequest(file);
        });
      });
    }
  }, {
    key: "abort",
    value: function abort() {
      if (this.xhr) {
        this.xhr.abort();
      }
    }
  }, {
    key: "_initRequest",
    value: function _initRequest() {
      var xhr = this.xhr = new XMLHttpRequest();
      xhr.open('POST', '/uploadImg', true);
      xhr.responseType = 'json';
    }
  }, {
    key: "_initListeners",
    value: function _initListeners(resolve, reject, file) {
      var xhr = this.xhr;
      var loader = this.loader;
      var genericErrorText = "Couldn't upload file: ".concat(file.name, ".");
      xhr.addEventListener('error', function () {
        return reject(genericErrorText);
      });
      xhr.addEventListener('abort', function () {
        return reject();
      });
      xhr.addEventListener('load', function () {
        var response = xhr.response;

        if (!response || response.error) {
          return reject(response && response.error ? response.error.message : genericErrorText);
        }

        resolve({
          "default": response.url
        });
      });

      if (xhr.upload) {
        xhr.upload.addEventListener('progress', function (evt) {
          if (evt.lengthComputable) {
            loader.uploadTotal = evt.total;
            loader.uploaded = evt.loaded;
          }
        });
      }
    }
  }, {
    key: "_sendRequest",
    value: function _sendRequest(file) {
      var data = new FormData();
      data.append('upload', file);
      this.xhr.send(data);
    }
  }]);

  return MyUploadAdapter;
}(); // ...


function MyCustomUploadAdapterPlugin(editor) {
  editor.plugins.get('FileRepository').createUploadAdapter = function (loader) {
    // Configure the URL to the upload script in your back-end here!
    return new MyUploadAdapter(loader);
  };
}

var PostUploadAdapter =
/*#__PURE__*/
function () {
  function PostUploadAdapter(loader) {
    _classCallCheck(this, PostUploadAdapter);

    this.loader = loader;
  }

  _createClass(PostUploadAdapter, [{
    key: "upload",
    value: function upload() {
      var _this2 = this;

      return this.loader.file.then(function (file) {
        return new Promise(function (resolve, reject) {
          _this2._initRequest();

          _this2._initListeners(resolve, reject, file);

          _this2._sendRequest(file);
        });
      });
    }
  }, {
    key: "abort",
    value: function abort() {
      if (this.xhr) {
        this.xhr.abort();
      }
    }
  }, {
    key: "_initRequest",
    value: function _initRequest() {
      var xhr = this.xhr = new XMLHttpRequest();
      xhr.open('POST', '/uploadPostImg', true);
      xhr.responseType = 'json';
    }
  }, {
    key: "_initListeners",
    value: function _initListeners(resolve, reject, file) {
      var xhr = this.xhr;
      var loader = this.loader;
      var genericErrorText = "Couldn't upload file: ".concat(file.name, ".");
      xhr.addEventListener('error', function () {
        return reject(genericErrorText);
      });
      xhr.addEventListener('abort', function () {
        return reject();
      });
      xhr.addEventListener('load', function () {
        var response = xhr.response;

        if (!response || response.error) {
          return reject(response && response.error ? response.error.message : genericErrorText);
        }

        resolve({
          "default": response.url
        });
      });

      if (xhr.upload) {
        xhr.upload.addEventListener('progress', function (evt) {
          if (evt.lengthComputable) {
            loader.uploadTotal = evt.total;
            loader.uploaded = evt.loaded;
          }
        });
      }
    }
  }, {
    key: "_sendRequest",
    value: function _sendRequest(file) {
      var data = new FormData();
      data.append('upload', file);
      this.xhr.send(data);
    }
  }]);

  return PostUploadAdapter;
}();

function PostUploadAdapterPlugin(editor) {
  editor.plugins.get('FileRepository').createUploadAdapter = function (loader) {
    // Configure the URL to the upload script in your back-end here!
    return new PostUploadAdapter(loader);
  };
}

$(window).scroll(function () {
  if ($(this).scrollTop()) {
    $('#scroll-to-top').fadeIn();
  } else {
    $('#scroll-to-top').fadeOut();
  }
});
$("#scroll-to-top").click(function () {
  $("html, body").clearQueue();
  $("html, body").animate({
    scrollTop: 0
  }, 1000);
});
var allEditors = document.querySelectorAll('.ckeditor');

for (var i = 0; i < allEditors.length; ++i) {
  ClassicEditor.create(allEditors[i], {
    extraPlugins: [MyCustomUploadAdapterPlugin],
    image: {
      resizeUnit: 'px'
    },
    simpleUpload: {
      uploadUrl: '/uploadImg',
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    }
  });
}

var editor;
ClassicEditor.create(document.querySelector('#editor'), {
  extraPlugins: [PostUploadAdapterPlugin],
  image: {
    resizeUnit: 'px'
  },
  simpleUpload: {
    uploadUrl: '/uploadPostImg',
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  }
}).then(function (newEditor) {
  editor = newEditor;
})["catch"](function (error) {
  console.error(error);
});
$('.page-loader').fadeOut('slow');
$('#publish-post').on('click', function () {
  var editorData = editor.getData();
  var edtext = trans('posts.edit');
  var deltext = trans('posts.delete');
  $('#content').val(editorData);
  $.ajaxSetup({
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  });
  $('.submit-loading').fadeIn().css("display", "inline-block");
  $.post("/post", {
    title: $('#post-title').val(),
    content: editorData
  }).done(function (response) {
    html = '<div class="card post-card shadow-sm mt-2"><div class="card-header bg-white p-3 post-by">';
    html += '<a href="/profile/' + response.user['id'] + '"><img class="post-by-image mr-2" src="storage/profile_images/' + response.user['avatar'] + '" />' + response.user['first_name'] + ' ' + response.user['last_name'] + '</a><div class="dropdown post-options float-right"><a class="btn btn-light dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-ellipsis-v"></i></a><div class="dropdown-menu" aria-labelledby="dropdownMenuLink"><a class="dropdown-item waves-light" href="/post/' + response.post['id'] + '/edit">' + edtext + '</a><a class="dropdown-item waves-light" href="/post/' + response.post['id'] + '/delete' + '">' + deltext + '</a></div></div></div><div class="card-header bg-white p-3 align-middle post-title">' + response.post['title'] + '</div><div class="card-body">' + response.post['content'] + '</div></div>';
    $('#new-added').prepend(html);
    editor.setData('');
    $('#post-title').val('');
    $('.submit-loading').fadeOut();
  }).fail(function (xhr, status, error) {
    $('.submit-loading').fadeOut();
  });
}); // Add Comment

$('#submit-comment').on('click', function () {
  var editorData = editor.getData();
  body_input = $(this).prev('input');
  comment_body = $(this).prev('input').val();
  post = $(this).data('post');
  $.ajaxSetup({
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  });
  $.post("/comment", {
    comment_body: comment_body,
    post_id: post
  }).done(function (response) {
    console.log(response);
    html = '<div class="bg-white comment rounded p-2"><div class="comment-header mb-1"><a href="/profile/' + response.user['id'] + '"><img class="comment-by-image mr-2" src="storage/profile_images/' + response.user['avatar'] + '"/>' + response.user['fullname'] + '</a></div><div class="comment-body">' + response.comment['body'] + '</div><div class="comment-footer text-right"><small class="text-muted">' + response.comment['created_at'] + '</small></div></div>';
    body_input.val('');
    $('#comments').prepend(html);
  }).fail(function (xhr, status, error) {
    console.log(error);
  });
}); // Video scrollers

var slider = document.querySelectorAll('.video-body');
var isOnDiv = false;
var isDown = false;
var startX;
var scrollLeft;
slider.forEach(function (el) {
  el.addEventListener('mousedown', function (e) {
    isDown = true;
    el.classList.add('active');
    startX = e.pageX - el.offsetLeft;
    scrollLeft = el.scrollLeft;
  });
  el.addEventListener('mouseleave', function () {
    isDown = false;
    el.classList.remove('active');
  });
  el.addEventListener('mouseup', function () {
    isDown = false;
    el.classList.remove('active');
  });
  el.addEventListener('mousemove', function (e) {
    if (!isDown) return;
    e.preventDefault();
    var x = e.pageX - el.offsetLeft;
    var walk = (x - startX) * 3; //scroll-fast

    el.scrollLeft = scrollLeft - walk;
  });
});
$('.scroll-right-button').click(function () {
  event.preventDefault();
  $(this).siblings('.video-body').clearQueue();
  $(this).siblings('.video-body').animate({
    scrollLeft: "+=300px"
  }, "slow");
});
$('.scroll-left-button').click(function () {
  event.preventDefault();
  $(this).siblings('.video-body').clearQueue();
  $(this).siblings('.video-body').animate({
    scrollLeft: "-=300px"
  }, "slow");
});
$('#datepicker').datepicker({
  uiLibrary: 'bootstrap4',
  format: 'yyyy/mm/dd'
}); // End of video scrollers

/***/ }),

/***/ "./resources/js/bootstrap.js":
/*!***********************************!*\
  !*** ./resources/js/bootstrap.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

window._ = __webpack_require__(/*! lodash */ "./node_modules/lodash/lodash.js");
/**
 * We'll load jQuery and the Bootstrap jQuery plugin which provides support
 * for JavaScript based Bootstrap features such as modals and tabs. This
 * code may be modified to fit the specific needs of your application.
 */

try {
  window.Popper = __webpack_require__(/*! popper.js */ "./node_modules/popper.js/dist/esm/popper.js")["default"];
  window.$ = window.jQuery = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");

  __webpack_require__(/*! bootstrap */ "./node_modules/bootstrap/dist/js/bootstrap.js");
} catch (e) {}
/**
 * We'll load the axios HTTP library which allows us to easily issue requests
 * to our Laravel back-end. This library automatically handles sending the
 * CSRF token as a header based on the value of the "XSRF" token cookie.
 */


window.axios = __webpack_require__(/*! axios */ "./node_modules/axios/index.js");
window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
/**
 * Next we will register the CSRF Token as a common header with Axios so that
 * all outgoing HTTP requests automatically have it attached. This is just
 * a simple convenience so we don't have to attach every token manually.
 */

var token = document.head.querySelector('meta[name="csrf-token"]');

if (token) {
  window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;
} else {
  console.error('CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token');
}
/**
 * Echo exposes an expressive API for subscribing to channels and listening
 * for events that are broadcast by Laravel. Echo and event broadcasting
 * allows your team to easily build robust real-time web applications.
 */
// import Echo from 'laravel-echo'
// window.Pusher = require('pusher-js');
// window.Echo = new Echo({
//     broadcaster: 'pusher',
//     key: process.env.MIX_PUSHER_APP_KEY,
//     cluster: process.env.MIX_PUSHER_APP_CLUSTER,
//     encrypted: true
// });

/***/ }),

/***/ "./resources/js/gijgo.js":
/*!*******************************!*\
  !*** ./resources/js/gijgo.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*
 * Gijgo JavaScript Library v1.9.13
 * http://gijgo.com/
 *
 * Copyright 2014, 2019 gijgo.com
 * Released under the MIT license
 */var gj={};gj.widget=function(){var self=this;self.xhr=null;self.generateGUID=function(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}return s4()+s4()+'-'+s4()+'-'+s4()+'-'+s4()+'-'+s4()+s4()+s4();};self.mouseX=function(e){if(e){if(e.pageX){return e.pageX;}else if(e.clientX){return e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);}else if(e.touches&&e.touches.length){return e.touches[0].pageX;}else if(e.changedTouches&&e.changedTouches.length){return e.changedTouches[0].pageX;}else if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length){return e.originalEvent.touches[0].pageX;}else if(e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length){return e.originalEvent.touches[0].pageX;}}return null;};self.mouseY=function(e){if(e){if(e.pageY){return e.pageY;}else if(e.clientY){return e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);}else if(e.touches&&e.touches.length){return e.touches[0].pageY;}else if(e.changedTouches&&e.changedTouches.length){return e.changedTouches[0].pageY;}else if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length){return e.originalEvent.touches[0].pageY;}else if(e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length){return e.originalEvent.touches[0].pageY;}}return null;};};gj.widget.prototype.init=function(jsConfig,type){var option,clientConfig,fullConfig;this.attr('data-type',type);clientConfig=$.extend(true,{},this.getHTMLConfig()||{});$.extend(true,clientConfig,jsConfig||{});fullConfig=this.getConfig(clientConfig,type);this.attr('data-guid',fullConfig.guid);this.data(fullConfig);// Initialize events configured as options
for(option in fullConfig){if(gj[type].events.hasOwnProperty(option)){this.on(option,fullConfig[option]);delete fullConfig[option];}}// Initialize all plugins
for(plugin in gj[type].plugins){if(gj[type].plugins.hasOwnProperty(plugin)){gj[type].plugins[plugin].configure(this,fullConfig,clientConfig);}}return this;};gj.widget.prototype.getConfig=function(clientConfig,type){var config,uiLibrary,iconsLibrary,plugin;config=$.extend(true,{},gj[type].config.base);uiLibrary=clientConfig.hasOwnProperty('uiLibrary')?clientConfig.uiLibrary:config.uiLibrary;if(gj[type].config[uiLibrary]){$.extend(true,config,gj[type].config[uiLibrary]);}iconsLibrary=clientConfig.hasOwnProperty('iconsLibrary')?clientConfig.iconsLibrary:config.iconsLibrary;if(gj[type].config[iconsLibrary]){$.extend(true,config,gj[type].config[iconsLibrary]);}for(plugin in gj[type].plugins){if(gj[type].plugins.hasOwnProperty(plugin)){$.extend(true,config,gj[type].plugins[plugin].config.base);if(gj[type].plugins[plugin].config[uiLibrary]){$.extend(true,config,gj[type].plugins[plugin].config[uiLibrary]);}if(gj[type].plugins[plugin].config[iconsLibrary]){$.extend(true,config,gj[type].plugins[plugin].config[iconsLibrary]);}}}$.extend(true,config,clientConfig);if(!config.guid){config.guid=this.generateGUID();}return config;};gj.widget.prototype.getHTMLConfig=function(){var result=this.data(),attrs=this[0].attributes;if(attrs['width']){result.width=attrs['width'].value;}if(attrs['height']){result.height=attrs['height'].value;}if(attrs['value']){result.value=attrs['value'].value;}if(attrs['align']){result.align=attrs['align'].value;}if(result&&result.source){result.dataSource=result.source;delete result.source;}return result;};gj.widget.prototype.createDoneHandler=function(){var $widget=this;return function(response){if(typeof response==='string'&&JSON){response=JSON.parse(response);}gj[$widget.data('type')].methods.render($widget,response);};};gj.widget.prototype.createErrorHandler=function(){var $widget=this;return function(response){if(response&&response.statusText&&response.statusText!=='abort'){alert(response.statusText);}};};gj.widget.prototype.reload=function(params){var ajaxOptions,result,data=this.data(),type=this.data('type');if(data.dataSource===undefined){gj[type].methods.useHtmlDataSource(this,data);}$.extend(data.params,params);if($.isArray(data.dataSource)){result=gj[type].methods.filter(this);gj[type].methods.render(this,result);}else if(typeof data.dataSource==='string'){ajaxOptions={url:data.dataSource,data:data.params};if(this.xhr){this.xhr.abort();}this.xhr=$.ajax(ajaxOptions).done(this.createDoneHandler()).fail(this.createErrorHandler());}else if(_typeof(data.dataSource)==='object'){if(!data.dataSource.data){data.dataSource.data={};}$.extend(data.dataSource.data,data.params);ajaxOptions=$.extend(true,{},data.dataSource);//clone dataSource object
if(ajaxOptions.dataType==='json'&&_typeof(ajaxOptions.data)==='object'){ajaxOptions.data=JSON.stringify(ajaxOptions.data);}if(!ajaxOptions.success){ajaxOptions.success=this.createDoneHandler();}if(!ajaxOptions.error){ajaxOptions.error=this.createErrorHandler();}if(this.xhr){this.xhr.abort();}this.xhr=$.ajax(ajaxOptions);}return this;};gj.documentManager={events:{},subscribeForEvent:function subscribeForEvent(eventName,widgetId,callback){if(!gj.documentManager.events[eventName]||gj.documentManager.events[eventName].length===0){gj.documentManager.events[eventName]=[{widgetId:widgetId,callback:callback}];$(document).on(eventName,gj.documentManager.executeCallbacks);}else if(!gj.documentManager.events[eventName][widgetId]){gj.documentManager.events[eventName].push({widgetId:widgetId,callback:callback});}else{throw'Event '+eventName+' for widget with guid="'+widgetId+'" is already attached.';}},executeCallbacks:function executeCallbacks(e){var callbacks=gj.documentManager.events[e.type];if(callbacks){for(var i=0;i<callbacks.length;i++){callbacks[i].callback(e);}}},unsubscribeForEvent:function unsubscribeForEvent(eventName,widgetId){var success=false,events=gj.documentManager.events[eventName];if(events){for(var i=0;i<events.length;i++){if(events[i].widgetId===widgetId){events.splice(i,1);success=true;if(events.length===0){$(document).off(eventName);delete gj.documentManager.events[eventName];}}}}if(!success){throw'The "'+eventName+'" for widget with guid="'+widgetId+'" can\'t be removed.';}}};/**
  * @widget Core
  * @plugin Base
  */gj.core={messages:{'en-us':{monthNames:['January','February','March','April','May','June','July','August','September','October','November','December'],monthShortNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekDaysMin:['S','M','T','W','T','F','S'],weekDaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],am:'AM',pm:'PM',ok:'Ok',cancel:'Cancel',titleFormat:'mmmm yyyy'}},/** 
     * @method
     * @example String.1
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate('02/03/17', 'mm/dd/yy'));
     * </script>
     * @example String.2
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate('2017 2.3', 'yyyy m.d'));
     * </script>
     * @example String.dd.mmm.yyyy
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate('05 Feb 2017', 'dd mmm yyyy'));
     * </script>
     * @example String.dd.mmmm.yyyy
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate('05 February 2017', 'dd mmmm yyyy'));
     * </script>
     * @example String.HH:MM
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate('10:57', 'HH:MM'));
     * </script>
     * @example ASP.NET.JSON.Date
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate("\/Date(349653600000)\/"));
     * </script>
     * @example UNIX.Timestamp
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.parseDate(349653600000));
     * </script>
     */parseDate:function parseDate(value,format,locale){var i,year=0,month=0,date=1,hour=0,minute=0,dateParts,formatParts,result;if(value&&typeof value==='string'){if(/^\d+$/.test(value)){result=new Date(value);}else if(value.indexOf('/Date(')>-1){result=new Date(parseInt(value.substr(6),10));}else if(value){formatParts=format.split(/[\s,-\.//\:]+/);// Split only by spaces
dateParts=value.split(/[\s]+/);// Split by other chars if the split by spaces doesn't work
if(dateParts.length!=formatParts.length){dateParts=value.split(/[\s,-\.//\:]+/);}for(i=0;i<formatParts.length;i++){if(['d','dd'].indexOf(formatParts[i])>-1){date=parseInt(dateParts[i],10);}else if(['m','mm'].indexOf(formatParts[i])>-1){month=parseInt(dateParts[i],10)-1;}else if('mmm'===formatParts[i]){month=gj.core.messages[locale||'en-us'].monthShortNames.indexOf(dateParts[i]);}else if('mmmm'===formatParts[i]){month=gj.core.messages[locale||'en-us'].monthNames.indexOf(dateParts[i]);}else if(['yy','yyyy'].indexOf(formatParts[i])>-1){year=parseInt(dateParts[i],10);if(formatParts[i]==='yy'){year+=2000;}}else if(['h','hh','H','HH'].indexOf(formatParts[i])>-1){hour=parseInt(dateParts[i],10);}else if(['M','MM'].indexOf(formatParts[i])>-1){minute=parseInt(dateParts[i],10);}}result=new Date(year,month,date,hour,minute);}}else if(typeof value==='number'){result=new Date(value);}else if(value instanceof Date){result=value;}return result;},/** 
     * @method
     * @example Sample.1
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3), 'mm/dd/yy'));
     * </script>
     * @example Sample.2
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3), 'yyyy m.d'));
     * </script>
     * @example Sample.dd.mmm.yyyy
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3), 'dd mmm yyyy'));
     * </script>
     * @example Sample.dd.mmmm.yyyy
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3), 'dd mmmm yyyy'));
     * </script>
     * @example Sample.5
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3, 20, 43, 53), 'hh:MM:ss tt mm/dd/yyyy'));
     * </script>
     * @example Sample.6
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3, 20, 43, 53), 'hh:MM TT'));
     * </script>
     * @example Short.WeekDay
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3), 'ddd, mmm dd'));
     * </script>
     * @example Full.WeekDay
     * <div id="date"></div>
     * <script>
     *     $('#date').text(gj.core.formatDate(new Date(2017, 1, 3), 'dddd, mmm dd'));
     * </script>
     */formatDate:function formatDate(date,format,locale){var result='',separator,tmp,formatParts=format.split(/[\s,-\.//\:]+/),separators=format.split(/s+|M+|H+|h+|t+|T+|d+|m+|y+/);separators=separators.splice(1,separators.length-2);for(i=0;i<formatParts.length;i++){separator=separators[i]||'';switch(formatParts[i]){case's':result+=date.getSeconds()+separator;break;case'ss':result+=gj.core.pad(date.getSeconds())+separator;break;case'M':result+=date.getMinutes()+separator;break;case'MM':result+=gj.core.pad(date.getMinutes())+separator;break;case'H':result+=date.getHours()+separator;break;case'HH':result+=gj.core.pad(date.getHours())+separator;break;case'h':tmp=date.getHours()>12?date.getHours()%12:date.getHours();result+=tmp+separator;break;case'hh':tmp=date.getHours()>12?date.getHours()%12:date.getHours();result+=gj.core.pad(tmp)+separator;break;case'tt':result+=(date.getHours()>=12?'pm':'am')+separator;break;case'TT':result+=(date.getHours()>=12?'PM':'AM')+separator;break;case'd':result+=date.getDate()+separator;break;case'dd':result+=gj.core.pad(date.getDate())+separator;break;case'ddd':result+=gj.core.messages[locale||'en-us'].weekDaysShort[date.getDay()]+separator;break;case'dddd':result+=gj.core.messages[locale||'en-us'].weekDays[date.getDay()]+separator;break;case'm':result+=date.getMonth()+1+separator;break;case'mm':result+=gj.core.pad(date.getMonth()+1)+separator;break;case'mmm':result+=gj.core.messages[locale||'en-us'].monthShortNames[date.getMonth()]+separator;break;case'mmmm':result+=gj.core.messages[locale||'en-us'].monthNames[date.getMonth()]+separator;break;case'yy':result+=date.getFullYear().toString().substr(2)+separator;break;case'yyyy':result+=date.getFullYear()+separator;break;}}return result;},pad:function pad(val,len){val=String(val);len=len||2;while(val.length<len){val='0'+val;}return val;},center:function center($dialog){var left=$(window).width()/2-$dialog.width()/2,top=$(window).height()/2-$dialog.height()/2;$dialog.css('position','absolute');$dialog.css('left',left>0?left:0);$dialog.css('top',top>0?top:0);},isIE:function isIE(){return!!navigator.userAgent.match(/Trident/g)||!!navigator.userAgent.match(/MSIE/g);},setChildPosition:function setChildPosition(mainEl,childEl){var mainElRect=mainEl.getBoundingClientRect(),mainElHeight=gj.core.height(mainEl,true),childElHeight=gj.core.height(childEl,true),mainElWidth=gj.core.width(mainEl,true),childElWidth=gj.core.width(childEl,true),scrollY=window.scrollY||window.pageYOffset||0,scrollX=window.scrollX||window.pageXOffset||0;if(mainElRect.top+mainElHeight+childElHeight>window.innerHeight&&mainElRect.top>childElHeight){childEl.style.top=Math.round(mainElRect.top+scrollY-childElHeight-3)+'px';}else{childEl.style.top=Math.round(mainElRect.top+scrollY+mainElHeight+3)+'px';}if(mainElRect.left+childElWidth>document.body.clientWidth){childEl.style.left=Math.round(mainElRect.left+scrollX+mainElWidth-childElWidth)+'px';}else{childEl.style.left=Math.round(mainElRect.left+scrollX)+'px';}},height:function height(el,margin){var result,style=window.getComputedStyle(el);if(style.boxSizing==='border-box'){// border-box include padding and border within the height
result=parseInt(style.height,10);if(gj.core.isIE()){result+=parseInt(style.paddingTop||0,10)+parseInt(style.paddingBottom||0,10);result+=parseInt(style.borderTopWidth||0,10)+parseInt(style.borderBottomWidth||0,10);}}else{result=parseInt(style.height,10);result+=parseInt(style.paddingTop||0,10)+parseInt(style.paddingBottom||0,10);result+=parseInt(style.borderTopWidth||0,10)+parseInt(style.borderBottomWidth||0,10);}if(margin){result+=parseInt(style.marginTop||0,10)+parseInt(style.marginBottom||0,10);}return result;},width:function width(el,margin){var result,style=window.getComputedStyle(el);if(style.boxSizing==='border-box'){// border-box include padding and border within the width
result=parseInt(style.width,10);}else{result=parseInt(style.width,10);result+=parseInt(style.paddingLeft||0,10)+parseInt(style.paddingRight||0,10);result+=parseInt(style.borderLeftWidth||0,10)+parseInt(style.borderRightWidth||0,10);}if(margin){result+=parseInt(style.marginLeft||0,10)+parseInt(style.marginRight||0,10);}return result;},addClasses:function addClasses(el,classes){var i,arr;if(classes){arr=classes.split(' ');for(i=0;i<arr.length;i++){el.classList.add(arr[i]);}}},position:function position(el){var xScroll,yScroll,left=0,top=0,height=gj.core.height(el),width=gj.core.width(el);while(el){if(el.tagName=="BODY"){xScroll=el.scrollLeft||document.documentElement.scrollLeft;yScroll=el.scrollTop||document.documentElement.scrollTop;left+=el.offsetLeft-xScroll;// + el.clientLeft);
top+=el.offsetTop-yScroll;// + el.clientTop);
}else{left+=el.offsetLeft-el.scrollLeft;// + el.clientLeft;
top+=el.offsetTop-el.scrollTop;// + el.clientTop;
}el=el.offsetParent;}return{top:top,left:left,bottom:top+height,right:left+width};},setCaretAtEnd:function setCaretAtEnd(elem){var elemLen;if(elem){elemLen=elem.value.length;if(document.selection){// For IE Only
elem.focus();var oSel=document.selection.createRange();oSel.moveStart('character',-elemLen);oSel.moveStart('character',elemLen);oSel.moveEnd('character',0);oSel.select();}else if(elem.selectionStart||elem.selectionStart=='0'){// Firefox/Chrome                
elem.selectionStart=elemLen;elem.selectionEnd=elemLen;elem.focus();}}},getScrollParent:function getScrollParent(node){if(node==null){return null;}else if(node.scrollHeight>node.clientHeight){return node;}else{return gj.core.getScrollParent(node.parentNode);}}};gj.picker={messages:{'en-us':{}}};gj.picker.methods={initialize:function initialize($input,data,methods){var $calendar,$rightIcon,$picker=methods.createPicker($input,data),$wrapper=$input.parent('div[role="wrapper"]');if(data.uiLibrary==='bootstrap'){$rightIcon=$('<span class="input-group-addon">'+data.icons.rightIcon+'</span>');}else if(data.uiLibrary==='bootstrap4'){$rightIcon=$('<span class="input-group-append"><button class="btn btn-outline-secondary border-left-0" type="button">'+data.icons.rightIcon+'</button></span>');}else{$rightIcon=$(data.icons.rightIcon);}$rightIcon.attr('role','right-icon');if($wrapper.length===0){$wrapper=$('<div role="wrapper" />').addClass(data.style.wrapper);// The css class needs to be added before the wrapping, otherwise doesn't work.
$input.wrap($wrapper);}else{$wrapper.addClass(data.style.wrapper);}$wrapper=$input.parent('div[role="wrapper"]');data.width&&$wrapper.css('width',data.width);$input.val(data.value).addClass(data.style.input).attr('role','input');data.fontSize&&$input.css('font-size',data.fontSize);if(data.uiLibrary==='bootstrap'||data.uiLibrary==='bootstrap4'){if(data.size==='small'){$wrapper.addClass('input-group-sm');$input.addClass('form-control-sm');}else if(data.size==='large'){$wrapper.addClass('input-group-lg');$input.addClass('form-control-lg');}}else{if(data.size==='small'){$wrapper.addClass('small');}else if(data.size==='large'){$wrapper.addClass('large');}}$rightIcon.on('click',function(e){if($picker.is(':visible')){$input.close();}else{$input.open();}});$wrapper.append($rightIcon);if(data.footer!==true){$input.on('blur',function(){$input.timeout=setTimeout(function(){$input.close();},500);});$picker.mousedown(function(){clearTimeout($input.timeout);$input.focus();return false;});$picker.on('click',function(){clearTimeout($input.timeout);$input.focus();});}}};gj.picker.widget=function($element,jsConfig){var self=this,methods=gj.picker.methods;self.destroy=function(){return methods.destroy(this);};return $element;};gj.picker.widget.prototype=new gj.widget();gj.picker.widget.constructor=gj.picker.widget;gj.picker.widget.prototype.init=function(jsConfig,type,methods){gj.widget.prototype.init.call(this,jsConfig,type);this.attr('data-'+type,'true');gj.picker.methods.initialize(this,this.data(),gj[type].methods);return this;};gj.picker.widget.prototype.open=function(type){var data=this.data(),$picker=$('body').find('[role="picker"][guid="'+this.attr('data-guid')+'"]');$picker.show();$picker.closest('div[role="modal"]').show();if(data.modal){gj.core.center($picker);}else{gj.core.setChildPosition(this[0],$picker[0]);this.focus();}clearTimeout(this.timeout);gj[type].events.open(this);return this;};gj.picker.widget.prototype.close=function(type){var $picker=$('body').find('[role="picker"][guid="'+this.attr('data-guid')+'"]');$picker.hide();$picker.closest('div[role="modal"]').hide();gj[type].events.close(this);return this;};gj.picker.widget.prototype.destroy=function(type){var data=this.data(),$parent=this.parent(),$picker=$('body').find('[role="picker"][guid="'+this.attr('data-guid')+'"]');if(data){this.off();if($picker.parent('[role="modal"]').length>0){$picker.unwrap();}$picker.remove();this.removeData();this.removeAttr('data-type').removeAttr('data-guid').removeAttr('data-'+type);this.removeClass();$parent.children('[role="right-icon"]').remove();this.unwrap();}return this;};/* global window alert jQuery */ /** 
 * @widget Dialog 
 * @plugin Base
 */gj.dialog={plugins:{},messages:{}};gj.dialog.config={base:{/** If set to true, the dialog will automatically open upon initialization.
         * If false, the dialog will stay hidden until the open() method is called.
         * @type boolean
         * @default true
         * @example True <!-- dialog.base, draggable -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         autoOpen: true
         *     });
         * </script>
         * @example False <!-- dialog.base, bootstrap -->
         * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <button onclick="dialog.open()" class="btn btn-default">Open Dialog</button>
         * <script>
         *     var dialog = $("#dialog").dialog({
         *         uiLibrary: 'bootstrap',
         *         autoOpen: false
         *     });
         * </script>
         */autoOpen:true,/** Specifies whether the dialog should have a close button in right part of dialog header.
         * @type boolean
         * @default true
         * @example True <!-- dialog.base, draggable -->
         * <div id="dialog">
         *     <div data-role="header"><h4 data-role="title">Dialog</h4></div>
         *     <div data-role="body">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         *     <div data-role="footer">
         *         <button onclick="dialog.close()" class="gj-button-md">Ok</button>
         *         <button onclick="dialog.close()" class="gj-button-md">Cancel</button>
         *     </div>
         * </div>
         * <script>
         *     var dialog = $("#dialog").dialog({
         *         closeButtonInHeader: true,
         *         height: 200
         *     });
         * </script>
         * @example False <!-- dialog.base, draggable -->
         * <div id="dialog">
         *     <div data-role="header"><h4 data-role="title">Dialog</h4></div>
         *     <div data-role="body">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         *     <div data-role="footer">
         *         <button onclick="dialog.close()" class="gj-button-md">Ok</button>
         *         <button onclick="dialog.close()" class="gj-button-md">Cancel</button>
         *     </div>
         * </div>
         * <script>
         *     var dialog = $("#dialog").dialog({
         *         closeButtonInHeader: false
         *     });
         * </script>
         */closeButtonInHeader:true,/** Specifies whether the dialog should close when it has focus and the user presses the escape (ESC) key.
         * @type boolean
         * @default true
         * @example True <!-- dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         closeOnEscape: true
         *     });
         * </script>
         * @example False <!-- dialog.base, draggable -->
         * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         closeOnEscape: false
         *     });
         * </script>
         */closeOnEscape:true,/** If set to true, the dialog will be draggable by the title bar.
         * @type boolean
         * @default true
         * @example True <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         draggable: true
         *     });
         * </script>
         * @example False <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         draggable: false
         *     });
         * </script>
         */draggable:true,/** The height of the dialog.
         * @additionalinfo Support string and number values. The number value sets the height in pixels.
         * The only supported string value is "auto" which will allow the dialog height to adjust based on its content.
         * @type (number|string)
         * @default "auto"
         * @example Short.Text <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         height: 200
         *     });
         * </script>
         * @example Long.Text.Material.Design <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor quam in magna vulputate, vitae laoreet odio ultrices. Phasellus at efficitur magna. Mauris purus dolor, egestas quis leo et, vulputate dictum mauris. Vivamus maximus lectus sollicitudin lorem blandit tempor. Maecenas eget posuere mi. Suspendisse id hendrerit nibh. Morbi eu odio euismod, venenatis ipsum in, egestas nunc. Mauris dignissim metus ac risus porta eleifend. Aliquam tempus libero orci, id placerat odio vehicula eu. Donec tincidunt justo dolor, sit amet tempus turpis varius sit amet. Suspendisse ut ex blandit, hendrerit enim tristique, iaculis ipsum. Vivamus venenatis dolor justo, eget scelerisque lacus dignissim quis. Duis imperdiet ex at aliquet cursus. Proin non ultricies leo. Fusce quam diam, laoreet quis fringilla vitae, viverra id magna. Nam laoreet sem in volutpat rhoncus.</div>
         * <script>
         *     $("#dialog").dialog({
         *         height: 350
         *     });
         * </script>
         * @example Long.Text.Bootstrap3 <!-- bootstrap, draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor quam in magna vulputate, vitae laoreet odio ultrices. Phasellus at efficitur magna. Mauris purus dolor, egestas quis leo et, vulputate dictum mauris. Vivamus maximus lectus sollicitudin lorem blandit tempor. Maecenas eget posuere mi. Suspendisse id hendrerit nibh. Morbi eu odio euismod, venenatis ipsum in, egestas nunc. Mauris dignissim metus ac risus porta eleifend. Aliquam tempus libero orci, id placerat odio vehicula eu. Donec tincidunt justo dolor, sit amet tempus turpis varius sit amet. Suspendisse ut ex blandit, hendrerit enim tristique, iaculis ipsum. Vivamus venenatis dolor justo, eget scelerisque lacus dignissim quis. Duis imperdiet ex at aliquet cursus. Proin non ultricies leo. Fusce quam diam, laoreet quis fringilla vitae, viverra id magna. Nam laoreet sem in volutpat rhoncus.</div>
         * <script>
         *     $("#dialog").dialog({
         *         height: 350,
         *         uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Long.Text.Bootstrap4 <!-- bootstrap4, draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor quam in magna vulputate, vitae laoreet odio ultrices. Phasellus at efficitur magna. Mauris purus dolor, egestas quis leo et, vulputate dictum mauris. Vivamus maximus lectus sollicitudin lorem blandit tempor. Maecenas eget posuere mi. Suspendisse id hendrerit nibh. Morbi eu odio euismod, venenatis ipsum in, egestas nunc. Mauris dignissim metus ac risus porta eleifend. Aliquam tempus libero orci, id placerat odio vehicula eu. Donec tincidunt justo dolor, sit amet tempus turpis varius sit amet. Suspendisse ut ex blandit, hendrerit enim tristique, iaculis ipsum. Vivamus venenatis dolor justo, eget scelerisque lacus dignissim quis. Duis imperdiet ex at aliquet cursus. Proin non ultricies leo. Fusce quam diam, laoreet quis fringilla vitae, viverra id magna. Nam laoreet sem in volutpat rhoncus.</div>
         * <script>
         *     $("#dialog").dialog({
         *         height: 350,
         *         uiLibrary: 'bootstrap4'
         *     });
         * </script>
         */height:'auto',/** The language that needs to be in use.
         * @type string
         * @default 'en-us'
         * @example French.Default <!-- draggable, dialog.base-->
         * <script src="../../dist/modular/dialog/js/messages/messages.fr-fr.js"></script>
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: true,
         *         locale: 'fr-fr'
         *     });
         * </script>
         * @example French.Custom <!-- draggable, dialog.base -->
         * <script src="../../dist/modular/dialog/js/messages/messages.fr-fr.js"></script>
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     gj.dialog.messages['fr-fr'].DefaultTitle = 'Titre de la bote de dialogue';
         *     $("#dialog").dialog({
         *         resizable: true,
         *         locale: 'fr-fr',
         *         width: 700
         *     });
         * </script>
         */locale:'en-us',/** The maximum height in pixels to which the dialog can be resized.
         * @type number
         * @default undefined
         * @example sample <!-- draggable, dialog.base -->
         * <div id="dialog">The maximum height of this dialog is set to 300 px. Try to resize it for testing.</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: true,
         *         height: 200,
         *         maxHeight: 300
         *     });
         * </script>
         */maxHeight:undefined,/** The maximum width in pixels to which the dialog can be resized.
         * @type number
         * @default undefined
         * @example sample <!-- draggable, dialog.base -->
         * <div id="dialog">The maximum width of this dialog is set to 400 px. Try to resize it for testing.</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: true,
         *         maxWidth: 400
         *     });
         * </script>
         */maxWidth:undefined,/** The minimum height in pixels to which the dialog can be resized.
         * @type number
         * @default undefined
         * @example sample <!-- draggable, dialog.base -->
         * <div id="dialog">The minimum height of this dialog is set to 200 px. Try to resize it for testing.</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: true,
         *         height: 300,
         *         minHeight: 200
         *     });
         * </script>
         */minHeight:undefined,/** The minimum width in pixels to which the dialog can be resized.
         * @type number
         * @default undefined
         * @example sample <!-- draggable, dialog.base -->
         * <div id="dialog">The minimum width of this dialog is set to 200 px. Try to resize it for testing.</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: true,
         *         minWidth: 200
         *     });
         * </script>
         */minWidth:undefined,/** If set to true, the dialog will have modal behavior.
         * Modal dialogs create an overlay below the dialog, but above other page elements and you can't interact with them.
         * @type boolean
         * @default false
         * @example True.Material.Design <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         modal: true
         *     });
         * </script>
         * @example True.Bootstrap.4 <!-- bootstrap4, draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         modal: true,
         *         uiLibrary: 'bootstrap4'
         *     });
         * </script>
         * @example False <!-- draggable, dialog.base, bootstrap -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         modal: false
         *     });
         * </script>
         */modal:false,/** If set to true, the dialog will be resizable.
         * @type boolean
         * @default false
         * @example True <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: true
         *     });
         * </script>
         * @example False <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         resizable: false
         *     });
         * </script>
         */resizable:false,/** If set to true, add vertical scroller to the dialog body.
         * @type Boolean
         * @default false
         * @example Bootstrap.3 <!-- bootstrap, draggable, dialog.base -->
         * <div id="dialog">
         *     <div data-role="body">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor quam in magna vulputate, vitae laoreet odio ultrices. Phasellus at efficitur magna. Mauris purus dolor, egestas quis leo et, vulputate dictum mauris. Vivamus maximus lectus sollicitudin lorem blandit tempor. Maecenas eget posuere mi. Suspendisse id hendrerit nibh. Morbi eu odio euismod, venenatis ipsum in, egestas nunc. Mauris dignissim metus ac risus porta eleifend. Aliquam tempus libero orci, id placerat odio vehicula eu. Donec tincidunt justo dolor, sit amet tempus turpis varius sit amet. Suspendisse ut ex blandit, hendrerit enim tristique, iaculis ipsum. Vivamus venenatis dolor justo, eget scelerisque lacus dignissim quis. Duis imperdiet ex at aliquet cursus. Proin non ultricies leo. Fusce quam diam, laoreet quis fringilla vitae, viverra id magna. Nam laoreet sem in volutpat rhoncus.</div>
         *     <div data-role="footer">
         *         <button class="btn btn-default" data-role="close">Cancel</button>
         *         <button class="btn btn-default" onclick="dialog.close()">OK</button>
         *     </div>
         * </div>
         * <script>
         *     var dialog = $("#dialog").dialog({
         *         scrollable: true,
         *         height: 300,
         *         uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor quam in magna vulputate, vitae laoreet odio ultrices. Phasellus at efficitur magna. Mauris purus dolor, egestas quis leo et, vulputate dictum mauris. Vivamus maximus lectus sollicitudin lorem blandit tempor. Maecenas eget posuere mi. Suspendisse id hendrerit nibh. Morbi eu odio euismod, venenatis ipsum in, egestas nunc. Mauris dignissim metus ac risus porta eleifend. Aliquam tempus libero orci, id placerat odio vehicula eu. Donec tincidunt justo dolor, sit amet tempus turpis varius sit amet. Suspendisse ut ex blandit, hendrerit enim tristique, iaculis ipsum. Vivamus venenatis dolor justo, eget scelerisque lacus dignissim quis. Duis imperdiet ex at aliquet cursus. Proin non ultricies leo. Fusce quam diam, laoreet quis fringilla vitae, viverra id magna. Nam laoreet sem in volutpat rhoncus.</div>
         * <script>
         *     $("#dialog").dialog({
         *         scrollable: true,
         *         height: 300,
         *         uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Material.Design <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porttitor quam in magna vulputate, vitae laoreet odio ultrices. Phasellus at efficitur magna. Mauris purus dolor, egestas quis leo et, vulputate dictum mauris. Vivamus maximus lectus sollicitudin lorem blandit tempor. Maecenas eget posuere mi. Suspendisse id hendrerit nibh. Morbi eu odio euismod, venenatis ipsum in, egestas nunc. Mauris dignissim metus ac risus porta eleifend. Aliquam tempus libero orci, id placerat odio vehicula eu. Donec tincidunt justo dolor, sit amet tempus turpis varius sit amet. Suspendisse ut ex blandit, hendrerit enim tristique, iaculis ipsum. Vivamus venenatis dolor justo, eget scelerisque lacus dignissim quis. Duis imperdiet ex at aliquet cursus. Proin non ultricies leo. Fusce quam diam, laoreet quis fringilla vitae, viverra id magna. Nam laoreet sem in volutpat rhoncus.</div>
         * <script>
         *     $("#dialog").dialog({
         *         scrollable: true,
         *         height: 300,
         *         uiLibrary: 'materialdesign'
         *     });
         * </script>
         */scrollable:false,/** The title of the dialog. Can be also set through the title attribute of the html element.
         * @type String
         * @default "Dialog"
         * @example Js.Config <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         title: 'My Custom Title',
         *         width: 400
         *     });
         * </script>
         * @example Html.Config <!-- draggable, dialog.base -->
         * <div id="dialog" title="My Custom Title" width="400">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog();
         * </script>
         */title:undefined,/** The name of the UI library that is going to be in use. Currently we support Material Design and Bootstrap.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type string (bootstrap|materialdesign)
         * @default undefined
         * @example Bootstrap.3 <!-- draggable, dialog.base, bootstrap -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Bootstrap.4 <!-- draggable, dialog.base, bootstrap4 -->
         * <div id="dialog">
         *     <div data-role="body">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         *     <div data-role="footer">
         *         <button class="btn btn-default" data-role="close">Cancel</button>
         *         <button class="btn btn-default" onclick="dialog.close()">OK</button>
         *     </div>
         * </div>
         * <script>
         *     var dialog = $("#dialog").dialog({
         *         uiLibrary: 'bootstrap4'
         *     });
         * </script>
         * @example Material.Design <!-- draggable, dialog.base  -->
         * <div id="dialog">
         *   <div data-role="body">
         *     Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
         *     Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
         *   </div>
         *   <div data-role="footer">
         *     <button class="gj-button-md" onclick="dialog.close()">OK</button>
         *     <button class="gj-button-md" data-role="close">Cancel</button>
         *   </div>
         * </div>
         * <script>
         *     var dialog = $("#dialog").dialog({
         *         uiLibrary: 'materialdesign',
         *         resizable: true
         *     });
         * </script>
         */uiLibrary:undefined,/** The width of the dialog.
         * @type number
         * @default 300
         * @example Fixed.Width <!-- draggable, dialog.base -->
         * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
         * <script>
         *     $("#dialog").dialog({
         *         width: 400
         *     });
         * </script>
         * @example Auto.Width <!-- draggable, dialog.base -->
         * <div id="dialog" title="Wikipedia">
         *   <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/80/Wikipedia-logo-v2.svg/1122px-Wikipedia-logo-v2.svg.png" width="420"/>
         * </div>
         * <script>
         *     $("#dialog").dialog({
         *         width: 'auto'
         *     });
         * </script>
         */width:300,style:{modal:'gj-modal',content:'gj-dialog-md',header:'gj-dialog-md-header gj-unselectable',headerTitle:'gj-dialog-md-title',headerCloseButton:'gj-dialog-md-close',body:'gj-dialog-md-body',footer:'gj-dialog-footer gj-dialog-md-footer'}},bootstrap:{style:{modal:'modal',content:'modal-content gj-dialog-bootstrap',header:'modal-header',headerTitle:'modal-title',headerCloseButton:'close',body:'modal-body',footer:'gj-dialog-footer modal-footer'}},bootstrap4:{style:{modal:'modal',content:'modal-content gj-dialog-bootstrap4',header:'modal-header',headerTitle:'modal-title',headerCloseButton:'close',body:'modal-body',footer:'gj-dialog-footer modal-footer'}}};/** 
  * @widget Dialog 
  * @plugin Base
  */gj.dialog.events={/**
     * Triggered when the dialog is initialized.
     *
     * @event initialized
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $("#dialog").dialog({
     *         autoOpen: false,
     *         initialized: function (e) {
     *             alert('The initialized event is fired.');
     *         }
     *     });
     * </script>
     */initialized:function initialized($dialog){$dialog.trigger("initialized");},/**
     * Triggered before the dialog is opened.
     * @event opening
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $("#dialog").dialog({
     *         autoOpen: false,
     *         opening: function (e) {
     *             alert('The opening event is fired.');
     *         },
     *         opened: function (e) {
     *             alert('The opened event is fired.');
     *         }
     *     });
     * </script>
     */opening:function opening($dialog){$dialog.trigger("opening");},/**
     * Triggered when the dialog is opened.
     * @event opened
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $("#dialog").dialog({
     *         autoOpen: false,
     *         opening: function (e) {
     *             alert('The opening event is fired.');
     *         },
     *         opened: function (e) {
     *             alert('The opened event is fired.');
     *         }
     *     });
     * </script>
     */opened:function opened($dialog){$dialog.trigger("opened");},/**
     * Triggered before the dialog is closed.
     * @event closing
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Close the dialog in order to fire closing event.</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $("#dialog").dialog({
     *         autoOpen: false,
     *         closing: function (e) {
     *             alert('The closing event is fired.');
     *         },
     *         closed: function (e) {
     *             alert('The closed event is fired.');
     *         }
     *     });
     * </script>
     */closing:function closing($dialog){$dialog.trigger("closing");},/**
     * Triggered when the dialog is closed.
     * @event closed
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Close the dialog in order to fire closed event.</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $("#dialog").dialog({
     *         autoOpen: false,
     *         closing: function (e) {
     *             alert('The closing event is fired.');
     *         },
     *         closed: function (e) {
     *             alert('The closed event is fired.');
     *         }
     *     });
     * </script>
     */closed:function closed($dialog){$dialog.trigger("closed");},/**
     * Triggered while the dialog is being dragged.
     * @event drag
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <div id="logPanel" class="col-xs-12 well pre-scrollable" style="height: 200px"></div>
     * <script>
     *     var log = $('#logPanel');
     *     $("#dialog").dialog({
     *         drag: function (e) {
     *             log.append('<div class="row">The drag event is fired.</div>');
     *         },
     *         dragStart: function (e) {
     *             log.append('<div class="row">The dragStart event is fired.</div>');
     *         },
     *         dragStop: function (e) {
     *             log.append('<div class="row">The dragStop event is fired.</div>');
     *         }
     *     });
     * </script>
     */drag:function drag($dialog){$dialog.trigger("drag");},/**
     * Triggered when the user starts dragging the dialog.
     * @event dragStart
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <div id="logPanel" class="col-xs-12 well pre-scrollable" style="height: 200px"></div>
     * <script>
     *     var log = $('#logPanel');
     *     $("#dialog").dialog({
     *         drag: function (e) {
     *             log.append('<div class="row">The drag event is fired.</div>');
     *         },
     *         dragStart: function (e) {
     *             log.append('<div class="row">The dragStart event is fired.</div>');
     *         },
     *         dragStop: function (e) {
     *             log.append('<div class="row">The dragStop event is fired.</div>');
     *         }
     *     });
     * </script>
     */dragStart:function dragStart($dialog){$dialog.trigger("dragStart");},/**
     * Triggered after the dialog has been dragged.
     * @event dragStop
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <div id="logPanel" class="col-xs-12 well pre-scrollable" style="height: 200px"></div>
     * <script>
     *     var log = $('#logPanel');
     *     $("#dialog").dialog({
     *         drag: function (e) {
     *             log.append('<div class="row">The drag event is fired.</div>');
     *         },
     *         dragStart: function (e) {
     *             log.append('<div class="row">The dragStart event is fired.</div>');
     *         },
     *         dragStop: function (e) {
     *             log.append('<div class="row">The dragStop event is fired.</div>');
     *         }
     *     });
     * </script>
     */dragStop:function dragStop($dialog){$dialog.trigger("dragStop");},/**
     * Triggered while the dialog is being resized.
     * @event resize
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <div id="logPanel" class="col-xs-12 well pre-scrollable" style="height: 200px"></div>
     * <script>
     *     var log = $('#logPanel');
     *     $("#dialog").dialog({
     *         resizable: true,
     *         resize: function (e) {
     *             log.append('<div class="row">The resize event is fired.</div>');
     *         },
     *         resizeStart: function (e) {
     *             log.append('<div class="row">The resizeStart event is fired.</div>');
     *         },
     *         resizeStop: function (e) {
     *             log.append('<div class="row">The resizeStop event is fired.</div>');
     *         }
     *     });
     * </script>
     */resize:function resize($dialog){$dialog.trigger("resize");},/**
     * Triggered when the user starts resizing the dialog.
     * @event resizeStart
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <div id="logPanel" class="col-xs-12 well pre-scrollable" style="height: 200px"></div>
     * <script>
     *     var log = $('#logPanel');
     *     $("#dialog").dialog({
     *         resizable: true,
     *         resize: function (e) {
     *             log.append('<div class="row">The resize event is fired.</div>');
     *         },
     *         resizeStart: function (e) {
     *             log.append('<div class="row">The resizeStart event is fired.</div>');
     *         },
     *         resizeStop: function (e) {
     *             log.append('<div class="row">The resizeStop event is fired.</div>');
     *         }
     *     });
     * </script>
     */resizeStart:function resizeStart($dialog){$dialog.trigger("resizeStart");},/**
     * Triggered after the dialog has been resized.
     * @event resizeStop
     * @param {object} e - event data
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <div id="logPanel" class="col-xs-12 well pre-scrollable" style="height: 200px"></div>
     * <script>
     *     var log = $('#logPanel');
     *     $("#dialog").dialog({
     *         resizable: true,
     *         resize: function (e) {
     *             log.append('<div class="row">The resize event is fired.</div>');
     *         },
     *         resizeStart: function (e) {
     *             log.append('<div class="row">The resizeStart event is fired.</div>');
     *         },
     *         resizeStop: function (e) {
     *             log.append('<div class="row">The resizeStop event is fired.</div>');
     *         }
     *     });
     * </script>
     */resizeStop:function resizeStop($dialog){$dialog.trigger("resizeStop");}};gj.dialog.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'dialog');gj.dialog.methods.localization(this);gj.dialog.methods.initialize(this);gj.dialog.events.initialized(this);return this;},localization:function localization($dialog){var data=$dialog.data();if(typeof data.title==='undefined'){data.title=gj.dialog.messages[data.locale].DefaultTitle;}},getHTMLConfig:function getHTMLConfig(){var result=gj.widget.prototype.getHTMLConfig.call(this),attrs=this[0].attributes;if(attrs['title']){result.title=attrs['title'].value;}return result;},initialize:function initialize($dialog){var data=$dialog.data(),$header,$body,$footer;$dialog.addClass(data.style.content);gj.dialog.methods.setSize($dialog);if(data.closeOnEscape){$(document).keyup(function(e){if(e.keyCode===27){$dialog.close();}});}$body=$dialog.children('div[data-role="body"]');if($body.length===0){$body=$('<div data-role="body"/>').addClass(data.style.body);$dialog.wrapInner($body);}else{$body.addClass(data.style.body);}$header=gj.dialog.methods.renderHeader($dialog);$footer=$dialog.children('div[data-role="footer"]').addClass(data.style.footer);$dialog.find('[data-role="close"]').on('click',function(){$dialog.close();});if(gj.draggable){if(data.draggable){gj.dialog.methods.draggable($dialog,$header);}if(data.resizable){gj.dialog.methods.resizable($dialog);}}if(data.scrollable&&data.height){$dialog.addClass('gj-dialog-scrollable');$dialog.on('opened',function(){var $body=$dialog.children('div[data-role="body"]');$body.css('height',data.height-$header.outerHeight()-($footer.length?$footer.outerHeight():0));});}gj.core.center($dialog);if(data.modal){$dialog.wrapAll('<div data-role="modal" class="'+data.style.modal+'"/>');}if(data.autoOpen){$dialog.open();}},setSize:function setSize($dialog){var data=$dialog.data();if(data.width){$dialog.css("width",data.width);}if(data.height){$dialog.css("height",data.height);}},renderHeader:function renderHeader($dialog){var $header,$title,$closeButton,data=$dialog.data();$header=$dialog.children('div[data-role="header"]');if($header.length===0){$header=$('<div data-role="header" />');$dialog.prepend($header);}$header.addClass(data.style.header);$title=$header.find('[data-role="title"]');if($title.length===0){$title=$('<h4 data-role="title">'+data.title+'</h4>');$header.append($title);}$title.addClass(data.style.headerTitle);$closeButton=$header.find('[data-role="close"]');if($closeButton.length===0&&data.closeButtonInHeader){$closeButton=$('<button type="button" data-role="close" title="'+gj.dialog.messages[data.locale].Close+'"><span></span></button>');$closeButton.addClass(data.style.headerCloseButton);$header.append($closeButton);}else if($closeButton.length>0&&data.closeButtonInHeader===false){$closeButton.hide();}else{$closeButton.addClass(data.style.headerCloseButton);}return $header;},draggable:function draggable($dialog,$header){$dialog.appendTo('body');$header.addClass('gj-draggable');$dialog.draggable({handle:$header,start:function start(){$dialog.addClass('gj-unselectable');gj.dialog.events.dragStart($dialog);},stop:function stop(){$dialog.removeClass('gj-unselectable');gj.dialog.events.dragStop($dialog);}});},resizable:function resizable($dialog){var config={'drag':gj.dialog.methods.resize,'start':function start(){$dialog.addClass('gj-unselectable');gj.dialog.events.resizeStart($dialog);},'stop':function stop(){this.removeAttribute('style');$dialog.removeClass('gj-unselectable');gj.dialog.events.resizeStop($dialog);}};$dialog.append($('<div class="gj-resizable-handle gj-resizable-n"></div>').draggable($.extend(true,{horizontal:false},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-e"></div>').draggable($.extend(true,{vertical:false},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-s"></div>').draggable($.extend(true,{horizontal:false},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-w"></div>').draggable($.extend(true,{vertical:false},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-ne"></div>').draggable($.extend(true,{},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-nw"></div>').draggable($.extend(true,{},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-sw"></div>').draggable($.extend(true,{},config)));$dialog.append($('<div class="gj-resizable-handle gj-resizable-se"></div>').draggable($.extend(true,{},config)));},resize:function resize(e,newPosition){var $el,$dialog,position,data,height,width,top,left,result=false;$el=$(this);$dialog=$el.parent();position=gj.core.position(this);offset={top:newPosition.top-position.top,left:newPosition.left-position.left};data=$dialog.data();// TODO: Include margins in the calculations
if($el.hasClass('gj-resizable-n')){height=$dialog.height()-offset.top;top=$dialog.offset().top+offset.top;}else if($el.hasClass('gj-resizable-e')){width=$dialog.width()+offset.left;}else if($el.hasClass('gj-resizable-s')){height=$dialog.height()+offset.top;}else if($el.hasClass('gj-resizable-w')){width=$dialog.width()-offset.left;left=$dialog.offset().left+offset.left;}else if($el.hasClass('gj-resizable-ne')){height=$dialog.height()-offset.top;top=$dialog.offset().top+offset.top;width=$dialog.width()+offset.left;}else if($el.hasClass('gj-resizable-nw')){height=$dialog.height()-offset.top;top=$dialog.offset().top+offset.top;width=$dialog.width()-offset.left;left=$dialog.offset().left+offset.left;}else if($el.hasClass('gj-resizable-se')){height=$dialog.height()+offset.top;width=$dialog.width()+offset.left;}else if($el.hasClass('gj-resizable-sw')){height=$dialog.height()+offset.top;width=$dialog.width()-offset.left;left=$dialog.offset().left+offset.left;}if(height&&(!data.minHeight||height>=data.minHeight)&&(!data.maxHeight||height<=data.maxHeight)){$dialog.height(height);if(top){$dialog.css('top',top);}result=true;}if(width&&(!data.minWidth||width>=data.minWidth)&&(!data.maxWidth||width<=data.maxWidth)){$dialog.width(width);if(left){$dialog.css('left',left);}result=true;}if(result){gj.dialog.events.resize($dialog);}return result;},open:function open($dialog,title){var $footer;gj.dialog.events.opening($dialog);$dialog.css('display','block');$dialog.closest('div[data-role="modal"]').css('display','block');$footer=$dialog.children('div[data-role="footer"]');if($footer.length&&$footer.outerHeight()){$dialog.children('div[data-role="body"]').css('margin-bottom',$footer.outerHeight());}if(title!==undefined){$dialog.find('[data-role="title"]').html(title);}gj.dialog.events.opened($dialog);return $dialog;},close:function close($dialog){if($dialog.is(':visible')){gj.dialog.events.closing($dialog);$dialog.css('display','none');$dialog.closest('div[data-role="modal"]').css('display','none');gj.dialog.events.closed($dialog);}return $dialog;},isOpen:function isOpen($dialog){return $dialog.is(':visible');},content:function content($dialog,html){var $body=$dialog.children('div[data-role="body"]');if(typeof html==="undefined"){return $body.html();}else{return $body.html(html);}},destroy:function destroy($dialog,keepHtml){var data=$dialog.data();if(data){if(keepHtml===false){$dialog.remove();}else{$dialog.close();$dialog.off();$dialog.removeData();$dialog.removeAttr('data-type');$dialog.removeClass(data.style.content);$dialog.find('[data-role="header"]').removeClass(data.style.header);$dialog.find('[data-role="title"]').removeClass(data.style.headerTitle);$dialog.find('[data-role="close"]').remove();$dialog.find('[data-role="body"]').removeClass(data.style.body);$dialog.find('[data-role="footer"]').removeClass(data.style.footer);}}return $dialog;}};/** 
  * @widget Dialog 
  * @plugin Base
  */gj.dialog.widget=function($element,jsConfig){var self=this,methods=gj.dialog.methods;/**
     * Opens the dialog.
     * @method
     * @param {String} title - The dialog title.
     * @fires opening, opened
     * @return dialog
     * @example Sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $('#dialog').dialog({
     *         autoOpen: false
     *     });
     * </script>
     * @example Title <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open('Custom Text')" class="gj-button-md">Open Dialog</button>
     * <script>
     *     var dialog = $('#dialog').dialog({
     *         autoOpen: false
     *     });
     * </script>
     */self.open=function(title){return methods.open(this,title);};/**
     * Close the dialog.
     * @method
     * @fires closing, closed
     * @return dialog
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <button onclick="dialog.close()" class="gj-button-md">Close Dialog</button>
     * <script>
     *     var dialog = $('#dialog').dialog();
     * </script>
     */self.close=function(){return methods.close(this);};/**
     * Check if the dialog is currently open.
     * @method
     * @return boolean
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="dialog.open()" class="gj-button-md">Open Dialog</button>
     * <button onclick="dialog.close()" class="gj-button-md">Close Dialog</button>
     * <button onclick="alert($('#dialog').dialog('isOpen'))" class="gj-button-md">isOpen</button>
     * <script>
     *     var dialog = $('#dialog').dialog();
     * </script>
     */self.isOpen=function(){return methods.isOpen(this);};/**
     * Gets or set the content of a dialog. Supports chaining when used as a setter.
     * @method
     * @param {String} content - The content of the Dialog.
     * @return String|Dialog
     * @example sample <!-- draggable, dialog.base, bootstrap -->
     * <div id="dialog">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="alert(dialog.content())" class="btn btn-default">Get Content</button>
     * <button onclick="dialog.content('New Test Content Value')" class="btn btn-default">Set Content</button>
     * <script>
     *     var dialog = $('#dialog').dialog({ uiLibrary: 'bootstrap' });
     * </script>
     */self.content=function(content){return methods.content(this,content);};/**
     * Destroy the dialog.
     * @method
     * @param {boolean} keepHtml - If this flag is set to false, the dialog html markup will be removed from the HTML dom tree.
     * @return void
     * @example Keep.HTML.Markup <!-- draggable, dialog.base -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="create()" class="gj-button-md">Create</button>
     * <button onclick="dialog.destroy()" class="gj-button-md">Destroy</button>
     * <script>
     *     var dialog;
     *     function create() { 
     *         dialog = $('#dialog').dialog();
     *     }
     * </script>
     * @example Remove.HTML.Markup <!-- draggable, dialog.base -->
     * <div id="dialog" style="display: none">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</div>
     * <button onclick="create()" class="gj-button-md">Create</button>
     * <button onclick="dialog.destroy(false)" class="gj-button-md">Destroy</button>
     * <script>
     *     var dialog;
     *     function create() {
     *         if ($('#dialog').length === 0) {
     *             alert('The dialog can not be created.');
     *         } else {
     *             dialog = $('#dialog').dialog();
     *         }
     *     }
     * </script>
     */self.destroy=function(keepHtml){return methods.destroy(this,keepHtml);};$.extend($element,self);if('dialog'!==$element.attr('data-type')){methods.init.call($element,jsConfig);}return $element;};gj.dialog.widget.prototype=new gj.widget();gj.dialog.widget.constructor=gj.dialog.widget;gj.dialog.widget.prototype.getHTMLConfig=gj.dialog.methods.getHTMLConfig;(function($){$.fn.dialog=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.dialog.widget(this,method);}else{$widget=new gj.dialog.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);gj.dialog.messages['en-us']={Close:'Close',DefaultTitle:'Dialog'};/* global window alert jQuery */ /** 
 * @widget Draggable 
 * @plugin Base
 */gj.draggable={plugins:{}};gj.draggable.config={base:{/** If specified, restricts dragging from starting unless the mousedown occurs on the specified element.
         * Only elements that descend from the draggable element are permitted.
         * @type jquery element
         * @default undefined
         * @example sample <!-- draggable -->
         * <style>
         * .element { border: 1px solid #999; width: 300px; height: 200px; }
         * .handle { background-color: #DDD; cursor: move; width: 200px; margin: 5px auto 0px auto; text-align: center; padding: 5px; }
         * </style>
         * <div id="element" class="element">
         *   <div id="handle" class="handle">Handle for dragging</div>
         * </div>
         * <script>
         *     $('#element').draggable({
         *         handle: $('#handle')
         *     });
         * </script>
         */handle:undefined,/** If set to false, restricts dragging on vertical direction.
         * @type Boolean
         * @default true
         * @example sample <!-- draggable -->
         * <style>
         * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
         * </style>
         * <div id="element" class="element">
         *     drag me<br/>
         *     <i>(dragging on vertical direction is disabled)</i>
         * </div>
         * <script>
         *     $('#element').draggable({
         *         vertical: false
         *     });
         * </script>
         */vertical:true,/** If set to false, restricts dragging on horizontal direction.
         * @type Boolean
         * @default true
         * @example sample <!-- draggable -->
         * <style>
         * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
         * </style>
         * <div id="element" class="element">
         *     drag me<br/>
         *     <i>(dragging on horizontal direction is disabled)</i>
         * </div>
         * <script>
         *     $('#element').draggable({
         *         horizontal: false
         *     });
         * </script>
         */horizontal:true,/** Constrains dragging to within the bounds of the specified element.
         * @type Element
         * @default undefined
         * @example sample <!-- draggable -->
         * <style>
         * .container { border: 1px solid #999; width: 600px; height: 600px; }
         * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
         * </style>
         * <div id="container" class="container">
         *     <div id="element" class="element">drag me</div>
         * </div>
         * <script>
         *     $('#element').draggable({
         *         containment: document.getElementById('container')
         *     });
         * </script>
         */containment:undefined}};gj.draggable.methods={init:function init(jsConfig){var $handleEl,data,$dragEl=this;gj.widget.prototype.init.call(this,jsConfig,'draggable');data=this.data();$dragEl.attr('data-draggable','true');$handleEl=gj.draggable.methods.getHandleElement($dragEl);$handleEl.on('touchstart mousedown',function(e){var position=gj.core.position($dragEl[0]);$dragEl[0].style.top=position.top+'px';$dragEl[0].style.left=position.left+'px';$dragEl[0].style.position='fixed';$dragEl.attr('draggable-dragging',true);$dragEl.removeAttr('draggable-x').removeAttr('draggable-y');gj.documentManager.subscribeForEvent('touchmove',$dragEl.data('guid'),gj.draggable.methods.createMoveHandler($dragEl,$handleEl,data));gj.documentManager.subscribeForEvent('mousemove',$dragEl.data('guid'),gj.draggable.methods.createMoveHandler($dragEl,$handleEl,data));});gj.documentManager.subscribeForEvent('mouseup',$dragEl.data('guid'),gj.draggable.methods.createUpHandler($dragEl));gj.documentManager.subscribeForEvent('touchend',$dragEl.data('guid'),gj.draggable.methods.createUpHandler($dragEl));gj.documentManager.subscribeForEvent('touchcancel',$dragEl.data('guid'),gj.draggable.methods.createUpHandler($dragEl));return $dragEl;},getHandleElement:function getHandleElement($dragEl){var $handle=$dragEl.data('handle');return $handle&&$handle.length?$handle:$dragEl;},createUpHandler:function createUpHandler($dragEl){return function(e){if($dragEl.attr('draggable-dragging')==='true'){$dragEl.attr('draggable-dragging',false);gj.documentManager.unsubscribeForEvent('mousemove',$dragEl.data('guid'));gj.documentManager.unsubscribeForEvent('touchmove',$dragEl.data('guid'));gj.draggable.events.stop($dragEl,{x:$dragEl.mouseX(e),y:$dragEl.mouseY(e)});}};},createMoveHandler:function createMoveHandler($dragEl,$handleEl,data){return function(e){var mouseX,mouseY,offsetX,offsetY,prevX,prevY;if($dragEl.attr('draggable-dragging')==='true'){mouseX=Math.round($dragEl.mouseX(e));mouseY=Math.round($dragEl.mouseY(e));prevX=$dragEl.attr('draggable-x');prevY=$dragEl.attr('draggable-y');if(prevX&&prevY){offsetX=data.horizontal?mouseX-parseInt(prevX,10):0;offsetY=data.vertical?mouseY-parseInt(prevY,10):0;gj.draggable.methods.move($dragEl[0],data,offsetX,offsetY,mouseX,mouseY);}else{gj.draggable.events.start($dragEl,mouseX,mouseY);}$dragEl.attr('draggable-x',mouseX);$dragEl.attr('draggable-y',mouseY);}};},move:function move(dragEl,data,offsetX,offsetY,mouseX,mouseY){var contPosition,maxTop,maxLeft,position=gj.core.position(dragEl),newTop=position.top+offsetY,newLeft=position.left+offsetX;if(data.containment){contPosition=gj.core.position(data.containment);maxTop=contPosition.top+gj.core.height(data.containment)-gj.core.height(dragEl);maxLeft=contPosition.left+gj.core.width(data.containment)-gj.core.width(dragEl);if(newTop>contPosition.top&&newTop<maxTop){if(contPosition.top>=mouseY||contPosition.bottom<=mouseY){newTop=position.top;}}else{if(newTop<=contPosition.top){newTop=contPosition.top+1;}else{newTop=maxTop-1;}}if(newLeft>contPosition.left&&newLeft<maxLeft){if(contPosition.left>=mouseX||contPosition.right<=mouseX){newLeft=position.left;}}else{if(newLeft<=contPosition.left){newLeft=contPosition.left+1;}else{newLeft=maxLeft-1;}}}if(false!==gj.draggable.events.drag($(dragEl),newLeft,newTop,mouseX,mouseY)){dragEl.style.top=newTop+'px';dragEl.style.left=newLeft+'px';}},destroy:function destroy($dragEl){if($dragEl.attr('data-draggable')==='true'){gj.documentManager.unsubscribeForEvent('mouseup',$dragEl.data('guid'));$dragEl.removeData();$dragEl.removeAttr('data-guid').removeAttr('data-type').removeAttr('data-draggable');$dragEl.removeAttr('draggable-x').removeAttr('draggable-y').removeAttr('draggable-dragging');$dragEl[0].style.top='';$dragEl[0].style.left='';$dragEl[0].style.position='';$dragEl.off('drag').off('start').off('stop');gj.draggable.methods.getHandleElement($dragEl).off('mousedown');}return $dragEl;}};gj.draggable.events={/**
     * Triggered while the mouse is moved during the dragging, immediately before the current move happens.
     *
     * @event drag
     * @param {object} e - event data
     * @param {object} newPosition - New position of the draggable element as { top, left } object.
     * @param {object} mousePosition - Current mouse position as { x, y } object.
     * @example sample <!-- draggable -->
     * <style>
     * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
     * </style>
     * <div id="element" class="element gj-unselectable">drag me</div>
     * <script>
     *     $('#element').draggable({
     *         drag: function (e, newPosition, mousePosition) {
     *             $('body').append('<div>The drag event is fired. New Element Position = { top:' + newPosition.top + ', left: ' + newPosition.left + '}.</div>');
     *         }
     *     });
     * </script>
     */drag:function drag($dragEl,newLeft,newTop,mouseX,mouseY){return $dragEl.triggerHandler('drag',[{left:newLeft,top:newTop},{x:mouseX,y:mouseY}]);},/**
     * Triggered when dragging starts.
     *
     * @event start
     * @param {object} e - event data
     * @param {object} mousePosition - Current mouse position as { x, y } object.
     * @example sample <!-- draggable -->
     * <style>
     * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
     * </style>
     * <div id="element" class="element gj-unselectable">
     *   drag me
     * </div>
     * <script>
     *     $('#element').draggable({
     *         start: function (e, mousePosition) {
     *             $('body').append('<div>The start event is fired. mousePosition { x:' + mousePosition.x + ', y: ' + mousePosition.y + '}.</div>');
     *         }
     *     });
     * </script>
     */start:function start($dragEl,mouseX,mouseY){$dragEl.triggerHandler('start',[{x:mouseX,y:mouseY}]);},/**
     * Triggered when dragging stops.
     *
     * @event stop
     * @param {object} e - event data
     * @param {object} mousePosition - Current mouse position as { x, y } object.
     * @example sample <!-- draggable -->
     * <style>
     * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
     * </style>
     * <div id="element" class="element gj-unselectable">
     *   drag me
     * </div>
     * <script>
     *     $('#element').draggable({
     *         stop: function (e, offset) {
     *             $('body').append('<div>The stop event is fired.</div>');
     *         }
     *     });
     * </script>
     */stop:function stop($dragEl,mousePosition){$dragEl.triggerHandler('stop',[mousePosition]);}};gj.draggable.widget=function($element,jsConfig){var self=this,methods=gj.draggable.methods;if(!$element.destroy){/** Remove draggable functionality from the element.
         * @method
         * @return jquery element
         * @example sample <!-- draggable -->
         * <style>
         * .element { border: 1px solid #999; width: 300px; height: 200px; cursor: move; text-align: center; background-color: #DDD; }
         * </style>
         * <button onclick="dragEl.destroy()" class="gj-button-md">Destroy</button>
         * <div id="element" class="element">Drag Me</div>
         * <script>
         *     var dragEl = $('#element').draggable();
         * </script>
         */self.destroy=function(){return methods.destroy(this);};}$.extend($element,self);if('true'!==$element.attr('data-draggable')){methods.init.call($element,jsConfig);}return $element;};gj.draggable.widget.prototype=new gj.widget();gj.draggable.widget.constructor=gj.draggable.widget;(function($){$.fn.draggable=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.draggable.widget(this,method);}else{$widget=new gj.draggable.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery */ /** 
 * @widget Droppable 
 * @plugin Base
 */gj.droppable={plugins:{}};gj.droppable.config={/** If specified, the class will be added to the droppable while draggable is being hovered over the droppable.
     * @type string
     * @default undefined
     * @example sample <!-- droppable, draggable -->
     * <style>
     * .draggable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .droppable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .hover { background-color: #FF0000; }
     * </style>
     * <div id="droppable" class="droppable">Drop Here</div>
     * <div id="draggable" class="draggable">Drag Me</div>
     * <script>
     *     $('#draggable').draggable();
     *     $('#droppable').droppable({ hoverClass: 'hover' });
     * </script>
     */hoverClass:undefined};gj.droppable.methods={init:function init(jsConfig){var $dropEl=this;gj.widget.prototype.init.call(this,jsConfig,'droppable');$dropEl.attr('data-droppable','true');gj.documentManager.subscribeForEvent('mousedown',$dropEl.data('guid'),gj.droppable.methods.createMouseDownHandler($dropEl));gj.documentManager.subscribeForEvent('mousemove',$dropEl.data('guid'),gj.droppable.methods.createMouseMoveHandler($dropEl));gj.documentManager.subscribeForEvent('mouseup',$dropEl.data('guid'),gj.droppable.methods.createMouseUpHandler($dropEl));return $dropEl;},createMouseDownHandler:function createMouseDownHandler($dropEl){return function(e){$dropEl.isDragging=true;};},createMouseMoveHandler:function createMouseMoveHandler($dropEl){return function(e){if($dropEl.isDragging){var hoverClass=$dropEl.data('hoverClass'),mousePosition={x:$dropEl.mouseX(e),y:$dropEl.mouseY(e)},newIsOver=gj.droppable.methods.isOver($dropEl,mousePosition);if(newIsOver!=$dropEl.isOver){if(newIsOver){if(hoverClass){$dropEl.addClass(hoverClass);}gj.droppable.events.over($dropEl,mousePosition);}else{if(hoverClass){$dropEl.removeClass(hoverClass);}gj.droppable.events.out($dropEl);}}$dropEl.isOver=newIsOver;}};},createMouseUpHandler:function createMouseUpHandler($dropEl){return function(e){var mousePosition={left:$dropEl.mouseX(e),top:$dropEl.mouseY(e)};$dropEl.isDragging=false;if(gj.droppable.methods.isOver($dropEl,mousePosition)){gj.droppable.events.drop($dropEl);}};},isOver:function isOver($dropEl,mousePosition){var offsetTop=$dropEl.offset().top,offsetLeft=$dropEl.offset().left;return mousePosition.x>offsetLeft&&mousePosition.x<offsetLeft+$dropEl.outerWidth(true)&&mousePosition.y>offsetTop&&mousePosition.y<offsetTop+$dropEl.outerHeight(true);},destroy:function destroy($dropEl){if($dropEl.attr('data-droppable')==='true'){gj.documentManager.unsubscribeForEvent('mousedown',$dropEl.data('guid'));gj.documentManager.unsubscribeForEvent('mousemove',$dropEl.data('guid'));gj.documentManager.unsubscribeForEvent('mouseup',$dropEl.data('guid'));$dropEl.removeData();$dropEl.removeAttr('data-guid');$dropEl.removeAttr('data-droppable');$dropEl.off('drop').off('over').off('out');}return $dropEl;}};gj.droppable.events={/** Triggered when a draggable element is dropped.
     * @event drop
     * @param {object} e - event data
     * @example sample <!-- droppable, draggable -->
     * <style>
     * .draggable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .droppable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .drop { background-color: #FF0000; }
     * </style>
     * <div id="droppable" class="droppable">Drop Here</div>
     * <div id="draggable" class="draggable">Drag Me</div>
     * <script>
     *     $('#draggable').draggable();
     *     $('#droppable').droppable({ drop: function() { $(this).addClass('drop') } });
     * </script>
     */drop:function drop($dropEl,offsetX,offsetY){$dropEl.trigger('drop',[{top:offsetY,left:offsetX}]);},/** Triggered when a draggable element is dragged over the droppable.
     * @event over
     * @param {object} e - event data
     * @param {object} mousePosition - Current mouse position as { top, left } object.
     * @example sample <!-- droppable, draggable -->
     * <style>
     * .draggable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .droppable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .hover { background-color: #FF0000; }
     * </style>
     * <div id="droppable" class="droppable">Drop Here</div>
     * <div id="draggable" class="draggable">Drag Me</div>
     * <script>
     *     $('#draggable').draggable();
     *     $('#droppable').droppable({
     *         over: function() { 
     *             $(this).addClass('hover')
     *         },
     *         out: function() {
     *             $(this).removeClass('hover')
     *         }
     *     });
     * </script>
     */over:function over($dropEl,mousePosition){$dropEl.trigger('over',[mousePosition]);},/** Triggered when a draggable element is dragged out of the droppable.
     * @event out
     * @param {object} e - event data
     * @example sample <!-- droppable, draggable -->
     * <style>
     * .draggable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .droppable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .hover { background-color: #FF0000; }
     * </style>
     * <div id="droppable" class="droppable">Drop Here</div>
     * <div id="draggable" class="draggable">Drag Me</div>
     * <script>
     *     $('#draggable').draggable();
     *     $('#droppable').droppable({
     *         over: function() { $(this).addClass('hover') },
     *         out: function() { $(this).removeClass('hover') }
     *     });
     * </script>
     */out:function out($dropEl){$dropEl.trigger('out');}};gj.droppable.widget=function($element,jsConfig){var self=this,methods=gj.droppable.methods;self.isOver=false;self.isDragging=false;/** Removes the droppable functionality.
     * @method
     * @return jquery element
     * @example sample <!-- draggable, droppable -->
     * <button onclick="create()" class="gj-button-md">Create</button>
     * <button onclick="dropEl.destroy()" class="gj-button-md">Destroy</button>
     * <br/><br/>
     * <style>
     * .draggable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .droppable { border: 1px solid #999; width: 300px; height: 200px; text-align: center; }
     * .hover { background-color: #FF0000; }
     * </style>
     * <div id="droppable" class="droppable">Drop Here</div>
     * <div id="draggable" class="draggable">Drag Me</div>
     * <script>
     *     var dropEl;
     *     $('#draggable').draggable();
     *     function create() {
     *         dropEl = $('#droppable').droppable({
     *             hoverClass: 'hover'
     *         });
     *     }
     *     create();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};self.isOver=function(mousePosition){return methods.isOver(this,mousePosition);};$.extend($element,self);if('true'!==$element.attr('data-droppable')){methods.init.call($element,jsConfig);}return $element;};gj.droppable.widget.prototype=new gj.widget();gj.droppable.widget.constructor=gj.droppable.widget;(function($){$.fn.droppable=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.droppable.widget(this,method);}else{$widget=new gj.droppable.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery gj */ /**
  * @widget Grid
  * @plugin Base
  */gj.grid={plugins:{},messages:{}};gj.grid.config={base:{/** The data source for the grid.
         * @additionalinfo If set to string, then the grid is going to use this string as a url for ajax requests to the server.<br />
         * If set to object, then the grid is going to use this object as settings for the <a href="http://api.jquery.com/jquery.ajax/" target="_new">jquery ajax</a> function.<br />
         * If set to array, then the grid is going to use the array as data for rows.
         * @type (string|object|array)
         * @default undefined
         * @example Remote.JS.Configuration <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         columns: [ { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example Remote.Html.Configuration <!-- grid -->
         * <table id="grid" data-source="/Players/Get">
         *     <thead>
         *         <tr>
         *             <th width="56" data-field="ID">#</th>
         *             <th>Name</th>
         *             <th>PlaceOfBirth</th>
         *         </tr>
         *     </thead>
         * </table>
         * <script>
         *     $('#grid').grid();
         * </script>
         * @example Local.DataSource <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: data,
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example Html.DataSource <!-- grid, dropdown -->
         * <table id="grid">
         *     <thead>
         *         <tr>
         *             <th width="56" data-field="ID">#</th>
         *             <th data-sortable="true">Name</th>
         *             <th data-field="PlaceOfBirth" data-sortable="true">Place Of Birth</th>
         *         </tr>
         *     </thead>
         *     <tbody>
         *         <tr>
         *             <td>1</td>
         *             <td>Hristo Stoichkov</td>
         *             <td>Plovdiv, Bulgaria</td>
         *         </tr>
         *         <tr>
         *             <td>2</td>
         *             <td>Ronaldo Luis Nazario de Lima</td>
         *             <td>Rio de Janeiro, Brazil</td>
         *         </tr>
         *         <tr>
         *             <td>3</td>
         *             <td>David Platt</td>
         *             <td>Chadderton, Lancashire, England</td>
         *         </tr>
         *     </tbody>
         * </table>
         * <script>
         *     $('#grid').grid({ pager: { limit: 2, sizes: [2, 5, 10, 20] }});
         * </script>
         * @example Remote.Custom.Render <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var grid, onSuccessFunc = function (response) {
         *         alert('The result contains ' + response.records.length + ' records.');
         *         grid.render(response);
         *     };
         *     grid = $('#grid').grid({
         *         dataSource: { url: '/Players/Get', data: {}, success: onSuccessFunc },
         *         columns: [ { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example Remote.Custom.Error <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var grid, onErrorFunc = function (response) {
         *         alert('Server error.');
         *     };
         *     grid = $('#grid').grid({
         *         dataSource: { url: '/DataSources/InvalidUrl', error: onErrorFunc },
         *         columns: [ { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */dataSource:undefined,/** An array that holds the configurations of each column from the grid.
         * @type array
         * @example JS.Configuration <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth', name: 'Birth Place' } ]
         *     });
         * </script>
         */columns:[],/** Auto generate column for each field in the datasource when set to true.
         * @type array
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         autoGenerateColumns: true
         *     });
         * </script>
         */autoGenerateColumns:false,/** An object that holds the default configuration settings of each column from the grid.
         * @type object
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         defaultColumnSettings: { align: 'right' },
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth', name: 'Birth Place' } ]
         *     });
         * </script>
         */defaultColumnSettings:{/** If set to true the column will not be displayed in the grid. By default all columns are displayed.
             * @alias column.hidden
             * @type boolean
             * @default false
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *            { field: 'ID', width: 56 },
             *            { field: 'Name' },
             *            { field: 'PlaceOfBirth', hidden: true }
             *        ]
             *     });
             * </script>
             */hidden:false,/** The width of the column. Numeric values are treated as pixels.
             * If the width is undefined the width of the column is not set and depends on the with of the table(grid).
             * @alias column.width
             * @type number|string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', width: 120 },
             *             { field: 'PlaceOfBirth' }
             *         ]
             *     });
             * </script>
             */width:undefined,/** Indicates if the column is sortable.
             * If set to true the user can click the column header and sort the grid by the column source field.
             * @alias column.sortable
             * @type boolean|object
             * @default false
             * @example Remote <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', sortable: true },
             *             { field: 'PlaceOfBirth', sortable: false }
             *         ]
             *     });
             * </script>
             * @example Local.Custom <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     var data = [
             *         { 'ID': 1, 'Value1': 'Foo', 'Value2': 'Foo' },
             *         { 'ID': 2, 'Value1': 'bar', 'Value2': 'bar' },
             *         { 'ID': 3, 'Value1': 'moo', 'Value2': 'moo' },
             *         { 'ID': 4, 'Value1': null, 'Value2': undefined }
             *     ];
             *     var caseSensitiveSort = function (direction, column) { 
             *         return function (recordA, recordB) {
             *             var a = recordA[column.field] || '',
             *                 b = recordB[column.field] || '';
             *             return (direction === 'asc') ? a < b : b < a;
             *         };
             *     };
             *     $('#grid').grid({
             *         dataSource: data,
             *         columns: [
             *             { field: 'ID' },
             *             { field: 'Value1', sortable: true },
             *             { field: 'Value2', sortable: { sorter: caseSensitiveSort } }
             *         ]
             *     });
             * </script>
             * @example Remote.Bootstrap.3 <!-- bootstrap, grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap',
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', sortable: true },
             *             { field: 'PlaceOfBirth', sortable: false }
             *         ]
             *     });
             * </script>
             * @example Remote.Bootstrap.4.Material.Icons <!-- bootstrap4, grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap4',
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', sortable: true },
             *             { field: 'PlaceOfBirth', sortable: false }
             *         ]
             *     });
             * </script>
             * @example Remote.Bootstrap.4.FontAwesome <!-- bootstrap4, fontawesome, grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap4',
             *         iconsLibrary: 'fontawesome',
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 42 },
             *             { field: 'Name', sortable: true },
             *             { field: 'PlaceOfBirth', sortable: false }
             *         ]
             *     });
             * </script>
             */sortable:false,/** Indicates the type of the column.
             * @alias column.type
             * @type text|checkbox|icon|date|time|datetime
             * @default 'text'
             * @example Bootstrap.3.Icon <!-- grid, bootstrap -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', title: 'Player' },
             *             { field: 'PlaceOfBirth', title: 'Place of Birth' },
             *             {
             *               title: '', field: 'Info', width: 32, type: 'icon', icon: 'glyphicon-info-sign',
             *               events: {
             *                 'click': function (e) {
             *                     alert('record with id=' + e.data.id + ' is clicked.');
             *                 }
             *               }
             *             }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.4.Icon <!-- grid, bootstrap4, fontawesome -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap4',
             *         columns: [
             *             { field: 'ID', width: 42 },
             *             { field: 'Name', title: 'Player' },
             *             { field: 'PlaceOfBirth', title: 'Place of Birth' },
             *             {
             *               title: '', field: 'Info', width: 42, type: 'icon', icon: 'fa fa-pencil',
             *               events: {
             *                 'click': function (e) {
             *                     alert('record with id=' + e.data.id + ' is clicked.');
             *                 }
             *               }
             *             }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.3.Checkbox <!-- grid, checkbox, bootstrap -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', title: 'Player' },
             *             { field: 'PlaceOfBirth', title: 'Place of Birth' },
             *             { title: 'Active?', field: 'IsActive', width: 80, type: 'checkbox', align: 'center' }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.4.Checkbox <!-- grid, checkbox, bootstrap4 -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap4',
             *         columns: [
             *             { field: 'ID', width: 46 },
             *             { field: 'Name', title: 'Player' },
             *             { field: 'PlaceOfBirth', title: 'Place of Birth' },
             *             { title: 'Active?', field: 'IsActive', width: 80, type: 'checkbox', align: 'center' }
             *         ]
             *     });
             * </script>
             */type:'text',/** The caption that is going to be displayed in the header of the grid.
             * @alias column.title
             * @type string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', title: 'Player' },
             *             { field: 'PlaceOfBirth', title: 'Place of Birth' }
             *         ]
             *     });
             * </script>
             */title:undefined,/** The field name to which the column is bound.
             * If the column.title is not defined this value is used as column.title.
             * @alias column.field
             * @type string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name' },
             *             { field: 'PlaceOfBirth', title: 'Place of Birth' }
             *         ]
             *     });
             * </script>
             */field:undefined,/** This setting control the alignment of the text in the cell.
             * @alias column.align
             * @type left|right|center|justify|initial|inherit
             * @default undefined
             * @example Material.Design <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 100, align: 'center' },
             *             { field: 'Name', align: 'right' },
             *             { field: 'PlaceOfBirth', align: 'left' }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.4 <!-- grid, bootstrap4 -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap4',
             *         columns: [
             *             { field: 'ID', width: 56, align: 'center' },
             *             { field: 'Name', align: 'right' },
             *             { field: 'PlaceOfBirth', align: 'left' }
             *         ]
             *     });
             * </script>
             */align:undefined,/** The name(s) of css class(es) that are going to be applied to all cells inside that column, except the header cell.
             * @alias column.cssClass
             * @type string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <style>
             * .nowrap { white-space: nowrap }
             * .bold { font-weight: bold }
             * </style>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', width: 100, cssClass: 'nowrap bold' },
             *             { field: 'PlaceOfBirth' }
             *         ]
             *     });
             * </script>
             */cssClass:undefined,/** The name(s) of css class(es) that are going to be applied to the header cell of that column.
             * @alias column.headerCssClass
             * @type string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <style>
             * .italic { font-style: italic }
             * </style>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', headerCssClass: 'italic' },
             *             { field: 'PlaceOfBirth' }
             *         ]
             *     });
             * </script>
             */headerCssClass:undefined,/** The text for the cell tooltip.
             * @alias column.tooltip
             * @type string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56, tooltip: 'This is my tooltip 1.' },
             *             { field: 'Name', tooltip: 'This is my tooltip 2.' },
             *             { field: 'PlaceOfBirth', tooltip: 'This is my tooltip 3.' }
             *         ]
             *     });
             * </script>
             */tooltip:undefined,/** Css class for icon that is going to be in use for the cell.
             * This setting can be in use only with combination of type icon.
             * @alias column.icon
             * @type string
             * @default undefined
             * @example sample <!-- bootstrap, grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name' },
             *             { field: 'PlaceOfBirth' },
             *             { title: '', field: 'Edit', width: 32, type: 'icon', icon: 'glyphicon-pencil', events: { 'click': function (e) { alert('name=' + e.data.record.Name); } } }
             *         ]
             *     });
             * </script>
             */icon:undefined,/** Configuration object with event names as keys and functions as values that are going to be bind to each cell from the column.
             * Each function is going to receive event information as a parameter with info in the 'data' field for id, field name and record data.
             * @alias column.events
             * @type object
             * @default undefined
             * @example javascript.configuration <!-- bootstrap, grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             {
             *               field: 'Name',
             *               events: {
             *                 'mouseenter': function (e) {
             *                     e.stopPropagation();
             *                     $(e.currentTarget).css('background-color', 'red');
             *                 },
             *                 'mouseleave': function (e) {
             *                     e.stopPropagation();
             *                     $(e.currentTarget).css('background-color', '');
             *                 }
             *               }
             *             },
             *             { field: 'PlaceOfBirth' },
             *             {
             *               title: '', field: 'Info', width: 34, type: 'icon', icon: 'glyphicon-info-sign',
             *               events: {
             *                 'click': function (e) {
             *                     alert('record with id=' + e.data.id + ' is clicked.'); }
             *                 }
             *             }
             *         ]
             *     });
             * </script>
             * @example html.configuration <!-- bootstrap, grid -->
             * <table id="grid" data-source="/Players/Get" data-ui-library="bootstrap">
             *     <thead>
             *         <tr>
             *             <th data-field="ID" width="34">ID</th>
             *             <th data-events="mouseenter: onMouseEnter, mouseleave: onMouseLeave">Name</th>
             *             <th data-field="PlaceOfBirth">Place Of Birth</th>
             *             <th data-events="click: onClick" data-type="icon" data-icon="glyphicon-info-sign" width="32"></th>
             *         </tr>
             *     </thead>
             * </table>
             * <script>
             *     function onMouseEnter (e) {
             *         $(e.currentTarget).css('background-color', 'red');
             *     }
             *     function onMouseLeave (e) {
             *         $(e.currentTarget).css('background-color', '');
             *     }
             *     function onClick(e) {
             *         alert('record with id=' + e.data.id + ' is clicked.');
             *     }
             *     $('#grid').grid();
             * </script>
             */events:undefined,/** Format the date when the type of the column is date.
             * @additionalinfo <b>d</b> - Day of the month as digits; no leading zero for single-digit days.<br/>
             * <b>dd</b> - Day of the month as digits; leading zero for single-digit days.<br/>
             * <b>m</b> - Month as digits; no leading zero for single-digit months.<br/>
             * <b>mm</b> - Month as digits; leading zero for single-digit months.<br/>
             * <b>yy</b> - Year as last two digits; leading zero for years less than 10.<br/>
             * <b>yyyy</b> - Year represented by four digits.<br/>
             * <b>s</b> - Seconds; no leading zero for single-digit seconds.<br/>
             * <b>ss</b> - Seconds; leading zero for single-digit seconds.<br/>
             * <b>M</b> - Minutes; no leading zero for single-digit minutes. Uppercase MM to avoid conflict with months.<br/>
             * <b>MM</b> - Minutes; leading zero for single-digit minutes. Uppercase MM to avoid conflict with months.<br/>
             * <b>H</b> - Hours; no leading zero for single-digit hours (24-hour clock).<br/>
             * <b>HH</b> - Hours; leading zero for single-digit hours (24-hour clock).<br/>
             * <b>h</b> - Hours; no leading zero for single-digit hours (12-hour clock).<br/>
             * <b>hh</b> - Hours; leading zero for single-digit hours (12-hour clock).<br/>
             * <b>tt</b> - Lowercase, two-character time marker string: am or pm.<br/>
             * <b>TT</b> - Uppercase, two-character time marker string: AM or PM.<br/>
             * @alias column.format
             * @type string
             * @default 'mm/dd/yyyy'
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name' },
             *             { field: 'DateOfBirth', title: 'Date 1', type: 'date', format: 'HH:MM:ss mm/dd/yyyy' },
             *             { field: 'DateOfBirth', title: 'Date 2', type: 'date' }
             *         ]
             *     });
             * </script>
             */format:'mm/dd/yyyy',/** Number of decimal digits after the decimal point.
             * @alias column.decimalDigits
             * @type number
             * @default undefined
             */decimalDigits:undefined,/** Template for the content in the column.
             * Use curly brackets '{}' to wrap the names of data source columns from server response.
             * @alias column.tmpl
             * @type string
             * @default undefined
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name' },
             *             { title: 'Info', tmpl: '{Name} is born in {PlaceOfBirth}.' }
             *         ]
             *     });
             * </script>
             */tmpl:undefined,/** If set to true stop event propagation when event occur.
             * @alias column.stopPropagation
             * @type boolean
             * @default false
             * @example sample <!-- bootstrap, grid -->
             * <table id="grid" data-source="/Players/Get"></table>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', events: { 'click': function (e) { alert('name=' + e.data.record.Name); } }  },
             *             { field: 'PlaceOfBirth', stopPropagation: true, events: { 'click': function (e) { alert('name=' + e.data.record.Name); } }   },
             *             { title: '', field: 'Edit', width: 32, type: 'icon', icon: 'glyphicon-pencil', events: { 'click': function (e) { alert('name=' + e.data.record.Name); } } }
             *         ]
             *     });
             * </script>
             */stopPropagation:false,/** A renderer is an 'interceptor' function which can be used to transform data (value, appearance, etc.) before it is rendered.
             * @additionalinfo If the renderer function return a value, then this value is going to be automatically set as value of the cell.<br/>
             * If the renderer function doesn't return a value, then you have to set the content of the cell manually.
             * @alias column.renderer
             * @type function
             * @default undefined
             * @param {string} value - the record field value
             * @param {object} record - the data of the row record
             * @param {object} $cell - the current table cell presented as jquery object
             * @param {object} $displayEl - inner div element for display of the cell value presented as jquery object
             * @param {string} id - the id of the record
             * @example sample <!-- grid -->
             * <table id="grid" data-source="/Players/Get"></table>
             * <script>
             *     var nameRenderer = function (value, record, $cell, $displayEl) { 
             *         $cell.css('font-style', 'italic'); 
             *         $displayEl.css('background-color', '#EEE');
             *         $displayEl.text(value);
             *     };
             *     $('#grid').grid({
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', renderer: nameRenderer },
             *             { field: 'PlaceOfBirth', renderer: function (value, record) { return record.ID % 2 ? '<b>' + value + '</b>' : '<i>' + value + '</i>'; }  }
             *         ]
             *     });
             * </script>
             */renderer:undefined,/** Function which can be used to customize filtering with local data (javascript sourced data).
             * @additionalinfo The default filtering is not case sensitive. The filtering with remote data sources needs to be handled on the server.
             * @alias column.filter
             * @type function
             * @default undefined
             * @param {string} value - the record field value
             * @param {string} searchStr - the search string
             * @example example <!-- grid -->
             * <input type="text" id="txtValue1" placeholder="Value 1" /> &nbsp;
             * <input type="text" id="txtValue2" placeholder="Value 2" /> &nbsp;
             * <button id="btnSearch">Search</button> <br/><br/>
             * <table id="grid"></table>
             * <script>
             *     var grid, data = [
             *             { 'ID': 1, 'Value1': 'Foo', 'Value2': 'Foo' },
             *             { 'ID': 2, 'Value1': 'bar', 'Value2': 'bar' },
             *             { 'ID': 3, 'Value1': 'moo', 'Value2': 'moo' },
             *             { 'ID': 4, 'Value1': null, 'Value2': undefined }
             *         ],
             *         caseSensitiveFilter = function (value, searchStr) { 
             *             return value.indexOf(searchStr) > -1;
             *         };
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Value1' },
             *             { field: 'Value2', filter: caseSensitiveFilter }
             *         ]
             *     });
             *     $('#btnSearch').on('click', function () {
             *         grid.reload({ Value1: $('#txtValue1').val(), Value2: $('#txtValue2').val() });
             *     });
             * </script>
             */filter:undefined},mapping:{/** The name of the object in the server response, that contains array with records, that needs to be display in the grid.
             * @alias mapping.dataField
             * @type string
             * @default "records"
             */dataField:'records',/** The name of the object in the server response, that contains the number of all records on the server.
             * @alias mapping.totalRecordsField
             * @type string
             * @default "total"
             */totalRecordsField:'total'},params:{},paramNames:{/** The name of the parameter that is going to send the name of the column for sorting.
             * The "sortable" setting for at least one column should be enabled in order this parameter to be in use.
             * @alias paramNames.sortBy
             * @type string
             * @default "sortBy"
             */sortBy:'sortBy',/** The name of the parameter that is going to send the direction for sorting.
             * The "sortable" setting for at least one column should be enabled in order this parameter to be in use.
             * @alias paramNames.direction
             * @type string
             * @default "direction"
             */direction:'direction'},/** The name of the UI library that is going to be in use. Currently we support Bootstrap 3, Bootstrap 4 and Material Design.
         * @additionalinfo The css files for Bootstrap or Material Design should be manually included to the page where the grid is in use.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default 'materialdesign'
         * @example Material.Design.With.Icons <!-- dropdown, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         * </script>
         * @example Material.Design.Without.Icons <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'materialdesign',
         *         iconsLibrary: '',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         * </script>
         * @example Bootstrap.3 <!-- grid, dropdown, bootstrap -->
         * <div class="container"><table id="grid"></table></div>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'bootstrap',
         *         columns: [
         *             { field: 'ID' },
         *             { field: 'Name', sortable: true },
         *             { field: 'PlaceOfBirth' }
         *         ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         * </script>
         * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, dropdown, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome',
         *         columns: [ { field: 'ID', width: 38 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         * </script>
         */uiLibrary:'materialdesign',/** The name of the icons library that is going to be in use. Currently we support Material Icons, Font Awesome and Glyphicons.
         * @additionalinfo If you use Bootstrap 3 as uiLibrary, then the iconsLibrary is set to Glyphicons by default.<br/>
         * If you use Material Design as uiLibrary, then the iconsLibrary is set to Material Icons by default.<br/>
         * The css files for Material Icons, Font Awesome or Glyphicons should be manually included to the page where the grid is in use.
         * @type (materialicons|fontawesome|glyphicons)
         * @default 'materialicons'
         * @example Font.Awesome <!-- fontawesome, grid, dropdown -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         iconsLibrary: 'fontawesome',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 5 }
         *     });
         * </script>
         */iconsLibrary:'materialicons',/** The type of the row selection.<br/>
         * If the type is set to multiple the user will be able to select more then one row from the grid.
         * @type (single|multiple)
         * @default 'single'
         * @example Multiple.Material.Design.Checkbox <!-- checkbox, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         selectionType: 'multiple',
         *         selectionMethod: 'checkbox',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example Multiple.Bootstrap.3.Checkbox <!-- bootstrap, checkbox, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         primaryKey: 'ID',
         *         uiLibrary: 'bootstrap',
         *         dataSource: '/Players/Get',
         *         selectionType: 'multiple',
         *         selectionMethod: 'checkbox',
         *         columns: [ { field: 'ID', width: 32 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example Multiple.Bootstrap.4.Checkbox <!-- bootstrap4, checkbox, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         uiLibrary: 'bootstrap4',
         *         dataSource: '/Players/Get',
         *         selectionType: 'multiple',
         *         selectionMethod: 'checkbox',
         *         columns: [ { field: 'ID', width: 42 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example Single.Checkbox <!-- checkbox, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         selectionType: 'single',
         *         selectionMethod: 'checkbox',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */selectionType:'single',/** The type of the row selection mechanism.
         * @additionalinfo If this setting is set to "basic" when the user select a row, then this row will be highlighted.<br/>
         * If this setting is set to "checkbox" a column with checkboxes will appear as first row of the grid and when the user select a row, then this row will be highlighted and the checkbox selected.
         * @type (basic|checkbox)
         * @default "basic"
         * @example sample <!-- checkbox, grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         selectionType: 'single',
         *         selectionMethod: 'checkbox',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */selectionMethod:'basic',/** When this setting is enabled the content of the grid will be loaded automatically after the creation of the grid.
         * @type boolean
         * @default true
         * @example disabled <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         autoLoad: false,
         *         columns: [ { field: 'ID' }, { field: 'Name' } ]
         *     });
         *     grid.reload(); //call .reload() explicitly in order to load the data in the grid
         * </script>
         * @example enabled <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         autoLoad: true,
         *         columns: [ { field: 'ID' }, { field: 'Name' } ]
         *     });
         * </script>
         */autoLoad:true,/** The text that is going to be displayed if the grid is empty.
         * @type string
         * @default "No records found."
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: { url: '/Players/Get', data: { name: 'not existing name' } },
         *         notFoundText: 'No records found custom message',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example localization <!-- grid -->
         * <table id="grid"></table>
         * <script src="../../dist/modular/grid/js/messages/messages.de-de.js"></script>
         * <script>
         *     $('#grid').grid({
         *         dataSource: { url: '/Players/Get', data: { name: 'not existing name' } },
         *         locale: 'de-de',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */notFoundText:undefined,/** Width of the grid.
         * @type number
         * @default undefined
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         width: 400,
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */width:undefined,/** Minimum width of the grid.
         * @type number
         * @default undefined
         */minWidth:undefined,/** This configuration option manage the behaviour of the header row height.
         * Auto scale if set to to 'autogrow'. All body rows are with the same height if set to 'fixed'.
         * @type ('autogrow'|'fixed')
         * @default "fixed"
         * @example AutoGrow <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         width: 500,
         *         headerRowHeight: 'autogrow',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth', title: 'Very very very very long column title', width: 200 } ]
         *     });
         * </script>
         * @example Fixed <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         width: 500,
         *         headerRowHeight: 'fixed',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth', title: 'Very very very very long column title', width: 200 } ]
         *     });
         * </script>
         */headerRowHeight:'fixed',/** This configuration option manage the behaviour of the body row height.
         * Auto scale if set to to 'autogrow'. All body rows are with the same height if set to 'fixed'.
         * @type ('autogrow'|'fixed')
         * @default "autogrow"
         * @example AutoGrow <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         width: 500,
         *         bodyRowHeight: 'autogrow',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth', title: 'Very very very very long column title', width: 200 } ]
         *     });
         * </script>
         * @example Fixed <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         width: 500,
         *         bodyRowHeight: 'fixed',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth', title: 'Very very very very long column title', width: 200 } ]
         *     });
         * </script>
         */bodyRowHeight:'autogrow',/** The size of the font in the grid.
         * @type string
         * @default undefined
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         fontSize: '16px',
         *         columns: [ { field: 'ID' }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */fontSize:undefined,/** Name of column that contains the record id. 
         * @additionalinfo If you set primary key, we assume that this number is unique for each records presented in the grid.<br/>
         * For example this should contains the column with primary key from your relation db table.<br/>
         * If the primaryKey is undefined, we autogenerate id for each record in the table by starting from 1.
         * @type string
         * @default undefined
         * @example defined <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 101, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 102, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 103, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: data,
         *         primaryKey: 'ID',
         *         columns: [ 
         *             { field: 'ID', width: 70 },
         *             { field: 'Name' },
         *             { field: 'PlaceOfBirth' } ,
         *             { tmpl: '<a href="#">click me</a>', events: { click: function(e) { alert('Your id is ' + e.data.id); } }, width: 100, stopPropagation: true } 
         *         ]
         *     });
         * </script>
         * @example undefined <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var data = [
         *         { 'ID': 101, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 102, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 103, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     $('#grid').grid({
         *         dataSource: data,
         *         columns: [ 
         *             { field: 'ID', width: 70 },
         *             { field: 'Name' },
         *             { field: 'PlaceOfBirth' } ,
         *             { tmpl: '<a href="#">click me</a>', events: { click: function(e) { alert('Your id is ' + e.data.id); } }, width: 100, stopPropagation: true } 
         *         ]
         *     });
         * </script>
         */primaryKey:undefined,/** The language that needs to be in use.
         * @type string
         * @default 'en-us'
         * @example German.Bootstrap.Default <!-- bootstrap, grid, dropdown -->
         * <table id="grid"></table>
         * <script>
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'bootstrap',
         *         locale: 'de-de',
         *         columns: [ 
         *             { field: 'ID', width: 34 },
         *             { field: 'Name', title: 'Name' },
         *             { field: 'PlaceOfBirth', title: 'Geburtsort' }
         *         ],
         *         pager: { limit: 5 }
         *     });
         * </script>
         * @example French.MaterialDesign.Custom <!-- grid, dropdown -->
         * <table id="grid"></table>
         * <script>
         *     gj.grid.messages['fr-fr'].DisplayingRecords = 'Mes rsultats';
         *     $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'materialdesign',
         *         locale: 'fr-fr',
         *         columns: [ 
         *             { field: 'ID', width: 56 },
         *             { field: 'Name', title: 'Prnom' },
         *             { field: 'PlaceOfBirth', title: 'Lieu de naissance' }
         *         ],
         *         pager: { limit: 5 }
         *     });
         * </script>
         */locale:'en-us',defaultIconColumnWidth:70,defaultCheckBoxColumnWidth:70,style:{wrapper:'gj-grid-wrapper',table:'gj-grid gj-grid-md',loadingCover:'gj-grid-loading-cover',loadingText:'gj-grid-loading-text',header:{cell:undefined,sortable:'gj-cursor-pointer gj-unselectable'},content:{rowSelected:'gj-grid-md-select'}},icons:{asc:'',desc:''}},bootstrap:{style:{wrapper:'gj-grid-wrapper',table:'gj-grid gj-grid-bootstrap gj-grid-bootstrap-3 table table-bordered table-hover',content:{rowSelected:'active'}},iconsLibrary:'glyphicons',defaultIconColumnWidth:34,defaultCheckBoxColumnWidth:36},bootstrap4:{style:{wrapper:'gj-grid-wrapper',table:'gj-grid gj-grid-bootstrap gj-grid-bootstrap-4 table table-bordered table-hover',content:{rowSelected:'active'}},defaultIconColumnWidth:42,defaultCheckBoxColumnWidth:44},materialicons:{icons:{asc:'<i class="gj-icon arrow-upward" />',desc:'<i class="gj-icon arrow-downward" />'}},fontawesome:{icons:{asc:'<i class="fa fa-sort-amount-asc" aria-hidden="true"></i>',desc:'<i class="fa fa-sort-amount-desc" aria-hidden="true"></i>'}},glyphicons:{icons:{asc:'<span class="glyphicon glyphicon-sort-by-alphabet" />',desc:'<span class="glyphicon glyphicon-sort-by-alphabet-alt" />'}}};/**
  * @widget Grid
  * @plugin Base
  */gj.grid.events={/**
     * Event fires before addition of an empty row to the grid.
     * @event beforeEmptyRowInsert
     * @param {object} e - event data
     * @param {object} $row - The empty row as jquery object
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: {
     *             url: '/Players/Get',
     *             data: { name: 'not existing data' } //search for not existing data in order to fire the event
     *         },
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('beforeEmptyRowInsert', function (e, $row) {
     *         alert('beforeEmptyRowInsert is fired.');
     *     });
     * </script>
     */beforeEmptyRowInsert:function beforeEmptyRowInsert($grid,$row){return $grid.triggerHandler('beforeEmptyRowInsert',[$row]);},/**
     * Event fired before data binding takes place.
     *
     * @event dataBinding
     * @param {object} e - event data
     * @param {array} records - the list of records
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('dataBinding', function (e, records) {
     *         alert('dataBinding is fired. ' + records.length + ' records will be loaded in the grid.');
     *     });
     * </script>
     */dataBinding:function dataBinding($grid,records){return $grid.triggerHandler('dataBinding',[records]);},/**
     * Event fires after the loading of the data in the grid.
     *
     * @event dataBound
     * @param {object} e - event data
     * @param {array} records - the list of records
     * @param {number} totalRecords - the number of the all records that can be presented in the grid
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('dataBound', function (e, records, totalRecords) {
     *         alert('dataBound is fired. ' + records.length + ' records are bound to the grid.');
     *     });
     * </script>
     */dataBound:function dataBound($grid,records,totalRecords){return $grid.triggerHandler('dataBound',[records,totalRecords]);},/**
     * Event fires after insert of a row in the grid during the loading of the data.
     * @event rowDataBound
     * @param {object} e - event data
     * @param {object} $row - the row presented as jquery object
     * @param {string} id - the id of the record
     * @param {object} record - the data of the row record
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('rowDataBound', function (e, $row, id, record) {
     *         alert('rowDataBound is fired for row with id=' + id + '.');
     *     });
     * </script>
     */rowDataBound:function rowDataBound($grid,$row,id,record){return $grid.triggerHandler('rowDataBound',[$row,id,record]);},/**
     * Event fires after insert of a cell in the grid during the loading of the data
     *
     * @event cellDataBound
     * @param {object} e - event data
     * @param {object} $displayEl - inner div element for display of the cell value presented as jquery object
     * @param {string} id - the id of the record
     * @param {object} column - the column configuration data
     * @param {object} record - the data of the row record
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' }, { field: 'Bulgarian', title: 'Is Bulgarian?' } ]
     *     });
     *     grid.on('cellDataBound', function (e, $displayEl, id, column, record) {
     *         if ('Bulgarian' === column.field) {
     *             $displayEl.text(record.PlaceOfBirth.indexOf('Bulgaria') > -1 ? 'Yes' : 'No');
     *         }
     *     });
     * </script>
     */cellDataBound:function cellDataBound($grid,$displayEl,id,column,record){return $grid.triggerHandler('cellDataBound',[$displayEl,id,column,record]);},/**
     * Event fires on selection of row
     *
     * @event rowSelect
     * @param {object} e - event data
     * @param {object} $row - the row presented as jquery object
     * @param {string} id - the id of the record
     * @param {object} record - the data of the row record
     * @example sample <!-- checkbox, grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox'
     *     });
     *     grid.on('rowSelect', function (e, $row, id, record) {
     *         alert('Row with id=' + id + ' is selected.');
     *     });
     * </script>
     */rowSelect:function rowSelect($grid,$row,id,record){return $grid.triggerHandler('rowSelect',[$row,id,record]);},/**
     * Event fires on un selection of row
     *
     * @event rowUnselect
     * @param {object} e - event data
     * @param {object} $row - the row presented as jquery object
     * @param {string} id - the id of the record
     * @param {object} record - the data of the row record
     * @example sample <!-- checkbox, grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox'
     *     });
     *     grid.on('rowUnselect', function (e, $row, id, record) {
     *         alert('Row with id=' + id + ' is unselected.');
     *     });
     * </script>
     */rowUnselect:function rowUnselect($grid,$row,id,record){return $grid.triggerHandler('rowUnselect',[$row,id,record]);},/**
     * Event fires before deletion of row in the grid.
     * @event rowRemoving
     * @param {object} e - event data
     * @param {object} $row - the row presented as jquery object
     * @param {string} id - the id of the record
     * @param {object} record - the data of the row record
     * @example sample <!-- grid -->
     * <button onclick="grid.removeRow('1')" class="gj-button-md">Remove Row</button><br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: [
     *             { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *             { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *             { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *         ],
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('rowRemoving', function (e, $row, id, record) {
     *         alert('rowRemoving is fired for row with id=' + id + '.');
     *     });
     * </script>
     */rowRemoving:function rowRemoving($grid,$row,id,record){return $grid.triggerHandler('rowRemoving',[$row,id,record]);},/**
     * Event fires when the grid.destroy method is called.
     *
     * @event destroying
     * @param {object} e - event data
     * @example sample <!-- grid -->
     * <button id="btnDestroy" class="gj-button-md">Destroy</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('destroying', function (e) {
     *         alert('destroying is fired.');
     *     });
     *     $('#btnDestroy').on('click', function() {
     *         grid.destroy();
     *     });
     * </script>
     */destroying:function destroying($grid){return $grid.triggerHandler('destroying');},/**
     * Event fires when column is hidding
     *
     * @event columnHide
     * @param {object} e - event data
     * @param {object} column - The data about the column that is hidding
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     grid.on('columnHide', function (e, column) {
     *         alert('The ' + column.field + ' column is hidden.');
     *     });
     *     grid.hideColumn('PlaceOfBirth');
     * </script>
     */columnHide:function columnHide($grid,column){return $grid.triggerHandler('columnHide',[column]);},/**
     * Event fires when column is showing
     *
     * @event columnShow
     * @param {object} e - event data
     * @param {object} column - The data about the column that is showing
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth', hidden: true } ]
     *     });
     *     grid.on('columnShow', function (e, column) {
     *         alert('The ' + column.field + ' column is shown.');
     *     });
     *     grid.showColumn('PlaceOfBirth');
     * </script>
     */columnShow:function columnShow($grid,column){return $grid.triggerHandler('columnShow',[column]);},/**
     * Event fires when grid is initialized.
     *
     * @event initialized
     * @param {object} e - event data
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth', hidden: true } ],
     *         initialized: function (e) {
     *             alert('The grid is initialized.');
     *         }
     *     });
     * </script>
     */initialized:function initialized($grid){return $grid.triggerHandler('initialized');},/**
     * Event fires when the grid data is filtered.
     *
     * @additionalinfo This event is firing only when you use local dataSource, because the filtering with remote dataSource needs to be done on the server side.
     * @event dataFiltered
     * @param {object} e - event data
     * @param {object} records - The records after the filtering.
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid, data = [
     *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria', CountryName: 'Bulgaria' },
     *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil', CountryName: 'Brazil' },
     *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England', CountryName: 'England' },
     *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany', CountryName: 'Germany' },
     *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia', CountryName: 'Colombia' },
     *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria', CountryName: 'Bulgaria' }
     *     ];
     *     grid = $('#grid').grid({
     *         dataSource: data,
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         dataFiltered: function (e, records) {
     *             records.reverse(); // reverse the data
     *             records.splice(3, 2); // remove 2 elements after the 3rd record
     *         }
     *     });
     * </script>
     */dataFiltered:function dataFiltered($grid,records){return $grid.triggerHandler('dataFiltered',[records]);}};/*global gj $*/gj.grid.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'grid');gj.grid.methods.initialize(this);if(this.data('autoLoad')){this.reload();}return this;},getConfig:function getConfig(jsConfig,type){var config=gj.widget.prototype.getConfig.call(this,jsConfig,type);gj.grid.methods.setDefaultColumnConfig(config.columns,config.defaultColumnSettings);return config;},setDefaultColumnConfig:function setDefaultColumnConfig(columns,defaultColumnSettings){var column,i;if(columns&&columns.length){for(i=0;i<columns.length;i++){column=$.extend(true,{},defaultColumnSettings);$.extend(true,column,columns[i]);columns[i]=column;}}},getHTMLConfig:function getHTMLConfig(){var result=gj.widget.prototype.getHTMLConfig.call(this);result.columns=[];this.find('thead > tr > th').each(function(){var $el=$(this),title=$el.text(),config=gj.widget.prototype.getHTMLConfig.call($el);config.title=title;if(!config.field){config.field=title;}if(config.events){config.events=gj.grid.methods.eventsParser(config.events);}result.columns.push(config);});return result;},eventsParser:function eventsParser(events){var result={},list,i,key,func,position;list=events.split(',');for(i=0;i<list.length;i++){position=list[i].indexOf(':');if(position>0){key=$.trim(list[i].substr(0,position));func=$.trim(list[i].substr(position+1,list[i].length));result[key]=eval('window.'+func);//window[func]; //TODO: eveluate functions from string
}}return result;},initialize:function initialize($grid){var data=$grid.data(),$wrapper=$grid.parent('div[data-role="wrapper"]');gj.grid.methods.localization(data);if($wrapper.length===0){$wrapper=$('<div data-role="wrapper" />').addClass(data.style.wrapper);//The css class needs to be added before the wrapping, otherwise doesn't work.
$grid.wrap($wrapper);}else{$wrapper.addClass(data.style.wrapper);}if(data.width){$grid.parent().css('width',data.width);}if(data.minWidth){$grid.css('min-width',data.minWidth);}if(data.fontSize){$grid.css('font-size',data.fontSize);}if(data.headerRowHeight==='autogrow'){$grid.addClass('autogrow-header-row');}if(data.bodyRowHeight==='fixed'){$grid.addClass('fixed-body-rows');}$grid.addClass(data.style.table);if('checkbox'===data.selectionMethod){data.columns.splice(gj.grid.methods.getColumnPositionNotInRole($grid),0,{title:'',width:data.defaultCheckBoxColumnWidth,align:'center',type:'checkbox',role:'selectRow',events:{click:function click(e){gj.grid.methods.setSelected($grid,e.data.id,$(this).closest('tr'));}},headerCssClass:'gj-grid-select-all',stopPropagation:true});}if($grid.children('tbody').length===0){$grid.append($('<tbody/>'));}gj.grid.methods.renderHeader($grid);gj.grid.methods.appendEmptyRow($grid,'&nbsp;');gj.grid.events.initialized($grid);},localization:function localization(data){if(!data.notFoundText){data.notFoundText=gj.grid.messages[data.locale].NoRecordsFound;}},renderHeader:function renderHeader($grid){var data,columns,style,$thead,$row,$cell,$title,i,$checkAllBoxes;data=$grid.data();columns=data.columns;style=data.style.header;$thead=$grid.children('thead');if($thead.length===0){$thead=$('<thead />');$grid.prepend($thead);}$row=$('<tr data-role="caption" />');for(i=0;i<columns.length;i+=1){$cell=$('<th data-field="'+(columns[i].field||'')+'" />');if(columns[i].width){$cell.attr('width',columns[i].width);}else if(columns[i].type==='checkbox'){$cell.attr('width',data.defaultIconColumnWidth);}$cell.addClass(style.cell);if(columns[i].headerCssClass){$cell.addClass(columns[i].headerCssClass);}$cell.css('text-align',columns[i].align||'left');if('checkbox'===data.selectionMethod&&'multiple'===data.selectionType&&'checkbox'===columns[i].type&&'selectRow'===columns[i].role){$checkAllBoxes=$cell.find('input[data-role="selectAll"]');if($checkAllBoxes.length===0){$checkAllBoxes=$('<input type="checkbox" data-role="selectAll" />');$cell.append($checkAllBoxes);$checkAllBoxes.checkbox({uiLibrary:data.uiLibrary});}$checkAllBoxes.off('click').on('click',function(){if(this.checked){$grid.selectAll();}else{$grid.unSelectAll();}});}else{$title=$('<div data-role="title"/>').html(typeof columns[i].title==='undefined'?columns[i].field:columns[i].title);$cell.append($title);if(columns[i].sortable){$title.addClass(style.sortable);$title.on('click',gj.grid.methods.createSortHandler($grid,columns[i]));}}if(columns[i].hidden){$cell.hide();}$row.append($cell);}$thead.empty().append($row);},createSortHandler:function createSortHandler($grid,column){return function(){var data,params={};if($grid.count()>0){data=$grid.data();params[data.paramNames.sortBy]=column.field;column.direction=column.direction==='asc'?'desc':'asc';params[data.paramNames.direction]=column.direction;$grid.reload(params);}};},updateHeader:function updateHeader($grid){var $sortIcon,$cellTitle,data=$grid.data(),sortBy=data.params[data.paramNames.sortBy],direction=data.params[data.paramNames.direction];$grid.find('thead tr th [data-role="sorticon"]').remove();if(sortBy){position=gj.grid.methods.getColumnPosition($grid.data('columns'),sortBy);if(position>-1){$cellTitle=$grid.find('thead tr th:eq('+position+') div[data-role="title"]');$sortIcon=$('<div data-role="sorticon" class="gj-unselectable" />').append('desc'===direction?data.icons.desc:data.icons.asc);$cellTitle.after($sortIcon);}}},useHtmlDataSource:function useHtmlDataSource($grid,data){var dataSource=[],i,j,$cells,record,$rows=$grid.find('tbody tr[data-role != "empty"]');for(i=0;i<$rows.length;i++){$cells=$($rows[i]).find('td');record={};for(j=0;j<$cells.length;j++){record[data.columns[j].field]=$($cells[j]).html();}dataSource.push(record);}data.dataSource=dataSource;},startLoading:function startLoading($grid){var $tbody,$cover,$loading,width,height,top,data;gj.grid.methods.stopLoading($grid);data=$grid.data();if(0===$grid.outerHeight()){return;}$tbody=$grid.children('tbody');width=$tbody.outerWidth(false);height=$tbody.outerHeight(false);top=Math.abs($grid.parent().offset().top-$tbody.offset().top);$cover=$('<div data-role="loading-cover" />').addClass(data.style.loadingCover).css({width:width,height:height,top:top});$loading=$('<div data-role="loading-text">'+gj.grid.messages[data.locale].Loading+'</div>').addClass(data.style.loadingText);$loading.insertAfter($grid);$cover.insertAfter($grid);$loading.css({top:top+height/2-$loading.outerHeight(false)/2,left:width/2-$loading.outerWidth(false)/2});},stopLoading:function stopLoading($grid){$grid.parent().find('div[data-role="loading-cover"]').remove();$grid.parent().find('div[data-role="loading-text"]').remove();},appendEmptyRow:function appendEmptyRow($grid,caption){var data,$row,$cell,$wrapper;data=$grid.data();$row=$('<tr data-role="empty"/>');$cell=$('<td/>').css({width:'100%','text-align':'center'});$cell.attr('colspan',gj.grid.methods.countVisibleColumns($grid));$wrapper=$('<div />').html(caption||data.notFoundText);$cell.append($wrapper);$row.append($cell);gj.grid.events.beforeEmptyRowInsert($grid,$row);$grid.append($row);},autoGenerateColumns:function autoGenerateColumns($grid,records){var names,value,type,i,data=$grid.data();data.columns=[];if(records.length>0){names=Object.getOwnPropertyNames(records[0]);for(i=0;i<names.length;i++){value=records[0][names[i]];type='text';if(value){if(typeof value==='number'){type='number';}else if(value.indexOf('/Date(')>-1){type='date';}}data.columns.push({field:names[i],type:type});}gj.grid.methods.setDefaultColumnConfig(data.columns,data.defaultColumnSettings);}gj.grid.methods.renderHeader($grid);},loadData:function loadData($grid){var data,records,i,recLen,rowCount,$tbody,$rows,$row;data=$grid.data();records=$grid.getAll();gj.grid.events.dataBinding($grid,records);recLen=records.length;gj.grid.methods.stopLoading($grid);if(data.autoGenerateColumns){gj.grid.methods.autoGenerateColumns($grid,records);}$tbody=$grid.children('tbody');if('checkbox'===data.selectionMethod&&'multiple'===data.selectionType){$grid.find('thead input[data-role="selectAll"]').prop('checked',false);}$tbody.children('tr').not('[data-role="row"]').remove();if(0===recLen){$tbody.empty();gj.grid.methods.appendEmptyRow($grid);}$rows=$tbody.children('tr');rowCount=$rows.length;for(i=0;i<rowCount;i++){if(i<recLen){$row=$rows.eq(i);gj.grid.methods.renderRow($grid,$row,records[i],i);}else{$tbody.find('tr[data-role="row"]:gt('+(i-1)+')').remove();break;}}for(i=rowCount;i<recLen;i++){gj.grid.methods.renderRow($grid,null,records[i],i);}gj.grid.events.dataBound($grid,records,data.totalRecords);},getId:function getId(record,primaryKey,position){return primaryKey&&record[primaryKey]?record[primaryKey]:position;},renderRow:function renderRow($grid,$row,record,position){var id,$cell,i,data,mode;data=$grid.data();if(!$row||$row.length===0){mode='create';$row=$('<tr data-role="row"/>');$grid.children('tbody').append($row);}else{mode='update';$row.removeClass(data.style.content.rowSelected).removeAttr('data-selected').off('click');}id=gj.grid.methods.getId(record,data.primaryKey,position+1);$row.attr('data-position',position+1);if(data.selectionMethod!=='checkbox'){$row.on('click',gj.grid.methods.createRowClickHandler($grid,id));}for(i=0;i<data.columns.length;i++){if(mode==='update'){$cell=$row.find('td:eq('+i+')');gj.grid.methods.renderCell($grid,$cell,data.columns[i],record,id);}else{$cell=gj.grid.methods.renderCell($grid,null,data.columns[i],record,id);$row.append($cell);}}gj.grid.events.rowDataBound($grid,$row,id,record);},renderCell:function renderCell($grid,$cell,column,record,id,mode){var $displayEl,key;if(!$cell||$cell.length===0){$cell=$('<td/>');$displayEl=$('<div data-role="display" />');column.align&&$cell.css('text-align',column.align);column.cssClass&&$cell.addClass(column.cssClass);$cell.append($displayEl);mode='create';}else{$displayEl=$cell.find('div[data-role="display"]');mode='update';}gj.grid.methods.renderDisplayElement($grid,$displayEl,column,record,id,mode);//remove all event handlers
if('update'===mode){$cell.off();$displayEl.off();}if(column.events){for(key in column.events){if(column.events.hasOwnProperty(key)){$cell.on(key,{id:id,field:column.field,record:record},gj.grid.methods.createCellEventHandler(column,column.events[key]));}}}if(column.hidden){$cell.hide();}gj.grid.events.cellDataBound($grid,$displayEl,id,column,record);return $cell;},createCellEventHandler:function createCellEventHandler(column,func){return function(e){if(column.stopPropagation){e.stopPropagation();}func.call(this,e);};},renderDisplayElement:function renderDisplayElement($grid,$displayEl,column,record,id,mode){var text,$checkbox;if('checkbox'===column.type&&gj.checkbox){if('create'===mode){$checkbox=$('<input type="checkbox" />').val(id).prop('checked',record[column.field]?true:false);column.role&&$checkbox.attr('data-role',column.role);$displayEl.append($checkbox);$checkbox.checkbox({uiLibrary:$grid.data('uiLibrary')});if(column.role==='selectRow'){$checkbox.on('click',function(){return false;});}else{$checkbox.prop('disabled',true);}}else{$displayEl.find('input[type="checkbox"]').val(id).prop('checked',record[column.field]?true:false);}}else if('icon'===column.type){if('create'===mode){$displayEl.append($('<span/>').addClass(column.icon).css({cursor:'pointer'}));$grid.data().uiLibrary==='bootstrap'&&$displayEl.children('span').addClass('glyphicon');column.stopPropagation=true;}}else if(column.tmpl){text=column.tmpl;column.tmpl.replace(/\{(.+?)\}/g,function($0,$1){text=text.replace($0,gj.grid.methods.formatText(record[$1],column));});$displayEl.html(text);}else if(column.renderer&&typeof column.renderer==='function'){text=column.renderer(record[column.field],record,$displayEl.parent(),$displayEl,id,$grid);if(text){$displayEl.html(text);}}else{record[column.field]=gj.grid.methods.formatText(record[column.field],column);if(!column.tooltip&&record[column.field]){$displayEl.attr('title',record[column.field]);}$displayEl.html(record[column.field]);}if(column.tooltip&&'create'===mode){$displayEl.attr('title',column.tooltip);}},formatText:function formatText(text,column){if(text&&['date','time','datetime'].indexOf(column.type)>-1){text=gj.core.formatDate(gj.core.parseDate(text,column.format),column.format);}else{text=typeof text==='undefined'||text===null?'':text.toString();}if(column.decimalDigits&&text){text=parseFloat(text).toFixed(column.decimalDigits);}return text;},setRecordsData:function setRecordsData($grid,response){var records=[],totalRecords=0,data=$grid.data();if($.isArray(response)){records=response;totalRecords=response.length;}else if(data&&data.mapping&&$.isArray(response[data.mapping.dataField])){records=response[data.mapping.dataField];totalRecords=response[data.mapping.totalRecordsField];if(!totalRecords||isNaN(totalRecords)){totalRecords=0;}}$grid.data('records',records);$grid.data('totalRecords',totalRecords);return records;},createRowClickHandler:function createRowClickHandler($grid,id){return function(){gj.grid.methods.setSelected($grid,id,$(this));};},selectRow:function selectRow($grid,data,$row,id){var $checkbox;$row.addClass(data.style.content.rowSelected);$row.attr('data-selected','true');if('checkbox'===data.selectionMethod){$checkbox=$row.find('input[type="checkbox"][data-role="selectRow"]');$checkbox.length&&!$checkbox.prop('checked')&&$checkbox.prop('checked',true);if('multiple'===data.selectionType&&$grid.getSelections().length===$grid.count(false)){$grid.find('thead input[data-role="selectAll"]').prop('checked',true);}}return gj.grid.events.rowSelect($grid,$row,id,$grid.getById(id));},unselectRow:function unselectRow($grid,data,$row,id){var $checkbox;if($row.attr('data-selected')==='true'){$row.removeClass(data.style.content.rowSelected);if('checkbox'===data.selectionMethod){$checkbox=$row.find('td input[type="checkbox"][data-role="selectRow"]');$checkbox.length&&$checkbox.prop('checked')&&$checkbox.prop('checked',false);if('multiple'===data.selectionType){$grid.find('thead input[data-role="selectAll"]').prop('checked',false);}}$row.removeAttr('data-selected');return gj.grid.events.rowUnselect($grid,$row,id,$grid.getById(id));}},setSelected:function setSelected($grid,id,$row){var data=$grid.data();if(!$row||!$row.length){$row=gj.grid.methods.getRowById($grid,id);}if($row){if($row.attr('data-selected')==='true'){gj.grid.methods.unselectRow($grid,data,$row,id);}else{if('single'===data.selectionType){$row.siblings('[data-selected="true"]').each(function(){var $row=$(this),id=gj.grid.methods.getId($row,data.primaryKey,$row.data('position'));gj.grid.methods.unselectRow($grid,data,$row,id);});}gj.grid.methods.selectRow($grid,data,$row,id);}}return $grid;},selectAll:function selectAll($grid){var data=$grid.data();$grid.find('tbody tr[data-role="row"]').each(function(){var $row=$(this),position=$row.data('position'),record=$grid.get(position),id=gj.grid.methods.getId(record,data.primaryKey,position);gj.grid.methods.selectRow($grid,data,$row,id);});$grid.find('thead input[data-role="selectAll"]').prop('checked',true);return $grid;},unSelectAll:function unSelectAll($grid){var data=$grid.data();$grid.find('tbody tr').each(function(){var $row=$(this),position=$row.data('position'),record=$grid.get(position),id=gj.grid.methods.getId(record,data.primaryKey,position);gj.grid.methods.unselectRow($grid,data,$row,id);$row.find('input[type="checkbox"][data-role="selectRow"]').prop('checked',false);});$grid.find('thead input[data-role="selectAll"]').prop('checked',false);return $grid;},getSelected:function getSelected($grid){var result=null,selections,record,position;selections=$grid.find('tbody>tr[data-selected="true"]');if(selections.length>0){position=$(selections[0]).data('position');record=$grid.get(position);result=gj.grid.methods.getId(record,$grid.data().primaryKey,position);}return result;},getSelectedRows:function getSelectedRows($grid){var data=$grid.data();return $grid.find('tbody>tr[data-selected="true"]');},getSelections:function getSelections($grid){var result=[],position,record,data=$grid.data(),$selections=gj.grid.methods.getSelectedRows($grid);if(0<$selections.length){$selections.each(function(){position=$(this).data('position');record=$grid.get(position);result.push(gj.grid.methods.getId(record,data.primaryKey,position));});}return result;},getById:function getById($grid,id){var result=null,i,primaryKey=$grid.data('primaryKey'),records=$grid.data('records');if(primaryKey){for(i=0;i<records.length;i++){if(records[i][primaryKey]==id){result=records[i];break;}}}else{result=$grid.get(id);}return result;},getRecVPosById:function getRecVPosById($grid,id){var result=id,i,data=$grid.data();if(data.primaryKey){for(i=0;i<data.dataSource.length;i++){if(data.dataSource[i][data.primaryKey]==id){result=i;break;}}}return result;},getRowById:function getRowById($grid,id){var records=$grid.getAll(false),primaryKey=$grid.data('primaryKey'),$result=undefined,position,i;if(primaryKey){for(i=0;i<records.length;i++){if(records[i][primaryKey]==id){position=i+1;break;}}}else{position=id;}if(position){$result=$grid.children('tbody').children('tr[data-position="'+position+'"]');}return $result;},getByPosition:function getByPosition($grid,position){return $grid.getAll(false)[position-1];},getColumnPosition:function getColumnPosition(columns,field){var position=-1,i;for(i=0;i<columns.length;i++){if(columns[i].field===field){position=i;break;}}return position;},getColumnInfo:function getColumnInfo($grid,field){var i,result={},data=$grid.data();for(i=0;i<data.columns.length;i+=1){if(data.columns[i].field===field){result=data.columns[i];break;}}return result;},getCell:function getCell($grid,id,field){var position,$row,$result=null;position=gj.grid.methods.getColumnPosition($grid.data('columns'),field);if(position>-1){$row=gj.grid.methods.getRowById($grid,id);$result=$row.find('td:eq('+position+') div[data-role="display"]');}return $result;},setCellContent:function setCellContent($grid,id,field,value){var column,$displayEl=gj.grid.methods.getCell($grid,id,field);if($displayEl){$displayEl.empty();if(_typeof(value)==='object'){$displayEl.append(value);}else{column=gj.grid.methods.getColumnInfo($grid,field);gj.grid.methods.renderDisplayElement($grid,$displayEl,column,$grid.getById(id),id,'update');}}},clone:function clone(source){var target=[];$.each(source,function(){target.push(this.clone());});return target;},getAll:function getAll($grid){return $grid.data('records');},countVisibleColumns:function countVisibleColumns($grid){var columns,count,i;columns=$grid.data().columns;count=0;for(i=0;i<columns.length;i++){if(columns[i].hidden!==true){count++;}}return count;},clear:function clear($grid,showNotFoundText){var data=$grid.data();$grid.xhr&&$grid.xhr.abort();$grid.children('tbody').empty();data.records=[];gj.grid.methods.stopLoading($grid);gj.grid.methods.appendEmptyRow($grid,showNotFoundText?data.notFoundText:'&nbsp;');gj.grid.events.dataBound($grid,[],0);return $grid;},render:function render($grid,response){if(response){gj.grid.methods.setRecordsData($grid,response);gj.grid.methods.updateHeader($grid);gj.grid.methods.loadData($grid);}return $grid;},filter:function filter($grid){var field,column,data=$grid.data(),records=data.dataSource.slice();if(data.params[data.paramNames.sortBy]){column=gj.grid.methods.getColumnInfo($grid,data.params[data.paramNames.sortBy]);records.sort(column.sortable.sorter?column.sortable.sorter(column.direction,column):gj.grid.methods.createDefaultSorter(column.direction,column.field));}for(field in data.params){if(data.params[field]&&!data.paramNames[field]){column=gj.grid.methods.getColumnInfo($grid,field);records=$.grep(records,function(record){var value=record[field]||'',searchStr=data.params[field]||'';return column&&typeof column.filter==='function'?column.filter(value,searchStr):value.toUpperCase().indexOf(searchStr.toUpperCase())>-1;});}}gj.grid.events.dataFiltered($grid,records);return records;},createDefaultSorter:function createDefaultSorter(direction,field){return function(recordA,recordB){var a=(recordA[field]||'').toString(),b=(recordB[field]||'').toString();return direction==='asc'?a.localeCompare(b):b.localeCompare(a);};},destroy:function destroy($grid,keepTableTag,keepWrapperTag){var data=$grid.data();if(data){gj.grid.events.destroying($grid);gj.grid.methods.stopLoading($grid);$grid.xhr&&$grid.xhr.abort();$grid.off();if(keepWrapperTag===false&&$grid.parent('div[data-role="wrapper"]').length>0){$grid.unwrap();}$grid.removeData();if(keepTableTag===false){$grid.remove();}else{$grid.removeClass().empty();}$grid.removeAttr('data-type');}return $grid;},showColumn:function showColumn($grid,field){var data=$grid.data(),position=gj.grid.methods.getColumnPosition(data.columns,field),$cells;if(position>-1){$grid.find('thead>tr').each(function(){$(this).children('th').eq(position).show();});$.each($grid.find('tbody>tr'),function(){$(this).children('td').eq(position).show();});data.columns[position].hidden=false;$cells=$grid.find('tbody > tr[data-role="empty"] > td');if($cells&&$cells.length){$cells.attr('colspan',gj.grid.methods.countVisibleColumns($grid));}gj.grid.events.columnShow($grid,data.columns[position]);}return $grid;},hideColumn:function hideColumn($grid,field){var data=$grid.data(),position=gj.grid.methods.getColumnPosition(data.columns,field),$cells;if(position>-1){$grid.find('thead>tr').each(function(){$(this).children('th').eq(position).hide();});$.each($grid.find('tbody>tr'),function(){$(this).children('td').eq(position).hide();});data.columns[position].hidden=true;$cells=$grid.find('tbody > tr[data-role="empty"] > td');if($cells&&$cells.length){$cells.attr('colspan',gj.grid.methods.countVisibleColumns($grid));}gj.grid.events.columnHide($grid,data.columns[position]);}return $grid;},isLastRecordVisible:function isLastRecordVisible(){return true;},addRow:function addRow($grid,record){var data=$grid.data();data.totalRecords=$grid.data('totalRecords')+1;gj.grid.events.dataBinding($grid,[record]);data.records.push(record);if($.isArray(data.dataSource)){data.dataSource.push(record);}if(data.totalRecords===1){$grid.children('tbody').empty();}if(gj.grid.methods.isLastRecordVisible($grid)){gj.grid.methods.renderRow($grid,null,record,$grid.count()-1);}gj.grid.events.dataBound($grid,[record],data.totalRecords);return $grid;},updateRow:function updateRow($grid,id,record){var $row=gj.grid.methods.getRowById($grid,id),data=$grid.data(),position;data.records[$row.data('position')-1]=record;if($.isArray(data.dataSource)){position=gj.grid.methods.getRecVPosById($grid,id);data.dataSource[position]=record;}gj.grid.methods.renderRow($grid,$row,record,$row.index());return $grid;},removeRow:function removeRow($grid,id){var position,data=$grid.data(),$row=gj.grid.methods.getRowById($grid,id);gj.grid.events.rowRemoving($grid,$row,id,$grid.getById(id));if($.isArray(data.dataSource)){position=gj.grid.methods.getRecVPosById($grid,id);data.dataSource.splice(position,1);}$grid.reload();return $grid;},count:function count($grid,includeAllRecords){return includeAllRecords?$grid.data().totalRecords:$grid.getAll().length;},getColumnPositionByRole:function getColumnPositionByRole($grid,role){var i,result,columns=$grid.data('columns');for(i=0;i<columns.length;i++){if(columns[i].role===role){result=i;break;}}return result;},getColumnPositionNotInRole:function getColumnPositionNotInRole($grid){var i,result=0,columns=$grid.data('columns');for(i=0;i<columns.length;i++){if(!columns[i].role){result=i;break;}}return result;}};/**
  * @widget Grid
  * @plugin Base
  */gj.grid.widget=function($grid,jsConfig){var self=this,methods=gj.grid.methods;/**
     * Reload the data in the grid from a data source.
     * @method
     * @param {object} params - An object that contains a list with parameters that are going to be send to the server.
     * @fires beforeEmptyRowInsert, dataBinding, dataBound, cellDataBound
     * @return grid
     * @example sample <!-- grid -->
     * <input type="text" id="txtSearch">
     * <button id="btnSearch">Search</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     $('#btnSearch').on('click', function () {
     *         grid.reload({ name: $('#txtSearch').val() });
     *     });
     * </script>
     */self.reload=function(params){methods.startLoading(this);return gj.widget.prototype.reload.call(this,params);};/**
     * Clear the content in the grid.
     * @method
     * @param {boolean} showNotFoundText - Indicates if the "Not Found" text is going to show after the clearing of the grid.
     * @return grid
     * @example sample <!-- grid, dropdown -->
     * <button id="btnClear" class="gj-button-md">Clear</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         pager: { limit: 5 }
     *     });
     *     $('#btnClear').on('click', function () {
     *         grid.clear();
     *     });
     * </script>
     */self.clear=function(showNotFoundText){return methods.clear(this,showNotFoundText);};/**
     * Return the number of records in the grid. By default return only the records that are visible in the grid.
     * @method
     * @param {boolean} includeAllRecords - include records that are not visible when you are using local dataSource.
     * @return number
     * @example Local.DataSource <!-- bootstrap, grid, grid.pagination -->
     * <button class="btn btn-default" onclick="alert(grid.count())">Count Visible Records</button>
     * <button class="btn btn-default" onclick="alert(grid.count(true))">Count All Records</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var data, grid;
     *     data = [
     *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *     ];
     *     grid = $('#grid').grid({
     *         dataSource: data,
     *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         uiLibrary: 'bootstrap',
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     * </script>
     * @example Remote.DataSource <!-- bootstrap, grid, grid.pagination -->
     * <button onclick="alert(grid.count())">Count Visible Records</button>
     * <button onclick="alert(grid.count(true))">Count All Records</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         uiLibrary: 'bootstrap',
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     * </script>
     */self.count=function(includeAllRecords){return methods.count(this,includeAllRecords);};/**
     * Render data in the grid
     * @method
     * @param {object} response - An object that contains the data that needs to be loaded in the grid.
     * @fires beforeEmptyRowInsert, dataBinding, dataBound, cellDataBound
     * @return grid
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid, onSuccessFunc;
     *     onSuccessFunc = function (response) {
     *         //you can modify the response here if needed
     *         grid.render(response);
     *     };
     *     grid = $('#grid').grid({
     *         dataSource: { url: '/Players/Get', success: onSuccessFunc },
     *         columns: [ { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     * </script>
     */self.render=function(response){return methods.render($grid,response);};/**
     * Destroy the grid. This method remove all data from the grid and all events attached to the grid.
     * @additionalinfo The grid table tag and wrapper tag are kept by default after the execution of destroy method,
     * but you can remove them if you pass false to the keepTableTag and keepWrapperTag parameters.
     * @method
     * @param {boolean} keepTableTag - If this flag is set to false, the table tag will be removed from the HTML dom tree.
     * @param {boolean} keepWrapperTag - If this flag is set to false, the table wrapper tag will be removed from the HTML dom tree.
     * @fires destroying
     * @return void
     * @example keep.wrapper.and.table <!-- grid -->
     * <button class="gj-button-md" id="btnDestroy">Destroy</button>
     * <button class="gj-button-md" id="btnCreate">Create</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var createFunc = function() {
     *         $('#grid').grid({
     *             dataSource: '/Players/Get',
     *             columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *         });
     *     };
     *     createFunc();
     *     $('#btnDestroy').on('click', function () {
     *         $('#grid').grid('destroy', true, true);
     *     });
     *     $('#btnCreate').on('click', function () {
     *         createFunc();
     *     });
     * </script>
     * @example remove.wrapper.and.table <!-- grid -->
     * <button class="gj-button-md" id="btnRemove">Remove</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     $('#btnRemove').on('click', function () {
     *         grid.destroy();
     *     });
     * </script>
     */self.destroy=function(keepTableTag,keepWrapperTag){return methods.destroy(this,keepTableTag,keepWrapperTag);};/**
     * Select a row from the grid based on id parameter.
     * @method
     * @param {string} id - The id of the row that needs to be selected
     * @return grid
     * @example sample <!-- checkbox, grid -->
     * <input type="text" id="txtNumber" value="1" />
     * <button id="btnSelect" class="gj-button-md">Select</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox'
     *     });
     *     $('#btnSelect').on('click', function () {
     *         grid.setSelected(parseInt($('#txtNumber').val(), 10));
     *     });
     * </script>
     */self.setSelected=function(id){return methods.setSelected(this,id);};/**
     * Return the id of the selected record.
     * If the multiple selection method is one this method is going to return only the id of the first selected record.
     * @method
     * @return string
     * @example sample <!-- checkbox, grid -->
     * <button id="btnShowSelection" class="gj-button-md">Show Selection</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox'
     *     });
     *     $('#btnShowSelection').on('click', function () {
     *         alert(grid.getSelected());
     *     });
     * </script>
     */self.getSelected=function(){return methods.getSelected(this);};/**
     * Return an array with the ids of the selected record.
     * @additionalinfo Specify primaryKey if you want to use field from the dataSource as identificator for selection.
     * @method
     * @return array
     * @example With.Primary.Ket <!-- checkbox, grid, dropdown -->
     * <button id="btnShowSelection" class="gj-button-md">Show Selections</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid, data = [
     *         { 'ID': 101, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *         { 'ID': 102, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *         { 'ID': 103, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
     *         { 'ID': 104, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' }
     *     ];
     *     grid = $('#grid').grid({
     *         dataSource: data,
     *         primaryKey: 'ID',
     *         columns: [ { field: 'ID', width: 70 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox',
     *         selectionType: 'multiple',
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     *     $('#btnShowSelection').on('click', function () {
     *         var selections = grid.getSelections();
     *         alert(selections.join());
     *     });
     * </script>
     * @example Without.Primary.Ket <!-- checkbox, grid, dropdown -->
     * <button id="btnShowSelection" class="gj-button-md">Show Selections</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid, data = [
     *         { 'ID': 101, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *         { 'ID': 102, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *         { 'ID': 103, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
     *         { 'ID': 104, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' }
     *     ];
     *     grid = $('#grid').grid({
     *         dataSource: data,
     *         columns: [ { field: 'ID', width: 70 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox',
     *         selectionType: 'multiple',
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     *     $('#btnShowSelection').on('click', function () {
     *         var selections = grid.getSelections();
     *         alert(selections.join());
     *     });
     * </script>
     */self.getSelections=function(){return methods.getSelections(this);};/**
     * Select all records from the grid.
     * @method
     * @return grid
     * @example sample <!-- checkbox, grid -->
     * <button id="btnSelectAll" class="gj-button-md">Select All</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox',
     *         selectionType: 'multiple'
     *     });
     *     $('#btnSelectAll').on('click', function () {
     *         grid.selectAll();
     *     });
     * </script>
     */self.selectAll=function(){return methods.selectAll(this);};/**
     * Unselect all records from the grid.
     * @method
     * @return void
     * @example sample <!-- checkbox, grid -->
     * <button id="btnSelectAll" class="gj-button-md">Select All</button>
     * <button id="btnUnSelectAll" class="gj-button-md">UnSelect All</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         selectionMethod: 'checkbox',
     *         selectionType: 'multiple'
     *     });
     *     $('#btnSelectAll').on('click', function () {
     *         grid.selectAll();
     *     });
     *     $('#btnUnSelectAll').on('click', function () {
     *         grid.unSelectAll();
     *     });
     * </script>
     */self.unSelectAll=function(){return methods.unSelectAll(this);};/**
     * Return record by id of the record.
     * @method
     * @param {string} id - The id of the row that needs to be returned.
     * @return object
     * @example sample <!-- grid -->
     * <button id="btnGetData" class="gj-button-md">Get Data</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         primaryKey: 'ID' //define the name of the column that you want to use as ID here.
     *     });
     *     $('#btnGetData').on('click', function () {
     *         var data = grid.getById('2');
     *         alert(data.Name + ' born in ' + data.PlaceOfBirth);
     *     });
     * </script>
     */self.getById=function(id){return methods.getById(this,id);};/**
     * Return record from the grid based on position.
     * @method
     * @param {number} position - The position of the row that needs to be return.
     * @return object
     * @example sample <!-- grid -->
     * <button id="btnGetData" class="gj-button-md">Get Data</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     $('#btnGetData').on('click', function () {
     *         var data = grid.get(3);
     *         alert(data.Name + ' born in ' + data.PlaceOfBirth);
     *     });
     * </script>
     */self.get=function(position){return methods.getByPosition(this,position);};/**
     * Return an array with all records presented in the grid.
     * @method
     * @param {boolean} includeAllRecords - include records that are not visible when you are using local dataSource.
     * @return number
     * @example Local.DataSource <!-- bootstrap, grid, grid.pagination -->
     * <button onclick="alert(JSON.stringify(grid.getAll()))" class="btn btn-default">Get All Visible Records</button>
     * <button onclick="alert(JSON.stringify(grid.getAll(true)))" class="btn btn-default">Get All Records</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var data, grid;
     *     data = [
     *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *     ];
     *     grid = $('#grid').grid({
     *         dataSource: data,
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         uiLibrary: 'bootstrap',
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     * </script>
     * @example Remote.DataSource <!-- bootstrap, grid, grid.pagination -->
     * <button onclick="alert(JSON.stringify(grid.getAll()))" class="btn btn-default">Get All Visible Records</button>
     * <button onclick="alert(JSON.stringify(grid.getAll(true)))" class="btn btn-default">Get All Records</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
     *         uiLibrary: 'bootstrap',
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     * </script>
     */self.getAll=function(includeAllRecords){return methods.getAll(this,includeAllRecords);};/**
     * Show hidden column.
     * @method
     * @param {string} field - The name of the field bound to the column.
     * @return grid
     * @example sample <!-- grid -->
     * <button id="btnShowColumn" class="gj-button-md">Show Column</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth', hidden: true } ]
     *     });
     *     $('#btnShowColumn').on('click', function () {
     *         grid.showColumn('PlaceOfBirth');
     *     });
     * </script>
     */self.showColumn=function(field){return methods.showColumn(this,field);};/**
     * Hide column from the grid.
     * @method
     * @param {string} field - The name of the field bound to the column.
     * @return grid
     * @example sample <!-- grid -->
     * <button id="btnHideColumn" class="gj-button-md">Hide Column</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     $('#btnHideColumn').on('click', function () {
     *         grid.hideColumn('PlaceOfBirth');
     *     });
     * </script>
     */self.hideColumn=function(field){return methods.hideColumn(this,field);};/**
     * Add new row to the grid.
     * @method
     * @param {object} record - Object with data for the new record.
     * @return grid
     * @example without.pagination <!-- grid -->
     * <button id="btnAdd" class="gj-button-md">Add Row</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: [
     *             { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *             { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *             { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *         ],
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
     *     });
     *     $('#btnAdd').on('click', function () {
     *         grid.addRow({ 'ID': grid.count(true) + 1, 'Name': 'Test Player', 'PlaceOfBirth': 'Test City, Test Country' });
     *     });
     * </script>
     * @example with.pagination <!-- grid, dropdown -->
     * <button id="btnAdd" class="gj-button-md">Add Row</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: [
     *             { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *             { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *             { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *         ],
     *         columns: [ 
     *             { field: 'ID', width: 56 },
     *             { field: 'Name' },
     *             { field: 'PlaceOfBirth' },
     *             { width: 100, align: 'center', tmpl: '<i class="material-icons">delete</i>', events: { 'click': function(e) { grid.removeRow(e.data.id); } } }
     *         ],
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     *     $('#btnAdd').on('click', function () {
     *         grid.addRow({ 'ID': grid.count(true) + 1, 'Name': 'Test Player', 'PlaceOfBirth': 'Test City, Test Country' });
     *     });
     * </script>
     */self.addRow=function(record){return methods.addRow(this,record);};/**
     * Update row data.
     * @method
     * @param {string} id - The id of the row that needs to be updated
     * @param {object} record - Object with data for the new record.
     * @return grid
     * @example sample <!-- grid, dropdown -->
     * <table id="grid"></table>
     * <script>
     *     var grid;
     *     grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: [
     *             { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *             { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *             { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *         ],
     *         columns: [
     *             { field: 'ID', width: 56 },
     *             { field: 'Name' },
     *             { field: 'PlaceOfBirth' },
     *             { title: '', width: 90, align: 'center', tmpl: '<u>Edit</u>', events: { 'click': Edit } }
     *         ],
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     *     function Edit(e) {
     *         grid.updateRow(e.data.id, { 'ID': e.data.id, 'Name': 'Ronaldo', 'PlaceOfBirth': 'Rio, Brazil' });
     *     }
     * </script>
     */self.updateRow=function(id,record){return methods.updateRow(this,id,record);};//TODO: needs to be removed
self.setCellContent=function(id,index,value){methods.setCellContent(this,id,index,value);};/**
     * Remove row from the grid
     * @additionalinfo This method is design to work only with local datasources. If you use remote datasource, you need to send a request to the server to remove the row and then reload the data in the grid.
     * @method
     * @param {string} id - Id of the record that needs to be removed.
     * @return grid
     * @example Without.Pagination <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid;
     *     function Delete(e) {
     *         if (confirm('Are you sure?')) {
     *             grid.removeRow(e.data.id);
     *         }
     *     }
     *     grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: [
     *             { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *             { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *             { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *         ],
     *         columns: [
     *             { field: 'ID', width: 56 },
     *             { field: 'Name' },
     *             { field: 'PlaceOfBirth' },
     *             { width: 100, align: 'center', tmpl: '<u class="gj-cursor-pointer">Delete</u>', events: { 'click': Delete } }
     *         ]
     *     });
     * </script>
     * @example With.Pagination <!-- grid, dropdown -->
     * <table id="grid"></table>
     * <script>
     *     var grid;
     *     function Delete(e) {
     *         if (confirm('Are you sure?')) {
     *             grid.removeRow(e.data.id);
     *         }
     *     }
     *     grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: [
     *             { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
     *             { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
     *             { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
     *         ],
     *         columns: [
     *             { field: 'ID', width: 56 },
     *             { field: 'Name' },
     *             { field: 'PlaceOfBirth' },
     *             { width: 100, align: 'center', tmpl: '<u class="gj-cursor-pointer">Delete</u>', events: { 'click': Delete } }
     *         ],
     *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
     *     });
     * </script>
     */self.removeRow=function(id){return methods.removeRow(this,id);};$.extend($grid,self);if('grid'!==$grid.attr('data-type')){methods.init.call($grid,jsConfig);}return $grid;};gj.grid.widget.prototype=new gj.widget();gj.grid.widget.constructor=gj.grid.widget;gj.grid.widget.prototype.getConfig=gj.grid.methods.getConfig;gj.grid.widget.prototype.getHTMLConfig=gj.grid.methods.getHTMLConfig;(function($){$.fn.grid=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.grid.widget(this,method);}else{$widget=new gj.grid.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/**
 * @widget Grid
 * @plugin Fixed Header
 */gj.grid.plugins.fixedHeader={config:{base:{/** If set to true, add scroll to the table body
             * @type boolean
             * @default object
             * @example Material.Design.Without.Pager <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         fixedHeader: true,
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Material.Design.With.Pager <!-- grid, dropdown -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         fixedHeader: true,
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
             *         pager: { limit: 5 }
             *     });
             * </script>
             * @example Bootstrap.3.Without.Pager <!-- bootstrap, grid -->
             * <div class="container"><table id="grid"></table></div>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap',
             *         dataSource: '/Players/Get',
             *         fixedHeader: true,
             *         height: 200,
             *         columns: [ 
             *             { field: 'ID', width: 34 },
             *             { field: 'Name' },
             *             { field: 'PlaceOfBirth' }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.3.With.Pager <!-- bootstrap, grid -->
             * <div class="container"><table id="grid"></table></div>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap',
             *         dataSource: '/Players/Get',
             *         fixedHeader: true,
             *         height: 200,
             *         columns: [ 
             *             { field: 'ID', width: 34 }, 
             *             { field: 'Name' }, 
             *             { field: 'PlaceOfBirth' } 
             *         ],
             *         pager: { limit: 5 }
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, grid -->
             * <div class="container"><table id="grid"></table></div>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap4',
             *         dataSource: '/Players/Get',
             *         fixedHeader: true,
             *         columns: [ 
             *             { field: 'ID', width: 42 }, 
             *             { field: 'Name' }, 
             *             { field: 'PlaceOfBirth' } 
             *         ],
             *         pager: { limit: 5 }
             *     });
             * </script>
             */fixedHeader:false,height:300}},"private":{init:function init($grid){var data=$grid.data(),$tbody=$grid.children('tbody'),$thead=$grid.children('thead'),bodyHeight=data.height-$thead.outerHeight()-($grid.children('tfoot').outerHeight()||0);$grid.addClass('gj-grid-scrollable');$tbody.css('width',$thead.outerWidth());$tbody.height(bodyHeight);},refresh:function refresh($grid){var i,width,data=$grid.data(),$tbody=$grid.children('tbody'),$thead=$grid.children('thead'),$tbodyCells=$grid.find('tbody tr[data-role="row"] td'),$theadCells=$grid.find('thead tr[data-role="caption"] th');if($grid.children('tbody').height()<gj.grid.plugins.fixedHeader["private"].getRowsHeight($grid)){$tbody.css('width',$thead.outerWidth()+gj.grid.plugins.fixedHeader["private"].getScrollBarWidth()+(navigator.userAgent.toLowerCase().indexOf('firefox')>-1?1:0));}else{$tbody.css('width',$thead.outerWidth());}for(i=0;i<$theadCells.length;i++){width=$($theadCells[i]).outerWidth();if(i===0&&gj.core.isIE()){width=width-1;}$($tbodyCells[i]).attr('width',width);}},getRowsHeight:function getRowsHeight($grid){var total=0;$grid.find('tbody tr').each(function(){total+=$(this).height();});return total;},getScrollBarWidth:function getScrollBarWidth(){var inner=document.createElement('p');inner.style.width="100%";inner.style.height="200px";var outer=document.createElement('div');outer.style.position="absolute";outer.style.top="0px";outer.style.left="0px";outer.style.visibility="hidden";outer.style.width="200px";outer.style.height="150px";outer.style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow='scroll';var w2=inner.offsetWidth;if(w1==w2)w2=outer.clientWidth;document.body.removeChild(outer);return w1-w2;}},"public":{},events:{},configure:function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.fixedHeader["public"]);var data=$grid.data();if(clientConfig.fixedHeader){$grid.on('initialized',function(){gj.grid.plugins.fixedHeader["private"].init($grid);});$grid.on('dataBound',function(){gj.grid.plugins.fixedHeader["private"].refresh($grid);});$grid.on('resize',function(){gj.grid.plugins.fixedHeader["private"].refresh($grid);});}}};/** 
 * @widget Grid 
 * @plugin Expand Collapse Rows
 */gj.grid.plugins.expandCollapseRows={config:{base:{/** Template for the content in the detail section of the row.
             * Automatically add expand collapse column as a first column in the grid during initialization.
             * @type string
             * @default undefined
             * @example Material.Design <!-- grid, grid.expandCollapseRows -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'materialdesign',
             *         detailTemplate: '<div style="text-align: left"><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ]
             *     });
             * </script>
             * @example Bootstrap.3 <!-- bootstrap, grid, grid.expandCollapseRows -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap',
             *         detailTemplate: '<div><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
             *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ]
             *     });
             * </script>
             * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, grid, grid.expandCollapseRows -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap4',
             *         iconsLibrary: 'fontawesome',
             *         detailTemplate: '<div><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
             *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ]
             *     });
             * </script>
             */detailTemplate:undefined,/** If set try to persist the state of expanded rows.
             * You need to specify primaryKey on the initialization of the grid in order to enable this feature.
             * @default true
             * @example True <!-- bootstrap, grid  -->
             * <div class="container">
             *     <div class="row">
             *         <div class="col-xs-12">
             *             <p>Expand row, then change the page and return back to the page with expanded row in order to see that the expansion is kept.</p>
             *             <table id="grid"></table>
             *         </div>
             *     </div>
             * </div>
             * <script>
             *     var grid = $('#grid').grid({
             *         uiLibrary: 'bootstrap',
             *         primaryKey: 'ID',
             *         dataSource: '/Players/Get',
             *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' } ],
             *         detailTemplate: '<div><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
             *         keepExpandedRows: true,
             *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
             *     });
             * </script>
             */keepExpandedRows:true,expandedRows:[],icons:{/** Expand row icon definition.
                 * @alias icons.expandRow
                 * @type String
                 * @default '<i class="gj-icon chevron-right" />'
                 * @example Plus.Minus.Icons <!-- materialicons, grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         primaryKey: 'ID',
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' } ],
                 *         detailTemplate: '<div><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
                 *         icons: {
                 *             expandRow: '<i class="material-icons">add</i>',
                 *             collapseRow: '<i class="material-icons">remove</i>'
                 *         }
                 *     });
                 * </script>
                 */expandRow:'<i class="gj-icon chevron-right" />',/** Collapse row icon definition.
                 * @alias icons.collapseRow
                 * @type String
                 * @default '<i class="gj-icon chevron-down" />'
                 * @example Plus.Minus.Icons <!-- materialicons, grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         primaryKey: 'ID',
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' } ],
                 *         detailTemplate: '<div><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
                 *         icons: {
                 *             expandRow: '<i class="material-icons">add</i>',
                 *             collapseRow: '<i class="material-icons">remove</i>'
                 *         }
                 *     });
                 * </script>
                 */collapseRow:'<i class="gj-icon chevron-down" />'}},fontawesome:{icons:{expandRow:'<i class="fa fa-angle-right" aria-hidden="true"></i>',collapseRow:'<i class="fa fa-angle-down" aria-hidden="true"></i>'}},glyphicons:{icons:{expandRow:'<span class="glyphicon glyphicon-chevron-right" />',collapseRow:'<span class="glyphicon glyphicon-chevron-down" />'}}},'private':{expandDetail:function expandDetail($grid,$cell,id){var $contentRow=$cell.closest('tr'),$detailsRow=$('<tr data-role="details" />'),$detailsCell=$('<td colspan="'+gj.grid.methods.countVisibleColumns($grid)+'" />'),$detailsWrapper=$('<div data-role="display" />'),data=$grid.data(),position=$contentRow.data('position'),record=$grid.get(position),plugin=gj.grid.plugins.expandCollapseRows;if(_typeof(id)===undefined){id=gj.grid.methods.getId(record,data.primaryKey,record);}$detailsRow.append($detailsCell.append($detailsWrapper.append($contentRow.data('details'))));$detailsRow.insertAfter($contentRow);$cell.children('div[data-role="display"]').empty().append(data.icons.collapseRow);$grid.updateDetails($contentRow);plugin["private"].keepSelection($grid,id);plugin.events.detailExpand($grid,$detailsRow.find('td>div'),id);},collapseDetail:function collapseDetail($grid,$cell,id){var $contentRow=$cell.closest('tr'),$detailsRow=$contentRow.next('tr[data-role="details"]'),data=$grid.data(),plugin=gj.grid.plugins.expandCollapseRows;if(_typeof(id)===undefined){id=gj.grid.methods.getId(record,data.primaryKey,record);}$detailsRow.remove();$cell.children('div[data-role="display"]').empty().append(data.icons.expandRow);plugin["private"].removeSelection($grid,id);plugin.events.detailCollapse($grid,$detailsRow.find('td>div'),id);},keepSelection:function keepSelection($grid,id){var data=$grid.data();if(data.keepExpandedRows){if($.isArray(data.expandedRows)){if(data.expandedRows.indexOf(id)==-1){data.expandedRows.push(id);}}else{data.expandedRows=[id];}}},removeSelection:function removeSelection($grid,id){var data=$grid.data();if(data.keepExpandedRows&&$.isArray(data.expandedRows)&&data.expandedRows.indexOf(id)>-1){data.expandedRows.splice(data.expandedRows.indexOf(id),1);}},updateDetailsColSpan:function updateDetailsColSpan($grid){var $cells=$grid.find('tbody > tr[data-role="details"] > td');if($cells&&$cells.length){$cells.attr('colspan',gj.grid.methods.countVisibleColumns($grid));}}},'public':{/**
         * Collapse all grid rows.
         * @method
         * @return jQuery object
         * @example Sample <!-- grid -->
         * <button onclick="grid.expandAll()" class="gj-button-md">Expand All</button>
         * <button onclick="grid.collapseAll()" class="gj-button-md">Collapse All</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         detailTemplate: '<div style="text-align: left"><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ],
         *         grouping: { groupBy: 'CountryName' },
         *     });
         * </script>
         */collapseAll:function collapseAll(){var $grid=this,data=$grid.data(),position;if(typeof data.detailTemplate!=='undefined'){position=gj.grid.methods.getColumnPositionByRole($grid,'expander');$grid.find('tbody tr[data-role="row"]').each(function(){gj.grid.plugins.expandCollapseRows["private"].collapseDetail($grid,$(this).find('td:eq('+position+')'));});}if(typeof data.grouping!=='undefined'){$grid.find('tbody tr[role="group"]').each(function(){gj.grid.plugins.grouping["private"].collapseGroup(data,$(this).find('td:eq(0)'));});}return $grid;},/**
         * Expand all grid rows.
         * @method
         * @return jQuery object
         * @example Sample <!-- grid -->
         * <button onclick="grid.expandAll()" class="gj-button-md">Expand All</button>
         * <button onclick="grid.collapseAll()" class="gj-button-md">Collapse All</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         detailTemplate: '<div style="text-align: left"><b>Place Of Birth:</b> {PlaceOfBirth}</div>',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ],
         *         grouping: { groupBy: 'CountryName' },
         *     });
         * </script>
         */expandAll:function expandAll(){var $grid=this,data=$grid.data(),position;if(typeof data.detailTemplate!=='undefined'){position=gj.grid.methods.getColumnPositionByRole($grid,'expander');$grid.find('tbody tr[data-role="row"]').each(function(){gj.grid.plugins.expandCollapseRows["private"].expandDetail($grid,$(this).find('td:eq('+position+')'));});}if(typeof data.grouping!=='undefined'){$grid.find('tbody tr[role="group"]').each(function(){gj.grid.plugins.grouping["private"].expandGroup(data,$(this).find('td:eq(0)'));});}return $grid;},//TODO: add documentation
updateDetails:function updateDetails($contentRow){var $grid=this,$detailWrapper=$contentRow.data('details'),content=$detailWrapper.html(),record=$grid.get($contentRow.data('position'));if(record&&content){$detailWrapper.html().replace(/\{(.+?)\}/g,function($0,$1){var column=gj.grid.methods.getColumnInfo($grid,$1);content=content.replace($0,gj.grid.methods.formatText(record[$1],column));});$detailWrapper.html(content);}return $grid;}},'events':{/**
         * Event fires when detail row is showing
         *
         * @event detailExpand
         * @param {object} e - event data
         * @param {object} detailWrapper - the detail wrapper as jQuery object 
         * @param {string} id - the id of the record
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         primaryKey: 'ID',
         *         dataSource: '/Players/Get',
         *         detailTemplate: '<div></div>',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ]
         *     });
         *     grid.on('detailExpand', function (e, $detailWrapper, id) {
         *         var record = grid.getById(id);
         *         $detailWrapper.empty().append('<b>Place Of Birth:</b> ' + record.PlaceOfBirth);
         *     });
         * </script>
         */detailExpand:function detailExpand($grid,$detailWrapper,id){$grid.triggerHandler('detailExpand',[$detailWrapper,id]);},/**
         * Event fires when detail row is hiding
         *
         * @event detailCollapse
         * @param {object} e - event data
         * @param {object} detailWrapper - the detail wrapper as jQuery object 
         * @param {string} id - the id of the record
         * @example sample <!-- grid -->
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         primaryKey: 'ID',
         *         dataSource: '/Players/Get',
         *         detailTemplate: '<div></div>',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'DateOfBirth', type: 'date' } ]
         *     });
         *     grid.on('detailExpand', function (e, $detailWrapper, id) {
         *         var record = grid.getById(id);
         *         $detailWrapper.append('<b>Place Of Birth:</b>' + record.PlaceOfBirth);
         *     });
         *     grid.on('detailCollapse', function (e, $detailWrapper, id) {
         *         $detailWrapper.empty();
         *         alert('detailCollapse is fired.');
         *     });
         * </script>
         */detailCollapse:function detailCollapse($grid,$detailWrapper,id){$grid.triggerHandler('detailCollapse',[$detailWrapper,id]);}},'configure':function configure($grid){var column,data=$grid.data();$.extend(true,$grid,gj.grid.plugins.expandCollapseRows["public"]);if(typeof data.detailTemplate!=='undefined'){column={title:'',width:data.defaultIconColumnWidth,align:'center',stopPropagation:true,cssClass:'gj-cursor-pointer gj-unselectable',tmpl:data.icons.expandRow,role:'expander',events:{'click':function click(e){var $cell=$(this),methods=gj.grid.plugins.expandCollapseRows["private"];if($cell.closest('tr').next().attr('data-role')==='details'){methods.collapseDetail($grid,$cell,e.data.id);}else{methods.expandDetail($grid,$(this),e.data.id);}}}};data.columns=[column].concat(data.columns);$grid.on('rowDataBound',function(e,$row,id,record){$row.data('details',$(data.detailTemplate));});$grid.on('columnShow',function(e,column){gj.grid.plugins.expandCollapseRows["private"].updateDetailsColSpan($grid);});$grid.on('columnHide',function(e,column){gj.grid.plugins.expandCollapseRows["private"].updateDetailsColSpan($grid);});$grid.on('rowRemoving',function(e,$row,id,record){gj.grid.plugins.expandCollapseRows["private"].collapseDetail($grid,$row.children('td').first(),id);});$grid.on('dataBinding',function(){$grid.collapseAll();});$grid.on('pageChanging',function(){$grid.collapseAll();});$grid.on('dataBound',function(){var i,$cell,$row,position,data=$grid.data();if(data.keepExpandedRows&&$.isArray(data.expandedRows)){for(i=0;i<data.expandedRows.length;i++){$row=gj.grid.methods.getRowById($grid,data.expandedRows[i]);if($row&&$row.length){position=gj.grid.methods.getColumnPositionByRole($grid,'expander');$cell=$row.children('td:eq('+position+')');if($cell&&$cell.length){gj.grid.plugins.expandCollapseRows["private"].expandDetail($grid,$cell);}}}}});}}};/** 
 * @widget Grid 
 * @plugin Inline Editing
 */gj.grid.plugins.inlineEditing={renderers:{editManager:function editManager(value,record,$cell,$displayEl,id,$grid){var data=$grid.data(),$edit=$(data.inlineEditing.editButton).attr('key',id),$delete=$(data.inlineEditing.deleteButton).attr('key',id),$update=$(data.inlineEditing.updateButton).attr('key',id).hide(),$cancel=$(data.inlineEditing.cancelButton).attr('key',id).hide();$edit.on('click',function(e){$grid.edit($(this).attr('key'));});$delete.on('click',function(e){$grid.removeRow($(this).attr('key'));});$update.on('click',function(e){$grid.update($(this).attr('key'));});$cancel.on('click',function(e){$grid.cancel($(this).attr('key'));});$displayEl.empty().append($edit).append($delete).append($update).append($cancel);}}};gj.grid.plugins.inlineEditing.config={base:{defaultColumnSettings:{/** Provides a way to set an editing UI for the column.
             * @alias column.editor
             * @type function|boolean
             * @default undefined
             * @example Material.Design <!-- grid, datepicker, dropdown, checkbox -->
             * <table id="grid"></table>
             * <script>
             *     var countries = [ 'Bulgaria', 'Brazil', 'England', 'Germany', 'Colombia', 'Poland' ];
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'Name', editor: true },
             *             { field: 'CountryName', type: 'dropdown', editor: { dataSource: countries } },
             *             { field: 'DateOfBirth', type: 'date', editor: true, format: 'dd.mm.yyyy' },
             *             { field: 'IsActive', title: 'Active?', type:'checkbox', editor: true, mode: 'editOnly', width: 80, align: 'center' }
             *         ]
             *     });
             * </script>
             * @example Custom.With.Select2 <!-- grid, datepicker, checkbox -->
             * <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
             * <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
             * <table id="grid"></table>
             * <script>
             *     function select2editor($editorContainer, value, record) {
             *         var select = $('<select><option value="Bulgaria">Bulgaria</option><option value="Brazil">Brazil</option><option value="England">England</option><option value="Germany">Germany</option><option value="Colombia">Colombia</option><option value="Poland">Poland</option></select>');
             *         $editorContainer.append(select);
             *         select.select2();
             *     }
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'Name', editor: true },
             *             { field: 'CountryName', type: 'dropdown', editor: select2editor },
             *             { field: 'DateOfBirth', type: 'date', editor: true, format: 'dd.mm.yyyy' },
             *             { field: 'IsActive', title: 'Active?', type:'checkbox', editor: true, mode: 'editOnly', width: 80, align: 'center' }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.3 <!-- bootstrap, grid, datepicker, dropdown, checkbox -->
             * <table id="grid"></table>
             * <script>
             *     var countries = [ 'Bulgaria', 'Brazil', 'England', 'Germany', 'Colombia', 'Poland' ];
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap',
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'Name', editor: true },
             *             { field: 'CountryName', type: 'dropdown', editor: { dataSource: countries } },
             *             { field: 'DateOfBirth', type: 'date', editor: true },
             *             { field: 'IsActive', title: 'Active?', type:'checkbox', editor: true, mode: 'editOnly', width: 80, align: 'center' }
             *         ]
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, grid, datepicker, dropdown, checkbox -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap4',
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'Name', editor: true },
             *             { field: 'CountryName', type: 'dropdown', editor: { dataSource: '/Locations/GetCountries', valueField: 'id' }, editField: 'CountryID'  },
             *             { field: 'DateOfBirth', type: 'date', editor: true },
             *             { field: 'IsActive', title: 'Active?', type:'checkbox', editor: true, mode: 'editOnly', width: 80, align: 'center' }
             *         ]
             *     });
             * </script>
             */editor:undefined,/** The name of the field in the grid data where the grid is going to set the new value.
             * @additionalinfo This is usable when the editor is interface with key/value pairs like dropdowns where the key needs to be updated in a different field..
             * @alias column.editField
             * @type String
             * @default undefined
             * @example Bootstrap.4 <!-- bootstrap4, grid, datepicker, dropdown, checkbox -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         uiLibrary: 'bootstrap4',
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'Name', editor: true },
             *             { field: 'CountryName', type: 'dropdown', editor: { dataSource: '/Locations/GetCountries', valueField: 'id' }, editField: 'CountryID' },
             *             { field: 'DateOfBirth', type: 'date', editor: true },
             *             { field: 'IsActive', title: 'Active?', type:'checkbox', editor: true, mode: 'editOnly', width: 80, align: 'center' }
             *         ]
             *     });
             * </script>
             */editField:undefined,/** Provides a way to specify a display mode for the column.
             * @alias column.mode
             * @type readEdit|editOnly|readOnly
             * @default readEdit
             * @example sample <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', editor: true, mode: 'editOnly' },
             *             { field: 'PlaceOfBirth', editor: true, mode: 'readOnly' }
             *         ]
             *     });
             * </script>
             */mode:'readEdit'},inlineEditing:{/** Inline editing mode.
             * @alias inlineEditing.mode
             * @type click|dblclick|command
             * @default 'click'
             * @example Double.Click <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     var grid = $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'dblclick' },
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', editor: true },
             *             { field: 'PlaceOfBirth', editor: true }
             *         ]
             *     });
             * </script>
             * @example Command <!-- dropdown, grid -->
             * <table id="grid"></table>
             * <script>
             *     var grid, data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
             *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' },
             *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia' },
             *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria' }
             *     ];
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'command' },
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', editor: true },
             *             { field: 'PlaceOfBirth', editor: true }
             *         ],
             *         pager: { limit: 3 }
             *     });
             * </script>
             * @example DateTime <!-- datetimepicker, grid -->
             * <table id="grid"></table>
             * <script>
             *     var grid, data = [
             *         { 'ID': 1, 'Date': '05/15/2018', 'Time': '21:12', 'DateTime': '21:12 05/15/2018' },
             *         { 'ID': 2, 'Date': '05/16/2018', 'Time': '22:12', 'DateTime': '22:12 05/16/2018' },
             *         { 'ID': 3, 'Date': '05/17/2018', 'Time': '23:12', 'DateTime': '23:12 05/17/2018' }
             *     ];
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'command' },
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Date', type: 'date', format: 'mm/dd/yyyy', editor: true },
             *             { field: 'Time', type: 'time', format: 'HH:MM', editor: true },
             *             { field: 'DateTime', type: 'datetime', format: 'HH:MM mm/dd/yyyy', editor: true }
             *         ]
             *     });
             * </script>
             */mode:'click',/** If set to true, add column with buttons for edit, delete, update and cancel at the end of the grid.
             * @alias inlineEditing.managementColumn
             * @type Boolean
             * @default true
             * @example True <!-- grid, checkbox, datepicker -->
             * <table id="grid"></table>
             * <script>
             *     var grid, data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria', 'DateOfBirth': '\/Date(-122954400000)\/', IsActive: false },
             *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil', 'DateOfBirth': '\/Date(211842000000)\/', IsActive: false },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England', 'DateOfBirth': '\/Date(-112417200000)\/', IsActive: false },
             *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany', 'DateOfBirth': '\/Date(512258400000)\/', IsActive: true },
             *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia', 'DateOfBirth': '\/Date(679266000000)\/', IsActive: true },
             *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria', 'DateOfBirth': '\/Date(349653600000)\/', IsActive: false }
             *     ];
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'command', managementColumn: true },
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', editor: true },
             *             { field: 'PlaceOfBirth', editor: true },
             *             { field: 'DateOfBirth', type: 'date', editor: true },
             *             { field: 'IsActive', title: 'Active?', type: 'checkbox', editor: true, width: 100, align: 'center' }
             *         ]
             *     });
             * </script>
             * @example False <!-- materialicons, grid -->
             * <table id="grid"></table>
             * <script>
             *     var grid, editManager, data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
             *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' },
             *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia' },
             *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria' }
             *     ];
             *     editManager = function (value, record, $cell, $displayEl, id, $grid) {
             *         var data = $grid.data(),
             *             $edit = $('<button class="gj-button-md"><i class="material-icons">mode_edit</i> Edit</button>').attr('data-key', id),
             *             $delete = $('<button class="gj-button-md"><i class="material-icons">delete</i> Delete</button>').attr('data-key', id),
             *             $update = $('<button class="gj-button-md"><i class="material-icons">check_circle</i> Update</button>').attr('data-key', id).hide(),
             *             $cancel = $('<button class="gj-button-md"><i class="material-icons">cancel</i> Cancel</button>').attr('data-key', id).hide();
             *         $edit.on('click', function (e) {
             *             $grid.edit($(this).data('key'));
             *             $edit.hide();
             *             $delete.hide();
             *             $update.show();
             *             $cancel.show();
             *         });
             *         $delete.on('click', function (e) {
             *             $grid.removeRow($(this).data('key'));
             *         });
             *         $update.on('click', function (e) {
             *             $grid.update($(this).data('key'));
             *             $edit.show();
             *             $delete.show();
             *             $update.hide();
             *             $cancel.hide();
             *         });
             *         $cancel.on('click', function (e) {
             *             $grid.cancel($(this).data('key'));
             *             $edit.show();
             *             $delete.show();
             *             $update.hide();
             *             $cancel.hide();
             *         });
             *         $displayEl.empty().append($edit).append($delete).append($update).append($cancel);
             *     }
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'command', managementColumn: false },
             *         columns: [
             *             { field: 'ID', width: 56 },
             *             { field: 'Name', editor: true },
             *             { field: 'PlaceOfBirth', editor: true },
             *             { width: 300, align: 'center', renderer: editManager }
             *         ]
             *     });
             * </script>
             * @example Bootstrap <!-- bootstrap, grid, dropdown -->
             * <table id="grid"></table>
             * <script>
             *     var grid, data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
             *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' },
             *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia' },
             *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria' }
             *     ];
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'command' },
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', editor: true },
             *             { field: 'PlaceOfBirth', editor: true }
             *         ],
             *         pager: { limit: 3, sizes: [3, 5, 10, 20] }
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, grid, dropdown -->
             * <table id="grid"></table>
             * <script>
             *     var grid, data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
             *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' },
             *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia' },
             *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria' }
             *     ];
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         primaryKey: 'ID',
             *         inlineEditing: { mode: 'command' },
             *         uiLibrary: 'bootstrap4',
             *         columns: [
             *             { field: 'ID', width: 42 },
             *             { field: 'Name', editor: true },
             *             { field: 'PlaceOfBirth', editor: true }
             *         ],
             *         pager: { limit: 3, sizes: [3, 5, 10, 20] }
             *     });
             * </script>
            */managementColumn:true,managementColumnConfig:{width:300,role:'managementColumn',align:'center',renderer:gj.grid.plugins.inlineEditing.renderers.editManager,cssClass:'gj-grid-management-column'}}},bootstrap:{inlineEditing:{managementColumnConfig:{width:200,role:'managementColumn',align:'center',renderer:gj.grid.plugins.inlineEditing.renderers.editManager,cssClass:'gj-grid-management-column'}}},bootstrap4:{inlineEditing:{managementColumnConfig:{width:280,role:'managementColumn',align:'center',renderer:gj.grid.plugins.inlineEditing.renderers.editManager,cssClass:'gj-grid-management-column'}}}};gj.grid.plugins.inlineEditing["private"]={localization:function localization(data){if(data.uiLibrary==='bootstrap'){data.inlineEditing.editButton='<button role="edit" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> '+gj.grid.messages[data.locale].Edit+'</button>';data.inlineEditing.deleteButton='<button role="delete" class="btn btn-default btn-sm gj-margin-left-10"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> '+gj.grid.messages[data.locale].Delete+'</button>';data.inlineEditing.updateButton='<button role="update" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> '+gj.grid.messages[data.locale].Update+'</button>';data.inlineEditing.cancelButton='<button role="cancel" class="btn btn-default btn-sm gj-margin-left-10"><span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span> '+gj.grid.messages[data.locale].Cancel+'</button>';}else{data.inlineEditing.editButton='<button role="edit" class="gj-button-md"><i class="gj-icon pencil" /> '+gj.grid.messages[data.locale].Edit.toUpperCase()+'</button>';data.inlineEditing.deleteButton='<button role="delete" class="gj-button-md"><i class="gj-icon delete" /> '+gj.grid.messages[data.locale].Delete.toUpperCase()+'</button>';data.inlineEditing.updateButton='<button role="update" class="gj-button-md"><i class="gj-icon check-circle" /> '+gj.grid.messages[data.locale].Update.toUpperCase()+'</button>';data.inlineEditing.cancelButton='<button role="cancel" class="gj-button-md"><i class="gj-icon cancel" /> '+gj.grid.messages[data.locale].Cancel.toUpperCase()+'</button>';}},editMode:function editMode($grid,$cell,column,record){var $displayContainer,$editorContainer,$editorField,value,config,data=$grid.data();if($cell.attr('data-mode')!=='edit'){if(column.editor){gj.grid.plugins.inlineEditing["private"].updateOtherCells($grid,column.mode);$displayContainer=$cell.find('div[data-role="display"]').hide();$editorContainer=$cell.find('div[data-role="edit"]').show();if($editorContainer.length===0){$editorContainer=$('<div data-role="edit" />');$cell.append($editorContainer);}value=record[column.editField||column.field];$editorField=$editorContainer.find('input, select, textarea').first();if($editorField.length){switch(column.type){case'checkbox':$editorField.prop('checked',value);break;case'dropdown':$editorField=$editorField.dropdown('value',value);break;default:$editorField.val(value);}}else{if(typeof column.editor==='function'){column.editor($editorContainer,value,record);$editorField=$editorContainer.find('input, select, textarea').first();}else{config=_typeof(column.editor)==="object"?column.editor:{};config.uiLibrary=data.uiLibrary;config.iconsLibrary=data.iconsLibrary;config.fontSize=$grid.css('font-size');config.showOnFocus=false;if('checkbox'===column.type&&gj.checkbox){$editorField=$('<input type="checkbox" />').prop('checked',value);$editorContainer.append($editorField);$editorField.checkbox(config);}else if('date'===column.type&&gj.datepicker||'time'===column.type&&gj.timepicker||'datetime'===column.type&&gj.datetimepicker){$editorField=$('<input type="text" width="100%"/>');$editorContainer.append($editorField);if(column.format){config.format=column.format;}switch(column.type){case'date':$editorField=$editorField.datepicker(config);break;case'time':$editorField=$editorField.timepicker(config);break;case'datetime':$editorField=$editorField.datetimepicker(config);break;}if($editorField.value){$editorField.value($displayContainer.html());}}else if('dropdown'===column.type&&gj.dropdown){$editorField=$('<select type="text" width="100%"/>');$editorContainer.append($editorField);config.dataBound=function(e){var $dropdown=$(this).dropdown();if(column.editField){$dropdown.value(record[column.editField]);}else{$dropdown.value(record[column.field]);}};$editorField=$editorField.dropdown(config);}else{$editorField=$('<input type="text" value="'+value+'" class="gj-width-full"/>');if(data.uiLibrary==='materialdesign'){$editorField.addClass('gj-textbox-md').css('font-size',$grid.css('font-size'));}$editorContainer.append($editorField);}}if(data.inlineEditing.mode!=='command'&&column.mode!=='editOnly'){$editorField=$editorContainer.find('input, select, textarea').first();$editorField.on('keyup',function(e){if(e.keyCode===13||e.keyCode===27){gj.grid.plugins.inlineEditing["private"].displayMode($grid,$cell,column);}});}}if($editorField.prop('tagName').toUpperCase()==="INPUT"&&$editorField.prop('type').toUpperCase()==='TEXT'){gj.core.setCaretAtEnd($editorField[0]);}else{$editorField.focus();}$cell.attr('data-mode','edit');}else if(column.role==='managementColumn'){$cell.find('[role="edit"]').hide();$cell.find('[role="delete"]').hide();$cell.find('[role="update"]').show();$cell.find('[role="cancel"]').show();}}},displayMode:function displayMode($grid,$cell,column,cancel){var $editorContainer,$displayContainer,$ele,newValue,newEditFieldValue,record,position,style='';if(column.mode!=='editOnly'){if($cell.attr('data-mode')==='edit'){$editorContainer=$cell.find('div[data-role="edit"]');$displayContainer=$cell.find('div[data-role="display"]');$ele=$editorContainer.find('input, select, textarea').first();if($ele[0].tagName.toUpperCase()==="SELECT"&&$ele[0].selectedIndex>-1){newValue=$ele[0].options[$ele[0].selectedIndex].innerHTML;newEditFieldValue=$ele[0].value;}else if($ele[0].tagName.toUpperCase()==="INPUT"&&$ele[0].type.toUpperCase()==="CHECKBOX"){newValue=$ele[0].checked;}else{newValue=$ele.val();}position=$cell.parent().data('position');record=$grid.get(position);if(cancel!==true&&newValue!==record[column.field]){record[column.field]=column.type==='date'?gj.core.parseDate(newValue,column.format):newValue;if(column.editField){record[column.editField]=newEditFieldValue||newValue;}if(column.mode!=='editOnly'){gj.grid.methods.renderDisplayElement($grid,$displayContainer,column,record,gj.grid.methods.getId(record,$grid.data('primaryKey'),position),'update');if($cell.find('span.gj-dirty').length===0){$cell.prepend($('<span class="gj-dirty" />'));}}gj.grid.plugins.inlineEditing.events.cellDataChanged($grid,$cell,column,record,newValue);gj.grid.plugins.inlineEditing["private"].updateChanges($grid,column,record,newValue);}$editorContainer.hide();$displayContainer.show();$cell.attr('data-mode','display');}if(column.role==='managementColumn'){$cell.find('[role="update"]').hide();$cell.find('[role="cancel"]').hide();$cell.find('[role="edit"]').show();$cell.find('[role="delete"]').show();}}},updateOtherCells:function updateOtherCells($grid,mode){var data=$grid.data();if(data.inlineEditing.mode!=='command'&&mode!=='editOnly'){$grid.find('div[data-role="edit"]:visible').parent('td').each(function(){var $cell=$(this),column=data.columns[$cell.index()];gj.grid.plugins.inlineEditing["private"].displayMode($grid,$cell,column);});}},updateChanges:function updateChanges($grid,column,sourceRecord,newValue){var targetRecords,filterResult,newRecord,data=$grid.data();if(!data.guid){data.guid=gj.grid.plugins.inlineEditing["private"].generateGUID();}if(data.primaryKey){targetRecords=JSON.parse(sessionStorage.getItem('gj.grid.'+data.guid));if(targetRecords){filterResult=targetRecords.filter(function(record){return record[data.primaryKey]===sourceRecord[data.primaryKey];});}else{targetRecords=[];}if(filterResult&&filterResult.length===1){filterResult[0][column.field]=newValue;}else{newRecord={};newRecord[data.primaryKey]=sourceRecord[data.primaryKey];if(data.primaryKey!==column.field){newRecord[column.field]=newValue;}targetRecords.push(newRecord);}sessionStorage.setItem('gj.grid.'+data.guid,JSON.stringify(targetRecords));}},generateGUID:function generateGUID(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}return s4()+s4()+'-'+s4()+'-'+s4()+'-'+s4()+'-'+s4()+s4()+s4();}};gj.grid.plugins.inlineEditing["public"]={/**
     * Return array with all changes
     * @method
     * @return array
     * @example sample <!-- grid, grid.inlineEditing -->
     * <button id="btnGetChanges" class="gj-button-md">Get Changes</button>
     * <br/><br/>
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID' }, { field: 'Name', editor: true }, { field: 'PlaceOfBirth', editor: true } ]
     *     });
     *     $('#btnGetChanges').on('click', function () {
     *         alert(JSON.stringify(grid.getChanges()));
     *     });
     * </script>
     */getChanges:function getChanges(){return JSON.parse(sessionStorage.getItem('gj.grid.'+this.data().guid));},/**
     * Enable edit mode for all editable cells within a row.
     * @method
     * @param {string} id - The id of the row that needs to be edited
     * @return grid
     * @example Edit.Row <!-- grid -->
     * <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
     * <table id="grid"></table>
     * <script>
     *     var grid, renderer;
     *     renderer = function (value, record, $cell, $displayEl, id) {
     *         var $editBtn = $('<i class="fa fa-pencil gj-cursor-pointer" data-key="' + id + '"></i>'),
     *             $updateBtn = $('<i class="fa fa-save gj-cursor-pointer" data-key="' + id + '"></i>').hide();
     *         $editBtn.on('click', function (e) {
     *             grid.edit($(this).data('key'));
     *             $editBtn.hide();
     *             $updateBtn.show();
     *         });
     *         $updateBtn.on('click', function (e) {
     *             grid.update($(this).data('key'));
     *             $editBtn.show();
     *             $updateBtn.hide();
     *         });
     *         $displayEl.append($editBtn).append($updateBtn);
     *     }
     *     grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: '/Players/Get',
     *         inlineEditing: { mode: 'command', managementColumn: false },
     *         columns: [ 
     *             { field: 'ID', width: 56 },
     *             { field: 'Name', editor: true }, 
     *             { field: 'PlaceOfBirth', editor: true },
     *             { width: 56, align: 'center', renderer: renderer }
     *         ]
     *     });
     * </script>
     */edit:function edit(id){var i,record=this.getById(id),$cells=gj.grid.methods.getRowById(this,id).children('td'),columns=this.data('columns');for(i=0;i<$cells.length;i++){gj.grid.plugins.inlineEditing["private"].editMode(this,$($cells[i]),columns[i],record);}return this;},/**
     * Update all editable cells within a row, when the row is in edit mode.
     * @method
     * @param {string} id - The id of the row that needs to be updated
     * @return grid
     * @fires rowDataChanged
     * @example Update.Row <!-- grid -->
     * <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
     * <table id="grid"></table>
     * <script>
     *     var grid, renderer;
     *     renderer = function (value, record, $cell, $displayEl, id) {
     *         var $editBtn = $('<i class="fa fa-pencil gj-cursor-pointer" data-key="' + id + '"></i>'),
     *             $updateBtn = $('<i class="fa fa-save gj-cursor-pointer" data-key="' + id + '"></i>').hide();
     *         $editBtn.on('click', function (e) {
     *             grid.edit($(this).data('key'));
     *             $editBtn.hide();
     *             $updateBtn.show();
     *         });
     *         $updateBtn.on('click', function (e) {
     *             grid.update($(this).data('key'));
     *             $editBtn.show();
     *             $updateBtn.hide();
     *         });
     *         $displayEl.append($editBtn).append($updateBtn);
     *     }
     *     grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: '/Players/Get',
     *         inlineEditing: { mode: 'command', managementColumn: false },
     *         columns: [ 
     *             { field: 'ID', width: 56 },
     *             { field: 'Name', editor: true }, 
     *             { field: 'PlaceOfBirth', editor: true },
     *             { width: 56, align: 'center', renderer: renderer }
     *         ]
     *     });
     * </script>
     */update:function update(id){var i,record=this.getById(id),$cells=gj.grid.methods.getRowById(this,id).children('td'),columns=this.data('columns');for(i=0;i<$cells.length;i++){gj.grid.plugins.inlineEditing["private"].displayMode(this,$($cells[i]),columns[i],false);}gj.grid.plugins.inlineEditing.events.rowDataChanged(this,id,record);return this;},/**
     * Cancel the edition of all editable cells, when the row is in edit mode.
     * @method
     * @param {string} id - The id of the row where you need to undo all changes
     * @return grid
     * @example Cancel.Row <!-- grid -->
     * <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
     * <table id="grid"></table>
     * <script>
     *     var grid, renderer;
     *     renderer = function (value, record, $cell, $displayEl, id) {
     *         var $editBtn = $('<i class="fa fa-pencil gj-cursor-pointer" data-key="' + id + '"></i>'),
     *             $cancelBtn = $('<i class="fa fa-undo gj-cursor-pointer" data-key="' + id + '"></i>').hide();
     *         $editBtn.on('click', function (e) {
     *             grid.edit($(this).data('key'));
     *             $editBtn.hide();
     *             $cancelBtn.show();
     *         });
     *         $cancelBtn.on('click', function (e) {
     *             grid.cancel($(this).data('key'));
     *             $editBtn.show();
     *             $cancelBtn.hide();
     *         });
     *         $displayEl.append($editBtn).append($cancelBtn);
     *     }
     *     grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: '/Players/Get',
     *         inlineEditing: { mode: 'command', managementColumn: false },
     *         columns: [ 
     *             { field: 'ID', width: 56 },
     *             { field: 'Name', editor: true }, 
     *             { field: 'PlaceOfBirth', editor: true },
     *             { width: 56, align: 'center', renderer: renderer }
     *         ]
     *     });
     * </script>
     */cancel:function cancel(id){var i,record=this.getById(id),$cells=gj.grid.methods.getRowById(this,id).children('td'),columns=this.data('columns');for(i=0;i<$cells.length;i++){gj.grid.plugins.inlineEditing["private"].displayMode(this,$($cells[i]),columns[i],true);}return this;}};gj.grid.plugins.inlineEditing.events={/**
     * Event fires after inline edit of a cell in the grid.
     *
     * @event cellDataChanged
     * @param {object} e - event data
     * @param {object} $cell - the cell presented as jquery object 
     * @param {object} column - the column configuration data
     * @param {object} record - the data of the row record
     * @param {object} newValue - the new cell value
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         dataSource: '/Players/Get',
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', editor: true }, { field: 'PlaceOfBirth', editor: true } ]
     *     });
     *     grid.on('cellDataChanged', function (e, $cell, column, record, newValue) {
     *         alert('The value for "' + column.field + '" is changed to "' + newValue + '"');
     *     });
     * </script>
     */cellDataChanged:function cellDataChanged($grid,$cell,column,record,oldValue,newValue){$grid.triggerHandler('cellDataChanged',[$cell,column,record,oldValue,newValue]);},/**
     * Event fires after inline edit of a row in the grid.
     *
     * @event rowDataChanged
     * @param {object} e - event data
     * @param {object} id - the id of the record
     * @param {object} record - the data of the row record
     * @example sample <!-- grid -->
     * <table id="grid"></table>
     * <script>
     *     var grid = $('#grid').grid({
     *         primaryKey: 'ID',
     *         dataSource: '/Players/Get',
     *         inlineEditing: { mode: 'command' },
     *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', editor: true }, { field: 'PlaceOfBirth', editor: true } ]
     *     });
     *     grid.on('rowDataChanged', function (e, id, record) {
     *         alert('Record with id="' + id + '" is changed to "' + JSON.stringify(record) + '"');
     *     });
     * </script>
     */rowDataChanged:function rowDataChanged($grid,id,record){$grid.triggerHandler('rowDataChanged',[id,record]);}};gj.grid.plugins.inlineEditing.configure=function($grid,fullConfig,clientConfig){var data=$grid.data();$.extend(true,$grid,gj.grid.plugins.inlineEditing["public"]);if(clientConfig.inlineEditing){$grid.on('dataBound',function(){$grid.find('span.gj-dirty').remove();});$grid.on('rowDataBound',function(e,$row,id,record){$grid.cancel(id);});}if(data.inlineEditing.mode==='command'){gj.grid.plugins.inlineEditing["private"].localization(data);if(fullConfig.inlineEditing.managementColumn){data.columns.push(fullConfig.inlineEditing.managementColumnConfig);}}else{$grid.on('cellDataBound',function(e,$displayEl,id,column,record){if(column.editor){if(column.mode==='editOnly'){gj.grid.plugins.inlineEditing["private"].editMode($grid,$displayEl.parent(),column,record);}else{$displayEl.parent('td').on(data.inlineEditing.mode==='dblclick'?'dblclick':'click',function(){gj.grid.plugins.inlineEditing["private"].editMode($grid,$displayEl.parent(),column,record);});}}});}};/** 
 * @widget Grid 
 * @plugin Optimistic Persistence
 */gj.grid.plugins.optimisticPersistence={config:{base:{optimisticPersistence:{/** Array that contains a list with param names that needs to be saved in the localStorage. You need to specify guid on the initialization of the grid in order to enable this feature.
                 * @additionalinfo This feature is using <a href="https://developer.mozilla.org/en/docs/Web/API/Window/localStorage" target="_blank">HTML5 localStorage</a> to store params and values.
                 * You can clear the data saved in localStorage when you clear your browser cache.
                 * @alias optimisticPersistence.localStorage
                 * @type array
                 * @default undefined
                 * @example sample <!-- bootstrap, grid  -->
                 * <p>Change the page and/or page size and then refresh the grid.</p>
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         guid: '58d47231-ac7b-e6d2-ddba-5e0195b31f2e',
                 *         uiLibrary: 'bootstrap',
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         optimisticPersistence: { localStorage: ["page", "limit"] },
                 *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
                 *     });
                 * </script>
                 */localStorage:undefined,/** Array that contains a list with param names that needs to be saved in the sessionStorage. You need to specify guid on the initialization of the grid in order to enable this feature.
                 * @additionalinfo This feature is using <a href="https://developer.mozilla.org/en/docs/Web/API/Window/sessionStorage" target="_blank">HTML5 sessionStorage</a> to store params and values.
                 * You can clear the data saved in sessionStorage when you open and close the browser.
                 * @alias optimisticPersistence.sessionStorage
                 * @type array
                 * @default undefined
                 * @example sample <!-- bootstrap, grid  -->
                 * <p>Change the page and/or page size and then refresh the grid. </p>
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         guid: '58d47231-ac7b-e6d2-ddba-5e0195b31f2f',
                 *         uiLibrary: 'bootstrap',
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         optimisticPersistence: { sessionStorage: ["page", "limit"] },
                 *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
                 *     });
                 * </script>
                 */sessionStorage:undefined}}},"private":{applyParams:function applyParams($grid){var data=$grid.data(),params={},storage;storage=JSON.parse(sessionStorage.getItem('gj.grid.'+data.guid));if(storage&&storage.optimisticPersistence){$.extend(params,storage.optimisticPersistence);}storage=JSON.parse(localStorage.getItem('gj.grid.'+data.guid));if(storage&&storage.optimisticPersistence){$.extend(params,storage.optimisticPersistence);}$.extend(data.params,params);},saveParams:function saveParams($grid){var i,param,data=$grid.data(),storage={optimisticPersistence:{}};if(data.optimisticPersistence.sessionStorage){for(i=0;i<data.optimisticPersistence.sessionStorage.length;i++){param=data.optimisticPersistence.sessionStorage[i];storage.optimisticPersistence[param]=data.params[param];}storage=$.extend(true,JSON.parse(sessionStorage.getItem('gj.grid.'+data.guid)),storage);sessionStorage.setItem('gj.grid.'+data.guid,JSON.stringify(storage));}if(data.optimisticPersistence.localStorage){storage={optimisticPersistence:{}};for(i=0;i<data.optimisticPersistence.localStorage.length;i++){param=data.optimisticPersistence.localStorage[i];storage.optimisticPersistence[param]=data.params[param];}storage=$.extend(true,JSON.parse(localStorage.getItem('gj.grid.'+data.guid)),storage);localStorage.setItem('gj.grid.'+data.guid,JSON.stringify(storage));}}},configure:function configure($grid,fullConfig,clientConfig){if(fullConfig.guid){if(fullConfig.optimisticPersistence.localStorage||fullConfig.optimisticPersistence.sessionStorage){gj.grid.plugins.optimisticPersistence["private"].applyParams($grid);$grid.on('dataBound',function(e){gj.grid.plugins.optimisticPersistence["private"].saveParams($grid);});}}}};/**
 * @widget Grid
 * @plugin Pagination
 */gj.grid.plugins.pagination={config:{base:{style:{pager:{panel:'',stateDisabled:'',activeButton:''}},paramNames:{/** The name of the parameter that is going to send the number of the page.
                 * The pager should be enabled in order this parameter to be in use.
                 * @alias paramNames.page
                 * @type string
                 * @default "page"
                 */page:'page',/** The name of the parameter that is going to send the maximum number of records per page.
                 * The pager should be enabled in order this parameter to be in use.
                 * @alias paramNames.limit
                 * @type string
                 * @default "limit"
                 */limit:'limit'},pager:{/** The maximum number of records that can be show by page.
                 * @alias pager.limit
                 * @type number
                 * @default 10
                 * @example local.data <!-- grid, dropdown -->
                 * <table id="grid"></table>
                 * <script>
                 *     var data, grid;
                 *     data = [
                 *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
                 *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
                 *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
                 *     ];
                 *     grid = $('#grid').grid({
                 *         dataSource: data,
                 *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         pager: { limit: 2, sizes: [2, 5, 10, 100] }
                 *     });
                 * </script>
                 * @example remote.data <!-- grid, dropdown -->
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         pager: { limit: 2, sizes: [2, 5, 10, 100] }
                 *     });
                 * </script>
                 */limit:10,/** Array that contains the possible page sizes of the grid.
                 * When this setting is set, then a drop down with the options for each page size is visualized in the pager.
                 * @alias pager.sizes
                 * @type array
                 * @default [5, 10, 20, 100]
                 * @example Bootstrap.3 <!-- bootstrap, grid, grid.pagination, dropdown  -->
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         uiLibrary: 'bootstrap',
                 *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
                 *     });
                 * </script>
                 * @example Bootstrap.4.FontAwesome <!-- bootstrap4, fontawesome, grid, dropdown  -->
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         uiLibrary: 'bootstrap4',
                 *         iconsLibrary: 'fontawesome',
                 *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
                 *     });
                 * </script>
                 * @example Bootstrap.4.Material.Icons <!-- bootstrap4, grid, dropdown  -->
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         uiLibrary: 'bootstrap4',
                 *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
                 *     });
                 * </script>
                 * @example Material.Design <!-- grid, grid.pagination, dropdown  -->
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         uiLibrary: 'materialdesign',
                 *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
                 *     });
                 * </script>
                 */sizes:[5,10,20,100],/** Array that contains a list with jquery objects that are going to be used on the left side of the pager.
                 * @alias pager.leftControls
                 * @type array
                 * @default array
                 * @example Font.Awesome <!-- fontawesome, grid  -->
                 * <style>
                 * .icon-disabled { color: #ccc; }
                 * table.gj-grid div[data-role="display"] div.custom-item { display: table; margin-right: 5px; }
                 * </style>
                 * <table id="grid"></table>
                 * <script>
                 *     var grid = $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
                 *         style: {
                 *             pager: {
                 *                 stateDisabled: 'icon-disabled'
                 *             }
                 *         },
                 *         pager: { 
                 *             limit: 2, 
                 *             sizes: [2, 5, 10, 20],
                 *             leftControls: [
                 *                 $('<div title="First" data-role="page-first" class="custom-item"><i class="fa fa-fast-backward" aria-hidden="true" /></div>'),
                 *                 $('<div title="Previous" data-role="page-previous" class="custom-item"><i class="fa fa-backward" aria-hidden="true" /></div>'),
                 *                 $('<div> Page </div>'),
                 *                 $('<div class="custom-item"></div>').append($('<input type="text" data-role="page-number" style="margin: 0 5px; width: 34px; height: 16px; text-align: right;" value="0">')),
                 *                 $('<div>of&nbsp;</div>'),
                 *                 $('<div data-role="page-label-last" style="margin-right: 5px;">0</div>'),
                 *                 $('<div title="Next" data-role="page-next" class="custom-item"><i class="fa fa-forward" aria-hidden="true" /></div>'),
                 *                 $('<div title="Last" data-role="page-last" class="custom-item"><i class="fa fa-fast-forward" aria-hidden="true" /></div>'),
                 *                 $('<div title="Reload" data-role="page-refresh" class="custom-item"><i class="fa fa-refresh" aria-hidden="true" /></div>'),
                 *                 $('<div class="custom-item"></div>').append($('<select data-role="page-size" style="margin: 0 5px; width: 50px;"></select>'))
                 *             ],
                 *             rightControls: [
                 *                 $('<div>Displaying records&nbsp;</div>'),
                 *                 $('<div data-role="record-first">0</div>'),
                 *                 $('<div>&nbsp;-&nbsp;</div>'),
                 *                 $('<div data-role="record-last">0</div>'),
                 *                 $('<div>&nbsp;of&nbsp;</div>'),
                 *                 $('<div data-role="record-total">0</div>').css({ "margin-right": "5px" })
                 *             ]
                 *         }
                 *     });
                 * </script>
                 */leftControls:undefined,/** Array that contains a list with jquery objects that are going to be used on the right side of the pager.
                 * @alias pager.rightControls
                 * @type array
                 * @default array
                 */rightControls:undefined}},bootstrap:{style:{pager:{panel:'',stateDisabled:''}}},bootstrap4:{style:{pager:{panel:'btn-toolbar',stateDisabled:''}}},glyphicons:{icons:{first:'<span class="glyphicon glyphicon-step-backward"></span>',previous:'<span class="glyphicon glyphicon-backward"></span>',next:'<span class="glyphicon glyphicon-forward"></span>',last:'<span class="glyphicon glyphicon-step-forward"></span>',refresh:'<span class="glyphicon glyphicon-refresh"></span>'}},materialicons:{icons:{first:'<i class="gj-icon first-page" />',previous:'<i class="gj-icon chevron-left" />',next:'<i class="gj-icon chevron-right" />',last:'<i class="gj-icon last-page" />',refresh:'<i class="gj-icon refresh" />'}},fontawesome:{icons:{first:'<i class="fa fa-fast-backward" aria-hidden="true"></i>',previous:'<i class="fa fa-backward" aria-hidden="true"></i>',next:'<i class="fa fa-forward" aria-hidden="true"></i>',last:'<i class="fa fa-fast-forward" aria-hidden="true"></i>',refresh:'<i class="fa fa-refresh" aria-hidden="true"></i>'}}},"private":{init:function init($grid){var $row,$cell,data,controls,$leftPanel,$rightPanel,$tfoot,leftControls,rightControls,i;data=$grid.data();if(data.pager){if(!data.params[data.paramNames.page]){data.params[data.paramNames.page]=1;}if(!data.params[data.paramNames.limit]){data.params[data.paramNames.limit]=data.pager.limit;}gj.grid.plugins.pagination["private"].localization(data);$row=$('<tr data-role="pager"/>');$cell=$('<th/>');$row.append($cell);$leftPanel=$('<div data-role="display" />').addClass(data.style.pager.panel).css({'float':'left'});$rightPanel=$('<div data-role="display" />').addClass(data.style.pager.panel).css({'float':'right'});$cell.append($leftPanel).append($rightPanel);$tfoot=$('<tfoot />').append($row);$grid.append($tfoot);gj.grid.plugins.pagination["private"].updatePagerColSpan($grid);leftControls=gj.grid.methods.clone(data.pager.leftControls);//clone array
$.each(leftControls,function(){$leftPanel.append(this);});rightControls=gj.grid.methods.clone(data.pager.rightControls);//clone array
$.each(rightControls,function(){$rightPanel.append(this);});controls=$grid.find('tfoot [data-role]');for(i=0;i<controls.length;i++){gj.grid.plugins.pagination["private"].initPagerControl($(controls[i]),$grid);}}},localization:function localization(data){if(data.uiLibrary==='bootstrap'){gj.grid.plugins.pagination["private"].localizationBootstrap(data);}else if(data.uiLibrary==='bootstrap4'){gj.grid.plugins.pagination["private"].localizationBootstrap4(data);}else{gj.grid.plugins.pagination["private"].localizationMaterialDesign(data);}},localizationBootstrap:function localizationBootstrap(data){var msg=gj.grid.messages[data.locale];if(typeof data.pager.leftControls==='undefined'){data.pager.leftControls=[$('<button type="button" class="btn btn-default btn-sm">'+(data.icons.first||msg.First)+'</button>').attr('title',msg.FirstPageTooltip).attr('data-role','page-first'),$('<button type="button" class="btn btn-default btn-sm">'+(data.icons.previous||msg.Previous)+'</button>').attr('title',msg.PreviousPageTooltip).attr('data-role','page-previous'),$('<div>'+msg.Page+'</div>'),$('<input data-role="page-number" class="form-control input-sm" type="text" value="0">'),$('<div>'+msg.Of+'</div>'),$('<div data-role="page-label-last">0</div>'),$('<button type="button" class="btn btn-default btn-sm">'+(data.icons.next||msg.Next)+'</button>').attr('title',msg.NextPageTooltip).attr('data-role','page-next'),$('<button type="button" class="btn btn-default btn-sm">'+(data.icons.last||msg.Last)+'</button>').attr('title',msg.LastPageTooltip).attr('data-role','page-last'),$('<button type="button" class="btn btn-default btn-sm">'+(data.icons.refresh||msg.Refresh)+'</button>').attr('title',msg.Refresh).attr('data-role','page-refresh'),$('<select data-role="page-size" class="form-control input-sm" width="60"></select>')];}if(typeof data.pager.rightControls==='undefined'){data.pager.rightControls=[$('<div>'+msg.DisplayingRecords+'</div>'),$('<div data-role="record-first">0</div>'),$('<div>-</div>'),$('<div data-role="record-last">0</div>'),$('<div>'+msg.Of+'</div>'),$('<div data-role="record-total">0</div>')];}},localizationBootstrap4:function localizationBootstrap4(data){var msg=gj.grid.messages[data.locale];if(typeof data.pager.leftControls==='undefined'){data.pager.leftControls=[$('<button class="btn btn-default btn-sm gj-cursor-pointer">'+(data.icons.first||msg.First)+'</button>').attr('title',msg.FirstPageTooltip).attr('data-role','page-first'),$('<button class="btn btn-default btn-sm gj-cursor-pointer">'+(data.icons.previous||msg.Previous)+'</button>').attr('title',msg.PreviousPageTooltip).attr('data-role','page-previous'),$('<div>'+msg.Page+'</div>'),$('<div class="input-group"><input data-role="page-number" class="form-control form-control-sm" type="text" value="0"></div>'),$('<div>'+msg.Of+'</div>'),$('<div data-role="page-label-last">0</div>'),$('<button class="btn btn-default btn-sm gj-cursor-pointer">'+(data.icons.next||msg.Next)+'</button>').attr('title',msg.NextPageTooltip).attr('data-role','page-next'),$('<button class="btn btn-default btn-sm gj-cursor-pointer">'+(data.icons.last||msg.Last)+'</button>').attr('title',msg.LastPageTooltip).attr('data-role','page-last'),$('<button class="btn btn-default btn-sm gj-cursor-pointer">'+(data.icons.refresh||msg.Refresh)+'</button>').attr('title',msg.Refresh).attr('data-role','page-refresh'),$('<select data-role="page-size" class="form-control input-sm" width="60"></select>')];}if(typeof data.pager.rightControls==='undefined'){data.pager.rightControls=[$('<div>'+msg.DisplayingRecords+'&nbsp;</div>'),$('<div data-role="record-first">0</div>'),$('<div>-</div>'),$('<div data-role="record-last">0</div>'),$('<div>'+msg.Of+'</div>'),$('<div data-role="record-total">0</div>')];}},localizationMaterialDesign:function localizationMaterialDesign(data){var msg=gj.grid.messages[data.locale];if(typeof data.pager.leftControls==='undefined'){data.pager.leftControls=[];}if(typeof data.pager.rightControls==='undefined'){data.pager.rightControls=[$('<span class="">'+msg.RowsPerPage+'</span>'),$('<select data-role="page-size" class="gj-grid-md-limit-select" width="52"></select></div>'),$('<span class="gj-md-spacer-32">&nbsp;</span>'),$('<span data-role="record-first" class="">0</span>'),$('<span class="">-</span>'),$('<span data-role="record-last" class="">0</span>'),$('<span class="gj-grid-mdl-pager-label">'+msg.Of+'</span>'),$('<span data-role="record-total" class="">0</span>'),$('<span class="gj-md-spacer-32">&nbsp;</span>'),$('<button class="gj-button-md">'+(data.icons.previous||msg.Previous)+'</button>').attr('title',msg.PreviousPageTooltip).attr('data-role','page-previous').addClass(data.icons.first?'gj-button-md-icon':''),$('<span class="gj-md-spacer-24">&nbsp;</span>'),$('<button class="gj-button-md">'+(data.icons.next||msg.Next)+'</button>').attr('title',msg.NextPageTooltip).attr('data-role','page-next').addClass(data.icons.first?'gj-button-md-icon':'')];}},initPagerControl:function initPagerControl($control,$grid){var data=$grid.data();switch($control.data('role')){case'page-size':if(data.pager.sizes&&0<data.pager.sizes.length){$control.show();$.each(data.pager.sizes,function(){$control.append($('<option/>').attr('value',this.toString()).text(this.toString()));});$control.change(function(){var newSize=parseInt(this.value,10);data.params[data.paramNames.limit]=newSize;gj.grid.plugins.pagination["private"].changePage($grid,1);gj.grid.plugins.pagination.events.pageSizeChange($grid,newSize);});$control.val(data.params[data.paramNames.limit]);if(gj.dropdown){$control.dropdown({uiLibrary:data.uiLibrary,iconsLibrary:data.iconsLibrary,fontSize:$control.css('font-size'),style:{presenter:'btn btn-default btn-sm'}});}}else{$control.hide();}break;case'page-refresh':$control.on('click',function(){$grid.reload();});break;}},reloadPager:function reloadPager($grid,totalRecords){var page,limit,lastPage,firstRecord,lastRecord,data,controls,i;data=$grid.data();if(data.pager){page=0===totalRecords?0:parseInt(data.params[data.paramNames.page],10);limit=parseInt(data.params[data.paramNames.limit],10);lastPage=Math.ceil(totalRecords/limit);firstRecord=0===page?0:limit*(page-1)+1;lastRecord=firstRecord+limit>totalRecords?totalRecords:firstRecord+limit-1;controls=$grid.find('TFOOT [data-role]');for(i=0;i<controls.length;i++){gj.grid.plugins.pagination["private"].reloadPagerControl($(controls[i]),$grid,page,lastPage,firstRecord,lastRecord,totalRecords);}gj.grid.plugins.pagination["private"].updatePagerColSpan($grid);}},reloadPagerControl:function reloadPagerControl($control,$grid,page,lastPage,firstRecord,lastRecord,totalRecords){var newPage;switch($control.data('role')){case'page-first':gj.grid.plugins.pagination["private"].assignPageHandler($grid,$control,1,page<2);break;case'page-previous':gj.grid.plugins.pagination["private"].assignPageHandler($grid,$control,page-1,page<2);break;case'page-number':$control.val(page).off('change').on('change',gj.grid.plugins.pagination["private"].createChangePageHandler($grid,page));break;case'page-label-last':$control.text(lastPage);break;case'page-next':gj.grid.plugins.pagination["private"].assignPageHandler($grid,$control,page+1,lastPage===page);break;case'page-last':gj.grid.plugins.pagination["private"].assignPageHandler($grid,$control,lastPage,lastPage===page);break;case'page-button-one':newPage=page===1?1:page==lastPage?page-2:page-1;gj.grid.plugins.pagination["private"].assignButtonHandler($grid,$control,page,newPage,lastPage);break;case'page-button-two':newPage=page===1?2:page==lastPage?lastPage-1:page;gj.grid.plugins.pagination["private"].assignButtonHandler($grid,$control,page,newPage,lastPage);break;case'page-button-three':newPage=page===1?page+2:page==lastPage?page:page+1;gj.grid.plugins.pagination["private"].assignButtonHandler($grid,$control,page,newPage,lastPage);break;case'record-first':$control.text(firstRecord);break;case'record-last':$control.text(lastRecord);break;case'record-total':$control.text(totalRecords);break;}},assignPageHandler:function assignPageHandler($grid,$control,newPage,disabled){var style=$grid.data().style.pager;if(disabled){$control.addClass(style.stateDisabled).prop('disabled',true).off('click');}else{$control.removeClass(style.stateDisabled).prop('disabled',false).off('click').on('click',function(){gj.grid.plugins.pagination["private"].changePage($grid,newPage);});}},assignButtonHandler:function assignButtonHandler($grid,$control,page,newPage,lastPage){var style=$grid.data().style.pager;if(newPage<1||newPage>lastPage){$control.hide();}else{$control.show().off('click').text(newPage);if(newPage===page){$control.addClass(style.activeButton);}else{$control.removeClass(style.activeButton).on('click',function(){gj.grid.plugins.pagination["private"].changePage($grid,newPage);});}}},createChangePageHandler:function createChangePageHandler($grid,currentPage){return function(){var data=$grid.data(),newPage=parseInt(this.value,10);gj.grid.plugins.pagination["private"].changePage($grid,newPage);};},changePage:function changePage($grid,newPage){var data=$grid.data();if(gj.grid.plugins.pagination.events.pageChanging($grid,newPage)!==false&&!isNaN(newPage)){$grid.find('TFOOT [data-role="page-number"]').val(newPage);data.params[data.paramNames.page]=newPage;}$grid.reload();},updatePagerColSpan:function updatePagerColSpan($grid){var $cell=$grid.find('tfoot > tr[data-role="pager"] > th');if($cell&&$cell.length){$cell.attr('colspan',gj.grid.methods.countVisibleColumns($grid));}},isLastRecordVisible:function isLastRecordVisible($grid){var result=true,data=$grid.data(),limit=parseInt(data.params[data.paramNames.limit],10),page=parseInt(data.params[data.paramNames.page],10),count=$grid.count();if(limit&&page){result=(page-1)*limit+count===data.totalRecords;}return result;}},"public":{getAll:function getAll(includeAllRecords){var limit,page,start,data=this.data();if($.isArray(data.dataSource)){if(includeAllRecords){return data.dataSource;}else if(data.params[data.paramNames.limit]&&data.params[data.paramNames.page]){limit=parseInt(data.params[data.paramNames.limit],10);page=parseInt(data.params[data.paramNames.page],10);start=(page-1)*limit;return data.records.slice(start,start+limit);}else{return data.records;}}else{return data.records;}}},events:{/**
         * Triggered when the page size is changed.
         *
         * @event pageSizeChange
         * @param {object} e - event data
         * @param {number} newSize - The new page size
         * @example sample <!-- bootstrap, grid, grid.pagination -->
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'bootstrap',
         *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         *     grid.on('pageSizeChange', function (e, newSize) {
         *         alert('The new page size is ' + newSize + '.');
         *     });
         * </script>
         */pageSizeChange:function pageSizeChange($grid,newSize){$grid.triggerHandler('pageSizeChange',[newSize]);},/**
         * Triggered before the change of the page.
         *
         * @event pageChanging
         * @param {object} e - event data
         * @param {number} newPage - The new page
         * @example sample <!-- bootstrap4, fontawesome, dropdown, grid, grid.pagination -->
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         *     grid.on('pageChanging', function (e, newPage) {
         *         if (isNaN(newPage)) {
         *             alert('Invalid page number');
         *             return false;
         *         } else {
         *             alert(newPage + ' is valid page number.');
         *         }
         *     });
         * </script>
         */pageChanging:function pageChanging($grid,newSize){$grid.triggerHandler('pageChanging',[newSize]);}},configure:function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.pagination["public"]);var data=$grid.data();if(clientConfig.pager){gj.grid.methods.isLastRecordVisible=gj.grid.plugins.pagination["private"].isLastRecordVisible;$grid.on('initialized',function(){gj.grid.plugins.pagination["private"].init($grid);});$grid.on('dataBound',function(e,records,totalRecords){gj.grid.plugins.pagination["private"].reloadPager($grid,totalRecords);});$grid.on('columnShow',function(){gj.grid.plugins.pagination["private"].updatePagerColSpan($grid);});$grid.on('columnHide',function(){gj.grid.plugins.pagination["private"].updatePagerColSpan($grid);});}}};/** 
 * @widget Grid 
 * @plugin Responsive Design
 */gj.grid.plugins.responsiveDesign={config:{base:{/** The interval in milliseconds for checking if the grid is resizing.
             * This setting is in use only if the resizeMonitoring setting is set to true.
             * @type number
             * @default 500
             * @example sample <!-- grid, grid.responsiveDesign -->
             * <p>Change browser window size in order to fire resize event.</p>
             * <table id="grid"></table>
             * <script>
             *     var grid = $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         responsive: true,
             *         resizeCheckInterval: 2000, //check if the grid is resized on each 2 second
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             *     grid.on('resize', function () {
             *         alert('resize is fired.');
             *     });
             * </script>
             */resizeCheckInterval:500,/** This setting enables responsive behaviour of the grid where some column are invisible when there is not enough space on the screen for them.
             * The visibility of the columns in this mode is driven by the column minWidth and priority settings.
             * The columns without priority setting are always visible and can't hide in small screen resolutions.
             * @type boolean
             * @default false
             * @example sample <!-- grid, grid.responsiveDesign -->
             * <p>Resize browser window in order to see his responsive behaviour.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         responsive: true,
             *         columns: [
             *             { field: 'Name' },
             *             { field: 'PlaceOfBirth', minWidth: 340, priority: 1 },
             *             { field: 'DateOfBirth', minWidth: 360, priority: 2, type: 'date' }
             *         ]
             *     });
             * </script>
             */responsive:false,/** Automatically adds hidden columns to the details section of the row.
             * This setting works only if the responsive setting is set to true and the detailTemplate is set.
             * You need to set priority and minWidth on the colums, that needs to be hidden in smaller screens.
             * @type boolean
             * @default false
             * @example Remote.Data.Source <!-- bootstrap, grid, grid.expandCollapseRows, grid.responsiveDesign -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         detailTemplate: '<div class="row"></div>',
             *         responsive: true,
             *         showHiddenColumnsAsDetails: true,
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', minWidth: 320, priority: 1 },
             *             { field: 'PlaceOfBirth', minWidth: 320, priority: 2 }
             *         ]
             *     });
             * </script>
             * @example Local.Data.Source <!-- bootstrap, grid, grid.expandCollapseRows, grid.responsiveDesign -->
             * <table id="grid"></table>
             * <script>             
             *     var data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
             *     ];
             *     $('#grid').grid({
             *         dataSource: data,
             *         detailTemplate: '<div class="row"></div>',
             *         responsive: true,
             *         showHiddenColumnsAsDetails: true,
             *         uiLibrary: 'bootstrap',
             *         columns: [
             *             { field: 'ID', width: 34 },
             *             { field: 'Name', minWidth: 320, priority: 1 },
             *             { field: 'PlaceOfBirth', minWidth: 320, priority: 2 }
             *         ],
             *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
             *     });
             * </script>
             */showHiddenColumnsAsDetails:false,defaultColumn:{/** The priority of the column compared to other columns in the grid.
                 * The columns are hiding based on the priorities.
                 * This setting is working only when the responsive setting is set to true.
                 * @alias column.priority
                 * @type number
                 * @default undefined
                 * @example sample <!-- grid, grid.responsiveDesign -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         responsive: true,
                 *         columns: [
                 *             { field: 'Name' },
                 *             { field: 'PlaceOfBirth', priority: 1 },
                 *             { field: 'DateOfBirth', priority: 2, type: 'date' }
                 *         ]
                 *     });
                 * </script>
                 */priority:undefined,/** The minimum width of the column.
                 * The column is getting invisible when there is not enough space in the grid for this minimum width.
                 * This setting is working only when the responsive setting is set to true and the column priority setting is set.
                 * @alias column.minWidth
                 * @type number
                 * @default 250
                 * @example sample <!-- grid, grid.responsiveDesign -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         responsive: true,
                 *         columns: [
                 *             { field: 'Name' },
                 *             { field: 'PlaceOfBirth', minWidth: 240, priority: 1 },
                 *             { field: 'DateOfBirth', minWidth: 260, priority: 2, type: 'date' }
                 *         ]
                 *     });
                 * </script>
                 */minWidth:250},style:{rowDetailItem:''}},bootstrap:{style:{rowDetailItem:'col-lg-4'}}},'private':{orderColumns:function orderColumns(config){var result=[];if(config.columns&&config.columns.length){for(i=0;i<config.columns.length;i++){result.push({position:i,field:config.columns[i].field,minWidth:config.columns[i].width||config.columns[i].minWidth||config.defaultColumn.minWidth,priority:config.columns[i].priority||0});}result.sort(function(a,b){var result=0;if(a.priority<b.priority){result=-1;}else if(a.priority>b.priority){result=1;}return result;});}return result;},updateDetails:function updateDetails($grid){var rows,data,i,j,$row,details,$placeholder,column,tmp;rows=$grid.find('tbody > tr[data-role="row"]');data=$grid.data();for(i=0;i<rows.length;i++){$row=$(rows[i]);details=$row.data('details');for(j=0;j<data.columns.length;j++){column=data.columns[j];$placeholder=details&&details.find('div[data-id="'+column.field+'"]');if(data.columns[j].hidden){tmp='<b>'+(column.title||column.field)+'</b>: {'+column.field+'}';if(!$placeholder||!$placeholder.length){$placeholder=$('<div data-id="'+column.field+'"/>').html(tmp);$placeholder.addClass(data.style.rowDetailItem);if(!details||!details.length){details=$('<div class="row"/>');}details.append($placeholder);}else{$placeholder.empty().html(tmp);}}else if($placeholder&&$placeholder.length){$placeholder.remove();}}$grid.updateDetails($row);}}},'public':{oldWidth:undefined,resizeCheckIntervalId:undefined,/**
         * Make the grid responsive based on the available space.
         * Show column if the space for the grid is expanding and hide columns when the space for the grid is decreasing.
         * @method
         * @return grid object
         * @example sample <!-- grid -->
         * <button onclick="grid.makeResponsive()" class="gj-button-md">Make Responsive</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         responsive: false,
         *         columns: [
         *             { field: 'ID', width: 56 },
         *             { field: 'Name', minWidth: 320, priority: 1 },
         *             { field: 'PlaceOfBirth', minWidth: 320, priority: 2 }
         *         ]
         *     });
         * </script>
         */makeResponsive:function makeResponsive(){var i,$column,extraWidth=0,config=this.data(),columns=gj.grid.plugins.responsiveDesign["private"].orderColumns(config);//calculate extra width
for(i=0;i<columns.length;i++){$column=this.find('thead>tr>th:eq('+columns[i].position+')');if($column.is(':visible')&&columns[i].minWidth<$column.width()){extraWidth+=$column.width()-columns[i].minWidth;}}//show columns
if(extraWidth){for(i=0;i<columns.length;i++){$column=this.find('thead>tr>th:eq('+columns[i].position+')');if(!$column.is(':visible')&&columns[i].minWidth<=extraWidth){this.showColumn(columns[i].field);extraWidth-=$column.width();}}}//hide columns
for(i=columns.length-1;i>=0;i--){$column=this.find('thead>tr>th:eq('+columns[i].position+')');if($column.is(':visible')&&columns[i].priority&&columns[i].minWidth>$column.outerWidth()){this.hideColumn(columns[i].field);}}return this;}},'events':{/**
         * Event fires when the grid width is changed. The "responsive" configuration setting should be set to true in order this event to fire.
         *
         * @event resize
         * @param {object} e - event data
         * @param {number} newWidth - The new width
         * @param {number} oldWidth - The old width
         * @example sample <!-- grid, grid.responsiveDesign -->
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         responsive: true,
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         *     grid.on('resize', function (e, newWidth, oldWidth) {
         *         alert('resize is fired.');
         *     });
         * </script>
         */resize:function resize($grid,newWidth,oldWidth){$grid.triggerHandler('resize',[newWidth,oldWidth]);}},'configure':function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.responsiveDesign["public"]);if(fullConfig.responsive){$grid.on('initialized',function(){$grid.makeResponsive();$grid.oldWidth=$grid.width();$grid.resizeCheckIntervalId=setInterval(function(){var newWidth=$grid.width();if(newWidth!==$grid.oldWidth){gj.grid.plugins.responsiveDesign.events.resize($grid,newWidth,$grid.oldWidth);}$grid.oldWidth=newWidth;},fullConfig.resizeCheckInterval);});$grid.on('destroy',function(){if($grid.resizeCheckIntervalId){clearInterval($grid.resizeCheckIntervalId);}});$grid.on('resize',function(){$grid.makeResponsive();});}if(fullConfig.showHiddenColumnsAsDetails&&gj.grid.plugins.expandCollapseRows){$grid.on('dataBound',function(){gj.grid.plugins.responsiveDesign["private"].updateDetails($grid);});$grid.on('columnHide',function(){gj.grid.plugins.responsiveDesign["private"].updateDetails($grid);});$grid.on('columnShow',function(){gj.grid.plugins.responsiveDesign["private"].updateDetails($grid);});$grid.on('rowDataBound',function(){gj.grid.plugins.responsiveDesign["private"].updateDetails($grid);});}}};/** 
 * @widget Grid 
 * @plugin Toolbar
 */gj.grid.plugins.toolbar={config:{base:{/** Template for the content in the toolbar. Appears in a separate row on top of the grid.
              * @type string
              * @default undefined
              * @example sample <!-- bootstrap, grid, grid.toolbar, grid.pagination -->
              * <table id="grid"></table>
              * <script>
              *     var grid = $('#grid').grid({
              *         dataSource: '/Players/Get',
              *         uiLibrary: 'bootstrap',
              *         toolbarTemplate: '<div class="row"><div class="col-xs-8" style="line-height:34px"><span data-role="title">Grid Title</span></div><div class="col-xs-4 text-right"><button onclick="grid.reload()" class="btn btn-default">click here to refresh</button></div></div>',
              *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
              *         pager: { limit: 5 }
              *     });
              * </script>
              */toolbarTemplate:undefined,/** The title of the grid. Appears in a separate row on top of the grid.
              * @type string
              * @default undefined
              * @example Material.Design <!-- grid, grid.toolbar -->
              * <table id="grid"></table>
              * <script>
              *     $('#grid').grid({
              *         dataSource: '/Players/Get',
              *         title: 'Players',
              *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
              *     });
              * </script>
              * @example Bootstrap.3 <!-- bootstrap, grid, grid.toolbar -->
              * <table id="grid"></table>
              * <script>
              *     $('#grid').grid({
              *         dataSource: '/Players/Get',
              *         uiLibrary: 'bootstrap',
              *         title: 'Players',
              *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
              *     });
              * </script>
              * @example Bootstrap.4 <!-- bootstrap4, grid, grid.toolbar -->
              * <table id="grid"></table>
              * <script>
              *     $('#grid').grid({
              *         dataSource: '/Players/Get',
              *         uiLibrary: 'bootstrap4',
              *         title: 'Players',
              *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
              *     });
              * </script>
              */title:undefined,style:{toolbar:'gj-grid-md-toolbar'}},bootstrap:{style:{toolbar:'gj-grid-bootstrap-toolbar'}},bootstrap4:{style:{toolbar:'gj-grid-bootstrap-4-toolbar'}}},"private":{init:function init($grid){var data,$toolbar,$title;data=$grid.data();$toolbar=$grid.prev('div[data-role="toolbar"]');if(typeof data.toolbarTemplate!=='undefined'||typeof data.title!=='undefined'||$toolbar.length>0){if($toolbar.length===0){$toolbar=$('<div data-role="toolbar"></div>');$grid.before($toolbar);}$toolbar.addClass(data.style.toolbar);if($toolbar.children().length===0&&data.toolbarTemplate){$toolbar.append(data.toolbarTemplate);}$title=$toolbar.find('[data-role="title"]');if($title.length===0){$title=$('<div data-role="title"/>');$toolbar.prepend($title);}if(data.title){$title.text(data.title);}if(data.minWidth){$toolbar.css('min-width',data.minWidth);}}}},"public":{/**
         * Get or set grid title.
         * @additionalinfo When you pass value in the text parameter this value with be in use for the new title of the grid and the method will return grid object.<br/>
         * When you don't pass value in the text parameter, then the method will return the text of the current grid title.<br/>
         * You can use this method in a combination with toolbarTemplate only if the title is wrapped in element with data-role attribute that equals to "title".<br/>
         * @method
         * @param {object} text - The text of the new grid title.
         * @return string or grid object
         * @example text <!-- grid, grid.toolbar -->
         * <button onclick="grid.title('New Title')" class="gj-button-md">Set New Title</button>
         * <button onclick="alert(grid.title())" class="gj-button-md">Get Title</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         title: 'Initial Grid Title',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         * @example html.template <!-- grid, grid.toolbar -->
         * <button onclick="grid.title('New Title')" class="gj-button-md">Set New Title</button>
         * <button onclick="alert(grid.title())" class="gj-button-md">Get Title</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         toolbarTemplate: '<div data-role="title">Initial Grid Title</div>',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
         *     });
         * </script>
         */title:function title(text){var $titleEl=this.parent().find('div[data-role="toolbar"] [data-role="title"]');if(typeof text!=='undefined'){$titleEl.text(text);return this;}else{return $titleEl.text();}}},configure:function configure($grid){$.extend(true,$grid,gj.grid.plugins.toolbar["public"]);$grid.on('initialized',function(){gj.grid.plugins.toolbar["private"].init($grid);});$grid.on('destroying',function(){$grid.prev('[data-role="toolbar"]').remove();});}};/** 
 * @widget Grid 
 * @plugin Resizable Columns
 */gj.grid.plugins.resizableColumns={config:{base:{/** If set to true, users can resize columns by dragging the edges (resize handles) of their header cells.
             * @type boolean
             * @default false
             * @example Material.Design <!-- grid, draggable -->
             * <table id="grid"></table>
             * <script>
             *     var grid = $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         resizableColumns: true,
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap <!-- bootstrap, grid, draggable -->
             * <table id="grid"></table>
             * <script>
             *     var grid = $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         resizableColumns: true,
             *         uiLibrary: 'bootstrap',
             *         columns: [ { field: 'ID', width: 34 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, grid, draggable -->
             * <table id="grid"></table>
             * <script>
             *     var grid = $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         resizableColumns: true,
             *         uiLibrary: 'bootstrap4',
             *         columns: [ { field: 'ID', width: 42 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap.4.FixedHeader <!-- bootstrap4, grid, draggable -->
             * <table id="grid" width="900"></table>
             * <script>
             *     var grid = $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         resizableColumns: true,
             *         fixedHeader: true,
             *         uiLibrary: 'bootstrap4',
             *         columns: [ { field: 'ID', width: 42 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             */resizableColumns:false}},"private":{init:function init($grid,config){var $columns,$column,i,$wrapper,$resizer,marginRight;$columns=$grid.find('thead tr[data-role="caption"] th');if($columns.length){for(i=0;i<$columns.length-1;i++){$column=$($columns[i]);$wrapper=$('<div class="gj-grid-column-resizer-wrapper" />');marginRight=parseInt($column.css('padding-right'),10)+3;$resizer=$('<span class="gj-grid-column-resizer" />').css('margin-right','-'+marginRight+'px');$resizer.draggable({start:function start(){$grid.addClass('gj-unselectable');$grid.addClass('gj-grid-resize-cursor');},stop:function stop(){$grid.removeClass('gj-unselectable');$grid.removeClass('gj-grid-resize-cursor');this.style.removeProperty('top');this.style.removeProperty('left');this.style.removeProperty('position');},drag:gj.grid.plugins.resizableColumns["private"].createResizeHandle($grid,$column,config.columns[i])});$column.append($wrapper.append($resizer));}for(i=0;i<$columns.length;i++){$column=$($columns[i]);if(!$column.attr('width')){$column.attr('width',$column.outerWidth());}}}},createResizeHandle:function createResizeHandle($grid,$column,column){var data=$grid.data();return function(e,newPosition){var i,index,rows,cell,newWidth,nextWidth,currentWidth=parseInt($column.attr('width'),10),position=gj.core.position(this),offset={top:newPosition.top-position.top,left:newPosition.left-position.left};if(!currentWidth){currentWidth=$column.outerWidth();}if(offset.left){newWidth=currentWidth+offset.left;column.width=newWidth;$column.attr('width',newWidth);index=$column[0].cellIndex;cell=$column[0].parentElement.children[index+1];nextWidth=parseInt($(cell).attr('width'),10)-offset.left;cell.setAttribute('width',nextWidth);if(data.resizableColumns){rows=$grid[0].tBodies[0].children;for(i=0;i<rows.length;i++){rows[i].cells[index].setAttribute('width',newWidth);cell=rows[i].cells[index+1];cell.setAttribute('width',nextWidth);}}}};}},"public":{},configure:function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.resizableColumns["public"]);if(fullConfig.resizableColumns&&gj.draggable){$grid.on('initialized',function(){gj.grid.plugins.resizableColumns["private"].init($grid,fullConfig);});}}};/** 
 * @widget Grid 
 * @plugin Row Reorder
 */gj.grid.plugins.rowReorder={config:{base:{/** If set to true, enable row reordering with drag and drop.
             * @type boolean
             * @default false
             * @example Material.Design <!-- grid, grid.rowReorder, draggable, droppable -->
             * <p>Drag and Drop rows in order to reorder them.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         rowReorder: true,
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap.3 <!-- bootstrap, grid, grid.rowReorder, draggable, droppable -->
             * <p>Drag and Drop rows in order to reorder them.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         rowReorder: true,
             *         uiLibrary: 'bootstrap',
             *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, grid, grid.rowReorder, draggable, droppable -->
             * <p>Drag and Drop rows in order to reorder them.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         rowReorder: true,
             *         uiLibrary: 'bootstrap4',
             *         columns: [ { field: 'ID', width: 42 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             */rowReorder:false,/** If set, enable row reordering only when you try to drag cell from the configured column.
             * Accept only field names of columns.
             * @type string
             * @default undefined
             * @example sample <!-- grid, grid.rowReorder, draggable, droppable -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         rowReorder: true,
             *         rowReorderColumn: 'ID',
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             */rowReorderColumn:undefined,/** If set, update the value in the field for all records. Accept only field names of columns.
             * @type string
             * @default undefined
             * @example Visible.OrderNumber <!-- grid, grid.rowReorder, draggable, droppable -->
             * <table id="grid"></table>
             * <script>
             *     var data = [
             *         { 'ID': 1, 'OrderNumber': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'OrderNumber': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'OrderNumber': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
             *     ];
             *     $('#grid').grid({
             *         dataSource: data,
             *         rowReorder: true,
             *         orderNumberField: 'OrderNumber',
             *         columns: [ { field: 'ID', width: 56 }, { field: 'OrderNumber', width:120 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Hidden.OrderNumber <!-- grid, grid.rowReorder, draggable, droppable -->
             * <button onclick="alert(JSON.stringify(grid.getAll()))" class="gj-button-md">Show Data</button><br/><br/>
             * <table id="grid"></table>
             * <script>
             *     var data = [
             *         { 'ID': 1, 'OrderNumber': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'OrderNumber': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'OrderNumber': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
             *     ],
             *     grid = $('#grid').grid({
             *         dataSource: data,
             *         rowReorder: true,
             *         orderNumberField: 'OrderNumber',
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             */orderNumberField:undefined,style:{targetRowIndicatorTop:'gj-grid-row-reorder-indicator-top',targetRowIndicatorBottom:'gj-grid-row-reorder-indicator-bottom'}}},"private":{init:function init($grid){var i,columnPosition,$row,$rows=$grid.find('tbody tr[data-role="row"]');if($grid.data('rowReorderColumn')){columnPosition=gj.grid.methods.getColumnPosition($grid.data('columns'),$grid.data('rowReorderColumn'));}for(i=0;i<$rows.length;i++){$row=$($rows[i]);if(typeof columnPosition!=='undefined'){$row.find('td:eq('+columnPosition+')').on('mousedown',gj.grid.plugins.rowReorder["private"].createRowMouseDownHandler($grid,$row));}else{$row.on('mousedown',gj.grid.plugins.rowReorder["private"].createRowMouseDownHandler($grid,$row));}}},createRowMouseDownHandler:function createRowMouseDownHandler($grid,$trSource){return function(e){var $dragEl=$grid.clone(),columns=$grid.data('columns'),i,$cells;$grid.addClass('gj-unselectable');$('body').append($dragEl);$dragEl.attr('data-role','draggable-clone').css('cursor','move');$dragEl.children('thead').remove().children('tfoot').remove();$dragEl.find('tbody tr:not([data-position="'+$trSource.data('position')+'"])').remove();$cells=$dragEl.find('tbody tr td');for(i=0;i<$cells.length;i++){if(columns[i].width){$cells[i].setAttribute('width',columns[i].width);}}$dragEl.draggable({stop:gj.grid.plugins.rowReorder["private"].createDragStopHandler($grid,$trSource)});$dragEl.css({position:'absolute',top:$trSource.offset().top,left:$trSource.offset().left,width:$trSource.width(),zIndex:1});if($trSource.attr('data-droppable')==='true'){$trSource.droppable('destroy');}$trSource.siblings('tr[data-role="row"]').each(function(){var $dropEl=$(this);if($dropEl.attr('data-droppable')==='true'){$dropEl.droppable('destroy');}$dropEl.droppable({over:gj.grid.plugins.rowReorder["private"].createDroppableOverHandler($trSource),out:gj.grid.plugins.rowReorder["private"].droppableOut});});$dragEl.trigger('mousedown');};},createDragStopHandler:function createDragStopHandler($grid,$trSource){return function(e,mousePosition){$('table[data-role="draggable-clone"]').draggable('destroy').remove();$grid.removeClass('gj-unselectable');$trSource.siblings('tr[data-role="row"]').each(function(){var $trTarget=$(this),targetPosition=$trTarget.data('position'),sourcePosition=$trSource.data('position'),data=$grid.data(),$rows,$row,i,record,id;if($trTarget.droppable('isOver',mousePosition)){if(targetPosition<sourcePosition){$trTarget.before($trSource);}else{$trTarget.after($trSource);}data.records.splice(targetPosition-1,0,data.records.splice(sourcePosition-1,1)[0]);$rows=$trTarget.parent().find('tr[data-role="row"]');for(i=0;i<$rows.length;i++){$($rows[i]).attr('data-position',i+1);}if(data.orderNumberField){for(i=0;i<data.records.length;i++){data.records[i][data.orderNumberField]=i+1;}for(i=0;i<$rows.length;i++){$row=$($rows[i]);id=gj.grid.methods.getId($row,data.primaryKey,$row.attr('data-position'));record=gj.grid.methods.getByPosition($grid,$row.attr('data-position'));$grid.setCellContent(id,data.orderNumberField,record[data.orderNumberField]);}}}$trTarget.removeClass('gj-grid-top-border');$trTarget.removeClass('gj-grid-bottom-border');$trTarget.droppable('destroy');});};},createDroppableOverHandler:function createDroppableOverHandler($trSource){return function(e){var $trTarget=$(this),targetPosition=$trTarget.data('position'),sourcePosition=$trSource.data('position');if(targetPosition<sourcePosition){$trTarget.addClass('gj-grid-top-border');}else{$trTarget.addClass('gj-grid-bottom-border');}};},droppableOut:function droppableOut(){$(this).removeClass('gj-grid-top-border');$(this).removeClass('gj-grid-bottom-border');}},"public":{},configure:function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.rowReorder["public"]);if(fullConfig.rowReorder&&gj.draggable&&gj.droppable){$grid.on('dataBound',function(){gj.grid.plugins.rowReorder["private"].init($grid);});}}};/** 
 * @widget Grid 
 * @plugin Export
 */gj.grid.plugins["export"]={config:{base:{}},"public":{/**
         * Get grid data in Comma Separated Values (CSV) format.
         * @method
         * @param {boolean} includeAllRecords - include records that are not visible when you are using local dataSource.
         * @return string
         * @example Local.Data <!-- grid, dropdown -->
         * <button onclick="alert(grid.getCSV(true))" class="gj-button-md">Get All</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var data, grid;
         *     data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     grid = $('#grid').grid({
         *         dataSource: data,
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         * </script>
         * @example Remote.Data <!-- grid, dropdown -->
         * <button onclick="alert(grid.getCSV())" class="gj-button-md">Get CSV</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 5 }
         *     });
         * </script>
         */getCSV:function getCSV(includeAllRecords){var i,j,line='',str='',columns=this.data().columns,records=this.getAll(includeAllRecords);if(records.length){for(i=0;i<columns.length;i++){if(gj.grid.plugins["export"]["public"].isColumnApplicable(columns[i])){line+='"'+(columns[i].title||columns[i].field).replace(/<[^>]+>/g,' ')+'",';}}str+=line.slice(0,line.length-1)+'\r\n';for(i=0;i<records.length;i++){line='';for(j=0;j<columns.length;j++){if(gj.grid.plugins["export"]["public"].isColumnApplicable(columns[j])){line+='"'+records[i][columns[j].field]+'",';}}str+=line.slice(0,line.length-1)+'\r\n';}}return str;},/**
         * Download grid data in Comma Separated Values (CSV) format.
         * @method
         * @param {string} filename - name of the generated file.
         * @param {boolean} includeAllRecords - include records that are not visible when you are using local dataSource.
         * @return grid object
         * @example Local.Data <!-- grid, dropdown -->
         * <button onclick="grid.downloadCSV()" class="gj-button-md">Download Only First Page</button>
         * <button onclick="grid.downloadCSV('myfilename.csv', true)" class="gj-button-md">Download All Data</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var data, grid;
         *     data = [
         *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
         *         { 'ID': 2, 'Name': 'Ronaldo Luis Nazario de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
         *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' }
         *     ];
         *     grid = $('#grid').grid({
         *         dataSource: data,
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 2, sizes: [2, 5, 10, 20] }
         *     });
         * </script>
         * @example Remote.Data <!-- grid, dropdown -->
         * <button onclick="grid.downloadCSV('myfilename.csv')" class="gj-button-md">Download CSV</button>
         * <br/><br/>
         * <table id="grid"></table>
         * <script>
         *     var grid = $('#grid').grid({
         *         dataSource: '/Players/Get',
         *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ],
         *         pager: { limit: 5 }
         *     });
         * </script>
         */downloadCSV:function downloadCSV(filename,includeAllRecords){var link=document.createElement('a');document.body.appendChild(link);link.download=filename||'griddata.csv';if(window.navigator.userAgent.indexOf("Edge")>-1){link.href=URL.createObjectURL(new Blob([this.getCSV(includeAllRecords)],{type:'text/csv;charset=utf-8;'}));}else{link.href='data:text/csv;charset=utf-8,'+escape(this.getCSV(includeAllRecords));}link.click();document.body.removeChild(link);return this;},isColumnApplicable:function isColumnApplicable(column){return column.hidden!==true&&!column.role;}},configure:function configure($grid){$.extend(true,$grid,gj.grid.plugins["export"]["public"]);}};/** 
 * @widget Grid 
 * @plugin Column Reorder
 */gj.grid.plugins.columnReorder={config:{base:{/** If set to true, enable column reordering with drag and drop.
             * @type boolean
             * @default false
             * @example Material.Design <!-- grid, draggable, droppable -->
             * <p>Drag and Drop column headers in order to reorder the columns.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         columnReorder: true,
             *         columns: [ { field: 'ID', width: 56 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap <!-- bootstrap, grid, draggable, droppable -->
             * <p>Drag and Drop column headers in order to reorder the columns.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap',
             *         columnReorder: true,
             *         columns: [ { field: 'ID', width: 36 }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, grid, draggable, droppable -->
             * <p>Drag and Drop column headers in order to reorder the columns.</p>
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         uiLibrary: 'bootstrap4',
             *         columnReorder: true,
             *         columns: [ { field: 'ID', width: 48 }, { field: 'Name', sortable: true }, { field: 'PlaceOfBirth', sortable: true } ]
             *     });
             * </script>
             */columnReorder:false,dragReady:false,style:{targetRowIndicatorTop:'gj-grid-row-reorder-indicator-top',targetRowIndicatorBottom:'gj-grid-row-reorder-indicator-bottom'}}},"private":{init:function init($grid){var i,$cell,$cells=$grid.find('thead tr th');for(i=0;i<$cells.length;i++){$cell=$($cells[i]);$cell.on('mousedown',gj.grid.plugins.columnReorder["private"].createMouseDownHandler($grid,$cell));$cell.on('mousemove',gj.grid.plugins.columnReorder["private"].createMouseMoveHandler($grid,$cell));$cell.on('mouseup',gj.grid.plugins.columnReorder["private"].createMouseUpHandler($grid,$cell));}},createMouseDownHandler:function createMouseDownHandler($grid){return function(e){$grid.timeout=setTimeout(function(){$grid.data('dragReady',true);},100);};},createMouseUpHandler:function createMouseUpHandler($grid){return function(e){clearTimeout($grid.timeout);$grid.data('dragReady',false);};},createMouseMoveHandler:function createMouseMoveHandler($grid,$thSource){return function(e){var $dragEl,srcIndex;if($grid.data('dragReady')){$grid.data('dragReady',false);$dragEl=$grid.clone();srcIndex=$thSource.index();$grid.addClass('gj-unselectable');$('body').append($dragEl);$dragEl.attr('data-role','draggable-clone').css('cursor','move');$dragEl.find('thead tr th:eq('+srcIndex+')').siblings().remove();$dragEl.find('tbody tr[data-role != "row"]').remove();$dragEl.find('tbody tr td:nth-child('+(srcIndex+1)+')').siblings().remove();$dragEl.find('tfoot').remove();$dragEl.draggable({stop:gj.grid.plugins.columnReorder["private"].createDragStopHandler($grid,$thSource)});$dragEl.css({position:'absolute',top:$thSource.offset().top,left:$thSource.offset().left,width:$thSource.width(),zIndex:1});if($thSource.attr('data-droppable')==='true'){$thSource.droppable('destroy');}$thSource.siblings('th').each(function(){var $dropEl=$(this);if($dropEl.attr('data-droppable')==='true'){$dropEl.droppable('destroy');}$dropEl.droppable({over:gj.grid.plugins.columnReorder["private"].createDroppableOverHandler($grid,$thSource),out:gj.grid.plugins.columnReorder["private"].droppableOut});});$dragEl.trigger('mousedown');}};},createDragStopHandler:function createDragStopHandler($grid,$thSource){return function(e,mousePosition){$('table[data-role="draggable-clone"]').draggable('destroy').remove();$grid.removeClass('gj-unselectable');$thSource.siblings('th').each(function(){var $thTarget=$(this),data=$grid.data(),targetPosition=gj.grid.methods.getColumnPosition(data.columns,$thTarget.data('field')),sourcePosition=gj.grid.methods.getColumnPosition(data.columns,$thSource.data('field'));$thTarget.removeClass('gj-grid-left-border').removeClass('gj-grid-right-border');$thTarget.closest('table').find('tbody tr[data-role="row"] td:nth-child('+($thTarget.index()+1)+')').removeClass('gj-grid-left-border').removeClass('gj-grid-right-border');if($thTarget.droppable('isOver',mousePosition)){if(targetPosition<sourcePosition){$thTarget.before($thSource);}else{$thTarget.after($thSource);}gj.grid.plugins.columnReorder["private"].moveRowCells($grid,sourcePosition,targetPosition);data.columns.splice(targetPosition,0,data.columns.splice(sourcePosition,1)[0]);}$thTarget.droppable('destroy');});};},moveRowCells:function moveRowCells($grid,sourcePosition,targetPosition){var i,$row,$rows=$grid.find('tbody tr[data-role="row"]');for(i=0;i<$rows.length;i++){$row=$($rows[i]);if(targetPosition<sourcePosition){$row.find('td:eq('+targetPosition+')').before($row.find('td:eq('+sourcePosition+')'));}else{$row.find('td:eq('+targetPosition+')').after($row.find('td:eq('+sourcePosition+')'));}}},createDroppableOverHandler:function createDroppableOverHandler($grid,$thSource){return function(e){var $thTarget=$(this),data=$grid.data(),targetPosition=gj.grid.methods.getColumnPosition(data.columns,$thTarget.data('field')),sourcePosition=gj.grid.methods.getColumnPosition(data.columns,$thSource.data('field'));if(targetPosition<sourcePosition){$thTarget.addClass('gj-grid-left-border');$grid.find('tbody tr[data-role="row"] td:nth-child('+($thTarget.index()+1)+')').addClass('gj-grid-left-border');}else{$thTarget.addClass('gj-grid-right-border');$grid.find('tbody tr[data-role="row"] td:nth-child('+($thTarget.index()+1)+')').addClass('gj-grid-right-border');}};},droppableOut:function droppableOut(){var $thTarget=$(this);$thTarget.removeClass('gj-grid-left-border').removeClass('gj-grid-right-border');$thTarget.closest('table').find('tbody tr[data-role="row"] td:nth-child('+($thTarget.index()+1)+')').removeClass('gj-grid-left-border').removeClass('gj-grid-right-border');}},"public":{},configure:function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.columnReorder["public"]);if(fullConfig.columnReorder){$grid.on('initialized',function(){gj.grid.plugins.columnReorder["private"].init($grid);});}}};/**
 * @widget Grid
 * @plugin Header Filter
 */gj.grid.plugins.headerFilter={config:{base:{defaultColumnSettings:{/** Indicates if the column is sortable. If set to false the header filter is hidden.
                 * @alias column.filterable
                 * @type boolean
                 * @default true
                 * @example Material.Design <!-- grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         headerFilter: true,
                 *         columns: [
                 *             { field: 'ID', width: 56, filterable: false },
                 *             { field: 'Name', filterable: true },
                 *             { field: 'PlaceOfBirth' }
                 *         ]
                 *     });
                 * </script>
                 * @example Bootstrap.3 <!-- bootstrap, grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         headerFilter: true,
                 *         uiLibrary: 'bootstrap',
                 *         columns: [
                 *             { field: 'ID', width: 56, filterable: false },
                 *             { field: 'Name', filterable: true },
                 *             { field: 'PlaceOfBirth' }
                 *         ]
                 *     });
                 * </script>
                 */filterable:true},/** If set to true, add filters for each column
             * @type boolean
             * @default object
             * @example Remote.DataSource <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     $('#grid').grid({
             *         dataSource: '/Players/Get',
             *         headerFilter: true,
             *         columns: [ { field: 'ID', width: 56, filterable: false }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
             *     });
             * </script>
             * @example Local.DataSource <!-- grid -->
             * <table id="grid"></table>
             * <script>
             *     var data = [
             *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria' },
             *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil' },
             *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England' },
             *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany' },
             *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia' },
             *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria' }
             *     ];
             *     $('#grid').grid({
             *         dataSource: data,
             *         headerFilter: true,
             *         columns: [ 
             *             { field: 'ID', width: 56, filterable: false }, 
             *             { field: 'Name' }, 
             *             { field: 'PlaceOfBirth' } 
             *         ],
             *         pager: { limit: 5 }
             *     });
             * </script>
             */headerFilter:{/** Type of the header filter
                 * @alias headerFilter.type
                 * @type (onenterkeypress|onchange)
                 * @default 'onenterkeypress'
                 * @example OnEnterKeyPress <!-- grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         headerFilter: {
                 *             type: 'onenterkeypress'
                 *         },
                 *         columns: [ { field: 'ID', width: 56, filterable: false }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
                 *     });
                 * </script>
                 * @example OnChange <!-- grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         dataSource: '/Players/Get',
                 *         headerFilter: {
                 *             type: 'onchange'
                 *         },
                 *         columns: [ { field: 'ID', width: 56, filterable: false }, { field: 'Name' }, { field: 'PlaceOfBirth' } ]
                 *     });
                 * </script>
                 */type:'onenterkeypress'}}},"private":{init:function init($grid){var i,$th,$ctrl,data=$grid.data(),$filterTr=$('<tr data-role="filter"/>');for(i=0;i<data.columns.length;i++){$th=$('<th/>');if(data.columns[i].filterable){$ctrl=$('<input data-field="'+data.columns[i].field+'" class="gj-width-full" />');if('onchange'===data.headerFilter.type){$ctrl.on('input propertychange',function(e){gj.grid.plugins.headerFilter["private"].reload($grid,$(this));});}else{$ctrl.on('keypress',function(e){if(e.which==13){gj.grid.plugins.headerFilter["private"].reload($grid,$(this));}});$ctrl.on('blur',function(e){gj.grid.plugins.headerFilter["private"].reload($grid,$(this));});}$th.append($ctrl);}if(data.columns[i].hidden){$th.hide();}$filterTr.append($th);}$grid.children('thead').append($filterTr);},reload:function reload($grid,$ctrl){var params={};params[$ctrl.data('field')]=$ctrl.val();$grid.reload(params);}},"public":{},events:{},configure:function configure($grid,fullConfig,clientConfig){$.extend(true,$grid,gj.grid.plugins.headerFilter["public"]);var data=$grid.data();if(clientConfig.headerFilter){$grid.on('initialized',function(){gj.grid.plugins.headerFilter["private"].init($grid);});}}};/** 
 * @widget Grid 
 * @plugin Grouping
 */gj.grid.plugins.grouping={config:{base:{paramNames:{/** The name of the parameter that is going to send the name of the column for grouping.
                 * The grouping should be enabled in order this parameter to be in use.
                 * @alias paramNames.groupBy
                 * @type string
                 * @default "groupBy"
                 */groupBy:'groupBy',/** The name of the parameter that is going to send the direction for grouping.
                 * The grouping should be enabled in order this parameter to be in use.
                 * @alias paramNames.groupByDirection
                 * @type string
                 * @default "groupByDirection"
                 */groupByDirection:'groupByDirection'},grouping:{/** The name of the field that needs to be in use for grouping.
                  * @type string
                  * @alias grouping.groupBy
                  * @default undefined
                  * @example Local.Data <!-- grid -->
                  * <table id="grid"></table>
                  * <script>
                  *     var grid, data = [
                  *         { 'ID': 1, 'Name': 'Hristo Stoichkov', 'PlaceOfBirth': 'Plovdiv, Bulgaria', CountryName: 'Bulgaria' },
                  *         { 'ID': 2, 'Name': 'Ronaldo Lus Nazrio de Lima', 'PlaceOfBirth': 'Rio de Janeiro, Brazil', CountryName: 'Brazil' },
                  *         { 'ID': 3, 'Name': 'David Platt', 'PlaceOfBirth': 'Chadderton, Lancashire, England', CountryName: 'England' },
                  *         { 'ID': 4, 'Name': 'Manuel Neuer', 'PlaceOfBirth': 'Gelsenkirchen, West Germany', CountryName: 'Germany' },
                  *         { 'ID': 5, 'Name': 'James Rodrguez', 'PlaceOfBirth': 'Ccuta, Colombia', CountryName: 'Colombia' },
                  *         { 'ID': 6, 'Name': 'Dimitar Berbatov', 'PlaceOfBirth': 'Blagoevgrad, Bulgaria', CountryName: 'Bulgaria' }
                  *     ];
                  *     $('#grid').grid({
                  *         dataSource: data,
                  *         grouping: { groupBy: 'CountryName' },
                  *         columns: [ { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ]
                  *     });
                  * </script>
                  * @example Remote.Data <!-- grid -->
                  * <table id="grid"></table>
                  * <script>
                  *     $('#grid').grid({
                  *         dataSource: '/Players/Get',
                  *         grouping: { groupBy: 'CountryName' },
                  *         columns: [ { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ]
                  *     });
                  * </script>
                  * @example Bootstrap.3 <!-- bootstrap, grid -->
                  * <table id="grid"></table>
                  * <script>
                  *     $('#grid').grid({
                  *         dataSource: '/Players/Get',
                  *         uiLibrary: 'bootstrap',
                  *         grouping: { groupBy: 'CountryName' },
                  *         columns: [ { field: 'Name', sortable: true }, { field: 'DateOfBirth', type: 'date' } ]
                  *         detailTemplate: '<div><b>Place Of Birth:</b> {PlaceOfBirth}</div>'
                  *     });
                  * </script>
                  * @example Bootstrap.4 <!-- bootstrap4, fontawesome, grid -->
                  * <table id="grid"></table>
                  * <script>
                  *     $('#grid').grid({
                  *         dataSource: '/Players/Get',
                  *         uiLibrary: 'bootstrap4',
                  *         iconsLibrary: 'fontawesome',
                  *         grouping: { groupBy: 'CountryName' },
                  *         columns: [ { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ]
                  *     });
                  * </script>
                  */groupBy:undefined,direction:'asc'},icons:{/** Expand row icon definition.
                 * @alias icons.expandGroup
                 * @type String
                 * @default '<i class="gj-icon plus" />'
                 * @example Right.Down.Icons <!-- materialicons, grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         primaryKey: 'ID',
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
                 *         grouping: { groupBy: 'CountryName' },
                 *         icons: {
                 *             expandGroup: '<i class="material-icons">keyboard_arrow_right</i>',
                 *             collapseGroup: '<i class="material-icons">keyboard_arrow_down</i>'
                 *         }
                 *     });
                 * </script>
                 */expandGroup:'<i class="gj-icon plus" />',/** Collapse row icon definition.
                 * @alias icons.collapseGroup
                 * @type String
                 * @default '<i class="gj-icon minus" />'
                 * @example Right.Down.Icons <!-- materialicons, grid -->
                 * <table id="grid"></table>
                 * <script>
                 *     $('#grid').grid({
                 *         primaryKey: 'ID',
                 *         dataSource: '/Players/Get',
                 *         columns: [ { field: 'Name', sortable: true }, { field: 'PlaceOfBirth' } ],
                 *         grouping: { groupBy: 'CountryName' },
                 *         icons: {
                 *             expandGroup: '<i class="material-icons">keyboard_arrow_right</i>',
                 *             collapseGroup: '<i class="material-icons">keyboard_arrow_down</i>'
                 *         }
                 *     });
                 * </script>
                 */collapseGroup:'<i class="gj-icon minus" />'}},fontawesome:{icons:{expandGroup:'<i class="fa fa-plus" aria-hidden="true"></i>',collapseGroup:'<i class="fa fa-minus" aria-hidden="true"></i>'}},glyphicons:{icons:{expandGroup:'<span class="glyphicon glyphicon-plus" />',collapseGroup:'<span class="glyphicon glyphicon-minus" />'}}},"private":{init:function init($grid){var previousValue,data=$grid.data();previousValue=undefined;$grid.on('rowDataBound',function(e,$row,id,record){if(previousValue!==record[data.grouping.groupBy]||$row[0].rowIndex===1){var colspan=gj.grid.methods.countVisibleColumns($grid)-1,$groupRow=$('<tr role="group" />'),$expandCollapseCell=$('<td class="gj-text-align-center gj-unselectable gj-cursor-pointer" />');$expandCollapseCell.append('<div data-role="display">'+data.icons.collapseGroup+'</div>');$expandCollapseCell.on('click',gj.grid.plugins.grouping["private"].createExpandCollapseHandler(data));$groupRow.append($expandCollapseCell);$groupRow.append('<td colspan="'+colspan+'"><div data-role="display">'+data.grouping.groupBy+': '+record[data.grouping.groupBy]+'</div></td>');$groupRow.insertBefore($row);previousValue=record[data.grouping.groupBy];}$row.show();});data.params[data.paramNames.groupBy]=data.grouping.groupBy;data.params[data.paramNames.groupByDirection]=data.grouping.direction;},grouping:function grouping($grid,records){var data=$grid.data();records.sort(gj.grid.methods.createDefaultSorter(data.grouping.direction,data.grouping.groupBy));},createExpandCollapseHandler:function createExpandCollapseHandler(data){return function(e){var $cell=$(this),methods=gj.grid.plugins.grouping["private"];if($cell.closest('tr').next(':visible').data('role')==='row'){methods.collapseGroup(data,$cell);}else{methods.expandGroup(data,$cell);}};},collapseGroup:function collapseGroup(data,$cell){var $display=$cell.children('div[data-role="display"]'),$groupRow=$cell.closest('tr');$groupRow.nextUntil('[role="group"]').hide();$display.empty().append(data.icons.expandGroup);},expandGroup:function expandGroup(data,$cell){var $display=$cell.children('div[data-role="display"]'),$groupRow=$cell.closest('tr');$groupRow.nextUntil('[role="group"]').show();$display.empty().append(data.icons.collapseGroup);}},"public":{},configure:function configure($grid){var column,data=$grid.data();$.extend(true,$grid,gj.grid.plugins.grouping["public"]);if(data.grouping&&data.grouping.groupBy){column={title:'',width:data.defaultIconColumnWidth,align:'center',stopPropagation:true,cssClass:'gj-cursor-pointer gj-unselectable'};data.columns=[column].concat(data.columns);$grid.on('initialized',function(){gj.grid.plugins.grouping["private"].init($grid);});$grid.on('dataFiltered',function(e,records){gj.grid.plugins.grouping["private"].grouping($grid,records);});}}};gj.grid.messages['en-us']={First:'First',Previous:'Previous',Next:'Next',Last:'Last',Page:'Page',FirstPageTooltip:'First Page',PreviousPageTooltip:'Previous Page',NextPageTooltip:'Next Page',LastPageTooltip:'Last Page',Refresh:'Refresh',Of:'of',DisplayingRecords:'Displaying records',RowsPerPage:'Rows per page:',Edit:'Edit',Delete:'Delete',Update:'Update',Cancel:'Cancel',NoRecordsFound:'No records found.',Loading:'Loading...'};/* global window alert jQuery gj */ /**
  * @widget Tree
  * @plugin Base
  */gj.tree={plugins:{}};gj.tree.config={base:{params:{},/** When this setting is enabled the content of the tree will be loaded automatically after the creation of the tree.
         * @type boolean
         * @default true
         * @example disabled <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         autoLoad: false
         *     });
         *     tree.reload(); //call .reload() explicitly in order to load the data in the tree
         * </script>
         * @example enabled <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         autoLoad: true
         *     });
         * </script>
         */autoLoad:true,/** The type of the node selection.<br/>
         * If the type is set to multiple the user will be able to select more then one node in the tree.
         * @type (single|multiple)
         * @default single
         * @example Single.Selection <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         selectionType: 'single'
         *     });
         * </script>
         * @example Multiple.Selection <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         selectionType: 'multiple'
         *     });
         * </script>
         */selectionType:'single',/** This setting enable cascade selection and unselection of children
         * @type boolean
         * @default false
         * @example Sample <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         cascadeSelection: true
         *     });
         * </script>
         */cascadeSelection:false,/** The data source of tree.
         * @additionalinfo If set to string, then the tree is going to use this string as a url for ajax requests to the server.<br />
         * If set to object, then the tree is going to use this object as settings for the <a href="http://api.jquery.com/jquery.ajax/" target="_new">jquery ajax</a> function.<br />
         * If set to array, then the tree is going to use the array as data for tree nodes.
         * @type (string|object|array)
         * @default undefined
         * @example Local.DataSource <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: [ { text: 'foo', children: [ { text: 'bar' } ] } ]
         *     });
         * </script>
         * @example Remote.DataSource <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get'
         *     });
         * </script>
         */dataSource:undefined,/** Primary key field name.
         * @type string
         * @default undefined
         * @example defined <!-- tree -->
         * <p>Select a node to see the key.</p>
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         primaryKey: 'id',
         *         dataSource: [ { id: 101, text: 'foo', children: [ { id: 202, text: 'bar' } ] } ],
         *         select: function (e, node, id) {
         *             alert('Your key is ' + id);
         *         }
         *     });
         * </script>
         * @example undefined <!-- tree -->
         * <p>Select a node to see the key.</p>
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: [ { id: 101, text: 'foo', children: [ { id: 202, text: 'bar' } ] } ],
         *         select: function (e, node, id) {
         *             alert('Your key is ' + id);
         *         }
         *     });
         * </script>
         */primaryKey:undefined,/** Text field name.
         * @type string
         * @default 'text'
         * @example sample <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         textField: 'newTextName',
         *         dataSource: [ { newTextName: 'foo', children: [ { newTextName: 'bar' } ] } ]
         *     });
         * </script>
         */textField:'text',/** Children field name.
         * @type string
         * @default 'children'
         * @example Custom.FieldName <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         childrenField: 'myChildrenNode',
         *         dataSource: [ { text: 'foo', myChildrenNode: [ { text: 'bar' } ] } ]
         *     });
         * </script>
         */childrenField:'children',/** The name of the field that indicates if the node has children. Shows expand icon if the node has children.
         * @type string
         * @default 'hasChildren'
         * @example Custom.FieldName <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var continents, countries, states, tree;
         *     continents = [
         *         { id: 1, anyChildren: true, text: 'Asia', type: 'continent' },
         *         { id: 2, anyChildren: true, text: 'North America', type: 'continent' },
         *         { id: 3, anyChildren: false, text: 'South America', type: 'continent' }
         *     ];
         *     countries = [
         *         { id: 1, anyChildren: false, continent: 'Asia', text: 'China', type: 'country' },
         *         { id: 2, anyChildren: false, continent: 'Asia', text: 'Japan', type: 'country' },
         *         { id: 3, anyChildren: true, continent: 'North America', text: 'USA', type: 'country' },
         *         { id: 4, anyChildren: false, continent: 'North America', text: 'Canada', type: 'country' }
         *     ];
         *     states = [
         *         { id: 1, country: 'USA', text: 'California', type: 'state' },
         *         { id: 2, country: 'USA', text: 'Florida', type: 'state' }
         *     ];
         *     tree = $('#tree').tree({
         *         hasChildrenField: 'anyChildren',
         *         dataSource: continents
         *     });
         *     tree.on('expand', function (e, $node, id) {
         *         var i, children, record = tree.getDataById(id);
         *         if (tree.getChildren($node).length === 0) {
         *             if (record.type === 'continent') {
         *                 children = $.grep(countries, function (i) { return i.continent === record.text; });
         *                 for (i = 0; i < children.length; i++) {
         *                     tree.addNode(children[i], $node);
         *                 }
         *             } else if (record.type === 'country') {
         *                 children = $.grep(states, function (i) { return i.country === record.text; });
         *                 for (i = 0; i < children.length; i++) {
         *                     tree.addNode(children[i], $node);
         *                 }
         *             }
         *         }
         *     });
         * </script>
         */hasChildrenField:'hasChildren',/** Image css class field name.
         * @type string
         * @default 'imageCssClass'
         * @example Default.Name <!-- bootstrap, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         uiLibrary: 'bootstrap',
         *         dataSource: [ { text: 'folder', imageCssClass: 'glyphicon glyphicon-folder-close', children: [ { text: 'file', imageCssClass: 'glyphicon glyphicon-file' } ] } ]
         *     });
         * </script>
         * @example Custom.Name <!-- tree  -->
         * <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         imageCssClassField: 'faCssClass',
         *         dataSource: [ { text: 'folder', faCssClass: 'fa fa-folder', children: [ { text: 'file', faCssClass: 'fa fa-file' } ] } ]
         *     });
         * </script>
         */imageCssClassField:'imageCssClass',/** Image url field name.
         * @type string
         * @default 'imageUrl'
         * @example Default.HTML.Field.Name <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: [ { text: 'World', imageUrl: 'http://gijgo.com/content/icons/world-icon.png', children: [ { text: 'USA', imageUrl: 'http://gijgo.com/content/icons/usa-oval-icon.png' } ] } ]
         *     });
         * </script>
         * @example Custom.HTML.Field.Name <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         imageUrlField: 'icon',
         *         dataSource: [ { text: 'World', icon: 'http://gijgo.com/content/icons/world-icon.png', children: [ { text: 'USA', icon: 'http://gijgo.com/content/icons/usa-oval-icon.png' } ] } ]
         *     });
         * </script>
         */imageUrlField:'imageUrl',/** Image html field name.
         * @type string
         * @default 'imageHtml'
         * @example Default.HTML.Field.Name <!-- materialicons, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: [ { text: 'folder', imageHtml: '<i class="material-icons">folder</i>', children: [ { text: 'file', imageHtml: '<i class="material-icons">insert_drive_file</i>' } ] } ]
         *     });
         * </script>
         * @example Custom.HTML.Field.Name <!-- materialicons, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         imageHtmlField: 'icon',
         *         dataSource: [ { text: 'folder', icon: '<i class="material-icons">folder</i>', children: [ { text: 'file', icon: '<i class="material-icons">insert_drive_file</i>' } ] } ]
         *     });
         * </script>
         */imageHtmlField:'imageHtml',/** Disabled field name. Assume that the item is not disabled if not set.
         * @type string
         * @default 'disabled'
         * @example Default.Value <!-- checkbox, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         checkboxes: true,
         *         dataSource: [ { text: 'foo', children: [
         *                 { text: 'bar', disabled: true, children: [ { text: 'sub-bar' } ] },
         *                 { text: 'bar2', disabled: false }
         *             ] }
         *         ]
         *     });
         * </script>
         * @example Custom.Value <!-- checkbox, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         checkboxes: true,
         *         disabledField: 'disabledState',
         *         dataSource: [ { text: 'foo', children: [
         *                 { text: 'bar', disabledState: true, children: [ { text: 'sub-bar' } ] },
         *                 { text: 'bar2', disabledState: false }
         *             ] }
         *         ]
         *     });
         * </script>
         * @example Bootstrap <!-- bootstrap, checkbox, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         uiLibrary: 'bootstrap',
         *         checkboxes: true,
         *         dataSource: [ { text: 'foo', children: [
         *                 { text: 'bar', disabled: true, children: [ { text: 'sub-bar' } ] },
         *                 { text: 'bar2', disabled: false }
         *             ] }
         *         ]
         *     });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, checkbox, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         uiLibrary: 'bootstrap4',
         *         checkboxes: true,
         *         dataSource: [ { text: 'foo', children: [
         *                 { text: 'bar', disabled: true, children: [ { text: 'sub-bar' } ] },
         *                 { text: 'bar2', disabled: false }
         *             ] }
         *         ]
         *     });
         * </script>
         */disabledField:'disabled',/** Width of the tree.
         * @type number
         * @default undefined
         * @example JS.Config <!-- bootstrap, tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap',
         *         border: true
         *     });
         * </script>
         * @example HTML.Config <!-- bootstrap, tree -->
         * <div id="tree" width="500" data-source="/Locations/Get" data-ui-library="bootstrap" data-border="true"></div>
         * <script>
         *     $('#tree').tree();
         * </script>
         */width:undefined,/** When this setting is enabled the content of the tree will be wrapped by borders.
         * @type boolean
         * @default false
         * @example Material.Design.True <!-- checkbox, tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         border: true,
         *         checkboxes: true
         *     });
         * </script>
         * @example Material.Design.False <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         border: false
         *     });
         * </script>
         * @example Bootstrap.3.True <!-- bootstrap, tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap',
         *         border: true
         *     });
         * </script>
         * @example Bootstrap.3.False <!-- bootstrap, tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap',
         *         border: false
         *     });
         * </script>
         * @example Bootstrap.4.True <!-- bootstrap4, tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap4',
         *         border: true
         *     });
         * </script>
         * @example Bootstrap.4.False <!-- bootstrap4, tree -->
         * <div id="tree"></div>
         * <script>
         *     $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap4',
         *         border: false
         *     });
         * </script>
         */border:false,/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- tree, checkbox -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'materialdesign',
         *         checkboxes: true
         *     });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, tree, checkbox -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap',
         *         checkboxes: true
         *     });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, tree, checkbox -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap4',
         *         checkboxes: true
         *     });
         * </script>
         */uiLibrary:'materialdesign',/** The name of the icons library that is going to be in use. Currently we support Material Icons, Font Awesome and Glyphicons.
         * @additionalinfo If you use Bootstrap 3 as uiLibrary, then the iconsLibrary is set to Glyphicons by default.<br/>
         * If you use Material Design as uiLibrary, then the iconsLibrary is set to Material Icons by default.<br/>
         * The css files for Material Icons, Font Awesome or Glyphicons should be manually included to the page where the grid is in use.
         * @type (materialicons|fontawesome|glyphicons)
         * @default 'materialicons'
         * @example Base.Theme.Material.Icons <!-- tree -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         iconsLibrary: 'materialicons'
         *     });
         * </script>
         * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, tree, checkbox -->
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         width: 500,
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome',
         *         checkboxes: true
         *     });
         * </script>
         */iconsLibrary:'materialicons',autoGenId:1,autoGenFieldName:'autoId_b5497cc5-7ef3-49f5-a7dc-4a932e1aee4a',indentation:24,style:{wrapper:'gj-unselectable',list:'gj-list gj-list-md',item:undefined,active:'gj-list-md-active',leafIcon:undefined,border:'gj-tree-md-border'},icons:{/** Expand icon definition.
             * @alias icons.expand
             * @type String
             * @default '<i class="gj-icon chevron-right" />'
             * @example Plus.Minus.Icons <!-- materialicons, tree -->
             * <div id="tree"></div>
             * <script>
             *     var tree = $('#tree').tree({
             *         dataSource: '/Locations/Get',
             *         icons: { 
             *             expand: '<i class="material-icons">add</i>',
             *             collapse: '<i class="material-icons">remove</i>'
             *         }
             *     });
             * </script>
             */expand:'<i class="gj-icon chevron-right" />',/** Collapse icon definition.
             * @alias icons.collapse
             * @type String
             * @default '<i class="gj-icon chevron-down" />'
             * @example Plus.Minus.Icons <!-- materialicons, tree -->
             * <div id="tree"></div>
             * <script>
             *     var tree = $('#tree').tree({
             *         dataSource: '/Locations/Get',
             *         icons: { 
             *             expand: '<i class="material-icons">add</i>',
             *             collapse: '<i class="material-icons">remove</i>'
             *         }
             *     });
             * </script>
             */collapse:'<i class="gj-icon chevron-down" />'}},bootstrap:{style:{wrapper:'gj-unselectable gj-tree-bootstrap-3',list:'gj-list gj-list-bootstrap list-group',item:'list-group-item',active:'active',border:'gj-tree-bootstrap-border'},iconsLibrary:'glyphicons'},bootstrap4:{style:{wrapper:'gj-unselectable gj-tree-bootstrap-4',list:'gj-list gj-list-bootstrap',item:'list-group-item',active:'active',border:'gj-tree-bootstrap-border'},icons:{expand:'<i class="gj-icon plus" />',collapse:'<i class="gj-icon minus" />'}},materialicons:{style:{expander:'gj-tree-material-icons-expander'}},fontawesome:{style:{expander:'gj-tree-font-awesome-expander'},icons:{expand:'<i class="fa fa-plus" aria-hidden="true"></i>',collapse:'<i class="fa fa-minus" aria-hidden="true"></i>'}},glyphicons:{style:{expander:'gj-tree-glyphicons-expander'},icons:{expand:'<span class="glyphicon glyphicon-plus" />',collapse:'<span class="glyphicon glyphicon-minus" />'}}};/**
  * @widget Tree
  * @plugin Base
  */gj.tree.events={/**
     * Event fires when the tree is initialized
     * @event initialized
     * @param {object} e - event data
     * @example Event.Sample <!-- tree -->
     * <button id="reload" class="gj-button-md">Reload</button>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         initialized: function (e) {
     *             alert('initialized is fired.');
     *         }
     *     });
     *     $('#reload').on('click', function() { 
     *         tree.reload(); 
     *     });
     * </script>
     */initialized:function initialized($tree){$tree.triggerHandler('initialized');},/**
     * Event fired before data binding takes place.
     * @event dataBinding
     * @param {object} e - event data
     * @example Event.Sample <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         dataBinding: function (e) {
     *             alert('dataBinding is fired.');
     *         }
     *     });
     * </script>
     */dataBinding:function dataBinding($tree){$tree.triggerHandler('dataBinding');},/**
     * Event fires after the loading of the data in the tree.
     * @event dataBound
     * @param {object} e - event data
     * @example Event.Sample <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         dataBound: function (e) {
     *             alert('dataBound is fired.');
     *         }
     *     });
     * </script>
     */dataBound:function dataBound($tree){$tree.triggerHandler('dataBound');},/**
     * Event fires after selection of tree node.
     * @event select
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @param {string} id - the id of the record
     * @example Event.Sample <!-- tree -->
     * <p>Select tree node in order to fire the event.</p>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     tree.on('select', function (e, node, id) {
     *         alert('select is fired for node with id=' + id);
     *     });
     * </script>
     */select:function select($tree,$node,id){return $tree.triggerHandler('select',[$node,id]);},/**
     * Event fires on un selection of tree node
     * @event unselect
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @param {string} id - the id of the record
     * @example Event.Sample <!-- tree -->
     * <p>Select/Unselect tree node in order to fire the event.</p>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     tree.on('unselect', function (e, node, id) {
     *         alert('unselect is fired for node with id=' + id);
     *     });
     * </script>
     */unselect:function unselect($tree,$node,id){return $tree.triggerHandler('unselect',[$node,id]);},/**
     * Event fires before node expand.
     * @event expand
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @param {string} id - the id of the record
     * @example Event.Sample <!-- tree -->
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     tree.on('expand', function (e, node, id) {
     *         alert('expand is fired.');
     *     });
     * </script>
     */expand:function expand($tree,$node,id){return $tree.triggerHandler('expand',[$node,id]);},/**
     * Event fires before node collapse.
     * @event collapse
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @param {string} id - the id of the record
     * @example Event.Sample <!-- tree -->
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     tree.on('collapse', function (e, node, id) {
     *         alert('collapse is fired.');
     *     });
     * </script>
     */collapse:function collapse($tree,$node,id){return $tree.triggerHandler('collapse',[$node,id]);},/**
     * Event fires on enable of tree node.
     * @event enable
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @example Event.Sample <!-- tree -->
     * <button onclick="tree.enable(northAmerica, false)" class="gj-button-md">Enable North America</button>
     * <button onclick="tree.disable(northAmerica, false)" class="gj-button-md">Disable North America</button>
     * <br/><br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         primaryKey: 'ID',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         }
     *     });
     *     tree.on('enable', function (e, node) {
     *         alert(node.text() + ' is enabled.');
     *     });
     * </script>
     */enable:function enable($tree,$node){return $tree.triggerHandler('enable',[$node]);},/**
     * Event fires on disable of tree node.
     * @event disable
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @example Event.Sample <!-- tree -->
     * <button onclick="tree.enable(northAmerica, false)" class="gj-button-md">Enable North America</button>
     * <button onclick="tree.disable(northAmerica, false)" class="gj-button-md">Disable North America</button>
     * <br/><br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         primaryKey: 'ID',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         }
     *     });
     *     tree.on('disable', function (e, node) {
     *         alert(node.text() + ' is disabled.');
     *     });
     * </script>
     */disable:function disable($tree,$node){return $tree.triggerHandler('disable',[$node]);},/**
     * Event fires before tree destroy
     * @event destroying
     * @param {object} e - event data
     * @example Event.Sample <!-- tree -->
     * <button onclick="tree.destroy()" class="gj-button-md">Destroy</button>
     * <br/><br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     tree.on('destroying', function (e) {
     *         alert('destroying is fired.');
     *     });
     * </script>
     */destroying:function destroying($tree){return $tree.triggerHandler('destroying');},/**
     * Event fires when the data is bound to node.
     * @event nodeDataBound
     * @param {object} e - event data
     * @param {object} node - the node as jquery object
     * @param {string} id - the id of the record
     * @param {object} record - the data of the node record
     * @example Event.Sample <!-- tree -->
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     tree.on('nodeDataBound', function (e, node, id, record) {
     *         if ((parseInt(id, 10) % 2) === 0) {
     *             node.css('background-color', 'red');
     *         }
     *     });
     * </script>
     */nodeDataBound:function nodeDataBound($tree,$node,id,record){return $tree.triggerHandler('nodeDataBound',[$node,id,record]);}/*global gj $*/};gj.tree.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'tree');gj.tree.methods.initialize.call(this);if(this.data('autoLoad')){this.reload();}return this;},initialize:function initialize(){var data=this.data(),$root=$('<ul class="'+data.style.list+'"/>');this.empty().addClass(data.style.wrapper).append($root);if(data.width){this.width(data.width);}if(data.border){this.addClass(data.style.border);}gj.tree.events.initialized(this);},useHtmlDataSource:function useHtmlDataSource($tree,data){data.dataSource=[];},render:function render($tree,response){var data;if(response){if(typeof response==='string'&&JSON){response=JSON.parse(response);}data=$tree.data();data.records=response;if(!data.primaryKey){gj.tree.methods.genAutoId(data,data.records);}gj.tree.methods.loadData($tree);}return $tree;},filter:function filter($tree){return $tree.data().dataSource;},genAutoId:function genAutoId(data,records){var i;for(i=0;i<records.length;i++){records[i][data.autoGenFieldName]=data.autoGenId++;if(records[i][data.childrenField]&&records[i][data.childrenField].length){gj.tree.methods.genAutoId(data,records[i][data.childrenField]);}}},loadData:function loadData($tree){var i,records=$tree.data('records'),$root=$tree.children('ul');gj.tree.events.dataBinding($tree);$root.off().empty();for(i=0;i<records.length;i++){gj.tree.methods.appendNode($tree,$root,records[i],1);}gj.tree.events.dataBound($tree);},appendNode:function appendNode($tree,$parent,nodeData,level,position){var i,$node,$newParent,$span,$img,data=$tree.data(),id=data.primaryKey?nodeData[data.primaryKey]:nodeData[data.autoGenFieldName];$node=$('<li data-id="'+id+'" data-role="node" />').addClass(data.style.item),$wrapper=$('<div data-role="wrapper" />'),$expander=$('<span data-role="expander" data-mode="close"></span>').addClass(data.style.expander),$display=$('<span data-role="display">'+nodeData[data.textField]+'</span>'),hasChildren=typeof nodeData[data.hasChildrenField]!=='undefined'&&nodeData[data.hasChildrenField].toString().toLowerCase()==='true',disabled=typeof nodeData[data.disabledField]!=='undefined'&&nodeData[data.disabledField].toString().toLowerCase()==='true';if(data.indentation){$wrapper.append('<span data-role="spacer" style="width: '+data.indentation*(level-1)+'px;"></span>');}if(disabled){gj.tree.methods.disableNode($tree,$node);}else{$expander.on('click',gj.tree.methods.expanderClickHandler($tree));$display.on('click',gj.tree.methods.displayClickHandler($tree));}$wrapper.append($expander);$wrapper.append($display);$node.append($wrapper);if(position){$parent.find('li:eq('+(position-1)+')').before($node);}else{$parent.append($node);}if(data.imageCssClassField&&nodeData[data.imageCssClassField]){$span=$('<span data-role="image"><span class="'+nodeData[data.imageCssClassField]+'"></span></span>');$span.insertBefore($display);}else if(data.imageUrlField&&nodeData[data.imageUrlField]){$span=$('<span data-role="image"></span>');$span.insertBefore($display);$img=$('<img src="'+nodeData[data.imageUrlField]+'"></img>');$img.attr('width',$span.width()).attr('height',$span.height());$span.append($img);}else if(data.imageHtmlField&&nodeData[data.imageHtmlField]){$span=$('<span data-role="image">'+nodeData[data.imageHtmlField]+'</span>');$span.insertBefore($display);}if(nodeData[data.childrenField]&&nodeData[data.childrenField].length||hasChildren){$expander.empty().append(data.icons.expand);$newParent=$('<ul />').addClass(data.style.list).addClass('gj-hidden');$node.append($newParent);if(nodeData[data.childrenField]&&nodeData[data.childrenField].length){for(i=0;i<nodeData[data.childrenField].length;i++){gj.tree.methods.appendNode($tree,$newParent,nodeData[data.childrenField][i],level+1);}}}else{data.style.leafIcon?$expander.addClass(data.style.leafIcon):$expander.html('&nbsp;');}gj.tree.events.nodeDataBound($tree,$node,nodeData.id,nodeData);},expanderClickHandler:function expanderClickHandler($tree){return function(e){var $expander=$(this),$node=$expander.closest('li');if($expander.attr('data-mode')==='close'){$tree.expand($node);}else{$tree.collapse($node);}};},expand:function expand($tree,$node,cascade){var $children,i,$expander=$node.find('>[data-role="wrapper"]>[data-role="expander"]'),data=$tree.data(),id=$node.attr('data-id'),$list=$node.children('ul');if(gj.tree.events.expand($tree,$node,id)!==false&&$list&&$list.length){$list.show();$expander.attr('data-mode','open');$expander.empty().append(data.icons.collapse);if(cascade){$children=$node.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.expand($tree,$($children[i]),cascade);}}}return $tree;},collapse:function collapse($tree,$node,cascade){var $children,i,$expander=$node.find('>[data-role="wrapper"]>[data-role="expander"]'),data=$tree.data(),id=$node.attr('data-id'),$list=$node.children('ul');if(gj.tree.events.collapse($tree,$node,id)!==false&&$list&&$list.length){$list.hide();$expander.attr('data-mode','close');$expander.empty().append(data.icons.expand);if(cascade){$children=$node.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.collapse($tree,$($children[i]),cascade);}}}return $tree;},expandAll:function expandAll($tree){var i,$nodes=$tree.find('ul>li');for(i=0;i<$nodes.length;i++){gj.tree.methods.expand($tree,$($nodes[i]),true);}return $tree;},collapseAll:function collapseAll($tree){var i,$nodes=$tree.find('ul>li');for(i=0;i<$nodes.length;i++){gj.tree.methods.collapse($tree,$($nodes[i]),true);}return $tree;},displayClickHandler:function displayClickHandler($tree){return function(e){var $display=$(this),$node=$display.closest('li'),cascade=$tree.data().cascadeSelection;if($node.attr('data-selected')==='true'){gj.tree.methods.unselect($tree,$node,cascade);}else{if($tree.data('selectionType')==='single'){gj.tree.methods.unselectAll($tree);}gj.tree.methods.select($tree,$node,cascade);}};},selectAll:function selectAll($tree){var i,$nodes=$tree.find('ul>li');for(i=0;i<$nodes.length;i++){gj.tree.methods.select($tree,$($nodes[i]),true);}return $tree;},select:function select($tree,$node,cascade){var i,$children,data=$tree.data();if($node.attr('data-selected')!=='true'&&gj.tree.events.select($tree,$node,$node.attr('data-id'))!==false){$node.addClass(data.style.active).attr('data-selected','true');if(cascade){$children=$node.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.select($tree,$($children[i]),cascade);}}}},unselectAll:function unselectAll($tree){var i,$nodes=$tree.find('ul>li');for(i=0;i<$nodes.length;i++){gj.tree.methods.unselect($tree,$($nodes[i]),true);}return $tree;},unselect:function unselect($tree,$node,cascade){var i,$children,data=$tree.data();if($node.attr('data-selected')==='true'&&gj.tree.events.unselect($tree,$node,$node.attr('data-id'))!==false){$node.removeClass($tree.data().style.active).removeAttr('data-selected');if(cascade){$children=$node.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.unselect($tree,$($children[i]),cascade);}}}},getSelections:function getSelections($list){var i,$node,children,result=[],$nodes=$list.children('li');if($nodes&&$nodes.length){for(i=0;i<$nodes.length;i++){$node=$($nodes[i]);if($node.attr('data-selected')==='true'){result.push($node.attr('data-id'));}else if($node.has('ul')){children=gj.tree.methods.getSelections($node.children('ul'));if(children.length){result=result.concat(children);}}}}return result;},getDataById:function getDataById($tree,id,records){var i,data=$tree.data(),result=undefined;for(i=0;i<records.length;i++){if(data.primaryKey&&records[i][data.primaryKey]==id){result=records[i];break;}else if(records[i][data.autoGenFieldName]==id){result=records[i];break;}else if(records[i][data.childrenField]&&records[i][data.childrenField].length){result=gj.tree.methods.getDataById($tree,id,records[i][data.childrenField]);if(result){break;}}}return result;},getDataByText:function getDataByText($tree,text,records){var i,id,result=undefined,data=$tree.data();for(i=0;i<records.length;i++){if(text===records[i][data.textField]){result=records[i];break;}else if(records[i][data.childrenField]&&records[i][data.childrenField].length){result=gj.tree.methods.getDataByText($tree,text,records[i][data.childrenField]);if(result){break;}}}return result;},getNodeById:function getNodeById($list,id){var i,$node,$result=undefined,$nodes=$list.children('li');if($nodes&&$nodes.length){for(i=0;i<$nodes.length;i++){$node=$($nodes[i]);if(id==$node.attr('data-id')){$result=$node;break;}else if($node.has('ul')){$result=gj.tree.methods.getNodeById($node.children('ul'),id);if($result){break;}}}}return $result;},getNodeByText:function getNodeByText($list,text){var i,$node,$result=undefined,$nodes=$list.children('li');if($nodes&&$nodes.length){for(i=0;i<$nodes.length;i++){$node=$($nodes[i]);if(text===$node.find('>[data-role="wrapper"]>[data-role="display"]').text()){$result=$node;break;}else if($node.has('ul')){$result=gj.tree.methods.getNodeByText($node.children('ul'),text);if($result){break;}}}}return $result;},addNode:function addNode($tree,nodeData,$parent,position){var level,record,data=$tree.data();if(!$parent||!$parent.length){$parent=$tree.children('ul');$tree.data('records').push(nodeData);}else{if($parent[0].tagName.toLowerCase()==='li'){if($parent.children('ul').length===0){$parent.find('[data-role="expander"]').empty().append(data.icons.collapse);$parent.append($('<ul />').addClass(data.style.list));}$parent=$parent.children('ul');}record=$tree.getDataById($parent.parent().data('id'));if(!record[data.childrenField]){record[data.childrenField]=[];}record[data.childrenField].push(nodeData);}level=$parent.parentsUntil('[data-type="tree"]','ul').length+1;if(!data.primaryKey){gj.tree.methods.genAutoId(data,[nodeData]);}gj.tree.methods.appendNode($tree,$parent,nodeData,level,position);return $tree;},remove:function remove($tree,$node){gj.tree.methods.removeDataById($tree,$node.attr('data-id'),$tree.data('records'));$node.remove();return $tree;},removeDataById:function removeDataById($tree,id,records){var i,data=$tree.data();for(i=0;i<records.length;i++){if(data.primaryKey&&records[i][data.primaryKey]==id){records.splice(i,1);break;}else if(records[i][data.autoGenFieldName]==id){records.splice(i,1);break;}else if(records[i][data.childrenField]&&records[i][data.childrenField].length){gj.tree.methods.removeDataById($tree,id,records[i][data.childrenField]);}}},update:function update($tree,id,newRecord){var data=$tree.data(),$node=$tree.getNodeById(id),oldRecord=$tree.getDataById(id);oldRecord=newRecord;$node.find('>[data-role="wrapper"]>[data-role="display"]').html(newRecord[data.textField]);gj.tree.events.nodeDataBound($tree,$node,id,newRecord);return $tree;},getChildren:function getChildren($tree,$node,cascade){var result=[],i,$children,cascade=typeof cascade==='undefined'?true:cascade;if(cascade){$children=$node.find('ul li');}else{$children=$node.find('>ul>li');}for(i=0;i<$children.length;i++){result.push($($children[i]).data('id'));}return result;},enableAll:function enableAll($tree){var i,$children=$tree.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.enableNode($tree,$($children[i]),true);}return $tree;},enableNode:function enableNode($tree,$node,cascade){var i,$children,$expander=$node.find('>[data-role="wrapper"]>[data-role="expander"]'),$display=$node.find('>[data-role="wrapper"]>[data-role="display"]'),cascade=typeof cascade==='undefined'?true:cascade;$node.removeClass('disabled');$expander.on('click',gj.tree.methods.expanderClickHandler($tree));$display.on('click',gj.tree.methods.displayClickHandler($tree));gj.tree.events.enable($tree,$node);if(cascade){$children=$node.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.enableNode($tree,$($children[i]),cascade);}}},disableAll:function disableAll($tree){var i,$children=$tree.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.disableNode($tree,$($children[i]),true);}return $tree;},disableNode:function disableNode($tree,$node,cascade){var i,$children,$expander=$node.find('>[data-role="wrapper"]>[data-role="expander"]'),$display=$node.find('>[data-role="wrapper"]>[data-role="display"]'),cascade=typeof cascade==='undefined'?true:cascade;$node.addClass('disabled');$expander.off('click');$display.off('click');gj.tree.events.disable($tree,$node);if(cascade){$children=$node.find('ul>li');for(i=0;i<$children.length;i++){gj.tree.methods.disableNode($tree,$($children[i]),cascade);}}},destroy:function destroy($tree){var data=$tree.data();if(data){gj.tree.events.destroying($tree);$tree.xhr&&$tree.xhr.abort();$tree.off();$tree.removeData();$tree.removeAttr('data-type');$tree.removeClass().empty();}return $tree;},pathFinder:function pathFinder(data,list,id,parents){var i,result=false;for(i=0;i<list.length;i++){if(list[i].id==id){result=true;break;}else if(gj.tree.methods.pathFinder(data,list[i][data.childrenField],id,parents)){parents.push(list[i].data[data.textField]);result=true;break;}}return result;}/**
  * @widget Tree
  * @plugin Base
  */};gj.tree.widget=function($element,jsConfig){var self=this,methods=gj.tree.methods;/**
     * Reload the tree.
     * @method
     * @param {object} params - Params that needs to be send to the server. Only in use for remote data sources.
     * @return jQuery object
     * @example Method.Sample <!-- tree -->
     * <button onclick="tree.reload()" class="gj-button-md">Click to load</button>
     * <br/><br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         autoLoad: false
     *     });
     * </script>
     * @example Search <!-- tree -->
     * <input type="text" id="query" /> <button onclick="Search()">Search</button>
     * <br/><br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     function Search() {
     *         tree.reload({ query: $('#query').val() });
     *     }
     * </script>
     */self.reload=function(params){return gj.widget.prototype.reload.call(this,params);};/**
     * Render data in the tree
     * @method
     * @param {object} response - An object that contains the data that needs to be loaded in the tree.
     * @fires dataBinding, dataBound
     * @return tree
     * @example sample <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     var tree, onSuccessFunc;
     *     onSuccessFunc = function (response) {
     *         //you can modify the response here if needed
     *         tree.render(response);
     *     };
     *     tree = $('#tree').tree({
     *         dataSource: { url: '/Locations/Get', success: onSuccessFunc }
     *     });
     * </script>
     */self.render=function(response){return methods.render(this,response);};/**
     * Add node to the tree.
     * @method
     * @param {object} data - The node data.
     * @param {object} parentNode - Parent node as jquery object.
     * @param {Number} position - Position where the new node need to be added. 
     * @return jQuery object
     * @example Append.ToRoot <!-- tree -->
     * <button onclick="append()" class="gj-button-md">Append To Root</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     *     function append() {
     *         tree.addNode({ text: 'New Node' });
     *     }
     * </script>
     * @example Append.Parent <!-- tree -->
     * <button onclick="append()" class="gj-button-md">Append To Asia</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var parent, tree = $('#tree').tree();
     *     tree.on('dataBound', function () {
     *         parent = tree.getNodeByText('Asia');
     *         tree.off('dataBound');
     *     });
     *     function append() {
     *         tree.addNode({ text: 'New Node' }, parent);
     *     }
     * </script>
     * @example Bootstrap <!-- bootstrap, tree -->
     * <button onclick="append()" class="btn btn-default">Append To Asia</button>
     * <br/><br/>
     * <div id="tree" data-source="/Locations/Get" data-ui-library="bootstrap"></div>
     * <script>
     *     var parent, tree = $('#tree').tree();
     *     tree.on('dataBound', function () {
     *         parent = tree.getNodeByText('Asia');
     *         tree.off('dataBound');
     *     });
     *     function append() {
     *         tree.addNode({ text: 'New Node' }, parent);
     *     }
     * </script>
     * @example Prepend <!-- tree -->
     * <button onclick="append()" class="gj-button-md">Prepend in Asia</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var parent, tree = $('#tree').tree();
     *     tree.on('dataBound', function () {
     *         parent = tree.getNodeByText('Asia');
     *         tree.off('dataBound');
     *     });
     *     function append() {
     *         tree.addNode({ text: 'New Node' }, parent, 1);
     *     }
     * </script>
     * @example Position <!-- tree -->
     * <button onclick="append()" class="gj-button-md">Append to Asia as second</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var parent, tree = $('#tree').tree();
     *     tree.on('dataBound', function () {
     *         parent = tree.getNodeByText('Asia');
     *         tree.off('dataBound');
     *     });
     *     function append() {
     *         tree.addNode({ text: 'New Node' }, parent, 2);
     *     }
     * </script>
     */self.addNode=function(data,$parentNode,position){return methods.addNode(this,data,$parentNode,position);};/**
     * Remove node from the tree.
     * @method
     * @param {object} node - The node as jQuery object
     * @return jQuery object
     * @example Method.Sample <!-- tree -->
     * <button onclick="remove()" class="gj-button-md">Remove USA</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     function remove() {
     *         var node = tree.getNodeByText('USA');
     *         tree.removeNode(node);
     *     }
     * </script>
     */self.removeNode=function($node){return methods.remove(this,$node);};/**
     * Update node from the tree.
     * @method
     * @param {string} id - The id of the node that needs to be updated
     * @param {object} record - The node as jQuery object
     * @return jQuery object
     * @example Method.Sample <!-- tree -->
     * <input type="text" id="nodeName" />
     * <button onclick="save()" class="gj-button-md">Save</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         primaryKey: 'id',
     *         dataSource: '/Locations/Get'
     *     });
     *     tree.on('select', function (e, node, id) {
     *         $('#nodeName').val(tree.getDataById(id).text);
     *     });
     *     function save() {
     *         var id = tree.getSelections()[0],
     *             record = tree.getDataById(id);
     *         record.text = $('#nodeName').val();
     *         tree.updateNode(id, record);
     *     }
     * </script>
     */self.updateNode=function(id,record){return methods.update(this,id,record);};/**
     * Destroy the tree.
     * @method
     * @return jQuery object
     * @example Method.Sample <!-- tree -->
     * <button onclick="tree.destroy()" class="gj-button-md">Destroy</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     * </script>
     */self.destroy=function(){return methods.destroy(this);};/**
     * Expand node from the tree.
     * @method
     * @param {object} node - The node as jQuery object
     * @param {boolean} cascade - Expand all children
     * @return jQuery object
     * @example Method.Sample <!-- tree -->
     * <button onclick="expand()" class="gj-button-md">Expand Asia</button>
     * <button onclick="collapse()" class="gj-button-md">Collapse Asia</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     function expand() {
     *         var node = tree.getNodeByText('Asia');
     *         tree.expand(node);
     *     }
     *     function collapse() {
     *         var node = tree.getNodeByText('Asia');
     *         tree.collapse(node);
     *     }
     * </script>
     * @example Cascade <!-- tree -->
     * <button onclick="expand()" class="gj-button-md">Expand North America</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     function expand() {
     *         var node = tree.getNodeByText('North America');
     *         tree.expand(node, true);
     *     }
     * </script>
     */self.expand=function($node,cascade){return methods.expand(this,$node,cascade);};/**
     * Collapse node from the tree.
     * @method
     * @param {object} node - The node as jQuery object
     * @param {boolean} cascade - Collapse all children
     * @return jQuery object
     * @example Method.Sample <!-- tree -->
     * <button onclick="expand()" class="gj-button-md">Expand Asia</button>
     * <button onclick="collapse()" class="gj-button-md">Collapse Asia</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     function expand() {
     *         var node = tree.getNodeByText('Asia');
     *         tree.expand(node);
     *     }
     *     function collapse() {
     *         var node = tree.getNodeByText('Asia');
     *         tree.collapse(node);
     *     }
     * </script>
     * @example Cascade <!-- tree -->
     * <button onclick="collapse()" class="gj-button-md">Collapse North America</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     function collapse() {
     *         var node = tree.getNodeByText('North America');
     *         tree.collapse(node, true);
     *     }
     * </script>
     */self.collapse=function($node,cascade){return methods.collapse(this,$node,cascade);};/**
     * Expand all tree nodes
     * @method
     * @return jQuery object
     * @example Sample <!-- tree -->
     * <button onclick="tree.expandAll()" class="gj-button-md">Expand All</button>
     * <button onclick="tree.collapseAll()" class="gj-button-md">Collapse All</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     * </script>
     */self.expandAll=function(){return methods.expandAll(this);};/**
     * Collapse all tree nodes
     * @method
     * @return jQuery object
     * @example Sample <!-- tree -->
     * <button onclick="tree.expandAll()" class="gj-button-md">Expand All</button>
     * <button onclick="tree.collapseAll()" class="gj-button-md">Collapse All</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree();
     * </script>
     */self.collapseAll=function(){return methods.collapseAll(this);};/**
     * Return node data by id of the record.
     * @method
     * @param {string|number} id - The id of the record that needs to be returned
     * @return object
     * @example sample <!-- tree -->
     * <button id="btnGetData" class="gj-button-md">Get Data</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         primaryKey: 'id' //define the name of the column that you want to use as ID here.
     *     });
     *     $('#btnGetData').on('click', function () {
     *         var data = tree.getDataById(9);
     *         alert('The population of ' + data.text + ' is ' + data.population);
     *     });
     * </script>
     */self.getDataById=function(id){return methods.getDataById(this,id,this.data('records'));};/**
     * Return node data by text.
     * @method
     * @param {string} text - The text of the record that needs to be returned
     * @return object
     * @example sample <!-- tree -->
     * <button id="btnGetData" class="gj-button-md">Get Data</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *     });
     *     $('#btnGetData').on('click', function () {
     *         var data = tree.getDataByText('California');
     *         alert('The population of California is ' + data.population);
     *     });
     * </script>
     */self.getDataByText=function(text){return methods.getDataByText(this,text,this.data('records'));};/**
     * Return node by id of the record.
     * @method
     * @param {string} id - The id of the node that needs to be returned
     * @return jQuery object
     * @example sample <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         primaryKey: 'id' //define the name of the column that you want to use as ID here.
     *     });
     *     tree.on('dataBound', function() {
     *         var node = tree.getNodeById('1');
     *         node.css('background-color', 'red');
     *     });
     * </script>
     */self.getNodeById=function(id){return methods.getNodeById(this.children('ul'),id);};/**
     * Return node by text.
     * @method
     * @param {string} text - The text in the node that needs to be returned
     * @return jQuery object
     * @example sample <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get'
     *     });
     *     tree.on('dataBound', function() {
     *         var node = tree.getNodeByText('Asia');
     *         node.css('background-color', 'red');
     *     });
     * </script>
     */self.getNodeByText=function(text){return methods.getNodeByText(this.children('ul'),text);};/**
     * Return an array with all records presented in the tree.
     * @method
     * @return Array
     * @example sample <!-- tree -->
     * <button onclick="alert(JSON.stringify(tree.getAll()))" class="gj-button-md">Get All Data</button>
     * <button onclick="tree.addNode({ text: 'New Node' });" class="gj-button-md">Add New Node</button>
     * <br/>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: [ { text: 'foo', children: [ { text: 'bar' } ] } ]
     *     });
     * </script>
     */self.getAll=function(){return this.data('records');};/**
     * Select node from the tree.
     * @method
     * @param {Object} node - The node as jquery object.
     * @return jQuery Object
     * @example Select.Method <!-- tree -->
     * <button onclick="tree.select(northAmerica)" class="gj-button-md">Select North America</button>
     * <button onclick="tree.unselect(northAmerica)" class="gj-button-md">Unselect North America</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         primaryKey: 'id',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         },
     *         select: function (e, node, id) {
     *             alert('select is fired for node with id=' + id);
     *         }
     *     });
     * </script>
     */self.select=function($node){return methods.select(this,$node);};/**
     * Unselect node from the tree.
     * @method
     * @param {Object} node - The node as jquery object.
     * @return jQuery Object
     * @example UnSelect.Method <!-- tree -->
     * <button onclick="tree.select(northAmerica)" class="gj-button-md">Select North America</button>
     * <button onclick="tree.unselect(northAmerica)" class="gj-button-md">Unselect North America</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         primaryKey: 'id',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');  
     *         },
     *         unselect: function (e, node, id) {
     *             alert('unselect is fired for node with id=' + id);
     *         }
     *     });
     * </script>
     */self.unselect=function($node){return methods.unselect(this,$node);};/**
     * Select all tree nodes
     * @method
     * @return jQuery object
     * @example Sample <!-- tree -->
     * <button onclick="tree.selectAll()" class="gj-button-md">Select All</button>
     * <button onclick="tree.unselectAll()" class="gj-button-md">Unselect All</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         selectionType: 'multiple'
     *     });
     *     tree.on('dataBound', function() {
     *         tree.expandAll();
     *     });
     * </script>
     */self.selectAll=function(){return methods.selectAll(this);};/**
     * Unselect all tree nodes
     * @method
     * @return jQuery object
     * @example Sample <!-- tree -->
     * <button onclick="tree.selectAll()" class="gj-button-md">Select All</button>
     * <button onclick="tree.unselectAll()" class="gj-button-md">Unselect All</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         selectionType: 'multiple'
     *     });
     *     tree.on('dataBound', function() {
     *         tree.expandAll();
     *     });
     * </script>
     */self.unselectAll=function(){return methods.unselectAll(this);};/**
     * Return an array with the ids of the selected nodes.
     * @method
     * @return array
     * @example Sample <!-- tree -->
     * <button id="btnShowSelection" class="gj-button-md">Show Selections</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         selectionType: 'multiple'
     *     });
     *     $('#btnShowSelection').on('click', function () {
     *         var selections = tree.getSelections();
     *         selections && selections.length && alert(selections.join());
     *     });
     * </script>
     */self.getSelections=function(){return methods.getSelections(this.children('ul'));};/**
     * Return an array with the ids of all children.
     * @method
     * @param {Object} node - The node as jquery object.
     * @param {Boolean} cascade - Include all nested children. Set to true by default.
     * @return array
     * @example Cascade.True <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         dataBound: function () {
     *             var node = tree.getNodeByText('North America'),
     *                 children = tree.getChildren(node);
     *             alert(children.join());
     *         }
     *     });
     * </script>
     * @example Cascade.False <!-- tree -->
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         dataBound: function () {
     *             var node = tree.getNodeByText('North America'),
     *                 children = tree.getChildren(node, false);
     *             alert(children.join());
     *         }
     *     });
     * </script>
     */self.getChildren=function($node,cascade){return methods.getChildren(this,$node,cascade);};/**
     * Return an array with the names of all parents.
     * @method
     * @param {String} id - The id of the target node
     * @return array
     * @example sample <!-- tree -->
     * Location: <div id="location" style="display: inline-block;"></div>
     * <div id="tree"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         dataSource: '/Locations/Get',
     *         select: function (e, node, id) {
     *             var parents = tree.parents(id);
     *             $('#location').text(parents.join(' / ') + ' / ' + tree.getDataById(id).text);
     *         }
     *     });
     * </script>
     */self.parents=function(id){var parents=[],data=this.data();methods.pathFinder(data,data.records,id,parents);return parents.reverse();};/**
     * Enable node from the tree.
     * @method
     * @param {Object} node - The node as jquery object.
     * @param {Boolean} cascade - Enable all children. Set to true by default.
     * @return jQuery Object
     * @example Material.Design <!-- checkbox, tree -->
     * <button onclick="tree.enable(northAmerica)" class="gj-button-md">Enable North America (Cascade)</button>
     * <button onclick="tree.disable(northAmerica)" class="gj-button-md">Disable North America (Cascade)</button>
     * <button onclick="tree.enable(northAmerica, false)" class="gj-button-md">Enable North America (Non-Cascade)</button>
     * <button onclick="tree.disable(northAmerica, false)" class="gj-button-md">Disable North America (Non-Cascade)</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         checkboxes: true,
     *         primaryKey: 'ID',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         }
     *     });
     * </script>
     * @example Bootstrap <!-- bootstrap, checkbox, tree -->
     * <button onclick="tree.enable(northAmerica)" class="btn btn-default">Enable North America (Cascade)</button>
     * <button onclick="tree.disable(northAmerica)" class="btn btn-default">Disable North America (Cascade)</button>
     * <button onclick="tree.enable(northAmerica, false)" class="btn btn-default">Enable North America (Non-Cascade)</button>
     * <button onclick="tree.disable(northAmerica, false)" class="btn btn-default">Disable North America (Non-Cascade)</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         checkboxes: true,
     *         primaryKey: 'ID',
     *         uiLibrary: 'bootstrap',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         }
     *     });
     * </script>
     * @example Bootstrap.4 <!-- bootstrap4, fontawesome, checkbox, tree -->
     * <button onclick="tree.enable(northAmerica)" class="btn btn-default">Enable North America (Cascade)</button>
     * <button onclick="tree.disable(northAmerica)" class="btn btn-default">Disable North America (Cascade)</button>
     * <button onclick="tree.enable(northAmerica, false)" class="btn btn-default">Enable North America (Non-Cascade)</button>
     * <button onclick="tree.disable(northAmerica, false)" class="btn btn-default">Disable North America (Non-Cascade)</button>
     * <br/><br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         checkboxes: true,
     *         primaryKey: 'ID',
     *         uiLibrary: 'bootstrap4',
     *         iconsLibrary: 'fontawesome',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         }
     *     });
     * </script>
     */self.enable=function($node,cascade){return methods.enableNode(this,$node,cascade);};/**
     * Enable all nodes from the tree.
     * @method
     * @return jQuery Object
     * @example Sample <!-- checkbox, tree -->
     * <button onclick="tree.enableAll()" class="gj-button-md">Enable All</button>
     * <button onclick="tree.disableAll()" class="gj-button-md">Disable All</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         checkboxes: true
     *     });
     * </script>
     */self.enableAll=function(){return methods.enableAll(this);};/**
     * Disable node from the tree.
     * @method
     * @param {Object} node - The node as jquery object.
     * @param {Boolean} cascade - Disable all children. Set to true by default.
     * @return jQuery Object
     * @example Sample <!-- checkbox, tree -->
     * <button onclick="tree.enable(northAmerica)" class="gj-button-md">Enable North America (Cascade)</button>
     * <button onclick="tree.disable(northAmerica)" class="gj-button-md">Disable North America (Cascade)</button>
     * <button onclick="tree.enable(northAmerica, false)" class="gj-button-md">Enable North America (Non-Cascade)</button>
     * <button onclick="tree.disable(northAmerica, false)" class="gj-button-md">Disable North America (Non-Cascade)</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree, northAmerica;
     *     tree = $('#tree').tree({
     *         checkboxes: true,
     *         primaryKey: 'ID',
     *         dataBound: function () {
     *             northAmerica = tree.getNodeByText('North America');
     *         }
     *     });
     * </script>
     */self.disable=function($node,cascade){return methods.disableNode(this,$node,cascade);};/**
     * Disable all nodes from the tree.
     * @method
     * @return jQuery Object
     * @example Sample <!-- checkbox, tree -->
     * <button onclick="tree.enableAll()" class="gj-button-md">Enable All</button>
     * <button onclick="tree.disableAll()" class="gj-button-md">Disable All</button>
     * <br/>
     * <div id="tree" data-source="/Locations/Get"></div>
     * <script>
     *     var tree = $('#tree').tree({
     *         checkboxes: true
     *     });
     * </script>
     */self.disableAll=function(){return methods.disableAll(this);};$.extend($element,self);if('tree'!==$element.attr('data-type')){methods.init.call($element,jsConfig);}return $element;};gj.tree.widget.prototype=new gj.widget();gj.tree.widget.constructor=gj.tree.widget;(function($){$.fn.tree=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.tree.widget(this,method);}else{$widget=new gj.tree.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/** 
 * @widget Tree 
 * @plugin Checkboxes
 */gj.tree.plugins.checkboxes={config:{base:{/** Add checkbox for each node, if set to true.
              * @type Boolean
              * @default undefined
              * @example Material.Design <!-- checkbox, tree -->
              * <div id="tree"></div>
              * <script>
              *     var tree = $('#tree').tree({
              *         dataSource: '/Locations/Get',
              *         checkboxes: true
              *     });
              * </script>
              * @example Bootstrap.3 <!-- bootstrap, checkbox, tree -->
              * <div id="tree"></div>
              * <script>
              *     var tree = $('#tree').tree({
              *         dataSource: '/Locations/Get',
              *         checkboxes: true,
              *         uiLibrary: 'bootstrap'
              *     });
              * </script>
              * @example Bootstrap.4 <!-- bootstrap4, checkbox, tree -->
              * <div id="tree"></div>
              * <script>
              *     var tree = $('#tree').tree({
              *         dataSource: '/Locations/Get',
              *         checkboxes: true,
              *         uiLibrary: 'bootstrap4'
              *     });
              * </script>
              */checkboxes:undefined,/** Name of the source field, that indicates if the checkbox is checked.
             * @type string
             * @default 'checked'
             * @example Custom.Name <!-- checkbox, tree -->
             * <div id="tree"></div>
             * <script>
             *     var tree = $('#tree').tree({
             *         checkboxes: true,
             *         checkedField: 'checkedFieldName',
             *         dataSource: [ { text: 'foo', checkedFieldName: false, children: [ { text: 'bar', checkedFieldName: true }, { text: 'bar2', checkedFieldName: false } ] }, { text: 'foo2', children: [ { text: 'bar2' } ] } ]
             *     });
             * </script>
             */checkedField:'checked',/** This setting enable cascade check and uncheck of children
             * @type boolean
             * @default true
             * @example False.Remote.DataSource <!-- checkbox, tree -->
             * <div id="tree"></div>
             * <script>
             *     var tree = $('#tree').tree({
             *         checkboxes: true,
             *         dataSource: '/Locations/Get',
             *         cascadeCheck: false
             *     });
             *     tree.on('dataBound', function() {
             *         tree.expandAll();
             *     });
             * </script>
             * @example False.Local.DataSource <!-- checkbox, tree -->
             * <div id="tree"></div>
             * <script>
             *     var tree = $('#tree').tree({
             *         checkboxes: true,
             *         dataSource: [ { text: 'foo', checked: true, children: [ { text: 'bar', checked: true }, { text: 'bar2', checked: false } ] }, { text: 'foo2', checked: true, children: [ { text: 'bar2', checked: false } ] } ],
             *         cascadeCheck: false
             *     });
             * </script>
             * @example True <!-- checkbox, tree -->
             * <div id="tree"></div>
             * <script>
             *     var tree = $('#tree').tree({
             *         checkboxes: true,
             *         dataSource: '/Locations/Get',
             *         cascadeCheck: true
             *     });
             *     tree.on('dataBound', function() {
             *         tree.expandAll();
             *     });
             * </script>
             */cascadeCheck:true}},"private":{dataBound:function dataBound($tree){var $nodes;if($tree.data('cascadeCheck')){$nodes=$tree.find('li[data-role="node"]');$.each($nodes,function(){var $node=$(this),state=$node.find('[data-role="checkbox"] input[type="checkbox"]').checkbox('state');if(state==='checked'){gj.tree.plugins.checkboxes["private"].updateChildrenState($node,state);gj.tree.plugins.checkboxes["private"].updateParentState($node,state);}});}},nodeDataBound:function nodeDataBound($tree,$node,id,record){var data,$expander,$checkbox,$wrapper,disabled;if($node.find('> [data-role="wrapper"] > [data-role="checkbox"]').length===0){data=$tree.data();$expander=$node.find('> [data-role="wrapper"] > [data-role="expander"]');$checkbox=$('<input type="checkbox"/>');$wrapper=$('<span data-role="checkbox"></span>').append($checkbox);disabled=typeof record[data.disabledField]!=='undefined'&&record[data.disabledField].toString().toLowerCase()==='true';$checkbox=$checkbox.checkbox({uiLibrary:data.uiLibrary,iconsLibrary:data.iconsLibrary,change:function change(e,state){gj.tree.plugins.checkboxes.events.checkboxChange($tree,$node,record,$checkbox.state());}});disabled&&$checkbox.prop('disabled',true);record[data.checkedField]&&$checkbox.state('checked');$checkbox.on('click',function(e){var $node=$checkbox.closest('li'),state=$checkbox.state();if(data.cascadeCheck){gj.tree.plugins.checkboxes["private"].updateChildrenState($node,state);gj.tree.plugins.checkboxes["private"].updateParentState($node,state);}});$expander.after($wrapper);}},updateParentState:function updateParentState($node,state){var $parentNode,$parentCheckbox,$siblingCheckboxes,allChecked,allUnchecked,parentState;$parentNode=$node.parent('ul').parent('li');if($parentNode.length===1){$parentCheckbox=$node.parent('ul').parent('li').find('> [data-role="wrapper"] > [data-role="checkbox"] input[type="checkbox"]');$siblingCheckboxes=$node.siblings().find('> [data-role="wrapper"] > span[data-role="checkbox"] input[type="checkbox"]');allChecked=state==='checked';allUnchecked=state==='unchecked';parentState='indeterminate';$.each($siblingCheckboxes,function(){var state=$(this).checkbox('state');if(allChecked&&state!=='checked'){allChecked=false;}if(allUnchecked&&state!=='unchecked'){allUnchecked=false;}});if(allChecked&&!allUnchecked){parentState='checked';}if(!allChecked&&allUnchecked){parentState='unchecked';}$parentCheckbox.checkbox('state',parentState);gj.tree.plugins.checkboxes["private"].updateParentState($parentNode,$parentCheckbox.checkbox('state'));}},updateChildrenState:function updateChildrenState($node,state){var $childrenCheckboxes=$node.find('ul li [data-role="wrapper"] [data-role="checkbox"] input[type="checkbox"]');if($childrenCheckboxes.length>0){$.each($childrenCheckboxes,function(){$(this).checkbox('state',state);});}},update:function update($tree,$node,state){var checkbox=$node.find('[data-role="checkbox"] input[type="checkbox"]').first();$(checkbox).checkbox('state',state);if($tree.data().cascadeCheck){gj.tree.plugins.checkboxes["private"].updateChildrenState($node,state);gj.tree.plugins.checkboxes["private"].updateParentState($node,state);}}},"public":{/** Get ids of all checked nodes
         * @method
         * @return Array
         * @example Base.Theme <!-- checkbox, tree -->
         * <button id="btnGet" class="gj-button-md">Get Checked Nodes</button>
         * <div id="tree"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         dataSource: '/Locations/Get',
         *         checkboxes: true
         *     });
         *     $('#btnGet').on('click', function() {
         *         var result = tree.getCheckedNodes();
         *         alert(result.join());
         *     });
         * </script>
         */getCheckedNodes:function getCheckedNodes(){var result=[],checkboxes=this.find('li [data-role="checkbox"] input[type="checkbox"]');$.each(checkboxes,function(){var checkbox=$(this);if(checkbox.checkbox('state')==='checked'){result.push(checkbox.closest('li').data('id'));}});return result;},/**
         * Check all tree nodes
         * @method
         * @return tree as jQuery object
         * @example Sample <!-- checkbox, tree -->
         * <button onclick="tree.checkAll()" class="gj-button-md">Check All</button>
         * <button onclick="tree.uncheckAll()" class="gj-button-md">Uncheck All</button>
         * <br/><br/>
         * <div id="tree" data-source="/Locations/Get"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         checkboxes: true
         *     });
         *     tree.on('dataBound', function() {
         *         tree.expandAll();
         *     });
         * </script>
         */checkAll:function checkAll(){var $checkboxes=this.find('li [data-role="checkbox"] input[type="checkbox"]');$.each($checkboxes,function(){$(this).checkbox('state','checked');});return this;},/**
         * Uncheck all tree nodes
         * @method
         * @return tree as jQuery object
         * @example Sample <!-- checkbox, tree -->
         * <button onclick="tree.checkAll()" class="gj-button-md">Check All</button>
         * <button onclick="tree.uncheckAll()" class="gj-button-md">Uncheck All</button>
         * <br/><br/>
         * <div id="tree" data-source="/Locations/Get"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         checkboxes: true
         *     });
         *     tree.on('dataBound', function() {
         *         tree.expandAll();
         *     });
         * </script>
         */uncheckAll:function uncheckAll(){var $checkboxes=this.find('li [data-role="checkbox"] input[type="checkbox"]');$.each($checkboxes,function(){$(this).checkbox('state','unchecked');});return this;},/**
         * Check tree node.
         * @method
         * @param {object} node - The node as jQuery object
         * @return tree as jQuery object
         * @example Sample <!-- checkbox, tree -->
         * <button onclick="tree.check(tree.getNodeByText('China'))" class="gj-button-md">Check China</button>
         * <br/>
         * <div id="tree" data-source="/Locations/Get"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         checkboxes: true
         *     });
         *     tree.on('dataBound', function() {
         *         tree.expandAll();
         *     });
         * </script>
         */check:function check($node){gj.tree.plugins.checkboxes["private"].update(this,$node,'checked');return this;},/**
         * Uncheck tree node.
         * @method
         * @param {object} node - The node as jQuery object
         * @return tree as jQuery object
         * @example Sample <!-- checkbox, tree -->
         * <button onclick="tree.uncheck(tree.getNodeByText('China'))" class="gj-button-md">UnCheck China</button>
         * <br/>
         * <div id="tree" data-source="/Locations/Get"></div>
         * <script>
         *     var tree = $('#tree').tree({
         *         checkboxes: true
         *     });
         *     tree.on('dataBound', function() {
         *         tree.expandAll();
         *         tree.check(tree.getNodeByText('China'));
         *     });
         * </script>
         */uncheck:function uncheck($node){gj.tree.plugins.checkboxes["private"].update(this,$node,'unchecked');return this;}},events:{/**
         * Event fires when the checkbox state is changed.
         * @event checkboxChange
         * @param {object} e - event data
         * @param {object} $node - the node object as jQuery element
         * @param {object} record - the record data
         * @param {string} state - the new state of the checkbox
         * @example Event.Sample <!-- checkbox, tree -->
         * <div id="tree" data-source="/Locations/Get" data-checkboxes="true"></div>
         * <script>
         *     var tree = $('#tree').tree();
         *     tree.on('checkboxChange', function (e, $node, record, state) {
         *         alert('The new state of record ' + record.text + ' is ' + state);
         *     });
         * </script>
         */checkboxChange:function checkboxChange($tree,$node,record,state){return $tree.triggerHandler('checkboxChange',[$node,record,state]);}},configure:function configure($tree){if($tree.data('checkboxes')&&gj.checkbox){$.extend(true,$tree,gj.tree.plugins.checkboxes["public"]);$tree.on('nodeDataBound',function(e,$node,id,record){gj.tree.plugins.checkboxes["private"].nodeDataBound($tree,$node,id,record);});$tree.on('dataBound',function(){gj.tree.plugins.checkboxes["private"].dataBound($tree);});$tree.on('enable',function(e,$node){$node.find('>[data-role="wrapper"]>[data-role="checkbox"] input[type="checkbox"]').prop('disabled',false);});$tree.on('disable',function(e,$node){$node.find('>[data-role="wrapper"]>[data-role="checkbox"] input[type="checkbox"]').prop('disabled',true);});}}};/**
 * @widget Tree
 * @plugin DragAndDrop
 */gj.tree.plugins.dragAndDrop={config:{base:{/** Enables drag and drop functionality for each node.
              * @type Boolean
              * @default undefined
              * @example Material.Design <!-- draggable, droppable, tree -->
              * <h3>Drag and Drop Tree Nodes</h3>
              * <div id="tree"></div>
              * <script>
              *     $('#tree').tree({
              *         dataSource: '/Locations/Get',
              *         dragAndDrop: true
              *     });
              * </script>
              * @example Bootstrap.3 <!-- bootstrap, draggable, droppable, tree -->
              * <div class="container">
              *     <h3>Drag and Drop Tree Nodes</h3>
              *     <div id="tree"></div>
              * </div>
              * <script>
              *     $('#tree').tree({
              *         dataSource: '/Locations/Get',
              *         dragAndDrop: true,
              *         uiLibrary: 'bootstrap'
              *     });
              * </script>
              * @example Bootstrap.4 <!-- bootstrap4, draggable, droppable, tree -->
              * <div class="container">
              *     <h3>Drag and Drop Tree Nodes</h3>
              *     <div id="tree"></div>
              * </div>
              * <script>
              *     $('#tree').tree({
              *         dataSource: '/Locations/Get',
              *         dragAndDrop: true,
              *         uiLibrary: 'bootstrap4'
              *     });
              * </script>
              */dragAndDrop:undefined,style:{dragEl:'gj-tree-drag-el gj-tree-md-drag-el',dropAsChildIcon:'gj-cursor-pointer gj-icon plus',dropAbove:'gj-tree-drop-above',dropBelow:'gj-tree-drop-below'}},bootstrap:{style:{dragEl:'gj-tree-drag-el gj-tree-bootstrap-drag-el',dropAsChildIcon:'glyphicon glyphicon-plus',dropAbove:'drop-above',dropBelow:'drop-below'}},bootstrap4:{style:{dragEl:'gj-tree-drag-el gj-tree-bootstrap-drag-el',dropAsChildIcon:'gj-cursor-pointer gj-icon plus',dropAbove:'drop-above',dropBelow:'drop-below'}}},"private":{nodeDataBound:function nodeDataBound($tree,$node){var $wrapper=$node.children('[data-role="wrapper"]'),$display=$node.find('>[data-role="wrapper"]>[data-role="display"]');if($wrapper.length&&$display.length){$display.on('mousedown',gj.tree.plugins.dragAndDrop["private"].createNodeMouseDownHandler($tree));$display.on('mousemove',gj.tree.plugins.dragAndDrop["private"].createNodeMouseMoveHandler($tree,$node,$display));$display.on('mouseup',gj.tree.plugins.dragAndDrop["private"].createNodeMouseUpHandler($tree));}},createNodeMouseDownHandler:function createNodeMouseDownHandler($tree){return function(e){$tree.data('dragReady',true);};},createNodeMouseUpHandler:function createNodeMouseUpHandler($tree){return function(e){$tree.data('dragReady',false);};},createNodeMouseMoveHandler:function createNodeMouseMoveHandler($tree,$node,$display){return function(e){if($tree.data('dragReady')){var data=$tree.data(),$dragEl,$wrapper,offsetTop,offsetLeft;$tree.data('dragReady',false);$dragEl=$display.clone().wrap('<div data-role="wrapper"/>').closest('div').wrap('<li class="'+data.style.item+'" />').closest('li').wrap('<ul class="'+data.style.list+'" />').closest('ul');$('body').append($dragEl);$dragEl.attr('data-role','draggable-clone').addClass('gj-unselectable').addClass(data.style.dragEl);$dragEl.find('[data-role="wrapper"]').prepend('<span data-role="indicator" />');$dragEl.draggable({drag:gj.tree.plugins.dragAndDrop["private"].createDragHandler($tree,$node,$display),stop:gj.tree.plugins.dragAndDrop["private"].createDragStopHandler($tree,$node,$display)});$wrapper=$display.parent();offsetTop=$display.offset().top;offsetTop-=parseInt($wrapper.css("border-top-width"))+parseInt($wrapper.css("margin-top"))+parseInt($wrapper.css("padding-top"));offsetLeft=$display.offset().left;offsetLeft-=parseInt($wrapper.css("border-left-width"))+parseInt($wrapper.css("margin-left"))+parseInt($wrapper.css("padding-left"));offsetLeft-=$dragEl.find('[data-role="indicator"]').outerWidth(true);$dragEl.css({position:'absolute',top:offsetTop,left:offsetLeft,width:$display.outerWidth(true)});if($display.attr('data-droppable')==='true'){$display.droppable('destroy');}gj.tree.plugins.dragAndDrop["private"].getTargetDisplays($tree,$node,$display).each(function(){var $dropEl=$(this);if($dropEl.attr('data-droppable')==='true'){$dropEl.droppable('destroy');}$dropEl.droppable();});gj.tree.plugins.dragAndDrop["private"].getTargetDisplays($tree,$node).each(function(){var $dropEl=$(this);if($dropEl.attr('data-droppable')==='true'){$dropEl.droppable('destroy');}$dropEl.droppable();});$dragEl.trigger('mousedown');}};},getTargetDisplays:function getTargetDisplays($tree,$node,$display){return $tree.find('[data-role="display"]').not($display).not($node.find('[data-role="display"]'));},getTargetWrappers:function getTargetWrappers($tree,$node){return $tree.find('[data-role="wrapper"]').not($node.find('[data-role="wrapper"]'));},createDragHandler:function createDragHandler($tree,$node,$display){var $displays=gj.tree.plugins.dragAndDrop["private"].getTargetDisplays($tree,$node,$display),$wrappers=gj.tree.plugins.dragAndDrop["private"].getTargetWrappers($tree,$node),data=$tree.data();return function(e,offset,mousePosition){var $dragEl=$(this),success=false;$displays.each(function(){var $targetDisplay=$(this),$indicator;if($targetDisplay.droppable('isOver',mousePosition)){$indicator=$dragEl.find('[data-role="indicator"]');data.style.dropAsChildIcon?$indicator.addClass(data.style.dropAsChildIcon):$indicator.text('+');success=true;return false;}else{$dragEl.find('[data-role="indicator"]').removeClass(data.style.dropAsChildIcon).empty();}});$wrappers.each(function(){var $wrapper=$(this),$indicator,middle;if(!success&&$wrapper.droppable('isOver',mousePosition)){middle=$wrapper.position().top+$wrapper.outerHeight()/2;if(mousePosition.y<middle){$wrapper.addClass(data.style.dropAbove).removeClass(data.style.dropBelow);}else{$wrapper.addClass(data.style.dropBelow).removeClass(data.style.dropAbove);}}else{$wrapper.removeClass(data.style.dropAbove).removeClass(data.style.dropBelow);}});};},createDragStopHandler:function createDragStopHandler($tree,$sourceNode,$sourceDisplay){var $displays=gj.tree.plugins.dragAndDrop["private"].getTargetDisplays($tree,$sourceNode,$sourceDisplay),$wrappers=gj.tree.plugins.dragAndDrop["private"].getTargetWrappers($tree,$sourceNode),data=$tree.data();return function(e,mousePosition){var success=false,record,$targetNode,$sourceParentNode,parent;$(this).draggable('destroy').remove();$displays.each(function(){var $targetDisplay=$(this),$ul;if($targetDisplay.droppable('isOver',mousePosition)){$targetNode=$targetDisplay.closest('li');$sourceParentNode=$sourceNode.parent('ul').parent('li');$ul=$targetNode.children('ul');if($ul.length===0){$ul=$('<ul />').addClass(data.style.list);$targetNode.append($ul);}if(gj.tree.plugins.dragAndDrop.events.nodeDrop($tree,$sourceNode.data('id'),$targetNode.data('id'),$ul.children('li').length+1)!==false){$ul.append($sourceNode);//BEGIN: Change node position inside the backend data
record=$tree.getDataById($sourceNode.data('id'));gj.tree.methods.removeDataById($tree,$sourceNode.data('id'),data.records);parent=$tree.getDataById($ul.parent().data('id'));if(parent[data.childrenField]===undefined){parent[data.childrenField]=[];}parent[data.childrenField].push(record);//END
gj.tree.plugins.dragAndDrop["private"].refresh($tree,$sourceNode,$targetNode,$sourceParentNode);}success=true;return false;}$targetDisplay.droppable('destroy');});if(!success){$wrappers.each(function(){var $targetWrapper=$(this),prepend,orderNumber,sourceNodeId;if($targetWrapper.droppable('isOver',mousePosition)){$targetNode=$targetWrapper.closest('li');$sourceParentNode=$sourceNode.parent('ul').parent('li');prepend=mousePosition.y<$targetWrapper.position().top+$targetWrapper.outerHeight()/2;sourceNodeId=$sourceNode.data('id');orderNumber=$targetNode.prevAll('li:not([data-id="'+sourceNodeId+'"])').length+(prepend?1:2);if(gj.tree.plugins.dragAndDrop.events.nodeDrop($tree,sourceNodeId,$targetNode.parent('ul').parent('li').data('id'),orderNumber)!==false){//BEGIN: Change node position inside the backend data
record=$tree.getDataById($sourceNode.data('id'));gj.tree.methods.removeDataById($tree,$sourceNode.data('id'),data.records);$tree.getDataById($targetNode.parent().data('id'))[data.childrenField].splice($targetNode.index()+(prepend?0:1),0,record);//END
if(prepend){$sourceNode.insertBefore($targetNode);}else{$sourceNode.insertAfter($targetNode);}gj.tree.plugins.dragAndDrop["private"].refresh($tree,$sourceNode,$targetNode,$sourceParentNode);}return false;}$targetWrapper.droppable('destroy');});}};},refresh:function refresh($tree,$sourceNode,$targetNode,$sourceParentNode){var data=$tree.data();gj.tree.plugins.dragAndDrop["private"].refreshNode($tree,$targetNode);gj.tree.plugins.dragAndDrop["private"].refreshNode($tree,$sourceParentNode);gj.tree.plugins.dragAndDrop["private"].refreshNode($tree,$sourceNode);$sourceNode.find('li[data-role="node"]').each(function(){gj.tree.plugins.dragAndDrop["private"].refreshNode($tree,$(this));});$targetNode.children('[data-role="wrapper"]').removeClass(data.style.dropAbove).removeClass(data.style.dropBelow);},refreshNode:function refreshNode($tree,$node){var $wrapper=$node.children('[data-role="wrapper"]'),$expander=$wrapper.children('[data-role="expander"]'),$spacer=$wrapper.children('[data-role="spacer"]'),$list=$node.children('ul'),data=$tree.data(),level=$node.parentsUntil('[data-type="tree"]','ul').length;if($list.length&&$list.children().length){if($list.is(':visible')){$expander.empty().append(data.icons.collapse);}else{$expander.empty().append(data.icons.expand);}}else{$expander.empty();}$wrapper.removeClass(data.style.dropAbove).removeClass(data.style.dropBelow);$spacer.css('width',data.indentation*(level-1));}},"public":{},events:{/**
         * Event fires when the node is dropped.
         * @event nodeDrop
         * @param {object} e - event data
         * @param {string} id - the id of the record
         * @param {object} parentId - the id of the new parend node
         * @param {object} orderNumber - the new order number
         * @example Event.Sample <!-- draggable, droppable, tree -->
         * <div id="tree" data-source="/Locations/Get" data-drag-and-drop="true"></div>
         * <script>
         *     var tree = $('#tree').tree();
         *     tree.on('nodeDrop', function (e, id, parentId, orderNumber) {
         *         var node = tree.getDataById(id),
         *             parent = parentId ? tree.getDataById(parentId) : {};
         *         if (parent.text === 'North America') {
         *             alert('Can\'t add children to North America.');
         *             return false;
         *         } else {
         *             alert(node.text + ' is added to ' + parent.text + ' as ' + orderNumber);
         *             return true;
         *         }
         *     });
         * </script>
         */nodeDrop:function nodeDrop($tree,id,parentId,orderNumber){return $tree.triggerHandler('nodeDrop',[id,parentId,orderNumber]);}},configure:function configure($tree){$.extend(true,$tree,gj.tree.plugins.dragAndDrop["public"]);if($tree.data('dragAndDrop')&&gj.draggable&&gj.droppable){$tree.on('nodeDataBound',function(e,$node){gj.tree.plugins.dragAndDrop["private"].nodeDataBound($tree,$node);});}}};/** 
 * @widget Tree 
 * @plugin Lazy Loading
 */gj.tree.plugins.lazyLoading={config:{base:{paramNames:{/** The name of the parameter that is going to send the parent identificator.
                 * Lazy Loading needs to be enabled in order this parameter to be in use.
                 * @alias paramNames.parentId
                 * @type string
                 * @default "parentId"
                 */parentId:'parentId'},/** Enables lazy loading
              * @type Boolean
              * @default false
              * @example Material.Design <!-- tree -->
              * <div id="tree"></div>
              * <script>
              *     $('#tree').tree({
              *         dataSource: '/Locations/LazyGet',
              *         primaryKey: 'id',
              *         lazyLoading: true
              *     });
              * </script>
              */lazyLoading:false}},"private":{nodeDataBound:function nodeDataBound($tree,$node,id,record){var data=$tree.data(),$expander=$node.find('> [data-role="wrapper"] > [data-role="expander"]');if(record.hasChildren){$expander.empty().append(data.icons.expand);}},createDoneHandler:function createDoneHandler($tree,$node){return function(response){var i,$expander,$list,data=$tree.data();if(typeof response==='string'&&JSON){response=JSON.parse(response);}if(response&&response.length){$list=$node.children('ul');if($list.length===0){$list=$('<ul />').addClass(data.style.list);$node.append($list);}for(i=0;i<response.length;i++){$tree.addNode(response[i],$list);}$expander=$node.find('>[data-role="wrapper"]>[data-role="expander"]'),$expander.attr('data-mode','open');$expander.empty().append(data.icons.collapse);gj.tree.events.dataBound($tree);}};},expand:function expand($tree,$node,id){var ajaxOptions,data=$tree.data(),params={},$children=$node.find('>ul>li');if(!$children||!$children.length){if(typeof data.dataSource==='string'){params[data.paramNames.parentId]=id;ajaxOptions={url:data.dataSource,data:params};if($tree.xhr){$tree.xhr.abort();}$tree.xhr=$.ajax(ajaxOptions).done(gj.tree.plugins.lazyLoading["private"].createDoneHandler($tree,$node)).fail($tree.createErrorHandler());}}}},"public":{},events:{},configure:function configure($tree,fullConfig,clientConfig){if(clientConfig.lazyLoading){$tree.on('nodeDataBound',function(e,$node,id,record){gj.tree.plugins.lazyLoading["private"].nodeDataBound($tree,$node,id,record);});$tree.on('expand',function(e,$node,id){gj.tree.plugins.lazyLoading["private"].expand($tree,$node,id);});}}};/* global window alert jQuery */ /** 
 * @widget Checkbox 
 * @plugin Base
 */gj.checkbox={plugins:{}};gj.checkbox.config={base:{/** The name of the UI library that is going to be in use. Currently we support only Material Design and Bootstrap. 
         * @additionalinfo The css files for Bootstrap should be manually included to the page if you use bootstrap as uiLibrary.
         * @type string (materialdesign|bootstrap|bootstrap4)
         * @default 'materialdesign'
         * @example Material.Design <!-- checkbox  -->
         * <input type="checkbox" id="checkbox"/><br/><br/>
         * <button onclick="$chkb.state('checked')" class="gj-button-md">Checked</button>
         * <button onclick="$chkb.state('unchecked')" class="gj-button-md">Unchecked</button>
         * <button onclick="$chkb.state('indeterminate')" class="gj-button-md">Indeterminate</button>
         * <button onclick="$chkb.prop('disabled', false)" class="gj-button-md">Enable</button>
         * <button onclick="$chkb.prop('disabled', true)" class="gj-button-md">Disable</button>
         * <script>
         *     var $chkb = $('#checkbox').checkbox({
         *         uiLibrary: 'materialdesign'
         *     });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, checkbox -->
         * <div class="container-fluid" style="margin-top:10px">
         *     <input type="checkbox" id="checkbox"/><br/><br/>
         *     <button onclick="$chkb.state('checked')" class="btn btn-default">Checked</button>
         *     <button onclick="$chkb.state('unchecked')" class="btn btn-default">Unchecked</button>
         *     <button onclick="$chkb.state('indeterminate')" class="btn btn-default">Indeterminate</button>
         *     <button onclick="$chkb.prop('disabled', false)" class="btn btn-default">Enable</button>
         *     <button onclick="$chkb.prop('disabled', true)" class="btn btn-default">Disable</button>
         * </div>
         * <script>
         *     var $chkb = $('#checkbox').checkbox({
         *         uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, checkbox -->
         * <div class="container-fluid" style="margin-top:10px">
         *     <input type="checkbox" id="checkbox"/><br/><br/>
         *     <button onclick="$chkb.state('checked')" class="btn btn-default">Checked</button>
         *     <button onclick="$chkb.state('unchecked')" class="btn btn-default">Unchecked</button>
         *     <button onclick="$chkb.state('indeterminate')" class="btn btn-default">Indeterminate</button>
         *     <button onclick="$chkb.prop('disabled', false)" class="btn btn-default">Enable</button>
         *     <button onclick="$chkb.prop('disabled', true)" class="btn btn-default">Disable</button>
         * </div>
         * <script>
         *     var $chkb = $('#checkbox').checkbox({
         *         uiLibrary: 'bootstrap4'
         *     });
         * </script>
         */uiLibrary:'materialdesign',/** The name of the icons library that is going to be in use. Currently we support Material Icons, Font Awesome and Glyphicons.
         * @additionalinfo If you use Bootstrap 3 as uiLibrary, then the iconsLibrary is set to Glyphicons by default.<br/>
         * If you use Material Design as uiLibrary, then the iconsLibrary is set to Material Icons by default.<br/>
         * The css files for Material Icons, Font Awesome or Glyphicons should be manually included to the page where the grid is in use.
         * @type (materialicons|fontawesome|glyphicons)
         * @default 'materialicons'
         * @example Bootstrap.4.FontAwesome <!-- bootstrap4, checkbox, fontawesome -->
         * <div class="container-fluid" style="margin-top:10px">
         *     <input type="checkbox" id="checkbox"/><br/><br/>
         *     <button onclick="$chkb.state('checked')" class="btn btn-default">Checked</button>
         *     <button onclick="$chkb.state('unchecked')" class="btn btn-default">Unchecked</button>
         *     <button onclick="$chkb.state('indeterminate')" class="btn btn-default">Indeterminate</button>
         *     <button onclick="$chkb.prop('disabled', false)" class="btn btn-default">Enable</button>
         *     <button onclick="$chkb.prop('disabled', true)" class="btn btn-default">Disable</button>
         * </div>
         * <script>
         *     var $chkb = $('#checkbox').checkbox({
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome'
         *     });
         * </script>
         */iconsLibrary:'materialicons',style:{wrapperCssClass:'gj-checkbox-md',spanCssClass:undefined}},bootstrap:{style:{wrapperCssClass:'gj-checkbox-bootstrap'},iconsLibrary:'glyphicons'},bootstrap4:{style:{wrapperCssClass:'gj-checkbox-bootstrap gj-checkbox-bootstrap-4'},iconsLibrary:'materialicons'},materialicons:{style:{iconsCssClass:'gj-checkbox-material-icons',spanCssClass:'gj-icon'}},glyphicons:{style:{iconsCssClass:'gj-checkbox-glyphicons',spanCssClass:''}},fontawesome:{style:{iconsCssClass:'gj-checkbox-fontawesome',spanCssClass:'fa'}}};gj.checkbox.methods={init:function init(jsConfig){var $chkb=this;gj.widget.prototype.init.call(this,jsConfig,'checkbox');$chkb.attr('data-checkbox','true');gj.checkbox.methods.initialize($chkb);return $chkb;},initialize:function initialize($chkb){var data=$chkb.data(),$wrapper,$span;if(data.style.wrapperCssClass){$wrapper=$('<label class="'+data.style.wrapperCssClass+' '+data.style.iconsCssClass+'"></label>');if($chkb.attr('id')){$wrapper.attr('for',$chkb.attr('id'));}$chkb.wrap($wrapper);$span=$('<span />');if(data.style.spanCssClass){$span.addClass(data.style.spanCssClass);}$chkb.parent().append($span);}},state:function state($chkb,value){if(value){if('checked'===value){$chkb.prop('indeterminate',false);$chkb.prop('checked',true);}else if('unchecked'===value){$chkb.prop('indeterminate',false);$chkb.prop('checked',false);}else if('indeterminate'===value){$chkb.prop('checked',true);$chkb.prop('indeterminate',true);}gj.checkbox.events.change($chkb,value);return $chkb;}else{if($chkb.prop('indeterminate')){value='indeterminate';}else if($chkb.prop('checked')){value='checked';}else{value='unchecked';}return value;}},toggle:function toggle($chkb){if($chkb.state()=='checked'){$chkb.state('unchecked');}else{$chkb.state('checked');}return $chkb;},destroy:function destroy($chkb){if($chkb.attr('data-checkbox')==='true'){$chkb.removeData();$chkb.removeAttr('data-guid');$chkb.removeAttr('data-checkbox');$chkb.off();$chkb.next('span').remove();$chkb.unwrap();}return $chkb;}};gj.checkbox.events={/**
     * Triggered when the state of the checkbox is changed
     *
     * @event change
     * @param {object} e - event data
     * @param {string} state - the data of the checkbox
     * @example sample <!-- checkbox -->
     * <input type="checkbox" id="checkbox"/>
     * <script>
     *     var chkb = $('#checkbox').checkbox({
     *         change: function (e) {
     *             alert('State: ' + chkb.state());
     *         }
     *     });
     * </script>
     */change:function change($chkb,state){return $chkb.triggerHandler('change',[state]);}};gj.checkbox.widget=function($element,jsConfig){var self=this,methods=gj.checkbox.methods;/** Toogle the state of the checkbox.
     * @method
     * @fires change
     * @return checkbox as jquery object
     * @example sample <!-- checkbox -->
     * <button onclick="$chkb.toggle()" class="gj-button-md">toggle</button>
     * <hr/>
     * <input type="checkbox" id="checkbox"/>
     * <script>
     *     var $chkb = $('#checkbox').checkbox();
     * </script>
     */self.toggle=function(){return methods.toggle(this);};/** Return state or set state if you pass parameter.
     * @method
     * @fires change
     * @param {string} value - State of the checkbox. Accept only checked, unchecked or indeterminate as values.
     * @return checked|unchecked|indeterminate|checkbox as jquery object
     * @example sample <!-- checkbox -->
     * <button onclick="$chkb.state('checked')" class="gj-button-md">Set to checked</button>
     * <button onclick="$chkb.state('unchecked')" class="gj-button-md">Set to unchecked</button>
     * <button onclick="$chkb.state('indeterminate')" class="gj-button-md">Set to indeterminate</button>
     * <button onclick="alert($chkb.state())" class="gj-button-md">Get state</button>
     * <hr/>
     * <input type="checkbox" id="checkbox"/>
     * <script>
     *     var $chkb = $('#checkbox').checkbox();
     * </script>
     */self.state=function(value){return methods.state(this,value);};/** Remove checkbox functionality from the element.
     * @method
     * @return checkbox as jquery object
     * @example sample <!-- checkbox -->
     * <button onclick="$chkb.destroy()" class="gj-button-md">Destroy</button>
     * <input type="checkbox" id="checkbox"/>
     * <script>
     *     var $chkb = $('#checkbox').checkbox();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};$.extend($element,self);if('true'!==$element.attr('data-checkbox')){methods.init.call($element,jsConfig);}return $element;};gj.checkbox.widget.prototype=new gj.widget();gj.checkbox.widget.constructor=gj.checkbox.widget;(function($){$.fn.checkbox=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.checkbox.widget(this,method);}else{$widget=new gj.checkbox.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery */ /** 
 * @widget Editor
 * @plugin Base
 */gj.editor={plugins:{},messages:{}};gj.editor.config={base:{/** The height of the editor. Numeric values are treated as pixels.
         * @type number|string
         * @default 300
         * @example sample <!-- editor -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({ height: 400 });
         * </script>
         */height:300,/** The width of the editor. Numeric values are treated as pixels.
         * @type number|string
         * @default undefined
         * @example JS <!-- editor -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({ width: 900 });
         * </script>
         * @example HTML <!-- editor -->
         * <div id="editor" width="900"></div>
         * <script>
         *     $('#editor').editor();
         * </script>
         */width:undefined,/** The name of the UI library that is going to be in use. Currently we support only Material Design and Bootstrap. 
         * @additionalinfo The css files for Bootstrap should be manually included to the page if you use bootstrap as uiLibrary.
         * @type string (materialdesign|bootstrap|bootstrap4)
         * @default 'materialdesign'
         * @example Material.Design <!-- editor, materialicons  -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({ uiLibrary: 'materialdesign' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, editor -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({
         *         uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, editor -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({
         *         uiLibrary: 'bootstrap4'
         *     });
         * </script>
         */uiLibrary:'materialdesign',/** The name of the icons library that is going to be in use. Currently we support Material Icons and Font Awesome.
         * @additionalinfo If you use Bootstrap as uiLibrary, then the iconsLibrary is set to font awesome by default.<br/>
         * If you use Material Design as uiLibrary, then the iconsLibrary is set to Material Icons by default.<br/>
         * The css files for Material Icons or Font Awesome should be manually included to the page where the grid is in use.
         * @type (materialicons|fontawesome)
         * @default 'materialicons'
         * @example Bootstrap.4.FontAwesome <!-- bootstrap4, fontawesome, editor -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome'
         *     });
         * </script>
         * @example Bootstrap.3.FontAwesome <!-- bootstrap, fontawesome, editor -->
         * <textarea id="editor"></textarea>
         * <script>
         *     $('#editor').editor({
         *         uiLibrary: 'bootstrap',
         *         iconsLibrary: 'fontawesome'
         *     });
         * </script>
         */iconsLibrary:'materialicons',/** The language that needs to be in use.
         * @type string
         * @default 'en-us'
         * @example French <!-- editor -->
         * <script src="../../dist/modular/editor/js/messages/messages.fr-fr.js"></script>
         * <div id="editor">Hover buttons in the toolbar in order to see localized tooltips</div>
         * <script>
         *     $("#editor").editor({
         *         locale: 'fr-fr'
         *     });
         * </script>
         * @example German <!-- editor -->
         * <script src="../../dist/modular/editor/js/messages/messages.de-de.js"></script>
         * <div id="editor">Hover <b><u>buttons</u></b> in the toolbar in order to see localized tooltips</div>
         * <script>
         *     $("#editor").editor({
         *         locale: 'de-de'
         *     });
         * </script>
         */locale:'en-us',buttons:undefined,style:{wrapper:'gj-editor gj-editor-md',buttonsGroup:'gj-button-md-group',button:'gj-button-md',buttonActive:'active'}},bootstrap:{style:{wrapper:'gj-editor gj-editor-bootstrap',buttonsGroup:'btn-group',button:'btn btn-default gj-cursor-pointer',buttonActive:'active'}},bootstrap4:{style:{wrapper:'gj-editor gj-editor-bootstrap',buttonsGroup:'btn-group',button:'btn btn-outline-secondary gj-cursor-pointer',buttonActive:'active'}},materialicons:{icons:{bold:'<i class="gj-icon bold" />',italic:'<i class="gj-icon italic" />',strikethrough:'<i class="gj-icon strikethrough" />',underline:'<i class="gj-icon underlined" />',listBulleted:'<i class="gj-icon list-bulleted" />',listNumbered:'<i class="gj-icon list-numbered" />',indentDecrease:'<i class="gj-icon indent-decrease" />',indentIncrease:'<i class="gj-icon indent-increase" />',alignLeft:'<i class="gj-icon align-left" />',alignCenter:'<i class="gj-icon align-center" />',alignRight:'<i class="gj-icon align-right" />',alignJustify:'<i class="gj-icon align-justify" />',undo:'<i class="gj-icon undo" />',redo:'<i class="gj-icon redo" />'}},fontawesome:{icons:{bold:'<i class="fa fa-bold" aria-hidden="true"></i>',italic:'<i class="fa fa-italic" aria-hidden="true"></i>',strikethrough:'<i class="fa fa-strikethrough" aria-hidden="true"></i>',underline:'<i class="fa fa-underline" aria-hidden="true"></i>',listBulleted:'<i class="fa fa-list-ul" aria-hidden="true"></i>',listNumbered:'<i class="fa fa-list-ol" aria-hidden="true"></i>',indentDecrease:'<i class="fa fa-indent" aria-hidden="true"></i>',indentIncrease:'<i class="fa fa-outdent" aria-hidden="true"></i>',alignLeft:'<i class="fa fa-align-left" aria-hidden="true"></i>',alignCenter:'<i class="fa fa-align-center" aria-hidden="true"></i>',alignRight:'<i class="fa fa-align-right" aria-hidden="true"></i>',alignJustify:'<i class="fa fa-align-justify" aria-hidden="true"></i>',undo:'<i class="fa fa-undo" aria-hidden="true"></i>',redo:'<i class="fa fa-repeat" aria-hidden="true"></i>'}}};gj.editor.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'editor');this.attr('data-editor','true');gj.editor.methods.initialize(this);return this;},initialize:function initialize($editor){var self=this,data=$editor.data(),$group,$btn,wrapper,$body,$toolbar;$editor.hide();if($editor[0].parentElement.attributes.role!=='wrapper'){wrapper=document.createElement('div');wrapper.setAttribute('role','wrapper');$editor[0].parentNode.insertBefore(wrapper,$editor[0]);wrapper.appendChild($editor[0]);}gj.editor.methods.localization(data);$(wrapper).addClass(data.style.wrapper);if(data.width){$(wrapper).width(data.width);}$body=$(wrapper).children('div[role="body"]');if($body.length===0){$body=$('<div role="body"></div>');$(wrapper).append($body);if($editor[0].innerText){$body[0].innerHTML=$editor[0].innerText;}}$body.attr('contenteditable',true);$body.on('keydown',function(e){var key=event.keyCode||event.charCode;if(gj.editor.events.changing($editor)===false&&key!==8&&key!==46){e.preventDefault();}});$body.on('mouseup keyup mouseout cut paste',function(e){self.updateToolbar($editor,$toolbar);gj.editor.events.changed($editor);$editor.html($body.html());});$toolbar=$(wrapper).children('div[role="toolbar"]');if($toolbar.length===0){$toolbar=$('<div role="toolbar"></div>');$body.before($toolbar);for(var group in data.buttons){$group=$('<div />').addClass(data.style.buttonsGroup);for(var btn in data.buttons[group]){$btn=$(data.buttons[group][btn]);$btn.on('click',function(){gj.editor.methods.executeCmd($editor,$body,$toolbar,$(this));});$group.append($btn);}$toolbar.append($group);}}$body.height(data.height-gj.core.height($toolbar[0],true));},localization:function localization(data){var msg=gj.editor.messages[data.locale];if(typeof data.buttons==='undefined'){data.buttons=[['<button type="button" class="'+data.style.button+'" title="'+msg.bold+'" role="bold">'+data.icons.bold+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.italic+'" role="italic">'+data.icons.italic+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.strikethrough+'" role="strikethrough">'+data.icons.strikethrough+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.underline+'" role="underline">'+data.icons.underline+'</button>'],['<button type="button" class="'+data.style.button+'" title="'+msg.listBulleted+'" role="insertunorderedlist">'+data.icons.listBulleted+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.listNumbered+'" role="insertorderedlist">'+data.icons.listNumbered+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.indentDecrease+'" role="outdent">'+data.icons.indentDecrease+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.indentIncrease+'" role="indent">'+data.icons.indentIncrease+'</button>'],['<button type="button" class="'+data.style.button+'" title="'+msg.alignLeft+'" role="justifyleft">'+data.icons.alignLeft+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.alignCenter+'" role="justifycenter">'+data.icons.alignCenter+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.alignRight+'" role="justifyright">'+data.icons.alignRight+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.alignJustify+'" role="justifyfull">'+data.icons.alignJustify+'</button>'],['<button type="button" class="'+data.style.button+'" title="'+msg.undo+'" role="undo">'+data.icons.undo+'</button>','<button type="button" class="'+data.style.button+'" title="'+msg.redo+'" role="redo">'+data.icons.redo+'</button>']];}},updateToolbar:function updateToolbar($editor,$toolbar){var data=$editor.data();$buttons=$toolbar.find('[role]').each(function(){var $btn=$(this),cmd=$btn.attr('role');if(cmd&&document.queryCommandEnabled(cmd)&&document.queryCommandValue(cmd)==="true"){$btn.addClass(data.style.buttonActive);}else{$btn.removeClass(data.style.buttonActive);}});},executeCmd:function executeCmd($editor,$body,$toolbar,$btn){$body.focus();document.execCommand($btn.attr('role'),false);gj.editor.methods.updateToolbar($editor,$toolbar);},content:function content($editor,html){var $body=$editor.parent().children('div[role="body"]');if(typeof html==="undefined"){return $body.html();}else{return $body.html(html);}},destroy:function destroy($editor){var $wrapper;if($editor.attr('data-editor')==='true'){$wrapper=$editor.parent();$wrapper.children('div[role="body"]').remove();$wrapper.children('div[role="toolbar"]').remove();$editor.unwrap();$editor.removeData();$editor.removeAttr('data-guid');$editor.removeAttr('data-editor');$editor.off();$editor.show();}return $editor;}};gj.editor.events={/**
     * Event fires before change of text in the editor.
     *
     * @event changing
     * @param {object} e - event data
     * @example MaxLength <!-- editor -->
     * <textarea id="editor"></textarea>
     * <script>
     *     var editor = $('#editor').editor();
     *     editor.on('changing', function (e) {
     *         return $(e.target).text().length < 3;
     *     });
     * </script>
     */changing:function changing($editor){return $editor.triggerHandler('changing');},/**
     * Event fires after change of text in the editor.
     *
     * @event changed
     * @param {object} e - event data
     * @example sample <!-- editor -->
     * <textarea id="editor"></textarea>
     * <script>
     *     $('#editor').editor({
     *         changed: function (e) {
     *             alert('changed is fired');
     *         }
     *     });
     * </script>
     */changed:function changed($editor){return $editor.triggerHandler('changed');}};gj.editor.widget=function($element,jsConfig){var self=this,methods=gj.editor.methods;/** Get or set html content in the body.
     * @method
     * @param {string} html - The html content that needs to be set.
     * @return string | editor
     * @example Get <!-- editor, materialicons -->
     * <button class="gj-button-md" onclick="alert($editor.content())">Get Content</button>
     * <hr/>
     * <div id="editor">My <b>content</b>.</div>
     * <script>
     *     var $editor = $('#editor').editor();
     * </script>
     * @example Set <!-- editor, materialicons -->
     * <button class="gj-button-md" onclick="$editor.content('<h1>new value</h1>')">Set Content</button>
     * <hr/>
     * <textarea id="editor"></textarea>
     * <script>
     *     var $editor = $('#editor').editor();
     * </script>
     */self.content=function(html){return methods.content(this,html);};/** Remove editor functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- editor, materialicons -->
     * <button class="gj-button-md" onclick="editor.destroy()">Destroy</button><br/>
     * <textarea id="editor"></textarea>
     * <script>
     *     var editor = $('#editor').editor();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};$.extend($element,self);if('true'!==$element.attr('data-editor')){methods.init.call($element,jsConfig);}return $element;};gj.editor.widget.prototype=new gj.widget();gj.editor.widget.constructor=gj.editor.widget;(function($){$.fn.editor=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.editor.widget(this,method);}else{$widget=new gj.editor.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);gj.editor.messages['en-us']={bold:'Bold',italic:'Italic',strikethrough:'Strikethrough',underline:'Underline',listBulleted:'List Bulleted',listNumbered:'List Numbered',indentDecrease:'Indent Decrease',indentIncrease:'Indent Increase',alignLeft:'Align Left',alignCenter:'Align Center',alignRight:'Align Right',alignJustify:'Align Justify',undo:'Undo',redo:'Redo'};/* global window alert jQuery gj */ /**
  * @widget DropDown
  * @plugin Base
  */gj.dropdown={plugins:{}};gj.dropdown.config={base:{/** The data source of dropdown.
         * @additionalinfo If set to string, then the dropdown is going to use this string as a url for ajax requests to the server.<br />
         * If set to object, then the dropdown is going to use this object as settings for the <a href="http://api.jquery.com/jquery.ajax/" target="_new">jquery ajax</a> function.<br />
         * If set to array, then the dropdown is going to use the array as data for dropdown nodes.
         * @type (string|object|array)
         * @default undefined
         * @example Local.DataSource <!-- dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({
         *         dataSource: [ { value: 1, text: 'One' }, { value: 2, text: 'Two' }, { value: 3, text: 'Three' } ]
         *     });
         * </script>
         * @example Remote.DataSource <!-- dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({
         *         dataSource: '/Locations/Get',
         *         valueField: 'id'
         *     });
         * </script>
         */dataSource:undefined,/** Text field name.
         * @type string
         * @default 'text'
         * @example sample <!-- dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({
         *         textField: 'newTextField',
         *         dataSource: [ { value: 1, newTextField: 'One' }, { value: 2, newTextField: 'Two' }, { value: 3, newTextField: 'Three' } ]
         *     });
         * </script>
         */textField:'text',/** Value field name.
         * @type string
         * @default 'value'
         * @example sample <!-- dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({
         *         valueField: 'newValueField',
         *         dataSource: [ { newValueField: 1, text: 'One' }, { newValueField: 2, text: 'Two' }, { newValueField: 3, text: 'Three' } ]
         *     });
         * </script>
         */valueField:'value',/** Selected field name.
         * @type string
         * @default 'selected'
         * @example sample <!-- dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({
         *         selectedField: 'newSelectedField',
         *         dataSource: [ { value: 1, text: 'One' }, { value: 2, text: 'Two', newSelectedField: true }, { value: 3, text: 'Three' } ]
         *     });
         * </script>
         */selectedField:'selected',/** The width of the dropdown.
         * @type number
         * @default undefined
         * @example JS.Config <!-- dropdown -->
         * <select id="dropdown">
         *     <option value="1">One</option>
         *     <option value="2">Two</option>
         *     <option value="3">Three</option>
         * </select>
         * <script>
         *     $('#dropdown').dropdown({ width: 200 });
         * </script>
         * @example HTML.Config <!-- dropdown -->
         * <select id="dropdown" width="200">
         *     <option value="1">One</option>
         *     <option value="2">Two</option>
         *     <option value="3">Three</option>
         * </select>
         * <script>
         *     $('#dropdown').dropdown();
         * </script>
         * @example 100.Percent <!-- dropdown -->
         * <select id="dropdown" width="100%">
         *     <option value=""></option>
         *     <option value="1">One</option>
         *     <option value="2">Two</option>
         *     <option value="3">Three</option>
         * </select>
         * <script>
         *     $('#dropdown').dropdown();
         * </script>
         */width:undefined,/** The maximum height of the dropdown list. When set to auto adjust to the screen height.
         * @type Number|'auto'
         * @default 'auto'
         * @example Auto <!-- dropdown -->
         * <p>Note: Minimize the window in order to enable scrolling for the drop down list.</p>
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({ maxHeight: 'auto', dataSource: '/Locations/GetCountries', valueField: 'id' });
         * </script>
         * @example Fixed <!-- dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({ maxHeight: 200, dataSource: '/Locations/GetCountries', valueField: 'id' });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     $('#dropdown').dropdown({ maxHeight: 200, dataSource: '/Locations/GetCountries', valueField: 'id', uiLibrary: 'bootstrap4' });
         * </script>
         */maxHeight:'auto',/** Placeholder. This label appear only if the value is not set yet.
         * @type string
         * @default undefined
         * @example JS.Config <!-- dropdown -->
         * <select id="dropdown"></select>
         * <script>
         *     $('#dropdown').dropdown({ placeholder: 'Select One...', width: 200, dataSource: '/Locations/GetCountries', valueField: 'id' });
         * </script>
         * @example HTML.Config <!-- dropdown -->
         * <input type="text" class="gj-textbox-md" placeholder="Select One..." style="width: 200px" /><br/>
         * <select id="dropdown" placeholder="Select One..." width="200" data-source="/Locations/GetCountries" data-value-field="id"></select>
         * <script>
         *     $('#dropdown').dropdown();
         * </script>
         * @example Bootstrap <!-- bootstrap, dropdown -->
         * <input type="text" class="form-control" placeholder="Select One..." style="width: 200px" /><br/>
         * <select id="dropdown" placeholder="Select One..." width="200" data-source="/Locations/GetCountries" data-value-field="id"></select>
         * <script>
         *     $('#dropdown').dropdown({ uiLibrary: 'bootstrap' });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, dropdown -->
         * <input type="text" class="form-control" placeholder="Select One..." style="width: 200px" /><br/>
         * <select id="dropdown" placeholder="Select One..." width="200" data-source="/Locations/GetCountries" data-value-field="id"></select>
         * <script>
         *     $('#dropdown').dropdown({ uiLibrary: 'bootstrap4' });
         * </script>
         */placeholder:undefined,fontSize:undefined,/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- dropdown -->
         * <select id="dropdown" width="200">
         *     <option value="1">One</option>
         *     <option value="2">Two</option>
         *     <option value="3">Three</option>
         * </select>
         * <script>
         *     var dropdown = $('#dropdown').dropdown({
         *         uiLibrary: 'materialdesign'
         *     });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, dropdown -->
         * <select id="dropdown" width="200">
         *     <option value="1">One</option>
         *     <option value="2">Two</option>
         *     <option value="3">Three</option>
         * </select>
         * <script>
         *     $('#dropdown').dropdown({ uiLibrary: 'bootstrap' });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, dropdown -->
         * <select id="dropdown" width="200">
         *     <option value="1">One</option>
         *     <option value="2">Two</option>
         *     <option value="3">Three</option>
         * </select>
         * <script>
         *     $('#dropdown').dropdown({ uiLibrary: 'bootstrap4', width: 300 });
         * </script>
         */uiLibrary:'materialdesign',/** The name of the icons library that is going to be in use. Currently we support Material Icons, Font Awesome and Glyphicons.
         * @additionalinfo If you use Bootstrap 3 as uiLibrary, then the iconsLibrary is set to Glyphicons by default.<br/>
         * If you use Material Design as uiLibrary, then the iconsLibrary is set to Material Icons by default.<br/>
         * The css files for Material Icons, Font Awesome or Glyphicons should be manually included to the page where the grid is in use.
         * @type (materialicons|fontawesome|glyphicons)
         * @default 'materialicons'
         * @example Bootstrap.Material.Icons <!-- bootstrap, dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     var dropdown = $('#dropdown').dropdown({
         *         dataSource: '/Locations/Get',
         *         uiLibrary: 'bootstrap',
         *         iconsLibrary: 'materialicons',
         *         valueField: 'id'
         *     });
         * </script>
         * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, dropdown -->
         * <select id="dropdown" width="200"></select>
         * <script>
         *     var dropdown = $('#dropdown').dropdown({
         *         dataSource: '/Locations/Get',
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome',
         *         valueField: 'id'
         *     });
         * </script>
         */iconsLibrary:'materialicons',icons:{/** DropDown icon definition.
             * @alias icons.dropdown
             * @type String
             * @default '<i class="gj-icon arrow-dropdown" />'
             * @example Custom.Material.Icon <!-- materialicons, dropdown -->
             * <select id="dropdown"></select>
             * <script>
             *     var dropdown = $('#dropdown').dropdown({
             *         dataSource: '/Locations/Get',
             *         valueField: 'id',
             *         width: 200,
             *         icons: { 
             *             dropdown: '<i class="material-icons">keyboard_arrow_down</i>'
             *         }
             *     });
             * </script>
             * @example Custom.Glyphicon.Icon <!-- bootstrap, dropdown -->
             * <select id="dropdown"></select>
             * <script>
             *     var dropdown = $('#dropdown').dropdown({
             *         dataSource: '/Locations/Get',
             *         valueField: 'id',
             *         uiLibrary: 'bootstrap',
             *         width: 200,
             *         icons: { 
             *             dropdown: '<span class="glyphicon glyphicon-triangle-bottom" />'
             *         }
             *     });
             * </script>
             */dropdown:'<i class="gj-icon arrow-dropdown" />',dropup:'<i class="gj-icon arrow-dropup" />'},style:{wrapper:'gj-dropdown gj-dropdown-md gj-unselectable',list:'gj-list gj-list-md gj-dropdown-list-md',active:'gj-list-md-active'}},bootstrap:{style:{wrapper:'gj-dropdown gj-dropdown-bootstrap gj-dropdown-bootstrap-3 gj-unselectable',presenter:'btn btn-default',list:'gj-list gj-list-bootstrap gj-dropdown-list-bootstrap list-group',item:'list-group-item',active:'active'},iconsLibrary:'glyphicons'},bootstrap4:{style:{wrapper:'gj-dropdown gj-dropdown-bootstrap gj-dropdown-bootstrap-4 gj-unselectable',presenter:'btn btn-outline-secondary',list:'gj-list gj-list-bootstrap gj-dropdown-list-bootstrap list-group',item:'list-group-item',active:'active'}},materialicons:{style:{expander:'gj-dropdown-expander-mi'}},fontawesome:{icons:{dropdown:'<i class="fa fa-caret-down" aria-hidden="true"></i>',dropup:'<i class="fa fa-caret-up" aria-hidden="true"></i>'},style:{expander:'gj-dropdown-expander-fa'}},glyphicons:{icons:{dropdown:'<span class="caret"></span>',dropup:'<span class="dropup"><span class="caret" ></span></span>'},style:{expander:'gj-dropdown-expander-glyphicons'}}};gj.dropdown.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'dropdown');this.attr('data-dropdown','true');gj.dropdown.methods.initialize(this);return this;},getHTMLConfig:function getHTMLConfig(){var result=gj.widget.prototype.getHTMLConfig.call(this),attrs=this[0].attributes;if(attrs['placeholder']){result.placeholder=attrs['placeholder'].value;}return result;},initialize:function initialize($dropdown){var $item,data=$dropdown.data(),$wrapper=$dropdown.parent('div[role="wrapper"]'),$display=$('<span role="display"></span>'),$expander=$('<span role="expander">'+data.icons.dropdown+'</span>').addClass(data.style.expander),$presenter=$('<button role="presenter" type="button"></button>').addClass(data.style.presenter),$list=$('<ul role="list" class="'+data.style.list+'"></ul>').attr('guid',$dropdown.attr('data-guid'));if($wrapper.length===0){$wrapper=$('<div role="wrapper" />').addClass(data.style.wrapper);// The css class needs to be added before the wrapping, otherwise doesn't work.
$dropdown.wrap($wrapper);}else{$wrapper.addClass(data.style.wrapper);}if(data.fontSize){$presenter.css('font-size',data.fontSize);}$presenter.on('click',function(e){if($list.is(':visible')){gj.dropdown.methods.close($dropdown,$list);}else{gj.dropdown.methods.open($dropdown,$list);}});$presenter.on('blur',function(e){setTimeout(function(){gj.dropdown.methods.close($dropdown,$list);},500);});$presenter.append($display).append($expander);$dropdown.hide();$dropdown.after($presenter);$('body').append($list);$list.hide();$dropdown.reload();},setListPosition:function setListPosition(presenter,list,data){var top,listHeight,presenterHeight,newHeight,listElRect,mainElRect=presenter.getBoundingClientRect(),scrollY=window.scrollY||window.pageYOffset||0,scrollX=window.scrollX||window.pageXOffset||0;// Reset list size
list.style.overflow='';list.style.overflowX='';list.style.height='';gj.core.setChildPosition(presenter,list);listHeight=gj.core.height(list,true);listElRect=list.getBoundingClientRect();presenterHeight=gj.core.height(presenter,true);if(data.maxHeight==='auto'){if(mainElRect.top<listElRect.top){// The list is located below the main element
if(mainElRect.top+listHeight+presenterHeight>window.innerHeight){newHeight=window.innerHeight-mainElRect.top-presenterHeight-3;}}else{// The list is located above the main element                
if(mainElRect.top-listHeight-3>0){list.style.top=Math.round(mainElRect.top+scrollY-listHeight-3)+'px';}else{list.style.top=scrollY+'px';newHeight=mainElRect.top-3;}}}else if(!isNaN(data.maxHeight)&&data.maxHeight<listHeight){newHeight=data.maxHeight;}if(newHeight){list.style.overflow='scroll';list.style.overflowX='hidden';list.style.height=newHeight+'px';}},useHtmlDataSource:function useHtmlDataSource($dropdown,data){var dataSource=[],i,record,$options=$dropdown.find('option');for(i=0;i<$options.length;i++){record={};record[data.valueField]=$options[i].value;record[data.textField]=$options[i].innerHTML;record[data.selectedField]=$dropdown[0].value===$options[i].value;dataSource.push(record);}data.dataSource=dataSource;},filter:function filter($dropdown){var i,record,data=$dropdown.data();if(!data.dataSource){data.dataSource=[];}else if(typeof data.dataSource[0]==='string'){for(i=0;i<data.dataSource.length;i++){record={};record[data.valueField]=data.dataSource[i];record[data.textField]=data.dataSource[i];data.dataSource[i]=record;}}return data.dataSource;},render:function render($dropdown,response){var selections=[],data=$dropdown.data(),$parent=$dropdown.parent(),$list=$('body').children('[role="list"][guid="'+$dropdown.attr('data-guid')+'"]'),$presenter=$parent.children('[role="presenter"]'),$expander=$presenter.children('[role="expander"]'),$display=$presenter.children('[role="display"]');$dropdown.data('records',response);$dropdown.empty();$list.empty();if(response&&response.length){$.each(response,function(){var value=this[data.valueField],text=this[data.textField],selected=this[data.selectedField]&&this[data.selectedField].toString().toLowerCase()==='true',i,$item;$item=$('<li value="'+value+'"><div data-role="wrapper"><span data-role="display">'+text+'</span></div></li>');$item.addClass(data.style.item);$item.on('click',function(e){gj.dropdown.methods.select($dropdown,value);});$list.append($item);$dropdown.append('<option value="'+value+'">'+text+'</option>');if(selected){selections.push(value);}});if(selections.length===0){$dropdown.prepend('<option value=""></option>');$dropdown[0].selectedIndex=0;if(data.placeholder){$display[0].innerHTML='<span class="placeholder">'+data.placeholder+'</span>';}}else{for(i=0;i<selections.length;i++){gj.dropdown.methods.select($dropdown,selections[i]);}}}if(data.width){$parent.css('width',data.width);$presenter.css('width',data.width);}if(data.fontSize){$list.children('li').css('font-size',data.fontSize);}gj.dropdown.events.dataBound($dropdown);return $dropdown;},open:function open($dropdown,$list){var data=$dropdown.data(),$expander=$dropdown.parent().find('[role="expander"]'),$presenter=$dropdown.parent().find('[role="presenter"]'),scrollParentEl=gj.core.getScrollParent($dropdown[0]);$list.css('width',gj.core.width($presenter[0]));$list.show();gj.dropdown.methods.setListPosition($presenter[0],$list[0],data);$expander.html(data.icons.dropup);if(scrollParentEl){data.parentScrollHandler=function(){gj.dropdown.methods.setListPosition($presenter[0],$list[0],data);};gj.dropdown.methods.addParentsScrollListener(scrollParentEl,data.parentScrollHandler);}},close:function close($dropdown,$list){var data=$dropdown.data(),$expander=$dropdown.parent().find('[role="expander"]'),scrollParentEl=gj.core.getScrollParent($dropdown[0]);$expander.html(data.icons.dropdown);if(scrollParentEl&&data.parentScrollHandler){gj.dropdown.methods.removeParentsScrollListener(scrollParentEl,data.parentScrollHandler);}$list.hide();},addParentsScrollListener:function addParentsScrollListener(el,handler){var scrollParentEl=gj.core.getScrollParent(el.parentNode);el.addEventListener('scroll',handler);if(scrollParentEl){gj.dropdown.methods.addParentsScrollListener(scrollParentEl,handler);}},removeParentsScrollListener:function removeParentsScrollListener(el,handler){var scrollParentEl=gj.core.getScrollParent(el.parentNode);el.removeEventListener('scroll',handler);if(scrollParentEl){gj.dropdown.methods.removeParentsScrollListener(scrollParentEl,handler);}},select:function select($dropdown,value){var data=$dropdown.data(),$list=$('body').children('[role="list"][guid="'+$dropdown.attr('data-guid')+'"]'),$item=$list.children('li[value="'+value+'"]'),$display=$dropdown.next('[role="presenter"]').find('[role="display"]'),record=gj.dropdown.methods.getRecordByValue($dropdown,value);$list.children('li').removeClass(data.style.active);if(record){$item.addClass(data.style.active);$dropdown[0].value=value;$display[0].innerHTML=record[data.textField];}else{if(data.placeholder){$display[0].innerHTML='<span class="placeholder">'+data.placeholder+'</span>';}$dropdown[0].value='';}gj.dropdown.events.change($dropdown);gj.dropdown.methods.close($dropdown,$list);return $dropdown;},getRecordByValue:function getRecordByValue($dropdown,value){var data=$dropdown.data(),i,result=undefined;for(i=0;i<data.records.length;i++){if(data.records[i][data.valueField]===value){result=data.records[i];break;}}return result;},value:function value($dropdown,_value){if(typeof _value==="undefined"){return $dropdown.val();}else{gj.dropdown.methods.select($dropdown,_value);return $dropdown;}},destroy:function destroy($dropdown){var data=$dropdown.data(),$parent=$dropdown.parent('div[role="wrapper"]');if(data){$dropdown.xhr&&$dropdown.xhr.abort();$dropdown.off();$dropdown.removeData();$dropdown.removeAttr('data-type').removeAttr('data-guid').removeAttr('data-dropdown');$dropdown.removeClass();if($parent.length>0){$parent.children('[role="presenter"]').remove();$parent.children('[role="list"]').remove();$dropdown.unwrap();}$dropdown.show();}return $dropdown;}};gj.dropdown.events={/**
     * Triggered when the dropdown value is changed.
     *
     * @event change
     * @param {object} e - event data
     * @example sample <!-- dropdown, materialicons -->
     * <select id="dropdown" width="200">
     *     <option value="1">One</option>
     *     <option value="2" selected>Two</option>
     *     <option value="3">Three</option>
     * </select>
     * <script>
     *     $('#dropdown').dropdown({
     *         change: function (e) {
     *             alert('Change is fired');
     *         }
     *     });
     * </script>
     */change:function change($dropdown){return $dropdown.triggerHandler('change');},/**
     * Event fires after the loading of the data in the dropdown.
     * @event dataBound
     * @param {object} e - event data
     * @example sample <!-- dropdown, materialicons -->
     * <select id="dropdown" width="200">
     *     <option value="1">One</option>
     *     <option value="2" selected>Two</option>
     *     <option value="3">Three</option>
     * </select>
     * <script>
     *     $('#dropdown').dropdown({
     *         dataBound: function (e) {
     *             alert('dataBound is fired.');
     *         }
     *     });
     * </script>
     */dataBound:function dataBound($dropdown){return $dropdown.triggerHandler('dataBound');}};gj.dropdown.widget=function($element,jsConfig){var self=this,methods=gj.dropdown.methods;/** Gets or sets the value of the DropDown.
     * @method
     * @param {string} value - The value that needs to be selected.
     * @return string
     * @example Get <!-- dropdown, materialicons -->
     * <button class="gj-button-md" onclick="alert($dropdown.value())">Get Value</button>
     * <hr/>
     * <select id="dropdown" width="200">
     *     <option value="1">One</option>
     *     <option value="2" selected>Two</option>
     *     <option value="3">Three</option>
     * </select>
     * <script>
     *     var $dropdown = $('#dropdown').dropdown();
     * </script>
     * @example Set <!-- dropdown, materialicons -->
     * <button class="gj-button-md" onclick="$dropdown.value('3')">Set Value</button>
     * <hr/>
     * <select id="dropdown" width="200">
     *     <option value="1">One</option>
     *     <option value="2" selected>Two</option>
     *     <option value="3">Three</option>
     * </select>
     * <script>
     *     var $dropdown = $('#dropdown').dropdown();
     * </script>
     */self.value=function(value){return methods.value(this,value);};self.enable=function(){return methods.enable(this);};self.disable=function(){return methods.disable(this);};/** Remove dropdown functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- dropdown, materialicons -->
     * <button class="gj-button-md" onclick="dropdown.destroy()">Destroy</button>
     * <select id="dropdown" width="200">
     *     <option value="1">One</option>
     *     <option value="2" selected>Two</option>
     *     <option value="3">Three</option>
     * </select>
     * <script>
     *     var dropdown = $('#dropdown').dropdown();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};$.extend($element,self);if('true'!==$element.attr('data-dropdown')){methods.init.call($element,jsConfig);}return $element;};gj.dropdown.widget.prototype=new gj.widget();gj.dropdown.widget.constructor=gj.dropdown.widget;gj.dropdown.widget.prototype.getHTMLConfig=gj.dropdown.methods.getHTMLConfig;(function($){$.fn.dropdown=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.dropdown.widget(this,method);}else{$widget=new gj.dropdown.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery gj */ /**
  * @widget DatePicker
  * @plugin Base
  */gj.datepicker={plugins:{}};gj.datepicker.config={base:{/** Whether to display dates in other months at the start or end of the current month.
         * @additionalinfo Set to true by default for Bootstrap.
         * @type Boolean
         * @default false
         * @example True <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    var datepicker = $('#datepicker').datepicker({ 
         *        showOtherMonths: true
         *    });
         * </script>
         * @example False <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *     $('#datepicker').datepicker({
         *         showOtherMonths: false
         *     });
         * </script>
         */showOtherMonths:false,/** Whether days in other months shown before or after the current month are selectable.
         * This only applies if the showOtherMonths option is set to true.
         * @type Boolean
         * @default true
         * @example True <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        showOtherMonths: true,
         *        selectOtherMonths: true
         *    });
         * </script>
         * @example False <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *     $('#datepicker').datepicker({ 
         *        showOtherMonths: true,
         *        selectOtherMonths: false
         *     });
         * </script>
         */selectOtherMonths:true,/** The width of the datepicker.
         * @type number
         * @default undefined
         * @example JS.Config <!-- datepicker -->
         * <input id="datepicker" />
         * <script>
         *    $('#datepicker').datepicker({ width: 312 });
         * </script>
         * @example HTML.Config <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker();
         * </script>
         */width:undefined,/** The minimum selectable date. When not set, there is no minimum.
         * @additionalinfo If the minDate is set by string, then the date in the string needs to follow the format specified by the 'format' configuration option.
         * @type Date|String|Function
         * @default undefined
         * @example Today <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    var today, datepicker;
         *    today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
         *    datepicker = $('#datepicker').datepicker({
         *        minDate: today
         *    });
         * </script>
         * @example Yesterday <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *     $('#datepicker').datepicker({
         *        minDate: function() {
         *            var date = new Date();
         *            date.setDate(date.getDate()-1);
         *            return new Date(date.getFullYear(), date.getMonth(), date.getDate());
         *        }
         *     });
         * </script>
         * @example Bootstrap <!-- bootstrap, datepicker -->
         * <input id="datepicker" width="220" />
         * <script>
         *     $('#datepicker').datepicker({
         *        format: 'yyyy-mm-dd',
         *        value: '2017-12-15',
         *        minDate: '2017-12-12',
         *        uiLibrary: 'bootstrap'
         *     });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *     $('#datepicker').datepicker({
         *        value: '12/15/2017',
         *        minDate: '12/12/2017',
         *        uiLibrary: 'bootstrap4'
         *     });
         * </script>
         */minDate:undefined,/** The maximum selectable date. When not set, there is no maximum
         * @type Date|String|Function
         * @default undefined
         * @example Today <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    var today, datepicker;
         *    today = new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
         *    datepicker = $('#datepicker').datepicker({
         *        maxDate: today
         *    });
         * </script>
         * @example Tomorrow <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *     $('#datepicker').datepicker({ 
         *        maxDate: function() {
         *            var date = new Date();
         *            date.setDate(date.getDate()+1);
         *            return new Date(date.getFullYear(), date.getMonth(), date.getDate());
         *        }
         *     });
         * </script>
         */maxDate:undefined,/** Specifies the format, which is used to format the value of the DatePicker displayed in the input.
         * @additionalinfo <b>d</b> - Day of the month as digits; no leading zero for single-digit days.<br/>
         * <b>dd</b> - Day of the month as digits; leading zero for single-digit days.<br/>
         * <b>ddd</b> - Day of the week as a three-letter abbreviation.<br/>
         * <b>dddd</b> - Day of the week as its full name.<br/>
         * <b>m</b> - Month as digits; no leading zero for single-digit months.<br/>
         * <b>mm</b> - Month as digits; leading zero for single-digit months.<br/>
         * <b>mmm</b> - Month as a three-letter abbreviation.<br/>
         * <b>mmmm</b> - Month as its full name.<br/>
         * <b>yy</b> - Year as last two digits; leading zero for years less than 10.<br/>
         * <b>yyyy</b> - Year represented by four digits.<br/>
         * @type String
         * @default 'mm/dd/yyyy'
         * @example Sample <!-- datepicker -->
         * <input id="datepicker" value="2017-25-07" width="312" />
         * <script>
         *     $('#datepicker').datepicker({ format: 'yyyy-dd-mm' });
         * </script>
         * @example Short.Month.Format <!-- datepicker -->
         * <input id="datepicker" value="10 Oct 2017" width="312" />
         * <script>
         *     $('#datepicker').datepicker({ format: 'dd mmm yyyy' });
         * </script>
         * @example Long.Month.Format <!-- datepicker -->
         * <input id="datepicker" value="10 October 2017" width="312" />
         * <script>
         *     $('#datepicker').datepicker({ format: 'dd mmmm yyyy' });
         * </script>
         */format:'mm/dd/yyyy',/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    var datepicker = $('#datepicker').datepicker({ uiLibrary: 'materialdesign' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, datepicker -->
         * <input id="datepicker" width="220" />
         * <script>
         *     $('#datepicker').datepicker({ uiLibrary: 'bootstrap' });
         * </script>
         * @example Bootstrap.4.Material.Icons <!-- bootstrap4, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *     $('#datepicker').datepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'materialicons' });
         * </script>
         * @example Bootstrap.4.FontAwesome <!-- fontawesome, bootstrap4, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *     $('#datepicker').datepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome' });
         * </script>
         */uiLibrary:'materialdesign',/** The name of the icons library that is going to be in use. Currently we support Material Icons, Font Awesome and Glyphicons.
         * @additionalinfo If you use Bootstrap 3 as uiLibrary, then the iconsLibrary is set to Glyphicons by default.<br/>
         * If you use Material Design as uiLibrary, then the iconsLibrary is set to Material Icons by default.<br/>
         * The css files for Material Icons, Font Awesome or Glyphicons should be manually included to the page where the grid is in use.
         * @type (materialicons|fontawesome|glyphicons)
         * @default 'materialicons'
         * @example Bootstrap.Font.Awesome <!-- bootstrap, fontawesome, datepicker -->
         * <input id="datepicker" width="220" />
         * <script>
         *     $('#datepicker').datepicker({
         *         uiLibrary: 'bootstrap',
         *         iconsLibrary: 'fontawesome'
         *     });
         * </script>
         * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *     $('#datepicker').datepicker({
         *         uiLibrary: 'bootstrap4',
         *         iconsLibrary: 'fontawesome'
         *     });
         * </script>
         */iconsLibrary:'materialicons',/** The initial datepicker value.
         * @type String
         * @default undefined
         * @example Javascript <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        value: '01/01/2018'
         *    });
         * </script>
         * @example HTML <!-- datepicker -->
         * <input id="datepicker" width="312" value="01/01/2018" />
         * <script>
         *     $('#datepicker').datepicker();
         * </script>
         */value:undefined,/** Day of the week start. 0 (Sunday) to 6 (Saturday)
         * @type Number
         * @default 0
         * @example Monday <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        weekStartDay: 1
         *    });
         * </script>
         * @example Saturday <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        weekStartDay: 6
         *    });
         * </script>
         */weekStartDay:0,/** An array or function that will be used to determine which dates to be disabled for selection by the widget.
         * @type Array|Function
         * @default undefined
         * @example Array <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        value: '11/10/2017',
         *        disableDates: [new Date(2017,10,11), '11/12/2017']
         *    });
         * </script>
         * @example Function <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        value: '11/11/2017',
         *        disableDates:  function (date) {
         *            var disabled = [10,15,20,25];
         *            if (disabled.indexOf(date.getDate()) == -1 ) {
         *                return true;
         *            } else {
         *                return false;
         *            }
         *        }
         *    });
         * </script>
         */disableDates:undefined,/** An array that will be used to determine which days of week to be disabled for selection by the widget.
         * The array needs to contains only numbers where 0 is Sunday, 1 is Monday and etc.
         * @type Array
         * @default undefined
         * @example Saturday.Sunday <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        disableDaysOfWeek: [0, 6]
         *    });
         * </script>
         */disableDaysOfWeek:undefined,/** Whether to display week number in year on the left side of the calendar.
         * @type Boolean
         * @default false
         * @example Material.Design <!-- datepicker -->
         * <input id="datepicker" width="356" />
         * <script>
         *    $('#datepicker').datepicker({ calendarWeeks: true, modal: true, footer: true });
         * </script>
         * @example Bootstrap <!-- datepicker, bootstrap -->
         * <input id="datepicker" width="220" />
         * <script>
         *    $('#datepicker').datepicker({ calendarWeeks: true, uiLibrary: 'bootstrap' });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *    $('#datepicker').datepicker({ calendarWeeks: true, uiLibrary: 'bootstrap4' });
         * </script>
         */calendarWeeks:false,/** Whether to enable keyboard navigation.
         * @type Boolean
         * @default true
         * @example Material.Design <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({
         *        keyboardNavigation: true
         *    });
         * </script>
         * @example Material.Design.Modal <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ keyboardNavigation: true, modal: true, header: true, footer: true });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *    $('#datepicker').datepicker({
         *        uiLibrary: 'bootstrap4',
         *        keyboardNavigation: true,
         *        showOtherMonths: true
         *    });
         * </script>
         */keyboardNavigation:true,/** The language that needs to be in use.
         * @type string
         * @default 'en-us'
         * @example German <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'de-de',
         *        format: 'dd mmm yyyy'
         *    });
         * </script>
         * @example Bulgarian <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'bg-bg',
         *        format: 'dd mmm yyyy',
         *        weekStartDay: 1
         *    });
         * </script>
         * @example French <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'fr-fr',
         *        format: 'dd mmm yyyy'
         *    });
         * </script>
         * @example Brazil <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'pt-br',
         *        format: 'dd mmm yyyy'
         *    });
         * </script>
         * @example Russian <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'ru-ru',
         *        format: 'dd mmm yyyy'
         *    });
         * </script>
         * @example Spanish <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'es-es',
         *        format: 'dd/mm/yyyy'
         *    });
         * </script>
         * @example Italian <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'it-it',
         *        format: 'dd/mm/yyyy'
         *    });
         * </script>
         * @example Japanise <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'ja-jp',
         *        format: 'dd mmmm yyyy'
         *    });
         * </script>
         * @example Chinise_Simplified <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'zh-cn',
         *        format: 'dd mmmm yyyy'
         *    });
         * </script>
         * @example Chinise_Traditional <!-- datepicker -->
         * <input id="datepicker" width="276" />
         * <script>
         *    $('#datepicker').datepicker({
         *        locale: 'zh-tw',
         *        format: 'dd mmmm yyyy'
         *    });
         * </script>
         */locale:'en-us',icons:{/** datepicker icon definition.
             * @alias icons.rightIcon
             * @type String
             * @default '<i class="gj-icon event" />'
             * @example Custom.Material.Icon <!-- materialicons, datepicker -->
             * <input id="datepicker" width="312" />
             * <script>
             *     $('#datepicker').datepicker({
             *         icons: { 
             *             rightIcon: '<i class="material-icons">date_range</i>'
             *         }
             *     });
             * </script>
             * @example Custom.Glyphicon.Icon <!-- bootstrap, datepicker -->
             * <input id="datepicker" width="220" />
             * <script>
             *     $('#datepicker').datepicker({
             *         uiLibrary: 'bootstrap',
             *         icons: {
             *             rightIcon: '<span class="glyphicon glyphicon-chevron-down"></span>'
             *         }
             *     });
             * </script>
             * @example Bootstrap.4 <!-- bootstrap4, materialicons, datepicker -->
             * <input id="datepicker" width="234" />
             * <script>
             *     $('#datepicker').datepicker({
             *         uiLibrary: 'bootstrap4',
             *         icons: {
             *             rightIcon: '<i class="material-icons">date_range</i>'
             *         }
             *     });
             * </script>
             */rightIcon:'<i class="gj-icon">event</i>',previousMonth:'<i class="gj-icon chevron-left"></i>',nextMonth:'<i class="gj-icon chevron-right"></i>'},fontSize:undefined,/** The size of the datepicker input.
         * @type 'small'|'default'|'large'
         * @default 'default'
         * @example Bootstrap.4 <!-- bootstrap4, datepicker -->
         * <p><label for="datepicker-small">Small Size:</label> <input id="datepicker-small" width="234" value="03/20/2018" /></p>
         * <p><label for="datepicker-default">Default Size:</label> <input id="datepicker-default" width="234" value="03/20/2018" /></p>
         * <p><label for="datepicker-large">Large Size:</label> <input id="datepicker-large" width="234" value="03/20/2018" /></p>
         * <script>
         *     $('#datepicker-small').datepicker({ uiLibrary: 'bootstrap4', size: 'small' });
         *     $('#datepicker-default').datepicker({ uiLibrary: 'bootstrap4', size: 'default' });
         *     $('#datepicker-large').datepicker({ uiLibrary: 'bootstrap4', size: 'large' });
         * </script>
         * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, datepicker -->
         * <p><label for="datepicker-small">Small Size:</label> <input id="datepicker-small" width="234" value="03/20/2018" /></p>
         * <p><label for="datepicker-default">Default Size:</label> <input id="datepicker-default" width="234" value="03/20/2018" /></p>
         * <p><label for="datepicker-large">Large Size:</label> <input id="datepicker-large" width="234" value="03/20/2018" /></p>
         * <script>
         *     $('#datepicker-small').datepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome', size: 'small' });
         *     $('#datepicker-default').datepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome', size: 'default' });
         *     $('#datepicker-large').datepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome', size: 'large' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, datepicker -->
         * <p><label for="datepicker-small">Small Size:</label> <input id="datepicker-small" width="220" value="03/20/2018" /></p>
         * <p><label for="datepicker-default">Default Size:</label> <input id="datepicker-default" width="220" value="03/20/2018" /></p>
         * <p><label for="datepicker-large">Large Size:</label> <input id="datepicker-large" width="220" value="03/20/2018" /></p>
         * <script>
         *     $('#datepicker-small').datepicker({ uiLibrary: 'bootstrap', size: 'small' });
         *     $('#datepicker-default').datepicker({ uiLibrary: 'bootstrap', size: 'default' });
         *     $('#datepicker-large').datepicker({ uiLibrary: 'bootstrap', size: 'large' });
         * </script>
         * @example Material.Design <!-- datepicker -->
         * <p><label for="datepicker-small">Small Size:</label> <input id="datepicker-small" width="276" value="03/20/2018" /></p>
         * <p><label for="datepicker-default">Default Size:</label> <input id="datepicker-default" width="276" value="03/20/2018" /></p>
         * <p><label for="datepicker-large">Large Size:</label> <input id="datepicker-large" width="276" value="03/20/2018" /></p>
         * <script>
         *     $('#datepicker-small').datepicker({ size: 'small' });
         *     $('#datepicker-default').datepicker({ size: 'default' });
         *     $('#datepicker-large').datepicker({ size: 'large' });
         * </script>
         */size:'default',/** If set to true, the datepicker will have modal behavior.
         * @type Boolean
         * @default false
         * @example Material.Design <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ modal: true });
         * </script>
         * @example Bootstrap <!-- bootstrap, datepicker -->
         * <input id="datepicker" width="220" />
         * <script>
         *    $('#datepicker').datepicker({ uiLibrary: 'bootstrap', modal: true, header: true, footer: true });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, datepicker -->
         * <input id="datepicker" width="234" />
         * <script>
         *    $('#datepicker').datepicker({ uiLibrary: 'bootstrap4', modal: true, header: true, footer: true });
         * </script>
         */modal:false,/** If set to true, add header to the datepicker.
         * @type Boolean
         * @default false
         * @example True <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ header: true, modal: true, footer: true });
         * </script>
         * @example False <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ header: false });
         * </script>
         */header:false,/** If set to true, add footer with ok and cancel buttons to the datepicker.
         * @type Boolean
         * @default false
         * @example True <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ footer: true, modal: true, header: true });
         * </script>
         * @example False <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ footer: false });
         * </script>
         */footer:false,/** If set to true, show datepicker on input focus.
         * @type Boolean
         * @default true
         * @example True <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ showOnFocus: true, showRightIcon: false });
         * </script>
         * @example False <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ showOnFocus: false });
         * </script>
         */showOnFocus:true,/** If set to true, show datepicker icon on the right side of the input.
         * @type Boolean
         * @default true
         * @example False <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ showOnFocus: true, showRightIcon: false });
         * </script>
         * @example True <!-- datepicker -->
         * <input id="datepicker" width="312" />
         * <script>
         *    $('#datepicker').datepicker({ showRightIcon: true });
         * </script>
         */showRightIcon:true,style:{modal:'gj-modal',wrapper:'gj-datepicker gj-datepicker-md gj-unselectable',input:'gj-textbox-md',calendar:'gj-picker gj-picker-md datepicker gj-unselectable',footer:'',button:'gj-button-md'}},bootstrap:{style:{wrapper:'gj-datepicker gj-datepicker-bootstrap gj-unselectable input-group',input:'form-control',calendar:'gj-picker gj-picker-bootstrap datepicker gj-unselectable',footer:'modal-footer',button:'btn btn-default'},iconsLibrary:'glyphicons',showOtherMonths:true},bootstrap4:{style:{wrapper:'gj-datepicker gj-datepicker-bootstrap gj-unselectable input-group',input:'form-control',calendar:'gj-picker gj-picker-bootstrap datepicker gj-unselectable',footer:'modal-footer',button:'btn btn-default'},showOtherMonths:true},fontawesome:{icons:{rightIcon:'<i class="fa fa-calendar" aria-hidden="true"></i>',previousMonth:'<i class="fa fa-chevron-left" aria-hidden="true"></i>',nextMonth:'<i class="fa fa-chevron-right" aria-hidden="true"></i>'}},glyphicons:{icons:{rightIcon:'<span class="glyphicon glyphicon-calendar"></span>',previousMonth:'<span class="glyphicon glyphicon-chevron-left"></span>',nextMonth:'<span class="glyphicon glyphicon-chevron-right"></span>'}}};gj.datepicker.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'datepicker');this.attr('data-datepicker','true');gj.datepicker.methods.initialize(this,this.data());return this;},initialize:function initialize($datepicker,data){var $calendar,$rightIcon,$wrapper=$datepicker.parent('div[role="wrapper"]');if($wrapper.length===0){$wrapper=$('<div role="wrapper" />').addClass(data.style.wrapper);// The css class needs to be added before the wrapping, otherwise doesn't work.
$datepicker.wrap($wrapper);}else{$wrapper.addClass(data.style.wrapper);}$wrapper=$datepicker.parent('div[role="wrapper"]');data.width&&$wrapper.css('width',data.width);$datepicker.val(data.value).addClass(data.style.input).attr('role','input');data.fontSize&&$datepicker.css('font-size',data.fontSize);if(data.uiLibrary==='bootstrap'||data.uiLibrary==='bootstrap4'){if(data.size==='small'){$wrapper.addClass('input-group-sm');$datepicker.addClass('form-control-sm');}else if(data.size==='large'){$wrapper.addClass('input-group-lg');$datepicker.addClass('form-control-lg');}}else{if(data.size==='small'){$wrapper.addClass('small');}else if(data.size==='large'){$wrapper.addClass('large');}}if(data.showRightIcon){if(data.uiLibrary==='bootstrap'){$rightIcon=$('<span class="input-group-addon">'+data.icons.rightIcon+'</span>');}else if(data.uiLibrary==='bootstrap4'){$rightIcon=$('<span class="input-group-append"><button class="btn btn-outline-secondary border-left-0" type="button">'+data.icons.rightIcon+'</button></span>');}else{$rightIcon=$(data.icons.rightIcon);}$rightIcon.attr('role','right-icon');$rightIcon.on('click',function(e){var $calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');if($calendar.is(':visible')){gj.datepicker.methods.close($datepicker);}else{gj.datepicker.methods.open($datepicker,data);}});$wrapper.append($rightIcon);}if(data.showOnFocus){$datepicker.on('focus',function(){gj.datepicker.methods.open($datepicker,data);});}$calendar=gj.datepicker.methods.createCalendar($datepicker,data);if(data.footer!==true){$datepicker.on('blur',function(){$datepicker.timeout=setTimeout(function(){gj.datepicker.methods.close($datepicker);},500);});$calendar.mousedown(function(){clearTimeout($datepicker.timeout);document.activeElement!==$datepicker[0]&&$datepicker.focus();return false;});$calendar.on('click',function(){clearTimeout($datepicker.timeout);document.activeElement!==$datepicker[0]&&$datepicker.focus();});}if(data.keyboardNavigation){$(document).on('keydown',gj.datepicker.methods.createKeyDownHandler($datepicker,$calendar,data));}},createCalendar:function createCalendar($datepicker,data){var date,$body,$footer,$btnCancel,$btnOk,$calendar=$('<div role="calendar" type="month"/>').addClass(data.style.calendar).attr('guid',$datepicker.attr('data-guid'));data.fontSize&&$calendar.css('font-size',data.fontSize);date=gj.core.parseDate(data.value,data.format,data.locale);if(!date||isNaN(date.getTime())){date=new Date();}else{$datepicker.attr('day',date.getFullYear()+'-'+date.getMonth()+'-'+date.getDate());}$calendar.attr('month',date.getMonth());$calendar.attr('year',date.getFullYear());gj.datepicker.methods.renderHeader($datepicker,$calendar,data,date);$body=$('<div role="body" />');$calendar.append($body);if(data.footer){$footer=$('<div role="footer" class="'+data.style.footer+'" />');$btnCancel=$('<button class="'+data.style.button+'">'+gj.core.messages[data.locale].cancel+'</button>');$btnCancel.on('click',function(){$datepicker.close();});$footer.append($btnCancel);$btnOk=$('<button class="'+data.style.button+'">'+gj.core.messages[data.locale].ok+'</button>');$btnOk.on('click',function(){var date,dayArr,dayStr=$calendar.attr('selectedDay');if(dayStr){dayArr=dayStr.split('-');date=new Date(dayArr[0],dayArr[1],dayArr[2],$calendar.attr('hour')||0,$calendar.attr('minute')||0);gj.datepicker.methods.change($datepicker,$calendar,data,date);}else{$datepicker.close();}});$footer.append($btnOk);$calendar.append($footer);}$calendar.hide();$('body').append($calendar);if(data.modal){$calendar.wrapAll('<div role="modal" class="'+data.style.modal+'"/>');gj.core.center($calendar);}return $calendar;},renderHeader:function renderHeader($datepicker,$calendar,data,date){var $header,$date,$year;if(data.header){$header=$('<div role="header" />');$year=$('<div role="year" />').on('click',function(){gj.datepicker.methods.renderDecade($datepicker,$calendar,data);$year.addClass('selected');$date.removeClass('selected');});$year.html(gj.core.formatDate(date,'yyyy',data.locale));$header.append($year);$date=$('<div role="date" class="selected" />').on('click',function(){gj.datepicker.methods.renderMonth($datepicker,$calendar,data);$date.addClass('selected');$year.removeClass('selected');});$date.html(gj.core.formatDate(date,'ddd, mmm dd',data.locale));$header.append($date);$calendar.append($header);}},updateHeader:function updateHeader($calendar,data,date){$calendar.find('[role="header"] [role="year"]').removeClass('selected').html(gj.core.formatDate(date,'yyyy',data.locale));$calendar.find('[role="header"] [role="date"]').addClass('selected').html(gj.core.formatDate(date,'ddd, mmm dd',data.locale));$calendar.find('[role="header"] [role="hour"]').removeClass('selected').html(gj.core.formatDate(date,'HH',data.locale));$calendar.find('[role="header"] [role="minute"]').removeClass('selected').html(gj.core.formatDate(date,'MM',data.locale));},createNavigation:function createNavigation($datepicker,$body,$table,data){var $row,$navigator,$thead=$('<thead/>');$navigator=$('<div role="navigator" />');$navigator.append($('<div>'+data.icons.previousMonth+'</div>').on('click',gj.datepicker.methods.prev($datepicker,data)));$navigator.append($('<div role="period"></div>').on('click',gj.datepicker.methods.changePeriod($datepicker,data)));$navigator.append($('<div>'+data.icons.nextMonth+'</div>').on('click',gj.datepicker.methods.next($datepicker,data)));$body.append($navigator);$row=$('<tr role="week-days" />');if(data.calendarWeeks){$row.append('<th><div>&nbsp;</div></th>');}for(i=data.weekStartDay;i<gj.core.messages[data.locale].weekDaysMin.length;i++){$row.append('<th><div>'+gj.core.messages[data.locale].weekDaysMin[i]+'</div></th>');}for(i=0;i<data.weekStartDay;i++){$row.append('<th><div>'+gj.core.messages[data.locale].weekDaysMin[i]+'</div></th>');}$thead.append($row);$table.append($thead);},renderMonth:function renderMonth($datepicker,$calendar,data){var weekDay,selectedDay,day,month,year,daysInMonth,total,firstDayPosition,i,now,prevMonth,nextMonth,$cell,$day,date,$body=$calendar.children('[role="body"]'),$table=$('<table/>'),$tbody=$('<tbody/>'),period=gj.core.messages[data.locale].titleFormat;$body.off().empty();gj.datepicker.methods.createNavigation($datepicker,$body,$table,data);month=parseInt($calendar.attr('month'),10);year=parseInt($calendar.attr('year'),10);$calendar.attr('type','month');period=period.replace('mmmm',gj.core.messages[data.locale].monthNames[month]).replace('yyyy',year);$calendar.find('div[role="period"]').text(period);daysInMonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31);if(year%4==0&&year!=1900){daysInMonth[1]=29;}total=daysInMonth[month];firstDayPosition=(new Date(year,month,1).getDay()+7-data.weekStartDay)%7;weekDay=0;$row=$('<tr />');prevMonth=gj.datepicker.methods.getPrevMonth(month,year);for(i=1;i<=firstDayPosition;i++){day=daysInMonth[prevMonth.month]-firstDayPosition+i;date=new Date(prevMonth.year,prevMonth.month,day);if(data.calendarWeeks&&i===1){$row.append('<td class="calendar-week"><div>'+gj.datepicker.methods.getWeekNumber(date)+'</div></td>');}$cell=$('<td class="other-month" />');if(data.showOtherMonths){$day=$('<div>'+day+'</div>');$cell.append($day);if(data.selectOtherMonths&&gj.datepicker.methods.isSelectable(data,date)){$cell.addClass('gj-cursor-pointer').attr('day',day).attr('month',prevMonth.month).attr('year',prevMonth.year);$day.on('click',gj.datepicker.methods.dayClickHandler($datepicker,$calendar,data,date));$day.on('mousedown',function(e){e.stopPropagation();});}else{$cell.addClass('disabled');}}$row.append($cell);weekDay++;}if(i>1){$tbody.append($row);}now=new Date();for(i=1;i<=total;i++){date=new Date(year,month,i);if(weekDay==0){$row=$('<tr>');if(data.calendarWeeks){$row.append('<td class="calendar-week"><div>'+gj.datepicker.methods.getWeekNumber(date)+'</div></td>');}}$cell=$('<td day="'+i+'" month="'+month+'" year="'+year+'" />');if(year===now.getFullYear()&&month===now.getMonth()&&i===now.getDate()){$cell.addClass('today');}else{$cell.addClass('current-month');}$day=$('<div>'+i+'</div>');if(gj.datepicker.methods.isSelectable(data,date)){$cell.addClass('gj-cursor-pointer');$day.on('click',gj.datepicker.methods.dayClickHandler($datepicker,$calendar,data,date));$day.on('mousedown',function(e){e.stopPropagation();});}else{$cell.addClass('disabled');}$cell.append($day);$row.append($cell);weekDay++;if(weekDay==7){$tbody.append($row);weekDay=0;}}nextMonth=gj.datepicker.methods.getNextMonth(month,year);for(i=1;weekDay!=0;i++){date=new Date(nextMonth.year,nextMonth.month,i);$cell=$('<td class="other-month" />');if(data.showOtherMonths){$day=$('<div>'+i+'</div>');if(data.selectOtherMonths&&gj.datepicker.methods.isSelectable(data,date)){$cell.addClass('gj-cursor-pointer').attr('day',i).attr('month',nextMonth.month).attr('year',nextMonth.year);$day.on('click',gj.datepicker.methods.dayClickHandler($datepicker,$calendar,data,date));$day.on('mousedown',function(e){e.stopPropagation();});}else{$cell.addClass('disabled');}$cell.append($day);}$row.append($cell);weekDay++;if(weekDay==7){$tbody.append($row);weekDay=0;}}$table.append($tbody);$body.append($table);if($calendar.attr('selectedDay')){selectedDay=$calendar.attr('selectedDay').split('-');date=new Date(selectedDay[0],selectedDay[1],selectedDay[2],$calendar.attr('hour')||0,$calendar.attr('minute')||0);$calendar.find('tbody td[day="'+selectedDay[2]+'"][month="'+selectedDay[1]+'"]').addClass('selected');gj.datepicker.methods.updateHeader($calendar,data,date);}},renderYear:function renderYear($datepicker,$calendar,data){var year,i,m,$month,$table=$calendar.find('>[role="body"]>table'),$tbody=$table.children('tbody');$table.children('thead').hide();year=parseInt($calendar.attr('year'),10);$calendar.attr('type','year');$calendar.find('div[role="period"]').text(year);$tbody.empty();for(i=0;i<3;i++){$row=$('<tr />');for(m=i*4;m<=i*4+3;m++){$month=$('<div>'+gj.core.messages[data.locale].monthShortNames[m]+'</div>');$month.on('click',gj.datepicker.methods.selectMonth($datepicker,$calendar,data,m));$cell=$('<td></td>').append($month);$row.append($cell);}$tbody.append($row);}},renderDecade:function renderDecade($datepicker,$calendar,data){var year,decade,i,y,$year,$table=$calendar.find('>[role="body"]>table'),$tbody=$table.children('tbody');$table.children('thead').hide();year=parseInt($calendar.attr('year'),10);decade=year-year%10;$calendar.attr('type','decade');$calendar.find('div[role="period"]').text(decade+' - '+(decade+9));$tbody.empty();for(i=decade-1;i<=decade+10;i+=4){$row=$('<tr />');for(y=i;y<=i+3;y++){$year=$('<div>'+y+'</div>');$year.on('click',gj.datepicker.methods.selectYear($datepicker,$calendar,data,y));$cell=$('<td></td>').append($year);$row.append($cell);}$tbody.append($row);}},renderCentury:function renderCentury($datepicker,$calendar,data){var year,century,i,d,$decade,$table=$calendar.find('>[role="body"]>table'),$tbody=$table.children('tbody');$table.children('thead').hide();year=parseInt($calendar.attr('year'),10);century=year-year%100;$calendar.attr('type','century');$calendar.find('div[role="period"]').text(century+' - '+(century+99));$tbody.empty();for(i=century-10;i<century+100;i+=40){$row=$('<tr />');for(d=i;d<=i+30;d+=10){$decade=$('<div>'+d+'</div>');$decade.on('click',gj.datepicker.methods.selectDecade($datepicker,$calendar,data,d));$cell=$('<td></td>').append($decade);$row.append($cell);}$tbody.append($row);}},getWeekNumber:function getWeekNumber(date){var d=new Date(date.valueOf());d.setDate(d.getDate()+6);d=new Date(Date.UTC(d.getFullYear(),d.getMonth(),d.getDate()));d.setUTCDate(d.getUTCDate()+4-(d.getUTCDay()||7));var yearStart=new Date(Date.UTC(d.getUTCFullYear(),0,1));var weekNo=Math.ceil(((d-yearStart)/86400000+1)/7);return weekNo;},getMinDate:function getMinDate(data){var minDate;if(data.minDate){if(typeof data.minDate==='string'){minDate=gj.core.parseDate(data.minDate,data.format,data.locale);}else if(typeof data.minDate==='function'){minDate=data.minDate();if(typeof minDate==='string'){minDate=gj.core.parseDate(minDate,data.format,data.locale);}}else if(typeof data.minDate.getMonth==='function'){minDate=data.minDate;}}return minDate;},getMaxDate:function getMaxDate(data){var maxDate;if(data.maxDate){if(typeof data.maxDate==='string'){maxDate=gj.core.parseDate(data.maxDate,data.format,data.locale);}else if(typeof data.maxDate==='function'){maxDate=data.maxDate();if(typeof maxDate==='string'){maxDate=gj.core.parseDate(maxDate,data.format,data.locale);}}else if(typeof data.maxDate.getMonth==='function'){maxDate=data.maxDate;}}return maxDate;},isSelectable:function isSelectable(data,date){var result=true,minDate=gj.datepicker.methods.getMinDate(data),maxDate=gj.datepicker.methods.getMaxDate(data),i;if(minDate&&date<minDate){result=false;}else if(maxDate&&date>maxDate){result=false;}if(result){if(data.disableDates){if($.isArray(data.disableDates)){for(i=0;i<data.disableDates.length;i++){if(data.disableDates[i]instanceof Date&&data.disableDates[i].getTime()===date.getTime()){result=false;}else if(typeof data.disableDates[i]==='string'&&gj.core.parseDate(data.disableDates[i],data.format,data.locale).getTime()===date.getTime()){result=false;}}}else if(data.disableDates instanceof Function){result=data.disableDates(date);}}if($.isArray(data.disableDaysOfWeek)&&data.disableDaysOfWeek.indexOf(date.getDay())>-1){result=false;}}return result;},getPrevMonth:function getPrevMonth(month,year){date=new Date(year,month,1);date.setMonth(date.getMonth()-1);return{month:date.getMonth(),year:date.getFullYear()};},getNextMonth:function getNextMonth(month,year){date=new Date(year,month,1);date.setMonth(date.getMonth()+1);return{month:date.getMonth(),year:date.getFullYear()};},prev:function prev($datepicker,data){return function(){var date,month,year,decade,century,$calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');year=parseInt($calendar.attr('year'),10);switch($calendar.attr('type')){case'month':month=parseInt($calendar.attr('month'),10);date=gj.datepicker.methods.getPrevMonth(month,year);$calendar.attr('month',date.month);$calendar.attr('year',date.year);gj.datepicker.methods.renderMonth($datepicker,$calendar,data);break;case'year':$calendar.attr('year',year-1);gj.datepicker.methods.renderYear($datepicker,$calendar,data);break;case'decade':decade=year-year%10;$calendar.attr('year',decade-10);gj.datepicker.methods.renderDecade($datepicker,$calendar,data);break;case'century':century=year-year%100;$calendar.attr('year',century-100);gj.datepicker.methods.renderCentury($datepicker,$calendar,data);break;}};},next:function next($datepicker,data){return function(){var date,month,year,decade,century,$calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');year=parseInt($calendar.attr('year'),10);switch($calendar.attr('type')){case'month':month=parseInt($calendar.attr('month'),10);date=gj.datepicker.methods.getNextMonth(month,year);$calendar.attr('month',date.month);$calendar.attr('year',date.year);gj.datepicker.methods.renderMonth($datepicker,$calendar,data);break;case'year':$calendar.attr('year',year+1);gj.datepicker.methods.renderYear($datepicker,$calendar,data);break;case'decade':decade=year-year%10;$calendar.attr('year',decade+10);gj.datepicker.methods.renderDecade($datepicker,$calendar,data);break;case'century':century=year-year%100;$calendar.attr('year',century+100);gj.datepicker.methods.renderCentury($datepicker,$calendar,data);break;}};},changePeriod:function changePeriod($datepicker,data){return function(e){var $calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');switch($calendar.attr('type')){case'month':gj.datepicker.methods.renderYear($datepicker,$calendar,data);break;case'year':gj.datepicker.methods.renderDecade($datepicker,$calendar,data);break;case'decade':gj.datepicker.methods.renderCentury($datepicker,$calendar,data);break;}};},dayClickHandler:function dayClickHandler($datepicker,$calendar,data,date){return function(e){e&&e.stopPropagation();gj.datepicker.methods.selectDay($datepicker,$calendar,data,date);if(data.footer!==true&&data.autoClose!==false){gj.datepicker.methods.change($datepicker,$calendar,data,date);}return $datepicker;};},change:function change($datepicker,$calendar,data,date){var day=date.getDate(),month=date.getMonth(),year=date.getFullYear(),value=gj.core.formatDate(date,data.format,data.locale);$calendar.attr('month',month);$calendar.attr('year',year);$datepicker.val(value);gj.datepicker.events.change($datepicker);if(window.getComputedStyle($calendar[0]).display!=='none'){gj.datepicker.methods.close($datepicker);}},selectDay:function selectDay($datepicker,$calendar,data,date){var day=date.getDate(),month=date.getMonth(),year=date.getFullYear();$calendar.attr('selectedDay',year+'-'+month+'-'+day);$calendar.find('tbody td').removeClass('selected');$calendar.find('tbody td[day="'+day+'"][month="'+month+'"]').addClass('selected');gj.datepicker.methods.updateHeader($calendar,data,date);gj.datepicker.events.select($datepicker,'day');},selectMonth:function selectMonth($datepicker,$calendar,data,month){return function(e){$calendar.attr('month',month);gj.datepicker.methods.renderMonth($datepicker,$calendar,data);gj.datepicker.events.select($datepicker,'month');};},selectYear:function selectYear($datepicker,$calendar,data,year){return function(e){$calendar.attr('year',year);gj.datepicker.methods.renderYear($datepicker,$calendar,data);gj.datepicker.events.select($datepicker,'year');};},selectDecade:function selectDecade($datepicker,$calendar,data,year){return function(e){$calendar.attr('year',year);gj.datepicker.methods.renderDecade($datepicker,$calendar,data);gj.datepicker.events.select($datepicker,'decade');};},open:function open($datepicker,data){var date,$calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');if($datepicker.val()){$datepicker.value($datepicker.val());}else{date=new Date();$calendar.attr("month",date.getMonth());$calendar.attr("year",date.getFullYear());}switch($calendar.attr('type')){case'month':gj.datepicker.methods.renderMonth($datepicker,$calendar,data);break;case'year':gj.datepicker.methods.renderYear($datepicker,$calendar,data);break;case'decade':gj.datepicker.methods.renderDecade($datepicker,$calendar,data);break;case'century':gj.datepicker.methods.renderCentury($datepicker,$calendar,data);break;}$calendar.show();$calendar.closest('div[role="modal"]').show();if(data.modal){gj.core.center($calendar);}else{gj.core.setChildPosition($datepicker[0],$calendar[0]);document.activeElement!==$datepicker[0]&&$datepicker.focus();}clearTimeout($datepicker.timeout);gj.datepicker.events.open($datepicker);},close:function close($datepicker){var $calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');$calendar.hide();$calendar.closest('div[role="modal"]').hide();gj.datepicker.events.close($datepicker);},createKeyDownHandler:function createKeyDownHandler($datepicker,$calendar,data){return function(e){var month,year,day,index,$new,$active,e=e||window.event;if(window.getComputedStyle($calendar[0]).display!=='none'){$active=gj.datepicker.methods.getActiveCell($calendar);if(e.keyCode=='38'){// up
index=$active.index();$new=$active.closest('tr').prev('tr').find('td:eq('+index+')');if(!$new.is('[day]')){gj.datepicker.methods.prev($datepicker,data)();$new=$calendar.find('tbody tr').last().find('td:eq('+index+')');if($new.is(':empty')){$new=$calendar.find('tbody tr').last().prev().find('td:eq('+index+')');}}if($new.is('[day]')){$new.addClass('focused');$active.removeClass('focused');}}else if(e.keyCode=='40'){// down
index=$active.index();$new=$active.closest('tr').next('tr').find('td:eq('+index+')');if(!$new.is('[day]')){gj.datepicker.methods.next($datepicker,data)();$new=$calendar.find('tbody tr').first().find('td:eq('+index+')');if(!$new.is('[day]')){$new=$calendar.find('tbody tr:eq(1)').find('td:eq('+index+')');}}if($new.is('[day]')){$new.addClass('focused');$active.removeClass('focused');}}else if(e.keyCode=='37'){// left
$new=$active.prev('td[day]:not(.disabled)');if($new.length===0){$new=$active.closest('tr').prev('tr').find('td[day]').last();}if($new.length===0){gj.datepicker.methods.prev($datepicker,data)();$new=$calendar.find('tbody tr').last().find('td[day]').last();}if($new.length>0){$new.addClass('focused');$active.removeClass('focused');}}else if(e.keyCode=='39'){// right
$new=$active.next('[day]:not(.disabled)');if($new.length===0){$new=$active.closest('tr').next('tr').find('td[day]').first();}if($new.length===0){gj.datepicker.methods.next($datepicker,data)();$new=$calendar.find('tbody tr').first().find('td[day]').first();}if($new.length>0){$new.addClass('focused');$active.removeClass('focused');}}else if(e.keyCode=='13'){// enter
day=parseInt($active.attr('day'),10);month=parseInt($active.attr('month'),10);year=parseInt($active.attr('year'),10);gj.datepicker.methods.dayClickHandler($datepicker,$calendar,data,new Date(year,month,day))();}else if(e.keyCode=='27'){// esc
$datepicker.close();}}};},getActiveCell:function getActiveCell($calendar){var $cell=$calendar.find('td[day].focused');if($cell.length===0){$cell=$calendar.find('td[day].selected');if($cell.length===0){$cell=$calendar.find('td[day].today');if($cell.length===0){$cell=$calendar.find('td[day]:not(.disabled)').first();}}}return $cell;},value:function value($datepicker,_value2){var $calendar,date,data=$datepicker.data();if(typeof _value2==="undefined"){return $datepicker.val();}else{date=gj.core.parseDate(_value2,data.format,data.locale);if(date&&date.getTime()){$calendar=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');gj.datepicker.methods.dayClickHandler($datepicker,$calendar,data,date)();}else{$datepicker.val('');}return $datepicker;}},destroy:function destroy($datepicker){var data=$datepicker.data(),$parent=$datepicker.parent(),$picker=$('body').find('[role="calendar"][guid="'+$datepicker.attr('data-guid')+'"]');if(data){$datepicker.off();if($picker.parent('[role="modal"]').length>0){$picker.unwrap();}$picker.remove();$datepicker.removeData();$datepicker.removeAttr('data-type').removeAttr('data-guid').removeAttr('data-datepicker');$datepicker.removeClass();$parent.children('[role="right-icon"]').remove();$datepicker.unwrap();}return $datepicker;}};gj.datepicker.events={/**
     * Triggered when the datepicker value is changed.
     *
     * @event change
     * @param {object} e - event data
     * @example sample <!-- datepicker -->
     * <input id="datepicker" width="312" />
     * <script>
     *     $('#datepicker').datepicker({
     *         change: function (e) {
     *             alert('Change is fired');
     *         }
     *     });
     * </script>
     */change:function change($datepicker){return $datepicker.triggerHandler('change');},/**
     * Triggered when new value is selected inside the picker.
     *
     * @event select
     * @param {object} e - event data
     * @param {string} type - The type of the selection. The options are day, month, year or decade.
     * @example sample <!-- datepicker -->
     * <input id="datepicker" width="312" />
     * <p>Click on the month name in order to select another month.</p>
     * <script>
     *     $('#datepicker').datepicker({
     *         modal: true,
     *         header: true,
     *         footer: true,
     *         change: function (e) {
     *             alert('Change is fired');
     *         },
     *         select: function (e, type) {
     *             alert('Select from type of "' + type + '" is fired');
     *         }
     *     });
     * </script>
     */select:function select($datepicker,type){return $datepicker.triggerHandler('select',[type]);},/**
     * Event fires when the calendar is opened.
     * @event open
     * @param {object} e - event data
     * @example sample <!-- datepicker -->
     * <input id="datepicker" width="312" />
     * <script>
     *     $('#datepicker').datepicker({
     *         modal: true,
     *         open: function (e) {
     *             alert('open is fired.');
     *         }
     *     });
     * </script>
     */open:function open($datepicker){return $datepicker.triggerHandler('open');},/**
     * Event fires when the calendar is closed.
     * @event close
     * @param {object} e - event data
     * @example sample <!-- datepicker -->
     * <input id="datepicker" width="312" />
     * <script>
     *     $('#datepicker').datepicker({
     *         modal: true,
     *         close: function (e) {
     *             alert('Close is fired.');
     *         }
     *     });
     * </script>
     */close:function close($datepicker){return $datepicker.triggerHandler('close');}};gj.datepicker.widget=function($element,jsConfig){var self=this,methods=gj.datepicker.methods;/** Gets or sets the value of the datepicker.
     * @method
     * @param {string} value - The value that needs to be selected.
     * @return string | datepicker object
     * @example Get <!-- datepicker -->
     * <button class="gj-button-md" onclick="alert($datepicker.value())">Get Value</button>
     * <hr/>
     * <input id="datepicker" width="312" />
     * <script>
     *     var $datepicker = $('#datepicker').datepicker();
     * </script>
     * @example Set <!-- datepicker -->
     * <button class="gj-button-md" onclick="$datepicker.value('08/01/2017')">Set Value</button>
     * <hr/>
     * <input id="datepicker" width="312" />
     * <script>
     *     var $datepicker = $('#datepicker').datepicker();
     * </script>
     */self.value=function(value){return methods.value(this,value);};/** Remove datepicker functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- datepicker -->
     * <button class="gj-button-md" onclick="datepicker.destroy()">Destroy</button>
     * <input id="datepicker" width="312" />
     * <script>
     *     var datepicker = $('#datepicker').datepicker();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};/** Open the calendar.
     * @method
     * @return datepicker
     * @example Open.Close <!-- datepicker -->
     * <button class="gj-button-md" onclick="$datepicker.open()">Open</button>
     * <button class="gj-button-md" onclick="$datepicker.close()">Close</button>
     * <hr/>
     * <input id="datepicker" width="312" />
     * <script>
     *     var $datepicker = $('#datepicker').datepicker();
     * </script>
     */self.open=function(){return methods.open(this,this.data());};/** Close the calendar.
     * @method
     * @return datepicker
     * @example Open.Close <!-- datepicker -->
     * <button class="gj-button-md" onclick="$datepicker.open()">Open</button>
     * <button class="gj-button-md" onclick="$datepicker.close()">Close</button>
     * <hr/>
     * <input id="datepicker" width="312" />
     * <script>
     *     var $datepicker = $('#datepicker').datepicker();
     * </script>
     */self.close=function(){return methods.close(this);};$.extend($element,self);if('true'!==$element.attr('data-datepicker')){methods.init.call($element,jsConfig);}return $element;};gj.datepicker.widget.prototype=new gj.widget();gj.datepicker.widget.constructor=gj.datepicker.widget;(function($){$.fn.datepicker=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.datepicker.widget(this,method);}else{$widget=new gj.datepicker.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery gj */ /**
  * @widget TimePicker
  * @plugin Base
  */gj.timepicker={plugins:{}};gj.timepicker.config={base:{/** The width of the timepicker.
         * @type number
         * @default undefined
         * @example JS.Config <!-- timepicker -->
         * <input id="timepicker" width="312" />
         * <script>
         *    $('#timepicker').timepicker({ width: 280 });
         * </script>
         * @example HTML.Config <!-- timepicker -->
         * <input id="timepicker" width="312" />
         * <script>
         *    $('#timepicker').timepicker();
         * </script>
         */width:undefined,/** If set to true, the timepicker will have modal behavior.
         * @type Boolean
         * @default true
         * @example True <!-- timepicker -->
         * <input id="timepicker" width="280" />
         * <script>
         *    $('#timepicker').timepicker({ modal: true });
         * </script>
         * @example False <!-- timepicker -->
         * <input id="timepicker" width="280" />
         * <script>
         *    $('#timepicker').timepicker({ modal: false, header: false, footer: false });
         * </script>
         */modal:true,/** If set to true, add header to the timepicker.
         * @type Boolean
         * @default true
         * @example True <!-- timepicker -->
         * <input id="timepicker" width="280" />
         * <script>
         *    $('#timepicker').timepicker({ header: true });
         * </script>
         * @example False <!-- timepicker -->
         * <input id="timepicker" width="280" />
         * <script>
         *    $('#timepicker').timepicker({ header: false, mode: '24hr' });
         * </script>
         */header:true,/** If set to true, add footer with ok and cancel buttons to the timepicker.
         * @type Boolean
         * @default true
         * @example True <!-- timepicker -->
         * <input id="timepicker" width="280" />
         * <script>
         *    $('#timepicker').timepicker({ footer: true });
         * </script>
         * @example False <!-- timepicker -->
         * <input id="timepicker" width="280" />
         * <script>
         *    $('#timepicker').timepicker({ footer: false });
         * </script>
         */footer:true,/** Specifies the format, which is used to format the value of the timepicker displayed in the input.
         * @additionalinfo <b>M</b> - Minutes; no leading zero for single-digit minutes.<br/>
         * <b>MM</b> - Minutes; leading zero for single-digit minutes.<br/>
         * <b>H</b> - The hour, using a 24-hour clock from 0 to 23; no leading zero for single-digit hours.<br/>
         * <b>HH</b> - The hour, using a 24-hour clock from 0 to 23; leading zero for single-digit hours.<br/>
         * <b>h</b> - The hour, using a 12-hour clock from 1 to 12; no leading zero for single-digit hours.<br/>
         * <b>hh</b> - The hour, using a 12-hour clock from 1 to 12; leading zero for single-digit hours<br/>
         * <b>tt</b> - The AM/PM designator; lowercase.<br/>
         * <b>TT</b> - The AM/PM designator; upercase.<br/>
         * @type String
         * @default 'MM:HH'
         * @example Sample <!-- timepicker -->
         * <input id="timepicker" width="312" value="13.42" />
         * <script>
         *     var timepicker = $('#timepicker').timepicker({
         *         format: 'HH.MM'
         *     });
         * </script>
         */format:'HH:MM',/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- timepicker -->
         * <input id="timepicker" width="312" />
         * <script>
         *    $('#timepicker').timepicker({ uiLibrary: 'materialdesign' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, timepicker -->
         * <input id="timepicker" width="270" />
         * <script>
         *     $('#timepicker').timepicker({ uiLibrary: 'bootstrap', modal: false, footer: false });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, timepicker -->
         * <input id="timepicker" width="276" />
         * <script>
         *     $('#timepicker').timepicker({ uiLibrary: 'bootstrap4' });
         * </script>
         */uiLibrary:'materialdesign',/** The initial timepicker value.
         * @type String
         * @default undefined
         * @example Javascript <!-- timepicker -->
         * <input id="timepicker" width="312" />
         * <script>
         *    $('#timepicker').timepicker({
         *        value: '13:42'
         *    });
         * </script>
         * @example HTML <!-- timepicker -->
         * <input id="timepicker" width="312" value="13:42" />
         * <script>
         *     $('#timepicker').timepicker();
         * </script>
         */value:undefined,/** The timepicker mode. Tells the component to display the picker in ampm (12hr) format or 24hr format.
         * @type ampm|24hr
         * @default 'ampm'
         * @example ampm <!-- timepicker -->
         * <input id="timepicker" width="312" />
         * <script>
         *    $('#timepicker').timepicker({ mode: 'ampm' });
         * </script>
         * @example 24hr <!-- timepicker -->
         * <input id="timepicker" width="312" />
         * <script>
         *     $('#timepicker').timepicker({ mode: '24hr' });
         * </script>
         */mode:'ampm',/** The language that needs to be in use.
         * @type string
         * @default 'en-us'
         * @example German <!-- timepicker -->
         * <input id="timepicker" width="276" />
         * <script>
         *    $('#timepicker').timepicker({
         *        locale: 'de-de'
         *    });
         * </script>
         * @example Bulgarian <!-- timepicker -->
         * <input id="timepicker" width="276" />
         * <script>
         *    $('#timepicker').timepicker({
         *        locale: 'bg-bg'
         *    });
         * </script>
         * @example French <!-- timepicker -->
         * <input id="timepicker" width="276" />
         * <script>
         *    $('#timepicker').timepicker({
         *        locale: 'fr-fr'
         *    });
         * </script>
         * @example Brazil <!-- timepicker -->
         * <input id="timepicker" width="276" />
         * <script>
         *    $('#timepicker').timepicker({
         *        locale: 'pt-br'
         *    });
         * </script>
         * @example Russian <!-- timepicker -->
         * <input id="timepicker" width="276" />
         * <script>
         *    $('#timepicker').timepicker({
         *        locale: 'ru-ru'
         *    });
         * </script>
         */locale:'en-us',/** The size of the timepicker input.
         * @type 'small'|'default'|'large'
         * @default 'default'
         * @example Bootstrap.4 <!-- bootstrap4, timepicker -->
         * <p><label for="timepicker-small">Small Size:</label> <input id="timepicker-small" width="220" value="15:20" /></p>
         * <p><label for="timepicker-default">Default Size:</label> <input id="timepicker-default" width="220" value="15:20" /></p>
         * <p><label for="timepicker-large">Large Size:</label> <input id="timepicker-large" width="220" value="15:20" /></p>
         * <script>
         *     $('#timepicker-small').timepicker({ uiLibrary: 'bootstrap4', size: 'small' });
         *     $('#timepicker-default').timepicker({ uiLibrary: 'bootstrap4', size: 'default' });
         *     $('#timepicker-large').timepicker({ uiLibrary: 'bootstrap4', size: 'large' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, timepicker -->
         * <p><label for="timepicker-small">Small Size:</label> <input id="timepicker-small" width="220" value="15:20" /></p>
         * <p><label for="timepicker-default">Default Size:</label> <input id="timepicker-default" width="220" value="15:20" /></p>
         * <p><label for="timepicker-large">Large Size:</label> <input id="timepicker-large" width="220" value="15:20" /></p>
         * <script>
         *     $('#timepicker-small').timepicker({ uiLibrary: 'bootstrap', size: 'small' });
         *     $('#timepicker-default').timepicker({ uiLibrary: 'bootstrap', size: 'default' });
         *     $('#timepicker-large').timepicker({ uiLibrary: 'bootstrap', size: 'large' });
         * </script>
         * @example Material.Design <!-- timepicker -->
         * <p><label for="timepicker-small">Small Size:</label> <input id="timepicker-small" width="220" value="15:20" /></p>
         * <p><label for="timepicker-default">Default Size:</label> <input id="timepicker-default" width="220" value="15:20" /></p>
         * <p><label for="timepicker-large">Large Size:</label> <input id="timepicker-large" width="220" value="15:20" /></p>
         * <script>
         *     $('#timepicker-small').timepicker({ size: 'small' });
         *     $('#timepicker-default').timepicker({ size: 'default' });
         *     $('#timepicker-large').timepicker({ size: 'large' });
         * </script>
         */size:'default',icons:{rightIcon:'<i class="gj-icon clock" />'},style:{modal:'gj-modal',wrapper:'gj-timepicker gj-timepicker-md gj-unselectable',input:'gj-textbox-md',clock:'gj-picker gj-picker-md timepicker',footer:'',button:'gj-button-md'}},bootstrap:{style:{wrapper:'gj-timepicker gj-timepicker-bootstrap gj-unselectable input-group',input:'form-control',clock:'gj-picker gj-picker-bootstrap timepicker',footer:'modal-footer',button:'btn btn-default'},iconsLibrary:'glyphicons'},bootstrap4:{style:{wrapper:'gj-timepicker gj-timepicker-bootstrap gj-unselectable input-group',input:'form-control border',clock:'gj-picker gj-picker-bootstrap timepicker',footer:'modal-footer',button:'btn btn-default'}}};gj.timepicker.methods={init:function init(jsConfig){gj.picker.widget.prototype.init.call(this,jsConfig,'timepicker');return this;},initialize:function initialize(){},initMouse:function initMouse($body,$input,$picker,data){$body.off();$body.on('mousedown',gj.timepicker.methods.mouseDownHandler($input,$picker));$body.on('mousemove',gj.timepicker.methods.mouseMoveHandler($input,$picker,data));$body.on('mouseup',gj.timepicker.methods.mouseUpHandler($input,$picker,data));},createPicker:function createPicker($timepicker){var date,data=$timepicker.data(),$clock=$('<div role="picker" />').addClass(data.style.clock).attr('guid',$timepicker.attr('data-guid')),$hour=$('<div role="hour" />'),$minute=$('<div role="minute" />'),$header=$('<div role="header" />'),$mode=$('<div role="mode" />'),$body=$('<div role="body" />'),$btnOk=$('<button class="'+data.style.button+'">'+gj.core.messages[data.locale].ok+'</button>'),$btnCancel=$('<button class="'+data.style.button+'">'+gj.core.messages[data.locale].cancel+'</button>'),$footer=$('<div role="footer" class="'+data.style.footer+'" />');date=gj.core.parseDate(data.value,data.format,data.locale);if(!date||isNaN(date.getTime())){date=new Date();}else{$timepicker.attr('hours',date.getHours());}gj.timepicker.methods.initMouse($body,$timepicker,$clock,data);if(data.header){$hour.on('click',function(){gj.timepicker.methods.renderHours($timepicker,$clock,data);});$minute.on('click',function(){gj.timepicker.methods.renderMinutes($timepicker,$clock,data);});$header.append($hour).append(':').append($minute);if(data.mode==='ampm'){$mode.append($('<span role="am">'+gj.core.messages[data.locale].am+'</span>').on('click',function(){var hour=gj.timepicker.methods.getHour($clock);$clock.attr('mode','am');$(this).addClass('selected');$(this).parent().children('[role="pm"]').removeClass('selected');if(hour>=12){$clock.attr('hour',hour-12);}if(!data.modal){clearTimeout($timepicker.timeout);$timepicker.focus();}}));$mode.append('<br />');$mode.append($('<span role="pm">'+gj.core.messages[data.locale].pm+'</span>').on('click',function(){var hour=gj.timepicker.methods.getHour($clock);$clock.attr('mode','pm');$(this).addClass('selected');$(this).parent().children('[role="am"]').removeClass('selected');if(hour<12){$clock.attr('hour',hour+12);}if(!data.modal){clearTimeout($timepicker.timeout);$timepicker.focus();}}));$header.append($mode);}$clock.append($header);}$clock.append($body);if(data.footer){$btnCancel.on('click',function(){$timepicker.close();});$footer.append($btnCancel);$btnOk.on('click',gj.timepicker.methods.setTime($timepicker,$clock));$footer.append($btnOk);$clock.append($footer);}$clock.hide();$('body').append($clock);if(data.modal){$clock.wrapAll('<div role="modal" class="'+data.style.modal+'"/>');gj.core.center($clock);}return $clock;},getHour:function getHour($clock){return parseInt($clock.attr('hour'),10)||0;},getMinute:function getMinute($clock){return parseInt($clock.attr('minute'),10)||0;},setTime:function setTime($timepicker,$clock){return function(){var hour=gj.timepicker.methods.getHour($clock),minute=gj.timepicker.methods.getMinute($clock),mode=$clock.attr('mode'),date=new Date(0,0,0,hour===12&&mode==='am'?0:hour,minute),data=$timepicker.data(),value=gj.core.formatDate(date,data.format,data.locale);$timepicker.value(value);$timepicker.close();};},getPointerValue:function getPointerValue(x,y,mode){var value,radius,size=256,angle=Math.atan2(size/2-x,size/2-y)/Math.PI*180;if(angle<0){angle=360+angle;}switch(mode){case'ampm':{value=12-Math.round(angle*12/360);return value===0?12:value;}case'24hr':{radius=Math.sqrt(Math.pow(size/2-x,2)+Math.pow(size/2-y,2));value=12-Math.round(angle*12/360);if(value===0){value=12;}if(radius<size/2-32){value=value===12?0:value+12;}return value;}case'minutes':{value=Math.round(60-60*angle/360);return value===60?0:value;}}},updateArrow:function updateArrow(e,$timepicker,$clock,data){var rect,value,mouseX=$timepicker.mouseX(e),mouseY=$timepicker.mouseY(e),scrollY=window.scrollY||window.pageYOffset||0,scrollX=window.scrollX||window.pageXOffset||0;rect=e.target.getBoundingClientRect();if(data.dialMode=='hours'){value=gj.timepicker.methods.getPointerValue(mouseX-scrollX-rect.left,mouseY-scrollY-rect.top,data.mode);$clock.attr('hour',data.mode==='ampm'&&$clock.attr('mode')==='pm'&&value<12?value+12:value);}else if(data.dialMode=='minutes'){value=gj.timepicker.methods.getPointerValue(mouseX-scrollX-rect.left,mouseY-scrollY-rect.top,'minutes');$clock.attr('minute',value);}gj.timepicker.methods.update($timepicker,$clock,data);},update:function update($timepicker,$clock,data){var hour,minute,$arrow,visualHour,$header,$numbers;// update the arrow
hour=gj.timepicker.methods.getHour($clock);minute=gj.timepicker.methods.getMinute($clock);$arrow=$clock.find('[role="arrow"]');if(data.dialMode=='hours'&&(hour==0||hour>12)&&data.mode==='24hr'){$arrow.css('width','calc(50% - 52px)');}else{$arrow.css('width','calc(50% - 20px)');}if(data.dialMode=='hours'){$arrow.css('transform','rotate('+(hour*30-90).toString()+'deg)');}else{$arrow.css('transform','rotate('+(minute*6-90).toString()+'deg)');}$arrow.show();// update the numbers
visualHour=data.mode==='ampm'&&hour>12?hour-12:hour==0?12:hour;$numbers=$clock.find('[role="body"] span');$numbers.removeClass('selected');$numbers.filter(function(e){if(data.dialMode=='hours'){return parseInt($(this).text(),10)==visualHour;}else{return parseInt($(this).text(),10)==minute;}}).addClass('selected');// update the header
if(data.header){$header=$clock.find('[role="header"]');$header.find('[role="hour"]').text(visualHour);$header.find('[role="minute"]').text(gj.core.pad(minute));if(data.mode==='ampm'){if(hour>=12){$header.find('[role="pm"]').addClass('selected');$header.find('[role="am"]').removeClass('selected');}else{$header.find('[role="am"]').addClass('selected');$header.find('[role="pm"]').removeClass('selected');}}}},mouseDownHandler:function mouseDownHandler($timepicker,$clock){return function(e){$timepicker.mouseMove=true;};},mouseMoveHandler:function mouseMoveHandler($timepicker,$clock,data){return function(e){if($timepicker.mouseMove){gj.timepicker.methods.updateArrow(e,$timepicker,$clock,data);}};},mouseUpHandler:function mouseUpHandler($timepicker,$clock,data){return function(e){gj.timepicker.methods.updateArrow(e,$timepicker,$clock,data);$timepicker.mouseMove=false;if(!data.modal){clearTimeout($timepicker.timeout);$timepicker.focus();}if(data.dialMode=='hours'){setTimeout(function(){gj.timepicker.events.select($timepicker,'hour');gj.timepicker.methods.renderMinutes($timepicker,$clock,data);},1000);}else if(data.dialMode=='minutes'){if(data.footer!==true&&data.autoClose!==false){gj.timepicker.methods.setTime($timepicker,$clock)();}gj.timepicker.events.select($timepicker,'minute');}};},renderHours:function renderHours($timepicker,$clock,data){var $dial,$body=$clock.find('[role="body"]');clearTimeout($timepicker.timeout);$body.empty();$dial=$('<div role="dial"></div>');$dial.append('<div role="arrow" style="transform: rotate(-90deg); display: none;"><div class="arrow-begin"></div><div class="arrow-end"></div></div>');$dial.append('<span role="hour" style="transform: translate(54px, -93.5307px);">1</span>');$dial.append('<span role="hour" style="transform: translate(93.5307px, -54px);">2</span>');$dial.append('<span role="hour" style="transform: translate(108px, 0px);">3</span>');$dial.append('<span role="hour" style="transform: translate(93.5307px, 54px);">4</span>');$dial.append('<span role="hour" style="transform: translate(54px, 93.5307px);">5</span>');$dial.append('<span role="hour" style="transform: translate(6.61309e-15px, 108px);">6</span>');$dial.append('<span role="hour" style="transform: translate(-54px, 93.5307px);">7</span>');$dial.append('<span role="hour" style="transform: translate(-93.5307px, 54px);">8</span>');$dial.append('<span role="hour" style="transform: translate(-108px, 1.32262e-14px);">9</span>');$dial.append('<span role="hour" style="transform: translate(-93.5307px, -54px);">10</span>');$dial.append('<span role="hour" style="transform: translate(-54px, -93.5307px);">11</span>');$dial.append('<span role="hour" style="transform: translate(-1.98393e-14px, -108px);">12</span>');if(data.mode==='24hr'){$dial.append('<span role="hour" style="transform: translate(38px, -65.8179px);">13</span>');$dial.append('<span role="hour" style="transform: translate(65.8179px, -38px);">14</span>');$dial.append('<span role="hour" style="transform: translate(76px, 0px);">15</span>');$dial.append('<span role="hour" style="transform: translate(65.8179px, 38px);">16</span>');$dial.append('<span role="hour" style="transform: translate(38px, 65.8179px);">17</span>');$dial.append('<span role="hour" style="transform: translate(4.65366e-15px, 76px);">18</span>');$dial.append('<span role="hour" style="transform: translate(-38px, 65.8179px);">19</span>');$dial.append('<span role="hour" style="transform: translate(-65.8179px, 38px);">20</span>');$dial.append('<span role="hour" style="transform: translate(-76px, 9.30732e-15px);">21</span>');$dial.append('<span role="hour" style="transform: translate(-65.8179px, -38px);">22</span>');$dial.append('<span role="hour" style="transform: translate(-38px, -65.8179px);">23</span>');$dial.append('<span role="hour" style="transform: translate(-1.3961e-14px, -76px);">00</span>');}$body.append($dial);$clock.find('[role="header"] [role="hour"]').addClass('selected');$clock.find('[role="header"] [role="minute"]').removeClass('selected');data.dialMode='hours';gj.timepicker.methods.update($timepicker,$clock,data);},renderMinutes:function renderMinutes($timepicker,$clock,data){var $body=$clock.find('[role="body"]');clearTimeout($timepicker.timeout);$body.empty();$dial=$('<div role="dial"></div>');$dial.append('<div role="arrow" style="transform: rotate(-90deg); display: none;"><div class="arrow-begin"></div><div class="arrow-end"></div></div>');$dial.append('<span role="hour" style="transform: translate(54px, -93.5307px);">5</span>');$dial.append('<span role="hour" style="transform: translate(93.5307px, -54px);">10</span>');$dial.append('<span role="hour" style="transform: translate(108px, 0px);">15</span>');$dial.append('<span role="hour" style="transform: translate(93.5307px, 54px);">20</span>');$dial.append('<span role="hour" style="transform: translate(54px, 93.5307px);">25</span>');$dial.append('<span role="hour" style="transform: translate(6.61309e-15px, 108px);">30</span>');$dial.append('<span role="hour" style="transform: translate(-54px, 93.5307px);">35</span>');$dial.append('<span role="hour" style="transform: translate(-93.5307px, 54px);">40</span>');$dial.append('<span role="hour" style="transform: translate(-108px, 1.32262e-14px);">45</span>');$dial.append('<span role="hour" style="transform: translate(-93.5307px, -54px);">50</span>');$dial.append('<span role="hour" style="transform: translate(-54px, -93.5307px);">55</span>');$dial.append('<span role="hour" style="transform: translate(-1.98393e-14px, -108px);">00</span>');$body.append($dial);$clock.find('[role="header"] [role="hour"]').removeClass('selected');$clock.find('[role="header"] [role="minute"]').addClass('selected');data.dialMode='minutes';gj.timepicker.methods.update($timepicker,$clock,data);},open:function open($timepicker){var time,hour,data=$timepicker.data(),$clock=$('body').find('[role="picker"][guid="'+$timepicker.attr('data-guid')+'"]');if($timepicker.value()){time=gj.core.parseDate($timepicker.value(),data.format,data.locale);}else{time=new Date();}hour=time.getHours();if(data.mode==='ampm'){$clock.attr('mode',hour>12?'pm':'am');}$clock.attr('hour',hour);$clock.attr('minute',time.getMinutes());gj.timepicker.methods.renderHours($timepicker,$clock,data);gj.picker.widget.prototype.open.call($timepicker,'timepicker');return $timepicker;},value:function value($timepicker,_value3){var $clock,time,data=$timepicker.data();if(typeof _value3==="undefined"){return $timepicker.val();}else{$timepicker.val(_value3);gj.timepicker.events.change($timepicker);return $timepicker;}}};gj.timepicker.events={/**
     * Triggered when the timepicker value is changed.
     *
     * @event change
     * @param {object} e - event data
     * @example sample <!-- timepicker -->
     * <input id="timepicker" width="312" />
     * <script>
     *     $('#timepicker').timepicker({
     *         change: function (e) {
     *             alert('Change is fired');
     *         }
     *     });
     * </script>
     */change:function change($timepicker){return $timepicker.triggerHandler('change');},/**
     * Triggered when new value is selected inside the picker.
     *
     * @event select
     * @param {object} e - event data
     * @param {string} type - The type of the selection. The options are hour and minute.
     * @example sample <!-- datepicker -->
     * <input id="timepicker" width="312" />
     * <script>
     *     $('#timepicker').timepicker({
     *         modal: true,
     *         header: true,
     *         footer: true,
     *         change: function (e) {
     *             alert('Change is fired');
     *         },
     *         select: function (e, type) {
     *             alert('Select from type of "' + type + '" is fired');
     *         }
     *     });
     * </script>
     */select:function select($timepicker,type){return $timepicker.triggerHandler('select',[type]);},/**
     * Event fires when the timepicker is opened.
     * @event open
     * @param {object} e - event data
     * @example sample <!-- timepicker -->
     * <input id="timepicker" width="312" />
     * <script>
     *     $('#timepicker').timepicker({
     *         open: function (e) {
     *             alert('open is fired.');
     *         }
     *     });
     * </script>
     */open:function open($timepicker){return $timepicker.triggerHandler('open');},/**
     * Event fires when the timepicker is closed.
     * @event close
     * @param {object} e - event data
     * @example sample <!-- timepicker -->
     * <input id="timepicker" width="312" />
     * <script>
     *     $('#timepicker').timepicker({
     *         close: function (e) {
     *             alert('close is fired.');
     *         }
     *     });
     * </script>
     */close:function close($timepicker){return $timepicker.triggerHandler('close');}};gj.timepicker.widget=function($element,jsConfig){var self=this,methods=gj.timepicker.methods;self.mouseMove=false;/** Gets or sets the value of the timepicker.
     * @method
     * @param {string} value - The value that needs to be selected.
     * @return string
     * @example Get <!-- timepicker -->
     * <button class="gj-button-md" onclick="alert($timepicker.value())">Get Value</button>
     * <hr/>
     * <input id="timepicker" width="312" />
     * <script>
     *     var $timepicker = $('#timepicker').timepicker();
     * </script>
     * @example Set <!-- timepicker -->
     * <button class="gj-button-md" onclick="$timepicker.value('11:00')">Set Value</button>
     * <hr/>
     * <input id="timepicker" width="312" />
     * <script>
     *     var $timepicker = $('#timepicker').timepicker();
     * </script>
     */self.value=function(value){return methods.value(this,value);};/** Remove timepicker functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- timepicker -->
     * <button class="gj-button-md" onclick="timepicker.destroy()">Destroy</button>
     * <input id="timepicker" width="312" />
     * <script>
     *     var timepicker = $('#timepicker').timepicker();
     * </script>
     */self.destroy=function(){return gj.picker.widget.prototype.destroy.call(this,'timepicker');};/** Open the clock.
     * @method
     * @return timepicker
     * @example Open.Close <!-- timepicker -->
     * <button class="gj-button-md" onclick="$timepicker.open()">Open</button>
     * <button class="gj-button-md" onclick="$timepicker.close()">Close</button>
     * <hr/>
     * <input id="timepicker" width="312" />
     * <script>
     *     var $timepicker = $('#timepicker').timepicker({ modal: false, header: false, footer: false, mode: '24hr' });
     * </script>
     */self.open=function(){return gj.timepicker.methods.open(this);};/** Close the clock.
     * @method
     * @return timepicker
     * @example Open.Close <!-- timepicker -->
     * <button class="gj-button-md" onclick="$timepicker.open()">Open</button>
     * <button class="gj-button-md" onclick="$timepicker.close()">Close</button>
     * <hr/>
     * <input id="timepicker" width="312" />
     * <script>
     *     var $timepicker = $('#timepicker').timepicker({ modal: false, header: false, footer: false, mode: '24hr' });
     * </script>
     */self.close=function(){return gj.picker.widget.prototype.close.call(this,'timepicker');};$.extend($element,self);if('true'!==$element.attr('data-timepicker')){methods.init.call($element,jsConfig);}return $element;};gj.timepicker.widget.prototype=new gj.picker.widget();gj.timepicker.widget.constructor=gj.timepicker.widget;(function($){$.fn.timepicker=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.timepicker.widget(this,method);}else{$widget=new gj.timepicker.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery gj */ /**
  * @widget DateTimePicker
  * @plugin Base
  */gj.datetimepicker={plugins:{},messages:{'en-us':{}}};gj.datetimepicker.config={base:{/** The datepicker configuration options. Valid only for datepicker specific configuration options.
         * @additionalinfo All configuration options that exists on the datetimepicker level are going to override the options at datepicker level.
         * @type object
         * @default undefined
         * @example Sample <!-- datetimepicker -->
         * <input id="datetimepicker" width="312" />
         * <script>
         *    $('#datetimepicker').datetimepicker({
         *        datepicker: { showOtherMonths: true, calendarWeeks: true }
         *    });
         * </script>
         */datepicker:gj.datepicker.config.base,timepicker:gj.timepicker.config.base,/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- datetimepicker -->
         * <input id="datetimepicker" width="312" />
         * <script>
         *    $('#datetimepicker').datetimepicker({ uiLibrary: 'materialdesign' });
         * </script>
         * @example MaterialDesign.Modal <!-- datetimepicker -->
         * <input id="datetimepicker" width="312" />
         * <script>
         *    $('#datetimepicker').datetimepicker({ uiLibrary: 'materialdesign', modal: true, footer: true });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, datetimepicker -->
         * <input id="datetimepicker" width="220" />
         * <script>
         *     $('#datetimepicker').datetimepicker({ uiLibrary: 'bootstrap' });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, datetimepicker -->
         * <input id="datetimepicker" width="234" />
         * <script>
         *     $('#datetimepicker').datetimepicker({ uiLibrary: 'bootstrap4', modal: true, footer: true });
         * </script>
         */uiLibrary:'materialdesign',/** The initial datetimepicker value.
         * @type number
         * @default undefined
         * @example Javascript <!-- datetimepicker -->
         * <input id="datetimepicker" width="300" />
         * <script>
         *    $('#datetimepicker').datetimepicker({ value: '22:10 03/27/2018' });
         * </script>
         * @example HTML <!-- datetimepicker -->
         * <input id="datetimepicker" width="300" value="22:10 03/27/2018" />
         * <script>
         *     $('#datetimepicker').datetimepicker();
         * </script>
         */value:undefined,/** Specifies the format, which is used to format the value of the DatePicker displayed in the input.
         * @additionalinfo <b>M</b> - Minutes; no leading zero for single-digit minutes.<br/>
         * <b>MM</b> - Minutes; leading zero for single-digit minutes.<br/>
         * <b>H</b> - The hour, using a 24-hour clock from 0 to 23; no leading zero for single-digit hours.<br/>
         * <b>HH</b> - The hour, using a 24-hour clock from 0 to 23; leading zero for single-digit hours.<br/>
         * <b>h</b> - The hour, using a 12-hour clock from 1 to 12; no leading zero for single-digit hours.<br/>
         * <b>hh</b> - The hour, using a 12-hour clock from 1 to 12; leading zero for single-digit hours<br/>
         * <b>tt</b> - The AM/PM designator; lowercase.<br/>
         * <b>TT</b> - The AM/PM designator; upercase.<br/>
         * <b>d</b> - Day of the month as digits; no leading zero for single-digit days.<br/>
         * <b>dd</b> - Day of the month as digits; leading zero for single-digit days.<br/>
         * <b>ddd</b> - Day of the week as a three-letter abbreviation.<br/>
         * <b>dddd</b> - Day of the week as its full name.<br/>
         * <b>m</b> - Month as digits; no leading zero for single-digit months.<br/>
         * <b>mm</b> - Month as digits; leading zero for single-digit months.<br/>
         * <b>mmm</b> - Month as a three-letter abbreviation.<br/>
         * <b>mmmm</b> - Month as its full name.<br/>
         * <b>yy</b> - Year as last two digits; leading zero for years less than 10.<br/>
         * <b>yyyy</b> - Year represented by four digits.<br/>
         * @type String
         * @default 'HH:MM mm/dd/yyyy'
         * @example Sample <!-- datetimepicker -->
         * <input id="input" value="05:50 2018-27-03" width="312" />
         * <script>
         *     $('#input').datetimepicker({ format: 'HH:MM yyyy-dd-mm' });
         * </script>
         * @example Long.Month.Format <!-- datetimepicker -->
         * <input id="input" value="10 October 2017 05:50" width="312" />
         * <script>
         *     $('#input').datetimepicker({ format: 'dd mmmm yyyy HH:MM' });
         * </script>
         */format:'HH:MM mm/dd/yyyy',/** The width of the datetimepicker.
         * @type number
         * @default undefined
         * @example JS.Config <!-- datetimepicker -->
         * <input id="input" />
         * <script>
         *    $('#input').datetimepicker({ width: 312 });
         * </script>
         * @example HTML.Config <!-- datetimepicker -->
         * <input id="input" width="312" />
         * <script>
         *    $('#input').datetimepicker();
         * </script>
         */width:undefined,/** If set to true, the datetimepicker will have modal behavior.
         * @type Boolean
         * @default false
         * @example Material.Design <!-- datetimepicker -->
         * <input id="input" width="312" />
         * <script>
         *    $('#input').datetimepicker({ modal: true });
         * </script>
         * @example Bootstrap <!-- bootstrap, datetimepicker -->
         * <input id="input" width="220" />
         * <script>
         *    $('#input').datetimepicker({ uiLibrary: 'bootstrap', modal: true, footer: true });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, datetimepicker -->
         * <input id="input" width="234" />
         * <script>
         *    $('#input').datetimepicker({ uiLibrary: 'bootstrap4', modal: true, footer: true });
         * </script>
         */modal:false,/** If set to true, add footer with ok and cancel buttons to the datetimepicker.
         * @type Boolean
         * @default false
         * @example True <!-- datetimepicker -->
         * <input id="input" width="312" />
         * <script>
         *    $('#input').datetimepicker({ footer: true, modal: true, header: true });
         * </script>
         * @example False <!-- datetimepicker -->
         * <input id="input" width="312" />
         * <script>
         *    $('#input').datetimepicker({ footer: false });
         * </script>
         */footer:false,/** The size of the datetimepicker input.
         * @type 'small'|'default'|'large'
         * @default 'default'
         * @example Bootstrap.4 <!-- bootstrap4, datetimepicker -->
         * <p><label for="small">Small Size:</label> <input id="small" width="234" value="10:20 03/20/2018" /></p>
         * <p><label for="default">Default Size:</label> <input id="default" width="234" value="10:20 03/20/2018" /></p>
         * <p><label for="large">Large Size:</label> <input id="large" width="234" value="10:20 03/20/2018" /></p>
         * <script>
         *     $('#small').datetimepicker({ uiLibrary: 'bootstrap4', size: 'small' });
         *     $('#default').datetimepicker({ uiLibrary: 'bootstrap4', size: 'default' });
         *     $('#large').datetimepicker({ uiLibrary: 'bootstrap4', size: 'large' });
         * </script>
         * @example Bootstrap.4.Font.Awesome <!-- bootstrap4, fontawesome, datetimepicker -->
         * <p><label for="small">Small Size:</label> <input id="small" width="234" value="10:20 03/20/2018" /></p>
         * <p><label for="default">Default Size:</label> <input id="default" width="234" value="10:20 03/20/2018" /></p>
         * <p><label for="large">Large Size:</label> <input id="large" width="234" value="10:20 03/20/2018" /></p>
         * <script>
         *     $('#small').datetimepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome', size: 'small' });
         *     $('#default').datetimepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome', size: 'default' });
         *     $('#large').datetimepicker({ uiLibrary: 'bootstrap4', iconsLibrary: 'fontawesome', size: 'large' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, datetimepicker -->
         * <p><label for="small">Small Size:</label> <input id="small" width="220" value="10:20 03/20/2018" /></p>
         * <p><label for="default">Default Size:</label> <input id="default" width="220" value="10:20 03/20/2018" /></p>
         * <p><label for="large">Large Size:</label> <input id="large" width="220" value="10:20 03/20/2018" /></p>
         * <script>
         *     $('#small').datetimepicker({ uiLibrary: 'bootstrap', size: 'small' });
         *     $('#default').datetimepicker({ uiLibrary: 'bootstrap', size: 'default' });
         *     $('#large').datetimepicker({ uiLibrary: 'bootstrap', size: 'large' });
         * </script>
         * @example Material.Design <!-- datetimepicker -->
         * <p><label for="small">Small Size:</label> <input id="small" width="276" value="10:20 03/20/2018" /></p>
         * <p><label for="default">Default Size:</label> <input id="default" width="276" value="10:20 03/20/2018" /></p>
         * <p><label for="large">Large Size:</label> <input id="large" width="276" value="10:20 03/20/2018" /></p>
         * <script>
         *     $('#small').datetimepicker({ size: 'small' });
         *     $('#default').datetimepicker({ size: 'default' });
         *     $('#large').datetimepicker({ size: 'large' });
         * </script>
         */size:'default',/** The language that needs to be in use.
         * @type string
         * @default 'en-us'
         * @example German <!-- datetimepicker -->
         * <input id="input" width="276" />
         * <script>
         *    $('#input').datetimepicker({
         *        locale: 'de-de',
         *        format: 'HH:MM dd mmm yyyy'
         *    });
         * </script>
         * @example Bulgarian <!-- datetimepicker -->
         * <input id="input" width="276" />
         * <script>
         *    $('#input').datetimepicker({
         *        locale: 'bg-bg',
         *        format: 'HH:MM dd mmm yyyy',
         *        datepicker: { weekStartDay: 1 }
         *    });
         * </script>
         */locale:'en-us',icons:{},style:{calendar:'gj-picker gj-picker-md datetimepicker gj-unselectable'}},bootstrap:{style:{calendar:'gj-picker gj-picker-bootstrap datetimepicker gj-unselectable'},iconsLibrary:'glyphicons'},bootstrap4:{style:{calendar:'gj-picker gj-picker-bootstrap datetimepicker gj-unselectable'}}};gj.datetimepicker.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'datetimepicker');this.attr('data-datetimepicker','true');gj.datetimepicker.methods.initialize(this);return this;},getConfig:function getConfig(clientConfig,type){var config=gj.widget.prototype.getConfig.call(this,clientConfig,type);uiLibrary=clientConfig.hasOwnProperty('uiLibrary')?clientConfig.uiLibrary:config.uiLibrary;if(gj.datepicker.config[uiLibrary]){$.extend(true,config.datepicker,gj.datepicker.config[uiLibrary]);}if(gj.timepicker.config[uiLibrary]){$.extend(true,config.timepicker,gj.timepicker.config[uiLibrary]);}iconsLibrary=clientConfig.hasOwnProperty('iconsLibrary')?clientConfig.iconsLibrary:config.iconsLibrary;if(gj.datepicker.config[iconsLibrary]){$.extend(true,config.datepicker,gj.datepicker.config[iconsLibrary]);}if(gj.timepicker.config[iconsLibrary]){$.extend(true,config.timepicker,gj.timepicker.config[iconsLibrary]);}return config;},initialize:function initialize($datetimepicker){var $picker,$header,$date,$time,date,$switch,$calendarMode,$clockMode,data=$datetimepicker.data();// Init datepicker
data.datepicker.uiLibrary=data.uiLibrary;data.datepicker.iconsLibrary=data.iconsLibrary;data.datepicker.width=data.width;data.datepicker.format=data.format;data.datepicker.locale=data.locale;data.datepicker.modal=data.modal;data.datepicker.footer=data.footer;data.datepicker.style.calendar=data.style.calendar;data.datepicker.value=data.value;data.datepicker.size=data.size;data.datepicker.autoClose=false;gj.datepicker.methods.initialize($datetimepicker,data.datepicker);$datetimepicker.on('select',function(e,type){var date,value;if(type==='day'){gj.datetimepicker.methods.createShowHourHandler($datetimepicker,$picker,data)();}else if(type==='minute'){if($picker.attr('selectedDay')&&data.footer!==true){selectedDay=$picker.attr('selectedDay').split('-');date=new Date(selectedDay[0],selectedDay[1],selectedDay[2],$picker.attr('hour')||0,$picker.attr('minute')||0);value=gj.core.formatDate(date,data.format,data.locale);$datetimepicker.val(value);gj.datetimepicker.events.change($datetimepicker);gj.datetimepicker.methods.close($datetimepicker);}}});$datetimepicker.on('open',function(){var $header=$picker.children('[role="header"]');$header.find('[role="calendarMode"]').addClass("selected");$header.find('[role="clockMode"]').removeClass("selected");});$picker=$('body').find('[role="calendar"][guid="'+$datetimepicker.attr('data-guid')+'"]');date=data.value?gj.core.parseDate(data.value,data.format,data.locale):new Date();$picker.attr('hour',date.getHours());$picker.attr('minute',date.getMinutes());// Init timepicker
data.timepicker.uiLibrary=data.uiLibrary;data.timepicker.iconsLibrary=data.iconsLibrary;data.timepicker.format=data.format;data.timepicker.locale=data.locale;data.timepicker.header=true;data.timepicker.footer=data.footer;data.timepicker.size=data.size;data.timepicker.mode='24hr';data.timepicker.autoClose=false;// Init header        
$header=$('<div role="header" />');$date=$('<div role="date" class="selected" />');$date.on('click',gj.datetimepicker.methods.createShowDateHandler($datetimepicker,$picker,data));$date.html(gj.core.formatDate(new Date(),'ddd, mmm dd',data.locale));$header.append($date);$switch=$('<div role="switch"></div>');$calendarMode=$('<i class="gj-icon selected" role="calendarMode">event</i>');$calendarMode.on('click',gj.datetimepicker.methods.createShowDateHandler($datetimepicker,$picker,data));$switch.append($calendarMode);$time=$('<div role="time" />');$time.append($('<div role="hour" />').on('click',gj.datetimepicker.methods.createShowHourHandler($datetimepicker,$picker,data)).html(gj.core.formatDate(new Date(),'HH',data.locale)));$time.append(':');$time.append($('<div role="minute" />').on('click',gj.datetimepicker.methods.createShowMinuteHandler($datetimepicker,$picker,data)).html(gj.core.formatDate(new Date(),'MM',data.locale)));$switch.append($time);$clockMode=$('<i class="gj-icon" role="clockMode">clock</i>');$clockMode.on('click',gj.datetimepicker.methods.createShowHourHandler($datetimepicker,$picker,data));$switch.append($clockMode);$header.append($switch);$picker.prepend($header);},createShowDateHandler:function createShowDateHandler($datetimepicker,$picker,data){return function(e){var $header=$picker.children('[role="header"]');$header.find('[role="calendarMode"]').addClass("selected");$header.find('[role="date"]').addClass("selected");$header.find('[role="clockMode"]').removeClass("selected");$header.find('[role="hour"]').removeClass("selected");$header.find('[role="minute"]').removeClass("selected");gj.datepicker.methods.renderMonth($datetimepicker,$picker,data.datepicker);};},createShowHourHandler:function createShowHourHandler($datetimepicker,$picker,data){return function(){var $header=$picker.children('[role="header"]');$header.find('[role="calendarMode"]').removeClass("selected");$header.find('[role="date"]').removeClass("selected");$header.find('[role="clockMode"]').addClass("selected");$header.find('[role="hour"]').addClass("selected");$header.find('[role="minute"]').removeClass("selected");gj.timepicker.methods.initMouse($picker.children('[role="body"]'),$datetimepicker,$picker,data.timepicker);gj.timepicker.methods.renderHours($datetimepicker,$picker,data.timepicker);};},createShowMinuteHandler:function createShowMinuteHandler($datetimepicker,$picker,data){return function(){var $header=$picker.children('[role="header"]');$header.find('[role="calendarMode"]').removeClass("selected");$header.find('[role="date"]').removeClass("selected");$header.find('[role="clockMode"]').addClass("selected");$header.find('[role="hour"]').removeClass("selected");$header.find('[role="minute"]').addClass("selected");gj.timepicker.methods.initMouse($picker.children('[role="body"]'),$datetimepicker,$picker,data.timepicker);gj.timepicker.methods.renderMinutes($datetimepicker,$picker,data.timepicker);};},close:function close($datetimepicker){var $calendar=$('body').find('[role="calendar"][guid="'+$datetimepicker.attr('data-guid')+'"]');$calendar.hide();$calendar.closest('div[role="modal"]').hide();//gj.datepicker.events.close($datepicker);
},value:function value($datetimepicker,_value4){var $calendar,date,hour,data=$datetimepicker.data();if(typeof _value4==="undefined"){return $datetimepicker.val();}else{date=gj.core.parseDate(_value4,data.format,data.locale);if(date){$calendar=$('body').find('[role="calendar"][guid="'+$datetimepicker.attr('data-guid')+'"]');gj.datepicker.methods.dayClickHandler($datetimepicker,$calendar,data,date)();// Set Time
hour=date.getHours();if(data.mode==='ampm'){$calendar.attr('mode',hour>12?'pm':'am');}$calendar.attr('hour',hour);$calendar.attr('minute',date.getMinutes());$datetimepicker.val(_value4);}else{$datetimepicker.val('');}return $datetimepicker;}},destroy:function destroy($datetimepicker){var data=$datetimepicker.data(),$parent=$datetimepicker.parent(),$picker=$('body').find('[role="calendar"][guid="'+$datetimepicker.attr('data-guid')+'"]');if(data){$datetimepicker.off();if($picker.parent('[role="modal"]').length>0){$picker.unwrap();}$picker.remove();$datetimepicker.removeData();$datetimepicker.removeAttr('data-type').removeAttr('data-guid').removeAttr('data-datetimepicker');$datetimepicker.removeClass();$parent.children('[role="right-icon"]').remove();$datetimepicker.unwrap();}return $datetimepicker;}};gj.datetimepicker.events={/**
     * Fires when the datetimepicker value changes as a result of selecting a new value.
     *
     * @event change
     * @param {object} e - event data
     * @example sample <!-- datetimepicker -->
     * <input id="input" width="312" />
     * <script>
     *     $('#input').datetimepicker({
     *         footer: true,
     *         modal: true,
     *         change: function (e) {
     *             alert('Change is fired');
     *         }
     *     });
     * </script>
     */change:function change($datetimepicker){return $datetimepicker.triggerHandler('change');}};gj.datetimepicker.widget=function($element,jsConfig){var self=this,methods=gj.datetimepicker.methods;self.mouseMove=false;/** Gets or sets the value of the datetimepicker.
     * @method
     * @param {string} value - The value that needs to be selected.
     * @return string
     * @example Get <!-- datetimepicker -->
     * <button class="gj-button-md" onclick="alert($datetimepicker.value())">Get Value</button>
     * <hr/>
     * <input id="datetimepicker" width="312" value="17:50 03/27/2018" />
     * <script>
     *     var $datetimepicker = $('#datetimepicker').datetimepicker();
     * </script>
     * @example Set <!-- datetimepicker -->
     * <button class="gj-button-md" onclick="$datetimepicker.value('13:40 08/01/2017')">Set Value</button>
     * <hr/>
     * <input id="datetimepicker" width="312" />
     * <script>
     *     var $datetimepicker = $('#datetimepicker').datetimepicker();
     * </script>
     */self.value=function(value){return methods.value(this,value);};/** Open the calendar.
     * @method
     * @return datetimepicker
     * @example Open.Close <!-- datetimepicker -->
     * <button class="gj-button-md" onclick="$picker.open()">Open</button>
     * <button class="gj-button-md" onclick="$picker.close()">Close</button>
     * <hr/>
     * <input id="input" width="312" />
     * <script>
     *     var $picker = $('#input').datetimepicker();
     * </script>
     */self.open=function(){gj.datepicker.methods.open(this,this.data().datepicker);};/** Close the calendar.
     * @method
     * @return datetimepicker
     * @example Open.Close <!-- datetimepicker -->
     * <button class="gj-button-md" onclick="$picker.open()">Open</button>
     * <button class="gj-button-md" onclick="$picker.close()">Close</button>
     * <hr/>
     * <input id="input" width="312" />
     * <script>
     *     var $picker = $('#input').datetimepicker();
     * </script>
     */self.close=function(){gj.datepicker.methods.close(this);};/** Remove datetimepicker functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- datetimepicker -->
     * <button class="gj-button-md" onclick="datetimepicker.destroy()">Destroy</button>
     * <input id="datetimepicker" width="312" />
     * <script>
     *     var datetimepicker = $('#datetimepicker').datetimepicker();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};$.extend($element,self);if('true'!==$element.attr('data-datetimepicker')){methods.init.call($element,jsConfig);}return $element;};gj.datetimepicker.widget.prototype=new gj.widget();gj.datetimepicker.widget.constructor=gj.datetimepicker.widget;gj.datetimepicker.widget.prototype.getConfig=gj.datetimepicker.methods.getConfig;(function($){$.fn.datetimepicker=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.datetimepicker.widget(this,method);}else{$widget=new gj.datetimepicker.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery gj */ /**
  * @widget Slider
  * @plugin Base
  */gj.slider={plugins:{},messages:{'en-us':{}}};gj.slider.config={base:{/** The minimum value of the Slider.
         * @type number
         * @default 0
         * @example JS.Config <!-- slider -->
         * <input id="slider" width="300" />
         * Value: <span id="value"></span>
         * <script>
         *    $('#slider').slider({
         *        min: 5,
         *        max: 15,
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         */min:0,/** The maximum value of the Slider.
         * @type number
         * @default 10
         * @example JS.Config <!-- slider -->
         * <input id="slider" width="300" />
         * Value: <span id="value"></span>
         * <script>
         *    $('#slider').slider({
         *        max: 20,
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         */max:100,/** The width of the slider.
         * @type number
         * @default undefined
         * @example JS.Config <!-- slider -->
         * <input id="slider" />
         * <script>
         *    $('#slider').slider({ width: 400 });
         * </script>
         * @example HTML.Config <!-- slider -->
         * <input id="slider" width="400" />
         * <script>
         *    $('#slider').slider();
         * </script>
         */width:undefined,/** The orientation of a Slider: "horizontal" or "vertical".
         * @type (horizontal|vertical)
         * @default horizontal
         */ // TODO orientation
/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- slider -->
         * <input id="slider" width="300" />
         * Value: <span id="value"></span>
         * <script>
         *    $('#slider').slider({
         *        uiLibrary: 'materialdesign',
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, slider -->
         * <input id="slider" width="300" />
         * Value: <span id="value"></span>
         * <script>
         *    $('#slider').slider({
         *        uiLibrary: 'bootstrap',
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, slider -->
         * <div class="container" />
         *     <input id="slider" width="300" />
         *     Value: <span id="value"></span>
         * </div>
         * <script>
         *    $('#slider').slider({
         *        uiLibrary: 'bootstrap4',
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         */uiLibrary:'materialdesign',/** The initial slider value.
         * @type number
         * @default undefined
         * @example Javascript <!-- slider -->
         * <input id="slider" width="300" />
         * Value: <span id="value"></span>
         * <script>
         *    $('#slider').slider({
         *        value: 30,
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         * @example HTML <!-- slider -->
         * <input id="slider" width="300" value="44" />
         * Value: <span id="value"></span>
         * <script>
         *    $('#slider').slider({
         *        slide: function (e, value) {
         *            document.getElementById('value').innerText = value;
         *        }
         *    });
         * </script>
         */value:undefined,icons:{},style:{wrapper:'gj-slider gj-slider-md',progress:undefined,track:undefined}},bootstrap:{style:{wrapper:'gj-slider gj-slider-bootstrap gj-slider-bootstrap-3',progress:'progress-bar',track:'progress'}},bootstrap4:{style:{wrapper:'gj-slider gj-slider-bootstrap gj-slider-bootstrap-4',progress:'progress-bar',track:'progress'}}};gj.slider.methods={init:function init(jsConfig){gj.widget.prototype.init.call(this,jsConfig,'slider');this.attr('data-slider','true');gj.slider.methods.initialize(this,this.data());return this;},initialize:function initialize($slider,data){var wrapper,track,handle,progress;$slider[0].style.display='none';if($slider[0].parentElement.attributes.role!=='wrapper'){wrapper=document.createElement('div');wrapper.setAttribute('role','wrapper');$slider[0].parentNode.insertBefore(wrapper,$slider[0]);wrapper.appendChild($slider[0]);}else{wrapper=$slider[0].parentElement;}if(data.width){wrapper.style.width=data.width+'px';}gj.core.addClasses(wrapper,data.style.wrapper);track=$slider[0].querySelector('[role="track"]');if(track==null){track=document.createElement('div');track.setAttribute('role','track');wrapper.appendChild(track);}gj.core.addClasses(track,data.style.track);handle=$slider[0].querySelector('[role="handle"]');if(handle==null){handle=document.createElement('div');handle.setAttribute('role','handle');wrapper.appendChild(handle);}progress=$slider[0].querySelector('[role="progress"]');if(progress==null){progress=document.createElement('div');progress.setAttribute('role','progress');wrapper.appendChild(progress);}gj.core.addClasses(progress,data.style.progress);if(!data.value){data.value=data.min;}gj.slider.methods.value($slider,data,data.value);gj.documentManager.subscribeForEvent('mouseup',$slider.data('guid'),gj.slider.methods.createMouseUpHandler($slider,handle,data));handle.addEventListener('mousedown',gj.slider.methods.createMouseDownHandler(handle,data));gj.documentManager.subscribeForEvent('mousemove',$slider.data('guid'),gj.slider.methods.createMouseMoveHandler($slider,track,handle,progress,data));handle.addEventListener('click',function(e){e.stopPropagation();});wrapper.addEventListener('click',gj.slider.methods.createClickHandler($slider,track,handle,data));},createClickHandler:function createClickHandler($slider,track,handle,data){return function(e){var sliderPos,x,offset,stepSize,newValue;if(handle.getAttribute('drag')!=='true'){sliderPos=gj.core.position($slider[0].parentElement);x=new gj.widget().mouseX(e)-sliderPos.left;offset=gj.core.width(handle)/2;stepSize=gj.core.width(track)/(data.max-data.min);newValue=Math.round((x-offset)/stepSize)+data.min;gj.slider.methods.value($slider,data,newValue);}};},createMouseUpHandler:function createMouseUpHandler($slider,handle,data){return function(e){if(handle.getAttribute('drag')==='true'){handle.setAttribute('drag','false');gj.slider.events.change($slider);}};},createMouseDownHandler:function createMouseDownHandler(handle,data){return function(e){handle.setAttribute('drag','true');};},createMouseMoveHandler:function createMouseMoveHandler($slider,track,handle,progress,data){return function(e){var sliderPos,x,trackWidth,offset,stepSize,valuePos,newValue;if(handle.getAttribute('drag')==='true'){sliderPos=gj.core.position($slider[0].parentElement);x=new gj.widget().mouseX(e)-sliderPos.left;trackWidth=gj.core.width(track);offset=gj.core.width(handle)/2;stepSize=trackWidth/(data.max-data.min);valuePos=(data.value-data.min)*stepSize;if(x>=offset&&x<=trackWidth+offset){if(x>valuePos+stepSize/2||x<valuePos-stepSize/2){newValue=Math.round((x-offset)/stepSize)+data.min;gj.slider.methods.value($slider,data,newValue);}}}};},value:function value($slider,data,_value5){var stepSize,track,handle,progress;if(typeof _value5==="undefined"){return $slider[0].value;}else{$slider[0].setAttribute('value',_value5);data.value=_value5;track=$slider.parent().children('[role="track"]')[0];stepSize=gj.core.width(track)/(data.max-data.min);handle=$slider.parent().children('[role="handle"]')[0];handle.style.left=(_value5-data.min)*stepSize+'px';progress=$slider.parent().children('[role="progress"]')[0];progress.style.width=(_value5-data.min)*stepSize+'px';gj.slider.events.slide($slider,_value5);return $slider;}},destroy:function destroy($slider){var data=$slider.data(),$wrapper=$slider.parent();if(data){$wrapper.children('[role="track"]').remove();$wrapper.children('[role="handle"]').remove();$wrapper.children('[role="progress"]').remove();$slider.unwrap();$slider.off();$slider.removeData();$slider.removeAttr('data-type').removeAttr('data-guid').removeAttr('data-slider');$slider.removeClass();$slider.show();}return $slider;}};gj.slider.events={/**
     * Fires when the slider value changes as a result of selecting a new value with the drag handle, buttons or keyboard.
     *
     * @event change
     * @param {object} e - event data
     * @example sample <!-- slider -->
     * <input id="slider" width="300" />
     * <script>
     *     var slider = $('#slider').slider({
     *         change: function (e) {
     *             alert('Change is fired. The new value is ' + slider.value());
     *         }
     *     });
     * </script>
     */change:function change($slider){return $slider.triggerHandler('change');},/**
     * Fires when the user drags the drag handle to a new position.
     * @event slide
     * @param {object} e - event data
     * @param {object} value - The value of the slider.
     * @example sample <!-- slider -->
     * <input id="slider" width="300" />
     * Value: <span id="value"></span>
     * <script>
     *    $('#slider').slider({
     *        value: 30,
     *        slide: function (e, value) {
     *            document.getElementById('value').innerText = value;
     *        }
     *    });
     * </script>
     */slide:function slide($slider,value){return $slider.triggerHandler('slide',[value]);}};gj.slider.widget=function($element,jsConfig){var self=this,methods=gj.slider.methods;/** Gets or sets the value of the slider.
     * @method
     * @param {string} value - The value that needs to be selected.
     * @return string
     * @example Get <!-- slider -->
     * <button class="gj-button-md" onclick="alert($slider.value())">Get Value</button>
     * <hr/>
     * <input id="slider" width="300" />
     * <script>
     *     var $slider = $('#slider').slider();
     * </script>
     * @example Set <!-- slider -->
     * <button class="gj-button-md" onclick="$slider.value(77)">Set Value</button>
     * <hr/>
     * <input id="slider" width="300"  />
     * <script>
     *     var $slider = $('#slider').slider();
     * </script>
     */self.value=function(value){return methods.value(this,this.data(),value);};/** Remove slider functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- slider -->
     * <button class="gj-button-md" onclick="slider.destroy()">Destroy</button>
     * <input id="slider" width="300" />
     * <script>
     *     var slider = $('#slider').slider();
     * </script>
     */self.destroy=function(){return methods.destroy(this);};$.extend($element,self);if('true'!==$element.attr('data-slider')){methods.init.call($element,jsConfig);}return $element;};gj.slider.widget.prototype=new gj.widget();gj.slider.widget.constructor=gj.slider.widget;(function($){$.fn.slider=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.slider.widget(this,method);}else{$widget=new gj.slider.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);/* global window alert jQuery gj */ /**
  * @widget ColorPicker
  * @plugin Base
  */gj.colorpicker={plugins:{},messages:{'en-us':{}}};gj.colorpicker.config={base:{/** The name of the UI library that is going to be in use.
         * @additionalinfo The css file for bootstrap should be manually included if you use bootstrap.
         * @type (materialdesign|bootstrap|bootstrap4)
         * @default materialdesign
         * @example MaterialDesign <!-- colorpicker -->
         * <input id="colorpicker" width="300" />
         * <script>
         *    $('#colorpicker').colorpicker({ uiLibrary: 'materialdesign' });
         * </script>
         * @example Bootstrap.3 <!-- bootstrap, colorpicker -->
         * <input id="colorpicker" width="300" />
         * <script>
         *     $('#colorpicker').colorpicker({ uiLibrary: 'bootstrap' });
         * </script>
         * @example Bootstrap.4 <!-- bootstrap4, colorpicker -->
         * <input id="colorpicker" width="300" />
         * <script>
         *     $('#colorpicker').colorpicker({ uiLibrary: 'bootstrap4' });
         * </script>
         */uiLibrary:'materialdesign',/** The initial colorpicker value.
         * @type number
         * @default undefined
         * @example Javascript <!-- colorpicker -->
         * <input id="colorpicker" width="300" />
         * <script>
         *    $('#colorpicker').colorpicker({ value: '#FF0000' });
         * </script>
         * @example HTML <!-- colorpicker -->
         * <input id="colorpicker" width="300" value="#FF0000" />
         * <script>
         *     $('#colorpicker').colorpicker();
         * </script>
         */value:undefined,icons:{rightIcon:'<i class="gj-icon">event</i>'},style:{modal:'gj-modal',wrapper:'gj-colorpicker gj-colorpicker-md gj-unselectable',input:'gj-textbox-md',picker:'gj-picker gj-picker-md colorpicker gj-unselectable',footer:'',button:'gj-button-md'}},bootstrap:{style:{}},bootstrap4:{style:{}}};gj.colorpicker.methods={init:function init(jsConfig){gj.picker.widget.prototype.init.call(this,jsConfig,'colorpicker');gj.colorpicker.methods.initialize(this);return this;},initialize:function initialize($colorpicker){},createPicker:function createPicker($input,data){var $picker=$('<div role="picker" />').addClass(data.style.picker).attr('guid',$input.attr('data-guid'));$picker.html('test');$picker.hide();$('body').append($picker);return $picker;},open:function open($input){if($input.val()){$input.value($input.val());}return gj.picker.widget.prototype.open.call($input,'colorpicker');}};gj.colorpicker.events={/**
     * Fires when the colorpicker value changes as a result of selecting a new value with the drag handle, buttons or keyboard.
     *
     * @event change
     * @param {object} e - event data
     * @example sample <!-- colorpicker -->
     * <input id="colorpicker" />
     * <script>
     *     $('#colorpicker').colorpicker({
     *         change: function (e) {
     *             console.log('Change is fired');
     *         }
     *     });
     * </script>
     */change:function change($colorpicker){return $colorpicker.triggerHandler('change');},/**
     * Fires as a new color is displayed in the drop-down picker.
     * @additionalinfo This is not necessarily the "final" value; for example this event triggers when the sliders in the HSV selector are dragged, but then pressing ESC would cancel the selection and the color will revert to the original value.
     * @event select
     * @param {object} e - event data
     * @example sample <!-- colorpicker -->
     * <input id="colorpicker" />
     * <script>
     *     $('#colorpicker').colorpicker({
     *         select: function (e) {
     *             console.log('select is fired');
     *         }
     *     });
     * </script>
     */select:function select($colorpicker){return $colorpicker.triggerHandler('select');},/**
     * Fires when the picker popup is opening.
     * @event open
     * @param {object} e - event data
     * @example sample <!-- colorpicker -->
     * <input id="colorpicker" />
     * <script>
     *     $('#colorpicker').colorpicker({
     *         open: function (e) {
     *             console.log('open is fired');
     *         }
     *     });
     * </script>
     */open:function open($colorpicker){return $colorpicker.triggerHandler('open');},/**
     * Fires when the picker popup is closing.
     * @event close
     * @param {object} e - event data
     * @example sample <!-- colorpicker -->
     * <input id="colorpicker" />
     * <script>
     *     $('#colorpicker').colorpicker({
     *         close: function (e) {
     *             console.log('close is fired');
     *         }
     *     });
     * </script>
     */close:function close($colorpicker){return $colorpicker.triggerHandler('close');}};gj.colorpicker.widget=function($element,jsConfig){var self=this,methods=gj.colorpicker.methods;/** Gets or sets the value of the colorpicker.
     * @method
     * @param {string} value - The value that needs to be selected.
     * @return string
     * @example Get <!-- colorpicker -->
     * <button class="gj-button-md" onclick="alert($colorpicker.value())">Get Value</button>
     * <hr/>
     * <input id="colorpicker" />
     * <script>
     *     var $colorpicker = $('#colorpicker').colorpicker();
     * </script>
     * @example Set <!-- colorpicker -->
     * <button class="gj-button-md" onclick="$colorpicker.value('#FF0000')">Set Value</button>
     * <hr/>
     * <input id="colorpicker" />
     * <script>
     *     var $colorpicker = $('#colorpicker').colorpicker();
     * </script>
     */self.value=function(value){return methods.value(this,value);};/** Remove colorpicker functionality from the element.
     * @method
     * @return jquery element
     * @example sample <!-- colorpicker -->
     * <button class="gj-button-md" onclick="colorpicker.destroy()">Destroy</button>
     * <input id="colorpicker" />
     * <script>
     *     var colorpicker = $('#colorpicker').colorpicker();
     * </script>
     */self.destroy=function(){return gj.picker.widget.prototype.destroy.call(this,'colorpicker');};/** Opens the popup element with the color selector.
     * @method
     * @return jquery element
     * @example sample <!-- colorpicker -->
     * <button class="gj-button-md" onclick="colorpicker.open()">Open</button>
     * <input id="colorpicker" />
     * <script>
     *     var colorpicker = $('#colorpicker').colorpicker();
     * </script>
     */self.open=function(){return methods.open(this);};/** Close the popup element with the color selector.
     * @method
     * @return jquery element
     * @example sample <!-- colorpicker -->
     * <button class="gj-button-md" onclick="colorpicker.close()">Close</button>
     * <input id="colorpicker" />
     * <script>
     *     var colorpicker = $('#colorpicker').colorpicker();
     * </script>
     */self.close=function(){return gj.picker.widget.prototype.close.call(this,'colorpicker');};$.extend($element,self);if('true'!==$element.attr('data-colorpicker')){methods.init.call($element,jsConfig);}return $element;};gj.colorpicker.widget.prototype=new gj.picker.widget();gj.colorpicker.widget.constructor=gj.colorpicker.widget;(function($){$.fn.colorpicker=function(method){var $widget;if(this&&this.length){if(_typeof(method)==='object'||!method){return new gj.colorpicker.widget(this,method);}else{$widget=new gj.colorpicker.widget(this,null);if($widget[method]){return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));}else{throw'Method '+method+' does not exist.';}}}};})(jQuery);

/***/ }),

/***/ "./resources/sass/app.scss":
/*!*********************************!*\
  !*** ./resources/sass/app.scss ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 0:
/*!*************************************************************!*\
  !*** multi ./resources/js/app.js ./resources/sass/app.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! C:\xampp\htdocs\artdiscovery\resources\js\app.js */"./resources/js/app.js");
module.exports = __webpack_require__(/*! C:\xampp\htdocs\artdiscovery\resources\sass\app.scss */"./resources/sass/app.scss");


/***/ })

/******/ });